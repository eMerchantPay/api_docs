
<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>API Reference</title>

    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #f6aa11;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #f6aa11;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .cd {
  color: #75715e;
}
.highlight .err {
  color: #960050;
}
.highlight .gr {
  color: #960050;
}
.highlight .gt {
  color: #960050;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #66d9ef;
}
.highlight .kd {
  color: #66d9ef;
}
.highlight .kr {
  color: #66d9ef;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .kt {
  color: #66d9ef;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #e6db74;
}
.highlight .s2 {
  color: #e6db74;
}
.highlight .sb {
  color: #e6db74;
}
.highlight .sh {
  color: #e6db74;
}
.highlight .si {
  color: #e6db74;
}
.highlight .sx {
  color: #e6db74;
}
.highlight .s1 {
  color: #e6db74;
}
.highlight .s {
  color: #e6db74;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
}
.highlight .nd {
  color: #a6e22e;
}
.highlight .ne {
  color: #a6e22e;
}
.highlight .nf {
  color: #a6e22e;
}
.highlight .vc {
  color: #ffffff;
}
.highlight .nn {
  color: #ffffff;
}
.highlight .nl {
  color: #ffffff;
}
.highlight .ni {
  color: #ffffff;
}
.highlight .bp {
  color: #ffffff;
}
.highlight .vg {
  color: #ffffff;
}
.highlight .vi {
  color: #ffffff;
}
.highlight .nv {
  color: #ffffff;
}
.highlight .w {
  color: #ffffff;
}
.highlight {
  color: #ffffff;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
}
.highlight .ow {
  color: #f92672;
}
.highlight .nt {
  color: #f92672;
}
.highlight .k, .highlight .kv {
  color: #f92672;
}
.highlight .kn {
  color: #f92672;
}
.highlight .kp {
  color: #f92672;
}
.highlight .o {
  color: #f92672;
}
    </style>
    <link href="stylesheets/screen.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" media="print" />
      <script src="javascripts/all.js"></script>
    <script>var brand = 'emp'</script>
  </head>

  <body class="index" data-languages="[&quot;shell&quot;,&quot;php&quot;,&quot;java&quot;,&quot;javascript--node&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" alt="Navbar" />
      </span>
    </a>
    <div class="toc-wrapper">
      <img src="images/logo-emp.svg" class="logo" alt="Logo emp" />
        <div class="lang-selector">
              <a href="#" data-language-name="shell">cURL</a>
              <a href="#" data-language-name="php">PHP</a>
              <a href="#" data-language-name="java">Java</a>
              <a href="#" data-language-name="javascript--node">Node.js</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <div id="toc" class="toc-list-h1">
          <li>
            <a href="#version" class="toc-h1 toc-link" data-title="Version">Version</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#history" class="toc-h2 toc-link" data-title="History">History</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#introduction" class="toc-h1 toc-link" data-title="Introduction">Introduction</a>
          </li>
          <li>
            <a href="#authentication" class="toc-h1 toc-link" data-title="Authentication">Authentication</a>
          </li>
          <li>
            <a href="#urls" class="toc-h1 toc-link" data-title="URLs">URLs</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#server-api" class="toc-h2 toc-link" data-title="Server API">Server API</a>
                  </li>
                  <li>
                    <a href="#wpf" class="toc-h2 toc-link" data-title="WPF">WPF</a>
                  </li>
                  <li>
                    <a href="#consumer-api-urls" class="toc-h2 toc-link" data-title="Consumer API">Consumer API</a>
                  </li>
                  <li>
                    <a href="#tokenization-api" class="toc-h2 toc-link" data-title="Tokenization API">Tokenization API</a>
                  </li>
                  <li>
                    <a href="#genesis-kyc-services-json-api" class="toc-h2 toc-link" data-title="Genesis KYC Services JSON API">Genesis KYC Services JSON API</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#transactions" class="toc-h1 toc-link" data-title="Transactions">Transactions</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#invoking-a-transaction" class="toc-h2 toc-link" data-title="Invoking a Transaction">Invoking a Transaction</a>
                  </li>
                  <li>
                    <a href="#card" class="toc-h2 toc-link" data-title="Card">Card</a>
                      <ul class="toc-list-h3">
                          <li>
                            <a href="#authorize" class="toc-h3 toc-link" data-title="Transactions:Authorize">Authorize</a>
                          </li>
                          <li>
                            <a href="#capture" class="toc-h3 toc-link" data-title="Transactions:Capture">Capture</a>
                          </li>
                          <li>
                            <a href="#sale" class="toc-h3 toc-link" data-title="Transactions:Sale">Sale</a>
                          </li>
                          <li>
                            <a href="#argencard" class="toc-h3 toc-link" data-title="Transactions:Argencard">Argencard</a>
                          </li>
                          <li>
                            <a href="#aura" class="toc-h3 toc-link" data-title="Transactions:Aura">Aura</a>
                          </li>
                          <li>
                            <a href="#bancontact" class="toc-h3 toc-link" data-title="Transactions:Bancontact">Bancontact</a>
                          </li>
                          <li>
                            <a href="#cabal" class="toc-h3 toc-link" data-title="Transactions:Cabal">Cabal</a>
                          </li>
                          <li>
                            <a href="#cencosud" class="toc-h3 toc-link" data-title="Transactions:Cencosud">Cencosud</a>
                          </li>
                          <li>
                            <a href="#credit-cft" class="toc-h3 toc-link" data-title="Transactions:Credit (CFT)">Credit (CFT)</a>
                          </li>
                          <li>
                            <a href="#elo" class="toc-h3 toc-link" data-title="Transactions:Elo">Elo</a>
                          </li>
                          <li>
                            <a href="#hipercard" class="toc-h3 toc-link" data-title="Transactions:Hipercard">Hipercard</a>
                          </li>
                          <li>
                            <a href="#naranja" class="toc-h3 toc-link" data-title="Transactions:Naranja">Naranja</a>
                          </li>
                          <li>
                            <a href="#nativa" class="toc-h3 toc-link" data-title="Transactions:Nativa">Nativa</a>
                          </li>
                          <li>
                            <a href="#tarjeta-shopping" class="toc-h3 toc-link" data-title="Transactions:Tarjeta Shopping">Tarjeta Shopping</a>
                          </li>
                      </ul>
                  </li>
                  <li>
                    <a href="#non-financial-transactions" class="toc-h2 toc-link" data-title="Non-financial Transactions">Non-financial Transactions</a>
                      <ul class="toc-list-h3">
                          <li>
                            <a href="#account-verification" class="toc-h3 toc-link" data-title="Transactions:Account Verification">Account Verification</a>
                          </li>
                      </ul>
                  </li>
                  <li>
                    <a href="#3ds-card" class="toc-h2 toc-link" data-title="3DS Card">3DS Card</a>
                      <ul class="toc-list-h3">
                          <li>
                            <a href="#authorize-3d" class="toc-h3 toc-link" data-title="Transactions:Authorize 3D">Authorize 3D</a>
                          </li>
                          <li>
                            <a href="#sale-3d" class="toc-h3 toc-link" data-title="Transactions:Sale 3D">Sale 3D</a>
                          </li>
                          <li>
                            <a href="#init-recurring-sale-3d" class="toc-h3 toc-link" data-title="Transactions:Init Recurring Sale 3D">Init Recurring Sale 3D</a>
                          </li>
                          <li>
                            <a href="#notification-for-asynchronous-payments" class="toc-h3 toc-link" data-title="Transactions:Notification for Asynchronous Payments">Notification for Asynchronous Payments</a>
                          </li>
                      </ul>
                  </li>
                  <li>
                    <a href="#recurring-transactions" class="toc-h2 toc-link" data-title="Recurring Transactions">Recurring Transactions</a>
                      <ul class="toc-list-h3">
                          <li>
                            <a href="#init-recurring-sale" class="toc-h3 toc-link" data-title="Transactions:Init Recurring Sale">Init Recurring Sale</a>
                          </li>
                          <li>
                            <a href="#recurring-sale" class="toc-h3 toc-link" data-title="Transactions:Recurring Sale">Recurring Sale</a>
                          </li>
                      </ul>
                  </li>
                  <li>
                    <a href="#wallets" class="toc-h2 toc-link" data-title="Wallets">Wallets</a>
                      <ul class="toc-list-h3">
                          <li>
                            <a href="#neteller" class="toc-h3 toc-link" data-title="Transactions:Neteller">Neteller</a>
                          </li>
                          <li>
                            <a href="#paypal-express-checkout" class="toc-h3 toc-link" data-title="Transactions:PayPal Express Checkout">PayPal Express Checkout</a>
                          </li>
                          <li>
                            <a href="#qiwi" class="toc-h3 toc-link" data-title="Transactions:QIWI">QIWI</a>
                          </li>
                          <li>
                            <a href="#webmoney" class="toc-h3 toc-link" data-title="Transactions:WebMoney">WebMoney</a>
                          </li>
                          <li>
                            <a href="#wechat" class="toc-h3 toc-link" data-title="Transactions:Wechat">Wechat</a>
                          </li>
                          <li>
                            <a href="#zimpler" class="toc-h3 toc-link" data-title="Transactions:Zimpler">Zimpler</a>
                          </li>
                      </ul>
                  </li>
                  <li>
                    <a href="#vouchers" class="toc-h2 toc-link" data-title="Vouchers">Vouchers</a>
                      <ul class="toc-list-h3">
                          <li>
                            <a href="#astropay-card" class="toc-h3 toc-link" data-title="Transactions:Astropay Card">Astropay Card</a>
                          </li>
                          <li>
                            <a href="#cashu" class="toc-h3 toc-link" data-title="Transactions:CashU">CashU</a>
                          </li>
                          <li>
                            <a href="#neosurf" class="toc-h3 toc-link" data-title="Transactions:Neosurf">Neosurf</a>
                          </li>
                          <li>
                            <a href="#paysafecard" class="toc-h3 toc-link" data-title="Transactions:Paysafecard">Paysafecard</a>
                          </li>
                      </ul>
                  </li>
                  <li>
                    <a href="#online-banking-epayments-obep" class="toc-h2 toc-link" data-title="Online Banking ePayments (oBeP)">Online Banking ePayments (oBeP)</a>
                      <ul class="toc-list-h3">
                          <li>
                            <a href="#astropay-direct" class="toc-h3 toc-link" data-title="Transactions:Astropay Direct">Astropay Direct</a>
                          </li>
                          <li>
                            <a href="#banco-do-brasil" class="toc-h3 toc-link" data-title="Transactions:Banco do Brasil">Banco do Brasil</a>
                          </li>
                          <li>
                            <a href="#bancomer" class="toc-h3 toc-link" data-title="Transactions:Bancomer">Bancomer</a>
                          </li>
                          <li>
                            <a href="#bradesco" class="toc-h3 toc-link" data-title="Transactions:Bradesco">Bradesco</a>
                          </li>
                          <li>
                            <a href="#entercash" class="toc-h3 toc-link" data-title="Transactions:Entercash">Entercash</a>
                          </li>
                          <li>
                            <a href="#eps" class="toc-h3 toc-link" data-title="Transactions:EPS">EPS</a>
                          </li>
                          <li>
                            <a href="#giropay" class="toc-h3 toc-link" data-title="Transactions:GiroPay">GiroPay</a>
                          </li>
                          <li>
                            <a href="#idebit" class="toc-h3 toc-link" data-title="Transactions:iDebit">iDebit</a>
                              <ul class="toc-list-h4">
                                  <li>
                                    <a href="#payin" class="toc-h4 toc-link" data-title="Transactions">Payin</a>
                                  </li>
                                  <li>
                                    <a href="#payout" class="toc-h4 toc-link" data-title="Transactions">Payout</a>
                                  </li>
                              </ul>
                          </li>
                          <li>
                            <a href="#ideal" class="toc-h3 toc-link" data-title="Transactions:iDeal">iDeal</a>
                          </li>
                          <li>
                            <a href="#instadebit" class="toc-h3 toc-link" data-title="Transactions:InstaDebit">InstaDebit</a>
                              <ul class="toc-list-h4">
                                  <li>
                                    <a href="#payin-2" class="toc-h4 toc-link" data-title="Transactions">Payin</a>
                                  </li>
                                  <li>
                                    <a href="#payout-2" class="toc-h4 toc-link" data-title="Transactions">Payout</a>
                                  </li>
                              </ul>
                          </li>
                          <li>
                            <a href="#instanttransfer" class="toc-h3 toc-link" data-title="Transactions:InstantTransfer">InstantTransfer</a>
                          </li>
                          <li>
                            <a href="#itau" class="toc-h3 toc-link" data-title="Transactions:Itau">Itau</a>
                          </li>
                          <li>
                            <a href="#multibanco" class="toc-h3 toc-link" data-title="Transactions:Multibanco">Multibanco</a>
                          </li>
                          <li>
                            <a href="#my-bank" class="toc-h3 toc-link" data-title="Transactions:My Bank">My Bank</a>
                          </li>
                          <li>
                            <a href="#online-banking" class="toc-h3 toc-link" data-title="Transactions:Online Banking">Online Banking</a>
                              <ul class="toc-list-h4">
                                  <li>
                                    <a href="#bank-codes" class="toc-h4 toc-link" data-title="Transactions">Bank Codes</a>
                                  </li>
                              </ul>
                          </li>
                          <li>
                            <a href="#p24" class="toc-h3 toc-link" data-title="Transactions:P24">P24</a>
                          </li>
                          <li>
                            <a href="#payu" class="toc-h3 toc-link" data-title="Transactions:PayU">PayU</a>
                          </li>
                          <li>
                            <a href="#poli" class="toc-h3 toc-link" data-title="Transactions:POLi">POLi</a>
                          </li>
                          <li>
                            <a href="#pse-pagos-seguros-en-linea" class="toc-h3 toc-link" data-title="Transactions:PSE (Pagos Seguros en Linea)">PSE (Pagos Seguros en Linea)</a>
                          </li>
                          <li>
                            <a href="#qqpay" class="toc-h3 toc-link" data-title="Transactions:QQPay">QQPay</a>
                          </li>
                          <li>
                            <a href="#rapipago" class="toc-h3 toc-link" data-title="Transactions:Rapipago">Rapipago</a>
                          </li>
                          <li>
                            <a href="#safetypay" class="toc-h3 toc-link" data-title="Transactions:SafetyPay">SafetyPay</a>
                          </li>
                          <li>
                            <a href="#santander" class="toc-h3 toc-link" data-title="Transactions:Santander">Santander</a>
                          </li>
                          <li>
                            <a href="#sdd-init-recurring-sale" class="toc-h3 toc-link" data-title="Transactions:SDD Init Recurring Sale">SDD Init Recurring Sale</a>
                          </li>
                          <li>
                            <a href="#sdd-recurring-sale" class="toc-h3 toc-link" data-title="Transactions:SDD Recurring Sale">SDD Recurring Sale</a>
                          </li>
                          <li>
                            <a href="#sdd-refund" class="toc-h3 toc-link" data-title="Transactions:SDD Refund">SDD Refund</a>
                          </li>
                          <li>
                            <a href="#sdd-sale" class="toc-h3 toc-link" data-title="Transactions:SDD Sale">SDD Sale</a>
                          </li>
                          <li>
                            <a href="#sofort" class="toc-h3 toc-link" data-title="Transactions:Sofort">Sofort</a>
                          </li>
                          <li>
                            <a href="#trustly-sale" class="toc-h3 toc-link" data-title="Transactions:Trustly Sale">Trustly Sale</a>
                          </li>
                          <li>
                            <a href="#trustpay" class="toc-h3 toc-link" data-title="Transactions:TrustPay">TrustPay</a>
                          </li>
                          <li>
                            <a href="#webpay" class="toc-h3 toc-link" data-title="Transactions:Webpay">Webpay</a>
                          </li>
                      </ul>
                  </li>
                  <li>
                    <a href="#cash-payments" class="toc-h2 toc-link" data-title="Cash Payments">Cash Payments</a>
                      <ul class="toc-list-h3">
                          <li>
                            <a href="#baloto" class="toc-h3 toc-link" data-title="Transactions:Baloto">Baloto</a>
                          </li>
                          <li>
                            <a href="#banamex" class="toc-h3 toc-link" data-title="Transactions:Banamex">Banamex</a>
                          </li>
                          <li>
                            <a href="#banco-de-occidente" class="toc-h3 toc-link" data-title="Transactions:Banco de Occidente">Banco de Occidente</a>
                          </li>
                          <li>
                            <a href="#boleto" class="toc-h3 toc-link" data-title="Transactions:Boleto">Boleto</a>
                          </li>
                          <li>
                            <a href="#carulla" class="toc-h3 toc-link" data-title="Transactions:Carulla">Carulla</a>
                          </li>
                          <li>
                            <a href="#efecty" class="toc-h3 toc-link" data-title="Transactions:Efecty">Efecty</a>
                          </li>
                          <li>
                            <a href="#emprese-de-energia" class="toc-h3 toc-link" data-title="Transactions:Emprese De Energia">Emprese De Energia</a>
                          </li>
                          <li>
                            <a href="#oxxo" class="toc-h3 toc-link" data-title="Transactions:OXXO">OXXO</a>
                          </li>
                          <li>
                            <a href="#pago-facil" class="toc-h3 toc-link" data-title="Transactions:Pago Facil">Pago Facil</a>
                          </li>
                          <li>
                            <a href="#redpagos" class="toc-h3 toc-link" data-title="Transactions:Redpagos">Redpagos</a>
                          </li>
                          <li>
                            <a href="#santander-cash" class="toc-h3 toc-link" data-title="Transactions:Santander Cash">Santander Cash</a>
                          </li>
                          <li>
                            <a href="#surtimax" class="toc-h3 toc-link" data-title="Transactions:Surtimax">Surtimax</a>
                          </li>
                      </ul>
                  </li>
                  <li>
                    <a href="#gift-cards" class="toc-h2 toc-link" data-title="Gift Cards">Gift Cards</a>
                      <ul class="toc-list-h3">
                          <li>
                            <a href="#intersolve" class="toc-h3 toc-link" data-title="Transactions:Intersolve">Intersolve</a>
                          </li>
                          <li>
                            <a href="#fashioncheque" class="toc-h3 toc-link" data-title="Transactions:Fashioncheque">Fashioncheque</a>
                          </li>
                          <li>
                            <a href="#tcs" class="toc-h3 toc-link" data-title="Transactions:TCS">TCS</a>
                          </li>
                          <li>
                            <a href="#split-payments" class="toc-h3 toc-link" data-title="Transactions:Split Payments">Split Payments</a>
                          </li>
                      </ul>
                  </li>
                  <li>
                    <a href="#invoice-payment-methods" class="toc-h2 toc-link" data-title="Invoice Payment Methods">Invoice Payment Methods</a>
                      <ul class="toc-list-h3">
                          <li>
                            <a href="#klarna-authorize" class="toc-h3 toc-link" data-title="Transactions:Klarna Authorize">Klarna Authorize</a>
                          </li>
                          <li>
                            <a href="#klarna-capture" class="toc-h3 toc-link" data-title="Transactions:Klarna Capture">Klarna Capture</a>
                          </li>
                      </ul>
                  </li>
                  <li>
                    <a href="#crypto" class="toc-h2 toc-link" data-title="Crypto">Crypto</a>
                      <ul class="toc-list-h3">
                          <li>
                            <a href="#bitpay-sale" class="toc-h3 toc-link" data-title="Transactions:BitPay Sale">BitPay Sale</a>
                          </li>
                      </ul>
                  </li>
                  <li>
                    <a href="#payouts" class="toc-h2 toc-link" data-title="Payouts">Payouts</a>
                      <ul class="toc-list-h3">
                          <li>
                            <a href="#bank-pay-out" class="toc-h3 toc-link" data-title="Transactions:Bank Pay-out">Bank Pay-out</a>
                              <ul class="toc-list-h4">
                                  <li>
                                    <a href="#bank-names" class="toc-h4 toc-link" data-title="Transactions">Bank Names</a>
                                  </li>
                              </ul>
                          </li>
                          <li>
                            <a href="#bitpay-payout" class="toc-h3 toc-link" data-title="Transactions:BitPay Payout">BitPay Payout</a>
                          </li>
                          <li>
                            <a href="#ezeecard-payout" class="toc-h3 toc-link" data-title="Transactions:eZeeCard Payout">eZeeCard Payout</a>
                          </li>
                          <li>
                            <a href="#payout-3" class="toc-h3 toc-link" data-title="Transactions:Payout">Payout</a>
                          </li>
                          <li>
                            <a href="#sct-payout" class="toc-h3 toc-link" data-title="Transactions:SCT Payout">SCT Payout</a>
                          </li>
                          <li>
                            <a href="#trustly-withdrawal" class="toc-h3 toc-link" data-title="Transactions:Trustly Withdrawal">Trustly Withdrawal</a>
                          </li>
                          <li>
                            <a href="#tola-payout" class="toc-h3 toc-link" data-title="Transactions:Tola Payout">Tola Payout</a>
                          </li>
                      </ul>
                  </li>
                  <li>
                    <a href="#mobile-payments" class="toc-h2 toc-link" data-title="Mobile Payments">Mobile Payments</a>
                      <ul class="toc-list-h3">
                          <li>
                            <a href="#tola-sale" class="toc-h3 toc-link" data-title="Transactions:Tola Sale">Tola Sale</a>
                          </li>
                      </ul>
                  </li>
                  <li>
                    <a href="#reversals" class="toc-h2 toc-link" data-title="Reversals">Reversals</a>
                      <ul class="toc-list-h3">
                          <li>
                            <a href="#refund" class="toc-h3 toc-link" data-title="Transactions:Refund">Refund</a>
                          </li>
                          <li>
                            <a href="#void" class="toc-h3 toc-link" data-title="Transactions:Void">Void</a>
                          </li>
                          <li>
                            <a href="#klarna-refund" class="toc-h3 toc-link" data-title="Transactions:Klarna Refund">Klarna Refund</a>
                          </li>
                          <li>
                            <a href="#bitpay-refund" class="toc-h3 toc-link" data-title="Transactions:BitPay Refund">BitPay Refund</a>
                          </li>
                      </ul>
                  </li>
                  <li>
                    <a href="#alternative-payment-method-external-events" class="toc-h2 toc-link" data-title="Alternative Payment Method External Events">Alternative Payment Method External Events</a>
                      <ul class="toc-list-h3">
                          <li>
                            <a href="#introduction-2" class="toc-h3 toc-link" data-title="Transactions:Introduction">Introduction</a>
                          </li>
                          <li>
                            <a href="#list-of-external-events-per-alternative-payment-method" class="toc-h3 toc-link" data-title="Transactions:List of external events per alternative payment method">List of external events per alternative payment method</a>
                          </li>
                          <li>
                            <a href="#email-notification" class="toc-h3 toc-link" data-title="Transactions:Email Notification">Email Notification</a>
                          </li>
                          <li>
                            <a href="#api-notification" class="toc-h3 toc-link" data-title="Transactions:API Notification">API Notification</a>
                          </li>
                      </ul>
                  </li>
                  <li>
                    <a href="#advanced-risk-management-with-riskparams" class="toc-h2 toc-link" data-title="Advanced risk management with RiskParams">Advanced risk management with RiskParams</a>
                  </li>
                  <li>
                    <a href="#credential-on-file-cof" class="toc-h2 toc-link" data-title="Credential On File (COF)">Credential On File (COF)</a>
                  </li>
                  <li>
                    <a href="#currency-and-amount-handling" class="toc-h2 toc-link" data-title="Currency and Amount Handling">Currency and Amount Handling</a>
                  </li>
                  <li>
                    <a href="#dynamic-descriptor" class="toc-h2 toc-link" data-title="Dynamic Descriptor">Dynamic Descriptor</a>
                  </li>
                  <li>
                    <a href="#electronic-commerce-indicator" class="toc-h2 toc-link" data-title="Electronic Commerce Indicator">Electronic Commerce Indicator</a>
                  </li>
                  <li>
                    <a href="#issuer-response-codes" class="toc-h2 toc-link" data-title="Issuer Response Codes">Issuer Response Codes</a>
                  </li>
                  <li>
                    <a href="#manually-reviewed-transactions" class="toc-h2 toc-link" data-title="Manually Reviewed Transactions">Manually Reviewed Transactions</a>
                  </li>
                  <li>
                    <a href="#partial-approvals" class="toc-h2 toc-link" data-title="Partial Approvals">Partial Approvals</a>
                  </li>
                  <li>
                    <a href="#required-vs-optional-api-params" class="toc-h2 toc-link" data-title="Required vs Optional API params">Required vs Optional API params</a>
                  </li>
                  <li>
                    <a href="#transaction-states" class="toc-h2 toc-link" data-title="Transaction States">Transaction States</a>
                  </li>
                  <li>
                    <a href="#supported-card-brands" class="toc-h2 toc-link" data-title="Supported Card Brands">Supported Card Brands</a>
                  </li>
                  <li>
                    <a href="#document-id-parameter" class="toc-h2 toc-link" data-title="Document ID Parameter">Document ID Parameter</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#reconcile" class="toc-h1 toc-link" data-title="Reconcile">Reconcile</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#single-transaction" class="toc-h2 toc-link" data-title="Single Transaction">Single Transaction</a>
                  </li>
                  <li>
                    <a href="#by-date-range" class="toc-h2 toc-link" data-title="By date range">By date range</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#chargebacks" class="toc-h1 toc-link" data-title="Chargebacks">Chargebacks</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#chargeback-notifications" class="toc-h2 toc-link" data-title="Chargeback notifications">Chargeback notifications</a>
                  </li>
                  <li>
                    <a href="#chargeback-api" class="toc-h2 toc-link" data-title="Chargeback API">Chargeback API</a>
                  </li>
                  <li>
                    <a href="#single-chargeback" class="toc-h2 toc-link" data-title="Single Chargeback">Single Chargeback</a>
                  </li>
                  <li>
                    <a href="#by-date-range-2" class="toc-h2 toc-link" data-title="By date range">By date range</a>
                  </li>
                  <li>
                    <a href="#chargeback-types" class="toc-h2 toc-link" data-title="Chargeback types">Chargeback types</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#retrieval-requests" class="toc-h1 toc-link" data-title="Retrieval Requests">Retrieval Requests</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#retrieval-request-notifications" class="toc-h2 toc-link" data-title="Retrieval Request notifications">Retrieval Request notifications</a>
                  </li>
                  <li>
                    <a href="#retrieval-request-api" class="toc-h2 toc-link" data-title="Retrieval Request API">Retrieval Request API</a>
                  </li>
                  <li>
                    <a href="#single-retrieval-request" class="toc-h2 toc-link" data-title="Single Retrieval Request">Single Retrieval Request</a>
                  </li>
                  <li>
                    <a href="#by-date-range-3" class="toc-h2 toc-link" data-title="By date range">By date range</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#fraud-reports" class="toc-h1 toc-link" data-title="Fraud reports">Fraud reports</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#safe-tc40-api" class="toc-h2 toc-link" data-title="SAFE/TC40 API">SAFE/TC40 API</a>
                  </li>
                  <li>
                    <a href="#single-safe-tc40-report" class="toc-h2 toc-link" data-title="Single SAFE/TC40 report">Single SAFE/TC40 report</a>
                  </li>
                  <li>
                    <a href="#by-date-range-4" class="toc-h2 toc-link" data-title="By date range">By date range</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#blacklists" class="toc-h1 toc-link" data-title="Blacklists">Blacklists</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#invoking-a-request" class="toc-h2 toc-link" data-title="Invoking a Request">Invoking a Request</a>
                  </li>
                  <li>
                    <a href="#response" class="toc-h2 toc-link" data-title="Response">Response</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#asynchronous-transactions-and-notifications" class="toc-h1 toc-link" data-title="Asynchronous Transactions and Notifications">Asynchronous Transactions and Notifications</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#asynchronous-transactions" class="toc-h2 toc-link" data-title="Asynchronous Transactions">Asynchronous Transactions</a>
                  </li>
                  <li>
                    <a href="#notifications" class="toc-h2 toc-link" data-title="Notifications">Notifications</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#wpf-2" class="toc-h1 toc-link" data-title="WPF">WPF</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#workflow" class="toc-h2 toc-link" data-title="Workflow">Workflow</a>
                  </li>
                  <li>
                    <a href="#wpf-api" class="toc-h2 toc-link" data-title="WPF API">WPF API</a>
                      <ul class="toc-list-h3">
                          <li>
                            <a href="#urls-2" class="toc-h3 toc-link" data-title="WPF:URLs">URLs</a>
                          </li>
                          <li>
                            <a href="#create" class="toc-h3 toc-link" data-title="WPF:Create">Create</a>
                          </li>
                          <li>
                            <a href="#notification" class="toc-h3 toc-link" data-title="WPF:Notification">Notification</a>
                          </li>
                          <li>
                            <a href="#reconcile-2" class="toc-h3 toc-link" data-title="WPF:Reconcile">Reconcile</a>
                          </li>
                          <li>
                            <a href="#errors" class="toc-h3 toc-link" data-title="WPF:Errors">Errors</a>
                          </li>
                      </ul>
                  </li>
                  <li>
                    <a href="#wpf-transaction-types" class="toc-h2 toc-link" data-title="WPF transaction types">WPF transaction types</a>
                  </li>
                  <li>
                    <a href="#wpf-internationalization-i18n" class="toc-h2 toc-link" data-title="WPF Internationalization (i18n)">WPF Internationalization (i18n)</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#authentication-services" class="toc-h1 toc-link" data-title="Authentication Services">Authentication Services</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#introduction-3" class="toc-h2 toc-link" data-title="Introduction">Introduction</a>
                      <ul class="toc-list-h3">
                          <li>
                            <a href="#sca-with-3dsecure" class="toc-h3 toc-link" data-title="Authentication Services:SCA with 3DSecure">SCA with 3DSecure</a>
                          </li>
                          <li>
                            <a href="#alternative-services" class="toc-h3 toc-link" data-title="Authentication Services:Alternative services">Alternative services</a>
                          </li>
                      </ul>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#genesis-kyc-services" class="toc-h1 toc-link" data-title="Genesis KYC Services">Genesis KYC Services</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#general-info" class="toc-h2 toc-link" data-title="General Info">General Info</a>
                  </li>
                  <li>
                    <a href="#create-consumer-registration" class="toc-h2 toc-link" data-title="Create Consumer Registration">Create Consumer Registration</a>
                  </li>
                  <li>
                    <a href="#update-consumer-registration" class="toc-h2 toc-link" data-title="Update Consumer Registration">Update Consumer Registration</a>
                  </li>
                  <li>
                    <a href="#create-transaction" class="toc-h2 toc-link" data-title="Create Transaction">Create Transaction</a>
                  </li>
                  <li>
                    <a href="#update-transaction" class="toc-h2 toc-link" data-title="Update Transaction">Update Transaction</a>
                  </li>
                  <li>
                    <a href="#identity-document-upload" class="toc-h2 toc-link" data-title="Identity Document Upload">Identity Document Upload</a>
                  </li>
                  <li>
                    <a href="#identity-document-download" class="toc-h2 toc-link" data-title="Identity Document Download">Identity Document Download</a>
                  </li>
                  <li>
                    <a href="#consumer-phone-verifications" class="toc-h2 toc-link" data-title="Consumer Phone verifications">Consumer Phone verifications</a>
                  </li>
                  <li>
                    <a href="#consumer-identity-verifications" class="toc-h2 toc-link" data-title="Consumer Identity verifications">Consumer Identity verifications</a>
                  </li>
                  <li>
                    <a href="#consumer-bank-account-verifications" class="toc-h2 toc-link" data-title="Consumer Bank Account verifications">Consumer Bank Account verifications</a>
                  </li>
                  <li>
                    <a href="#make-call" class="toc-h2 toc-link" data-title="Make call">Make call</a>
                  </li>
                  <li>
                    <a href="#update-call" class="toc-h2 toc-link" data-title="Update call">Update call</a>
                  </li>
                  <li>
                    <a href="#error-response" class="toc-h2 toc-link" data-title="Error Response">Error Response</a>
                  </li>
                  <li>
                    <a href="#kyc-service-notification" class="toc-h2 toc-link" data-title="Kyc Service Notification">Kyc Service Notification</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#consumers" class="toc-h1 toc-link" data-title="Consumers">Consumers</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#introduction-4" class="toc-h2 toc-link" data-title="Introduction">Introduction</a>
                  </li>
                  <li>
                    <a href="#consumer-api" class="toc-h2 toc-link" data-title="Consumer API">Consumer API</a>
                      <ul class="toc-list-h3">
                          <li>
                            <a href="#create-consumer" class="toc-h3 toc-link" data-title="Consumers:Create consumer">Create consumer</a>
                          </li>
                          <li>
                            <a href="#update-consumer" class="toc-h3 toc-link" data-title="Consumers:Update consumer">Update consumer</a>
                          </li>
                          <li>
                            <a href="#disable-consumer" class="toc-h3 toc-link" data-title="Consumers:Disable consumer">Disable consumer</a>
                          </li>
                          <li>
                            <a href="#enable-consumer" class="toc-h3 toc-link" data-title="Consumers:Enable consumer">Enable consumer</a>
                          </li>
                          <li>
                            <a href="#get-consumer-cards" class="toc-h3 toc-link" data-title="Consumers:Get consumer cards">Get consumer cards</a>
                          </li>
                      </ul>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#tokenization" class="toc-h1 toc-link" data-title="Tokenization">Tokenization</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#introduction-5" class="toc-h2 toc-link" data-title="Introduction">Introduction</a>
                  </li>
                  <li>
                    <a href="#tokenization-api-2" class="toc-h2 toc-link" data-title="Tokenization API">Tokenization API</a>
                      <ul class="toc-list-h3">
                          <li>
                            <a href="#accepted-cardholder-parameters" class="toc-h3 toc-link" data-title="Tokenization:Accepted cardholder parameters">Accepted cardholder parameters</a>
                          </li>
                          <li>
                            <a href="#consumer-required" class="toc-h3 toc-link" data-title="Tokenization:Consumer required">Consumer required</a>
                          </li>
                          <li>
                            <a href="#tokenize" class="toc-h3 toc-link" data-title="Tokenization:Tokenize">Tokenize</a>
                          </li>
                          <li>
                            <a href="#detokenize" class="toc-h3 toc-link" data-title="Tokenization:Detokenize">Detokenize</a>
                          </li>
                          <li>
                            <a href="#update-token" class="toc-h3 toc-link" data-title="Tokenization:Update token">Update token</a>
                          </li>
                          <li>
                            <a href="#validate-token" class="toc-h3 toc-link" data-title="Tokenization:Validate Token">Validate Token</a>
                          </li>
                          <li>
                            <a href="#delete-token" class="toc-h3 toc-link" data-title="Tokenization:Delete Token">Delete Token</a>
                          </li>
                      </ul>
                  </li>
                  <li>
                    <a href="#how-to-tokenize-card-holder-data-in-processing-api" class="toc-h2 toc-link" data-title="How to tokenize card holder data in Processing API">How to tokenize card holder data in Processing API</a>
                      <ul class="toc-list-h3">
                          <li>
                            <a href="#create-a-consumer" class="toc-h3 toc-link" data-title="Tokenization:Create a Consumer">Create a Consumer</a>
                          </li>
                          <li>
                            <a href="#use-existing-consumer" class="toc-h3 toc-link" data-title="Tokenization:Use existing consumer">Use existing consumer</a>
                          </li>
                      </ul>
                  </li>
                  <li>
                    <a href="#how-to-use-tokens-in-processing-api" class="toc-h2 toc-link" data-title="How to use tokens in Processing API">How to use tokens in Processing API</a>
                      <ul class="toc-list-h3">
                          <li>
                            <a href="#requests" class="toc-h3 toc-link" data-title="Tokenization:Requests">Requests</a>
                          </li>
                      </ul>
                  </li>
                  <li>
                    <a href="#how-to-tokenize-card-holder-data-in-wpf-api" class="toc-h2 toc-link" data-title="How to tokenize card holder data in WPF API">How to tokenize card holder data in WPF API</a>
                      <ul class="toc-list-h3">
                          <li>
                            <a href="#create-a-consumer-2" class="toc-h3 toc-link" data-title="Tokenization:Create a Consumer">Create a Consumer</a>
                          </li>
                          <li>
                            <a href="#use-existing-consumer-2" class="toc-h3 toc-link" data-title="Tokenization:Use existing consumer">Use existing consumer</a>
                          </li>
                      </ul>
                  </li>
                  <li>
                    <a href="#how-to-use-tokens-in-wpf-api" class="toc-h2 toc-link" data-title="How to use tokens in WPF API">How to use tokens in WPF API</a>
                  </li>
                  <li>
                    <a href="#supported-transaction-types" class="toc-h2 toc-link" data-title="Supported transaction types">Supported transaction types</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#klarna-services" class="toc-h1 toc-link" data-title="Klarna Services">Klarna Services</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#introduction-6" class="toc-h2 toc-link" data-title="Introduction">Introduction</a>
                  </li>
                  <li>
                    <a href="#release-remaining-authorization-api" class="toc-h2 toc-link" data-title="Release Remaining Authorization API">Release Remaining Authorization API</a>
                  </li>
                  <li>
                    <a href="#resend-invoice-api" class="toc-h2 toc-link" data-title="Resend Invoice API">Resend Invoice API</a>
                  </li>
                  <li>
                    <a href="#update-order-items-api" class="toc-h2 toc-link" data-title="Update Order Items API">Update Order Items API</a>
                  </li>
                  <li>
                    <a href="#update-order-address-api" class="toc-h2 toc-link" data-title="Update Order Address API">Update Order Address API</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#errors-2" class="toc-h1 toc-link" data-title="Errors">Errors</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#error-groups-table" class="toc-h2 toc-link" data-title="Error groups table">Error groups table</a>
                  </li>
                  <li>
                    <a href="#error-codes-tables" class="toc-h2 toc-link" data-title="Error codes tables">Error codes tables</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#client-integrations" class="toc-h1 toc-link" data-title="Client Integrations">Client Integrations</a>
          </li>
          <li>
            <a href="#shopping-carts" class="toc-h1 toc-link" data-title="Shopping Carts">Shopping Carts</a>
          </li>
          <li>
            <a href="#testing" class="toc-h1 toc-link" data-title="Testing">Testing</a>
          </li>
          <li>
            <a href="#status-page" class="toc-h1 toc-link" data-title="Status Page">Status Page</a>
          </li>
          <li>
            <a href="#infrastructure-and-uptime" class="toc-h1 toc-link" data-title="Infrastructure and Uptime">Infrastructure and Uptime</a>
          </li>
          <li>
            <a href="#penetration-testing-warning" class="toc-h1 toc-link" data-title="Penetration Testing Warning">Penetration Testing Warning</a>
          </li>
          <li>
            <a href="#avs-status-codes" class="toc-h1 toc-link" data-title="AVS Status Codes">AVS Status Codes</a>
          </li>
          <li>
            <a href="#level-3-travel-data" class="toc-h1 toc-link" data-title="Level 3 Travel Data">Level 3 Travel Data</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#travel-types" class="toc-h2 toc-link" data-title="Travel Types">Travel Types</a>
                      <ul class="toc-list-h3">
                          <li>
                            <a href="#airline-itinerary-data-aid" class="toc-h3 toc-link" data-title="Level 3 Travel Data:Airline Itinerary Data (AID)">Airline Itinerary Data (AID)</a>
                          </li>
                          <li>
                            <a href="#car-rental" class="toc-h3 toc-link" data-title="Level 3 Travel Data:Car Rental">Car Rental</a>
                          </li>
                          <li>
                            <a href="#hotel-rental" class="toc-h3 toc-link" data-title="Level 3 Travel Data:Hotel Rental">Hotel Rental</a>
                          </li>
                          <li>
                            <a href="#ancillary-charges" class="toc-h3 toc-link" data-title="Level 3 Travel Data:Ancillary Charges">Ancillary Charges</a>
                          </li>
                          <li>
                            <a href="#miscellaneous-charges" class="toc-h3 toc-link" data-title="Level 3 Travel Data:Miscellaneous Charges">Miscellaneous Charges</a>
                          </li>
                      </ul>
                  </li>
                  <li>
                    <a href="#special-cases" class="toc-h2 toc-link" data-title="Special Cases">Special Cases</a>
                      <ul class="toc-list-h3">
                          <li>
                            <a href="#travel-authorize-3d-and-capture" class="toc-h3 toc-link" data-title="Level 3 Travel Data:Travel Authorize (3D) and Capture">Travel Authorize (3D) and Capture</a>
                          </li>
                          <li>
                            <a href="#visa-refund" class="toc-h3 toc-link" data-title="Level 3 Travel Data:Visa Refund">Visa Refund</a>
                          </li>
                      </ul>
                  </li>
                  <li>
                    <a href="#allowed-values" class="toc-h2 toc-link" data-title="Allowed Values">Allowed Values</a>
                      <ul class="toc-list-h3">
                          <li>
                            <a href="#car-rental-classes" class="toc-h3 toc-link" data-title="Level 3 Travel Data:Car Rental Classes">Car Rental Classes</a>
                          </li>
                          <li>
                            <a href="#charge-types" class="toc-h3 toc-link" data-title="Level 3 Travel Data:Charge Types">Charge Types</a>
                          </li>
                          <li>
                            <a href="#car-rental-extra-charges" class="toc-h3 toc-link" data-title="Level 3 Travel Data:Car Rental Extra Charges">Car Rental Extra Charges</a>
                          </li>
                          <li>
                            <a href="#hotel-rental-extra-charges" class="toc-h3 toc-link" data-title="Level 3 Travel Data:Hotel Rental Extra Charges">Hotel Rental Extra Charges</a>
                          </li>
                          <li>
                            <a href="#ticket-change-indicators" class="toc-h3 toc-link" data-title="Level 3 Travel Data:Ticket Change Indicators">Ticket Change Indicators</a>
                          </li>
                          <li>
                            <a href="#credit-reason-indicators" class="toc-h3 toc-link" data-title="Level 3 Travel Data:Credit Reason Indicators">Credit Reason Indicators</a>
                          </li>
                      </ul>
                  </li>
              </ul>
          </li>
      </div>
        <ul class="toc-footer">
            <li><a href='./gateway-api-docs.pdf' target="_blank">Download as PDF</a></li>
            <li><a href='https://github.com/lord/slate'>Documentation Powered by Slate</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id='version'>Version</h1>
<p><strong>API version 12.3</strong></p>

<p><strong>Documentation version 12.3</strong></p>
<h2 id='history'>History</h2>
<table><thead>
<tr>
<th>Version</th>
<th>Date</th>
<th>Name</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>1.0</td>
<td>2011/06/10</td>
<td>Emil Petkov</td>
<td>Initial version</td>
</tr>
<tr>
<td>1.1</td>
<td>2011/11/11</td>
<td>Emil Petkov</td>
<td>Added optional shipping params section for the shipping address</td>
</tr>
<tr>
<td>1.2</td>
<td>2012/04/18</td>
<td>Emil Petkov</td>
<td>Added dynamic descriptor functionality</td>
</tr>
<tr>
<td>1.3</td>
<td>2012/08/03</td>
<td>Emil Petkov</td>
<td>Added new transaction type AVS and Account Verification</td>
</tr>
<tr>
<td>2.0</td>
<td>2013/03/29</td>
<td>Emil Petkov</td>
<td>Added gaming and MOTO flags and support</td>
</tr>
<tr>
<td>2.1</td>
<td>2013/04/11</td>
<td>Emil Petkov</td>
<td>Split Credits with an initial ref transaction and Payouts without a reference transaction</td>
</tr>
<tr>
<td>2.2</td>
<td>2013/05/26</td>
<td>Emil Petkov</td>
<td>Added new transaction type InitRecurringSale3D - recurring payments with initial 3D</td>
</tr>
<tr>
<td>2.3</td>
<td>2014/01/15</td>
<td>Emil Petkov</td>
<td>Removed the transaction types DebitSale and IdealSale</td>
</tr>
<tr>
<td>2.4</td>
<td>2014/01/22</td>
<td>Emil Petkov</td>
<td>Added authorization code and issuer response code to API, section for issuer response codes</td>
</tr>
<tr>
<td>2.5</td>
<td>2014/01/29</td>
<td>Emil Petkov</td>
<td>Moto and gaming flags are now returned in the transaction response if present/marked in the request</td>
</tr>
<tr>
<td>2.6</td>
<td>2014/02/05</td>
<td>Emil Petkov</td>
<td>Dynamic descriptor params are now returned in the transaction response if present in the request</td>
</tr>
<tr>
<td>2.7</td>
<td>2014/02/15</td>
<td>Emil Petkov</td>
<td>Recurring advices are now returned in the transaction response if received from the issuer</td>
</tr>
<tr>
<td>2.8</td>
<td>2014/05/01</td>
<td>Emil Petkov</td>
<td>Added required vs. optional API params</td>
</tr>
<tr>
<td>2.9</td>
<td>2014/06/16</td>
<td>Emil Petkov</td>
<td>Currency handling rework and API description (different currency exponents, etc)</td>
</tr>
<tr>
<td>3.0</td>
<td>2014/08/28</td>
<td>Emil Petkov</td>
<td>Added risk related APIs - chargebacks, retrieval requests, blacklists</td>
</tr>
<tr>
<td>3.1</td>
<td>2014/11/25</td>
<td>Emil Petkov</td>
<td>Added API support for partial approvals</td>
</tr>
<tr>
<td>3.2</td>
<td>2014/12/03</td>
<td>Emil Petkov</td>
<td>Added WPF I18N specifics</td>
</tr>
<tr>
<td>3.3</td>
<td>2014/12/08</td>
<td>Emil Petkov</td>
<td>Added shopping carts and client integrations list</td>
</tr>
<tr>
<td>3.4</td>
<td>2014/12/16</td>
<td>Hristo Tanchev</td>
<td>Now the remote ip can be either a required or optional API param</td>
</tr>
<tr>
<td>3.5</td>
<td>2015/02/22</td>
<td>Dimitar Kostov</td>
<td>Added API for eZeeWallet and PayByVoucher via Yeepay</td>
</tr>
<tr>
<td>3.6</td>
<td>2015/02/23</td>
<td>Hristo Tanchev</td>
<td>Added API for CashU and Paysafecard</td>
</tr>
<tr>
<td>3.7</td>
<td>2015/03/13</td>
<td>Dimitar Kostov</td>
<td>Added API for Sofort</td>
</tr>
<tr>
<td>3.8</td>
<td>2015/03/18</td>
<td>Hristo Tanchev</td>
<td>Added API for PPRO</td>
</tr>
<tr>
<td>3.9</td>
<td>2015/04/15</td>
<td>Emil Petkov</td>
<td>New WPF API and WPF payment methods</td>
</tr>
<tr>
<td>4.0</td>
<td>2015/05/14</td>
<td>Hristo Tanchev</td>
<td>Added API for Neteller and ABN iDEAL</td>
</tr>
<tr>
<td>4.1</td>
<td>2015/06/15</td>
<td>Dimitar Kostov</td>
<td>Added WPF custom attributes - bin, tail</td>
</tr>
<tr>
<td>4.2</td>
<td>2015/08/10</td>
<td>Tsvetelina Borisova</td>
<td>Added WPF custom attributes - default, expiration date</td>
</tr>
<tr>
<td>4.3</td>
<td>2015/08/12</td>
<td>Vladimir Korichkov</td>
<td>Added API for WebMoney and POLi</td>
</tr>
<tr>
<td>4.4</td>
<td>2015/08/19</td>
<td>Tsvetelina Borisova</td>
<td>Added fraud related API for TC40/SAFE (fraud reports)</td>
</tr>
<tr>
<td>4.5</td>
<td>2015/08/27</td>
<td>Emil Petkov</td>
<td>3D attributes xid and cavv are now not re- quired in the MPI sync attempted only workflow, only eci is</td>
</tr>
<tr>
<td>4.6</td>
<td>2015/09/02</td>
<td>Emil Petkov</td>
<td>New transaction type PayByVoucher Sale for purchasing vouchers via credit cards. Reworked the PayByVouchers section</td>
</tr>
<tr>
<td>4.7</td>
<td>2015/09/04</td>
<td>Emil Petkov</td>
<td>Added penetration testing warning for merchants</td>
</tr>
<tr>
<td>4.8</td>
<td>2015/09/06</td>
<td>Emil Petkov</td>
<td>Reconcile API now works with ARN and transaction ID in addition to unique ID</td>
</tr>
<tr>
<td>4.9</td>
<td>2015/09/11</td>
<td>Hristo Tanchev</td>
<td>Added Electronic Commerce Indicator to notifications</td>
</tr>
<tr>
<td>5.0</td>
<td>2015/09/30</td>
<td>Vladimir Korichkov</td>
<td>Added API for INPay</td>
</tr>
<tr>
<td>5.1</td>
<td>2015/12/09</td>
<td>Pepa Simeonova</td>
<td>Added event parameter to notifications for fraud transactions.</td>
</tr>
<tr>
<td>5.2</td>
<td>2016/02/02</td>
<td>Hristo Tanchev</td>
<td>Added API for P24</td>
</tr>
<tr>
<td>5.3</td>
<td>2016/02/16</td>
<td>Tsvetelina Borisova</td>
<td>Added ARN in reconcile response if available.</td>
</tr>
<tr>
<td>5.4</td>
<td>2016/03/18</td>
<td>Tsvetelina Borisova</td>
<td>Added page for Manually Reviewed Transactions</td>
</tr>
<tr>
<td>5.5</td>
<td>2016/03/17</td>
<td>Tsvetelina Borisova</td>
<td>Added API for SDD.</td>
</tr>
<tr>
<td>5.6</td>
<td>2016/03/28</td>
<td>Emil Petkov</td>
<td>Extended PayByVouchers processing and WPF APIs with redeem type and card type</td>
</tr>
<tr>
<td>5.7</td>
<td>2016/04/08</td>
<td>Emil Petkov</td>
<td>Added info for statuspage.io, uptime and infrastructure, and new shopping carts</td>
</tr>
<tr>
<td>5.8</td>
<td>2016/05/11</td>
<td>Tsvetelina Borisova</td>
<td>Change the example for chargeback API - amount is returned in minor currency unit</td>
</tr>
<tr>
<td>5.9</td>
<td>2016/05/22</td>
<td>Emil Petkov</td>
<td>Now birth date API param is required only for Visa initial transactions with Financial Service MCCs (e.g. 6012)</td>
</tr>
<tr>
<td>6.0</td>
<td>2016/06/30</td>
<td>Pepa Simeonova</td>
<td>Added dynamic descriptor params to WPF payments.</td>
</tr>
<tr>
<td>6.1</td>
<td>2016/07/20</td>
<td>Stefan Slaveykov</td>
<td>Now usage can be either a required or optional API param</td>
</tr>
<tr>
<td>6.2</td>
<td>2016/07/21</td>
<td>Tsvetelina Borisova</td>
<td>Update documentation for chargebacks API</td>
</tr>
<tr>
<td>6.3</td>
<td>2016/12/08</td>
<td>George Naydenov</td>
<td>Added API for Trustly</td>
</tr>
<tr>
<td>6.4</td>
<td>2017/01/20</td>
<td>Plamen Terziev</td>
<td>Added AVS Codes</td>
</tr>
<tr>
<td>6.5</td>
<td>2017/02/16</td>
<td>Nikolay Petrov</td>
<td>Added API for PayPal Express Checkout</td>
</tr>
<tr>
<td>6.6</td>
<td>2017/03/20</td>
<td>Iskar Enev</td>
<td>Added API for Citadel</td>
</tr>
<tr>
<td>6.7</td>
<td>2017/03/30</td>
<td>Stanislav Mihailov</td>
<td>Added API for Instadebit/iDebit</td>
</tr>
<tr>
<td>6.8</td>
<td>2017/03/31</td>
<td>Tsvetelina Borisova</td>
<td>Added API for SCT Payout</td>
</tr>
<tr>
<td>6.9</td>
<td>2017/05/12</td>
<td>Nikolay Petrov</td>
<td>Added reference transaction unique id to the Reconcile API response</td>
</tr>
<tr>
<td>7.0</td>
<td>2017/05/13</td>
<td>Nikolay Petrov</td>
<td>Added API for Earthport</td>
</tr>
<tr>
<td>7.1</td>
<td>2017/05/15</td>
<td>Stanislav Mihailov</td>
<td>Added API for Wechat</td>
</tr>
<tr>
<td>7.2</td>
<td>2017/05/30</td>
<td>George Naydenov</td>
<td>Added API for Alipay</td>
</tr>
<tr>
<td>7.3</td>
<td>2017/06/05</td>
<td>Hristo Tanchev</td>
<td>Added API for PaySec</td>
</tr>
<tr>
<td>7.4</td>
<td>2017/06/06</td>
<td>Hristo Tenev</td>
<td>Added card brand and card number tags in reconcile response.</td>
</tr>
<tr>
<td>7.5</td>
<td>2017/06/27</td>
<td>Lukasz Wojcik</td>
<td>Added lifetime for WPF Payments.</td>
</tr>
<tr>
<td>7.6</td>
<td>2017/07/06</td>
<td>Nikolay Petrov</td>
<td>Removed AVS transaction type. AVS response code and text are returned in the transactions responses when present and supported or in the notifications for payments with asynchronous workflow.</td>
</tr>
<tr>
<td>7.7</td>
<td>2017/07/06</td>
<td>Iskar Enev</td>
<td>Added APM External Events.</td>
</tr>
<tr>
<td>7.8</td>
<td>2017/08/11</td>
<td>Samuil Goranov</td>
<td>Added support for optional shipping address params in Processing and WPF APIs.</td>
</tr>
<tr>
<td>7.9</td>
<td>2017/08/17</td>
<td>Lukasz Wojcik</td>
<td>Remove remote ip parameter for transactions with reference. It will be copied from reference transaction</td>
</tr>
<tr>
<td>8.0</td>
<td>2017/08/18</td>
<td>Lukasz Wojcik</td>
<td>Added invalid transaction types for amount parameter to WPF response.</td>
</tr>
<tr>
<td>8.1</td>
<td>2017/08/18</td>
<td>Emil Kirilov</td>
<td>Added search option by import date in Chargeback, Retrieval request and Fraud APIs.</td>
</tr>
<tr>
<td>8.2</td>
<td>2017/09/05</td>
<td>George Naydenov</td>
<td>Added API for RPN Payment</td>
</tr>
<tr>
<td>8.3</td>
<td>2017/10/13</td>
<td>Ventsislav Dimitrov</td>
<td>Added API for FashionCheque gift card and split payments.</td>
</tr>
<tr>
<td>8.4</td>
<td>2017/10/13</td>
<td>Pepa Simeonova</td>
<td>Added API for Intersolve gift card and split payments.</td>
</tr>
<tr>
<td>8.5</td>
<td>2017/10/13</td>
<td>Stanislav Mihailov</td>
<td>Added API for TCS gift card and split payments.</td>
</tr>
<tr>
<td>8.6</td>
<td>2017/10/23</td>
<td>Iskar Enev</td>
<td>Added Authentication Services and iSignThis.</td>
</tr>
<tr>
<td>8.7</td>
<td>2017/11/02</td>
<td>George Naydenov</td>
<td>Added API for RPN Payout</td>
</tr>
<tr>
<td>8.8</td>
<td>2017/11/24</td>
<td>Hristo Tenev</td>
<td>Added API for Paycommerce</td>
</tr>
<tr>
<td>8.9</td>
<td>2017/11/25</td>
<td>George Naydenov</td>
<td>API update with new sections Card, 3DS Card, Common. Removing older payment methods.</td>
</tr>
<tr>
<td>9.0</td>
<td>2017/12/18</td>
<td>George Naydenov</td>
<td>Added API for Neosurf.</td>
</tr>
<tr>
<td>9.1</td>
<td>2018/01/02</td>
<td>George Naydenov</td>
<td>Removed API for Inpay, ABN iDeal, Teleingreso and PayByVoucher.</td>
</tr>
<tr>
<td>9.2</td>
<td>2018/01/03</td>
<td>Iskar Enev &amp; Nikolay Petrov</td>
<td>Added Tokenization service.</td>
</tr>
<tr>
<td>9.3</td>
<td>2018/01/12</td>
<td>Hristo Tanchev</td>
<td>Added API for Klarna.</td>
</tr>
<tr>
<td>9.4</td>
<td>2018/01/18</td>
<td>Stefan Petrov</td>
<td>Added ARN in WPF reconcile response if available.</td>
</tr>
<tr>
<td>9.5</td>
<td>2018/01/26</td>
<td>George Naydenov</td>
<td>Added API for Astropay Direct, Pago Facil, Link, Carulla, Davivienda.</td>
</tr>
<tr>
<td>9.6</td>
<td>2018/02/22</td>
<td>George Kostov &amp; Hristo Tenev</td>
<td>Added API for Genesis KYC Services.</td>
</tr>
<tr>
<td>9.7</td>
<td>2018/02/22</td>
<td>Emil Kirilov</td>
<td>Added API for PSE.</td>
</tr>
<tr>
<td>9.8</td>
<td>2018/02/26</td>
<td>Stefan Petrov</td>
<td>Added API for Rapipago, Webpay, Banco de Chile.</td>
</tr>
<tr>
<td>9.9</td>
<td>2018/03/01</td>
<td>Stefan Petrov</td>
<td>Added API for Surtimax, Efecty, Cabal, Cencosud, Hipercard, Elo, Aura, Itau, Bradesco, Tarjeta Shopping, BBVA Bancomer, Boleto, Redpagos, Emprese De Energia, GiroPay, InstantTransfer, Multibanco.</td>
</tr>
<tr>
<td>10.0</td>
<td>2018/03/02</td>
<td>George Naydenov</td>
<td>Added API for OXXO, Argencard, Naranja, Nativa, Cartao Mercado Livre, Astropay Card, Banamex, Santander, Santander Cash, Zimpler PayU.</td>
</tr>
<tr>
<td>10.1</td>
<td>2018/03/02</td>
<td>Emil Kirilov</td>
<td>Added API for Baloto, Banco de Occidente, Banco do Brasil.</td>
</tr>
<tr>
<td>10.2</td>
<td>2018/04/10</td>
<td>Stefan Petrov</td>
<td>Added API for Entercash.</td>
</tr>
<tr>
<td>10.3</td>
<td>2018/05/08</td>
<td>Hristo Tenev</td>
<td>Added API for eZeeWallet Payout.</td>
</tr>
<tr>
<td>10.4</td>
<td>2018/05/31</td>
<td>Maya Nedyalkova</td>
<td>Added 3D MasterCard test cards.</td>
</tr>
<tr>
<td>10.5</td>
<td>2018/05/31</td>
<td>George Naydenov</td>
<td>Added API for QQPay.</td>
</tr>
<tr>
<td>10.6</td>
<td>2018/06/22</td>
<td>Hristo Tanchev</td>
<td>Added API for Credential on File (COF).</td>
</tr>
<tr>
<td>10.7</td>
<td>2018/07/05</td>
<td>George Naydenov</td>
<td>Removed Paysec and added Online Banking OBeP.</td>
</tr>
<tr>
<td>10.8</td>
<td>2018/07/18</td>
<td>Stanislav Mihailov</td>
<td>Added the API param issuer_oct_enabled to Visa-based Account Verification transactions, to allow merchant to verify if issuer supports OCTs for the given PAN</td>
</tr>
<tr>
<td>10.9</td>
<td>2018/07/27</td>
<td>Yordan Pulov</td>
<td>Added Money Transfer support to Payouts.</td>
</tr>
<tr>
<td>11.0</td>
<td>2018/08/01</td>
<td>George Naydenov</td>
<td>Removed Paysec Payout and added Bank Payout.</td>
</tr>
<tr>
<td>11.1</td>
<td>2018/08/02</td>
<td>Stanislav Mihailov</td>
<td>Remove API for Citadel</td>
</tr>
<tr>
<td>11.2</td>
<td>2018/08/31</td>
<td>Hristo Tenev</td>
<td>Added API for BitPay.</td>
</tr>
<tr>
<td>11.3</td>
<td>2018/08/31</td>
<td>Maya Nedyalkova</td>
<td>Add rc_code and rc_description in notification parameters.</td>
</tr>
<tr>
<td>11.4</td>
<td>2018/10/10</td>
<td>Ralitsa Borisova</td>
<td>Remove Paycommerce, RPN Payment, Link, Davivienda, Banco de Chile, Cartao Mercado Livre documentation.</td>
</tr>
<tr>
<td>11.5</td>
<td>2018/10/11</td>
<td>Emil Petkov</td>
<td>Introduced debt repayments - now birth date API param is required also for Mastercard/- Maestro initial transactions with Financial Service MCCs (e.g. 6012), where merchant is UK-based, transaction is domestic (with UK-based bin), and card type is DEBIT.</td>
</tr>
<tr>
<td>11.6</td>
<td>2018/11/02</td>
<td>Yordan Pulov and Stanislav Mihailov</td>
<td>Introduced Travel layer and Added Level 3 Travel API.</td>
</tr>
<tr>
<td>11.7</td>
<td>2018/11/21</td>
<td>Hristo Tenev</td>
<td>Added Payout support for BitPay</td>
</tr>
<tr>
<td>11.8</td>
<td>2018/12/05</td>
<td>Stefan Petrov</td>
<td>Added API for eZeeCard Payout</td>
</tr>
<tr>
<td>11.9</td>
<td>2018/12/05</td>
<td>Nikolay Petrov</td>
<td>Added Pay Later support to the WPF. Introduced Reminders module.</td>
</tr>
<tr>
<td>12.0</td>
<td>2019/01/07</td>
<td>Yordan Pulov</td>
<td>Changed Contract Merchant Category Codes for Level 3 Visa Car and Hotel Rental Transactions.</td>
</tr>
<tr>
<td>12.1</td>
<td>2019/01/31</td>
<td>Aleksandar Krastev</td>
<td>Introduced Consumer API. Extended Tokenization API to require a consumer. Extended WPF and Processing APIs to create consumers and tokenize card details in one step. WPF API can use saved cards to make payments.</td>
</tr>
<tr>
<td>12.2</td>
<td>2019/02/18</td>
<td>Yordan Pulov</td>
<td>Extend the Online Banking bank codes and add payment type.</td>
</tr>
<tr>
<td>12.3</td>
<td>2019/02/26</td>
<td>Stefan Petrov</td>
<td>Added API for Tola payments.</td>
</tr>
</tbody></table>
<h1 id='introduction'>Introduction</h1>
<blockquote class="lang-specific php">
    <p>You can get PHP SDK from <a href="https://github.com/GenesisGateway/genesis_php" >https://github.com/GenesisGateway/genesis_php</a></p>
    <p>
        <b>Installation:</b>
        <br>
        Get the SDK from <a href="https://github.com/GenesisGateway/genesis_php" >GitHub</a> and load it with <a href="https://getcomposer.org/" >Composer</a> autoloader or include it in your own autoloader (The SDK uses <a href="http://www.php-fig.org/psr/psr-4/" >PSR-4 spec</a>).
        <br><br>
        <code>git clone http://github.com/GenesisGateway/genesis_php genesis_php</code>
        <br>
        <code>cd genesis_php</code>
        <br>
        <code>composer install</code>

    </p>
</blockquote>

<blockquote class="lang-specific javascript--node">
    <p>You can get Node.js SDK from <a href="https://github.com/GenesisGateway/genesis.js" >https://github.com/GenesisGateway/genesis.js</a></p>
    <p>
        <b>Installation:</b>
        <br>
        Get the SDK from <a href="https://github.com/GenesisGateway/genesis.js" >GitHub</a>
        <br><br>
        <code>git clone http://github.com/GenesisGateway/genesis.js genesis.js</code>
        <br>
        <code>cd genesis.js</code>
        <br>
        <code>npm install</code>
        <br><br>
         Or install it using npm
        <br><br>
        <code>npm install genesis.js</code>
    </p>
</blockquote>

<blockquote class="lang-specific java">
    <p>You can get Java SDK from <a href="http://github.com/GenesisGateway/genesis_java" >http://github.com/GenesisGateway/genesis_java</a></p>
    <p>
        <b>Installation:</b>
        <br>
        Get the SDK from <a href="https://github.com/GenesisGateway/genesis_java" >GitHub</a> and install <a href="https://maven.apache.org/" >Maven</a> plugin
        <br><br>
        <code>git clone http://github.com/GenesisGateway/genesis_java genesis_java</code>
        <br>
        <code>cd genesis_java</code>
        <br>
        <code>mvn clean install</code>
        <br>
        <br>
        Finaly add this to your pom.xml file:
        <xmp>
        <dependency>
           <groupId>com.emerchantpay.gateway</groupId>
           <artifactId>genesis-java</artifactId>
           <version>1.3.1</version>
        </dependency>
        </xmp>
    </p>
</blockquote>

<blockquote class="lang-specific shell">
    <p>You can get cURL from <a href="https://curl.haxx.se/" >https://curl.haxx.se</a></p>
</blockquote>

<p>This documents describes the usage of the payment gateway XML API.</p>

<p>The API allows you to trigger all supported transactions of the gateway and to retrieve information about transactions existing in the gateway. You can also retrieve chargeback information.</p>

<p>The payment API is synchronous (except for 3-D secure payments), it accepts HTTP POST or XML data and returns XML data. Connections are always secured via SSL both in test and live mode. Be sure to set Content-type: text/xml in your headers.</p>

<aside class="warning">
The API cannot be accessed via HTTP GET.
</aside>

<aside class="warning">
Current Java SDKs do not have the necessary root certificate installed. You need to download the CA with your browser and import it into cacerts manually.
</aside>
<h1 id='authentication'>Authentication</h1><pre class="highlight php tab-php"><code><span class="cp">&lt;?php</span>

<span class="k">use</span> <span class="nx">\Genesis\Config</span> <span class="k">as</span> <span class="nx">GenesisConfig</span><span class="p">;</span>

<span class="c1">// Load the pre-configured ini file...
</span><span class="nx">GenesisConfig</span><span class="o">::</span><span class="na">loadSettings</span><span class="p">(</span><span class="s1">'/path/to/config.ini'</span><span class="p">);</span>

<span class="c1">// ...OR, optionally, you can set the credentials manually
</span><span class="nx">GenesisConfig</span><span class="o">::</span><span class="na">setEndpoint</span><span class="p">(</span><span class="s1">'&lt;set_your_endpoint&gt;'</span><span class="p">);</span>
<span class="nx">GenesisConfig</span><span class="o">::</span><span class="na">setEnvironment</span><span class="p">(</span><span class="s1">'&lt;set_your_environment&gt;'</span><span class="p">);</span>
<span class="nx">GenesisConfig</span><span class="o">::</span><span class="na">setUsername</span><span class="p">(</span><span class="s1">'&lt;enter_your_username&gt;'</span><span class="p">);</span>
<span class="nx">GenesisConfig</span><span class="o">::</span><span class="na">setPassword</span><span class="p">(</span><span class="s1">'&lt;enter_your_password&gt;'</span><span class="p">);</span>
<span class="nx">GenesisConfig</span><span class="o">::</span><span class="na">setToken</span><span class="p">(</span><span class="s1">'&lt;enter_your_token&gt;'</span><span class="p">);</span>

<span class="c1">// You can find example configuration file in root directory of the module
</span>
</code></pre><pre class="highlight java tab-java"><code>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.constants.Endpoints</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.constants.Environments</span><span class="o">;;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Configuration</span><span class="o">;</span>

<span class="c1">// Create configuration</span>
<span class="n">Configuration</span> <span class="n">configuration</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Configuration</span><span class="o">(</span><span class="n">Environments</span><span class="o">.</span><span class="na">STAGING</span><span class="o">,</span> <span class="n">Endpoints</span><span class="o">.</span><span class="na">EMERCHANTPAY</span><span class="o">);</span>

<span class="n">configuration</span><span class="o">.</span><span class="na">setUsername</span><span class="o">(</span><span class="s">"SET_YOUR_USERNAME"</span><span class="o">);</span>
<span class="n">configuration</span><span class="o">.</span><span class="na">setPassword</span><span class="o">(</span><span class="s">"SET_YOUR_PASSWORD"</span><span class="o">);</span>
<span class="n">configuration</span><span class="o">.</span><span class="na">setToken</span><span class="o">(</span><span class="s">"SET_YOUR_TOKEN"</span><span class="o">);</span>

</code></pre>
<blockquote class="lang-specific javascript--node">
    <p>
        You can override the path to the directory holding your configuration files (by default its config in the root directory of the module) via environmental variable NODE_CONFIG_DIR.
    </p>
    <p>
        The first file to parse configuration from, is &lt;your-config-dir&gt;/default.json and based on the environment variable (NODE_ENV), you can specify your custom file; for example &lt;your-config-dir&gt;/&lt;NODE_ENV_NAME&gt;.json.
    </p>
    <p>
        Its good practice to prevent web/direct access to your config directory and protect the files inside
    </p>
</blockquote>

<blockquote class="lang-specific shell">
    <p>
        Send username and password directly in url
        <br>
        <code>curl https://username:password@gate.emerchantpay.net:443/process/TERMINAL-TOKEN</code>
    </p>
    <p>
        Or use -u flag
        <br>
        <code>curl -u username:password https://gate.emerchantpay.net:443/process/TERMINAL-TOKEN </code>
    </p>
</blockquote>

<p>To interact with the payment API, you need to provide login credentials using standard HTTP Basic Authentication. (credentials can be found in your Admin interface.)</p>

<p>To decrease network traffic and response times, we recommend that you enforce sending authentication credentials directly in the first request.</p>

<p>Some implementations like e.g. the Java HTTPClient automatically try to guess the best authentication scheme. This can be overriden by setting the authorization to preemptive:</p>

<aside class="notice">
HTTPClient.getParams.setAuthenticationPreemptivetrue;
</aside>
<h1 id='urls'>URLs</h1><h2 id='server-api'>Server API</h2>
<p>API methods are called with the following structure:</p>

<p><code>https://gate.emerchantpay.net/process/TERMINAL_TOKEN/</code></p>

<p>Single transaction reconciles can be done via this URL:</p>

<p><code>https://gate.emerchantpay.net/reconcile/TERMINAL_TOKEN/</code></p>

<p>Date range reconciles can be done via this URL:</p>

<p><code>https://gate.emerchantpay.net/reconcile/by_date/TERMINAL_TOKEN/</code></p>

<p>This URL allows retrieval of a list of supported banks based on the customers country and/or currency:</p>

<p><code>https://gate.emerchantpay.net/retrieve_inpay_banks/TERMINAL_TOKEN/</code></p>
<h2 id='wpf'>WPF</h2>
<p>The URL for the WPF API create method is:</p>

<p><code>https://wpf.emerchantpay.net/wpf</code></p>

<p>For the test system the URL is:</p>

<p><code>https://staging.wpf.emerchantpay.net/wpf</code></p>

<p>The URL for the WPF API reconcile method is:</p>

<p><code>https://wpf.emerchantpay.net/wpf/reconcile</code></p>

<p>For the test system the URL is:</p>

<p><code>https://staging.wpf.emerchantpay.net/wpf/reconcile</code></p>

<aside class="notice">
Terminal token and login credentials can be found in your admin panel. To use our testing environment, refer to chapter Testing
</aside>

<p>Your admin panel can be found here:</p>

<p><code>https://merchant.emerchantpay.net/</code></p>

<h2 id="consumer-api-urls">Consumer API</h2>

<p>Create consumer:</p>

<p><code>https://gate.emerchantpay.net/v1/create_consumer/</code></p>

<p>Update consumer:</p>

<p><code>https://gate.emerchantpay.net/v1/update_consumer/</code></p>

<p>Disable consumer:</p>

<p><code>https://gate.emerchantpay.net/v1/disable_consumer/</code></p>

<p>Enable consumer:</p>

<p><code>https://gate.emerchantpay.net/v1/enable_consumer/</code></p>

<p>Get consumer cards:</p>

<p><code>https://gate.emerchantpay.net/v1/get_consumer_cards/</code></p>

<p>For the test system use the following URLs:</p>

<p><code>https://staging.gate.emerchantpay.net/v1/create_consumer/</code></p>

<p><code>https://staging.gate.emerchantpay.net/v1/update_consumer/</code></p>

<p><code>https://staging.gate.emerchantpay.net/v1/disable_consumer/</code></p>

<p><code>https://staging.gate.emerchantpay.net/v1/enable_consumer/</code></p>

<p><code>https://staging.gate.emerchantpay.net/v1/get_consumer_cards/</code></p>
<h2 id='tokenization-api'>Tokenization API</h2>
<p>Tokenize cardholder data:</p>

<p><code>https://gate.emerchantpay.net/v1/tokenize/</code></p>

<p>Detokenize cardholder data:</p>

<p><code>https://gate.emerchantpay.net/v1/detokenize/</code></p>

<p>Update the cardholder data (PAN cannot be updated):</p>

<p><code>https://gate.emerchantpay.net/v1/update_token/</code></p>

<p>Validate if given token is valid for the merchant:</p>

<p><code>https://gate.emerchantpay.net/v1/validate_token/</code></p>

<p>Delete a token:</p>

<p><code>https://gate.emerchantpay.net/v1/delete_token/</code></p>

<p>For the test system use the following URLs:</p>

<p><code>https://staging.gate.emerchantpay.net/v1/tokenize/</code></p>

<p><code>https://staging.gate.emerchantpay.net/v1/detokenize/</code></p>

<p><code>https://staging.gate.emerchantpay.net/v1/update_token/</code></p>

<p><code>https://staging.gate.emerchantpay.net/v1/validate_token/</code></p>

<p><code>https://staging.gate.emerchantpay.net/v1/delete_token/</code></p>

<aside class="notice">
Terminal token and login credentials can be found in your admin panel.
To use our testing environment, refer to chapter Testing
</aside>
<h2 id='genesis-kyc-services-json-api'>Genesis KYC Services JSON API</h2>
<p><strong>Testing environment</strong></p>

<p>Create Consumer:</p>

<p><code>POST https://staging.gate.emerchantpay.net/kyc_service/create_consumer</code></p>

<p>Update Consumer:</p>

<p><code>POST https://staging.gate.emerchantpay.net/kyc_service/update_consumer</code></p>

<p>Create Transaction:</p>

<p><code>POST https://staging.gate.emerchantpay.net/kyc_service/create_transaction</code></p>

<p>Update Transaction:</p>

<p><code>POST https://staging.gate.emerchantpay.net/kyc_service/update_transaction</code></p>

<p>Upload Document:</p>

<p><code>POST https://staging.gate.emerchantpay.net/kyc_service/upload_document</code></p>

<p>Download Document:</p>

<p><code>POST https://staging.gate.emerchantpay.net/kyc_service/download_document</code></p>

<p>Verify Phone:</p>

<p><code>POST https://staging.gate.emerchantpay.net/kyc_service/verify_phone</code></p>

<p>Verify Identity:</p>

<p><code>POST https://staging.gate.emerchantpay.net/kyc_service/verify_identity</code></p>

<p>Verify Bank Account:</p>

<p><code>POST https://staging.gate.emerchantpay.net/kyc_service/verify_bank_account</code></p>

<p>Create Authentication:</p>

<p><code>POST https://staging.gate.emerchantpay.net/kyc_service/create_authentication</code></p>

<p>Update Authentication:</p>

<p><code>POST https://staging.gate.emerchantpay.net/kyc_service/update_authentication</code></p>

<p><strong>Production environment</strong></p>

<p>Genesis KYC Services JSON API URLs for production environment:</p>

<p>Create Consumer:</p>

<p><code>POST https://gate.emerchantpay.net/kyc_service/create_consumer</code></p>

<p>Update Consumer:</p>

<p><code>POST https://gate.emerchantpay.net/kyc_service/update_consumer</code></p>

<p>Create Transaction:</p>

<p><code>POST https://gate.emerchantpay.net/kyc_service/create_transaction</code></p>

<p>Update Transaction:</p>

<p><code>POST https://gate.emerchantpay.net/kyc_service/update_transaction</code></p>

<p>Upload Document:</p>

<p><code>POST https://gate.emerchantpay.net/kyc_service/upload_document</code></p>

<p>Download Document:</p>

<p><code>POST https://gate.emerchantpay.net/kyc_service/download_document</code></p>

<p>Verify Phone:</p>

<p><code>POST https://gate.emerchantpay.net/kyc_service/verify_phone</code></p>

<p>Verify Identity:</p>

<p><code>POST https://gate.emerchantpay.net/kyc_service/verify_identity</code></p>

<p>Verify Bank Account:</p>

<p><code>POST https://gate.emerchantpay.net/kyc_service/verify_bank_account</code></p>

<p>Create Authentication:</p>

<p><code>POST https://gate.emerchantpay.net/kyc_service/create_authentication</code></p>

<p>Update Authentication:</p>

<p><code>POST https://gate.emerchantpay.net/kyc_service/update_authentication</code></p>
<h1 id='transactions'>Transactions</h1><h2 id='invoking-a-transaction'>Invoking a Transaction</h2>
<p>A transaction is invoked via HTTPS POST, parameters are passed as XML with UTF-8 encoding.</p>
<h2 id='card'>Card</h2><h3 id='authorize'>Authorize</h3>
<p>With authorize transactions, you can confirm that a credit card is valid and reserve the desired amount on the card.</p>

<p>After settling the transaction (e.g. shipping the goods), you can then capture the amount. The customer will not be billed until the capture has taken place, but the amount is reserved and the customer’s credit card limit is reduced. Authorizes will automatically be cancelled after a certain timeframe, most likely one week.</p>

<p>For a typical e-commerce application it is recommended to authorize the amount on incoming orders and capture it when shipping the goods. If you are selling services or non-tangible goods, you can use the sale transaction, which combines authorize and capture.</p>

<p>If you chose not to serve the customer, consider to void the authorize to unfreeze the amount on the client’s credit card.</p>

<aside class="notice">
Authorize transactions are also available as 3dsecure transactions
</aside>

<aside class="notice">
This transaction type supports <a href="#tokenization" target="_self">Tokenization</a>.
</aside>

<aside class="notice">
This transaction type supports <a href="#level-3-travel-data" target="_self">Level 3 travel data</a>.
</aside>

<blockquote>
<p>Request</p>
</blockquote>

<pre class="highlight php tab-php"><code><span class="cp">&lt;?php</span>

<span class="c1">// Load the pre-configured ini file...
</span><span class="nx">\Genesis\Config</span><span class="o">::</span><span class="na">loadSettings</span><span class="p">(</span><span class="s1">'/path/to/config.ini'</span><span class="p">);</span>

<span class="nv">$genesis</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Genesis</span><span class="p">(</span><span class="s1">'Financial\Cards\Authorize'</span><span class="p">);</span>
<span class="nv">$request</span> <span class="o">=</span> <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">request</span><span class="p">();</span>

<span class="nv">$request</span>
  <span class="o">-&gt;</span><span class="na">setTransactionId</span><span class="p">(</span><span class="s1">'43671'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setUsage</span><span class="p">(</span><span class="s1">'40208 concert tickets'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setRemoteIp</span><span class="p">(</span><span class="s1">'245.253.2.12'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setAmount</span><span class="p">(</span><span class="s1">'100'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCurrency</span><span class="p">(</span><span class="s1">'USD'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCardHolder</span><span class="p">(</span><span class="s1">'Travis Pastrana'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCardNumber</span><span class="p">(</span><span class="s1">'4200000000000000'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setExpirationMonth</span><span class="p">(</span><span class="s1">'12'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setExpirationYear</span><span class="p">(</span><span class="s1">'2020'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCvv</span><span class="p">(</span><span class="s1">'834'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCustomerEmail</span><span class="p">(</span><span class="s1">'travis@example.com'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCustomerPhone</span><span class="p">(</span><span class="s1">'+1987987987987'</span><span class="p">)</span>


  <span class="c1">// Billing Address
</span>  <span class="o">-&gt;</span><span class="na">setBillingFirstName</span><span class="p">(</span><span class="s1">'Travis'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingLastName</span><span class="p">(</span><span class="s1">'Pastrana'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingAddress1</span><span class="p">(</span><span class="s1">'Muster Str. 12'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingZipCode</span><span class="p">(</span><span class="s1">'10178'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingCity</span><span class="p">(</span><span class="s1">'Los Angeles'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingState</span><span class="p">(</span><span class="s1">'CA'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingCountry</span><span class="p">(</span><span class="s1">'US'</span><span class="p">);</span>

<span class="k">try</span> <span class="p">{</span>
    <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">execute</span><span class="p">();</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">response</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">getResponseObject</span><span class="p">();</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">\Exception</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$e</span><span class="o">-&gt;</span><span class="na">getMessage</span><span class="p">();</span>
<span class="p">}</span>
</code></pre>

<pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.GenesisClient</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.TransactionResult</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.constants.Endpoints</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.constants.Environments</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.requests.financial.card.AuthorizeRequest</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.model.Transaction</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Configuration</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Country</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Currency</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.math.BigDecimal</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">GenesisExample</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">()</span>  <span class="o">{</span>

    <span class="c1">// Create configuration</span>
    <span class="n">Configuration</span> <span class="n">configuration</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Configuration</span><span class="o">(</span><span class="n">Environments</span><span class="o">.</span><span class="na">STAGING</span><span class="o">,</span> <span class="n">Endpoints</span><span class="o">.</span><span class="na">EMERCHANTPAY</span><span class="o">);</span>

    <span class="n">configuration</span><span class="o">.</span><span class="na">setUsername</span><span class="o">(</span><span class="s">"SET_YOUR_USERNAME"</span><span class="o">);</span>
    <span class="n">configuration</span><span class="o">.</span><span class="na">setPassword</span><span class="o">(</span><span class="s">"SET_YOUR_PASSWORD"</span><span class="o">);</span>
    <span class="n">configuration</span><span class="o">.</span><span class="na">setToken</span><span class="o">(</span><span class="s">"SET_YOUR_TOKEN"</span><span class="o">);</span>

    <span class="n">AuthorizeRequest</span> <span class="n">request</span> <span class="o">=</span> <span class="k">new</span> <span class="n">AuthorizeRequest</span><span class="o">();</span>

    <span class="n">request</span><span class="o">.</span><span class="na">setTransactionId</span><span class="o">(</span><span class="s">"43671"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setUsage</span><span class="o">(</span><span class="s">"40208 concert tickets"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setRemoteIp</span><span class="o">(</span><span class="s">"245.253.2.12"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setAmount</span><span class="o">(</span><span class="k">new</span> <span class="n">BigDecimal</span><span class="o">(</span><span class="mi">100</span><span class="o">));</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCurrency</span><span class="o">(</span><span class="s">"USD"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCardHolder</span><span class="o">(</span><span class="s">"Travis Pastrana"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCardNumber</span><span class="o">(</span><span class="s">"4200000000000000"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setExpirationMonth</span><span class="o">(</span><span class="s">"12"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setExpirationYear</span><span class="o">(</span><span class="s">"2020"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCvv</span><span class="o">(</span><span class="s">"834"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCustomerEmail</span><span class="o">(</span><span class="s">"travis@example.com"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCustomerPhone</span><span class="o">(</span><span class="s">"+1987987987987"</span><span class="o">);</span>


    <span class="c1">// Billing Address</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingFirstname</span><span class="o">(</span><span class="s">"Travis"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingLastname</span><span class="o">(</span><span class="s">"Pastrana"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingPrimaryAddress</span><span class="o">(</span><span class="s">"Muster Str. 12"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingZipCode</span><span class="o">(</span><span class="s">"10178"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingCity</span><span class="o">(</span><span class="s">"Los Angeles"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingState</span><span class="o">(</span><span class="s">"CA"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingCountry</span><span class="o">(</span><span class="s">"US"</span><span class="o">);</span>

    <span class="n">GenesisClient</span> <span class="n">client</span> <span class="o">=</span> <span class="k">new</span> <span class="n">GenesisClient</span><span class="o">(</span><span class="n">configuration</span><span class="o">,</span> <span class="n">request</span><span class="o">);</span>
    <span class="n">client</span><span class="o">.</span><span class="na">execute</span><span class="o">();</span>

    <span class="c1">// Parse Payment result</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">client</span><span class="o">.</span><span class="na">getResponse</span><span class="o">());</span>

  <span class="o">}</span>
<span class="o">}</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="kd">var</span> <span class="nx">genesis</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'genesis.js/lib/genesis.js'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">transaction</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">genesis</span><span class="p">.</span><span class="nx">transaction</span><span class="p">();</span>

<span class="kd">var</span> <span class="nx">failure</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">reason</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">reason</span><span class="p">);</span>
<span class="p">};</span>

<span class="kd">var</span> <span class="nx">success</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>

<span class="nx">transaction</span><span class="p">.</span><span class="nx">authorize</span><span class="p">(</span>
  <span class="p">{</span>
    <span class="s2">"transaction_id"</span><span class="p">:</span> <span class="s2">"43671"</span><span class="p">,</span>
    <span class="s2">"usage"</span><span class="p">:</span> <span class="s2">"40208 concert tickets"</span><span class="p">,</span>
    <span class="s2">"remote_ip"</span><span class="p">:</span> <span class="s2">"245.253.2.12"</span><span class="p">,</span>
    <span class="s2">"amount"</span><span class="p">:</span> <span class="s2">"100"</span><span class="p">,</span>
    <span class="s2">"currency"</span><span class="p">:</span> <span class="s2">"USD"</span><span class="p">,</span>
    <span class="s2">"card_holder"</span><span class="p">:</span> <span class="s2">"Travis Pastrana"</span><span class="p">,</span>
    <span class="s2">"card_number"</span><span class="p">:</span> <span class="s2">"4200000000000000"</span><span class="p">,</span>
    <span class="s2">"expiration_month"</span><span class="p">:</span> <span class="s2">"12"</span><span class="p">,</span>
    <span class="s2">"expiration_year"</span><span class="p">:</span> <span class="mi">2020</span><span class="p">,</span>
    <span class="s2">"cvv"</span><span class="p">:</span> <span class="s2">"834"</span><span class="p">,</span>
    <span class="s2">"customer_email"</span><span class="p">:</span> <span class="s2">"travis@example.com"</span><span class="p">,</span>
    <span class="s2">"customer_phone"</span><span class="p">:</span> <span class="s2">"+1987987987987"</span><span class="p">,</span>
    <span class="s2">"billing_address"</span><span class="p">:</span> <span class="p">{</span>
      <span class="s2">"first_name"</span><span class="p">:</span> <span class="s2">"Travis"</span><span class="p">,</span>
      <span class="s2">"last_name"</span><span class="p">:</span> <span class="s2">"Pastrana"</span><span class="p">,</span>
      <span class="s2">"address1"</span><span class="p">:</span> <span class="s2">"Muster Str. 12"</span><span class="p">,</span>
      <span class="s2">"zip_code"</span><span class="p">:</span> <span class="s2">"10178"</span><span class="p">,</span>
      <span class="s2">"city"</span><span class="p">:</span> <span class="s2">"Los Angeles"</span><span class="p">,</span>
      <span class="s2">"state"</span><span class="p">:</span> <span class="s2">"CA"</span><span class="p">,</span>
      <span class="s2">"country"</span><span class="p">:</span> <span class="s2">"US"</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">).</span><span class="nx">send</span><span class="p">()</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">success</span><span class="p">)</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">failure</span><span class="p">);</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>curl https://username:password@gate.emerchantpay.net/process/TERMINAL-TOKEN <span class="se">\</span>
   -H <span class="s2">"Content-Type: text/xml"</span> <span class="se">\</span>
   -d <span class="s1">'
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;authorize&lt;/transaction_type&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;usage&gt;40208 concert tickets&lt;/usage&gt;
  &lt;remote_ip&gt;245.253.2.12&lt;/remote_ip&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
  &lt;card_holder&gt;Travis Pastrana&lt;/card_holder&gt;
  &lt;card_number&gt;4200000000000000&lt;/card_number&gt;
  &lt;expiration_month&gt;12&lt;/expiration_month&gt;
  &lt;expiration_year&gt;2020&lt;/expiration_year&gt;
  &lt;cvv&gt;834&lt;/cvv&gt;
  &lt;customer_email&gt;travis@example.com&lt;/customer_email&gt;
  &lt;customer_phone&gt;+1987987987987&lt;/customer_phone&gt;
  &lt;billing_address&gt;
    &lt;first_name&gt;Travis&lt;/first_name&gt;
    &lt;last_name&gt;Pastrana&lt;/last_name&gt;
    &lt;address1&gt;Muster Str. 12&lt;/address1&gt;
    &lt;zip_code&gt;10178&lt;/zip_code&gt;
    &lt;city&gt;Los Angeles&lt;/city&gt;
    &lt;state&gt;CA&lt;/state&gt;
    &lt;country&gt;US&lt;/country&gt;
  &lt;/billing_address&gt;
&lt;/payment_transaction&gt;'</span>
</code></pre>

<p><strong>Request Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>required</td>
<td>string(255)</td>
<td>The transaction type: <strong>authorize</strong></td>
</tr>
<tr>
<td>transaction_id</td>
<td>required</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>usage</td>
<td>optional</td>
<td>string(255)</td>
<td>Description of the transaction for later use</td>
</tr>
<tr>
<td>gaming</td>
<td>optional</td>
<td>&quot;true&quot;</td>
<td>Signifies whether a gaming transaction is performed. Gaming transactions usually use MCC 7995, contact tech support for more details.</td>
</tr>
<tr>
<td>moto</td>
<td>optional</td>
<td>&quot;true&quot;</td>
<td>Signifies whether a MOTO (mail order telephone order) transaction is performed. Contact tech support for more details.</td>
</tr>
<tr>
<td>remote_ip</td>
<td>required*</td>
<td>IPv4 address</td>
<td>IPv4 address of customer</td>
</tr>
<tr>
<td>amount</td>
<td>required</td>
<td>integer &gt; 0</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>required</td>
<td>string(3)</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>card_holder</td>
<td>required</td>
<td>string(255)</td>
<td>Full name of customer as printed on credit card (first name and last name at least)</td>
</tr>
<tr>
<td>card_number</td>
<td>required</td>
<td>13 to 16 digits</td>
<td>Complete cc number of customer</td>
</tr>
<tr>
<td>cvv</td>
<td>required*</td>
<td>3 to 4 digits</td>
<td>cvv of cc, requirement is based on terminal configuration</td>
</tr>
<tr>
<td>expiration_month</td>
<td>required</td>
<td>MM</td>
<td>Expiration month as printed on credit card</td>
</tr>
<tr>
<td>expiration_year</td>
<td>required</td>
<td>YYYY</td>
<td>Expiration year as printed on credit card</td>
</tr>
<tr>
<td>token</td>
<td>optional</td>
<td>string(36)</td>
<td>See <a href="#tokenization">Tokenization</a> for more details. If present, the cardholder parameters can be omitted. Cannot be set together with <code>remember_card</code></td>
</tr>
<tr>
<td>remember_card</td>
<td>optional</td>
<td>&quot;true&quot;</td>
<td>See <a href="#tokenize">Tokenize</a>. Tokenizes cardholder parameters. Cannot be set together with <code>token</code></td>
</tr>
<tr>
<td>consumer_id</td>
<td>optional</td>
<td>string(10)</td>
<td>See <a href="#consumers">Consumers</a> and <a href="#tokenization">Tokenization</a>. Combine with <code>remember_card</code> to tokenize or with <code>token</code> to use token</td>
</tr>
<tr>
<td><strong>credential_on_file</strong></td>
<td>required*</td>
<td></td>
<td>See <a href="#credential-on-file-cof" target="_self">Credential On File (COF)</a> for more details</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;initial_customer_initiated</td>
<td>required*</td>
<td>string(18)</td>
<td>Initial transaction initiated by customer. Required for external tokenization, and optional for gateway-based tokenization</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;subsequent_customer_initiated</td>
<td>required*</td>
<td>string(18)</td>
<td>Subsequent transaction initiated by customer. Required for external tokenization, and optional for gateway-based tokenization</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;merchant_unscheduled</td>
<td>optional</td>
<td>string(20)</td>
<td>Transaction is initiated by the merchant</td>
</tr>
<tr>
<td>customer_email</td>
<td>required*</td>
<td>e-mail address</td>
<td>Must contain valid e-mail of customer</td>
</tr>
<tr>
<td>customer_phone</td>
<td>required*</td>
<td>string(32)</td>
<td>Must contain valid phone number of customer</td>
</tr>
<tr>
<td>birth_date</td>
<td>required*</td>
<td>dd-mm-yyyy</td>
<td>Required when MCC is a Financial Services one (e.g. MCC 6012) and either card brand is Visa or Mastercard/Maestro with UK-based merchant, UK-based bin (domestic), and DEBIT card type</td>
</tr>
<tr>
<td>document_id</td>
<td>required*</td>
<td>sring(20)</td>
<td>Document ID of the consumer. See <a href="#document-id-parameter">Document ID Parameter</a> for more details.</td>
</tr>
<tr>
<td><strong>billing_address</strong></td>
<td>required</td>
<td></td>
<td>See <a href="#required-vs-optional-api-params">Required vs Optional API params</a> for details</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;first_name</td>
<td>required*</td>
<td>string(255)</td>
<td>Customer first name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;last_name</td>
<td>required*</td>
<td>string(255)</td>
<td>Customer last name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address1</td>
<td>required*</td>
<td>string(255)</td>
<td>Primary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address2</td>
<td>required*</td>
<td>string(255)</td>
<td>Secondary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;zip_code</td>
<td>required*</td>
<td>string</td>
<td>ZIP code</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;city</td>
<td>required*</td>
<td>string(255)</td>
<td>City</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;state</td>
<td>required*</td>
<td>string(2)</td>
<td>State code in <a href="https://en.wikipedia.org/wiki/ISO_3166-2">ISO 3166-2</a>, required for USA and Canada</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;country</td>
<td>required*</td>
<td>string(2)</td>
<td>Country code in <a href="https://www.iso.org/iso-3166-country-codes.html">ISO 3166</a></td>
</tr>
<tr>
<td><strong>shipping_address</strong></td>
<td>optional</td>
<td></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;first_name</td>
<td>optional</td>
<td>string(255)</td>
<td>Customer first name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;last_name</td>
<td>optional</td>
<td>string(255)</td>
<td>Customer last name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address1</td>
<td>optional</td>
<td>string(255)</td>
<td>Primary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address2</td>
<td>optional</td>
<td>string(255)</td>
<td>Secondary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;zip_code</td>
<td>optional</td>
<td>string</td>
<td>ZIP code</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;city</td>
<td>optional</td>
<td>string(255)</td>
<td>City</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;state</td>
<td>optional</td>
<td>string(2)</td>
<td>State code in <a href="https://en.wikipedia.org/wiki/ISO_3166-2">ISO 3166-2</a>, required for USA and Canada</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;country</td>
<td>optional</td>
<td>string(2)</td>
<td>Country code in <a href="https://www.iso.org/iso-3166-country-codes.html">ISO 3166</a></td>
</tr>
<tr>
<td><strong>dynamic_descriptor_params</strong></td>
<td>optional</td>
<td></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;merchant_name</td>
<td>optional</td>
<td>string(25)</td>
<td>Allows to dynamically override the charge descriptor</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;merchant_city</td>
<td>optional</td>
<td>string(13)</td>
<td>Allows to dynamically override the merchant phone number</td>
</tr>
</tbody></table>

<p><code>required* = conditionally required</code></p>

<blockquote>
<p>Successful Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>stdClass Object
(
    [transaction_type] =&gt; authorize
    [status] =&gt; approved
    [mode] =&gt; live
    [transaction_id] =&gt; 43671
    [unique_id] =&gt; 44177a21403427eb96664a6d7e5d5d48
    [consumer_id] =&gt; 123456
    [token] =&gt; ee946db8-d7db-4bb7-b608-b65b153e127d
    [avs_response_code] =&gt; 5I
    [avs_response_text] =&gt; Response provided by issuer processor; Address information not verified
    [authorization_code] =&gt; 345678
    [response_code] =&gt; 00
    [timestamp] =&gt; DateTime Object
        (
            [date] =&gt; 2019-03-14 12:05:54.000000
            [timezone_type] =&gt; 2
            [timezone] =&gt; Z
        )
    [descriptor] =&gt; Descriptor one
    [amount] =&gt; 100
    [currency] =&gt; USD
    [sent_to_acquirer] =&gt; true
)
</code></pre>

<pre class="highlight java tab-java"><code><span class="o">&lt;</span><span class="n">payment_response</span> <span class="n">content</span><span class="o">=[</span>
    <span class="o">&lt;</span><span class="n">transaction_type</span> <span class="n">content</span><span class="o">=[</span><span class="n">authorize</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">status</span> <span class="n">content</span><span class="o">=[</span><span class="n">approved</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">mode</span> <span class="n">content</span><span class="o">=[</span><span class="n">live</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">transaction_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">43671</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">unique_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">44177</span><span class="n">a21403427eb96664a6d7e5d5d48</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">consumer_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">123456</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">token</span> <span class="n">content</span><span class="o">=[</span><span class="n">ee946db8</span><span class="o">-</span><span class="n">d7db</span><span class="o">-</span><span class="mi">4</span><span class="n">bb7</span><span class="o">-</span><span class="n">b608</span><span class="o">-</span><span class="n">b65b153e127d</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">avs_response_code</span> <span class="n">content</span><span class="o">=[</span><span class="mi">5</span><span class="n">I</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">avs_response_text</span> <span class="n">content</span><span class="o">=[</span><span class="n">Response</span> <span class="n">provided</span> <span class="n">by</span> <span class="n">issuer</span> <span class="n">processor</span><span class="o">;</span> <span class="n">Address</span> <span class="n">information</span> <span class="n">not</span> <span class="n">verified</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">authorization_code</span> <span class="n">content</span><span class="o">=[</span><span class="mi">345678</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">response_code</span> <span class="n">content</span><span class="o">=[</span><span class="mo">00</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">timestamp</span> <span class="n">content</span><span class="o">=[</span><span class="mi">2019</span><span class="o">-</span><span class="mo">03</span><span class="o">-</span><span class="mi">14</span><span class="nl">T12:</span><span class="mo">05</span><span class="o">:</span><span class="mi">54</span><span class="n">Z</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">descriptor</span> <span class="n">content</span><span class="o">=[</span><span class="n">Descriptor</span> <span class="n">one</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">amount</span> <span class="n">content</span><span class="o">=[</span><span class="mi">100</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">currency</span> <span class="n">content</span><span class="o">=[</span><span class="n">USD</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">sent_to_acquirer</span> <span class="n">content</span><span class="o">=[</span><span class="kc">true</span><span class="o">]&gt;</span>
<span class="o">]&gt;</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="p">{</span>
    <span class="nl">transaction_type</span><span class="p">:</span> <span class="s2">"authorize"</span><span class="p">,</span>
    <span class="nx">status</span><span class="p">:</span> <span class="s2">"approved"</span><span class="p">,</span>
    <span class="nx">mode</span><span class="p">:</span> <span class="s2">"live"</span><span class="p">,</span>
    <span class="nx">transaction_id</span><span class="p">:</span> <span class="s2">"43671"</span><span class="p">,</span>
    <span class="nx">unique_id</span><span class="p">:</span> <span class="s2">"44177a21403427eb96664a6d7e5d5d48"</span><span class="p">,</span>
    <span class="nx">consumer_id</span><span class="p">:</span> <span class="s2">"123456"</span><span class="p">,</span>
    <span class="nx">token</span><span class="p">:</span> <span class="s2">"ee946db8-d7db-4bb7-b608-b65b153e127d"</span><span class="p">,</span>
    <span class="nx">avs_response_code</span><span class="p">:</span> <span class="s2">"5I"</span><span class="p">,</span>
    <span class="nx">avs_response_text</span><span class="p">:</span> <span class="s2">"Response provided by issuer processor; Address information not verified"</span><span class="p">,</span>
    <span class="nx">authorization_code</span><span class="p">:</span> <span class="s2">"345678"</span><span class="p">,</span>
    <span class="nx">response_code</span><span class="p">:</span> <span class="s2">"00"</span><span class="p">,</span>
    <span class="nx">timestamp</span><span class="p">:</span> <span class="s2">"2019-03-14T12:05:54Z"</span><span class="p">,</span>
    <span class="nx">descriptor</span><span class="p">:</span> <span class="s2">"Descriptor one"</span><span class="p">,</span>
    <span class="nx">amount</span><span class="p">:</span> <span class="s2">"100"</span><span class="p">,</span>
    <span class="nx">currency</span><span class="p">:</span> <span class="s2">"USD"</span><span class="p">,</span>
    <span class="nx">sent_to_acquirer</span><span class="p">:</span> <span class="s2">"true"</span><span class="p">,</span>
<span class="p">}</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;authorize&lt;/transaction_type&gt;
  &lt;status&gt;approved&lt;/status&gt;
  &lt;mode&gt;live&lt;/mode&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;consumer_id&gt;123456&lt;/consumer_id&gt;
  &lt;token&gt;ee946db8-d7db-4bb7-b608-b65b153e127d&lt;/token&gt;
  &lt;avs_response_code&gt;5I&lt;/avs_response_code&gt;
  &lt;avs_response_text&gt;Response provided by issuer processor; Address information not verified&lt;/avs_response_text&gt;
  &lt;authorization_code&gt;345678&lt;/authorization_code&gt;
  &lt;response_code&gt;00&lt;/response_code&gt;
  &lt;timestamp&gt;2019-03-14T12:05:54Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
  &lt;sent_to_acquirer&gt;true&lt;/sent_to_acquirer&gt;
&lt;/payment_transaction&gt;
</code></pre>

<p><strong>Successful Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>The transaction type</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>transaction_id</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>unique_id</td>
<td>string(32)</td>
<td>Unique id defined by gate (must later be used if capturing, voiding or refunding a transaction)</td>
</tr>
<tr>
<td>consumer_id</td>
<td>string(10)</td>
<td>Consumer unique reference. See <a href="#consumers">Consumers</a></td>
</tr>
<tr>
<td>token</td>
<td>string(36)</td>
<td>Plain-text token value. See <a href="#tokenization">Tokenization</a></td>
</tr>
<tr>
<td>gaming</td>
<td>string</td>
<td>Signifies whether a gaming transaction is performed. Gaming transactions usually use MCC 7995, contact tech support for more details.</td>
</tr>
<tr>
<td>moto</td>
<td>string</td>
<td>Signifies whether a MOTO (mail order telephone order) transaction is performed. Contact tech support for more details.</td>
</tr>
<tr>
<td>avs_response_code</td>
<td>string</td>
<td>Generated by the card network on trying to match the billing address when performing the address verification. Optional, returned if config is enabled and acquirer supports it. Check <a href="#avs-status-codes">AVS Status Codes</a> for details.</td>
</tr>
<tr>
<td>avs_response_text</td>
<td>string</td>
<td>Gives the human response text for the AVS response code above. Optional, returned if config is enabled and acquirer supports it. Check [AVS Status Codes](#avs-status-codes for details.</td>
</tr>
<tr>
<td>authorization_code</td>
<td>string(6)</td>
<td>Generated by the card network when an authorisation has occurred, used to identify that auth. Consists of 6 alphanumeric chars</td>
</tr>
<tr>
<td>response_code</td>
<td>string(2)</td>
<td>Defines the issuer result of a transaction, the status of a message or some action taken or required. See <a href="#issuer-response-codes">issuer response codes</a> for details</td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
<tr>
<td>message</td>
<td>string(255)</td>
<td>Human readable error message which can be displayed to users.</td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>redirect_url</td>
<td>url</td>
<td>URL where user has to be redirected to complete payment process. It is available for asynchronous mode</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when the transaction was processed in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Combined date and time</a> e.g. 2007-08- 30T17:46:11Z</td>
</tr>
<tr>
<td>descriptor</td>
<td>string</td>
<td>Static descriptor MID info as configured on the gateway</td>
</tr>
<tr>
<td>amount</td>
<td>integer</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>partial_approval</td>
<td>string(4)</td>
<td>Optional, set to ’true’ if partial approval happened. Partially approved amount is then in the amount field. Check <a href="#partial-approvals">Partial Approvals</a> for details</td>
</tr>
<tr>
<td>sent_to_acquirer</td>
<td>string</td>
<td>&quot;true&quot; or &quot;false&quot;</td>
</tr>
<tr>
<td>dynamic_descriptor_params</td>
<td>section</td>
<td>Optional, returned only if dynamic desc params are submitted on the API. Note here that the formatted dyn desc params are returned - as they would be submitted to the schemes for settlement.</td>
</tr>
</tbody></table>

<blockquote>
<p>Error Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>stdClass Object
(
    [transaction_type] =&gt; authorize
    [status] =&gt; error
    [mode] =&gt; live
    [transaction_id] =&gt; 43671
    [unique_id] =&gt; 44177a21403427eb96664a6d7e5d5d48
    [code] =&gt; 340
    [technical_message] =&gt; expiration_year is invalid
    [message] =&gt; expiration_year is invalid
    [timestamp] =&gt; DateTime Object
        (
            [date] =&gt; 2019-03-14 12:05:54.000000
            [timezone_type] =&gt; 2
            [timezone] =&gt; Z
        )
    [descriptor] =&gt; Descriptor one
    [amount] =&gt; 100
    [currency] =&gt; USD
    [sent_to_acquirer] =&gt; false
)
</code></pre>

<pre class="highlight java tab-java"><code><span class="o">&lt;</span><span class="n">payment_response</span> <span class="n">content</span><span class="o">=[</span>
    <span class="o">&lt;</span><span class="n">transaction_type</span> <span class="n">content</span><span class="o">=[</span><span class="n">authorize</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">status</span> <span class="n">content</span><span class="o">=[</span><span class="n">error</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">mode</span> <span class="n">content</span><span class="o">=[</span><span class="n">live</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">transaction_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">43671</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">unique_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">44177</span><span class="n">a21403427eb96664a6d7e5d5d48</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">code</span> <span class="n">content</span><span class="o">=[</span><span class="mi">340</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">technical_message</span> <span class="n">content</span><span class="o">=[</span><span class="n">expiration_year</span> <span class="n">is</span> <span class="n">invalid</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">message</span> <span class="n">content</span><span class="o">=[</span><span class="n">expiration_year</span> <span class="n">is</span> <span class="n">invalid</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">timestamp</span> <span class="n">content</span><span class="o">=[</span><span class="mi">2019</span><span class="o">-</span><span class="mo">03</span><span class="o">-</span><span class="mi">14</span><span class="nl">T12:</span><span class="mo">05</span><span class="o">:</span><span class="mi">54</span><span class="n">Z</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">descriptor</span> <span class="n">content</span><span class="o">=[</span><span class="n">Descriptor</span> <span class="n">one</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">amount</span> <span class="n">content</span><span class="o">=[</span><span class="mi">100</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">currency</span> <span class="n">content</span><span class="o">=[</span><span class="n">USD</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">sent_to_acquirer</span> <span class="n">content</span><span class="o">=[</span><span class="kc">false</span><span class="o">]&gt;</span>
<span class="o">]&gt;</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="p">{</span>
    <span class="nl">transaction_type</span><span class="p">:</span> <span class="s2">"authorize"</span><span class="p">,</span>
    <span class="nx">status</span><span class="p">:</span> <span class="s2">"error"</span><span class="p">,</span>
    <span class="nx">mode</span><span class="p">:</span> <span class="s2">"live"</span><span class="p">,</span>
    <span class="nx">transaction_id</span><span class="p">:</span> <span class="s2">"43671"</span><span class="p">,</span>
    <span class="nx">unique_id</span><span class="p">:</span> <span class="s2">"44177a21403427eb96664a6d7e5d5d48"</span><span class="p">,</span>
    <span class="nx">code</span><span class="p">:</span> <span class="s2">"340"</span><span class="p">,</span>
    <span class="nx">technical_message</span><span class="p">:</span> <span class="s2">"expiration_year is invalid"</span><span class="p">,</span>
    <span class="nx">message</span><span class="p">:</span> <span class="s2">"expiration_year is invalid"</span><span class="p">,</span>
    <span class="nx">timestamp</span><span class="p">:</span> <span class="s2">"2019-03-14T12:05:54Z"</span><span class="p">,</span>
    <span class="nx">descriptor</span><span class="p">:</span> <span class="s2">"Descriptor one"</span><span class="p">,</span>
    <span class="nx">amount</span><span class="p">:</span> <span class="s2">"100"</span><span class="p">,</span>
    <span class="nx">currency</span><span class="p">:</span> <span class="s2">"USD"</span><span class="p">,</span>
    <span class="nx">sent_to_acquirer</span><span class="p">:</span> <span class="s2">"false"</span><span class="p">,</span>
<span class="p">}</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;authorize&lt;/transaction_type&gt;
  &lt;status&gt;error&lt;/status&gt;
  &lt;mode&gt;live&lt;/mode&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;code&gt;340&lt;/code&gt;
  &lt;technical_message&gt;expiration_year is invalid&lt;/technical_message&gt;
  &lt;message&gt;expiration_year is invalid&lt;/message&gt;
  &lt;timestamp&gt;2019-03-14T12:05:54Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
  &lt;sent_to_acquirer&gt;false&lt;/sent_to_acquirer&gt;
&lt;/payment_transaction&gt;
</code></pre>

<p><strong>Error Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>The transaction type</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>transaction_id</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>unique_id</td>
<td>string(32)</td>
<td>Unique id defined by gate (must later be used if capturing, voiding or refunding a transaction)</td>
</tr>
<tr>
<td>gaming</td>
<td>string</td>
<td>Signifies whether a gaming transaction is performed. Gaming transactions usually use MCC 7995, contact tech support for more details.</td>
</tr>
<tr>
<td>moto</td>
<td>string</td>
<td>Signifies whether a MOTO (mail order telephone order) transaction is performed. Contact tech support for more details.</td>
</tr>
<tr>
<td>code</td>
<td>integer</td>
<td>Error code according to <a href="#error-code-table">Error code table</a></td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
<tr>
<td>message</td>
<td>string(255)</td>
<td>Human readable error message which can be displayed to users.</td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when the transaction was processed in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Combined date and time</a> e.g. 2007-08- 30T17:46:11Z</td>
</tr>
<tr>
<td>descriptor</td>
<td>string</td>
<td>Static descriptor MID info as configured on the gateway</td>
</tr>
<tr>
<td>amount</td>
<td>integer</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>dynamic_descriptor_params</td>
<td>section</td>
<td>Optional, returned only if dynamic desc params are submitted on the API. Note here that the formatted dyn desc params are returned - as they would be submitted to the schemes for settlement.</td>
</tr>
</tbody></table>
<h3 id='capture'>Capture</h3>
<p>Capture settles a transaction which has been authorized before.</p>

<p>Do this when you are shipping goods, for example. A capture can only be used after an authorize on the same transaction.</p>

<p>Therefore, the reference id of the authorized transaction is mandatory.</p>

<aside class="notice" >
    You can also capture a partial amount of the initially authorized amount, e.g. if you want to give customers a discount. However, you cannot capture a higher amount than initially authorized.
</aside>

<aside class="notice">
This transaction type supports <a href="#level-3-travel-data" target="_self">Level 3 travel data</a>.
</aside>

<p>Transaction workflow:</p>

<ol>
<li>The merchant sends authorize transaction to the gateway.</li>
<li>The gateway replies to it. One of returned values is the unique id of the transaction.</li>
<li>The merchant sends capture transaction. Its reference id is unique id of authorize response.</li>
</ol>

<blockquote>
<p>Request</p>
</blockquote>

<pre class="highlight php tab-php"><code><span class="cp">&lt;?php</span>

<span class="c1">// Load the pre-configured ini file...
</span><span class="nx">\Genesis\Config</span><span class="o">::</span><span class="na">loadSettings</span><span class="p">(</span><span class="s1">'/path/to/config.ini'</span><span class="p">);</span>

<span class="nv">$genesis</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Genesis</span><span class="p">(</span><span class="s1">'Financial\Capture'</span><span class="p">);</span>
<span class="nv">$request</span> <span class="o">=</span> <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">request</span><span class="p">();</span>

<span class="nv">$request</span>
  <span class="o">-&gt;</span><span class="na">setTransactionId</span><span class="p">(</span><span class="s1">'43671'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setUsage</span><span class="p">(</span><span class="s1">'40208 concert tickets'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setRemoteIp</span><span class="p">(</span><span class="s1">'245.253.2.12'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setReferenceId</span><span class="p">(</span><span class="s1">'43672'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setAmount</span><span class="p">(</span><span class="s1">'100'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCurrency</span><span class="p">(</span><span class="s1">'USD'</span><span class="p">);</span>

<span class="k">try</span> <span class="p">{</span>
    <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">execute</span><span class="p">();</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">response</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">getResponseObject</span><span class="p">();</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">\Exception</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$e</span><span class="o">-&gt;</span><span class="na">getMessage</span><span class="p">();</span>
<span class="p">}</span>
</code></pre>

<pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.GenesisClient</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.TransactionResult</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.constants.Endpoints</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.constants.Environments</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.requests.financial.CaptureRequest</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.model.Transaction</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Configuration</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Country</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Currency</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.math.BigDecimal</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">GenesisExample</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">()</span>  <span class="o">{</span>

    <span class="c1">// Create configuration</span>
    <span class="n">Configuration</span> <span class="n">configuration</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Configuration</span><span class="o">(</span><span class="n">Environments</span><span class="o">.</span><span class="na">STAGING</span><span class="o">,</span> <span class="n">Endpoints</span><span class="o">.</span><span class="na">EMERCHANTPAY</span><span class="o">);</span>

    <span class="n">configuration</span><span class="o">.</span><span class="na">setUsername</span><span class="o">(</span><span class="s">"SET_YOUR_USERNAME"</span><span class="o">);</span>
    <span class="n">configuration</span><span class="o">.</span><span class="na">setPassword</span><span class="o">(</span><span class="s">"SET_YOUR_PASSWORD"</span><span class="o">);</span>
    <span class="n">configuration</span><span class="o">.</span><span class="na">setToken</span><span class="o">(</span><span class="s">"SET_YOUR_TOKEN"</span><span class="o">);</span>

    <span class="n">CaptureRequest</span> <span class="n">request</span> <span class="o">=</span> <span class="k">new</span> <span class="n">CaptureRequest</span><span class="o">();</span>

    <span class="n">request</span><span class="o">.</span><span class="na">setTransactionId</span><span class="o">(</span><span class="s">"43671"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setUsage</span><span class="o">(</span><span class="s">"40208 concert tickets"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setRemoteIp</span><span class="o">(</span><span class="s">"245.253.2.12"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setReferenceId</span><span class="o">(</span><span class="s">"43672"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setAmount</span><span class="o">(</span><span class="k">new</span> <span class="n">BigDecimal</span><span class="o">(</span><span class="mi">100</span><span class="o">));</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCurrency</span><span class="o">(</span><span class="s">"USD"</span><span class="o">);</span>

    <span class="n">GenesisClient</span> <span class="n">client</span> <span class="o">=</span> <span class="k">new</span> <span class="n">GenesisClient</span><span class="o">(</span><span class="n">configuration</span><span class="o">,</span> <span class="n">request</span><span class="o">);</span>
    <span class="n">client</span><span class="o">.</span><span class="na">execute</span><span class="o">();</span>

    <span class="c1">// Parse Payment result</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">client</span><span class="o">.</span><span class="na">getResponse</span><span class="o">());</span>

  <span class="o">}</span>
<span class="o">}</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="kd">var</span> <span class="nx">genesis</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'genesis.js/lib/genesis.js'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">transaction</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">genesis</span><span class="p">.</span><span class="nx">transaction</span><span class="p">();</span>

<span class="kd">var</span> <span class="nx">failure</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">reason</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">reason</span><span class="p">);</span>
<span class="p">};</span>

<span class="kd">var</span> <span class="nx">success</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>

<span class="nx">transaction</span><span class="p">.</span><span class="nx">capture</span><span class="p">(</span>
  <span class="p">{</span>
    <span class="s2">"transaction_id"</span><span class="p">:</span> <span class="s2">"43671"</span><span class="p">,</span>
    <span class="s2">"usage"</span><span class="p">:</span> <span class="s2">"40208 concert tickets"</span><span class="p">,</span>
    <span class="s2">"remote_ip"</span><span class="p">:</span> <span class="s2">"245.253.2.12"</span><span class="p">,</span>
    <span class="s2">"reference_id"</span><span class="p">:</span> <span class="s2">"43672"</span><span class="p">,</span>
    <span class="s2">"amount"</span><span class="p">:</span> <span class="s2">"100"</span><span class="p">,</span>
    <span class="s2">"currency"</span><span class="p">:</span> <span class="s2">"USD"</span>
  <span class="p">}</span>
<span class="p">).</span><span class="nx">send</span><span class="p">()</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">success</span><span class="p">)</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">failure</span><span class="p">);</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>curl https://username:password@gate.emerchantpay.net/process/TERMINAL-TOKEN <span class="se">\</span>
   -H <span class="s2">"Content-Type: text/xml"</span> <span class="se">\</span>
   -d <span class="s1">'
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;capture&lt;/transaction_type&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;usage&gt;40208 concert tickets&lt;/usage&gt;
  &lt;remote_ip&gt;245.253.2.12&lt;/remote_ip&gt;
  &lt;reference_id&gt;43672&lt;/reference_id&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
&lt;/payment_transaction&gt;'</span>
</code></pre>

<p><strong>Request Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>required</td>
<td>string(255)</td>
<td>The transaction type: <strong>capture</strong></td>
</tr>
<tr>
<td>transaction_id</td>
<td>required</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>usage</td>
<td>optional</td>
<td>string(255)</td>
<td>Description of the transaction for later use</td>
</tr>
<tr>
<td>remote_ip</td>
<td>required*</td>
<td>IPv4 address</td>
<td>IPv4 address of customer</td>
</tr>
<tr>
<td>reference_id</td>
<td>required</td>
<td>string(32)</td>
<td>Unique id returned by corresponding transaction</td>
</tr>
<tr>
<td>amount</td>
<td>required</td>
<td>integer &gt; 0</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>required</td>
<td>string(3)</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
</tbody></table>

<p><code>required* = conditionally required</code></p>

<blockquote>
<p>Successful Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>stdClass Object
(
    [transaction_type] =&gt; capture
    [status] =&gt; approved
    [mode] =&gt; live
    [transaction_id] =&gt; 43671
    [unique_id] =&gt; 44177a21403427eb96664a6d7e5d5d48
    [authorization_code] =&gt; 345678
    [response_code] =&gt; 00
    [technical_message] =&gt; Transaction successful!
    [message] =&gt; Transaction successful!
    [timestamp] =&gt; DateTime Object
        (
            [date] =&gt; 2019-03-14 12:05:54.000000
            [timezone_type] =&gt; 2
            [timezone] =&gt; Z
        )
    [descriptor] =&gt; Descriptor one
    [amount] =&gt; 100
    [currency] =&gt; USD
    [sent_to_acquirer] =&gt; true
)
</code></pre>

<pre class="highlight java tab-java"><code><span class="o">&lt;</span><span class="n">payment_response</span> <span class="n">content</span><span class="o">=[</span>
    <span class="o">&lt;</span><span class="n">transaction_type</span> <span class="n">content</span><span class="o">=[</span><span class="n">capture</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">status</span> <span class="n">content</span><span class="o">=[</span><span class="n">approved</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">mode</span> <span class="n">content</span><span class="o">=[</span><span class="n">live</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">transaction_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">43671</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">unique_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">44177</span><span class="n">a21403427eb96664a6d7e5d5d48</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">authorization_code</span> <span class="n">content</span><span class="o">=[</span><span class="mi">345678</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">response_code</span> <span class="n">content</span><span class="o">=[</span><span class="mo">00</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">technical_message</span> <span class="n">content</span><span class="o">=[</span><span class="n">Transaction</span> <span class="n">successful</span><span class="o">!]&gt;</span>
    <span class="o">&lt;</span><span class="n">message</span> <span class="n">content</span><span class="o">=[</span><span class="n">Transaction</span> <span class="n">successful</span><span class="o">!]&gt;</span>
    <span class="o">&lt;</span><span class="n">timestamp</span> <span class="n">content</span><span class="o">=[</span><span class="mi">2019</span><span class="o">-</span><span class="mo">03</span><span class="o">-</span><span class="mi">14</span><span class="nl">T12:</span><span class="mo">05</span><span class="o">:</span><span class="mi">54</span><span class="n">Z</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">descriptor</span> <span class="n">content</span><span class="o">=[</span><span class="n">Descriptor</span> <span class="n">one</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">amount</span> <span class="n">content</span><span class="o">=[</span><span class="mi">100</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">currency</span> <span class="n">content</span><span class="o">=[</span><span class="n">USD</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">sent_to_acquirer</span> <span class="n">content</span><span class="o">=[</span><span class="kc">true</span><span class="o">]&gt;</span>
<span class="o">]&gt;</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="p">{</span>
    <span class="nl">transaction_type</span><span class="p">:</span> <span class="s2">"capture"</span><span class="p">,</span>
    <span class="nx">status</span><span class="p">:</span> <span class="s2">"approved"</span><span class="p">,</span>
    <span class="nx">mode</span><span class="p">:</span> <span class="s2">"live"</span><span class="p">,</span>
    <span class="nx">transaction_id</span><span class="p">:</span> <span class="s2">"43671"</span><span class="p">,</span>
    <span class="nx">unique_id</span><span class="p">:</span> <span class="s2">"44177a21403427eb96664a6d7e5d5d48"</span><span class="p">,</span>
    <span class="nx">authorization_code</span><span class="p">:</span> <span class="s2">"345678"</span><span class="p">,</span>
    <span class="nx">response_code</span><span class="p">:</span> <span class="s2">"00"</span><span class="p">,</span>
    <span class="nx">technical_message</span><span class="p">:</span> <span class="s2">"Transaction successful!"</span><span class="p">,</span>
    <span class="nx">message</span><span class="p">:</span> <span class="s2">"Transaction successful!"</span><span class="p">,</span>
    <span class="nx">timestamp</span><span class="p">:</span> <span class="s2">"2019-03-14T12:05:54Z"</span><span class="p">,</span>
    <span class="nx">descriptor</span><span class="p">:</span> <span class="s2">"Descriptor one"</span><span class="p">,</span>
    <span class="nx">amount</span><span class="p">:</span> <span class="s2">"100"</span><span class="p">,</span>
    <span class="nx">currency</span><span class="p">:</span> <span class="s2">"USD"</span><span class="p">,</span>
    <span class="nx">sent_to_acquirer</span><span class="p">:</span> <span class="s2">"true"</span><span class="p">,</span>
<span class="p">}</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;capture&lt;/transaction_type&gt;
  &lt;status&gt;approved&lt;/status&gt;
  &lt;mode&gt;live&lt;/mode&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;authorization_code&gt;345678&lt;/authorization_code&gt;
  &lt;response_code&gt;00&lt;/response_code&gt;
  &lt;technical_message&gt;Transaction successful!&lt;/technical_message&gt;
  &lt;message&gt;Transaction successful!&lt;/message&gt;
  &lt;timestamp&gt;2019-03-14T12:05:54Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
  &lt;sent_to_acquirer&gt;true&lt;/sent_to_acquirer&gt;
&lt;/payment_transaction&gt;
</code></pre>

<p><strong>Successful Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>The transaction type</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>transaction_id</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>unique_id</td>
<td>string(32)</td>
<td>Unique id defined by gate (must later be used if capturing, voiding or refunding a transaction)</td>
</tr>
<tr>
<td>authorization_code</td>
<td>string(6)</td>
<td>Generated by the card network when an authorisation has occurred, used to identify that auth. Consists of 6 alphanumeric chars</td>
</tr>
<tr>
<td>response_code</td>
<td>string(2)</td>
<td>Defines the issuer result of a transaction, the status of a message or some action taken or required. See <a href="#issuer-response-codes">issuer response codes</a> for details</td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
<tr>
<td>message</td>
<td>string(255)</td>
<td>Human readable error message which can be displayed to users.</td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when the transaction was processed in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Combined date and time</a> e.g. 2007-08- 30T17:46:11Z</td>
</tr>
<tr>
<td>descriptor</td>
<td>string</td>
<td>Static descriptor MID info as configured on the gateway</td>
</tr>
<tr>
<td>amount</td>
<td>integer</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>sent_to_acquirer</td>
<td>string</td>
<td>&quot;true&quot; or &quot;false&quot;</td>
</tr>
</tbody></table>

<blockquote>
<p>Error Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>stdClass Object
(
    [transaction_type] =&gt; capture
    [status] =&gt; error
    [mode] =&gt; live
    [transaction_id] =&gt; 43671
    [unique_id] =&gt; 44177a21403427eb96664a6d7e5d5d48
    [code] =&gt; 430
    [technical_message] =&gt; Reference transaction has already been captured, and acquirer does not support partial/multiple capture
    [message] =&gt; Transaction declined.
    [timestamp] =&gt; DateTime Object
        (
            [date] =&gt; 2019-03-14 12:05:54.000000
            [timezone_type] =&gt; 2
            [timezone] =&gt; Z
        )
    [descriptor] =&gt; Descriptor one
    [amount] =&gt; 100
    [currency] =&gt; USD
    [sent_to_acquirer] =&gt; false
)
</code></pre>

<pre class="highlight java tab-java"><code><span class="o">&lt;</span><span class="n">payment_response</span> <span class="n">content</span><span class="o">=[</span>
    <span class="o">&lt;</span><span class="n">transaction_type</span> <span class="n">content</span><span class="o">=[</span><span class="n">capture</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">status</span> <span class="n">content</span><span class="o">=[</span><span class="n">error</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">mode</span> <span class="n">content</span><span class="o">=[</span><span class="n">live</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">transaction_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">43671</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">unique_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">44177</span><span class="n">a21403427eb96664a6d7e5d5d48</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">code</span> <span class="n">content</span><span class="o">=[</span><span class="mi">430</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">technical_message</span> <span class="n">content</span><span class="o">=[</span><span class="n">Reference</span> <span class="n">transaction</span> <span class="n">has</span> <span class="n">already</span> <span class="n">been</span> <span class="n">captured</span><span class="o">,</span> <span class="n">and</span> <span class="n">acquirer</span> <span class="n">does</span> <span class="n">not</span> <span class="n">support</span> <span class="n">partial</span><span class="o">/</span><span class="n">multiple</span> <span class="n">capture</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">message</span> <span class="n">content</span><span class="o">=[</span><span class="n">Transaction</span> <span class="n">declined</span><span class="o">.]&gt;</span>
    <span class="o">&lt;</span><span class="n">timestamp</span> <span class="n">content</span><span class="o">=[</span><span class="mi">2019</span><span class="o">-</span><span class="mo">03</span><span class="o">-</span><span class="mi">14</span><span class="nl">T12:</span><span class="mo">05</span><span class="o">:</span><span class="mi">54</span><span class="n">Z</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">descriptor</span> <span class="n">content</span><span class="o">=[</span><span class="n">Descriptor</span> <span class="n">one</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">amount</span> <span class="n">content</span><span class="o">=[</span><span class="mi">100</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">currency</span> <span class="n">content</span><span class="o">=[</span><span class="n">USD</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">sent_to_acquirer</span> <span class="n">content</span><span class="o">=[</span><span class="kc">false</span><span class="o">]&gt;</span>
<span class="o">]&gt;</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="p">{</span>
    <span class="nl">transaction_type</span><span class="p">:</span> <span class="s2">"capture"</span><span class="p">,</span>
    <span class="nx">status</span><span class="p">:</span> <span class="s2">"error"</span><span class="p">,</span>
    <span class="nx">mode</span><span class="p">:</span> <span class="s2">"live"</span><span class="p">,</span>
    <span class="nx">transaction_id</span><span class="p">:</span> <span class="s2">"43671"</span><span class="p">,</span>
    <span class="nx">unique_id</span><span class="p">:</span> <span class="s2">"44177a21403427eb96664a6d7e5d5d48"</span><span class="p">,</span>
    <span class="nx">code</span><span class="p">:</span> <span class="s2">"430"</span><span class="p">,</span>
    <span class="nx">technical_message</span><span class="p">:</span> <span class="s2">"Reference transaction has already been captured, and acquirer does not support partial/multiple capture"</span><span class="p">,</span>
    <span class="nx">message</span><span class="p">:</span> <span class="s2">"Transaction declined."</span><span class="p">,</span>
    <span class="nx">timestamp</span><span class="p">:</span> <span class="s2">"2019-03-14T12:05:54Z"</span><span class="p">,</span>
    <span class="nx">descriptor</span><span class="p">:</span> <span class="s2">"Descriptor one"</span><span class="p">,</span>
    <span class="nx">amount</span><span class="p">:</span> <span class="s2">"100"</span><span class="p">,</span>
    <span class="nx">currency</span><span class="p">:</span> <span class="s2">"USD"</span><span class="p">,</span>
    <span class="nx">sent_to_acquirer</span><span class="p">:</span> <span class="s2">"false"</span><span class="p">,</span>
<span class="p">}</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;capture&lt;/transaction_type&gt;
  &lt;status&gt;error&lt;/status&gt;
  &lt;mode&gt;live&lt;/mode&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;code&gt;430&lt;/code&gt;
  &lt;technical_message&gt;Reference transaction has already been captured, and acquirer does not support partial/multiple capture&lt;/technical_message&gt;
  &lt;message&gt;Transaction declined.&lt;/message&gt;
  &lt;timestamp&gt;2019-03-14T12:05:54Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
  &lt;sent_to_acquirer&gt;false&lt;/sent_to_acquirer&gt;
&lt;/payment_transaction&gt;
</code></pre>

<p><strong>Error Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>The transaction type</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>transaction_id</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>unique_id</td>
<td>string(32)</td>
<td>Unique id defined by gate (must later be used if capturing, voiding or refunding a transaction)</td>
</tr>
<tr>
<td>code</td>
<td>integer</td>
<td>Error code according to <a href="#error-code-table">Error code table</a></td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
<tr>
<td>message</td>
<td>string(255)</td>
<td>Human readable error message which can be displayed to users.</td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when the transaction was processed in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Combined date and time</a> e.g. 2007-08- 30T17:46:11Z</td>
</tr>
<tr>
<td>descriptor</td>
<td>string</td>
<td>Static descriptor MID info as configured on the gateway</td>
</tr>
<tr>
<td>amount</td>
<td>integer</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>sent_to_acquirer</td>
<td>string</td>
<td>&quot;true&quot; or &quot;false&quot;</td>
</tr>
</tbody></table>
<h3 id='sale'>Sale</h3>
<p>Sale transactions combine <a href="#authorize">authorize</a> and <a href="#capture">capture</a> into one step.</p>

<p>Using a sale transaction, the amount is immediately billed to the customer’s credit card. It can be reversed via a <a href="#void">void</a> transaction on the same day of the transaction. Use sale transactions, if you are e.g. selling non-tangible goods or services.</p>

<aside class="notice" >
Sale transactions are also available as 3dsecure transactions
</aside>

<aside class="notice">
This transaction type supports <a href="#tokenization" target="_self">Tokenization</a>.
</aside>

<aside class="notice">
This transaction type supports <a href="#level-3-travel-data" target="_self">Level 3 travel data</a>.
</aside>

<blockquote>
<p>Request</p>
</blockquote>

<pre class="highlight php tab-php"><code><span class="cp">&lt;?php</span>

<span class="c1">// Load the pre-configured ini file...
</span><span class="nx">\Genesis\Config</span><span class="o">::</span><span class="na">loadSettings</span><span class="p">(</span><span class="s1">'/path/to/config.ini'</span><span class="p">);</span>

<span class="nv">$genesis</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Genesis</span><span class="p">(</span><span class="s1">'Financial\Cards\Sale'</span><span class="p">);</span>
<span class="nv">$request</span> <span class="o">=</span> <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">request</span><span class="p">();</span>

<span class="nv">$request</span>
  <span class="o">-&gt;</span><span class="na">setTransactionId</span><span class="p">(</span><span class="s1">'43671'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setUsage</span><span class="p">(</span><span class="s1">'40208 concert tickets'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setRemoteIp</span><span class="p">(</span><span class="s1">'245.253.2.12'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setAmount</span><span class="p">(</span><span class="s1">'100'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCurrency</span><span class="p">(</span><span class="s1">'USD'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCardHolder</span><span class="p">(</span><span class="s1">'Travis Pastrana'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCardNumber</span><span class="p">(</span><span class="s1">'4200000000000000'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setExpirationMonth</span><span class="p">(</span><span class="s1">'12'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setExpirationYear</span><span class="p">(</span><span class="s1">'2020'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCvv</span><span class="p">(</span><span class="s1">'834'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCustomerEmail</span><span class="p">(</span><span class="s1">'travis@example.com'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCustomerPhone</span><span class="p">(</span><span class="s1">'+1987987987987'</span><span class="p">)</span>


  <span class="c1">// Billing Address
</span>  <span class="o">-&gt;</span><span class="na">setBillingFirstName</span><span class="p">(</span><span class="s1">'Travis'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingLastName</span><span class="p">(</span><span class="s1">'Pastrana'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingAddress1</span><span class="p">(</span><span class="s1">'Muster Str. 12'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingZipCode</span><span class="p">(</span><span class="s1">'10178'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingCity</span><span class="p">(</span><span class="s1">'Los Angeles'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingState</span><span class="p">(</span><span class="s1">'CA'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingCountry</span><span class="p">(</span><span class="s1">'US'</span><span class="p">);</span>

<span class="k">try</span> <span class="p">{</span>
    <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">execute</span><span class="p">();</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">response</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">getResponseObject</span><span class="p">();</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">\Exception</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$e</span><span class="o">-&gt;</span><span class="na">getMessage</span><span class="p">();</span>
<span class="p">}</span>
</code></pre>

<pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.GenesisClient</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.TransactionResult</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.constants.Endpoints</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.constants.Environments</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.requests.financial.card.SaleRequest</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.model.Transaction</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Configuration</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Country</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Currency</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.math.BigDecimal</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">GenesisExample</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">()</span>  <span class="o">{</span>

    <span class="c1">// Create configuration</span>
    <span class="n">Configuration</span> <span class="n">configuration</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Configuration</span><span class="o">(</span><span class="n">Environments</span><span class="o">.</span><span class="na">STAGING</span><span class="o">,</span> <span class="n">Endpoints</span><span class="o">.</span><span class="na">EMERCHANTPAY</span><span class="o">);</span>

    <span class="n">configuration</span><span class="o">.</span><span class="na">setUsername</span><span class="o">(</span><span class="s">"SET_YOUR_USERNAME"</span><span class="o">);</span>
    <span class="n">configuration</span><span class="o">.</span><span class="na">setPassword</span><span class="o">(</span><span class="s">"SET_YOUR_PASSWORD"</span><span class="o">);</span>
    <span class="n">configuration</span><span class="o">.</span><span class="na">setToken</span><span class="o">(</span><span class="s">"SET_YOUR_TOKEN"</span><span class="o">);</span>

    <span class="n">SaleRequest</span> <span class="n">request</span> <span class="o">=</span> <span class="k">new</span> <span class="n">SaleRequest</span><span class="o">();</span>

    <span class="n">request</span><span class="o">.</span><span class="na">setTransactionId</span><span class="o">(</span><span class="s">"43671"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setUsage</span><span class="o">(</span><span class="s">"40208 concert tickets"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setRemoteIp</span><span class="o">(</span><span class="s">"245.253.2.12"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setAmount</span><span class="o">(</span><span class="k">new</span> <span class="n">BigDecimal</span><span class="o">(</span><span class="mi">100</span><span class="o">));</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCurrency</span><span class="o">(</span><span class="s">"USD"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCardHolder</span><span class="o">(</span><span class="s">"Travis Pastrana"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCardNumber</span><span class="o">(</span><span class="s">"4200000000000000"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setExpirationMonth</span><span class="o">(</span><span class="s">"12"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setExpirationYear</span><span class="o">(</span><span class="s">"2020"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCvv</span><span class="o">(</span><span class="s">"834"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCustomerEmail</span><span class="o">(</span><span class="s">"travis@example.com"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCustomerPhone</span><span class="o">(</span><span class="s">"+1987987987987"</span><span class="o">);</span>


    <span class="c1">// Billing Address</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingFirstname</span><span class="o">(</span><span class="s">"Travis"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingLastname</span><span class="o">(</span><span class="s">"Pastrana"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingPrimaryAddress</span><span class="o">(</span><span class="s">"Muster Str. 12"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingZipCode</span><span class="o">(</span><span class="s">"10178"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingCity</span><span class="o">(</span><span class="s">"Los Angeles"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingState</span><span class="o">(</span><span class="s">"CA"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingCountry</span><span class="o">(</span><span class="s">"US"</span><span class="o">);</span>

    <span class="n">GenesisClient</span> <span class="n">client</span> <span class="o">=</span> <span class="k">new</span> <span class="n">GenesisClient</span><span class="o">(</span><span class="n">configuration</span><span class="o">,</span> <span class="n">request</span><span class="o">);</span>
    <span class="n">client</span><span class="o">.</span><span class="na">execute</span><span class="o">();</span>

    <span class="c1">// Parse Payment result</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">client</span><span class="o">.</span><span class="na">getResponse</span><span class="o">());</span>

  <span class="o">}</span>
<span class="o">}</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="kd">var</span> <span class="nx">genesis</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'genesis.js/lib/genesis.js'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">transaction</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">genesis</span><span class="p">.</span><span class="nx">transaction</span><span class="p">();</span>

<span class="kd">var</span> <span class="nx">failure</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">reason</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">reason</span><span class="p">);</span>
<span class="p">};</span>

<span class="kd">var</span> <span class="nx">success</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>

<span class="nx">transaction</span><span class="p">.</span><span class="nx">sale</span><span class="p">(</span>
  <span class="p">{</span>
    <span class="s2">"transaction_id"</span><span class="p">:</span> <span class="s2">"43671"</span><span class="p">,</span>
    <span class="s2">"usage"</span><span class="p">:</span> <span class="s2">"40208 concert tickets"</span><span class="p">,</span>
    <span class="s2">"remote_ip"</span><span class="p">:</span> <span class="s2">"245.253.2.12"</span><span class="p">,</span>
    <span class="s2">"amount"</span><span class="p">:</span> <span class="s2">"100"</span><span class="p">,</span>
    <span class="s2">"currency"</span><span class="p">:</span> <span class="s2">"USD"</span><span class="p">,</span>
    <span class="s2">"card_holder"</span><span class="p">:</span> <span class="s2">"Travis Pastrana"</span><span class="p">,</span>
    <span class="s2">"card_number"</span><span class="p">:</span> <span class="s2">"4200000000000000"</span><span class="p">,</span>
    <span class="s2">"expiration_month"</span><span class="p">:</span> <span class="s2">"12"</span><span class="p">,</span>
    <span class="s2">"expiration_year"</span><span class="p">:</span> <span class="mi">2020</span><span class="p">,</span>
    <span class="s2">"cvv"</span><span class="p">:</span> <span class="s2">"834"</span><span class="p">,</span>
    <span class="s2">"customer_email"</span><span class="p">:</span> <span class="s2">"travis@example.com"</span><span class="p">,</span>
    <span class="s2">"customer_phone"</span><span class="p">:</span> <span class="s2">"+1987987987987"</span><span class="p">,</span>
    <span class="s2">"billing_address"</span><span class="p">:</span> <span class="p">{</span>
      <span class="s2">"first_name"</span><span class="p">:</span> <span class="s2">"Travis"</span><span class="p">,</span>
      <span class="s2">"last_name"</span><span class="p">:</span> <span class="s2">"Pastrana"</span><span class="p">,</span>
      <span class="s2">"address1"</span><span class="p">:</span> <span class="s2">"Muster Str. 12"</span><span class="p">,</span>
      <span class="s2">"zip_code"</span><span class="p">:</span> <span class="s2">"10178"</span><span class="p">,</span>
      <span class="s2">"city"</span><span class="p">:</span> <span class="s2">"Los Angeles"</span><span class="p">,</span>
      <span class="s2">"state"</span><span class="p">:</span> <span class="s2">"CA"</span><span class="p">,</span>
      <span class="s2">"country"</span><span class="p">:</span> <span class="s2">"US"</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">).</span><span class="nx">send</span><span class="p">()</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">success</span><span class="p">)</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">failure</span><span class="p">);</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>curl https://username:password@gate.emerchantpay.net/process/TERMINAL-TOKEN <span class="se">\</span>
   -H <span class="s2">"Content-Type: text/xml"</span> <span class="se">\</span>
   -d <span class="s1">'
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;sale&lt;/transaction_type&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;usage&gt;40208 concert tickets&lt;/usage&gt;
  &lt;remote_ip&gt;245.253.2.12&lt;/remote_ip&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
  &lt;card_holder&gt;Travis Pastrana&lt;/card_holder&gt;
  &lt;card_number&gt;4200000000000000&lt;/card_number&gt;
  &lt;expiration_month&gt;12&lt;/expiration_month&gt;
  &lt;expiration_year&gt;2020&lt;/expiration_year&gt;
  &lt;cvv&gt;834&lt;/cvv&gt;
  &lt;customer_email&gt;travis@example.com&lt;/customer_email&gt;
  &lt;customer_phone&gt;+1987987987987&lt;/customer_phone&gt;
  &lt;billing_address&gt;
    &lt;first_name&gt;Travis&lt;/first_name&gt;
    &lt;last_name&gt;Pastrana&lt;/last_name&gt;
    &lt;address1&gt;Muster Str. 12&lt;/address1&gt;
    &lt;zip_code&gt;10178&lt;/zip_code&gt;
    &lt;city&gt;Los Angeles&lt;/city&gt;
    &lt;state&gt;CA&lt;/state&gt;
    &lt;country&gt;US&lt;/country&gt;
  &lt;/billing_address&gt;
&lt;/payment_transaction&gt;'</span>
</code></pre>

<p><strong>Request Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>required</td>
<td>string(255)</td>
<td>The transaction type: <strong>sale</strong></td>
</tr>
<tr>
<td>transaction_id</td>
<td>required</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>usage</td>
<td>optional</td>
<td>string(255)</td>
<td>Description of the transaction for later use</td>
</tr>
<tr>
<td>gaming</td>
<td>optional</td>
<td>&quot;true&quot;</td>
<td>Signifies whether a gaming transaction is performed. Gaming transactions usually use MCC 7995, contact tech support for more details.</td>
</tr>
<tr>
<td>moto</td>
<td>optional</td>
<td>&quot;true&quot;</td>
<td>Signifies whether a MOTO (mail order telephone order) transaction is performed. Contact tech support for more details.</td>
</tr>
<tr>
<td>remote_ip</td>
<td>required*</td>
<td>IPv4 address</td>
<td>IPv4 address of customer</td>
</tr>
<tr>
<td>amount</td>
<td>required</td>
<td>integer &gt; 0</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>required</td>
<td>string(3)</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>card_holder</td>
<td>required</td>
<td>string(255)</td>
<td>Full name of customer as printed on credit card (first name and last name at least)</td>
</tr>
<tr>
<td>card_number</td>
<td>required</td>
<td>13 to 16 digits</td>
<td>Complete cc number of customer</td>
</tr>
<tr>
<td>cvv</td>
<td>required*</td>
<td>3 to 4 digits</td>
<td>cvv of cc, requirement is based on terminal configuration</td>
</tr>
<tr>
<td>expiration_month</td>
<td>required</td>
<td>MM</td>
<td>Expiration month as printed on credit card</td>
</tr>
<tr>
<td>expiration_year</td>
<td>required</td>
<td>YYYY</td>
<td>Expiration year as printed on credit card</td>
</tr>
<tr>
<td>token</td>
<td>optional</td>
<td>string(36)</td>
<td>See <a href="#tokenization">Tokenization</a> for more details. If present, the cardholder parameters can be omitted. Cannot be set together with <code>remember_card</code></td>
</tr>
<tr>
<td>remember_card</td>
<td>optional</td>
<td>&quot;true&quot;</td>
<td>See <a href="#tokenize">Tokenize</a>. Tokenizes cardholder parameters. Cannot be set together with <code>token</code></td>
</tr>
<tr>
<td>consumer_id</td>
<td>optional</td>
<td>string(10)</td>
<td>See <a href="#consumers">Consumers</a> and <a href="#tokenization">Tokenization</a>. Combine with <code>remember_card</code> to tokenize or with <code>token</code> to use token</td>
</tr>
<tr>
<td><strong>credential_on_file</strong></td>
<td>required*</td>
<td></td>
<td>See <a href="#credential-on-file-cof" target="_self">Credential On File (COF)</a> for more details</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;initial_customer_initiated</td>
<td>required*</td>
<td>string(18)</td>
<td>Initial transaction initiated by customer. Required for external tokenization, and optional for gateway-based tokenization</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;subsequent_customer_initiated</td>
<td>required*</td>
<td>string(18)</td>
<td>Subsequent transaction initiated by customer. Required for external tokenization, and optional for gateway-based tokenization</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;merchant_unscheduled</td>
<td>optional</td>
<td>string(20)</td>
<td>Transaction is initiated by the merchant</td>
</tr>
<tr>
<td>customer_email</td>
<td>required*</td>
<td>e-mail address</td>
<td>Must contain valid e-mail of customer</td>
</tr>
<tr>
<td>customer_phone</td>
<td>required*</td>
<td>string(32)</td>
<td>Must contain valid phone number of customer</td>
</tr>
<tr>
<td>birth_date</td>
<td>required*</td>
<td>dd-mm-yyyy</td>
<td>Required when MCC is a Financial Services one (e.g. MCC 6012) and either card brand is Visa or Mastercard/Maestro with UK-based merchant, UK-based bin (domestic), and DEBIT card type</td>
</tr>
<tr>
<td>document_id</td>
<td>required*</td>
<td>sring(20)</td>
<td>Document ID of the consumer. See <a href="#document-id-parameter">Document ID Parameter</a> for more details.</td>
</tr>
<tr>
<td><strong>billing_address</strong></td>
<td>required</td>
<td></td>
<td>See <a href="#required-vs-optional-api-params">Required vs Optional API params</a> for details</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;first_name</td>
<td>required*</td>
<td>string(255)</td>
<td>Customer first name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;last_name</td>
<td>required*</td>
<td>string(255)</td>
<td>Customer last name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address1</td>
<td>required*</td>
<td>string(255)</td>
<td>Primary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address2</td>
<td>required*</td>
<td>string(255)</td>
<td>Secondary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;zip_code</td>
<td>required*</td>
<td>string</td>
<td>ZIP code</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;city</td>
<td>required*</td>
<td>string(255)</td>
<td>City</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;state</td>
<td>required*</td>
<td>string(2)</td>
<td>State code in <a href="https://en.wikipedia.org/wiki/ISO_3166-2">ISO 3166-2</a>, required for USA and Canada</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;country</td>
<td>required*</td>
<td>string(2)</td>
<td>Country code in <a href="https://www.iso.org/iso-3166-country-codes.html">ISO 3166</a></td>
</tr>
<tr>
<td><strong>shipping_address</strong></td>
<td>optional</td>
<td></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;first_name</td>
<td>optional</td>
<td>string(255)</td>
<td>Customer first name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;last_name</td>
<td>optional</td>
<td>string(255)</td>
<td>Customer last name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address1</td>
<td>optional</td>
<td>string(255)</td>
<td>Primary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address2</td>
<td>optional</td>
<td>string(255)</td>
<td>Secondary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;zip_code</td>
<td>optional</td>
<td>string</td>
<td>ZIP code</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;city</td>
<td>optional</td>
<td>string(255)</td>
<td>City</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;state</td>
<td>optional</td>
<td>string(2)</td>
<td>State code in <a href="https://en.wikipedia.org/wiki/ISO_3166-2">ISO 3166-2</a>, required for USA and Canada</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;country</td>
<td>optional</td>
<td>string(2)</td>
<td>Country code in <a href="https://www.iso.org/iso-3166-country-codes.html">ISO 3166</a></td>
</tr>
<tr>
<td><strong>dynamic_descriptor_params</strong></td>
<td>optional</td>
<td></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;merchant_name</td>
<td>optional</td>
<td>string(25)</td>
<td>Allows to dynamically override the charge descriptor</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;merchant_city</td>
<td>optional</td>
<td>string(13)</td>
<td>Allows to dynamically override the merchant phone number</td>
</tr>
</tbody></table>

<p><code>required* = conditionally required</code></p>

<blockquote>
<p>Successful Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>stdClass Object
(
    [transaction_type] =&gt; sale
    [status] =&gt; approved
    [mode] =&gt; live
    [transaction_id] =&gt; 43671
    [unique_id] =&gt; 44177a21403427eb96664a6d7e5d5d48
    [consumer_id] =&gt; 123456
    [token] =&gt; ee946db8-d7db-4bb7-b608-b65b153e127d
    [avs_response_code] =&gt; 5I
    [avs_response_text] =&gt; Response provided by issuer processor; Address information not verified
    [authorization_code] =&gt; 345678
    [response_code] =&gt; 00
    [timestamp] =&gt; DateTime Object
        (
            [date] =&gt; 2019-03-14 12:05:54.000000
            [timezone_type] =&gt; 2
            [timezone] =&gt; Z
        )
    [descriptor] =&gt; Descriptor one
    [amount] =&gt; 100
    [currency] =&gt; USD
    [sent_to_acquirer] =&gt; true
)
</code></pre>

<pre class="highlight java tab-java"><code><span class="o">&lt;</span><span class="n">payment_response</span> <span class="n">content</span><span class="o">=[</span>
    <span class="o">&lt;</span><span class="n">transaction_type</span> <span class="n">content</span><span class="o">=[</span><span class="n">sale</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">status</span> <span class="n">content</span><span class="o">=[</span><span class="n">approved</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">mode</span> <span class="n">content</span><span class="o">=[</span><span class="n">live</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">transaction_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">43671</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">unique_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">44177</span><span class="n">a21403427eb96664a6d7e5d5d48</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">consumer_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">123456</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">token</span> <span class="n">content</span><span class="o">=[</span><span class="n">ee946db8</span><span class="o">-</span><span class="n">d7db</span><span class="o">-</span><span class="mi">4</span><span class="n">bb7</span><span class="o">-</span><span class="n">b608</span><span class="o">-</span><span class="n">b65b153e127d</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">avs_response_code</span> <span class="n">content</span><span class="o">=[</span><span class="mi">5</span><span class="n">I</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">avs_response_text</span> <span class="n">content</span><span class="o">=[</span><span class="n">Response</span> <span class="n">provided</span> <span class="n">by</span> <span class="n">issuer</span> <span class="n">processor</span><span class="o">;</span> <span class="n">Address</span> <span class="n">information</span> <span class="n">not</span> <span class="n">verified</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">authorization_code</span> <span class="n">content</span><span class="o">=[</span><span class="mi">345678</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">response_code</span> <span class="n">content</span><span class="o">=[</span><span class="mo">00</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">timestamp</span> <span class="n">content</span><span class="o">=[</span><span class="mi">2019</span><span class="o">-</span><span class="mo">03</span><span class="o">-</span><span class="mi">14</span><span class="nl">T12:</span><span class="mo">05</span><span class="o">:</span><span class="mi">54</span><span class="n">Z</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">descriptor</span> <span class="n">content</span><span class="o">=[</span><span class="n">Descriptor</span> <span class="n">one</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">amount</span> <span class="n">content</span><span class="o">=[</span><span class="mi">100</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">currency</span> <span class="n">content</span><span class="o">=[</span><span class="n">USD</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">sent_to_acquirer</span> <span class="n">content</span><span class="o">=[</span><span class="kc">true</span><span class="o">]&gt;</span>
<span class="o">]&gt;</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="p">{</span>
    <span class="nl">transaction_type</span><span class="p">:</span> <span class="s2">"sale"</span><span class="p">,</span>
    <span class="nx">status</span><span class="p">:</span> <span class="s2">"approved"</span><span class="p">,</span>
    <span class="nx">mode</span><span class="p">:</span> <span class="s2">"live"</span><span class="p">,</span>
    <span class="nx">transaction_id</span><span class="p">:</span> <span class="s2">"43671"</span><span class="p">,</span>
    <span class="nx">unique_id</span><span class="p">:</span> <span class="s2">"44177a21403427eb96664a6d7e5d5d48"</span><span class="p">,</span>
    <span class="nx">consumer_id</span><span class="p">:</span> <span class="s2">"123456"</span><span class="p">,</span>
    <span class="nx">token</span><span class="p">:</span> <span class="s2">"ee946db8-d7db-4bb7-b608-b65b153e127d"</span><span class="p">,</span>
    <span class="nx">avs_response_code</span><span class="p">:</span> <span class="s2">"5I"</span><span class="p">,</span>
    <span class="nx">avs_response_text</span><span class="p">:</span> <span class="s2">"Response provided by issuer processor; Address information not verified"</span><span class="p">,</span>
    <span class="nx">authorization_code</span><span class="p">:</span> <span class="s2">"345678"</span><span class="p">,</span>
    <span class="nx">response_code</span><span class="p">:</span> <span class="s2">"00"</span><span class="p">,</span>
    <span class="nx">timestamp</span><span class="p">:</span> <span class="s2">"2019-03-14T12:05:54Z"</span><span class="p">,</span>
    <span class="nx">descriptor</span><span class="p">:</span> <span class="s2">"Descriptor one"</span><span class="p">,</span>
    <span class="nx">amount</span><span class="p">:</span> <span class="s2">"100"</span><span class="p">,</span>
    <span class="nx">currency</span><span class="p">:</span> <span class="s2">"USD"</span><span class="p">,</span>
    <span class="nx">sent_to_acquirer</span><span class="p">:</span> <span class="s2">"true"</span><span class="p">,</span>
<span class="p">}</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;sale&lt;/transaction_type&gt;
  &lt;status&gt;approved&lt;/status&gt;
  &lt;mode&gt;live&lt;/mode&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;consumer_id&gt;123456&lt;/consumer_id&gt;
  &lt;token&gt;ee946db8-d7db-4bb7-b608-b65b153e127d&lt;/token&gt;
  &lt;avs_response_code&gt;5I&lt;/avs_response_code&gt;
  &lt;avs_response_text&gt;Response provided by issuer processor; Address information not verified&lt;/avs_response_text&gt;
  &lt;authorization_code&gt;345678&lt;/authorization_code&gt;
  &lt;response_code&gt;00&lt;/response_code&gt;
  &lt;timestamp&gt;2019-03-14T12:05:54Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
  &lt;sent_to_acquirer&gt;true&lt;/sent_to_acquirer&gt;
&lt;/payment_transaction&gt;
</code></pre>

<p><strong>Successful Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>The transaction type</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>transaction_id</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>unique_id</td>
<td>string(32)</td>
<td>Unique id defined by gate (must later be used if capturing, voiding or refunding a transaction)</td>
</tr>
<tr>
<td>consumer_id</td>
<td>string(10)</td>
<td>Consumer unique reference. See <a href="#consumers">Consumers</a></td>
</tr>
<tr>
<td>token</td>
<td>string(36)</td>
<td>Plain-text token value. See <a href="#tokenization">Tokenization</a></td>
</tr>
<tr>
<td>gaming</td>
<td>string</td>
<td>Signifies whether a gaming transaction is performed. Gaming transactions usually use MCC 7995, contact tech support for more details.</td>
</tr>
<tr>
<td>moto</td>
<td>string</td>
<td>Signifies whether a MOTO (mail order telephone order) transaction is performed. Contact tech support for more details.</td>
</tr>
<tr>
<td>avs_response_code</td>
<td>string</td>
<td>Generated by the card network on trying to match the billing address when performing the address verification. Optional, returned if config is enabled and acquirer supports it. Check <a href="#avs-status-codes">AVS Status Codes</a> for details.</td>
</tr>
<tr>
<td>avs_response_text</td>
<td>string</td>
<td>Gives the human response text for the AVS response code above. Optional, returned if config is enabled and acquirer supports it. Check [AVS Status Codes](#avs-status-codes for details.</td>
</tr>
<tr>
<td>authorization_code</td>
<td>string(6)</td>
<td>Generated by the card network when an authorisation has occurred, used to identify that auth. Consists of 6 alphanumeric chars</td>
</tr>
<tr>
<td>response_code</td>
<td>string(2)</td>
<td>Defines the issuer result of a transaction, the status of a message or some action taken or required. See <a href="#issuer-response-codes">issuer response codes</a> for details</td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
<tr>
<td>message</td>
<td>string(255)</td>
<td>Human readable error message which can be displayed to users.</td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when the transaction was processed in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Combined date and time</a> e.g. 2007-08- 30T17:46:11Z</td>
</tr>
<tr>
<td>descriptor</td>
<td>string</td>
<td>Static descriptor MID info as configured on the gateway</td>
</tr>
<tr>
<td>amount</td>
<td>integer</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>partial_approval</td>
<td>string(4)</td>
<td>Optional, set to ’true’ if partial approval happened. Partially approved amount is then in the amount field. Check <a href="#partial-approvals">Partial Approvals</a> for details</td>
</tr>
<tr>
<td>sent_to_acquirer</td>
<td>string</td>
<td>&quot;true&quot; or &quot;false&quot;</td>
</tr>
<tr>
<td>dynamic_descriptor_params</td>
<td>section</td>
<td>Optional, returned only if dynamic desc params are submitted on the API. Note here that the formatted dyn desc params are returned - as they would be submitted to the schemes for settlement.</td>
</tr>
</tbody></table>

<blockquote>
<p>Error Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>stdClass Object
(
    [transaction_type] =&gt; sale
    [status] =&gt; error
    [mode] =&gt; live
    [transaction_id] =&gt; 43671
    [unique_id] =&gt; 44177a21403427eb96664a6d7e5d5d48
    [response_code] =&gt; 57
    [code] =&gt; 340
    [technical_message] =&gt; billing_address[zip_code] is invalid!
    [message] =&gt; billing_address[zip_code] is invalid!
    [timestamp] =&gt; DateTime Object
        (
            [date] =&gt; 2019-03-14 12:05:54.000000
            [timezone_type] =&gt; 2
            [timezone] =&gt; Z
        )
    [descriptor] =&gt; Descriptor one
    [amount] =&gt; 100
    [currency] =&gt; USD
    [sent_to_acquirer] =&gt; false
)
</code></pre>

<pre class="highlight java tab-java"><code><span class="o">&lt;</span><span class="n">payment_response</span> <span class="n">content</span><span class="o">=[</span>
    <span class="o">&lt;</span><span class="n">transaction_type</span> <span class="n">content</span><span class="o">=[</span><span class="n">sale</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">status</span> <span class="n">content</span><span class="o">=[</span><span class="n">error</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">mode</span> <span class="n">content</span><span class="o">=[</span><span class="n">live</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">transaction_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">43671</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">unique_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">44177</span><span class="n">a21403427eb96664a6d7e5d5d48</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">response_code</span> <span class="n">content</span><span class="o">=[</span><span class="mi">57</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">code</span> <span class="n">content</span><span class="o">=[</span><span class="mi">340</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">technical_message</span> <span class="n">content</span><span class="o">=[</span><span class="n">billing_address</span><span class="o">[</span><span class="n">zip_code</span><span class="o">]</span> <span class="n">is</span> <span class="n">invalid</span><span class="o">!]&gt;</span>
    <span class="o">&lt;</span><span class="n">message</span> <span class="n">content</span><span class="o">=[</span><span class="n">billing_address</span><span class="o">[</span><span class="n">zip_code</span><span class="o">]</span> <span class="n">is</span> <span class="n">invalid</span><span class="o">!]&gt;</span>
    <span class="o">&lt;</span><span class="n">timestamp</span> <span class="n">content</span><span class="o">=[</span><span class="mi">2019</span><span class="o">-</span><span class="mo">03</span><span class="o">-</span><span class="mi">14</span><span class="nl">T12:</span><span class="mo">05</span><span class="o">:</span><span class="mi">54</span><span class="n">Z</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">descriptor</span> <span class="n">content</span><span class="o">=[</span><span class="n">Descriptor</span> <span class="n">one</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">amount</span> <span class="n">content</span><span class="o">=[</span><span class="mi">100</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">currency</span> <span class="n">content</span><span class="o">=[</span><span class="n">USD</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">sent_to_acquirer</span> <span class="n">content</span><span class="o">=[</span><span class="kc">false</span><span class="o">]&gt;</span>
<span class="o">]&gt;</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="p">{</span>
    <span class="nl">transaction_type</span><span class="p">:</span> <span class="s2">"sale"</span><span class="p">,</span>
    <span class="nx">status</span><span class="p">:</span> <span class="s2">"error"</span><span class="p">,</span>
    <span class="nx">mode</span><span class="p">:</span> <span class="s2">"live"</span><span class="p">,</span>
    <span class="nx">transaction_id</span><span class="p">:</span> <span class="s2">"43671"</span><span class="p">,</span>
    <span class="nx">unique_id</span><span class="p">:</span> <span class="s2">"44177a21403427eb96664a6d7e5d5d48"</span><span class="p">,</span>
    <span class="nx">response_code</span><span class="p">:</span> <span class="s2">"57"</span><span class="p">,</span>
    <span class="nx">code</span><span class="p">:</span> <span class="s2">"340"</span><span class="p">,</span>
    <span class="nx">technical_message</span><span class="p">:</span> <span class="s2">"billing_address[zip_code] is invalid!"</span><span class="p">,</span>
    <span class="nx">message</span><span class="p">:</span> <span class="s2">"billing_address[zip_code] is invalid!"</span><span class="p">,</span>
    <span class="nx">timestamp</span><span class="p">:</span> <span class="s2">"2019-03-14T12:05:54Z"</span><span class="p">,</span>
    <span class="nx">descriptor</span><span class="p">:</span> <span class="s2">"Descriptor one"</span><span class="p">,</span>
    <span class="nx">amount</span><span class="p">:</span> <span class="s2">"100"</span><span class="p">,</span>
    <span class="nx">currency</span><span class="p">:</span> <span class="s2">"USD"</span><span class="p">,</span>
    <span class="nx">sent_to_acquirer</span><span class="p">:</span> <span class="s2">"false"</span><span class="p">,</span>
<span class="p">}</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;sale&lt;/transaction_type&gt;
  &lt;status&gt;error&lt;/status&gt;
  &lt;mode&gt;live&lt;/mode&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;response_code&gt;57&lt;/response_code&gt;
  &lt;code&gt;340&lt;/code&gt;
  &lt;technical_message&gt;billing_address[zip_code] is invalid!&lt;/technical_message&gt;
  &lt;message&gt;billing_address[zip_code] is invalid!&lt;/message&gt;
  &lt;timestamp&gt;2019-03-14T12:05:54Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
  &lt;sent_to_acquirer&gt;false&lt;/sent_to_acquirer&gt;
&lt;/payment_transaction&gt;
</code></pre>

<p><strong>Error Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>The transaction type</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>transaction_id</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>unique_id</td>
<td>string(32)</td>
<td>Unique id defined by gate (must later be used if capturing, voiding or refunding a transaction)</td>
</tr>
<tr>
<td>gaming</td>
<td>string</td>
<td>Signifies whether a gaming transaction is performed. Gaming transactions usually use MCC 7995, contact tech support for more details.</td>
</tr>
<tr>
<td>moto</td>
<td>string</td>
<td>Signifies whether a MOTO (mail order telephone order) transaction is performed. Contact tech support for more details.</td>
</tr>
<tr>
<td>response_code</td>
<td>string(2)</td>
<td>Defines the issuer result of a transaction, the status of a message or some action taken or required. See <a href="#issuer-response-codes">issuer response codes</a> for details</td>
</tr>
<tr>
<td>code</td>
<td>integer</td>
<td>Error code according to <a href="#error-code-table">Error code table</a></td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
<tr>
<td>message</td>
<td>string(255)</td>
<td>Human readable error message which can be displayed to users.</td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when the transaction was processed in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Combined date and time</a> e.g. 2007-08- 30T17:46:11Z</td>
</tr>
<tr>
<td>descriptor</td>
<td>string</td>
<td>Static descriptor MID info as configured on the gateway</td>
</tr>
<tr>
<td>amount</td>
<td>integer</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>sent_to_acquirer</td>
<td>string</td>
<td>&quot;true&quot; or &quot;false&quot;</td>
</tr>
<tr>
<td>dynamic_descriptor_params</td>
<td>section</td>
<td>Optional, returned only if dynamic desc params are submitted on the API. Note here that the formatted dyn desc params are returned - as they would be submitted to the schemes for settlement.</td>
</tr>
</tbody></table>
<h3 id='argencard'>Argencard</h3>
<aside class="notice">
Argencard is a debit or credit card used in Argentina. It allows online shoppers to pay offline for their online purchases at over 150,000 physical outlets.
</aside>

<blockquote>
<p>Request</p>
</blockquote>

<pre class="highlight php tab-php"><code>This request is not implemented yet
</code></pre>

<pre class="highlight java tab-java"><code><span class="n">This</span> <span class="n">request</span> <span class="n">is</span> <span class="n">not</span> <span class="n">implemented</span> <span class="n">yet</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>curl https://username:password@gate.emerchantpay.net/process/TERMINAL-TOKEN <span class="se">\</span>
   -H <span class="s2">"Content-Type: text/xml"</span> <span class="se">\</span>
   -d <span class="s1">'
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;argencard&lt;/transaction_type&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;usage&gt;40208 concert tickets&lt;/usage&gt;
  &lt;remote_ip&gt;245.253.2.12&lt;/remote_ip&gt;
  &lt;return_success_url&gt;http://www.example.com/success&lt;/return_success_url&gt;
  &lt;return_failure_url&gt;http://www.example.com/failure&lt;/return_failure_url&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
  &lt;consumer_reference&gt;barney_rumble&lt;/consumer_reference&gt;
  &lt;national_id&gt;8812128812&lt;/national_id&gt;
  &lt;birth_date&gt;30-12-1992&lt;/birth_date&gt;
  &lt;customer_email&gt;barney@example.com&lt;/customer_email&gt;
  &lt;billing_address&gt;
    &lt;first_name&gt;Barney&lt;/first_name&gt;
    &lt;last_name&gt;Rubble&lt;/last_name&gt;
    &lt;address1&gt;14, Nerazdelni str&lt;/address1&gt;
    &lt;zip_code&gt;1407&lt;/zip_code&gt;
    &lt;city&gt;Buenos Aires&lt;/city&gt;
    &lt;country&gt;AR&lt;/country&gt;
  &lt;/billing_address&gt;
  &lt;risk_params&gt;
    &lt;user_id&gt;123456&lt;/user_id&gt;
  &lt;/risk_params&gt;
&lt;/payment_transaction&gt;'</span>
</code></pre>

<p><strong>Request Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>required</td>
<td>string(255)</td>
<td>The transaction type: <strong>argencard</strong></td>
</tr>
<tr>
<td>transaction_id</td>
<td>required</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>usage</td>
<td>optional</td>
<td>string(255)</td>
<td>Description of the transaction for later use</td>
</tr>
<tr>
<td>remote_ip</td>
<td>required*</td>
<td>IPv4 address</td>
<td>IPv4 address of customer</td>
</tr>
<tr>
<td>return_success_url</td>
<td>required</td>
<td>url</td>
<td>URL where customer is sent to after successful payment</td>
</tr>
<tr>
<td>return_failure_url</td>
<td>required</td>
<td>url</td>
<td>URL where customer is sent to after unsuccessful payment</td>
</tr>
<tr>
<td>amount</td>
<td>required</td>
<td>integer &gt; 0</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>required</td>
<td>string(3)</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>consumer_reference</td>
<td>required</td>
<td>string(20)</td>
<td>Consumer reference is a unique consumer identifier</td>
</tr>
<tr>
<td>national_id</td>
<td>required</td>
<td>string(20)</td>
<td>National Identifier number of the customer</td>
</tr>
<tr>
<td>birth_date</td>
<td>optional</td>
<td>dd-mm-yyyy</td>
<td>Required for Visa only when MCC is a Financial Services one (e.g. MCC 6012)</td>
</tr>
<tr>
<td>customer_email</td>
<td>required</td>
<td>e-mail address</td>
<td>Must contain valid e-mail of customer</td>
</tr>
<tr>
<td><strong>billing_address</strong></td>
<td>required</td>
<td></td>
<td>See <a href="#required-vs-optional-api-params">Required vs Optional API params</a> for details</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;first_name</td>
<td>required*</td>
<td>string(255)</td>
<td>Customer first name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;last_name</td>
<td>required*</td>
<td>string(255)</td>
<td>Customer last name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address1</td>
<td>required*</td>
<td>string(255)</td>
<td>Primary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address2</td>
<td>required*</td>
<td>string(255)</td>
<td>Secondary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;zip_code</td>
<td>required*</td>
<td>string</td>
<td>ZIP code</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;city</td>
<td>required*</td>
<td>string(255)</td>
<td>City</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;state</td>
<td>required*</td>
<td>string(2)</td>
<td>State code in <a href="https://en.wikipedia.org/wiki/ISO_3166-2">ISO 3166-2</a>, required for USA and Canada</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;country</td>
<td>required</td>
<td>string(2)</td>
<td>Country code in <a href="https://www.iso.org/iso-3166-country-codes.html">ISO 3166</a></td>
</tr>
<tr>
<td><strong>shipping_address</strong></td>
<td>optional</td>
<td></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;first_name</td>
<td>optional</td>
<td>string(255)</td>
<td>Customer first name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;last_name</td>
<td>optional</td>
<td>string(255)</td>
<td>Customer last name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address1</td>
<td>optional</td>
<td>string(255)</td>
<td>Primary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address2</td>
<td>optional</td>
<td>string(255)</td>
<td>Secondary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;zip_code</td>
<td>optional</td>
<td>string</td>
<td>ZIP code</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;city</td>
<td>optional</td>
<td>string(255)</td>
<td>City</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;state</td>
<td>optional</td>
<td>string(2)</td>
<td>State code in <a href="https://en.wikipedia.org/wiki/ISO_3166-2">ISO 3166-2</a>, required for USA and Canada</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;country</td>
<td>optional</td>
<td>string(2)</td>
<td>Country code in <a href="https://www.iso.org/iso-3166-country-codes.html">ISO 3166</a></td>
</tr>
</tbody></table>

<p><code>required* = conditionally required</code></p>

<p><strong>Supported countries:</strong></p>

<table><thead>
<tr>
<th>Country</th>
</tr>
</thead><tbody>
<tr>
<td>AR</td>
</tr>
</tbody></table>

<blockquote>
<p>Successful Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>This request is not implemented yet
</code></pre>

<pre class="highlight java tab-java"><code><span class="n">This</span> <span class="n">request</span> <span class="n">is</span> <span class="n">not</span> <span class="n">implemented</span> <span class="n">yet</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;argencard&lt;/transaction_type&gt;
  &lt;status&gt;pending_async&lt;/status&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;redirect_url&gt;https://gate.emerchantpay.net/redirect/to_acquirer/649e1ff35c61&lt;/redirect_url&gt;
  &lt;technical_message&gt;Transaction successful!&lt;/technical_message&gt;
  &lt;message&gt;Transaction successful!&lt;/message&gt;
  &lt;timestamp&gt;2019-03-14T12:05:54Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
  &lt;sent_to_acquirer&gt;true&lt;/sent_to_acquirer&gt;
&lt;/payment_transaction&gt;
</code></pre>

<p><strong>Successful Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>The transaction type</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>transaction_id</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>unique_id</td>
<td>string(32)</td>
<td>Unique id defined by gate (must later be used if capturing, voiding or refunding a transaction)</td>
</tr>
<tr>
<td>redirect_url</td>
<td>url</td>
<td>URL where user has to be redirected to complete payment process. It is available for asynchronous mode</td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
<tr>
<td>message</td>
<td>string(255)</td>
<td>Human readable error message which can be displayed to users.</td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when the transaction was processed in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Combined date and time</a> e.g. 2007-08- 30T17:46:11Z</td>
</tr>
<tr>
<td>descriptor</td>
<td>string</td>
<td>Static descriptor MID info as configured on the gateway</td>
</tr>
<tr>
<td>amount</td>
<td>integer</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>sent_to_acquirer</td>
<td>string</td>
<td>&quot;true&quot; or &quot;false&quot;</td>
</tr>
</tbody></table>

<blockquote>
<p>Error Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>This request is not implemented yet
</code></pre>

<pre class="highlight java tab-java"><code><span class="n">This</span> <span class="n">request</span> <span class="n">is</span> <span class="n">not</span> <span class="n">implemented</span> <span class="n">yet</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;argencard&lt;/transaction_type&gt;
  &lt;status&gt;error&lt;/status&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;code&gt;110&lt;/code&gt;
  &lt;message&gt;Something went wrong, please contact support!&lt;/message&gt;
  &lt;timestamp&gt;2019-03-14T12:05:54Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
  &lt;sent_to_acquirer&gt;true&lt;/sent_to_acquirer&gt;
&lt;/payment_transaction&gt;
</code></pre>

<p><strong>Error Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>The transaction type</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>transaction_id</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>unique_id</td>
<td>string(32)</td>
<td>Unique id defined by gate (must later be used if capturing, voiding or refunding a transaction)</td>
</tr>
<tr>
<td>code</td>
<td>integer</td>
<td>Error code according to <a href="#error-code-table">Error code table</a></td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
<tr>
<td>message</td>
<td>string(255)</td>
<td>Human readable error message which can be displayed to users.</td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when the transaction was processed in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Combined date and time</a> e.g. 2007-08- 30T17:46:11Z</td>
</tr>
<tr>
<td>descriptor</td>
<td>string</td>
<td>Static descriptor MID info as configured on the gateway</td>
</tr>
<tr>
<td>amount</td>
<td>integer</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>sent_to_acquirer</td>
<td>string</td>
<td>&quot;true&quot; or &quot;false&quot;</td>
</tr>
</tbody></table>
<h3 id='aura'>Aura</h3>
<aside class="notice">
Aura is a local Brazilian credit card.
</aside>

<blockquote>
<p>Request</p>
</blockquote>

<pre class="highlight php tab-php"><code>This request is not implemented yet
</code></pre>

<pre class="highlight java tab-java"><code><span class="n">This</span> <span class="n">request</span> <span class="n">is</span> <span class="n">not</span> <span class="n">implemented</span> <span class="n">yet</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>curl https://username:password@gate.emerchantpay.net/process/TERMINAL-TOKEN <span class="se">\</span>
   -H <span class="s2">"Content-Type: text/xml"</span> <span class="se">\</span>
   -d <span class="s1">'
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;aura&lt;/transaction_type&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;usage&gt;40208 concert tickets&lt;/usage&gt;
  &lt;remote_ip&gt;245.253.2.12&lt;/remote_ip&gt;
  &lt;return_success_url&gt;http://www.example.com/success&lt;/return_success_url&gt;
  &lt;return_failure_url&gt;http://www.example.com/failure&lt;/return_failure_url&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
  &lt;consumer_reference&gt;barney_rumble&lt;/consumer_reference&gt;
  &lt;national_id&gt;8812128812&lt;/national_id&gt;
  &lt;birth_date&gt;30-12-1992&lt;/birth_date&gt;
  &lt;customer_email&gt;barney@example.com&lt;/customer_email&gt;
  &lt;billing_address&gt;
    &lt;first_name&gt;Barney&lt;/first_name&gt;
    &lt;last_name&gt;Rubble&lt;/last_name&gt;
    &lt;address1&gt;14, Nerazdelni str&lt;/address1&gt;
    &lt;zip_code&gt;1407&lt;/zip_code&gt;
    &lt;city&gt;Salvador&lt;/city&gt;
    &lt;country&gt;BR&lt;/country&gt;
  &lt;/billing_address&gt;
  &lt;risk_params&gt;
    &lt;user_id&gt;123456&lt;/user_id&gt;
  &lt;/risk_params&gt;
&lt;/payment_transaction&gt;'</span>
</code></pre>

<p><strong>Request Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>required</td>
<td>string(255)</td>
<td>The transaction type: <strong>aura</strong></td>
</tr>
<tr>
<td>transaction_id</td>
<td>required</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>usage</td>
<td>optional</td>
<td>string(255)</td>
<td>Description of the transaction for later use</td>
</tr>
<tr>
<td>remote_ip</td>
<td>required*</td>
<td>IPv4 address</td>
<td>IPv4 address of customer</td>
</tr>
<tr>
<td>return_success_url</td>
<td>required</td>
<td>url</td>
<td>URL where customer is sent to after successful payment</td>
</tr>
<tr>
<td>return_failure_url</td>
<td>required</td>
<td>url</td>
<td>URL where customer is sent to after unsuccessful payment</td>
</tr>
<tr>
<td>amount</td>
<td>required</td>
<td>integer &gt; 0</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>required</td>
<td>string(3)</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>consumer_reference</td>
<td>required</td>
<td>string(20)</td>
<td>Consumer reference is a unique consumer identifier</td>
</tr>
<tr>
<td>national_id</td>
<td>required</td>
<td>string(20)</td>
<td>National Identifier number of the customer</td>
</tr>
<tr>
<td>birth_date</td>
<td>optional</td>
<td>dd-mm-yyyy</td>
<td>Required for Visa only when MCC is a Financial Services one (e.g. MCC 6012)</td>
</tr>
<tr>
<td>customer_email</td>
<td>required</td>
<td>e-mail address</td>
<td>Must contain valid e-mail of customer</td>
</tr>
<tr>
<td><strong>billing_address</strong></td>
<td>required</td>
<td></td>
<td>See <a href="#required-vs-optional-api-params">Required vs Optional API params</a> for details</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;first_name</td>
<td>required*</td>
<td>string(255)</td>
<td>Customer first name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;last_name</td>
<td>required*</td>
<td>string(255)</td>
<td>Customer last name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address1</td>
<td>required*</td>
<td>string(255)</td>
<td>Primary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address2</td>
<td>required*</td>
<td>string(255)</td>
<td>Secondary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;zip_code</td>
<td>required*</td>
<td>string</td>
<td>ZIP code</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;city</td>
<td>required*</td>
<td>string(255)</td>
<td>City</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;state</td>
<td>required*</td>
<td>string(2)</td>
<td>State code in <a href="https://en.wikipedia.org/wiki/ISO_3166-2">ISO 3166-2</a>, required for USA and Canada</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;country</td>
<td>required</td>
<td>string(2)</td>
<td>Country code in <a href="https://www.iso.org/iso-3166-country-codes.html">ISO 3166</a></td>
</tr>
<tr>
<td><strong>shipping_address</strong></td>
<td>optional</td>
<td></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;first_name</td>
<td>optional</td>
<td>string(255)</td>
<td>Customer first name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;last_name</td>
<td>optional</td>
<td>string(255)</td>
<td>Customer last name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address1</td>
<td>optional</td>
<td>string(255)</td>
<td>Primary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address2</td>
<td>optional</td>
<td>string(255)</td>
<td>Secondary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;zip_code</td>
<td>optional</td>
<td>string</td>
<td>ZIP code</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;city</td>
<td>optional</td>
<td>string(255)</td>
<td>City</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;state</td>
<td>optional</td>
<td>string(2)</td>
<td>State code in <a href="https://en.wikipedia.org/wiki/ISO_3166-2">ISO 3166-2</a>, required for USA and Canada</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;country</td>
<td>optional</td>
<td>string(2)</td>
<td>Country code in <a href="https://www.iso.org/iso-3166-country-codes.html">ISO 3166</a></td>
</tr>
</tbody></table>

<p><code>required* = conditionally required</code></p>

<p><strong>Supported countries:</strong></p>

<table><thead>
<tr>
<th>Country</th>
</tr>
</thead><tbody>
<tr>
<td>BR</td>
</tr>
</tbody></table>

<blockquote>
<p>Successful Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>This request is not implemented yet
</code></pre>

<pre class="highlight java tab-java"><code><span class="n">This</span> <span class="n">request</span> <span class="n">is</span> <span class="n">not</span> <span class="n">implemented</span> <span class="n">yet</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;aura&lt;/transaction_type&gt;
  &lt;status&gt;pending_async&lt;/status&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;redirect_url&gt;https://gate.emerchantpay.net/redirect/to_acquirer/649e1ff35c61&lt;/redirect_url&gt;
  &lt;technical_message&gt;Transaction successful!&lt;/technical_message&gt;
  &lt;message&gt;Transaction successful!&lt;/message&gt;
  &lt;timestamp&gt;2019-03-14T12:05:55Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
  &lt;sent_to_acquirer&gt;true&lt;/sent_to_acquirer&gt;
&lt;/payment_transaction&gt;
</code></pre>

<p><strong>Successful Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>The transaction type</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>transaction_id</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>unique_id</td>
<td>string(32)</td>
<td>Unique id defined by gate (must later be used if capturing, voiding or refunding a transaction)</td>
</tr>
<tr>
<td>redirect_url</td>
<td>url</td>
<td>URL where user has to be redirected to complete payment process. It is available for asynchronous mode</td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
<tr>
<td>message</td>
<td>string(255)</td>
<td>Human readable error message which can be displayed to users.</td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when the transaction was processed in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Combined date and time</a> e.g. 2007-08- 30T17:46:11Z</td>
</tr>
<tr>
<td>descriptor</td>
<td>string</td>
<td>Static descriptor MID info as configured on the gateway</td>
</tr>
<tr>
<td>amount</td>
<td>integer</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>sent_to_acquirer</td>
<td>string</td>
<td>&quot;true&quot; or &quot;false&quot;</td>
</tr>
</tbody></table>

<blockquote>
<p>Error Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>This request is not implemented yet
</code></pre>

<pre class="highlight java tab-java"><code><span class="n">This</span> <span class="n">request</span> <span class="n">is</span> <span class="n">not</span> <span class="n">implemented</span> <span class="n">yet</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;aura&lt;/transaction_type&gt;
  &lt;status&gt;error&lt;/status&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;code&gt;110&lt;/code&gt;
  &lt;message&gt;Something went wrong, please contact support!&lt;/message&gt;
  &lt;timestamp&gt;2019-03-14T12:05:55Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
  &lt;sent_to_acquirer&gt;true&lt;/sent_to_acquirer&gt;
&lt;/payment_transaction&gt;
</code></pre>

<p><strong>Error Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>The transaction type</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>transaction_id</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>unique_id</td>
<td>string(32)</td>
<td>Unique id defined by gate (must later be used if capturing, voiding or refunding a transaction)</td>
</tr>
<tr>
<td>code</td>
<td>integer</td>
<td>Error code according to <a href="#error-code-table">Error code table</a></td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
<tr>
<td>message</td>
<td>string(255)</td>
<td>Human readable error message which can be displayed to users.</td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when the transaction was processed in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Combined date and time</a> e.g. 2007-08- 30T17:46:11Z</td>
</tr>
<tr>
<td>descriptor</td>
<td>string</td>
<td>Static descriptor MID info as configured on the gateway</td>
</tr>
<tr>
<td>amount</td>
<td>integer</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>sent_to_acquirer</td>
<td>string</td>
<td>&quot;true&quot; or &quot;false&quot;</td>
</tr>
</tbody></table>
<h3 id='bancontact'>Bancontact</h3>
<aside class="notice" >
  Bancontact is a local Belgian debit card scheme. All Belgian debit cards are co-branded Bancontact and Maestro.
  <br><br>
  Transaction flow for a consumer is identical to a Maestro payment.
</aside>

<blockquote>
<p>Request</p>
</blockquote>

<pre class="highlight php tab-php"><code>This request is not implemented yet
</code></pre>

<pre class="highlight java tab-java"><code><span class="n">This</span> <span class="n">request</span> <span class="n">is</span> <span class="n">not</span> <span class="n">implemented</span> <span class="n">yet</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>curl https://username:password@gate.emerchantpay.net/process/TERMINAL-TOKEN <span class="se">\</span>
   -H <span class="s2">"Content-Type: text/xml"</span> <span class="se">\</span>
   -d <span class="s1">'
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;bcmc&lt;/transaction_type&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;usage&gt;40208 concert tickets&lt;/usage&gt;
  &lt;remote_ip&gt;245.253.2.12&lt;/remote_ip&gt;
  &lt;return_success_url&gt;http://www.example.com/success&lt;/return_success_url&gt;
  &lt;return_failure_url&gt;http://www.example.com/failure&lt;/return_failure_url&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;EUR&lt;/currency&gt;
  &lt;billing_address&gt;
    &lt;first_name&gt;Travis&lt;/first_name&gt;
    &lt;last_name&gt;Pastrana&lt;/last_name&gt;
    &lt;address1&gt;Muster Str. 12&lt;/address1&gt;
    &lt;zip_code&gt;12114&lt;/zip_code&gt;
    &lt;city&gt;Brussels&lt;/city&gt;
    &lt;country&gt;BE&lt;/country&gt;
  &lt;/billing_address&gt;
&lt;/payment_transaction&gt;'</span>
</code></pre>

<blockquote>
<p>Request</p>
</blockquote>

<pre class="highlight php tab-php"><code><span class="cp">&lt;?php</span>

<span class="c1">// Load the pre-configured ini file...
</span><span class="nx">\Genesis\Config</span><span class="o">::</span><span class="na">loadSettings</span><span class="p">(</span><span class="s1">'/path/to/config.ini'</span><span class="p">);</span>

<span class="nv">$genesis</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Genesis</span><span class="p">(</span><span class="s1">'Financial\Alternatives\PPRO'</span><span class="p">);</span>
<span class="nv">$request</span> <span class="o">=</span> <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">request</span><span class="p">();</span>

<span class="nv">$request</span>
  <span class="o">-&gt;</span><span class="na">setPaymentType</span><span class="p">(</span><span class="s1">'bcmc'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setTransactionId</span><span class="p">(</span><span class="s1">'43671'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setUsage</span><span class="p">(</span><span class="s1">'40208 concert tickets'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setRemoteIp</span><span class="p">(</span><span class="s1">'245.253.2.12'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setReturnSuccessUrl</span><span class="p">(</span><span class="s1">'http://www.example.com/success'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setReturnFailureUrl</span><span class="p">(</span><span class="s1">'http://www.example.com/failure'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setAmount</span><span class="p">(</span><span class="s1">'100'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCurrency</span><span class="p">(</span><span class="s1">'EUR'</span><span class="p">)</span>


  <span class="c1">// Billing Address
</span>  <span class="o">-&gt;</span><span class="na">setBillingFirstName</span><span class="p">(</span><span class="s1">'Travis'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingLastName</span><span class="p">(</span><span class="s1">'Pastrana'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingAddress1</span><span class="p">(</span><span class="s1">'Muster Str. 12'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingZipCode</span><span class="p">(</span><span class="s1">'12114'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingCity</span><span class="p">(</span><span class="s1">'Brussels'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingCountry</span><span class="p">(</span><span class="s1">'BE'</span><span class="p">);</span>

<span class="k">try</span> <span class="p">{</span>
    <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">execute</span><span class="p">();</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">response</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">getResponseObject</span><span class="p">();</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">\Exception</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$e</span><span class="o">-&gt;</span><span class="na">getMessage</span><span class="p">();</span>
<span class="p">}</span>
</code></pre>

<pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.GenesisClient</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.TransactionResult</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.constants.Endpoints</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.constants.Environments</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.requests.financial.apm.PProRequest</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.model.Transaction</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Configuration</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Country</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Currency</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.math.BigDecimal</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.MalformedURLException</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.URL</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">GenesisExample</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">MalformedURLException</span> <span class="o">{</span>

    <span class="c1">// Create configuration</span>
    <span class="n">Configuration</span> <span class="n">configuration</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Configuration</span><span class="o">(</span><span class="n">Environments</span><span class="o">.</span><span class="na">STAGING</span><span class="o">,</span> <span class="n">Endpoints</span><span class="o">.</span><span class="na">EMERCHANTPAY</span><span class="o">);</span>

    <span class="n">configuration</span><span class="o">.</span><span class="na">setUsername</span><span class="o">(</span><span class="s">"SET_YOUR_USERNAME"</span><span class="o">);</span>
    <span class="n">configuration</span><span class="o">.</span><span class="na">setPassword</span><span class="o">(</span><span class="s">"SET_YOUR_PASSWORD"</span><span class="o">);</span>
    <span class="n">configuration</span><span class="o">.</span><span class="na">setToken</span><span class="o">(</span><span class="s">"SET_YOUR_TOKEN"</span><span class="o">);</span>

    <span class="n">PProRequest</span> <span class="n">request</span> <span class="o">=</span> <span class="k">new</span> <span class="n">PProRequest</span><span class="o">();</span>

    <span class="n">request</span><span class="o">.</span><span class="na">setPaymentType</span><span class="o">(</span><span class="s">"bcmc"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setTransactionId</span><span class="o">(</span><span class="s">"43671"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setUsage</span><span class="o">(</span><span class="s">"40208 concert tickets"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setRemoteIp</span><span class="o">(</span><span class="s">"245.253.2.12"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setReturnSuccessUrl</span><span class="o">(</span><span class="k">new</span> <span class="n">URL</span><span class="o">(</span><span class="s">"http://www.example.com/success"</span><span class="o">));</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setReturnFailureUrl</span><span class="o">(</span><span class="k">new</span> <span class="n">URL</span><span class="o">(</span><span class="s">"http://www.example.com/failure"</span><span class="o">));</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setAmount</span><span class="o">(</span><span class="k">new</span> <span class="n">BigDecimal</span><span class="o">(</span><span class="mi">100</span><span class="o">));</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCurrency</span><span class="o">(</span><span class="s">"EUR"</span><span class="o">);</span>


    <span class="c1">// Billing Address</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingFirstname</span><span class="o">(</span><span class="s">"Travis"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingLastname</span><span class="o">(</span><span class="s">"Pastrana"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingPrimaryAddress</span><span class="o">(</span><span class="s">"Muster Str. 12"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingZipCode</span><span class="o">(</span><span class="s">"12114"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingCity</span><span class="o">(</span><span class="s">"Brussels"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingCountry</span><span class="o">(</span><span class="s">"BE"</span><span class="o">);</span>

    <span class="n">GenesisClient</span> <span class="n">client</span> <span class="o">=</span> <span class="k">new</span> <span class="n">GenesisClient</span><span class="o">(</span><span class="n">configuration</span><span class="o">,</span> <span class="n">request</span><span class="o">);</span>
    <span class="n">client</span><span class="o">.</span><span class="na">execute</span><span class="o">();</span>

    <span class="c1">// Parse Payment result</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">client</span><span class="o">.</span><span class="na">getResponse</span><span class="o">());</span>

  <span class="o">}</span>
<span class="o">}</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="kd">var</span> <span class="nx">genesis</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'genesis.js/lib/genesis.js'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">transaction</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">genesis</span><span class="p">.</span><span class="nx">transaction</span><span class="p">();</span>

<span class="kd">var</span> <span class="nx">failure</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">reason</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">reason</span><span class="p">);</span>
<span class="p">};</span>

<span class="kd">var</span> <span class="nx">success</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>

<span class="nx">transaction</span><span class="p">.</span><span class="nx">ppro</span><span class="p">(</span>
  <span class="p">{</span>
    <span class="s2">"payment_type"</span><span class="p">:</span> <span class="s2">"bcmc"</span><span class="p">,</span>
    <span class="s2">"transaction_id"</span><span class="p">:</span> <span class="s2">"43671"</span><span class="p">,</span>
    <span class="s2">"usage"</span><span class="p">:</span> <span class="s2">"40208 concert tickets"</span><span class="p">,</span>
    <span class="s2">"remote_ip"</span><span class="p">:</span> <span class="s2">"245.253.2.12"</span><span class="p">,</span>
    <span class="s2">"return_success_url"</span><span class="p">:</span> <span class="s2">"http://www.example.com/success"</span><span class="p">,</span>
    <span class="s2">"return_failure_url"</span><span class="p">:</span> <span class="s2">"http://www.example.com/failure"</span><span class="p">,</span>
    <span class="s2">"amount"</span><span class="p">:</span> <span class="s2">"100"</span><span class="p">,</span>
    <span class="s2">"currency"</span><span class="p">:</span> <span class="s2">"EUR"</span><span class="p">,</span>
    <span class="s2">"billing_address"</span><span class="p">:</span> <span class="p">{</span>
      <span class="s2">"first_name"</span><span class="p">:</span> <span class="s2">"Travis"</span><span class="p">,</span>
      <span class="s2">"last_name"</span><span class="p">:</span> <span class="s2">"Pastrana"</span><span class="p">,</span>
      <span class="s2">"address1"</span><span class="p">:</span> <span class="s2">"Muster Str. 12"</span><span class="p">,</span>
      <span class="s2">"zip_code"</span><span class="p">:</span> <span class="s2">"12114"</span><span class="p">,</span>
      <span class="s2">"city"</span><span class="p">:</span> <span class="s2">"Brussels"</span><span class="p">,</span>
      <span class="s2">"country"</span><span class="p">:</span> <span class="s2">"BE"</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">).</span><span class="nx">send</span><span class="p">()</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">success</span><span class="p">)</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">failure</span><span class="p">);</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>curl https://username:password@gate.emerchantpay.net/process/TERMINAL-TOKEN <span class="se">\</span>
   -H <span class="s2">"Content-Type: text/xml"</span> <span class="se">\</span>
   -d <span class="s1">'
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;ppro&lt;/transaction_type&gt;
  &lt;payment_type&gt;bcmc&lt;/payment_type&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;usage&gt;40208 concert tickets&lt;/usage&gt;
  &lt;remote_ip&gt;245.253.2.12&lt;/remote_ip&gt;
  &lt;return_success_url&gt;http://www.example.com/success&lt;/return_success_url&gt;
  &lt;return_failure_url&gt;http://www.example.com/failure&lt;/return_failure_url&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;EUR&lt;/currency&gt;
  &lt;billing_address&gt;
    &lt;first_name&gt;Travis&lt;/first_name&gt;
    &lt;last_name&gt;Pastrana&lt;/last_name&gt;
    &lt;address1&gt;Muster Str. 12&lt;/address1&gt;
    &lt;zip_code&gt;12114&lt;/zip_code&gt;
    &lt;city&gt;Brussels&lt;/city&gt;
    &lt;country&gt;BE&lt;/country&gt;
  &lt;/billing_address&gt;
&lt;/payment_transaction&gt;'</span>
</code></pre>

<p><strong>Request Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>required</td>
<td>string(255)</td>
<td><strong>ppro</strong> or <strong>bcmc</strong>. Contact tech support at <a href="mailto:tech-support@emerchantpay.net">tech-support@emerchantpay.net</a> for more details.</td>
</tr>
<tr>
<td>payment_type</td>
<td>required*</td>
<td>bcmc</td>
<td>Bancontact Mr. Cash. Contact tech support for more details</td>
</tr>
<tr>
<td>transaction_id</td>
<td>required</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>usage</td>
<td>optional</td>
<td>string(255)</td>
<td>Description of the transaction for later use</td>
</tr>
<tr>
<td>remote_ip</td>
<td>required</td>
<td>IPv4 address</td>
<td>IPv4 address of customer</td>
</tr>
<tr>
<td>return_success_url</td>
<td>required</td>
<td>url</td>
<td>URL where customer is sent to after successful payment</td>
</tr>
<tr>
<td>return_failure_url</td>
<td>required</td>
<td>url</td>
<td>URL where customer is sent to after unsuccessful payment</td>
</tr>
<tr>
<td>amount</td>
<td>required</td>
<td>integer &gt; 0</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>required</td>
<td>string(3)</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td><strong>billing_address</strong></td>
<td>required</td>
<td></td>
<td>See <a href="#required-vs-optional-api-params">Required vs Optional API params</a> for details</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;first_name</td>
<td>required*</td>
<td>string(255)</td>
<td>Customer first name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;last_name</td>
<td>required*</td>
<td>string(255)</td>
<td>Customer last name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address1</td>
<td>required*</td>
<td>string(255)</td>
<td>Primary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address2</td>
<td>required*</td>
<td>string(255)</td>
<td>Secondary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;zip_code</td>
<td>required*</td>
<td>string</td>
<td>ZIP code</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;city</td>
<td>required*</td>
<td>string(255)</td>
<td>City</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;state</td>
<td>required*</td>
<td>string(2)</td>
<td>State code in <a href="https://en.wikipedia.org/wiki/ISO_3166-2">ISO 3166-2</a>, required for USA and Canada</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;country</td>
<td>required</td>
<td>string(2)</td>
<td>Country code in <a href="https://www.iso.org/iso-3166-country-codes.html">ISO 3166</a></td>
</tr>
<tr>
<td><strong>shipping_address</strong></td>
<td>optional</td>
<td></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;first_name</td>
<td>optional</td>
<td>string(255)</td>
<td>Customer first name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;last_name</td>
<td>optional</td>
<td>string(255)</td>
<td>Customer last name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address1</td>
<td>optional</td>
<td>string(255)</td>
<td>Primary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address2</td>
<td>optional</td>
<td>string(255)</td>
<td>Secondary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;zip_code</td>
<td>optional</td>
<td>string</td>
<td>ZIP code</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;city</td>
<td>optional</td>
<td>string(255)</td>
<td>City</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;state</td>
<td>optional</td>
<td>string(2)</td>
<td>State code in <a href="https://en.wikipedia.org/wiki/ISO_3166-2">ISO 3166-2</a>, required for USA and Canada</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;country</td>
<td>optional</td>
<td>string(2)</td>
<td>Country code in <a href="https://www.iso.org/iso-3166-country-codes.html">ISO 3166</a></td>
</tr>
</tbody></table>

<p><code>required* = conditionally required</code></p>

<p>Supported currencies and countries:</p>

<table><thead>
<tr>
<th>Currency code</th>
<th>Country code</th>
</tr>
</thead><tbody>
<tr>
<td>EUR</td>
<td>BE</td>
</tr>
</tbody></table>

<blockquote>
<p>Successful Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>This request is not implemented yet
</code></pre>

<pre class="highlight java tab-java"><code><span class="n">This</span> <span class="n">request</span> <span class="n">is</span> <span class="n">not</span> <span class="n">implemented</span> <span class="n">yet</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;bcmc&lt;/transaction_type&gt;
  &lt;status&gt;pending_async&lt;/status&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;technical_message&gt;Transaction successful!&lt;/technical_message&gt;
  &lt;message&gt;Transaction successful!&lt;/message&gt;
  &lt;redirect_url&gt;https://gate.emerchantpay.net/redirect/to_acquirer/649e1ff35c61&lt;/redirect_url&gt;
  &lt;mode&gt;live&lt;/mode&gt;
  &lt;timestamp&gt;2019-03-14T12:05:55Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;EUR&lt;/currency&gt;
  &lt;sent_to_acquirer&gt;true&lt;/sent_to_acquirer&gt;
&lt;/payment_transaction&gt;
</code></pre>

<blockquote>
<p>Successful Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>stdClass Object
(
    [transaction_type] =&gt; ppro
    [status] =&gt; pending_async
    [unique_id] =&gt; 44177a21403427eb96664a6d7e5d5d48
    [transaction_id] =&gt; 43671
    [technical_message] =&gt; Transaction successful!
    [message] =&gt; Transaction successful!
    [redirect_url] =&gt; https://gate.emerchantpay.net/redirect/to_acquirer/649e1ff35c61
    [mode] =&gt; live
    [timestamp] =&gt; DateTime Object
        (
            [date] =&gt; 2019-03-14 12:05:55.000000
            [timezone_type] =&gt; 2
            [timezone] =&gt; Z
        )
    [descriptor] =&gt; Descriptor one
    [amount] =&gt; 100
    [currency] =&gt; EUR
    [sent_to_acquirer] =&gt; true
)
</code></pre>

<pre class="highlight java tab-java"><code><span class="o">&lt;</span><span class="n">payment_response</span> <span class="n">content</span><span class="o">=[</span>
    <span class="o">&lt;</span><span class="n">transaction_type</span> <span class="n">content</span><span class="o">=[</span><span class="n">ppro</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">status</span> <span class="n">content</span><span class="o">=[</span><span class="n">pending_async</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">unique_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">44177</span><span class="n">a21403427eb96664a6d7e5d5d48</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">transaction_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">43671</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">technical_message</span> <span class="n">content</span><span class="o">=[</span><span class="n">Transaction</span> <span class="n">successful</span><span class="o">!]&gt;</span>
    <span class="o">&lt;</span><span class="n">message</span> <span class="n">content</span><span class="o">=[</span><span class="n">Transaction</span> <span class="n">successful</span><span class="o">!]&gt;</span>
    <span class="o">&lt;</span><span class="n">redirect_url</span> <span class="n">content</span><span class="o">=[</span><span class="nl">https:</span><span class="c1">//gate.emerchantpay.net/redirect/to_acquirer/649e1ff35c61]&gt;</span>
    <span class="o">&lt;</span><span class="n">mode</span> <span class="n">content</span><span class="o">=[</span><span class="n">live</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">timestamp</span> <span class="n">content</span><span class="o">=[</span><span class="mi">2019</span><span class="o">-</span><span class="mo">03</span><span class="o">-</span><span class="mi">14</span><span class="nl">T12:</span><span class="mo">05</span><span class="o">:</span><span class="mi">55</span><span class="n">Z</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">descriptor</span> <span class="n">content</span><span class="o">=[</span><span class="n">Descriptor</span> <span class="n">one</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">amount</span> <span class="n">content</span><span class="o">=[</span><span class="mi">100</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">currency</span> <span class="n">content</span><span class="o">=[</span><span class="n">EUR</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">sent_to_acquirer</span> <span class="n">content</span><span class="o">=[</span><span class="kc">true</span><span class="o">]&gt;</span>
<span class="o">]&gt;</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="p">{</span>
    <span class="nl">transaction_type</span><span class="p">:</span> <span class="s2">"ppro"</span><span class="p">,</span>
    <span class="nx">status</span><span class="p">:</span> <span class="s2">"pending_async"</span><span class="p">,</span>
    <span class="nx">unique_id</span><span class="p">:</span> <span class="s2">"44177a21403427eb96664a6d7e5d5d48"</span><span class="p">,</span>
    <span class="nx">transaction_id</span><span class="p">:</span> <span class="s2">"43671"</span><span class="p">,</span>
    <span class="nx">technical_message</span><span class="p">:</span> <span class="s2">"Transaction successful!"</span><span class="p">,</span>
    <span class="nx">message</span><span class="p">:</span> <span class="s2">"Transaction successful!"</span><span class="p">,</span>
    <span class="nx">redirect_url</span><span class="p">:</span> <span class="s2">"https://gate.emerchantpay.net/redirect/to_acquirer/649e1ff35c61"</span><span class="p">,</span>
    <span class="nx">mode</span><span class="p">:</span> <span class="s2">"live"</span><span class="p">,</span>
    <span class="nx">timestamp</span><span class="p">:</span> <span class="s2">"2019-03-14T12:05:55Z"</span><span class="p">,</span>
    <span class="nx">descriptor</span><span class="p">:</span> <span class="s2">"Descriptor one"</span><span class="p">,</span>
    <span class="nx">amount</span><span class="p">:</span> <span class="s2">"100"</span><span class="p">,</span>
    <span class="nx">currency</span><span class="p">:</span> <span class="s2">"EUR"</span><span class="p">,</span>
    <span class="nx">sent_to_acquirer</span><span class="p">:</span> <span class="s2">"true"</span><span class="p">,</span>
<span class="p">}</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;ppro&lt;/transaction_type&gt;
  &lt;status&gt;pending_async&lt;/status&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;technical_message&gt;Transaction successful!&lt;/technical_message&gt;
  &lt;message&gt;Transaction successful!&lt;/message&gt;
  &lt;redirect_url&gt;https://gate.emerchantpay.net/redirect/to_acquirer/649e1ff35c61&lt;/redirect_url&gt;
  &lt;mode&gt;live&lt;/mode&gt;
  &lt;timestamp&gt;2019-03-14T12:05:55Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;EUR&lt;/currency&gt;
  &lt;sent_to_acquirer&gt;true&lt;/sent_to_acquirer&gt;
&lt;/payment_transaction&gt;
</code></pre>

<p><strong>Successful Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>The transaction type</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>unique_id</td>
<td>string(32)</td>
<td>Unique id defined by gate (must later be used if capturing, voiding or refunding a transaction)</td>
</tr>
<tr>
<td>transaction_id</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>redirect_url</td>
<td>url</td>
<td>URL where user has to be redirected to complete payment process. It is available for asynchronous mode</td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when the transaction was processed in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Combined date and time</a> e.g. 2007-08- 30T17:46:11Z</td>
</tr>
<tr>
<td>descriptor</td>
<td>string</td>
<td>Static descriptor MID info as configured on the gateway</td>
</tr>
<tr>
<td>amount</td>
<td>integer</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>sent_to_acquirer</td>
<td>string</td>
<td>&quot;true&quot; or &quot;false&quot;</td>
</tr>
</tbody></table>

<blockquote>
<p>Error Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>This request is not implemented yet
</code></pre>

<pre class="highlight java tab-java"><code><span class="n">This</span> <span class="n">request</span> <span class="n">is</span> <span class="n">not</span> <span class="n">implemented</span> <span class="n">yet</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;bcmc&lt;/transaction_type&gt;
  &lt;status&gt;error&lt;/status&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;code&gt;110&lt;/code&gt;
  &lt;message&gt;Something went wrong, please contact support!&lt;/message&gt;
  &lt;timestamp&gt;2019-03-14T12:05:55Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;EUR&lt;/currency&gt;
  &lt;sent_to_acquirer&gt;false&lt;/sent_to_acquirer&gt;
&lt;/payment_transaction&gt;
</code></pre>

<blockquote>
<p>Error Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>stdClass Object
(
    [transaction_type] =&gt; ppro
    [status] =&gt; error
    [unique_id] =&gt; 44177a21403427eb96664a6d7e5d5d48
    [transaction_id] =&gt; 43671
    [code] =&gt; 110
    [technical_message] =&gt; 
    [message] =&gt; Something went wrong, please contact support!
    [timestamp] =&gt; DateTime Object
        (
            [date] =&gt; 2019-03-14 12:05:55.000000
            [timezone_type] =&gt; 2
            [timezone] =&gt; Z
        )
    [descriptor] =&gt; Descriptor one
    [amount] =&gt; 100
    [currency] =&gt; EUR
    [sent_to_acquirer] =&gt; false
)
</code></pre>

<pre class="highlight java tab-java"><code><span class="o">&lt;</span><span class="n">payment_response</span> <span class="n">content</span><span class="o">=[</span>
    <span class="o">&lt;</span><span class="n">transaction_type</span> <span class="n">content</span><span class="o">=[</span><span class="n">ppro</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">status</span> <span class="n">content</span><span class="o">=[</span><span class="n">error</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">unique_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">44177</span><span class="n">a21403427eb96664a6d7e5d5d48</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">transaction_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">43671</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">code</span> <span class="n">content</span><span class="o">=[</span><span class="mi">110</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">technical_message</span> <span class="n">content</span><span class="o">=[]&gt;</span>
    <span class="o">&lt;</span><span class="n">message</span> <span class="n">content</span><span class="o">=[</span><span class="n">Something</span> <span class="n">went</span> <span class="n">wrong</span><span class="o">,</span> <span class="n">please</span> <span class="n">contact</span> <span class="n">support</span><span class="o">!]&gt;</span>
    <span class="o">&lt;</span><span class="n">timestamp</span> <span class="n">content</span><span class="o">=[</span><span class="mi">2019</span><span class="o">-</span><span class="mo">03</span><span class="o">-</span><span class="mi">14</span><span class="nl">T12:</span><span class="mo">05</span><span class="o">:</span><span class="mi">55</span><span class="n">Z</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">descriptor</span> <span class="n">content</span><span class="o">=[</span><span class="n">Descriptor</span> <span class="n">one</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">amount</span> <span class="n">content</span><span class="o">=[</span><span class="mi">100</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">currency</span> <span class="n">content</span><span class="o">=[</span><span class="n">EUR</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">sent_to_acquirer</span> <span class="n">content</span><span class="o">=[</span><span class="kc">false</span><span class="o">]&gt;</span>
<span class="o">]&gt;</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="p">{</span>
    <span class="nl">transaction_type</span><span class="p">:</span> <span class="s2">"ppro"</span><span class="p">,</span>
    <span class="nx">status</span><span class="p">:</span> <span class="s2">"error"</span><span class="p">,</span>
    <span class="nx">unique_id</span><span class="p">:</span> <span class="s2">"44177a21403427eb96664a6d7e5d5d48"</span><span class="p">,</span>
    <span class="nx">transaction_id</span><span class="p">:</span> <span class="s2">"43671"</span><span class="p">,</span>
    <span class="nx">code</span><span class="p">:</span> <span class="s2">"110"</span><span class="p">,</span>
    <span class="nx">technical_message</span><span class="p">:</span> <span class="s2">""</span><span class="p">,</span>
    <span class="nx">message</span><span class="p">:</span> <span class="s2">"Something went wrong, please contact support!"</span><span class="p">,</span>
    <span class="nx">timestamp</span><span class="p">:</span> <span class="s2">"2019-03-14T12:05:55Z"</span><span class="p">,</span>
    <span class="nx">descriptor</span><span class="p">:</span> <span class="s2">"Descriptor one"</span><span class="p">,</span>
    <span class="nx">amount</span><span class="p">:</span> <span class="s2">"100"</span><span class="p">,</span>
    <span class="nx">currency</span><span class="p">:</span> <span class="s2">"EUR"</span><span class="p">,</span>
    <span class="nx">sent_to_acquirer</span><span class="p">:</span> <span class="s2">"false"</span><span class="p">,</span>
<span class="p">}</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;ppro&lt;/transaction_type&gt;
  &lt;status&gt;error&lt;/status&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;code&gt;110&lt;/code&gt;
  &lt;technical_message&gt;&lt;/technical_message&gt;
  &lt;message&gt;Something went wrong, please contact support!&lt;/message&gt;
  &lt;timestamp&gt;2019-03-14T12:05:55Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;EUR&lt;/currency&gt;
  &lt;sent_to_acquirer&gt;false&lt;/sent_to_acquirer&gt;
&lt;/payment_transaction&gt;
</code></pre>

<p><strong>Error Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>The transaction type</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>unique_id</td>
<td>string(32)</td>
<td>Unique id defined by gate (must later be used if capturing, voiding or refunding a transaction)</td>
</tr>
<tr>
<td>transaction_id</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>code</td>
<td>integer</td>
<td>Error code according to <a href="#error-code-table">Error code table</a></td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
<tr>
<td>message</td>
<td>string(255)</td>
<td>Human readable error message which can be displayed to users.</td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when the transaction was processed in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Combined date and time</a> e.g. 2007-08- 30T17:46:11Z</td>
</tr>
<tr>
<td>descriptor</td>
<td>string</td>
<td>Static descriptor MID info as configured on the gateway</td>
</tr>
<tr>
<td>amount</td>
<td>integer</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>sent_to_acquirer</td>
<td>string</td>
<td>&quot;true&quot; or &quot;false&quot;</td>
</tr>
</tbody></table>
<h3 id='cabal'>Cabal</h3>
<aside class="notice">
Cabal is a local debit/credit card brand in Argentina which can be used for online purchases.
</aside>

<blockquote>
<p>Request</p>
</blockquote>

<pre class="highlight php tab-php"><code>This request is not implemented yet
</code></pre>

<pre class="highlight java tab-java"><code><span class="n">This</span> <span class="n">request</span> <span class="n">is</span> <span class="n">not</span> <span class="n">implemented</span> <span class="n">yet</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>curl https://username:password@gate.emerchantpay.net/process/TERMINAL-TOKEN <span class="se">\</span>
   -H <span class="s2">"Content-Type: text/xml"</span> <span class="se">\</span>
   -d <span class="s1">'
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;cabal&lt;/transaction_type&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;usage&gt;40208 concert tickets&lt;/usage&gt;
  &lt;remote_ip&gt;245.253.2.12&lt;/remote_ip&gt;
  &lt;return_success_url&gt;http://www.example.com/success&lt;/return_success_url&gt;
  &lt;return_failure_url&gt;http://www.example.com/failure&lt;/return_failure_url&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
  &lt;consumer_reference&gt;braney_rubble&lt;/consumer_reference&gt;
  &lt;national_id&gt;8812128812&lt;/national_id&gt;
  &lt;customer_email&gt;travis@example.com&lt;/customer_email&gt;
  &lt;customer_phone&gt;+1987987987987&lt;/customer_phone&gt;
  &lt;billing_address&gt;
    &lt;first_name&gt;Travis&lt;/first_name&gt;
    &lt;last_name&gt;Pastrana&lt;/last_name&gt;
    &lt;address1&gt;Muster Str. 12&lt;/address1&gt;
    &lt;zip_code&gt;10178&lt;/zip_code&gt;
    &lt;city&gt;Los Angeles&lt;/city&gt;
    &lt;state&gt;CA&lt;/state&gt;
    &lt;country&gt;US&lt;/country&gt;
  &lt;/billing_address&gt;
&lt;/payment_transaction&gt;'</span>
</code></pre>

<p><strong>Request Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>required</td>
<td>string(255)</td>
<td>The transaction type: <strong>cabal</strong></td>
</tr>
<tr>
<td>transaction_id</td>
<td>required</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>usage</td>
<td>optional</td>
<td>string(255)</td>
<td>Description of the transaction for later use</td>
</tr>
<tr>
<td>remote_ip</td>
<td>required*</td>
<td>IPv4 address</td>
<td>IPv4 address of customer</td>
</tr>
<tr>
<td>return_success_url</td>
<td>required</td>
<td>url</td>
<td>URL where customer is sent to after successful payment</td>
</tr>
<tr>
<td>return_failure_url</td>
<td>required</td>
<td>url</td>
<td>URL where customer is sent to after unsuccessful payment</td>
</tr>
<tr>
<td>amount</td>
<td>required</td>
<td>integer &gt; 0</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>required</td>
<td>string(3)</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>consumer_reference</td>
<td>required</td>
<td>string(20)</td>
<td>Consumer reference is a unique consumer identifier</td>
</tr>
<tr>
<td>national_id</td>
<td>required</td>
<td>string(20)</td>
<td>National Identifier number of the customer</td>
</tr>
<tr>
<td>birth_date</td>
<td>optional</td>
<td>dd-mm-yyyy</td>
<td>Required for Visa only when MCC is a Financial Services one (e.g. MCC 6012)</td>
</tr>
<tr>
<td>customer_email</td>
<td>required</td>
<td>e-mail address</td>
<td>Must contain valid e-mail of customer</td>
</tr>
<tr>
<td><strong>billing_address</strong></td>
<td>required</td>
<td></td>
<td>See <a href="#required-vs-optional-api-params">Required vs Optional API params</a> for details</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;first_name</td>
<td>required*</td>
<td>string(255)</td>
<td>Customer first name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;last_name</td>
<td>required*</td>
<td>string(255)</td>
<td>Customer last name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address1</td>
<td>required*</td>
<td>string(255)</td>
<td>Primary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address2</td>
<td>required*</td>
<td>string(255)</td>
<td>Secondary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;zip_code</td>
<td>required*</td>
<td>string</td>
<td>ZIP code</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;city</td>
<td>required*</td>
<td>string(255)</td>
<td>City</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;state</td>
<td>required*</td>
<td>string(2)</td>
<td>State code in <a href="https://en.wikipedia.org/wiki/ISO_3166-2">ISO 3166-2</a>, required for USA and Canada</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;country</td>
<td>required</td>
<td>string(2)</td>
<td>Country code in <a href="https://www.iso.org/iso-3166-country-codes.html">ISO 3166</a></td>
</tr>
<tr>
<td><strong>shipping_address</strong></td>
<td>optional</td>
<td></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;first_name</td>
<td>optional</td>
<td>string(255)</td>
<td>Customer first name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;last_name</td>
<td>optional</td>
<td>string(255)</td>
<td>Customer last name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address1</td>
<td>optional</td>
<td>string(255)</td>
<td>Primary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address2</td>
<td>optional</td>
<td>string(255)</td>
<td>Secondary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;zip_code</td>
<td>optional</td>
<td>string</td>
<td>ZIP code</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;city</td>
<td>optional</td>
<td>string(255)</td>
<td>City</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;state</td>
<td>optional</td>
<td>string(2)</td>
<td>State code in <a href="https://en.wikipedia.org/wiki/ISO_3166-2">ISO 3166-2</a>, required for USA and Canada</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;country</td>
<td>optional</td>
<td>string(2)</td>
<td>Country code in <a href="https://www.iso.org/iso-3166-country-codes.html">ISO 3166</a></td>
</tr>
</tbody></table>

<p><code>required* = conditionally required</code></p>

<p><strong>Supported countries</strong></p>

<table><thead>
<tr>
<th>Country Name</th>
<th>Country Code</th>
</tr>
</thead><tbody>
<tr>
<td>Argentina</td>
<td>AR</td>
</tr>
</tbody></table>

<blockquote>
<p>Successful Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>This request is not implemented yet
</code></pre>

<pre class="highlight java tab-java"><code><span class="n">This</span> <span class="n">request</span> <span class="n">is</span> <span class="n">not</span> <span class="n">implemented</span> <span class="n">yet</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;status&gt;pending_async&lt;/status&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;redirect_url&gt;https://staging.gate.emerchantpay.net/redirect/to_acquirer/649e1ff35c61d0&lt;/redirect_url&gt;
  &lt;mode&gt;live&lt;/mode&gt;
  &lt;timestamp&gt;2019-03-14T12:05:55Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
  &lt;sent_to_acquirer&gt;true&lt;/sent_to_acquirer&gt;
&lt;/payment_transaction&gt;
</code></pre>

<p><strong>Successful Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>unique_id</td>
<td>string(32)</td>
<td>Unique id defined by gate (must later be used if capturing, voiding or refunding a transaction)</td>
</tr>
<tr>
<td>transaction_id</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>redirect_url</td>
<td>url</td>
<td>URL where user has to be redirected to complete payment process. It is available for asynchronous mode</td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when the transaction was processed in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Combined date and time</a> e.g. 2007-08- 30T17:46:11Z</td>
</tr>
<tr>
<td>descriptor</td>
<td>string</td>
<td>Static descriptor MID info as configured on the gateway</td>
</tr>
<tr>
<td>amount</td>
<td>integer</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>sent_to_acquirer</td>
<td>string</td>
<td>&quot;true&quot; or &quot;false&quot;</td>
</tr>
</tbody></table>

<blockquote>
<p>Error Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>This request is not implemented yet
</code></pre>

<pre class="highlight java tab-java"><code><span class="n">This</span> <span class="n">request</span> <span class="n">is</span> <span class="n">not</span> <span class="n">implemented</span> <span class="n">yet</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;status&gt;error&lt;/status&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;code&gt;110&lt;/code&gt;
  &lt;message&gt;Something went wrong, please contact support!&lt;/message&gt;
  &lt;mode&gt;live&lt;/mode&gt;
  &lt;timestamp&gt;2019-03-14T12:05:55Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
  &lt;sent_to_acquirer&gt;false&lt;/sent_to_acquirer&gt;
&lt;/payment_transaction&gt;
</code></pre>

<p><strong>Error Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>unique_id</td>
<td>string(32)</td>
<td>Unique id defined by gate (must later be used if capturing, voiding or refunding a transaction)</td>
</tr>
<tr>
<td>transaction_id</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>code</td>
<td>integer</td>
<td>Error code according to <a href="#error-code-table">Error code table</a></td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
<tr>
<td>message</td>
<td>string(255)</td>
<td>Human readable error message which can be displayed to users.</td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when the transaction was processed in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Combined date and time</a> e.g. 2007-08- 30T17:46:11Z</td>
</tr>
<tr>
<td>descriptor</td>
<td>string</td>
<td>Static descriptor MID info as configured on the gateway</td>
</tr>
<tr>
<td>amount</td>
<td>integer</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>sent_to_acquirer</td>
<td>string</td>
<td>&quot;true&quot; or &quot;false&quot;</td>
</tr>
</tbody></table>
<h3 id='cencosud'>Cencosud</h3>
<aside class="notice">
Cencosud is a local credit card in Argentina
</aside>

<blockquote>
<p>Request</p>
</blockquote>

<pre class="highlight php tab-php"><code>This request is not implemented yet
</code></pre>

<pre class="highlight java tab-java"><code><span class="n">This</span> <span class="n">request</span> <span class="n">is</span> <span class="n">not</span> <span class="n">implemented</span> <span class="n">yet</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>curl https://username:password@gate.emerchantpay.net/process/TERMINAL-TOKEN <span class="se">\</span>
   -H <span class="s2">"Content-Type: text/xml"</span> <span class="se">\</span>
   -d <span class="s1">'
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;cencosud&lt;/transaction_type&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;usage&gt;40208 concert tickets&lt;/usage&gt;
  &lt;remote_ip&gt;245.253.2.12&lt;/remote_ip&gt;
  &lt;return_success_url&gt;http://www.example.com/success&lt;/return_success_url&gt;
  &lt;return_failure_url&gt;http://www.example.com/failure&lt;/return_failure_url&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
  &lt;consumer_reference&gt;barney_rumble&lt;/consumer_reference&gt;
  &lt;national_id&gt;8812128812&lt;/national_id&gt;
  &lt;birth_date&gt;30-12-1992&lt;/birth_date&gt;
  &lt;customer_email&gt;barney@example.com&lt;/customer_email&gt;
  &lt;billing_address&gt;
    &lt;first_name&gt;Barney&lt;/first_name&gt;
    &lt;last_name&gt;Rubble&lt;/last_name&gt;
    &lt;address1&gt;14, Nerazdelni str&lt;/address1&gt;
    &lt;zip_code&gt;1407&lt;/zip_code&gt;
    &lt;city&gt;Buenos Aires&lt;/city&gt;
    &lt;country&gt;AR&lt;/country&gt;
  &lt;/billing_address&gt;
  &lt;risk_params&gt;
    &lt;user_id&gt;123456&lt;/user_id&gt;
  &lt;/risk_params&gt;
&lt;/payment_transaction&gt;'</span>
</code></pre>

<p><strong>Request Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>required</td>
<td>string(255)</td>
<td>The transaction type: <strong>cencosud</strong></td>
</tr>
<tr>
<td>transaction_id</td>
<td>required</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>usage</td>
<td>optional</td>
<td>string(255)</td>
<td>Description of the transaction for later use</td>
</tr>
<tr>
<td>remote_ip</td>
<td>required*</td>
<td>IPv4 address</td>
<td>IPv4 address of customer</td>
</tr>
<tr>
<td>return_success_url</td>
<td>required</td>
<td>url</td>
<td>URL where customer is sent to after successful payment</td>
</tr>
<tr>
<td>return_failure_url</td>
<td>required</td>
<td>url</td>
<td>URL where customer is sent to after unsuccessful payment</td>
</tr>
<tr>
<td>amount</td>
<td>required</td>
<td>integer &gt; 0</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>required</td>
<td>string(3)</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>consumer_reference</td>
<td>required</td>
<td>string(20)</td>
<td>Consumer reference is a unique consumer identifier</td>
</tr>
<tr>
<td>national_id</td>
<td>required</td>
<td>string(20)</td>
<td>National Identifier number of the customer</td>
</tr>
<tr>
<td>birth_date</td>
<td>optional</td>
<td>dd-mm-yyyy</td>
<td>Required for Visa only when MCC is a Financial Services one (e.g. MCC 6012)</td>
</tr>
<tr>
<td>customer_email</td>
<td>required</td>
<td>e-mail address</td>
<td>Must contain valid e-mail of customer</td>
</tr>
<tr>
<td><strong>billing_address</strong></td>
<td>required</td>
<td></td>
<td>See <a href="#required-vs-optional-api-params">Required vs Optional API params</a> for details</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;first_name</td>
<td>required*</td>
<td>string(255)</td>
<td>Customer first name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;last_name</td>
<td>required*</td>
<td>string(255)</td>
<td>Customer last name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address1</td>
<td>required*</td>
<td>string(255)</td>
<td>Primary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address2</td>
<td>required*</td>
<td>string(255)</td>
<td>Secondary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;zip_code</td>
<td>required*</td>
<td>string</td>
<td>ZIP code</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;city</td>
<td>required*</td>
<td>string(255)</td>
<td>City</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;state</td>
<td>required*</td>
<td>string(2)</td>
<td>State code in <a href="https://en.wikipedia.org/wiki/ISO_3166-2">ISO 3166-2</a>, required for USA and Canada</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;country</td>
<td>required</td>
<td>string(2)</td>
<td>Country code in <a href="https://www.iso.org/iso-3166-country-codes.html">ISO 3166</a></td>
</tr>
<tr>
<td><strong>shipping_address</strong></td>
<td>optional</td>
<td></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;first_name</td>
<td>optional</td>
<td>string(255)</td>
<td>Customer first name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;last_name</td>
<td>optional</td>
<td>string(255)</td>
<td>Customer last name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address1</td>
<td>optional</td>
<td>string(255)</td>
<td>Primary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address2</td>
<td>optional</td>
<td>string(255)</td>
<td>Secondary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;zip_code</td>
<td>optional</td>
<td>string</td>
<td>ZIP code</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;city</td>
<td>optional</td>
<td>string(255)</td>
<td>City</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;state</td>
<td>optional</td>
<td>string(2)</td>
<td>State code in <a href="https://en.wikipedia.org/wiki/ISO_3166-2">ISO 3166-2</a>, required for USA and Canada</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;country</td>
<td>optional</td>
<td>string(2)</td>
<td>Country code in <a href="https://www.iso.org/iso-3166-country-codes.html">ISO 3166</a></td>
</tr>
</tbody></table>

<p><code>required* = conditionally required</code></p>

<p><strong>Supported countries:</strong></p>

<table><thead>
<tr>
<th>Country</th>
</tr>
</thead><tbody>
<tr>
<td>AR</td>
</tr>
</tbody></table>

<blockquote>
<p>Successful Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>This request is not implemented yet
</code></pre>

<pre class="highlight java tab-java"><code><span class="n">This</span> <span class="n">request</span> <span class="n">is</span> <span class="n">not</span> <span class="n">implemented</span> <span class="n">yet</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;cencosud&lt;/transaction_type&gt;
  &lt;status&gt;pending_async&lt;/status&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;redirect_url&gt;https://gate.emerchantpay.net/redirect/to_acquirer/649e1ff35c61&lt;/redirect_url&gt;
  &lt;technical_message&gt;Transaction successful!&lt;/technical_message&gt;
  &lt;message&gt;Transaction successful!&lt;/message&gt;
  &lt;timestamp&gt;2019-03-14T12:05:55Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
  &lt;sent_to_acquirer&gt;true&lt;/sent_to_acquirer&gt;
&lt;/payment_transaction&gt;
</code></pre>

<p><strong>Successful Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>The transaction type</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>transaction_id</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>unique_id</td>
<td>string(32)</td>
<td>Unique id defined by gate (must later be used if capturing, voiding or refunding a transaction)</td>
</tr>
<tr>
<td>redirect_url</td>
<td>url</td>
<td>URL where user has to be redirected to complete payment process. It is available for asynchronous mode</td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
<tr>
<td>message</td>
<td>string(255)</td>
<td>Human readable error message which can be displayed to users.</td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when the transaction was processed in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Combined date and time</a> e.g. 2007-08- 30T17:46:11Z</td>
</tr>
<tr>
<td>descriptor</td>
<td>string</td>
<td>Static descriptor MID info as configured on the gateway</td>
</tr>
<tr>
<td>amount</td>
<td>integer</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>sent_to_acquirer</td>
<td>string</td>
<td>&quot;true&quot; or &quot;false&quot;</td>
</tr>
</tbody></table>

<blockquote>
<p>Error Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>This request is not implemented yet
</code></pre>

<pre class="highlight java tab-java"><code><span class="n">This</span> <span class="n">request</span> <span class="n">is</span> <span class="n">not</span> <span class="n">implemented</span> <span class="n">yet</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;cencosud&lt;/transaction_type&gt;
  &lt;status&gt;error&lt;/status&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;code&gt;110&lt;/code&gt;
  &lt;message&gt;Something went wrong, please contact support!&lt;/message&gt;
  &lt;timestamp&gt;2019-03-14T12:05:55Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
  &lt;sent_to_acquirer&gt;true&lt;/sent_to_acquirer&gt;
&lt;/payment_transaction&gt;
</code></pre>

<p><strong>Error Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>The transaction type</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>transaction_id</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>unique_id</td>
<td>string(32)</td>
<td>Unique id defined by gate (must later be used if capturing, voiding or refunding a transaction)</td>
</tr>
<tr>
<td>code</td>
<td>integer</td>
<td>Error code according to <a href="#error-code-table">Error code table</a></td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
<tr>
<td>message</td>
<td>string(255)</td>
<td>Human readable error message which can be displayed to users.</td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when the transaction was processed in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Combined date and time</a> e.g. 2007-08- 30T17:46:11Z</td>
</tr>
<tr>
<td>descriptor</td>
<td>string</td>
<td>Static descriptor MID info as configured on the gateway</td>
</tr>
<tr>
<td>amount</td>
<td>integer</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>sent_to_acquirer</td>
<td>string</td>
<td>&quot;true&quot; or &quot;false&quot;</td>
</tr>
</tbody></table>
<h3 id='credit-cft'>Credit (CFT)</h3>
<p>Credits (also known as Credit Fund Transfer a.k.a. CFT) can be done with an initial reference transaction.</p>

<p>This transaction type allows you to transfer funds to a previously charged card. The amount can be higher than the charged reference. Credits can only be done on former <a href="#sale">sale</a>, <a href="#sale-3d">sale3d</a>, <a href="#init-recurring-sale">init recurring sale</a>, <a href="#init-recurring-sale-3d">init recurring sale3d</a>, <a href="#recurring-sale">recurring sale</a> or <a href="#capture">capture</a> transaction. Therefore, the <strong>reference_id</strong> for the corresponding transaction is mandatory.</p>

<p>Note that Visa credits are not authorized through the schemes but batched for offline settlement on the same day, while Mastercard/Maestro credits are authorized real-time. This means that the authorization code and issuer response code are available only for non-Visa credits.</p>

<blockquote>
<p>Request</p>
</blockquote>

<pre class="highlight php tab-php"><code><span class="cp">&lt;?php</span>

<span class="c1">// Load the pre-configured ini file...
</span><span class="nx">\Genesis\Config</span><span class="o">::</span><span class="na">loadSettings</span><span class="p">(</span><span class="s1">'/path/to/config.ini'</span><span class="p">);</span>

<span class="nv">$genesis</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Genesis</span><span class="p">(</span><span class="s1">'Financial\Cards\Credit'</span><span class="p">);</span>
<span class="nv">$request</span> <span class="o">=</span> <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">request</span><span class="p">();</span>

<span class="nv">$request</span>
  <span class="o">-&gt;</span><span class="na">setTransactionId</span><span class="p">(</span><span class="s1">'43671'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setUsage</span><span class="p">(</span><span class="s1">'40208 concert tickets'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setRemoteIp</span><span class="p">(</span><span class="s1">'245.253.2.12'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setReferenceId</span><span class="p">(</span><span class="s1">'43672'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setAmount</span><span class="p">(</span><span class="s1">'100'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCurrency</span><span class="p">(</span><span class="s1">'USD'</span><span class="p">);</span>

<span class="k">try</span> <span class="p">{</span>
    <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">execute</span><span class="p">();</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">response</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">getResponseObject</span><span class="p">();</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">\Exception</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$e</span><span class="o">-&gt;</span><span class="na">getMessage</span><span class="p">();</span>
<span class="p">}</span>
</code></pre>

<pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.GenesisClient</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.TransactionResult</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.constants.Endpoints</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.constants.Environments</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.requests.financial.card.CreditRequest</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.model.Transaction</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Configuration</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Country</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Currency</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.math.BigDecimal</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">GenesisExample</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">()</span>  <span class="o">{</span>

    <span class="c1">// Create configuration</span>
    <span class="n">Configuration</span> <span class="n">configuration</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Configuration</span><span class="o">(</span><span class="n">Environments</span><span class="o">.</span><span class="na">STAGING</span><span class="o">,</span> <span class="n">Endpoints</span><span class="o">.</span><span class="na">EMERCHANTPAY</span><span class="o">);</span>

    <span class="n">configuration</span><span class="o">.</span><span class="na">setUsername</span><span class="o">(</span><span class="s">"SET_YOUR_USERNAME"</span><span class="o">);</span>
    <span class="n">configuration</span><span class="o">.</span><span class="na">setPassword</span><span class="o">(</span><span class="s">"SET_YOUR_PASSWORD"</span><span class="o">);</span>
    <span class="n">configuration</span><span class="o">.</span><span class="na">setToken</span><span class="o">(</span><span class="s">"SET_YOUR_TOKEN"</span><span class="o">);</span>

    <span class="n">CreditRequest</span> <span class="n">request</span> <span class="o">=</span> <span class="k">new</span> <span class="n">CreditRequest</span><span class="o">();</span>

    <span class="n">request</span><span class="o">.</span><span class="na">setTransactionId</span><span class="o">(</span><span class="s">"43671"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setUsage</span><span class="o">(</span><span class="s">"40208 concert tickets"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setRemoteIp</span><span class="o">(</span><span class="s">"245.253.2.12"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setReferenceId</span><span class="o">(</span><span class="s">"43672"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setAmount</span><span class="o">(</span><span class="k">new</span> <span class="n">BigDecimal</span><span class="o">(</span><span class="mi">100</span><span class="o">));</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCurrency</span><span class="o">(</span><span class="s">"USD"</span><span class="o">);</span>

    <span class="n">GenesisClient</span> <span class="n">client</span> <span class="o">=</span> <span class="k">new</span> <span class="n">GenesisClient</span><span class="o">(</span><span class="n">configuration</span><span class="o">,</span> <span class="n">request</span><span class="o">);</span>
    <span class="n">client</span><span class="o">.</span><span class="na">execute</span><span class="o">();</span>

    <span class="c1">// Parse Payment result</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">client</span><span class="o">.</span><span class="na">getResponse</span><span class="o">());</span>

  <span class="o">}</span>
<span class="o">}</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="kd">var</span> <span class="nx">genesis</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'genesis.js/lib/genesis.js'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">transaction</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">genesis</span><span class="p">.</span><span class="nx">transaction</span><span class="p">();</span>

<span class="kd">var</span> <span class="nx">failure</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">reason</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">reason</span><span class="p">);</span>
<span class="p">};</span>

<span class="kd">var</span> <span class="nx">success</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>

<span class="nx">transaction</span><span class="p">.</span><span class="nx">credit</span><span class="p">(</span>
  <span class="p">{</span>
    <span class="s2">"transaction_id"</span><span class="p">:</span> <span class="s2">"43671"</span><span class="p">,</span>
    <span class="s2">"usage"</span><span class="p">:</span> <span class="s2">"40208 concert tickets"</span><span class="p">,</span>
    <span class="s2">"remote_ip"</span><span class="p">:</span> <span class="s2">"245.253.2.12"</span><span class="p">,</span>
    <span class="s2">"reference_id"</span><span class="p">:</span> <span class="s2">"43672"</span><span class="p">,</span>
    <span class="s2">"amount"</span><span class="p">:</span> <span class="s2">"100"</span><span class="p">,</span>
    <span class="s2">"currency"</span><span class="p">:</span> <span class="s2">"USD"</span>
  <span class="p">}</span>
<span class="p">).</span><span class="nx">send</span><span class="p">()</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">success</span><span class="p">)</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">failure</span><span class="p">);</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>curl https://username:password@gate.emerchantpay.net/process/TERMINAL-TOKEN <span class="se">\</span>
   -H <span class="s2">"Content-Type: text/xml"</span> <span class="se">\</span>
   -d <span class="s1">'
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;credit&lt;/transaction_type&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;usage&gt;40208 concert tickets&lt;/usage&gt;
  &lt;remote_ip&gt;245.253.2.12&lt;/remote_ip&gt;
  &lt;reference_id&gt;43672&lt;/reference_id&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
&lt;/payment_transaction&gt;'</span>
</code></pre>

<p><strong>Request Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>required</td>
<td>string(255)</td>
<td>The transaction type: <strong>credit</strong></td>
</tr>
<tr>
<td>transaction_id</td>
<td>required</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>usage</td>
<td>optional</td>
<td>string(255)</td>
<td>Description of the transaction for later use</td>
</tr>
<tr>
<td>remote_ip</td>
<td>required*</td>
<td>IPv4 address</td>
<td>IPv4 address of customer</td>
</tr>
<tr>
<td>reference_id</td>
<td>required</td>
<td>string(32)</td>
<td>Unique id returned by corresponding transaction</td>
</tr>
<tr>
<td>amount</td>
<td>required</td>
<td>integer &gt; 0</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>required</td>
<td>string(3)</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
</tbody></table>

<p><code>required* = conditionally required</code></p>

<blockquote>
<p>Successful Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>stdClass Object
(
    [transaction_type] =&gt; credit
    [status] =&gt; approved
    [mode] =&gt; live
    [transaction_id] =&gt; 43671
    [unique_id] =&gt; 44177a21403427eb96664a6d7e5d5d48
    [authorization_code] =&gt; 345678
    [response_code] =&gt; 00
    [timestamp] =&gt; DateTime Object
        (
            [date] =&gt; 2019-03-14 12:05:55.000000
            [timezone_type] =&gt; 2
            [timezone] =&gt; Z
        )
    [descriptor] =&gt; Descriptor one
    [amount] =&gt; 100
    [currency] =&gt; USD
)
</code></pre>

<pre class="highlight java tab-java"><code><span class="o">&lt;</span><span class="n">payment_response</span> <span class="n">content</span><span class="o">=[</span>
    <span class="o">&lt;</span><span class="n">transaction_type</span> <span class="n">content</span><span class="o">=[</span><span class="n">credit</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">status</span> <span class="n">content</span><span class="o">=[</span><span class="n">approved</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">mode</span> <span class="n">content</span><span class="o">=[</span><span class="n">live</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">transaction_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">43671</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">unique_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">44177</span><span class="n">a21403427eb96664a6d7e5d5d48</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">authorization_code</span> <span class="n">content</span><span class="o">=[</span><span class="mi">345678</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">response_code</span> <span class="n">content</span><span class="o">=[</span><span class="mo">00</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">timestamp</span> <span class="n">content</span><span class="o">=[</span><span class="mi">2019</span><span class="o">-</span><span class="mo">03</span><span class="o">-</span><span class="mi">14</span><span class="nl">T12:</span><span class="mo">05</span><span class="o">:</span><span class="mi">55</span><span class="n">Z</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">descriptor</span> <span class="n">content</span><span class="o">=[</span><span class="n">Descriptor</span> <span class="n">one</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">amount</span> <span class="n">content</span><span class="o">=[</span><span class="mi">100</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">currency</span> <span class="n">content</span><span class="o">=[</span><span class="n">USD</span><span class="o">]&gt;</span>
<span class="o">]&gt;</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="p">{</span>
    <span class="nl">transaction_type</span><span class="p">:</span> <span class="s2">"credit"</span><span class="p">,</span>
    <span class="nx">status</span><span class="p">:</span> <span class="s2">"approved"</span><span class="p">,</span>
    <span class="nx">mode</span><span class="p">:</span> <span class="s2">"live"</span><span class="p">,</span>
    <span class="nx">transaction_id</span><span class="p">:</span> <span class="s2">"43671"</span><span class="p">,</span>
    <span class="nx">unique_id</span><span class="p">:</span> <span class="s2">"44177a21403427eb96664a6d7e5d5d48"</span><span class="p">,</span>
    <span class="nx">authorization_code</span><span class="p">:</span> <span class="s2">"345678"</span><span class="p">,</span>
    <span class="nx">response_code</span><span class="p">:</span> <span class="s2">"00"</span><span class="p">,</span>
    <span class="nx">timestamp</span><span class="p">:</span> <span class="s2">"2019-03-14T12:05:55Z"</span><span class="p">,</span>
    <span class="nx">descriptor</span><span class="p">:</span> <span class="s2">"Descriptor one"</span><span class="p">,</span>
    <span class="nx">amount</span><span class="p">:</span> <span class="s2">"100"</span><span class="p">,</span>
    <span class="nx">currency</span><span class="p">:</span> <span class="s2">"USD"</span><span class="p">,</span>
<span class="p">}</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;credit&lt;/transaction_type&gt;
  &lt;status&gt;approved&lt;/status&gt;
  &lt;mode&gt;live&lt;/mode&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;authorization_code&gt;345678&lt;/authorization_code&gt;
  &lt;response_code&gt;00&lt;/response_code&gt;
  &lt;timestamp&gt;2019-03-14T12:05:55Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
&lt;/payment_transaction&gt;
</code></pre>

<p><strong>Successful Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>The transaction type</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>transaction_id</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>unique_id</td>
<td>string(32)</td>
<td>Unique id defined by gate (must later be used if capturing, voiding or refunding a transaction)</td>
</tr>
<tr>
<td>authorization_code</td>
<td>string(6)</td>
<td>Generated by the card network when an authorisation has occurred, used to identify that auth. Consists of 6 alphanumeric chars</td>
</tr>
<tr>
<td>response_code</td>
<td>string(2)</td>
<td>Defines the issuer result of a transaction, the status of a message or some action taken or required. See <a href="#issuer-response-codes">issuer response codes</a> for details</td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when the transaction was processed in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Combined date and time</a> e.g. 2007-08- 30T17:46:11Z</td>
</tr>
<tr>
<td>descriptor</td>
<td>string</td>
<td>Static descriptor MID info as configured on the gateway</td>
</tr>
<tr>
<td>amount</td>
<td>integer</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
</tbody></table>

<blockquote>
<p>Error Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>stdClass Object
(
    [transaction_type] =&gt; credit
    [status] =&gt; error
    [mode] =&gt; live
    [transaction_id] =&gt; 43671
    [unique_id] =&gt; 44177a21403427eb96664a6d7e5d5d48
    [response_code] =&gt; 57
    [code] =&gt; 410
    [technical_message] =&gt; No approved reference transaction found
    [message] =&gt; No approved reference transaction found
    [timestamp] =&gt; DateTime Object
        (
            [date] =&gt; 2019-03-14 12:05:55.000000
            [timezone_type] =&gt; 2
            [timezone] =&gt; Z
        )
    [descriptor] =&gt; Descriptor one
    [amount] =&gt; 100
    [currency] =&gt; USD
)
</code></pre>

<pre class="highlight java tab-java"><code><span class="o">&lt;</span><span class="n">payment_response</span> <span class="n">content</span><span class="o">=[</span>
    <span class="o">&lt;</span><span class="n">transaction_type</span> <span class="n">content</span><span class="o">=[</span><span class="n">credit</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">status</span> <span class="n">content</span><span class="o">=[</span><span class="n">error</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">mode</span> <span class="n">content</span><span class="o">=[</span><span class="n">live</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">transaction_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">43671</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">unique_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">44177</span><span class="n">a21403427eb96664a6d7e5d5d48</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">response_code</span> <span class="n">content</span><span class="o">=[</span><span class="mi">57</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">code</span> <span class="n">content</span><span class="o">=[</span><span class="mi">410</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">technical_message</span> <span class="n">content</span><span class="o">=[</span><span class="n">No</span> <span class="n">approved</span> <span class="n">reference</span> <span class="n">transaction</span> <span class="n">found</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">message</span> <span class="n">content</span><span class="o">=[</span><span class="n">No</span> <span class="n">approved</span> <span class="n">reference</span> <span class="n">transaction</span> <span class="n">found</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">timestamp</span> <span class="n">content</span><span class="o">=[</span><span class="mi">2019</span><span class="o">-</span><span class="mo">03</span><span class="o">-</span><span class="mi">14</span><span class="nl">T12:</span><span class="mo">05</span><span class="o">:</span><span class="mi">55</span><span class="n">Z</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">descriptor</span> <span class="n">content</span><span class="o">=[</span><span class="n">Descriptor</span> <span class="n">one</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">amount</span> <span class="n">content</span><span class="o">=[</span><span class="mi">100</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">currency</span> <span class="n">content</span><span class="o">=[</span><span class="n">USD</span><span class="o">]&gt;</span>
<span class="o">]&gt;</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="p">{</span>
    <span class="nl">transaction_type</span><span class="p">:</span> <span class="s2">"credit"</span><span class="p">,</span>
    <span class="nx">status</span><span class="p">:</span> <span class="s2">"error"</span><span class="p">,</span>
    <span class="nx">mode</span><span class="p">:</span> <span class="s2">"live"</span><span class="p">,</span>
    <span class="nx">transaction_id</span><span class="p">:</span> <span class="s2">"43671"</span><span class="p">,</span>
    <span class="nx">unique_id</span><span class="p">:</span> <span class="s2">"44177a21403427eb96664a6d7e5d5d48"</span><span class="p">,</span>
    <span class="nx">response_code</span><span class="p">:</span> <span class="s2">"57"</span><span class="p">,</span>
    <span class="nx">code</span><span class="p">:</span> <span class="s2">"410"</span><span class="p">,</span>
    <span class="nx">technical_message</span><span class="p">:</span> <span class="s2">"No approved reference transaction found"</span><span class="p">,</span>
    <span class="nx">message</span><span class="p">:</span> <span class="s2">"No approved reference transaction found"</span><span class="p">,</span>
    <span class="nx">timestamp</span><span class="p">:</span> <span class="s2">"2019-03-14T12:05:55Z"</span><span class="p">,</span>
    <span class="nx">descriptor</span><span class="p">:</span> <span class="s2">"Descriptor one"</span><span class="p">,</span>
    <span class="nx">amount</span><span class="p">:</span> <span class="s2">"100"</span><span class="p">,</span>
    <span class="nx">currency</span><span class="p">:</span> <span class="s2">"USD"</span><span class="p">,</span>
<span class="p">}</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;credit&lt;/transaction_type&gt;
  &lt;status&gt;error&lt;/status&gt;
  &lt;mode&gt;live&lt;/mode&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;response_code&gt;57&lt;/response_code&gt;
  &lt;code&gt;410&lt;/code&gt;
  &lt;technical_message&gt;No approved reference transaction found&lt;/technical_message&gt;
  &lt;message&gt;No approved reference transaction found&lt;/message&gt;
  &lt;timestamp&gt;2019-03-14T12:05:55Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
&lt;/payment_transaction&gt;
</code></pre>

<p><strong>Error Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>The transaction type</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>transaction_id</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>unique_id</td>
<td>string(32)</td>
<td>Unique id defined by gate (must later be used if capturing, voiding or refunding a transaction)</td>
</tr>
<tr>
<td>code</td>
<td>integer</td>
<td>Error code according to <a href="#error-code-table">Error code table</a></td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
<tr>
<td>message</td>
<td>string(255)</td>
<td>Human readable error message which can be displayed to users.</td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when the transaction was processed in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Combined date and time</a> e.g. 2007-08- 30T17:46:11Z</td>
</tr>
<tr>
<td>descriptor</td>
<td>string</td>
<td>Static descriptor MID info as configured on the gateway</td>
</tr>
<tr>
<td>amount</td>
<td>integer</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
</tbody></table>
<h3 id='elo'>Elo</h3>
<aside class="notice">
Elo is a local Brazilian payment card.
</aside>

<blockquote>
<p>Request</p>
</blockquote>

<pre class="highlight php tab-php"><code>This request is not implemented yet
</code></pre>

<pre class="highlight java tab-java"><code><span class="n">This</span> <span class="n">request</span> <span class="n">is</span> <span class="n">not</span> <span class="n">implemented</span> <span class="n">yet</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>curl https://username:password@gate.emerchantpay.net/process/TERMINAL-TOKEN <span class="se">\</span>
   -H <span class="s2">"Content-Type: text/xml"</span> <span class="se">\</span>
   -d <span class="s1">'
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;elo&lt;/transaction_type&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;usage&gt;40208 concert tickets&lt;/usage&gt;
  &lt;remote_ip&gt;245.253.2.12&lt;/remote_ip&gt;
  &lt;return_success_url&gt;http://www.example.com/success&lt;/return_success_url&gt;
  &lt;return_failure_url&gt;http://www.example.com/failure&lt;/return_failure_url&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
  &lt;consumer_reference&gt;barney_rumble&lt;/consumer_reference&gt;
  &lt;national_id&gt;8812128812&lt;/national_id&gt;
  &lt;birth_date&gt;30-12-1992&lt;/birth_date&gt;
  &lt;customer_email&gt;barney@example.com&lt;/customer_email&gt;
  &lt;billing_address&gt;
    &lt;first_name&gt;Barney&lt;/first_name&gt;
    &lt;last_name&gt;Rubble&lt;/last_name&gt;
    &lt;address1&gt;14, Nerazdelni str&lt;/address1&gt;
    &lt;zip_code&gt;1407&lt;/zip_code&gt;
    &lt;city&gt;Salvador&lt;/city&gt;
    &lt;country&gt;BR&lt;/country&gt;
  &lt;/billing_address&gt;
  &lt;risk_params&gt;
    &lt;user_id&gt;123456&lt;/user_id&gt;
  &lt;/risk_params&gt;
&lt;/payment_transaction&gt;'</span>
</code></pre>

<p><strong>Request Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>required</td>
<td>string(255)</td>
<td>The transaction type: <strong>elo</strong></td>
</tr>
<tr>
<td>transaction_id</td>
<td>required</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>usage</td>
<td>optional</td>
<td>string(255)</td>
<td>Description of the transaction for later use</td>
</tr>
<tr>
<td>remote_ip</td>
<td>required*</td>
<td>IPv4 address</td>
<td>IPv4 address of customer</td>
</tr>
<tr>
<td>return_success_url</td>
<td>required</td>
<td>url</td>
<td>URL where customer is sent to after successful payment</td>
</tr>
<tr>
<td>return_failure_url</td>
<td>required</td>
<td>url</td>
<td>URL where customer is sent to after unsuccessful payment</td>
</tr>
<tr>
<td>amount</td>
<td>required</td>
<td>integer &gt; 0</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>required</td>
<td>string(3)</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>consumer_reference</td>
<td>required</td>
<td>string(20)</td>
<td>Consumer reference is a unique consumer identifier</td>
</tr>
<tr>
<td>national_id</td>
<td>required</td>
<td>string(20)</td>
<td>National Identifier number of the customer</td>
</tr>
<tr>
<td>birth_date</td>
<td>optional</td>
<td>dd-mm-yyyy</td>
<td>Required for Visa only when MCC is a Financial Services one (e.g. MCC 6012)</td>
</tr>
<tr>
<td>customer_email</td>
<td>required</td>
<td>e-mail address</td>
<td>Must contain valid e-mail of customer</td>
</tr>
<tr>
<td><strong>billing_address</strong></td>
<td>required</td>
<td></td>
<td>See <a href="#required-vs-optional-api-params">Required vs Optional API params</a> for details</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;first_name</td>
<td>required*</td>
<td>string(255)</td>
<td>Customer first name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;last_name</td>
<td>required*</td>
<td>string(255)</td>
<td>Customer last name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address1</td>
<td>required*</td>
<td>string(255)</td>
<td>Primary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address2</td>
<td>required*</td>
<td>string(255)</td>
<td>Secondary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;zip_code</td>
<td>required*</td>
<td>string</td>
<td>ZIP code</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;city</td>
<td>required*</td>
<td>string(255)</td>
<td>City</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;state</td>
<td>required*</td>
<td>string(2)</td>
<td>State code in <a href="https://en.wikipedia.org/wiki/ISO_3166-2">ISO 3166-2</a>, required for USA and Canada</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;country</td>
<td>required</td>
<td>string(2)</td>
<td>Country code in <a href="https://www.iso.org/iso-3166-country-codes.html">ISO 3166</a></td>
</tr>
<tr>
<td><strong>shipping_address</strong></td>
<td>optional</td>
<td></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;first_name</td>
<td>optional</td>
<td>string(255)</td>
<td>Customer first name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;last_name</td>
<td>optional</td>
<td>string(255)</td>
<td>Customer last name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address1</td>
<td>optional</td>
<td>string(255)</td>
<td>Primary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address2</td>
<td>optional</td>
<td>string(255)</td>
<td>Secondary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;zip_code</td>
<td>optional</td>
<td>string</td>
<td>ZIP code</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;city</td>
<td>optional</td>
<td>string(255)</td>
<td>City</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;state</td>
<td>optional</td>
<td>string(2)</td>
<td>State code in <a href="https://en.wikipedia.org/wiki/ISO_3166-2">ISO 3166-2</a>, required for USA and Canada</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;country</td>
<td>optional</td>
<td>string(2)</td>
<td>Country code in <a href="https://www.iso.org/iso-3166-country-codes.html">ISO 3166</a></td>
</tr>
</tbody></table>

<p><code>required* = conditionally required</code></p>

<p><strong>Supported countries:</strong></p>

<table><thead>
<tr>
<th>Country</th>
</tr>
</thead><tbody>
<tr>
<td>BR</td>
</tr>
</tbody></table>

<blockquote>
<p>Successful Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>This request is not implemented yet
</code></pre>

<pre class="highlight java tab-java"><code><span class="n">This</span> <span class="n">request</span> <span class="n">is</span> <span class="n">not</span> <span class="n">implemented</span> <span class="n">yet</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;elo&lt;/transaction_type&gt;
  &lt;status&gt;pending_async&lt;/status&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;redirect_url&gt;https://gate.emerchantpay.net/redirect/to_acquirer/649e1ff35c61&lt;/redirect_url&gt;
  &lt;technical_message&gt;Transaction successful!&lt;/technical_message&gt;
  &lt;message&gt;Transaction successful!&lt;/message&gt;
  &lt;timestamp&gt;2019-03-14T12:05:55Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
  &lt;sent_to_acquirer&gt;true&lt;/sent_to_acquirer&gt;
&lt;/payment_transaction&gt;
</code></pre>

<p><strong>Successful Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>The transaction type</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>transaction_id</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>unique_id</td>
<td>string(32)</td>
<td>Unique id defined by gate (must later be used if capturing, voiding or refunding a transaction)</td>
</tr>
<tr>
<td>redirect_url</td>
<td>url</td>
<td>URL where user has to be redirected to complete payment process. It is available for asynchronous mode</td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
<tr>
<td>message</td>
<td>string(255)</td>
<td>Human readable error message which can be displayed to users.</td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when the transaction was processed in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Combined date and time</a> e.g. 2007-08- 30T17:46:11Z</td>
</tr>
<tr>
<td>descriptor</td>
<td>string</td>
<td>Static descriptor MID info as configured on the gateway</td>
</tr>
<tr>
<td>amount</td>
<td>integer</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>sent_to_acquirer</td>
<td>string</td>
<td>&quot;true&quot; or &quot;false&quot;</td>
</tr>
</tbody></table>

<blockquote>
<p>Error Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>This request is not implemented yet
</code></pre>

<pre class="highlight java tab-java"><code><span class="n">This</span> <span class="n">request</span> <span class="n">is</span> <span class="n">not</span> <span class="n">implemented</span> <span class="n">yet</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;elo&lt;/transaction_type&gt;
  &lt;status&gt;error&lt;/status&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;code&gt;110&lt;/code&gt;
  &lt;message&gt;Something went wrong, please contact support!&lt;/message&gt;
  &lt;timestamp&gt;2019-03-14T12:05:55Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
  &lt;sent_to_acquirer&gt;true&lt;/sent_to_acquirer&gt;
&lt;/payment_transaction&gt;
</code></pre>

<p><strong>Error Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>The transaction type</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>transaction_id</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>unique_id</td>
<td>string(32)</td>
<td>Unique id defined by gate (must later be used if capturing, voiding or refunding a transaction)</td>
</tr>
<tr>
<td>code</td>
<td>integer</td>
<td>Error code according to <a href="#error-code-table">Error code table</a></td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
<tr>
<td>message</td>
<td>string(255)</td>
<td>Human readable error message which can be displayed to users.</td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when the transaction was processed in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Combined date and time</a> e.g. 2007-08- 30T17:46:11Z</td>
</tr>
<tr>
<td>descriptor</td>
<td>string</td>
<td>Static descriptor MID info as configured on the gateway</td>
</tr>
<tr>
<td>amount</td>
<td>integer</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>sent_to_acquirer</td>
<td>string</td>
<td>&quot;true&quot; or &quot;false&quot;</td>
</tr>
</tbody></table>
<h3 id='hipercard'>Hipercard</h3>
<aside class="notice">
Hipercard is a local credit card in Brazil.
</aside>

<blockquote>
<p>Request</p>
</blockquote>

<pre class="highlight php tab-php"><code>This request is not implemented yet
</code></pre>

<pre class="highlight java tab-java"><code><span class="n">This</span> <span class="n">request</span> <span class="n">is</span> <span class="n">not</span> <span class="n">implemented</span> <span class="n">yet</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>curl https://username:password@gate.emerchantpay.net/process/TERMINAL-TOKEN <span class="se">\</span>
   -H <span class="s2">"Content-Type: text/xml"</span> <span class="se">\</span>
   -d <span class="s1">'
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;hipercard&lt;/transaction_type&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;usage&gt;40208 concert tickets&lt;/usage&gt;
  &lt;remote_ip&gt;245.253.2.12&lt;/remote_ip&gt;
  &lt;return_success_url&gt;http://www.example.com/success&lt;/return_success_url&gt;
  &lt;return_failure_url&gt;http://www.example.com/failure&lt;/return_failure_url&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
  &lt;consumer_reference&gt;barney_rumble&lt;/consumer_reference&gt;
  &lt;national_id&gt;8812128812&lt;/national_id&gt;
  &lt;birth_date&gt;30-12-1992&lt;/birth_date&gt;
  &lt;customer_email&gt;barney@example.com&lt;/customer_email&gt;
  &lt;billing_address&gt;
    &lt;first_name&gt;Barney&lt;/first_name&gt;
    &lt;last_name&gt;Rubble&lt;/last_name&gt;
    &lt;address1&gt;14, Nerazdelni str&lt;/address1&gt;
    &lt;zip_code&gt;1407&lt;/zip_code&gt;
    &lt;city&gt;Salvador&lt;/city&gt;
    &lt;country&gt;BR&lt;/country&gt;
  &lt;/billing_address&gt;
  &lt;risk_params&gt;
    &lt;user_id&gt;123456&lt;/user_id&gt;
  &lt;/risk_params&gt;
&lt;/payment_transaction&gt;'</span>
</code></pre>

<p><strong>Request Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>required</td>
<td>string(255)</td>
<td>The transaction type: <strong>hipercard</strong></td>
</tr>
<tr>
<td>transaction_id</td>
<td>required</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>usage</td>
<td>optional</td>
<td>string(255)</td>
<td>Description of the transaction for later use</td>
</tr>
<tr>
<td>remote_ip</td>
<td>required*</td>
<td>IPv4 address</td>
<td>IPv4 address of customer</td>
</tr>
<tr>
<td>return_success_url</td>
<td>required</td>
<td>url</td>
<td>URL where customer is sent to after successful payment</td>
</tr>
<tr>
<td>return_failure_url</td>
<td>required</td>
<td>url</td>
<td>URL where customer is sent to after unsuccessful payment</td>
</tr>
<tr>
<td>amount</td>
<td>required</td>
<td>integer &gt; 0</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>required</td>
<td>string(3)</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>consumer_reference</td>
<td>required</td>
<td>string(20)</td>
<td>Consumer reference is a unique consumer identifier</td>
</tr>
<tr>
<td>national_id</td>
<td>required</td>
<td>string(20)</td>
<td>National Identifier number of the customer</td>
</tr>
<tr>
<td>birth_date</td>
<td>optional</td>
<td>dd-mm-yyyy</td>
<td>Required for Visa only when MCC is a Financial Services one (e.g. MCC 6012)</td>
</tr>
<tr>
<td>customer_email</td>
<td>required</td>
<td>e-mail address</td>
<td>Must contain valid e-mail of customer</td>
</tr>
<tr>
<td><strong>billing_address</strong></td>
<td>required</td>
<td></td>
<td>See <a href="#required-vs-optional-api-params">Required vs Optional API params</a> for details</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;first_name</td>
<td>required*</td>
<td>string(255)</td>
<td>Customer first name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;last_name</td>
<td>required*</td>
<td>string(255)</td>
<td>Customer last name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address1</td>
<td>required*</td>
<td>string(255)</td>
<td>Primary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address2</td>
<td>required*</td>
<td>string(255)</td>
<td>Secondary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;zip_code</td>
<td>required*</td>
<td>string</td>
<td>ZIP code</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;city</td>
<td>required*</td>
<td>string(255)</td>
<td>City</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;state</td>
<td>required*</td>
<td>string(2)</td>
<td>State code in <a href="https://en.wikipedia.org/wiki/ISO_3166-2">ISO 3166-2</a>, required for USA and Canada</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;country</td>
<td>required</td>
<td>string(2)</td>
<td>Country code in <a href="https://www.iso.org/iso-3166-country-codes.html">ISO 3166</a></td>
</tr>
<tr>
<td><strong>shipping_address</strong></td>
<td>optional</td>
<td></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;first_name</td>
<td>optional</td>
<td>string(255)</td>
<td>Customer first name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;last_name</td>
<td>optional</td>
<td>string(255)</td>
<td>Customer last name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address1</td>
<td>optional</td>
<td>string(255)</td>
<td>Primary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address2</td>
<td>optional</td>
<td>string(255)</td>
<td>Secondary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;zip_code</td>
<td>optional</td>
<td>string</td>
<td>ZIP code</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;city</td>
<td>optional</td>
<td>string(255)</td>
<td>City</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;state</td>
<td>optional</td>
<td>string(2)</td>
<td>State code in <a href="https://en.wikipedia.org/wiki/ISO_3166-2">ISO 3166-2</a>, required for USA and Canada</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;country</td>
<td>optional</td>
<td>string(2)</td>
<td>Country code in <a href="https://www.iso.org/iso-3166-country-codes.html">ISO 3166</a></td>
</tr>
</tbody></table>

<p><code>required* = conditionally required</code></p>

<p><strong>Supported countries:</strong></p>

<table><thead>
<tr>
<th>Country</th>
</tr>
</thead><tbody>
<tr>
<td>BR</td>
</tr>
</tbody></table>

<blockquote>
<p>Successful Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>This request is not implemented yet
</code></pre>

<pre class="highlight java tab-java"><code><span class="n">This</span> <span class="n">request</span> <span class="n">is</span> <span class="n">not</span> <span class="n">implemented</span> <span class="n">yet</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;hipercard&lt;/transaction_type&gt;
  &lt;status&gt;pending_async&lt;/status&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;redirect_url&gt;https://gate.emerchantpay.net/redirect/to_acquirer/649e1ff35c61&lt;/redirect_url&gt;
  &lt;technical_message&gt;Transaction successful!&lt;/technical_message&gt;
  &lt;message&gt;Transaction successful!&lt;/message&gt;
  &lt;timestamp&gt;2019-03-14T12:05:55Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
  &lt;sent_to_acquirer&gt;true&lt;/sent_to_acquirer&gt;
&lt;/payment_transaction&gt;
</code></pre>

<p><strong>Successful Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>The transaction type</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>transaction_id</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>unique_id</td>
<td>string(32)</td>
<td>Unique id defined by gate (must later be used if capturing, voiding or refunding a transaction)</td>
</tr>
<tr>
<td>redirect_url</td>
<td>url</td>
<td>URL where user has to be redirected to complete payment process. It is available for asynchronous mode</td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
<tr>
<td>message</td>
<td>string(255)</td>
<td>Human readable error message which can be displayed to users.</td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when the transaction was processed in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Combined date and time</a> e.g. 2007-08- 30T17:46:11Z</td>
</tr>
<tr>
<td>descriptor</td>
<td>string</td>
<td>Static descriptor MID info as configured on the gateway</td>
</tr>
<tr>
<td>amount</td>
<td>integer</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>sent_to_acquirer</td>
<td>string</td>
<td>&quot;true&quot; or &quot;false&quot;</td>
</tr>
</tbody></table>

<blockquote>
<p>Error Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>This request is not implemented yet
</code></pre>

<pre class="highlight java tab-java"><code><span class="n">This</span> <span class="n">request</span> <span class="n">is</span> <span class="n">not</span> <span class="n">implemented</span> <span class="n">yet</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;hipercard&lt;/transaction_type&gt;
  &lt;status&gt;error&lt;/status&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;code&gt;110&lt;/code&gt;
  &lt;message&gt;Something went wrong, please contact support!&lt;/message&gt;
  &lt;timestamp&gt;2019-03-14T12:05:55Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
  &lt;sent_to_acquirer&gt;true&lt;/sent_to_acquirer&gt;
&lt;/payment_transaction&gt;
</code></pre>

<p><strong>Error Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>The transaction type</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>transaction_id</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>unique_id</td>
<td>string(32)</td>
<td>Unique id defined by gate (must later be used if capturing, voiding or refunding a transaction)</td>
</tr>
<tr>
<td>code</td>
<td>integer</td>
<td>Error code according to <a href="#error-code-table">Error code table</a></td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
<tr>
<td>message</td>
<td>string(255)</td>
<td>Human readable error message which can be displayed to users.</td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when the transaction was processed in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Combined date and time</a> e.g. 2007-08- 30T17:46:11Z</td>
</tr>
<tr>
<td>descriptor</td>
<td>string</td>
<td>Static descriptor MID info as configured on the gateway</td>
</tr>
<tr>
<td>amount</td>
<td>integer</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>sent_to_acquirer</td>
<td>string</td>
<td>&quot;true&quot; or &quot;false&quot;</td>
</tr>
</tbody></table>
<h3 id='naranja'>Naranja</h3>
<aside class="notice">
Naranja is a local credit card issued in Argentina which can be used for purchases over the internet.
</aside>

<blockquote>
<p>Request</p>
</blockquote>

<pre class="highlight php tab-php"><code>This request is not implemented yet
</code></pre>

<pre class="highlight java tab-java"><code><span class="n">This</span> <span class="n">request</span> <span class="n">is</span> <span class="n">not</span> <span class="n">implemented</span> <span class="n">yet</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>curl https://username:password@gate.emerchantpay.net/process/TERMINAL-TOKEN <span class="se">\</span>
   -H <span class="s2">"Content-Type: text/xml"</span> <span class="se">\</span>
   -d <span class="s1">'
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;naranja&lt;/transaction_type&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;usage&gt;40208 concert tickets&lt;/usage&gt;
  &lt;remote_ip&gt;245.253.2.12&lt;/remote_ip&gt;
  &lt;return_success_url&gt;http://www.example.com/success&lt;/return_success_url&gt;
  &lt;return_failure_url&gt;http://www.example.com/failure&lt;/return_failure_url&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
  &lt;consumer_reference&gt;barney_rumble&lt;/consumer_reference&gt;
  &lt;national_id&gt;8812128812&lt;/national_id&gt;
  &lt;birth_date&gt;30-12-1992&lt;/birth_date&gt;
  &lt;customer_email&gt;barney@example.com&lt;/customer_email&gt;
  &lt;billing_address&gt;
    &lt;first_name&gt;Barney&lt;/first_name&gt;
    &lt;last_name&gt;Rubble&lt;/last_name&gt;
    &lt;address1&gt;14, Nerazdelni str&lt;/address1&gt;
    &lt;zip_code&gt;1407&lt;/zip_code&gt;
    &lt;city&gt;Buenos Aires&lt;/city&gt;
    &lt;country&gt;AR&lt;/country&gt;
  &lt;/billing_address&gt;
  &lt;risk_params&gt;
    &lt;user_id&gt;123456&lt;/user_id&gt;
  &lt;/risk_params&gt;
&lt;/payment_transaction&gt;'</span>
</code></pre>

<p><strong>Request Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>required</td>
<td>string(255)</td>
<td>The transaction type: <strong>naranja</strong></td>
</tr>
<tr>
<td>transaction_id</td>
<td>required</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>usage</td>
<td>optional</td>
<td>string(255)</td>
<td>Description of the transaction for later use</td>
</tr>
<tr>
<td>remote_ip</td>
<td>required*</td>
<td>IPv4 address</td>
<td>IPv4 address of customer</td>
</tr>
<tr>
<td>return_success_url</td>
<td>required</td>
<td>url</td>
<td>URL where customer is sent to after successful payment</td>
</tr>
<tr>
<td>return_failure_url</td>
<td>required</td>
<td>url</td>
<td>URL where customer is sent to after unsuccessful payment</td>
</tr>
<tr>
<td>amount</td>
<td>required</td>
<td>integer &gt; 0</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>required</td>
<td>string(3)</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>consumer_reference</td>
<td>required</td>
<td>string(20)</td>
<td>Consumer reference is a unique consumer identifier</td>
</tr>
<tr>
<td>national_id</td>
<td>required</td>
<td>string(20)</td>
<td>National Identifier number of the customer</td>
</tr>
<tr>
<td>birth_date</td>
<td>optional</td>
<td>dd-mm-yyyy</td>
<td>Required for Visa only when MCC is a Financial Services one (e.g. MCC 6012)</td>
</tr>
<tr>
<td>customer_email</td>
<td>required</td>
<td>e-mail address</td>
<td>Must contain valid e-mail of customer</td>
</tr>
<tr>
<td><strong>billing_address</strong></td>
<td>required</td>
<td></td>
<td>See <a href="#required-vs-optional-api-params">Required vs Optional API params</a> for details</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;first_name</td>
<td>required*</td>
<td>string(255)</td>
<td>Customer first name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;last_name</td>
<td>required*</td>
<td>string(255)</td>
<td>Customer last name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address1</td>
<td>required*</td>
<td>string(255)</td>
<td>Primary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address2</td>
<td>required*</td>
<td>string(255)</td>
<td>Secondary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;zip_code</td>
<td>required*</td>
<td>string</td>
<td>ZIP code</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;city</td>
<td>required*</td>
<td>string(255)</td>
<td>City</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;state</td>
<td>required*</td>
<td>string(2)</td>
<td>State code in <a href="https://en.wikipedia.org/wiki/ISO_3166-2">ISO 3166-2</a>, required for USA and Canada</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;country</td>
<td>required</td>
<td>string(2)</td>
<td>Country code in <a href="https://www.iso.org/iso-3166-country-codes.html">ISO 3166</a></td>
</tr>
<tr>
<td><strong>shipping_address</strong></td>
<td>optional</td>
<td></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;first_name</td>
<td>optional</td>
<td>string(255)</td>
<td>Customer first name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;last_name</td>
<td>optional</td>
<td>string(255)</td>
<td>Customer last name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address1</td>
<td>optional</td>
<td>string(255)</td>
<td>Primary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address2</td>
<td>optional</td>
<td>string(255)</td>
<td>Secondary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;zip_code</td>
<td>optional</td>
<td>string</td>
<td>ZIP code</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;city</td>
<td>optional</td>
<td>string(255)</td>
<td>City</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;state</td>
<td>optional</td>
<td>string(2)</td>
<td>State code in <a href="https://en.wikipedia.org/wiki/ISO_3166-2">ISO 3166-2</a>, required for USA and Canada</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;country</td>
<td>optional</td>
<td>string(2)</td>
<td>Country code in <a href="https://www.iso.org/iso-3166-country-codes.html">ISO 3166</a></td>
</tr>
</tbody></table>

<p><code>required* = conditionally required</code></p>

<p><strong>Supported countries:</strong></p>

<table><thead>
<tr>
<th>Country</th>
</tr>
</thead><tbody>
<tr>
<td>AR</td>
</tr>
</tbody></table>

<blockquote>
<p>Successful Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>This request is not implemented yet
</code></pre>

<pre class="highlight java tab-java"><code><span class="n">This</span> <span class="n">request</span> <span class="n">is</span> <span class="n">not</span> <span class="n">implemented</span> <span class="n">yet</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;naranja&lt;/transaction_type&gt;
  &lt;status&gt;pending_async&lt;/status&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;redirect_url&gt;https://gate.emerchantpay.net/redirect/to_acquirer/649e1ff35c61&lt;/redirect_url&gt;
  &lt;technical_message&gt;Transaction successful!&lt;/technical_message&gt;
  &lt;message&gt;Transaction successful!&lt;/message&gt;
  &lt;timestamp&gt;2019-03-14T12:05:55Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
  &lt;sent_to_acquirer&gt;true&lt;/sent_to_acquirer&gt;
&lt;/payment_transaction&gt;
</code></pre>

<p><strong>Successful Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>The transaction type</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>transaction_id</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>unique_id</td>
<td>string(32)</td>
<td>Unique id defined by gate (must later be used if capturing, voiding or refunding a transaction)</td>
</tr>
<tr>
<td>redirect_url</td>
<td>url</td>
<td>URL where user has to be redirected to complete payment process. It is available for asynchronous mode</td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
<tr>
<td>message</td>
<td>string(255)</td>
<td>Human readable error message which can be displayed to users.</td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when the transaction was processed in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Combined date and time</a> e.g. 2007-08- 30T17:46:11Z</td>
</tr>
<tr>
<td>descriptor</td>
<td>string</td>
<td>Static descriptor MID info as configured on the gateway</td>
</tr>
<tr>
<td>amount</td>
<td>integer</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>sent_to_acquirer</td>
<td>string</td>
<td>&quot;true&quot; or &quot;false&quot;</td>
</tr>
</tbody></table>

<blockquote>
<p>Error Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>This request is not implemented yet
</code></pre>

<pre class="highlight java tab-java"><code><span class="n">This</span> <span class="n">request</span> <span class="n">is</span> <span class="n">not</span> <span class="n">implemented</span> <span class="n">yet</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;naranja&lt;/transaction_type&gt;
  &lt;status&gt;error&lt;/status&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;code&gt;110&lt;/code&gt;
  &lt;message&gt;Something went wrong, please contact support!&lt;/message&gt;
  &lt;timestamp&gt;2019-03-14T12:05:55Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
  &lt;sent_to_acquirer&gt;true&lt;/sent_to_acquirer&gt;
&lt;/payment_transaction&gt;
</code></pre>

<p><strong>Error Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>The transaction type</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>transaction_id</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>unique_id</td>
<td>string(32)</td>
<td>Unique id defined by gate (must later be used if capturing, voiding or refunding a transaction)</td>
</tr>
<tr>
<td>code</td>
<td>integer</td>
<td>Error code according to <a href="#error-code-table">Error code table</a></td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
<tr>
<td>message</td>
<td>string(255)</td>
<td>Human readable error message which can be displayed to users.</td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when the transaction was processed in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Combined date and time</a> e.g. 2007-08- 30T17:46:11Z</td>
</tr>
<tr>
<td>descriptor</td>
<td>string</td>
<td>Static descriptor MID info as configured on the gateway</td>
</tr>
<tr>
<td>amount</td>
<td>integer</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>sent_to_acquirer</td>
<td>string</td>
<td>&quot;true&quot; or &quot;false&quot;</td>
</tr>
</tbody></table>
<h3 id='nativa'>Nativa</h3>
<aside class="notice">
Nativa is an Argentinian credit card provided by the National Bank of Argentina.
</aside>

<blockquote>
<p>Request</p>
</blockquote>

<pre class="highlight php tab-php"><code>This request is not implemented yet
</code></pre>

<pre class="highlight java tab-java"><code><span class="n">This</span> <span class="n">request</span> <span class="n">is</span> <span class="n">not</span> <span class="n">implemented</span> <span class="n">yet</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>curl https://username:password@gate.emerchantpay.net/process/TERMINAL-TOKEN <span class="se">\</span>
   -H <span class="s2">"Content-Type: text/xml"</span> <span class="se">\</span>
   -d <span class="s1">'
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;nativa&lt;/transaction_type&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;usage&gt;40208 concert tickets&lt;/usage&gt;
  &lt;remote_ip&gt;245.253.2.12&lt;/remote_ip&gt;
  &lt;return_success_url&gt;http://www.example.com/success&lt;/return_success_url&gt;
  &lt;return_failure_url&gt;http://www.example.com/failure&lt;/return_failure_url&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
  &lt;consumer_reference&gt;barney_rumble&lt;/consumer_reference&gt;
  &lt;national_id&gt;8812128812&lt;/national_id&gt;
  &lt;birth_date&gt;30-12-1992&lt;/birth_date&gt;
  &lt;customer_email&gt;barney@example.com&lt;/customer_email&gt;
  &lt;billing_address&gt;
    &lt;first_name&gt;Barney&lt;/first_name&gt;
    &lt;last_name&gt;Rubble&lt;/last_name&gt;
    &lt;address1&gt;14, Nerazdelni str&lt;/address1&gt;
    &lt;zip_code&gt;1407&lt;/zip_code&gt;
    &lt;city&gt;Buenos Aires&lt;/city&gt;
    &lt;country&gt;AR&lt;/country&gt;
  &lt;/billing_address&gt;
  &lt;risk_params&gt;
    &lt;user_id&gt;123456&lt;/user_id&gt;
  &lt;/risk_params&gt;
&lt;/payment_transaction&gt;'</span>
</code></pre>

<p><strong>Request Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>required</td>
<td>string(255)</td>
<td>The transaction type: <strong>nativa</strong></td>
</tr>
<tr>
<td>transaction_id</td>
<td>required</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>usage</td>
<td>optional</td>
<td>string(255)</td>
<td>Description of the transaction for later use</td>
</tr>
<tr>
<td>remote_ip</td>
<td>required*</td>
<td>IPv4 address</td>
<td>IPv4 address of customer</td>
</tr>
<tr>
<td>return_success_url</td>
<td>required</td>
<td>url</td>
<td>URL where customer is sent to after successful payment</td>
</tr>
<tr>
<td>return_failure_url</td>
<td>required</td>
<td>url</td>
<td>URL where customer is sent to after unsuccessful payment</td>
</tr>
<tr>
<td>amount</td>
<td>required</td>
<td>integer &gt; 0</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>required</td>
<td>string(3)</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>consumer_reference</td>
<td>required</td>
<td>string(20)</td>
<td>Consumer reference is a unique consumer identifier</td>
</tr>
<tr>
<td>national_id</td>
<td>required</td>
<td>string(20)</td>
<td>National Identifier number of the customer</td>
</tr>
<tr>
<td>birth_date</td>
<td>optional</td>
<td>dd-mm-yyyy</td>
<td>Required for Visa only when MCC is a Financial Services one (e.g. MCC 6012)</td>
</tr>
<tr>
<td>customer_email</td>
<td>required</td>
<td>e-mail address</td>
<td>Must contain valid e-mail of customer</td>
</tr>
<tr>
<td><strong>billing_address</strong></td>
<td>required</td>
<td></td>
<td>See <a href="#required-vs-optional-api-params">Required vs Optional API params</a> for details</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;first_name</td>
<td>required*</td>
<td>string(255)</td>
<td>Customer first name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;last_name</td>
<td>required*</td>
<td>string(255)</td>
<td>Customer last name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address1</td>
<td>required*</td>
<td>string(255)</td>
<td>Primary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address2</td>
<td>required*</td>
<td>string(255)</td>
<td>Secondary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;zip_code</td>
<td>required*</td>
<td>string</td>
<td>ZIP code</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;city</td>
<td>required*</td>
<td>string(255)</td>
<td>City</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;state</td>
<td>required*</td>
<td>string(2)</td>
<td>State code in <a href="https://en.wikipedia.org/wiki/ISO_3166-2">ISO 3166-2</a>, required for USA and Canada</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;country</td>
<td>required</td>
<td>string(2)</td>
<td>Country code in <a href="https://www.iso.org/iso-3166-country-codes.html">ISO 3166</a></td>
</tr>
<tr>
<td><strong>shipping_address</strong></td>
<td>optional</td>
<td></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;first_name</td>
<td>optional</td>
<td>string(255)</td>
<td>Customer first name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;last_name</td>
<td>optional</td>
<td>string(255)</td>
<td>Customer last name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address1</td>
<td>optional</td>
<td>string(255)</td>
<td>Primary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address2</td>
<td>optional</td>
<td>string(255)</td>
<td>Secondary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;zip_code</td>
<td>optional</td>
<td>string</td>
<td>ZIP code</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;city</td>
<td>optional</td>
<td>string(255)</td>
<td>City</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;state</td>
<td>optional</td>
<td>string(2)</td>
<td>State code in <a href="https://en.wikipedia.org/wiki/ISO_3166-2">ISO 3166-2</a>, required for USA and Canada</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;country</td>
<td>optional</td>
<td>string(2)</td>
<td>Country code in <a href="https://www.iso.org/iso-3166-country-codes.html">ISO 3166</a></td>
</tr>
</tbody></table>

<p><code>required* = conditionally required</code></p>

<p><strong>Supported countries:</strong></p>

<table><thead>
<tr>
<th>Country</th>
</tr>
</thead><tbody>
<tr>
<td>AR</td>
</tr>
</tbody></table>

<blockquote>
<p>Successful Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>This request is not implemented yet
</code></pre>

<pre class="highlight java tab-java"><code><span class="n">This</span> <span class="n">request</span> <span class="n">is</span> <span class="n">not</span> <span class="n">implemented</span> <span class="n">yet</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;nativa&lt;/transaction_type&gt;
  &lt;status&gt;pending_async&lt;/status&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;redirect_url&gt;https://gate.emerchantpay.net/redirect/to_acquirer/649e1ff35c61&lt;/redirect_url&gt;
  &lt;technical_message&gt;Transaction successful!&lt;/technical_message&gt;
  &lt;message&gt;Transaction successful!&lt;/message&gt;
  &lt;timestamp&gt;2019-03-14T12:05:55Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
  &lt;sent_to_acquirer&gt;true&lt;/sent_to_acquirer&gt;
&lt;/payment_transaction&gt;
</code></pre>

<p><strong>Successful Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>The transaction type</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>transaction_id</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>unique_id</td>
<td>string(32)</td>
<td>Unique id defined by gate (must later be used if capturing, voiding or refunding a transaction)</td>
</tr>
<tr>
<td>redirect_url</td>
<td>url</td>
<td>URL where user has to be redirected to complete payment process. It is available for asynchronous mode</td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
<tr>
<td>message</td>
<td>string(255)</td>
<td>Human readable error message which can be displayed to users.</td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when the transaction was processed in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Combined date and time</a> e.g. 2007-08- 30T17:46:11Z</td>
</tr>
<tr>
<td>descriptor</td>
<td>string</td>
<td>Static descriptor MID info as configured on the gateway</td>
</tr>
<tr>
<td>amount</td>
<td>integer</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>sent_to_acquirer</td>
<td>string</td>
<td>&quot;true&quot; or &quot;false&quot;</td>
</tr>
</tbody></table>

<blockquote>
<p>Error Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>This request is not implemented yet
</code></pre>

<pre class="highlight java tab-java"><code><span class="n">This</span> <span class="n">request</span> <span class="n">is</span> <span class="n">not</span> <span class="n">implemented</span> <span class="n">yet</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;nativa&lt;/transaction_type&gt;
  &lt;status&gt;error&lt;/status&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;code&gt;110&lt;/code&gt;
  &lt;message&gt;Something went wrong, please contact support!&lt;/message&gt;
  &lt;timestamp&gt;2019-03-14T12:05:55Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
  &lt;sent_to_acquirer&gt;true&lt;/sent_to_acquirer&gt;
&lt;/payment_transaction&gt;
</code></pre>

<p><strong>Error Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>The transaction type</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>transaction_id</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>unique_id</td>
<td>string(32)</td>
<td>Unique id defined by gate (must later be used if capturing, voiding or refunding a transaction)</td>
</tr>
<tr>
<td>code</td>
<td>integer</td>
<td>Error code according to <a href="#error-code-table">Error code table</a></td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
<tr>
<td>message</td>
<td>string(255)</td>
<td>Human readable error message which can be displayed to users.</td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when the transaction was processed in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Combined date and time</a> e.g. 2007-08- 30T17:46:11Z</td>
</tr>
<tr>
<td>descriptor</td>
<td>string</td>
<td>Static descriptor MID info as configured on the gateway</td>
</tr>
<tr>
<td>amount</td>
<td>integer</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>sent_to_acquirer</td>
<td>string</td>
<td>&quot;true&quot; or &quot;false&quot;</td>
</tr>
</tbody></table>
<h3 id='tarjeta-shopping'>Tarjeta Shopping</h3>
<aside class="notice" >
Tarjeta Shopping is a cash payment in Argentina.
</aside>

<blockquote>
<p>Request</p>
</blockquote>

<pre class="highlight php tab-php"><code>This request is not implemented yet
</code></pre>

<pre class="highlight java tab-java"><code><span class="n">This</span> <span class="n">request</span> <span class="n">is</span> <span class="n">not</span> <span class="n">implemented</span> <span class="n">yet</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>curl https://username:password@gate.emerchantpay.net/process/TERMINAL-TOKEN <span class="se">\</span>
   -H <span class="s2">"Content-Type: text/xml"</span> <span class="se">\</span>
   -d <span class="s1">'
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;tarjeta_shopping&lt;/transaction_type&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;usage&gt;40208 concert tickets&lt;/usage&gt;
  &lt;remote_ip&gt;245.253.2.12&lt;/remote_ip&gt;
  &lt;return_success_url&gt;http://www.example.com/success&lt;/return_success_url&gt;
  &lt;return_failure_url&gt;http://www.example.com/failure&lt;/return_failure_url&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
  &lt;consumer_reference&gt;barney_rubble&lt;/consumer_reference&gt;
  &lt;national_id&gt;8812128812&lt;/national_id&gt;
  &lt;birth_date&gt;30-12-1992&lt;/birth_date&gt;
  &lt;customer_email&gt;travis@example.com&lt;/customer_email&gt;
  &lt;billing_address&gt;
    &lt;first_name&gt;Barney&lt;/first_name&gt;
    &lt;last_name&gt;Rubble&lt;/last_name&gt;
    &lt;address1&gt;14, Nerazdelni str&lt;/address1&gt;
    &lt;zip_code&gt;1407&lt;/zip_code&gt;
    &lt;city&gt;Rosario&lt;/city&gt;
    &lt;country&gt;AR&lt;/country&gt;
  &lt;/billing_address&gt;
  &lt;risk_params&gt;
    &lt;user_id&gt;123456&lt;/user_id&gt;
  &lt;/risk_params&gt;
&lt;/payment_transaction&gt;'</span>
</code></pre>

<p><strong>Request Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>required</td>
<td>string(255)</td>
<td>The transaction type: <strong>tarjeta_shopping</strong></td>
</tr>
<tr>
<td>transaction_id</td>
<td>required</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>usage</td>
<td>optional</td>
<td>string(255)</td>
<td>Description of the transaction for later use</td>
</tr>
<tr>
<td>remote_ip</td>
<td>required*</td>
<td>IPv4 address</td>
<td>IPv4 address of customer</td>
</tr>
<tr>
<td>return_success_url</td>
<td>required</td>
<td>url</td>
<td>URL where customer is sent to after successful payment</td>
</tr>
<tr>
<td>return_failure_url</td>
<td>required</td>
<td>url</td>
<td>URL where customer is sent to after unsuccessful payment</td>
</tr>
<tr>
<td>amount</td>
<td>required</td>
<td>integer &gt; 0</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>required</td>
<td>string(3)</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>consumer_reference</td>
<td>required</td>
<td>string(20)</td>
<td>Consumer reference is a unique consumer identifier</td>
</tr>
<tr>
<td>national_id</td>
<td>required</td>
<td>string(20)</td>
<td>National Identifier number of the customer</td>
</tr>
<tr>
<td>birth_date</td>
<td>optional</td>
<td>string(20)</td>
<td>Birth date of the customer</td>
</tr>
<tr>
<td>customer_email</td>
<td>required</td>
<td>e-mail address</td>
<td>Must contain valid e-mail of customer</td>
</tr>
<tr>
<td><strong>billing_address</strong></td>
<td>required</td>
<td></td>
<td>See <a href="#required-vs-optional-api-params">Required vs Optional API params</a> for details</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;first_name</td>
<td>required*</td>
<td>string(255)</td>
<td>Customer first name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;last_name</td>
<td>required*</td>
<td>string(255)</td>
<td>Customer last name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address1</td>
<td>required*</td>
<td>string(255)</td>
<td>Primary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address2</td>
<td>required*</td>
<td>string(255)</td>
<td>Secondary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;zip_code</td>
<td>required*</td>
<td>string</td>
<td>ZIP code</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;city</td>
<td>required*</td>
<td>string(255)</td>
<td>City</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;state</td>
<td>required*</td>
<td>string(2)</td>
<td>State code in <a href="https://en.wikipedia.org/wiki/ISO_3166-2">ISO 3166-2</a>, required for USA and Canada</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;country</td>
<td>required</td>
<td>string(2)</td>
<td>Country code in <a href="https://www.iso.org/iso-3166-country-codes.html">ISO 3166</a></td>
</tr>
<tr>
<td><strong>shipping_address</strong></td>
<td>optional</td>
<td></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;first_name</td>
<td>optional</td>
<td>string(255)</td>
<td>Customer first name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;last_name</td>
<td>optional</td>
<td>string(255)</td>
<td>Customer last name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address1</td>
<td>optional</td>
<td>string(255)</td>
<td>Primary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address2</td>
<td>optional</td>
<td>string(255)</td>
<td>Secondary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;zip_code</td>
<td>optional</td>
<td>string</td>
<td>ZIP code</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;city</td>
<td>optional</td>
<td>string(255)</td>
<td>City</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;state</td>
<td>optional</td>
<td>string(2)</td>
<td>State code in <a href="https://en.wikipedia.org/wiki/ISO_3166-2">ISO 3166-2</a>, required for USA and Canada</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;country</td>
<td>optional</td>
<td>string(2)</td>
<td>Country code in <a href="https://www.iso.org/iso-3166-country-codes.html">ISO 3166</a></td>
</tr>
</tbody></table>

<p><code>required* = conditionally required</code></p>

<p><strong>Supported countries:</strong></p>

<table><thead>
<tr>
<th>Country</th>
</tr>
</thead><tbody>
<tr>
<td>AR</td>
</tr>
</tbody></table>

<blockquote>
<p>Successful Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>This request is not implemented yet
</code></pre>

<pre class="highlight java tab-java"><code><span class="n">This</span> <span class="n">request</span> <span class="n">is</span> <span class="n">not</span> <span class="n">implemented</span> <span class="n">yet</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;tarjeta_shopping&lt;/transaction_type&gt;
  &lt;status&gt;pending_async&lt;/status&gt;
  &lt;mode&gt;live&lt;/mode&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;technical_message&gt;Transaction successful!&lt;/technical_message&gt;
  &lt;message&gt;Transaction successful!&lt;/message&gt;
  &lt;redirect_url&gt;https://gate.emerchantpay.net/redirect/to_acquirer/649e1ff35c61&lt;/redirect_url&gt;
  &lt;timestamp&gt;2019-03-14T12:05:55Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
  &lt;sent_to_acquirer&gt;true&lt;/sent_to_acquirer&gt;
&lt;/payment_transaction&gt;
</code></pre>

<p><strong>Successful Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>The transaction type</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>transaction_id</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>unique_id</td>
<td>string(32)</td>
<td>Unique id defined by gate (must later be used if capturing, voiding or refunding a transaction)</td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
<tr>
<td>message</td>
<td>string(255)</td>
<td>Human readable error message which can be displayed to users.</td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>redirect_url</td>
<td>url</td>
<td>URL where user has to be redirected to complete payment process. It is available for asynchronous mode</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when the transaction was processed in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Combined date and time</a> e.g. 2007-08- 30T17:46:11Z</td>
</tr>
<tr>
<td>descriptor</td>
<td>string</td>
<td>Static descriptor MID info as configured on the gateway</td>
</tr>
<tr>
<td>amount</td>
<td>integer</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>sent_to_acquirer</td>
<td>string</td>
<td>&quot;true&quot; or &quot;false&quot;</td>
</tr>
</tbody></table>

<blockquote>
<p>Error Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>This request is not implemented yet
</code></pre>

<pre class="highlight java tab-java"><code><span class="n">This</span> <span class="n">request</span> <span class="n">is</span> <span class="n">not</span> <span class="n">implemented</span> <span class="n">yet</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;tarjeta_shopping&lt;/transaction_type&gt;
  &lt;status&gt;error&lt;/status&gt;
  &lt;mode&gt;live&lt;/mode&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;code&gt;110&lt;/code&gt;
  &lt;message&gt;Something went wrong, please contact support!&lt;/message&gt;
  &lt;timestamp&gt;2019-03-14T12:05:55Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
  &lt;sent_to_acquirer&gt;true&lt;/sent_to_acquirer&gt;
&lt;/payment_transaction&gt;
</code></pre>

<p><strong>Error Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>The transaction type</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>transaction_id</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>unique_id</td>
<td>string(32)</td>
<td>Unique id defined by gate (must later be used if capturing, voiding or refunding a transaction)</td>
</tr>
<tr>
<td>code</td>
<td>integer</td>
<td>Error code according to <a href="#error-code-table">Error code table</a></td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
<tr>
<td>message</td>
<td>string(255)</td>
<td>Human readable error message which can be displayed to users.</td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when the transaction was processed in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Combined date and time</a> e.g. 2007-08- 30T17:46:11Z</td>
</tr>
<tr>
<td>descriptor</td>
<td>string</td>
<td>Static descriptor MID info as configured on the gateway</td>
</tr>
<tr>
<td>amount</td>
<td>integer</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>sent_to_acquirer</td>
<td>string</td>
<td>&quot;true&quot; or &quot;false&quot;</td>
</tr>
</tbody></table>
<h2 id='non-financial-transactions'>Non-financial Transactions</h2><h3 id='account-verification'>Account Verification</h3>
<p>Account Verification transactions are implemented using the so-called zero-value auths.</p>

<p>Using an account verification transaction, the account existence for a given cardholder can be verified
without any financial impact.</p>

<p>Note the account verification can also carry on an AVS request, thus you can also get the AVS response
code and text by the schemes along with it. Refer to section AVS Status Codes for more information.</p>

<aside class="notice" >
This transaction type supports <a href="#tokenization" target="_self">Tokenization</a>.
</aside>

<blockquote>
<p>Request</p>
</blockquote>

<pre class="highlight php tab-php"><code><span class="cp">&lt;?php</span>

<span class="c1">// Load the pre-configured ini file...
</span><span class="nx">\Genesis\Config</span><span class="o">::</span><span class="na">loadSettings</span><span class="p">(</span><span class="s1">'/path/to/config.ini'</span><span class="p">);</span>

<span class="nv">$genesis</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Genesis</span><span class="p">(</span><span class="s1">'NonFinancial\AccountVerification'</span><span class="p">);</span>
<span class="nv">$request</span> <span class="o">=</span> <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">request</span><span class="p">();</span>

<span class="nv">$request</span>
  <span class="o">-&gt;</span><span class="na">setTransactionId</span><span class="p">(</span><span class="s1">'43671'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setUsage</span><span class="p">(</span><span class="s1">'40208 concert tickets'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setRemoteIp</span><span class="p">(</span><span class="s1">'245.253.2.12'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCardHolder</span><span class="p">(</span><span class="s1">'Travis Pastrana'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCardNumber</span><span class="p">(</span><span class="s1">'4200000000000000'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setExpirationMonth</span><span class="p">(</span><span class="s1">'12'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setExpirationYear</span><span class="p">(</span><span class="s1">'2020'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCvv</span><span class="p">(</span><span class="s1">'834'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCustomerEmail</span><span class="p">(</span><span class="s1">'travis@example.com'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCustomerPhone</span><span class="p">(</span><span class="s1">'+1987987987987'</span><span class="p">)</span>


  <span class="c1">// Billing Address
</span>  <span class="o">-&gt;</span><span class="na">setBillingFirstName</span><span class="p">(</span><span class="s1">'Travis'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingLastName</span><span class="p">(</span><span class="s1">'Pastrana'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingAddress1</span><span class="p">(</span><span class="s1">'Muster Str. 12'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingZipCode</span><span class="p">(</span><span class="s1">'10178'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingCity</span><span class="p">(</span><span class="s1">'Los Angeles'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingState</span><span class="p">(</span><span class="s1">'CA'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingCountry</span><span class="p">(</span><span class="s1">'US'</span><span class="p">);</span>

<span class="k">try</span> <span class="p">{</span>
    <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">execute</span><span class="p">();</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">response</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">getResponseObject</span><span class="p">();</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">\Exception</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$e</span><span class="o">-&gt;</span><span class="na">getMessage</span><span class="p">();</span>
<span class="p">}</span>
</code></pre>

<pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.GenesisClient</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.TransactionResult</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.constants.Endpoints</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.constants.Environments</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.requests.nonfinancial.AccountVerificationRequest</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.model.Transaction</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Configuration</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Country</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Currency</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">GenesisExample</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">()</span>  <span class="o">{</span>

    <span class="c1">// Create configuration</span>
    <span class="n">Configuration</span> <span class="n">configuration</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Configuration</span><span class="o">(</span><span class="n">Environments</span><span class="o">.</span><span class="na">STAGING</span><span class="o">,</span> <span class="n">Endpoints</span><span class="o">.</span><span class="na">EMERCHANTPAY</span><span class="o">);</span>

    <span class="n">configuration</span><span class="o">.</span><span class="na">setUsername</span><span class="o">(</span><span class="s">"SET_YOUR_USERNAME"</span><span class="o">);</span>
    <span class="n">configuration</span><span class="o">.</span><span class="na">setPassword</span><span class="o">(</span><span class="s">"SET_YOUR_PASSWORD"</span><span class="o">);</span>
    <span class="n">configuration</span><span class="o">.</span><span class="na">setToken</span><span class="o">(</span><span class="s">"SET_YOUR_TOKEN"</span><span class="o">);</span>

    <span class="n">AccountVerificationRequest</span> <span class="n">request</span> <span class="o">=</span> <span class="k">new</span> <span class="n">AccountVerificationRequest</span><span class="o">();</span>

    <span class="n">request</span><span class="o">.</span><span class="na">setTransactionId</span><span class="o">(</span><span class="s">"43671"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setUsage</span><span class="o">(</span><span class="s">"40208 concert tickets"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setRemoteIp</span><span class="o">(</span><span class="s">"245.253.2.12"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCardHolder</span><span class="o">(</span><span class="s">"Travis Pastrana"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCardNumber</span><span class="o">(</span><span class="s">"4200000000000000"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setExpirationMonth</span><span class="o">(</span><span class="s">"12"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setExpirationYear</span><span class="o">(</span><span class="s">"2020"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCvv</span><span class="o">(</span><span class="s">"834"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCustomerEmail</span><span class="o">(</span><span class="s">"travis@example.com"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCustomerPhone</span><span class="o">(</span><span class="s">"+1987987987987"</span><span class="o">);</span>


    <span class="c1">// Billing Address</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingFirstname</span><span class="o">(</span><span class="s">"Travis"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingLastname</span><span class="o">(</span><span class="s">"Pastrana"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingPrimaryAddress</span><span class="o">(</span><span class="s">"Muster Str. 12"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingZipCode</span><span class="o">(</span><span class="s">"10178"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingCity</span><span class="o">(</span><span class="s">"Los Angeles"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingState</span><span class="o">(</span><span class="s">"CA"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingCountry</span><span class="o">(</span><span class="s">"US"</span><span class="o">);</span>

    <span class="n">GenesisClient</span> <span class="n">client</span> <span class="o">=</span> <span class="k">new</span> <span class="n">GenesisClient</span><span class="o">(</span><span class="n">configuration</span><span class="o">,</span> <span class="n">request</span><span class="o">);</span>
    <span class="n">client</span><span class="o">.</span><span class="na">execute</span><span class="o">();</span>

    <span class="c1">// Parse Payment result</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">client</span><span class="o">.</span><span class="na">getResponse</span><span class="o">());</span>

  <span class="o">}</span>
<span class="o">}</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="kd">var</span> <span class="nx">genesis</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'genesis.js/lib/genesis.js'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">transaction</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">genesis</span><span class="p">.</span><span class="nx">transaction</span><span class="p">();</span>

<span class="kd">var</span> <span class="nx">failure</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">reason</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">reason</span><span class="p">);</span>
<span class="p">};</span>

<span class="kd">var</span> <span class="nx">success</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>

<span class="nx">transaction</span><span class="p">.</span><span class="nx">account_verification</span><span class="p">(</span>
  <span class="p">{</span>
    <span class="s2">"transaction_id"</span><span class="p">:</span> <span class="s2">"43671"</span><span class="p">,</span>
    <span class="s2">"usage"</span><span class="p">:</span> <span class="s2">"40208 concert tickets"</span><span class="p">,</span>
    <span class="s2">"remote_ip"</span><span class="p">:</span> <span class="s2">"245.253.2.12"</span><span class="p">,</span>
    <span class="s2">"card_holder"</span><span class="p">:</span> <span class="s2">"Travis Pastrana"</span><span class="p">,</span>
    <span class="s2">"card_number"</span><span class="p">:</span> <span class="s2">"4200000000000000"</span><span class="p">,</span>
    <span class="s2">"expiration_month"</span><span class="p">:</span> <span class="s2">"12"</span><span class="p">,</span>
    <span class="s2">"expiration_year"</span><span class="p">:</span> <span class="mi">2020</span><span class="p">,</span>
    <span class="s2">"cvv"</span><span class="p">:</span> <span class="s2">"834"</span><span class="p">,</span>
    <span class="s2">"customer_email"</span><span class="p">:</span> <span class="s2">"travis@example.com"</span><span class="p">,</span>
    <span class="s2">"customer_phone"</span><span class="p">:</span> <span class="s2">"+1987987987987"</span><span class="p">,</span>
    <span class="s2">"billing_address"</span><span class="p">:</span> <span class="p">{</span>
      <span class="s2">"first_name"</span><span class="p">:</span> <span class="s2">"Travis"</span><span class="p">,</span>
      <span class="s2">"last_name"</span><span class="p">:</span> <span class="s2">"Pastrana"</span><span class="p">,</span>
      <span class="s2">"address1"</span><span class="p">:</span> <span class="s2">"Muster Str. 12"</span><span class="p">,</span>
      <span class="s2">"zip_code"</span><span class="p">:</span> <span class="s2">"10178"</span><span class="p">,</span>
      <span class="s2">"city"</span><span class="p">:</span> <span class="s2">"Los Angeles"</span><span class="p">,</span>
      <span class="s2">"state"</span><span class="p">:</span> <span class="s2">"CA"</span><span class="p">,</span>
      <span class="s2">"country"</span><span class="p">:</span> <span class="s2">"US"</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">).</span><span class="nx">send</span><span class="p">()</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">success</span><span class="p">)</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">failure</span><span class="p">);</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>curl https://username:password@gate.emerchantpay.net/process/TERMINAL-TOKEN <span class="se">\</span>
   -H <span class="s2">"Content-Type: text/xml"</span> <span class="se">\</span>
   -d <span class="s1">'
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;account_verification&lt;/transaction_type&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;usage&gt;40208 concert tickets&lt;/usage&gt;
  &lt;remote_ip&gt;245.253.2.12&lt;/remote_ip&gt;
  &lt;card_holder&gt;Travis Pastrana&lt;/card_holder&gt;
  &lt;card_number&gt;4200000000000000&lt;/card_number&gt;
  &lt;expiration_month&gt;12&lt;/expiration_month&gt;
  &lt;expiration_year&gt;2020&lt;/expiration_year&gt;
  &lt;cvv&gt;834&lt;/cvv&gt;
  &lt;customer_email&gt;travis@example.com&lt;/customer_email&gt;
  &lt;customer_phone&gt;+1987987987987&lt;/customer_phone&gt;
  &lt;billing_address&gt;
    &lt;first_name&gt;Travis&lt;/first_name&gt;
    &lt;last_name&gt;Pastrana&lt;/last_name&gt;
    &lt;address1&gt;Muster Str. 12&lt;/address1&gt;
    &lt;zip_code&gt;10178&lt;/zip_code&gt;
    &lt;city&gt;Los Angeles&lt;/city&gt;
    &lt;state&gt;CA&lt;/state&gt;
    &lt;country&gt;US&lt;/country&gt;
  &lt;/billing_address&gt;
&lt;/payment_transaction&gt;'</span>
</code></pre>

<blockquote>
<p>Request</p>
</blockquote>

<pre class="highlight php tab-php"><code><span class="cp">&lt;?php</span>

<span class="c1">// Load the pre-configured ini file...
</span><span class="nx">\Genesis\Config</span><span class="o">::</span><span class="na">loadSettings</span><span class="p">(</span><span class="s1">'/path/to/config.ini'</span><span class="p">);</span>

<span class="nv">$genesis</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Genesis</span><span class="p">(</span><span class="s1">'NonFinancial\AccountVerification'</span><span class="p">);</span>
<span class="nv">$request</span> <span class="o">=</span> <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">request</span><span class="p">();</span>

<span class="nv">$request</span>
  <span class="o">-&gt;</span><span class="na">setTransactionId</span><span class="p">(</span><span class="s1">'43671'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setUsage</span><span class="p">(</span><span class="s1">'40208 concert tickets'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setIssuerOctEnabled</span><span class="p">(</span><span class="s1">'true'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setRemoteIp</span><span class="p">(</span><span class="s1">'245.253.2.12'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCardHolder</span><span class="p">(</span><span class="s1">'Travis Pastrana'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCardNumber</span><span class="p">(</span><span class="s1">'4200000000000000'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setExpirationMonth</span><span class="p">(</span><span class="s1">'12'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setExpirationYear</span><span class="p">(</span><span class="s1">'2020'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCvv</span><span class="p">(</span><span class="s1">'834'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCustomerEmail</span><span class="p">(</span><span class="s1">'travis@example.com'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCustomerPhone</span><span class="p">(</span><span class="s1">'+1987987987987'</span><span class="p">)</span>


  <span class="c1">// Billing Address
</span>  <span class="o">-&gt;</span><span class="na">setBillingFirstName</span><span class="p">(</span><span class="s1">'Travis'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingLastName</span><span class="p">(</span><span class="s1">'Pastrana'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingAddress1</span><span class="p">(</span><span class="s1">'Muster Str. 12'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingZipCode</span><span class="p">(</span><span class="s1">'10178'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingCity</span><span class="p">(</span><span class="s1">'Los Angeles'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingState</span><span class="p">(</span><span class="s1">'CA'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingCountry</span><span class="p">(</span><span class="s1">'US'</span><span class="p">);</span>

<span class="k">try</span> <span class="p">{</span>
    <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">execute</span><span class="p">();</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">response</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">getResponseObject</span><span class="p">();</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">\Exception</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$e</span><span class="o">-&gt;</span><span class="na">getMessage</span><span class="p">();</span>
<span class="p">}</span>
</code></pre>

<pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.GenesisClient</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.TransactionResult</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.constants.Endpoints</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.constants.Environments</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.requests.nonfinancial.AccountVerificationRequest</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.model.Transaction</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Configuration</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Country</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Currency</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">GenesisExample</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">()</span>  <span class="o">{</span>

    <span class="c1">// Create configuration</span>
    <span class="n">Configuration</span> <span class="n">configuration</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Configuration</span><span class="o">(</span><span class="n">Environments</span><span class="o">.</span><span class="na">STAGING</span><span class="o">,</span> <span class="n">Endpoints</span><span class="o">.</span><span class="na">EMERCHANTPAY</span><span class="o">);</span>

    <span class="n">configuration</span><span class="o">.</span><span class="na">setUsername</span><span class="o">(</span><span class="s">"SET_YOUR_USERNAME"</span><span class="o">);</span>
    <span class="n">configuration</span><span class="o">.</span><span class="na">setPassword</span><span class="o">(</span><span class="s">"SET_YOUR_PASSWORD"</span><span class="o">);</span>
    <span class="n">configuration</span><span class="o">.</span><span class="na">setToken</span><span class="o">(</span><span class="s">"SET_YOUR_TOKEN"</span><span class="o">);</span>

    <span class="n">AccountVerificationRequest</span> <span class="n">request</span> <span class="o">=</span> <span class="k">new</span> <span class="n">AccountVerificationRequest</span><span class="o">();</span>

    <span class="n">request</span><span class="o">.</span><span class="na">setTransactionId</span><span class="o">(</span><span class="s">"43671"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setUsage</span><span class="o">(</span><span class="s">"40208 concert tickets"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setIssuerOctEnabled</span><span class="o">(</span><span class="s">"true"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setRemoteIp</span><span class="o">(</span><span class="s">"245.253.2.12"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCardHolder</span><span class="o">(</span><span class="s">"Travis Pastrana"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCardNumber</span><span class="o">(</span><span class="s">"4200000000000000"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setExpirationMonth</span><span class="o">(</span><span class="s">"12"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setExpirationYear</span><span class="o">(</span><span class="s">"2020"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCvv</span><span class="o">(</span><span class="s">"834"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCustomerEmail</span><span class="o">(</span><span class="s">"travis@example.com"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCustomerPhone</span><span class="o">(</span><span class="s">"+1987987987987"</span><span class="o">);</span>


    <span class="c1">// Billing Address</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingFirstname</span><span class="o">(</span><span class="s">"Travis"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingLastname</span><span class="o">(</span><span class="s">"Pastrana"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingPrimaryAddress</span><span class="o">(</span><span class="s">"Muster Str. 12"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingZipCode</span><span class="o">(</span><span class="s">"10178"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingCity</span><span class="o">(</span><span class="s">"Los Angeles"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingState</span><span class="o">(</span><span class="s">"CA"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingCountry</span><span class="o">(</span><span class="s">"US"</span><span class="o">);</span>

    <span class="n">GenesisClient</span> <span class="n">client</span> <span class="o">=</span> <span class="k">new</span> <span class="n">GenesisClient</span><span class="o">(</span><span class="n">configuration</span><span class="o">,</span> <span class="n">request</span><span class="o">);</span>
    <span class="n">client</span><span class="o">.</span><span class="na">execute</span><span class="o">();</span>

    <span class="c1">// Parse Payment result</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">client</span><span class="o">.</span><span class="na">getResponse</span><span class="o">());</span>

  <span class="o">}</span>
<span class="o">}</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="kd">var</span> <span class="nx">genesis</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'genesis.js/lib/genesis.js'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">transaction</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">genesis</span><span class="p">.</span><span class="nx">transaction</span><span class="p">();</span>

<span class="kd">var</span> <span class="nx">failure</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">reason</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">reason</span><span class="p">);</span>
<span class="p">};</span>

<span class="kd">var</span> <span class="nx">success</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>

<span class="nx">transaction</span><span class="p">.</span><span class="nx">account_verification</span><span class="p">(</span>
  <span class="p">{</span>
    <span class="s2">"transaction_id"</span><span class="p">:</span> <span class="s2">"43671"</span><span class="p">,</span>
    <span class="s2">"usage"</span><span class="p">:</span> <span class="s2">"40208 concert tickets"</span><span class="p">,</span>
    <span class="s2">"issuer_oct_enabled"</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="s2">"remote_ip"</span><span class="p">:</span> <span class="s2">"245.253.2.12"</span><span class="p">,</span>
    <span class="s2">"card_holder"</span><span class="p">:</span> <span class="s2">"Travis Pastrana"</span><span class="p">,</span>
    <span class="s2">"card_number"</span><span class="p">:</span> <span class="s2">"4200000000000000"</span><span class="p">,</span>
    <span class="s2">"expiration_month"</span><span class="p">:</span> <span class="s2">"12"</span><span class="p">,</span>
    <span class="s2">"expiration_year"</span><span class="p">:</span> <span class="mi">2020</span><span class="p">,</span>
    <span class="s2">"cvv"</span><span class="p">:</span> <span class="s2">"834"</span><span class="p">,</span>
    <span class="s2">"customer_email"</span><span class="p">:</span> <span class="s2">"travis@example.com"</span><span class="p">,</span>
    <span class="s2">"customer_phone"</span><span class="p">:</span> <span class="s2">"+1987987987987"</span><span class="p">,</span>
    <span class="s2">"billing_address"</span><span class="p">:</span> <span class="p">{</span>
      <span class="s2">"first_name"</span><span class="p">:</span> <span class="s2">"Travis"</span><span class="p">,</span>
      <span class="s2">"last_name"</span><span class="p">:</span> <span class="s2">"Pastrana"</span><span class="p">,</span>
      <span class="s2">"address1"</span><span class="p">:</span> <span class="s2">"Muster Str. 12"</span><span class="p">,</span>
      <span class="s2">"zip_code"</span><span class="p">:</span> <span class="s2">"10178"</span><span class="p">,</span>
      <span class="s2">"city"</span><span class="p">:</span> <span class="s2">"Los Angeles"</span><span class="p">,</span>
      <span class="s2">"state"</span><span class="p">:</span> <span class="s2">"CA"</span><span class="p">,</span>
      <span class="s2">"country"</span><span class="p">:</span> <span class="s2">"US"</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">).</span><span class="nx">send</span><span class="p">()</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">success</span><span class="p">)</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">failure</span><span class="p">);</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>curl https://username:password@gate.emerchantpay.net/process/TERMINAL-TOKEN <span class="se">\</span>
   -H <span class="s2">"Content-Type: text/xml"</span> <span class="se">\</span>
   -d <span class="s1">'
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;account_verification&lt;/transaction_type&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;usage&gt;40208 concert tickets&lt;/usage&gt;
  &lt;issuer_oct_enabled&gt;true&lt;/issuer_oct_enabled&gt;
  &lt;remote_ip&gt;245.253.2.12&lt;/remote_ip&gt;
  &lt;card_holder&gt;Travis Pastrana&lt;/card_holder&gt;
  &lt;card_number&gt;4200000000000000&lt;/card_number&gt;
  &lt;expiration_month&gt;12&lt;/expiration_month&gt;
  &lt;expiration_year&gt;2020&lt;/expiration_year&gt;
  &lt;cvv&gt;834&lt;/cvv&gt;
  &lt;customer_email&gt;travis@example.com&lt;/customer_email&gt;
  &lt;customer_phone&gt;+1987987987987&lt;/customer_phone&gt;
  &lt;billing_address&gt;
    &lt;first_name&gt;Travis&lt;/first_name&gt;
    &lt;last_name&gt;Pastrana&lt;/last_name&gt;
    &lt;address1&gt;Muster Str. 12&lt;/address1&gt;
    &lt;zip_code&gt;10178&lt;/zip_code&gt;
    &lt;city&gt;Los Angeles&lt;/city&gt;
    &lt;state&gt;CA&lt;/state&gt;
    &lt;country&gt;US&lt;/country&gt;
  &lt;/billing_address&gt;
&lt;/payment_transaction&gt;'</span>
</code></pre>

<p><strong>Request Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>required</td>
<td>string(255)</td>
<td>The transaction type: <strong>account_verification</strong></td>
</tr>
<tr>
<td>transaction_id</td>
<td>required</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>usage</td>
<td>optional</td>
<td>string(255)</td>
<td>Description of the transaction for later use</td>
</tr>
<tr>
<td>moto</td>
<td>optional</td>
<td>&quot;true&quot;</td>
<td>Signifies whether a MOTO (mail order telephone order) transaction is performed. Contact tech support for more details.</td>
</tr>
<tr>
<td>issuer_oct_enabled</td>
<td>optional</td>
<td>true</td>
<td>Supported only by Visa. When submitted, Visa checks if the given PAN supports OCTs at the issuer. When not submitted, it is interpreted as a normal account verification.</td>
</tr>
<tr>
<td>remote_ip</td>
<td>required*</td>
<td>IPv4 address</td>
<td>IPv4 address of customer</td>
</tr>
<tr>
<td>card_holder</td>
<td>required</td>
<td>string(255)</td>
<td>Full name of customer as printed on credit card (first name and last name at least)</td>
</tr>
<tr>
<td>card_number</td>
<td>required</td>
<td>13 to 16 digits</td>
<td>Complete cc number of customer</td>
</tr>
<tr>
<td>cvv</td>
<td>required*</td>
<td>3 to 4 digits</td>
<td>cvv of cc, requirement is based on terminal configuration</td>
</tr>
<tr>
<td>expiration_month</td>
<td>required</td>
<td>MM</td>
<td>Expiration month as printed on credit card</td>
</tr>
<tr>
<td>expiration_year</td>
<td>required</td>
<td>YYYY</td>
<td>Expiration year as printed on credit card</td>
</tr>
<tr>
<td>token</td>
<td>optional</td>
<td>string(36)</td>
<td>See <a href="#tokenization">Tokenization</a> for more details. If present, the cardholder parameters can be omitted. Cannot be set together with <code>remember_card</code></td>
</tr>
<tr>
<td>remember_card</td>
<td>optional</td>
<td>&quot;true&quot;</td>
<td>See <a href="#tokenize">Tokenize</a>. Tokenizes cardholder parameters. Cannot be set together with <code>token</code></td>
</tr>
<tr>
<td>consumer_id</td>
<td>optional</td>
<td>string(10)</td>
<td>See <a href="#consumers">Consumers</a> and <a href="#tokenization">Tokenization</a>. Combine with <code>remember_card</code> to tokenize or with <code>token</code> to use token</td>
</tr>
<tr>
<td><strong>credential_on_file</strong></td>
<td>required*</td>
<td></td>
<td>See <a href="#credential-on-file-cof" target="_self">Credential On File (COF)</a> for more details</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;initial_customer_initiated</td>
<td>required*</td>
<td>string(18)</td>
<td>Initial transaction initiated by customer. Required for external tokenization, and optional for gateway-based tokenization</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;subsequent_customer_initiated</td>
<td>required*</td>
<td>string(18)</td>
<td>Subsequent transaction initiated by customer. Required for external tokenization, and optional for gateway-based tokenization</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;merchant_unscheduled</td>
<td>optional</td>
<td>string(20)</td>
<td>Transaction is initiated by the merchant</td>
</tr>
<tr>
<td>customer_email</td>
<td>required*</td>
<td>e-mail address</td>
<td>Must contain valid e-mail of customer</td>
</tr>
<tr>
<td>customer_phone</td>
<td>required*</td>
<td>string(32)</td>
<td>Must contain valid phone number of customer</td>
</tr>
<tr>
<td>document_id</td>
<td>required*</td>
<td>sring(20)</td>
<td>Document ID of the consumer. See <a href="#document-id-parameter">Document ID Parameter</a> for more details.</td>
</tr>
<tr>
<td><strong>billing_address</strong></td>
<td>required</td>
<td></td>
<td>See <a href="#required-vs-optional-api-params">Required vs Optional API params</a> for details</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;first_name</td>
<td>required*</td>
<td>string(255)</td>
<td>Customer first name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;last_name</td>
<td>required*</td>
<td>string(255)</td>
<td>Customer last name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address1</td>
<td>required*</td>
<td>string(255)</td>
<td>Primary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address2</td>
<td>required*</td>
<td>string(255)</td>
<td>Secondary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;zip_code</td>
<td>required*</td>
<td>string</td>
<td>ZIP code</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;city</td>
<td>required*</td>
<td>string(255)</td>
<td>City</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;state</td>
<td>required*</td>
<td>string(2)</td>
<td>State code in <a href="https://en.wikipedia.org/wiki/ISO_3166-2">ISO 3166-2</a>, required for USA and Canada</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;country</td>
<td>required*</td>
<td>string(2)</td>
<td>Country code in <a href="https://www.iso.org/iso-3166-country-codes.html">ISO 3166</a></td>
</tr>
<tr>
<td><strong>shipping_address</strong></td>
<td>optional</td>
<td></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;first_name</td>
<td>optional</td>
<td>string(255)</td>
<td>Customer first name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;last_name</td>
<td>optional</td>
<td>string(255)</td>
<td>Customer last name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address1</td>
<td>optional</td>
<td>string(255)</td>
<td>Primary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address2</td>
<td>optional</td>
<td>string(255)</td>
<td>Secondary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;zip_code</td>
<td>optional</td>
<td>string</td>
<td>ZIP code</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;city</td>
<td>optional</td>
<td>string(255)</td>
<td>City</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;state</td>
<td>optional</td>
<td>string(2)</td>
<td>State code in <a href="https://en.wikipedia.org/wiki/ISO_3166-2">ISO 3166-2</a>, required for USA and Canada</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;country</td>
<td>optional</td>
<td>string(2)</td>
<td>Country code in <a href="https://www.iso.org/iso-3166-country-codes.html">ISO 3166</a></td>
</tr>
</tbody></table>

<p><code>required* = conditionally required</code></p>

<blockquote>
<p>Successful Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>stdClass Object
(
    [transaction_type] =&gt; account_verification
    [status] =&gt; approved
    [mode] =&gt; live
    [transaction_id] =&gt; 43671
    [unique_id] =&gt; 44177a21403427eb96664a6d7e5d5d48
    [consumer_id] =&gt; 123456
    [token] =&gt; ee946db8-d7db-4bb7-b608-b65b153e127d
    [avs_response_code] =&gt; 5I
    [avs_response_text] =&gt; Response provided by issuer processor; Address information not verified
    [authorization_code] =&gt; 345678
    [response_code] =&gt; 00
    [technical_message] =&gt; Transaction successful!
    [message] =&gt; Transaction successful!
    [timestamp] =&gt; DateTime Object
        (
            [date] =&gt; 2019-03-14 12:05:55.000000
            [timezone_type] =&gt; 2
            [timezone] =&gt; Z
        )
    [descriptor] =&gt; Descriptor one
    [sent_to_acquirer] =&gt; true
)
</code></pre>

<pre class="highlight java tab-java"><code><span class="o">&lt;</span><span class="n">payment_response</span> <span class="n">content</span><span class="o">=[</span>
    <span class="o">&lt;</span><span class="n">transaction_type</span> <span class="n">content</span><span class="o">=[</span><span class="n">account_verification</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">status</span> <span class="n">content</span><span class="o">=[</span><span class="n">approved</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">mode</span> <span class="n">content</span><span class="o">=[</span><span class="n">live</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">transaction_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">43671</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">unique_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">44177</span><span class="n">a21403427eb96664a6d7e5d5d48</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">consumer_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">123456</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">token</span> <span class="n">content</span><span class="o">=[</span><span class="n">ee946db8</span><span class="o">-</span><span class="n">d7db</span><span class="o">-</span><span class="mi">4</span><span class="n">bb7</span><span class="o">-</span><span class="n">b608</span><span class="o">-</span><span class="n">b65b153e127d</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">avs_response_code</span> <span class="n">content</span><span class="o">=[</span><span class="mi">5</span><span class="n">I</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">avs_response_text</span> <span class="n">content</span><span class="o">=[</span><span class="n">Response</span> <span class="n">provided</span> <span class="n">by</span> <span class="n">issuer</span> <span class="n">processor</span><span class="o">;</span> <span class="n">Address</span> <span class="n">information</span> <span class="n">not</span> <span class="n">verified</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">authorization_code</span> <span class="n">content</span><span class="o">=[</span><span class="mi">345678</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">response_code</span> <span class="n">content</span><span class="o">=[</span><span class="mo">00</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">technical_message</span> <span class="n">content</span><span class="o">=[</span><span class="n">Transaction</span> <span class="n">successful</span><span class="o">!]&gt;</span>
    <span class="o">&lt;</span><span class="n">message</span> <span class="n">content</span><span class="o">=[</span><span class="n">Transaction</span> <span class="n">successful</span><span class="o">!]&gt;</span>
    <span class="o">&lt;</span><span class="n">timestamp</span> <span class="n">content</span><span class="o">=[</span><span class="mi">2019</span><span class="o">-</span><span class="mo">03</span><span class="o">-</span><span class="mi">14</span><span class="nl">T12:</span><span class="mo">05</span><span class="o">:</span><span class="mi">55</span><span class="n">Z</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">descriptor</span> <span class="n">content</span><span class="o">=[</span><span class="n">Descriptor</span> <span class="n">one</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">sent_to_acquirer</span> <span class="n">content</span><span class="o">=[</span><span class="kc">true</span><span class="o">]&gt;</span>
<span class="o">]&gt;</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="p">{</span>
    <span class="nl">transaction_type</span><span class="p">:</span> <span class="s2">"account_verification"</span><span class="p">,</span>
    <span class="nx">status</span><span class="p">:</span> <span class="s2">"approved"</span><span class="p">,</span>
    <span class="nx">mode</span><span class="p">:</span> <span class="s2">"live"</span><span class="p">,</span>
    <span class="nx">transaction_id</span><span class="p">:</span> <span class="s2">"43671"</span><span class="p">,</span>
    <span class="nx">unique_id</span><span class="p">:</span> <span class="s2">"44177a21403427eb96664a6d7e5d5d48"</span><span class="p">,</span>
    <span class="nx">consumer_id</span><span class="p">:</span> <span class="s2">"123456"</span><span class="p">,</span>
    <span class="nx">token</span><span class="p">:</span> <span class="s2">"ee946db8-d7db-4bb7-b608-b65b153e127d"</span><span class="p">,</span>
    <span class="nx">avs_response_code</span><span class="p">:</span> <span class="s2">"5I"</span><span class="p">,</span>
    <span class="nx">avs_response_text</span><span class="p">:</span> <span class="s2">"Response provided by issuer processor; Address information not verified"</span><span class="p">,</span>
    <span class="nx">authorization_code</span><span class="p">:</span> <span class="s2">"345678"</span><span class="p">,</span>
    <span class="nx">response_code</span><span class="p">:</span> <span class="s2">"00"</span><span class="p">,</span>
    <span class="nx">technical_message</span><span class="p">:</span> <span class="s2">"Transaction successful!"</span><span class="p">,</span>
    <span class="nx">message</span><span class="p">:</span> <span class="s2">"Transaction successful!"</span><span class="p">,</span>
    <span class="nx">timestamp</span><span class="p">:</span> <span class="s2">"2019-03-14T12:05:55Z"</span><span class="p">,</span>
    <span class="nx">descriptor</span><span class="p">:</span> <span class="s2">"Descriptor one"</span><span class="p">,</span>
    <span class="nx">sent_to_acquirer</span><span class="p">:</span> <span class="s2">"true"</span><span class="p">,</span>
<span class="p">}</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;account_verification&lt;/transaction_type&gt;
  &lt;status&gt;approved&lt;/status&gt;
  &lt;mode&gt;live&lt;/mode&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;consumer_id&gt;123456&lt;/consumer_id&gt;
  &lt;token&gt;ee946db8-d7db-4bb7-b608-b65b153e127d&lt;/token&gt;
  &lt;avs_response_code&gt;5I&lt;/avs_response_code&gt;
  &lt;avs_response_text&gt;Response provided by issuer processor; Address information not verified&lt;/avs_response_text&gt;
  &lt;authorization_code&gt;345678&lt;/authorization_code&gt;
  &lt;response_code&gt;00&lt;/response_code&gt;
  &lt;technical_message&gt;Transaction successful!&lt;/technical_message&gt;
  &lt;message&gt;Transaction successful!&lt;/message&gt;
  &lt;timestamp&gt;2019-03-14T12:05:55Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;sent_to_acquirer&gt;true&lt;/sent_to_acquirer&gt;
&lt;/payment_transaction&gt;
</code></pre>

<blockquote>
<p>Successful Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>stdClass Object
(
    [transaction_type] =&gt; account_verification
    [status] =&gt; approved
    [issuer_oct_enabled] =&gt; true
    [mode] =&gt; live
    [transaction_id] =&gt; 43671
    [unique_id] =&gt; 44177a21403427eb96664a6d7e5d5d48
    [consumer_id] =&gt; 123456
    [token] =&gt; ee946db8-d7db-4bb7-b608-b65b153e127d
    [avs_response_code] =&gt; 5I
    [avs_response_text] =&gt; Response provided by issuer processor; Address information not verified
    [authorization_code] =&gt; 345678
    [response_code] =&gt; 00
    [technical_message] =&gt; Transaction successful!
    [message] =&gt; Transaction successful!
    [timestamp] =&gt; DateTime Object
        (
            [date] =&gt; 2019-03-14 12:05:55.000000
            [timezone_type] =&gt; 2
            [timezone] =&gt; Z
        )
    [descriptor] =&gt; Descriptor one
    [sent_to_acquirer] =&gt; true
)
</code></pre>

<pre class="highlight java tab-java"><code><span class="o">&lt;</span><span class="n">payment_response</span> <span class="n">content</span><span class="o">=[</span>
    <span class="o">&lt;</span><span class="n">transaction_type</span> <span class="n">content</span><span class="o">=[</span><span class="n">account_verification</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">status</span> <span class="n">content</span><span class="o">=[</span><span class="n">approved</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">issuer_oct_enabled</span> <span class="n">content</span><span class="o">=[</span><span class="kc">true</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">mode</span> <span class="n">content</span><span class="o">=[</span><span class="n">live</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">transaction_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">43671</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">unique_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">44177</span><span class="n">a21403427eb96664a6d7e5d5d48</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">consumer_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">123456</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">token</span> <span class="n">content</span><span class="o">=[</span><span class="n">ee946db8</span><span class="o">-</span><span class="n">d7db</span><span class="o">-</span><span class="mi">4</span><span class="n">bb7</span><span class="o">-</span><span class="n">b608</span><span class="o">-</span><span class="n">b65b153e127d</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">avs_response_code</span> <span class="n">content</span><span class="o">=[</span><span class="mi">5</span><span class="n">I</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">avs_response_text</span> <span class="n">content</span><span class="o">=[</span><span class="n">Response</span> <span class="n">provided</span> <span class="n">by</span> <span class="n">issuer</span> <span class="n">processor</span><span class="o">;</span> <span class="n">Address</span> <span class="n">information</span> <span class="n">not</span> <span class="n">verified</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">authorization_code</span> <span class="n">content</span><span class="o">=[</span><span class="mi">345678</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">response_code</span> <span class="n">content</span><span class="o">=[</span><span class="mo">00</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">technical_message</span> <span class="n">content</span><span class="o">=[</span><span class="n">Transaction</span> <span class="n">successful</span><span class="o">!]&gt;</span>
    <span class="o">&lt;</span><span class="n">message</span> <span class="n">content</span><span class="o">=[</span><span class="n">Transaction</span> <span class="n">successful</span><span class="o">!]&gt;</span>
    <span class="o">&lt;</span><span class="n">timestamp</span> <span class="n">content</span><span class="o">=[</span><span class="mi">2019</span><span class="o">-</span><span class="mo">03</span><span class="o">-</span><span class="mi">14</span><span class="nl">T12:</span><span class="mo">05</span><span class="o">:</span><span class="mi">55</span><span class="n">Z</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">descriptor</span> <span class="n">content</span><span class="o">=[</span><span class="n">Descriptor</span> <span class="n">one</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">sent_to_acquirer</span> <span class="n">content</span><span class="o">=[</span><span class="kc">true</span><span class="o">]&gt;</span>
<span class="o">]&gt;</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="p">{</span>
    <span class="nl">transaction_type</span><span class="p">:</span> <span class="s2">"account_verification"</span><span class="p">,</span>
    <span class="nx">status</span><span class="p">:</span> <span class="s2">"approved"</span><span class="p">,</span>
    <span class="nx">issuer_oct_enabled</span><span class="p">:</span> <span class="s2">"true"</span><span class="p">,</span>
    <span class="nx">mode</span><span class="p">:</span> <span class="s2">"live"</span><span class="p">,</span>
    <span class="nx">transaction_id</span><span class="p">:</span> <span class="s2">"43671"</span><span class="p">,</span>
    <span class="nx">unique_id</span><span class="p">:</span> <span class="s2">"44177a21403427eb96664a6d7e5d5d48"</span><span class="p">,</span>
    <span class="nx">consumer_id</span><span class="p">:</span> <span class="s2">"123456"</span><span class="p">,</span>
    <span class="nx">token</span><span class="p">:</span> <span class="s2">"ee946db8-d7db-4bb7-b608-b65b153e127d"</span><span class="p">,</span>
    <span class="nx">avs_response_code</span><span class="p">:</span> <span class="s2">"5I"</span><span class="p">,</span>
    <span class="nx">avs_response_text</span><span class="p">:</span> <span class="s2">"Response provided by issuer processor; Address information not verified"</span><span class="p">,</span>
    <span class="nx">authorization_code</span><span class="p">:</span> <span class="s2">"345678"</span><span class="p">,</span>
    <span class="nx">response_code</span><span class="p">:</span> <span class="s2">"00"</span><span class="p">,</span>
    <span class="nx">technical_message</span><span class="p">:</span> <span class="s2">"Transaction successful!"</span><span class="p">,</span>
    <span class="nx">message</span><span class="p">:</span> <span class="s2">"Transaction successful!"</span><span class="p">,</span>
    <span class="nx">timestamp</span><span class="p">:</span> <span class="s2">"2019-03-14T12:05:55Z"</span><span class="p">,</span>
    <span class="nx">descriptor</span><span class="p">:</span> <span class="s2">"Descriptor one"</span><span class="p">,</span>
    <span class="nx">sent_to_acquirer</span><span class="p">:</span> <span class="s2">"true"</span><span class="p">,</span>
<span class="p">}</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;account_verification&lt;/transaction_type&gt;
  &lt;status&gt;approved&lt;/status&gt;
  &lt;issuer_oct_enabled&gt;true&lt;/issuer_oct_enabled&gt;
  &lt;mode&gt;live&lt;/mode&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;consumer_id&gt;123456&lt;/consumer_id&gt;
  &lt;token&gt;ee946db8-d7db-4bb7-b608-b65b153e127d&lt;/token&gt;
  &lt;avs_response_code&gt;5I&lt;/avs_response_code&gt;
  &lt;avs_response_text&gt;Response provided by issuer processor; Address information not verified&lt;/avs_response_text&gt;
  &lt;authorization_code&gt;345678&lt;/authorization_code&gt;
  &lt;response_code&gt;00&lt;/response_code&gt;
  &lt;technical_message&gt;Transaction successful!&lt;/technical_message&gt;
  &lt;message&gt;Transaction successful!&lt;/message&gt;
  &lt;timestamp&gt;2019-03-14T12:05:55Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;sent_to_acquirer&gt;true&lt;/sent_to_acquirer&gt;
&lt;/payment_transaction&gt;
</code></pre>

<blockquote>
<p>Successful Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>stdClass Object
(
    [transaction_type] =&gt; account_verification
    [status] =&gt; declined
    [issuer_oct_enabled] =&gt; false
    [mode] =&gt; live
    [transaction_id] =&gt; 43671
    [unique_id] =&gt; 44177a21403427eb96664a6d7e5d5d48
    [consumer_id] =&gt; 123456
    [token] =&gt; ee946db8-d7db-4bb7-b608-b65b153e127d
    [avs_response_code] =&gt; 5I
    [avs_response_text] =&gt; Response provided by issuer processor; Address information not verified
    [authorization_code] =&gt; 345678
    [response_code] =&gt; 00
    [technical_message] =&gt; Transaction successful!
    [message] =&gt; Transaction successful!
    [timestamp] =&gt; DateTime Object
        (
            [date] =&gt; 2019-03-14 12:05:55.000000
            [timezone_type] =&gt; 2
            [timezone] =&gt; Z
        )
    [descriptor] =&gt; Descriptor one
    [sent_to_acquirer] =&gt; true
)
</code></pre>

<pre class="highlight java tab-java"><code><span class="o">&lt;</span><span class="n">payment_response</span> <span class="n">content</span><span class="o">=[</span>
    <span class="o">&lt;</span><span class="n">transaction_type</span> <span class="n">content</span><span class="o">=[</span><span class="n">account_verification</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">status</span> <span class="n">content</span><span class="o">=[</span><span class="n">declined</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">issuer_oct_enabled</span> <span class="n">content</span><span class="o">=[</span><span class="kc">false</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">mode</span> <span class="n">content</span><span class="o">=[</span><span class="n">live</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">transaction_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">43671</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">unique_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">44177</span><span class="n">a21403427eb96664a6d7e5d5d48</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">consumer_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">123456</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">token</span> <span class="n">content</span><span class="o">=[</span><span class="n">ee946db8</span><span class="o">-</span><span class="n">d7db</span><span class="o">-</span><span class="mi">4</span><span class="n">bb7</span><span class="o">-</span><span class="n">b608</span><span class="o">-</span><span class="n">b65b153e127d</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">avs_response_code</span> <span class="n">content</span><span class="o">=[</span><span class="mi">5</span><span class="n">I</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">avs_response_text</span> <span class="n">content</span><span class="o">=[</span><span class="n">Response</span> <span class="n">provided</span> <span class="n">by</span> <span class="n">issuer</span> <span class="n">processor</span><span class="o">;</span> <span class="n">Address</span> <span class="n">information</span> <span class="n">not</span> <span class="n">verified</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">authorization_code</span> <span class="n">content</span><span class="o">=[</span><span class="mi">345678</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">response_code</span> <span class="n">content</span><span class="o">=[</span><span class="mo">00</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">technical_message</span> <span class="n">content</span><span class="o">=[</span><span class="n">Transaction</span> <span class="n">successful</span><span class="o">!]&gt;</span>
    <span class="o">&lt;</span><span class="n">message</span> <span class="n">content</span><span class="o">=[</span><span class="n">Transaction</span> <span class="n">successful</span><span class="o">!]&gt;</span>
    <span class="o">&lt;</span><span class="n">timestamp</span> <span class="n">content</span><span class="o">=[</span><span class="mi">2019</span><span class="o">-</span><span class="mo">03</span><span class="o">-</span><span class="mi">14</span><span class="nl">T12:</span><span class="mo">05</span><span class="o">:</span><span class="mi">55</span><span class="n">Z</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">descriptor</span> <span class="n">content</span><span class="o">=[</span><span class="n">Descriptor</span> <span class="n">one</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">sent_to_acquirer</span> <span class="n">content</span><span class="o">=[</span><span class="kc">true</span><span class="o">]&gt;</span>
<span class="o">]&gt;</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="p">{</span>
    <span class="nl">transaction_type</span><span class="p">:</span> <span class="s2">"account_verification"</span><span class="p">,</span>
    <span class="nx">status</span><span class="p">:</span> <span class="s2">"declined"</span><span class="p">,</span>
    <span class="nx">issuer_oct_enabled</span><span class="p">:</span> <span class="s2">"false"</span><span class="p">,</span>
    <span class="nx">mode</span><span class="p">:</span> <span class="s2">"live"</span><span class="p">,</span>
    <span class="nx">transaction_id</span><span class="p">:</span> <span class="s2">"43671"</span><span class="p">,</span>
    <span class="nx">unique_id</span><span class="p">:</span> <span class="s2">"44177a21403427eb96664a6d7e5d5d48"</span><span class="p">,</span>
    <span class="nx">consumer_id</span><span class="p">:</span> <span class="s2">"123456"</span><span class="p">,</span>
    <span class="nx">token</span><span class="p">:</span> <span class="s2">"ee946db8-d7db-4bb7-b608-b65b153e127d"</span><span class="p">,</span>
    <span class="nx">avs_response_code</span><span class="p">:</span> <span class="s2">"5I"</span><span class="p">,</span>
    <span class="nx">avs_response_text</span><span class="p">:</span> <span class="s2">"Response provided by issuer processor; Address information not verified"</span><span class="p">,</span>
    <span class="nx">authorization_code</span><span class="p">:</span> <span class="s2">"345678"</span><span class="p">,</span>
    <span class="nx">response_code</span><span class="p">:</span> <span class="s2">"00"</span><span class="p">,</span>
    <span class="nx">technical_message</span><span class="p">:</span> <span class="s2">"Transaction successful!"</span><span class="p">,</span>
    <span class="nx">message</span><span class="p">:</span> <span class="s2">"Transaction successful!"</span><span class="p">,</span>
    <span class="nx">timestamp</span><span class="p">:</span> <span class="s2">"2019-03-14T12:05:55Z"</span><span class="p">,</span>
    <span class="nx">descriptor</span><span class="p">:</span> <span class="s2">"Descriptor one"</span><span class="p">,</span>
    <span class="nx">sent_to_acquirer</span><span class="p">:</span> <span class="s2">"true"</span><span class="p">,</span>
<span class="p">}</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;account_verification&lt;/transaction_type&gt;
  &lt;status&gt;declined&lt;/status&gt;
  &lt;issuer_oct_enabled&gt;false&lt;/issuer_oct_enabled&gt;
  &lt;mode&gt;live&lt;/mode&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;consumer_id&gt;123456&lt;/consumer_id&gt;
  &lt;token&gt;ee946db8-d7db-4bb7-b608-b65b153e127d&lt;/token&gt;
  &lt;avs_response_code&gt;5I&lt;/avs_response_code&gt;
  &lt;avs_response_text&gt;Response provided by issuer processor; Address information not verified&lt;/avs_response_text&gt;
  &lt;authorization_code&gt;345678&lt;/authorization_code&gt;
  &lt;response_code&gt;00&lt;/response_code&gt;
  &lt;technical_message&gt;Transaction successful!&lt;/technical_message&gt;
  &lt;message&gt;Transaction successful!&lt;/message&gt;
  &lt;timestamp&gt;2019-03-14T12:05:55Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;sent_to_acquirer&gt;true&lt;/sent_to_acquirer&gt;
&lt;/payment_transaction&gt;
</code></pre>

<p><strong>Successful Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>The transaction type</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>transaction_id</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>unique_id</td>
<td>string(32)</td>
<td>Unique id defined by gate (must later be used if capturing, voiding or refunding a transaction)</td>
</tr>
<tr>
<td>consumer_id</td>
<td>string(10)</td>
<td>Consumer unique reference. See <a href="#consumers">Consumers</a></td>
</tr>
<tr>
<td>token</td>
<td>string(36)</td>
<td>Plain-text token value. See <a href="#tokenization">Tokenization</a></td>
</tr>
<tr>
<td>moto</td>
<td>string</td>
<td>Signifies whether a MOTO (mail order telephone order) transaction is performed. Contact tech support for more details.</td>
</tr>
<tr>
<td>issuer_oct_enabled</td>
<td>string</td>
<td>Present only if merchant has submitted issuer oct enabled flag in the request to check if issuer supports OCTs for the given PAN. True if the issuer supports OCTs for this PAN, false otherwise.</td>
</tr>
<tr>
<td>avs_response_code</td>
<td>string</td>
<td>Generated by the card network on trying to match the billing address when performing the address verification. Optional, returned if config is enabled and acquirer supports it. Check <a href="#avs-status-codes">AVS Status Codes</a> for details.</td>
</tr>
<tr>
<td>avs_response_text</td>
<td>string</td>
<td>Gives the human response text for the AVS response code above. Optional, returned if config is enabled and acquirer supports it. Check [AVS Status Codes](#avs-status-codes for details.</td>
</tr>
<tr>
<td>authorization_code</td>
<td>string(6)</td>
<td>Generated by the card network when an authorisation has occurred, used to identify that auth. Consists of 6 alphanumeric chars</td>
</tr>
<tr>
<td>response_code</td>
<td>string(2)</td>
<td>Defines the issuer result of a transaction, the status of a message or some action taken or required. See <a href="#issuer-response-codes">issuer response codes</a> for details</td>
</tr>
<tr>
<td>code</td>
<td>integer</td>
<td>Error code according to <a href="#error-code-table">Error code table</a></td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
<tr>
<td>message</td>
<td>string(255)</td>
<td>Human readable error message which can be displayed to users.</td>
</tr>
<tr>
<td>redirect_url</td>
<td>url</td>
<td>URL where user has to be redirected to complete payment process. It is available for asynchronous mode</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when the transaction was processed in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Combined date and time</a> e.g. 2007-08- 30T17:46:11Z</td>
</tr>
<tr>
<td>descriptor</td>
<td>string</td>
<td>Static descriptor MID info as configured on the gateway</td>
</tr>
<tr>
<td>sent_to_acquirer</td>
<td>string</td>
<td>&quot;true&quot; or &quot;false&quot;</td>
</tr>
</tbody></table>

<blockquote>
<p>Error Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>stdClass Object
(
    [transaction_type] =&gt; account_verification
    [status] =&gt; error
    [mode] =&gt; live
    [transaction_id] =&gt; 43671
    [unique_id] =&gt; 44177a21403427eb96664a6d7e5d5d48
    [code] =&gt; 340
    [technical_message] =&gt; expiration_year is invalid
    [message] =&gt; expiration_year is invalid
    [timestamp] =&gt; DateTime Object
        (
            [date] =&gt; 2019-03-14 12:05:56.000000
            [timezone_type] =&gt; 2
            [timezone] =&gt; Z
        )
    [descriptor] =&gt; Descriptor one
    [sent_to_acquirer] =&gt; false
)
</code></pre>

<pre class="highlight java tab-java"><code><span class="o">&lt;</span><span class="n">payment_response</span> <span class="n">content</span><span class="o">=[</span>
    <span class="o">&lt;</span><span class="n">transaction_type</span> <span class="n">content</span><span class="o">=[</span><span class="n">account_verification</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">status</span> <span class="n">content</span><span class="o">=[</span><span class="n">error</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">mode</span> <span class="n">content</span><span class="o">=[</span><span class="n">live</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">transaction_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">43671</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">unique_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">44177</span><span class="n">a21403427eb96664a6d7e5d5d48</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">code</span> <span class="n">content</span><span class="o">=[</span><span class="mi">340</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">technical_message</span> <span class="n">content</span><span class="o">=[</span><span class="n">expiration_year</span> <span class="n">is</span> <span class="n">invalid</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">message</span> <span class="n">content</span><span class="o">=[</span><span class="n">expiration_year</span> <span class="n">is</span> <span class="n">invalid</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">timestamp</span> <span class="n">content</span><span class="o">=[</span><span class="mi">2019</span><span class="o">-</span><span class="mo">03</span><span class="o">-</span><span class="mi">14</span><span class="nl">T12:</span><span class="mo">05</span><span class="o">:</span><span class="mi">56</span><span class="n">Z</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">descriptor</span> <span class="n">content</span><span class="o">=[</span><span class="n">Descriptor</span> <span class="n">one</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">sent_to_acquirer</span> <span class="n">content</span><span class="o">=[</span><span class="kc">false</span><span class="o">]&gt;</span>
<span class="o">]&gt;</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="p">{</span>
    <span class="nl">transaction_type</span><span class="p">:</span> <span class="s2">"account_verification"</span><span class="p">,</span>
    <span class="nx">status</span><span class="p">:</span> <span class="s2">"error"</span><span class="p">,</span>
    <span class="nx">mode</span><span class="p">:</span> <span class="s2">"live"</span><span class="p">,</span>
    <span class="nx">transaction_id</span><span class="p">:</span> <span class="s2">"43671"</span><span class="p">,</span>
    <span class="nx">unique_id</span><span class="p">:</span> <span class="s2">"44177a21403427eb96664a6d7e5d5d48"</span><span class="p">,</span>
    <span class="nx">code</span><span class="p">:</span> <span class="s2">"340"</span><span class="p">,</span>
    <span class="nx">technical_message</span><span class="p">:</span> <span class="s2">"expiration_year is invalid"</span><span class="p">,</span>
    <span class="nx">message</span><span class="p">:</span> <span class="s2">"expiration_year is invalid"</span><span class="p">,</span>
    <span class="nx">timestamp</span><span class="p">:</span> <span class="s2">"2019-03-14T12:05:56Z"</span><span class="p">,</span>
    <span class="nx">descriptor</span><span class="p">:</span> <span class="s2">"Descriptor one"</span><span class="p">,</span>
    <span class="nx">sent_to_acquirer</span><span class="p">:</span> <span class="s2">"false"</span><span class="p">,</span>
<span class="p">}</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;account_verification&lt;/transaction_type&gt;
  &lt;status&gt;error&lt;/status&gt;
  &lt;mode&gt;live&lt;/mode&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;code&gt;340&lt;/code&gt;
  &lt;technical_message&gt;expiration_year is invalid&lt;/technical_message&gt;
  &lt;message&gt;expiration_year is invalid&lt;/message&gt;
  &lt;timestamp&gt;2019-03-14T12:05:56Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;sent_to_acquirer&gt;false&lt;/sent_to_acquirer&gt;
&lt;/payment_transaction&gt;
</code></pre>

<p><strong>Error Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>The transaction type</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>transaction_id</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>unique_id</td>
<td>string(32)</td>
<td>Unique id defined by gate (must later be used if capturing, voiding or refunding a transaction)</td>
</tr>
<tr>
<td>gaming</td>
<td>string</td>
<td>Signifies whether a gaming transaction is performed. Gaming transactions usually use MCC 7995, contact tech support for more details.</td>
</tr>
<tr>
<td>moto</td>
<td>string</td>
<td>Signifies whether a MOTO (mail order telephone order) transaction is performed. Contact tech support for more details.</td>
</tr>
<tr>
<td>code</td>
<td>integer</td>
<td>Error code according to <a href="#error-code-table">Error code table</a></td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
<tr>
<td>message</td>
<td>string(255)</td>
<td>Human readable error message which can be displayed to users.</td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when the transaction was processed in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Combined date and time</a> e.g. 2007-08- 30T17:46:11Z</td>
</tr>
<tr>
<td>descriptor</td>
<td>string</td>
<td>Static descriptor MID info as configured on the gateway</td>
</tr>
<tr>
<td>dynamic_descriptor_params</td>
<td>section</td>
<td>Optional, returned only if dynamic desc params are submitted on the API. Note here that the formatted dyn desc params are returned - as they would be submitted to the schemes for settlement.</td>
</tr>
</tbody></table>
<h2 id='3ds-card'>3DS Card</h2><h3 id='authorize-3d'>Authorize 3D</h3>
<p>Authorize3D transactions basically have the same request as standard <a href="#authorize">authorize</a> transactions.</p>

<aside class="notice" >
Authorize3D transactions can be handled synchronous or asynchronous depending on the pa- rameters passed. If mpi params is passed the workflow will be synchronous. If notification url, return success url and return failure url are passed the workflow will be asynchronous.
</aside>

<aside class="notice" >
To settle Authorize3D transactions, normal capture transactions are used. As the 3-D secure process already took place, there is no need to do the verification again when capturing.
</aside>

<aside class="notice">
This transaction type supports <a href="#tokenization" target="_self">Tokenization</a>.
</aside>

<aside class="notice">
This transaction type supports <a href="#level-3-travel-data" target="_self">Level 3 travel data</a>.
</aside>

<aside class="notice">
This transaction type supports <a href="#partial-approvals" target="_self">Partial Approvals</a>.
</aside>

<blockquote>
<p>Synchronous  Request</p>
</blockquote>

<pre class="highlight php tab-php"><code><span class="cp">&lt;?php</span>

<span class="c1">// Load the pre-configured ini file...
</span><span class="nx">\Genesis\Config</span><span class="o">::</span><span class="na">loadSettings</span><span class="p">(</span><span class="s1">'/path/to/config.ini'</span><span class="p">);</span>

<span class="nv">$genesis</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Genesis</span><span class="p">(</span><span class="s1">'Financial\Cards\Authorize3D'</span><span class="p">);</span>
<span class="nv">$request</span> <span class="o">=</span> <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">request</span><span class="p">();</span>

<span class="nv">$request</span>
  <span class="o">-&gt;</span><span class="na">setTransactionId</span><span class="p">(</span><span class="s1">'43671'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setUsage</span><span class="p">(</span><span class="s1">'40208 concert tickets'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setRemoteIp</span><span class="p">(</span><span class="s1">'245.253.2.12'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setAmount</span><span class="p">(</span><span class="s1">'100'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCurrency</span><span class="p">(</span><span class="s1">'USD'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCardHolder</span><span class="p">(</span><span class="s1">'Travis Pastrana'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCardNumber</span><span class="p">(</span><span class="s1">'4200000000000000'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setExpirationMonth</span><span class="p">(</span><span class="s1">'12'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setExpirationYear</span><span class="p">(</span><span class="s1">'2020'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCvv</span><span class="p">(</span><span class="s1">'834'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCustomerEmail</span><span class="p">(</span><span class="s1">'travis@example.com'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCustomerPhone</span><span class="p">(</span><span class="s1">'+1987987987987'</span><span class="p">)</span>


  <span class="c1">// Billing Address
</span>  <span class="o">-&gt;</span><span class="na">setBillingFirstName</span><span class="p">(</span><span class="s1">'Travis'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingLastName</span><span class="p">(</span><span class="s1">'Pastrana'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingAddress1</span><span class="p">(</span><span class="s1">'Muster Str. 12'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingZipCode</span><span class="p">(</span><span class="s1">'10178'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingCity</span><span class="p">(</span><span class="s1">'Los Angeles'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingState</span><span class="p">(</span><span class="s1">'CA'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingCountry</span><span class="p">(</span><span class="s1">'US'</span><span class="p">)</span>


  <span class="c1">// MPI Synchronous
</span>  <span class="o">-&gt;</span><span class="na">setCavv</span><span class="p">(</span><span class="s1">'AAACA1BHADYJkIASQkcAAAAAAAA='</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setEci</span><span class="p">(</span><span class="s1">'05'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setXid</span><span class="p">(</span><span class="s1">'0pv62FIrT5qQODB7DCewKgEBAQI='</span><span class="p">);</span>

<span class="k">try</span> <span class="p">{</span>
    <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">execute</span><span class="p">();</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">response</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">getResponseObject</span><span class="p">();</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">\Exception</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$e</span><span class="o">-&gt;</span><span class="na">getMessage</span><span class="p">();</span>
<span class="p">}</span>
</code></pre>

<pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.GenesisClient</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.TransactionResult</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.constants.Endpoints</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.constants.Environments</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.requests.financial.card.Authorize3DRequest</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.model.Transaction</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Configuration</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Country</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Currency</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.math.BigDecimal</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">GenesisExample</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">()</span>  <span class="o">{</span>

    <span class="c1">// Create configuration</span>
    <span class="n">Configuration</span> <span class="n">configuration</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Configuration</span><span class="o">(</span><span class="n">Environments</span><span class="o">.</span><span class="na">STAGING</span><span class="o">,</span> <span class="n">Endpoints</span><span class="o">.</span><span class="na">EMERCHANTPAY</span><span class="o">);</span>

    <span class="n">configuration</span><span class="o">.</span><span class="na">setUsername</span><span class="o">(</span><span class="s">"SET_YOUR_USERNAME"</span><span class="o">);</span>
    <span class="n">configuration</span><span class="o">.</span><span class="na">setPassword</span><span class="o">(</span><span class="s">"SET_YOUR_PASSWORD"</span><span class="o">);</span>
    <span class="n">configuration</span><span class="o">.</span><span class="na">setToken</span><span class="o">(</span><span class="s">"SET_YOUR_TOKEN"</span><span class="o">);</span>

    <span class="n">Authorize3DRequest</span> <span class="n">request</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Authorize3DRequest</span><span class="o">();</span>

    <span class="n">request</span><span class="o">.</span><span class="na">setTransactionId</span><span class="o">(</span><span class="s">"43671"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setUsage</span><span class="o">(</span><span class="s">"40208 concert tickets"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setRemoteIp</span><span class="o">(</span><span class="s">"245.253.2.12"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setAmount</span><span class="o">(</span><span class="k">new</span> <span class="n">BigDecimal</span><span class="o">(</span><span class="mi">100</span><span class="o">));</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCurrency</span><span class="o">(</span><span class="s">"USD"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCardHolder</span><span class="o">(</span><span class="s">"Travis Pastrana"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCardNumber</span><span class="o">(</span><span class="s">"4200000000000000"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setExpirationMonth</span><span class="o">(</span><span class="s">"12"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setExpirationYear</span><span class="o">(</span><span class="s">"2020"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCvv</span><span class="o">(</span><span class="s">"834"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCustomerEmail</span><span class="o">(</span><span class="s">"travis@example.com"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCustomerPhone</span><span class="o">(</span><span class="s">"+1987987987987"</span><span class="o">);</span>


    <span class="c1">// Billing Address</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingFirstname</span><span class="o">(</span><span class="s">"Travis"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingLastname</span><span class="o">(</span><span class="s">"Pastrana"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingPrimaryAddress</span><span class="o">(</span><span class="s">"Muster Str. 12"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingZipCode</span><span class="o">(</span><span class="s">"10178"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingCity</span><span class="o">(</span><span class="s">"Los Angeles"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingState</span><span class="o">(</span><span class="s">"CA"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingCountry</span><span class="o">(</span><span class="s">"US"</span><span class="o">);</span>


    <span class="c1">// MPI Synchronous</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCavv</span><span class="o">(</span><span class="s">"AAACA1BHADYJkIASQkcAAAAAAAA="</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setEci</span><span class="o">(</span><span class="s">"05"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setXid</span><span class="o">(</span><span class="s">"0pv62FIrT5qQODB7DCewKgEBAQI="</span><span class="o">);</span>

    <span class="n">GenesisClient</span> <span class="n">client</span> <span class="o">=</span> <span class="k">new</span> <span class="n">GenesisClient</span><span class="o">(</span><span class="n">configuration</span><span class="o">,</span> <span class="n">request</span><span class="o">);</span>
    <span class="n">client</span><span class="o">.</span><span class="na">execute</span><span class="o">();</span>

    <span class="c1">// Parse Payment result</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">client</span><span class="o">.</span><span class="na">getResponse</span><span class="o">());</span>

  <span class="o">}</span>
<span class="o">}</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="kd">var</span> <span class="nx">genesis</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'genesis.js/lib/genesis.js'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">transaction</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">genesis</span><span class="p">.</span><span class="nx">transaction</span><span class="p">();</span>

<span class="kd">var</span> <span class="nx">failure</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">reason</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">reason</span><span class="p">);</span>
<span class="p">};</span>

<span class="kd">var</span> <span class="nx">success</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>

<span class="nx">transaction</span><span class="p">.</span><span class="nx">authorize3d</span><span class="p">(</span>
  <span class="p">{</span>
    <span class="s2">"transaction_id"</span><span class="p">:</span> <span class="s2">"43671"</span><span class="p">,</span>
    <span class="s2">"usage"</span><span class="p">:</span> <span class="s2">"40208 concert tickets"</span><span class="p">,</span>
    <span class="s2">"remote_ip"</span><span class="p">:</span> <span class="s2">"245.253.2.12"</span><span class="p">,</span>
    <span class="s2">"amount"</span><span class="p">:</span> <span class="s2">"100"</span><span class="p">,</span>
    <span class="s2">"currency"</span><span class="p">:</span> <span class="s2">"USD"</span><span class="p">,</span>
    <span class="s2">"card_holder"</span><span class="p">:</span> <span class="s2">"Travis Pastrana"</span><span class="p">,</span>
    <span class="s2">"card_number"</span><span class="p">:</span> <span class="s2">"4200000000000000"</span><span class="p">,</span>
    <span class="s2">"expiration_month"</span><span class="p">:</span> <span class="s2">"12"</span><span class="p">,</span>
    <span class="s2">"expiration_year"</span><span class="p">:</span> <span class="mi">2020</span><span class="p">,</span>
    <span class="s2">"cvv"</span><span class="p">:</span> <span class="s2">"834"</span><span class="p">,</span>
    <span class="s2">"customer_email"</span><span class="p">:</span> <span class="s2">"travis@example.com"</span><span class="p">,</span>
    <span class="s2">"customer_phone"</span><span class="p">:</span> <span class="s2">"+1987987987987"</span><span class="p">,</span>
    <span class="s2">"billing_address"</span><span class="p">:</span> <span class="p">{</span>
      <span class="s2">"first_name"</span><span class="p">:</span> <span class="s2">"Travis"</span><span class="p">,</span>
      <span class="s2">"last_name"</span><span class="p">:</span> <span class="s2">"Pastrana"</span><span class="p">,</span>
      <span class="s2">"address1"</span><span class="p">:</span> <span class="s2">"Muster Str. 12"</span><span class="p">,</span>
      <span class="s2">"zip_code"</span><span class="p">:</span> <span class="s2">"10178"</span><span class="p">,</span>
      <span class="s2">"city"</span><span class="p">:</span> <span class="s2">"Los Angeles"</span><span class="p">,</span>
      <span class="s2">"state"</span><span class="p">:</span> <span class="s2">"CA"</span><span class="p">,</span>
      <span class="s2">"country"</span><span class="p">:</span> <span class="s2">"US"</span>
    <span class="p">},</span>
    <span class="s2">"mpi_params"</span><span class="p">:</span> <span class="p">{</span>
      <span class="s2">"cavv"</span><span class="p">:</span> <span class="s2">"AAACA1BHADYJkIASQkcAAAAAAAA="</span><span class="p">,</span>
      <span class="s2">"eci"</span><span class="p">:</span> <span class="s2">"05"</span><span class="p">,</span>
      <span class="s2">"xid"</span><span class="p">:</span> <span class="s2">"0pv62FIrT5qQODB7DCewKgEBAQI="</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">).</span><span class="nx">send</span><span class="p">()</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">success</span><span class="p">)</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">failure</span><span class="p">);</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>curl https://username:password@gate.emerchantpay.net/process/TERMINAL-TOKEN <span class="se">\</span>
   -H <span class="s2">"Content-Type: text/xml"</span> <span class="se">\</span>
   -d <span class="s1">'
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;authorize3d&lt;/transaction_type&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;usage&gt;40208 concert tickets&lt;/usage&gt;
  &lt;remote_ip&gt;245.253.2.12&lt;/remote_ip&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
  &lt;card_holder&gt;Travis Pastrana&lt;/card_holder&gt;
  &lt;card_number&gt;4200000000000000&lt;/card_number&gt;
  &lt;expiration_month&gt;12&lt;/expiration_month&gt;
  &lt;expiration_year&gt;2020&lt;/expiration_year&gt;
  &lt;cvv&gt;834&lt;/cvv&gt;
  &lt;customer_email&gt;travis@example.com&lt;/customer_email&gt;
  &lt;customer_phone&gt;+1987987987987&lt;/customer_phone&gt;
  &lt;billing_address&gt;
    &lt;first_name&gt;Travis&lt;/first_name&gt;
    &lt;last_name&gt;Pastrana&lt;/last_name&gt;
    &lt;address1&gt;Muster Str. 12&lt;/address1&gt;
    &lt;zip_code&gt;10178&lt;/zip_code&gt;
    &lt;city&gt;Los Angeles&lt;/city&gt;
    &lt;state&gt;CA&lt;/state&gt;
    &lt;country&gt;US&lt;/country&gt;
  &lt;/billing_address&gt;
  &lt;mpi_params&gt;
    &lt;cavv&gt;AAACA1BHADYJkIASQkcAAAAAAAA=&lt;/cavv&gt;
    &lt;eci&gt;05&lt;/eci&gt;
    &lt;xid&gt;0pv62FIrT5qQODB7DCewKgEBAQI=&lt;/xid&gt;
  &lt;/mpi_params&gt;
&lt;/payment_transaction&gt;'</span>
</code></pre>

<blockquote>
<p>Asynchronous  Request</p>
</blockquote>

<pre class="highlight php tab-php"><code><span class="cp">&lt;?php</span>

<span class="c1">// Load the pre-configured ini file...
</span><span class="nx">\Genesis\Config</span><span class="o">::</span><span class="na">loadSettings</span><span class="p">(</span><span class="s1">'/path/to/config.ini'</span><span class="p">);</span>

<span class="nv">$genesis</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Genesis</span><span class="p">(</span><span class="s1">'Financial\Cards\Authorize3D'</span><span class="p">);</span>
<span class="nv">$request</span> <span class="o">=</span> <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">request</span><span class="p">();</span>

<span class="nv">$request</span>
  <span class="o">-&gt;</span><span class="na">setTransactionId</span><span class="p">(</span><span class="s1">'43671'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setUsage</span><span class="p">(</span><span class="s1">'40208 concert tickets'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setRemoteIp</span><span class="p">(</span><span class="s1">'245.253.2.12'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setAmount</span><span class="p">(</span><span class="s1">'100'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCurrency</span><span class="p">(</span><span class="s1">'USD'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCardHolder</span><span class="p">(</span><span class="s1">'Travis Pastrana'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCardNumber</span><span class="p">(</span><span class="s1">'4200000000000000'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setExpirationMonth</span><span class="p">(</span><span class="s1">'12'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setExpirationYear</span><span class="p">(</span><span class="s1">'2020'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCvv</span><span class="p">(</span><span class="s1">'834'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCustomerEmail</span><span class="p">(</span><span class="s1">'travis@example.com'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCustomerPhone</span><span class="p">(</span><span class="s1">'+1987987987987'</span><span class="p">)</span>


  <span class="c1">// Billing Address
</span>  <span class="o">-&gt;</span><span class="na">setBillingFirstName</span><span class="p">(</span><span class="s1">'Travis'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingLastName</span><span class="p">(</span><span class="s1">'Pastrana'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingAddress1</span><span class="p">(</span><span class="s1">'Muster Str. 12'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingZipCode</span><span class="p">(</span><span class="s1">'10178'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingCity</span><span class="p">(</span><span class="s1">'Los Angeles'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingState</span><span class="p">(</span><span class="s1">'CA'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingCountry</span><span class="p">(</span><span class="s1">'US'</span><span class="p">)</span>


  <span class="c1">// MPI Asynchronous
</span>  <span class="o">-&gt;</span><span class="na">setNotificationUrl</span><span class="p">(</span><span class="s1">'https://www.example.com/notification'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setReturnSuccessUrl</span><span class="p">(</span><span class="s1">'http://www.example.com/success.html'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setReturnFailureUrl</span><span class="p">(</span><span class="s1">'http://www.example.com/failure.html'</span><span class="p">);</span>

<span class="k">try</span> <span class="p">{</span>
    <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">execute</span><span class="p">();</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">response</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">getResponseObject</span><span class="p">();</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">\Exception</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$e</span><span class="o">-&gt;</span><span class="na">getMessage</span><span class="p">();</span>
<span class="p">}</span>
</code></pre>

<pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.GenesisClient</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.TransactionResult</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.constants.Endpoints</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.constants.Environments</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.requests.financial.card.Authorize3DRequest</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.model.Transaction</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Configuration</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Country</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Currency</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.math.BigDecimal</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">GenesisExample</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">()</span>  <span class="o">{</span>

    <span class="c1">// Create configuration</span>
    <span class="n">Configuration</span> <span class="n">configuration</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Configuration</span><span class="o">(</span><span class="n">Environments</span><span class="o">.</span><span class="na">STAGING</span><span class="o">,</span> <span class="n">Endpoints</span><span class="o">.</span><span class="na">EMERCHANTPAY</span><span class="o">);</span>

    <span class="n">configuration</span><span class="o">.</span><span class="na">setUsername</span><span class="o">(</span><span class="s">"SET_YOUR_USERNAME"</span><span class="o">);</span>
    <span class="n">configuration</span><span class="o">.</span><span class="na">setPassword</span><span class="o">(</span><span class="s">"SET_YOUR_PASSWORD"</span><span class="o">);</span>
    <span class="n">configuration</span><span class="o">.</span><span class="na">setToken</span><span class="o">(</span><span class="s">"SET_YOUR_TOKEN"</span><span class="o">);</span>

    <span class="n">Authorize3DRequest</span> <span class="n">request</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Authorize3DRequest</span><span class="o">();</span>

    <span class="n">request</span><span class="o">.</span><span class="na">setTransactionId</span><span class="o">(</span><span class="s">"43671"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setUsage</span><span class="o">(</span><span class="s">"40208 concert tickets"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setRemoteIp</span><span class="o">(</span><span class="s">"245.253.2.12"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setAmount</span><span class="o">(</span><span class="k">new</span> <span class="n">BigDecimal</span><span class="o">(</span><span class="mi">100</span><span class="o">));</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCurrency</span><span class="o">(</span><span class="s">"USD"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCardHolder</span><span class="o">(</span><span class="s">"Travis Pastrana"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCardNumber</span><span class="o">(</span><span class="s">"4200000000000000"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setExpirationMonth</span><span class="o">(</span><span class="s">"12"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setExpirationYear</span><span class="o">(</span><span class="s">"2020"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCvv</span><span class="o">(</span><span class="s">"834"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCustomerEmail</span><span class="o">(</span><span class="s">"travis@example.com"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCustomerPhone</span><span class="o">(</span><span class="s">"+1987987987987"</span><span class="o">);</span>


    <span class="c1">// Billing Address</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingFirstname</span><span class="o">(</span><span class="s">"Travis"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingLastname</span><span class="o">(</span><span class="s">"Pastrana"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingPrimaryAddress</span><span class="o">(</span><span class="s">"Muster Str. 12"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingZipCode</span><span class="o">(</span><span class="s">"10178"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingCity</span><span class="o">(</span><span class="s">"Los Angeles"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingState</span><span class="o">(</span><span class="s">"CA"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingCountry</span><span class="o">(</span><span class="s">"US"</span><span class="o">);</span>


    <span class="c1">// MPI Asynchronous</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setNotificationUrl</span><span class="o">(</span><span class="s">"https://www.example.com/notification"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setReturnSuccessUrl</span><span class="o">(</span><span class="s">"http://www.example.com/success.html"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setReturnFailureUrl</span><span class="o">(</span><span class="s">"http://www.example.com/failure.html"</span><span class="o">);</span>

    <span class="n">GenesisClient</span> <span class="n">client</span> <span class="o">=</span> <span class="k">new</span> <span class="n">GenesisClient</span><span class="o">(</span><span class="n">configuration</span><span class="o">,</span> <span class="n">request</span><span class="o">);</span>
    <span class="n">client</span><span class="o">.</span><span class="na">execute</span><span class="o">();</span>

    <span class="c1">// Parse Payment result</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">client</span><span class="o">.</span><span class="na">getResponse</span><span class="o">());</span>

  <span class="o">}</span>
<span class="o">}</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="kd">var</span> <span class="nx">genesis</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'genesis.js/lib/genesis.js'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">transaction</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">genesis</span><span class="p">.</span><span class="nx">transaction</span><span class="p">();</span>

<span class="kd">var</span> <span class="nx">failure</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">reason</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">reason</span><span class="p">);</span>
<span class="p">};</span>

<span class="kd">var</span> <span class="nx">success</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>

<span class="nx">transaction</span><span class="p">.</span><span class="nx">authorize3d</span><span class="p">(</span>
  <span class="p">{</span>
    <span class="s2">"transaction_id"</span><span class="p">:</span> <span class="s2">"43671"</span><span class="p">,</span>
    <span class="s2">"usage"</span><span class="p">:</span> <span class="s2">"40208 concert tickets"</span><span class="p">,</span>
    <span class="s2">"remote_ip"</span><span class="p">:</span> <span class="s2">"245.253.2.12"</span><span class="p">,</span>
    <span class="s2">"amount"</span><span class="p">:</span> <span class="s2">"100"</span><span class="p">,</span>
    <span class="s2">"currency"</span><span class="p">:</span> <span class="s2">"USD"</span><span class="p">,</span>
    <span class="s2">"card_holder"</span><span class="p">:</span> <span class="s2">"Travis Pastrana"</span><span class="p">,</span>
    <span class="s2">"card_number"</span><span class="p">:</span> <span class="s2">"4200000000000000"</span><span class="p">,</span>
    <span class="s2">"expiration_month"</span><span class="p">:</span> <span class="s2">"12"</span><span class="p">,</span>
    <span class="s2">"expiration_year"</span><span class="p">:</span> <span class="mi">2020</span><span class="p">,</span>
    <span class="s2">"cvv"</span><span class="p">:</span> <span class="s2">"834"</span><span class="p">,</span>
    <span class="s2">"customer_email"</span><span class="p">:</span> <span class="s2">"travis@example.com"</span><span class="p">,</span>
    <span class="s2">"customer_phone"</span><span class="p">:</span> <span class="s2">"+1987987987987"</span><span class="p">,</span>
    <span class="s2">"billing_address"</span><span class="p">:</span> <span class="p">{</span>
      <span class="s2">"first_name"</span><span class="p">:</span> <span class="s2">"Travis"</span><span class="p">,</span>
      <span class="s2">"last_name"</span><span class="p">:</span> <span class="s2">"Pastrana"</span><span class="p">,</span>
      <span class="s2">"address1"</span><span class="p">:</span> <span class="s2">"Muster Str. 12"</span><span class="p">,</span>
      <span class="s2">"zip_code"</span><span class="p">:</span> <span class="s2">"10178"</span><span class="p">,</span>
      <span class="s2">"city"</span><span class="p">:</span> <span class="s2">"Los Angeles"</span><span class="p">,</span>
      <span class="s2">"state"</span><span class="p">:</span> <span class="s2">"CA"</span><span class="p">,</span>
      <span class="s2">"country"</span><span class="p">:</span> <span class="s2">"US"</span>
    <span class="p">},</span>
    <span class="s2">"notification_url"</span><span class="p">:</span> <span class="s2">"https://www.example.com/notification"</span><span class="p">,</span>
    <span class="s2">"return_success_url"</span><span class="p">:</span> <span class="s2">"http://www.example.com/success.html"</span><span class="p">,</span>
    <span class="s2">"return_failure_url"</span><span class="p">:</span> <span class="s2">"http://www.example.com/failure.html"</span>
  <span class="p">}</span>
<span class="p">).</span><span class="nx">send</span><span class="p">()</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">success</span><span class="p">)</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">failure</span><span class="p">);</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>curl https://username:password@gate.emerchantpay.net/process/TERMINAL-TOKEN <span class="se">\</span>
   -H <span class="s2">"Content-Type: text/xml"</span> <span class="se">\</span>
   -d <span class="s1">'
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;authorize3d&lt;/transaction_type&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;usage&gt;40208 concert tickets&lt;/usage&gt;
  &lt;remote_ip&gt;245.253.2.12&lt;/remote_ip&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
  &lt;card_holder&gt;Travis Pastrana&lt;/card_holder&gt;
  &lt;card_number&gt;4200000000000000&lt;/card_number&gt;
  &lt;expiration_month&gt;12&lt;/expiration_month&gt;
  &lt;expiration_year&gt;2020&lt;/expiration_year&gt;
  &lt;cvv&gt;834&lt;/cvv&gt;
  &lt;customer_email&gt;travis@example.com&lt;/customer_email&gt;
  &lt;customer_phone&gt;+1987987987987&lt;/customer_phone&gt;
  &lt;billing_address&gt;
    &lt;first_name&gt;Travis&lt;/first_name&gt;
    &lt;last_name&gt;Pastrana&lt;/last_name&gt;
    &lt;address1&gt;Muster Str. 12&lt;/address1&gt;
    &lt;zip_code&gt;10178&lt;/zip_code&gt;
    &lt;city&gt;Los Angeles&lt;/city&gt;
    &lt;state&gt;CA&lt;/state&gt;
    &lt;country&gt;US&lt;/country&gt;
  &lt;/billing_address&gt;
  &lt;notification_url&gt;https://www.example.com/notification&lt;/notification_url&gt;
  &lt;return_success_url&gt;http://www.example.com/success.html&lt;/return_success_url&gt;
  &lt;return_failure_url&gt;http://www.example.com/failure.html&lt;/return_failure_url&gt;
&lt;/payment_transaction&gt;'</span>
</code></pre>

<p><strong>Request Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>required</td>
<td>string(255)</td>
<td>The transaction type: <strong>authorize3d</strong></td>
</tr>
<tr>
<td>transaction_id</td>
<td>required</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>usage</td>
<td>optional</td>
<td>string(255)</td>
<td>Description of the transaction for later use</td>
</tr>
<tr>
<td>gaming</td>
<td>optional</td>
<td>&quot;true&quot;</td>
<td>Signifies whether a gaming transaction is performed. Gaming transactions usually use MCC 7995, contact tech support for more details.</td>
</tr>
<tr>
<td>moto</td>
<td>optional</td>
<td>&quot;true&quot;</td>
<td>Signifies whether a MOTO (mail order telephone order) transaction is performed. Contact tech support for more details.</td>
</tr>
<tr>
<td>remote_ip</td>
<td>required*</td>
<td>IPv4 address</td>
<td>IPv4 address of customer</td>
</tr>
<tr>
<td>notification_url</td>
<td>required<sup>1</sup></td>
<td>url</td>
<td>URL at merchant where gateway sends outcome of transaction.</td>
</tr>
<tr>
<td>return_success_url</td>
<td>required<sup>1</sup></td>
<td>url</td>
<td>URL where customer is sent to after successful payment</td>
</tr>
<tr>
<td>return_failure_url</td>
<td>required<sup>1</sup></td>
<td>url</td>
<td>URL where customer is sent to after unsuccessful payment</td>
</tr>
<tr>
<td>amount</td>
<td>required</td>
<td>integer &gt; 0</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>required</td>
<td>string(3)</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>card_holder</td>
<td>required</td>
<td>string(255)</td>
<td>Full name of customer as printed on credit card (first name and last name at least)</td>
</tr>
<tr>
<td>card_number</td>
<td>required</td>
<td>13 to 16 digits</td>
<td>Complete cc number of customer</td>
</tr>
<tr>
<td>cvv</td>
<td>required</td>
<td>3 to 4 digits</td>
<td>cvv of cc, requirement is based on terminal configuration</td>
</tr>
<tr>
<td>expiration_month</td>
<td>required</td>
<td>MM</td>
<td>Expiration month as printed on credit card</td>
</tr>
<tr>
<td>expiration_year</td>
<td>required</td>
<td>YYYY</td>
<td>Expiration year as printed on credit card</td>
</tr>
<tr>
<td>token</td>
<td>optional</td>
<td>string(36)</td>
<td>See <a href="#tokenization">Tokenization</a> for more details. If present, the cardholder parameters can be omitted. Cannot be set together with <code>remember_card</code></td>
</tr>
<tr>
<td>remember_card</td>
<td>optional</td>
<td>&quot;true&quot;</td>
<td>See <a href="#tokenize">Tokenize</a>. Tokenizes cardholder parameters. Cannot be set together with <code>token</code></td>
</tr>
<tr>
<td>consumer_id</td>
<td>optional</td>
<td>string(10)</td>
<td>See <a href="#consumers">Consumers</a> and <a href="#tokenization">Tokenization</a>. Combine with <code>remember_card</code> to tokenize or with <code>token</code> to use token</td>
</tr>
<tr>
<td><strong>credential_on_file</strong></td>
<td>required*</td>
<td></td>
<td>See <a href="#credential-on-file-cof" target="_self">Credential On File (COF)</a> for more details</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;initial_customer_initiated</td>
<td>required*</td>
<td>string(18)</td>
<td>Initial transaction initiated by customer. Required for external tokenization, and optional for gateway-based tokenization</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;subsequent_customer_initiated</td>
<td>required*</td>
<td>string(18)</td>
<td>Subsequent transaction initiated by customer. Required for external tokenization, and optional for gateway-based tokenization</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;merchant_unscheduled</td>
<td>optional</td>
<td>string(20)</td>
<td>Transaction is initiated by the merchant</td>
</tr>
<tr>
<td>customer_email</td>
<td>required*</td>
<td>e-mail address</td>
<td>Must contain valid e-mail of customer</td>
</tr>
<tr>
<td>customer_phone</td>
<td>required*</td>
<td>string(32)</td>
<td>Must contain valid phone number of customer</td>
</tr>
<tr>
<td>birth_date</td>
<td>required*</td>
<td>dd-mm-yyyy</td>
<td>Required when MCC is a Financial Services one (e.g. MCC 6012) and either card brand is Visa or Mastercard/Maestro with UK-based merchant, UK-based bin (domestic), and DEBIT card type</td>
</tr>
<tr>
<td>document_id</td>
<td>required*</td>
<td>sring(20)</td>
<td>Document ID of the consumer. See <a href="#document-id-parameter">Document ID Parameter</a> for more details.</td>
</tr>
<tr>
<td><strong>billing_address</strong></td>
<td>required</td>
<td></td>
<td>See <a href="#required-vs-optional-api-params">Required vs Optional API params</a> for details</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;first_name</td>
<td>required*</td>
<td>string(255)</td>
<td>Customer first name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;last_name</td>
<td>required*</td>
<td>string(255)</td>
<td>Customer last name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address1</td>
<td>required*</td>
<td>string(255)</td>
<td>Primary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address2</td>
<td>required*</td>
<td>string(255)</td>
<td>Secondary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;zip_code</td>
<td>required*</td>
<td>string</td>
<td>ZIP code</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;city</td>
<td>required*</td>
<td>string(255)</td>
<td>City</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;state</td>
<td>required*</td>
<td>string(2)</td>
<td>State code in <a href="https://en.wikipedia.org/wiki/ISO_3166-2">ISO 3166-2</a>, required for USA and Canada</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;country</td>
<td>required*</td>
<td>string(2)</td>
<td>Country code in <a href="https://www.iso.org/iso-3166-country-codes.html">ISO 3166</a></td>
</tr>
<tr>
<td><strong>shipping_address</strong></td>
<td>optional</td>
<td></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;first_name</td>
<td>optional</td>
<td>string(255)</td>
<td>Customer first name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;last_name</td>
<td>optional</td>
<td>string(255)</td>
<td>Customer last name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address1</td>
<td>optional</td>
<td>string(255)</td>
<td>Primary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address2</td>
<td>optional</td>
<td>string(255)</td>
<td>Secondary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;zip_code</td>
<td>optional</td>
<td>string</td>
<td>ZIP code</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;city</td>
<td>optional</td>
<td>string(255)</td>
<td>City</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;state</td>
<td>optional</td>
<td>string(2)</td>
<td>State code in <a href="https://en.wikipedia.org/wiki/ISO_3166-2">ISO 3166-2</a>, required for USA and Canada</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;country</td>
<td>optional</td>
<td>string(2)</td>
<td>Country code in <a href="https://www.iso.org/iso-3166-country-codes.html">ISO 3166</a></td>
</tr>
<tr>
<td><strong>mpi_params</strong></td>
<td>required<sup>2</sup></td>
<td></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;cavv</td>
<td>required<sup>3</sup></td>
<td>string(255)</td>
<td>Verification Id of the authentication. Please note this can be the CAVV for Visa Card or UCAF to identify MasterCard.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;eci</td>
<td>required<sup>3</sup></td>
<td>string(255)</td>
<td>See <a href="#electronic-commerce-indicator">Electronic Commerce Indicator as returned from the MPI</a> for details</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;xid</td>
<td>required<sup>3</sup></td>
<td>string(255)</td>
<td>Transaction ID generated by the 3D Secure service that uniquely identifies a 3D Secure check request</td>
</tr>
<tr>
<td><strong>dynamic_descriptor_params</strong></td>
<td>optional</td>
<td></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;merchant_name</td>
<td>optional</td>
<td>string(25)</td>
<td>Allows to dynamically override the charge descriptor</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;merchant_city</td>
<td>optional</td>
<td>string(13)</td>
<td>Allows to dynamically override the merchant phone number</td>
</tr>
</tbody></table>

<p><code>required* = conditionally required</code></p>

<p><code>1 - required if mpi_params is not present, transaction will be handled asynchronous.</code></p>

<p><code>2 - required if transaction should be handled synchronous.</code></p>

<p><code>3 - eci is always required if mpi_params is present. xid and cavv are not required for the 3D attempted only workflow, where the merchant does not have the xid/cavv, only the eci.</code></p>

<blockquote>
<p>Successful Synchronous Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>stdClass Object
(
    [transaction_type] =&gt; authorize3d
    [status] =&gt; approved
    [mode] =&gt; live
    [transaction_id] =&gt; 43671
    [unique_id] =&gt; 44177a21403427eb96664a6d7e5d5d48
    [consumer_id] =&gt; 123456
    [token] =&gt; ee946db8-d7db-4bb7-b608-b65b153e127d
    [avs_response_code] =&gt; 5I
    [avs_response_text] =&gt; Response provided by issuer processor; Address information not verified
    [authorization_code] =&gt; 345678
    [response_code] =&gt; 00
    [timestamp] =&gt; DateTime Object
        (
            [date] =&gt; 2019-03-14 12:05:56.000000
            [timezone_type] =&gt; 2
            [timezone] =&gt; Z
        )
    [descriptor] =&gt; Descriptor one
    [amount] =&gt; 100
    [currency] =&gt; USD
    [sent_to_acquirer] =&gt; true
    [partial_approval] =&gt; true
)
</code></pre>

<pre class="highlight java tab-java"><code><span class="o">&lt;</span><span class="n">payment_response</span> <span class="n">content</span><span class="o">=[</span>
    <span class="o">&lt;</span><span class="n">transaction_type</span> <span class="n">content</span><span class="o">=[</span><span class="n">authorize3d</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">status</span> <span class="n">content</span><span class="o">=[</span><span class="n">approved</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">mode</span> <span class="n">content</span><span class="o">=[</span><span class="n">live</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">transaction_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">43671</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">unique_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">44177</span><span class="n">a21403427eb96664a6d7e5d5d48</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">consumer_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">123456</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">token</span> <span class="n">content</span><span class="o">=[</span><span class="n">ee946db8</span><span class="o">-</span><span class="n">d7db</span><span class="o">-</span><span class="mi">4</span><span class="n">bb7</span><span class="o">-</span><span class="n">b608</span><span class="o">-</span><span class="n">b65b153e127d</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">avs_response_code</span> <span class="n">content</span><span class="o">=[</span><span class="mi">5</span><span class="n">I</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">avs_response_text</span> <span class="n">content</span><span class="o">=[</span><span class="n">Response</span> <span class="n">provided</span> <span class="n">by</span> <span class="n">issuer</span> <span class="n">processor</span><span class="o">;</span> <span class="n">Address</span> <span class="n">information</span> <span class="n">not</span> <span class="n">verified</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">authorization_code</span> <span class="n">content</span><span class="o">=[</span><span class="mi">345678</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">response_code</span> <span class="n">content</span><span class="o">=[</span><span class="mo">00</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">timestamp</span> <span class="n">content</span><span class="o">=[</span><span class="mi">2019</span><span class="o">-</span><span class="mo">03</span><span class="o">-</span><span class="mi">14</span><span class="nl">T12:</span><span class="mo">05</span><span class="o">:</span><span class="mi">56</span><span class="n">Z</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">descriptor</span> <span class="n">content</span><span class="o">=[</span><span class="n">Descriptor</span> <span class="n">one</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">amount</span> <span class="n">content</span><span class="o">=[</span><span class="mi">100</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">currency</span> <span class="n">content</span><span class="o">=[</span><span class="n">USD</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">sent_to_acquirer</span> <span class="n">content</span><span class="o">=[</span><span class="kc">true</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">partial_approval</span> <span class="n">content</span><span class="o">=[</span><span class="kc">true</span><span class="o">]&gt;</span>
<span class="o">]&gt;</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="p">{</span>
    <span class="nl">transaction_type</span><span class="p">:</span> <span class="s2">"authorize3d"</span><span class="p">,</span>
    <span class="nx">status</span><span class="p">:</span> <span class="s2">"approved"</span><span class="p">,</span>
    <span class="nx">mode</span><span class="p">:</span> <span class="s2">"live"</span><span class="p">,</span>
    <span class="nx">transaction_id</span><span class="p">:</span> <span class="s2">"43671"</span><span class="p">,</span>
    <span class="nx">unique_id</span><span class="p">:</span> <span class="s2">"44177a21403427eb96664a6d7e5d5d48"</span><span class="p">,</span>
    <span class="nx">consumer_id</span><span class="p">:</span> <span class="s2">"123456"</span><span class="p">,</span>
    <span class="nx">token</span><span class="p">:</span> <span class="s2">"ee946db8-d7db-4bb7-b608-b65b153e127d"</span><span class="p">,</span>
    <span class="nx">avs_response_code</span><span class="p">:</span> <span class="s2">"5I"</span><span class="p">,</span>
    <span class="nx">avs_response_text</span><span class="p">:</span> <span class="s2">"Response provided by issuer processor; Address information not verified"</span><span class="p">,</span>
    <span class="nx">authorization_code</span><span class="p">:</span> <span class="s2">"345678"</span><span class="p">,</span>
    <span class="nx">response_code</span><span class="p">:</span> <span class="s2">"00"</span><span class="p">,</span>
    <span class="nx">timestamp</span><span class="p">:</span> <span class="s2">"2019-03-14T12:05:56Z"</span><span class="p">,</span>
    <span class="nx">descriptor</span><span class="p">:</span> <span class="s2">"Descriptor one"</span><span class="p">,</span>
    <span class="nx">amount</span><span class="p">:</span> <span class="s2">"100"</span><span class="p">,</span>
    <span class="nx">currency</span><span class="p">:</span> <span class="s2">"USD"</span><span class="p">,</span>
    <span class="nx">sent_to_acquirer</span><span class="p">:</span> <span class="s2">"true"</span><span class="p">,</span>
    <span class="nx">partial_approval</span><span class="p">:</span> <span class="s2">"true"</span><span class="p">,</span>
<span class="p">}</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;authorize3d&lt;/transaction_type&gt;
  &lt;status&gt;approved&lt;/status&gt;
  &lt;mode&gt;live&lt;/mode&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;consumer_id&gt;123456&lt;/consumer_id&gt;
  &lt;token&gt;ee946db8-d7db-4bb7-b608-b65b153e127d&lt;/token&gt;
  &lt;avs_response_code&gt;5I&lt;/avs_response_code&gt;
  &lt;avs_response_text&gt;Response provided by issuer processor; Address information not verified&lt;/avs_response_text&gt;
  &lt;authorization_code&gt;345678&lt;/authorization_code&gt;
  &lt;response_code&gt;00&lt;/response_code&gt;
  &lt;timestamp&gt;2019-03-14T12:05:56Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
  &lt;sent_to_acquirer&gt;true&lt;/sent_to_acquirer&gt;
  &lt;partial_approval&gt;true&lt;/partial_approval&gt;
&lt;/payment_transaction&gt;
</code></pre>

<blockquote>
<p>Successful Asynchronous Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>stdClass Object
(
    [transaction_type] =&gt; authorize3d
    [status] =&gt; pending_async
    [mode] =&gt; live
    [transaction_id] =&gt; 43671
    [unique_id] =&gt; 44177a21403427eb96664a6d7e5d5d48
    [consumer_id] =&gt; 123456
    [token] =&gt; ee946db8-d7db-4bb7-b608-b65b153e127d
    [technical_message] =&gt; Transaction successful!
    [message] =&gt; Transaction successful!
    [redirect_url] =&gt; https://gate.emerchantpay.net/redirect/to_acquirer/649e1ff35c61
    [timestamp] =&gt; DateTime Object
        (
            [date] =&gt; 2019-03-14 12:05:56.000000
            [timezone_type] =&gt; 2
            [timezone] =&gt; Z
        )
    [descriptor] =&gt; Descriptor one
    [amount] =&gt; 100
    [currency] =&gt; USD
    [sent_to_acquirer] =&gt; true
)
</code></pre>

<pre class="highlight java tab-java"><code><span class="o">&lt;</span><span class="n">payment_response</span> <span class="n">content</span><span class="o">=[</span>
    <span class="o">&lt;</span><span class="n">transaction_type</span> <span class="n">content</span><span class="o">=[</span><span class="n">authorize3d</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">status</span> <span class="n">content</span><span class="o">=[</span><span class="n">pending_async</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">mode</span> <span class="n">content</span><span class="o">=[</span><span class="n">live</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">transaction_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">43671</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">unique_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">44177</span><span class="n">a21403427eb96664a6d7e5d5d48</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">consumer_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">123456</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">token</span> <span class="n">content</span><span class="o">=[</span><span class="n">ee946db8</span><span class="o">-</span><span class="n">d7db</span><span class="o">-</span><span class="mi">4</span><span class="n">bb7</span><span class="o">-</span><span class="n">b608</span><span class="o">-</span><span class="n">b65b153e127d</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">technical_message</span> <span class="n">content</span><span class="o">=[</span><span class="n">Transaction</span> <span class="n">successful</span><span class="o">!]&gt;</span>
    <span class="o">&lt;</span><span class="n">message</span> <span class="n">content</span><span class="o">=[</span><span class="n">Transaction</span> <span class="n">successful</span><span class="o">!]&gt;</span>
    <span class="o">&lt;</span><span class="n">redirect_url</span> <span class="n">content</span><span class="o">=[</span><span class="nl">https:</span><span class="c1">//gate.emerchantpay.net/redirect/to_acquirer/649e1ff35c61]&gt;</span>
    <span class="o">&lt;</span><span class="n">timestamp</span> <span class="n">content</span><span class="o">=[</span><span class="mi">2019</span><span class="o">-</span><span class="mo">03</span><span class="o">-</span><span class="mi">14</span><span class="nl">T12:</span><span class="mo">05</span><span class="o">:</span><span class="mi">56</span><span class="n">Z</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">descriptor</span> <span class="n">content</span><span class="o">=[</span><span class="n">Descriptor</span> <span class="n">one</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">amount</span> <span class="n">content</span><span class="o">=[</span><span class="mi">100</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">currency</span> <span class="n">content</span><span class="o">=[</span><span class="n">USD</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">sent_to_acquirer</span> <span class="n">content</span><span class="o">=[</span><span class="kc">true</span><span class="o">]&gt;</span>
<span class="o">]&gt;</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="p">{</span>
    <span class="nl">transaction_type</span><span class="p">:</span> <span class="s2">"authorize3d"</span><span class="p">,</span>
    <span class="nx">status</span><span class="p">:</span> <span class="s2">"pending_async"</span><span class="p">,</span>
    <span class="nx">mode</span><span class="p">:</span> <span class="s2">"live"</span><span class="p">,</span>
    <span class="nx">transaction_id</span><span class="p">:</span> <span class="s2">"43671"</span><span class="p">,</span>
    <span class="nx">unique_id</span><span class="p">:</span> <span class="s2">"44177a21403427eb96664a6d7e5d5d48"</span><span class="p">,</span>
    <span class="nx">consumer_id</span><span class="p">:</span> <span class="s2">"123456"</span><span class="p">,</span>
    <span class="nx">token</span><span class="p">:</span> <span class="s2">"ee946db8-d7db-4bb7-b608-b65b153e127d"</span><span class="p">,</span>
    <span class="nx">technical_message</span><span class="p">:</span> <span class="s2">"Transaction successful!"</span><span class="p">,</span>
    <span class="nx">message</span><span class="p">:</span> <span class="s2">"Transaction successful!"</span><span class="p">,</span>
    <span class="nx">redirect_url</span><span class="p">:</span> <span class="s2">"https://gate.emerchantpay.net/redirect/to_acquirer/649e1ff35c61"</span><span class="p">,</span>
    <span class="nx">timestamp</span><span class="p">:</span> <span class="s2">"2019-03-14T12:05:56Z"</span><span class="p">,</span>
    <span class="nx">descriptor</span><span class="p">:</span> <span class="s2">"Descriptor one"</span><span class="p">,</span>
    <span class="nx">amount</span><span class="p">:</span> <span class="s2">"100"</span><span class="p">,</span>
    <span class="nx">currency</span><span class="p">:</span> <span class="s2">"USD"</span><span class="p">,</span>
    <span class="nx">sent_to_acquirer</span><span class="p">:</span> <span class="s2">"true"</span><span class="p">,</span>
<span class="p">}</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;authorize3d&lt;/transaction_type&gt;
  &lt;status&gt;pending_async&lt;/status&gt;
  &lt;mode&gt;live&lt;/mode&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;consumer_id&gt;123456&lt;/consumer_id&gt;
  &lt;token&gt;ee946db8-d7db-4bb7-b608-b65b153e127d&lt;/token&gt;
  &lt;technical_message&gt;Transaction successful!&lt;/technical_message&gt;
  &lt;message&gt;Transaction successful!&lt;/message&gt;
  &lt;redirect_url&gt;https://gate.emerchantpay.net/redirect/to_acquirer/649e1ff35c61&lt;/redirect_url&gt;
  &lt;timestamp&gt;2019-03-14T12:05:56Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
  &lt;sent_to_acquirer&gt;true&lt;/sent_to_acquirer&gt;
&lt;/payment_transaction&gt;
</code></pre>

<p><strong>Successful Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>The transaction type</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>transaction_id</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>unique_id</td>
<td>string(32)</td>
<td>Unique id defined by gate (must later be used if capturing, voiding or refunding a transaction)</td>
</tr>
<tr>
<td>consumer_id</td>
<td>string(10)</td>
<td>Consumer unique reference. See <a href="#consumers">Consumers</a></td>
</tr>
<tr>
<td>token</td>
<td>string(36)</td>
<td>Plain-text token value. See <a href="#tokenization">Tokenization</a></td>
</tr>
<tr>
<td>gaming</td>
<td>string</td>
<td>Signifies whether a gaming transaction is performed. Gaming transactions usually use MCC 7995, contact tech support for more details.</td>
</tr>
<tr>
<td>moto</td>
<td>string</td>
<td>Signifies whether a MOTO (mail order telephone order) transaction is performed. Contact tech support for more details.</td>
</tr>
<tr>
<td>avs_response_code</td>
<td>string</td>
<td>Generated by the card network on trying to match the billing address when performing the address verification. Optional, returned if config is enabled and acquirer supports it. Check <a href="#avs-status-codes">AVS Status Codes</a> for details.</td>
</tr>
<tr>
<td>avs_response_text</td>
<td>string</td>
<td>Gives the human response text for the AVS response code above. Optional, returned if config is enabled and acquirer supports it. Check [AVS Status Codes](#avs-status-codes for details.</td>
</tr>
<tr>
<td>authorization_code</td>
<td>string(6)</td>
<td>Generated by the card network when an authorisation has occurred, used to identify that auth. Consists of 6 alphanumeric chars</td>
</tr>
<tr>
<td>response_code</td>
<td>string(2)</td>
<td>Defines the issuer result of a transaction, the status of a message or some action taken or required. See <a href="#issuer-response-codes">issuer response codes</a> for details</td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
<tr>
<td>message</td>
<td>string(255)</td>
<td>Human readable error message which can be displayed to users.</td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>redirect_url</td>
<td>url</td>
<td>URL where user has to be redirected to complete payment process. It is available for asynchronous mode</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when the transaction was processed in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Combined date and time</a> e.g. 2007-08- 30T17:46:11Z</td>
</tr>
<tr>
<td>descriptor</td>
<td>string</td>
<td>Static descriptor MID info as configured on the gateway</td>
</tr>
<tr>
<td>amount</td>
<td>integer</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>partial_approval</td>
<td>string(4)</td>
<td>Optional, set to ’true’ if partial approval happened. Partially approved amount is then in the amount field. Check <a href="#partial-approvals">Partial Approvals</a> for details</td>
</tr>
<tr>
<td>sent_to_acquirer</td>
<td>string</td>
<td>&quot;true&quot; or &quot;false&quot;</td>
</tr>
<tr>
<td>dynamic_descriptor_params</td>
<td>section</td>
<td>Optional, returned only if dynamic desc params are submitted on the API. Note here that the formatted dyn desc params are returned - as they would be submitted to the schemes for settlement.</td>
</tr>
</tbody></table>

<blockquote>
<p>Error Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>stdClass Object
(
    [transaction_type] =&gt; authorize3d
    [status] =&gt; error
    [mode] =&gt; live
    [transaction_id] =&gt; 43671
    [unique_id] =&gt; 44177a21403427eb96664a6d7e5d5d48
    [response_code] =&gt; 57
    [code] =&gt; 340
    [technical_message] =&gt; expiration_year is invalid
    [message] =&gt; expiration_year is invalid
    [timestamp] =&gt; DateTime Object
        (
            [date] =&gt; 2019-03-14 12:05:56.000000
            [timezone_type] =&gt; 2
            [timezone] =&gt; Z
        )
    [descriptor] =&gt; Descriptor one
    [amount] =&gt; 100
    [currency] =&gt; USD
    [sent_to_acquirer] =&gt; false
)
</code></pre>

<pre class="highlight java tab-java"><code><span class="o">&lt;</span><span class="n">payment_response</span> <span class="n">content</span><span class="o">=[</span>
    <span class="o">&lt;</span><span class="n">transaction_type</span> <span class="n">content</span><span class="o">=[</span><span class="n">authorize3d</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">status</span> <span class="n">content</span><span class="o">=[</span><span class="n">error</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">mode</span> <span class="n">content</span><span class="o">=[</span><span class="n">live</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">transaction_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">43671</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">unique_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">44177</span><span class="n">a21403427eb96664a6d7e5d5d48</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">response_code</span> <span class="n">content</span><span class="o">=[</span><span class="mi">57</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">code</span> <span class="n">content</span><span class="o">=[</span><span class="mi">340</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">technical_message</span> <span class="n">content</span><span class="o">=[</span><span class="n">expiration_year</span> <span class="n">is</span> <span class="n">invalid</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">message</span> <span class="n">content</span><span class="o">=[</span><span class="n">expiration_year</span> <span class="n">is</span> <span class="n">invalid</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">timestamp</span> <span class="n">content</span><span class="o">=[</span><span class="mi">2019</span><span class="o">-</span><span class="mo">03</span><span class="o">-</span><span class="mi">14</span><span class="nl">T12:</span><span class="mo">05</span><span class="o">:</span><span class="mi">56</span><span class="n">Z</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">descriptor</span> <span class="n">content</span><span class="o">=[</span><span class="n">Descriptor</span> <span class="n">one</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">amount</span> <span class="n">content</span><span class="o">=[</span><span class="mi">100</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">currency</span> <span class="n">content</span><span class="o">=[</span><span class="n">USD</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">sent_to_acquirer</span> <span class="n">content</span><span class="o">=[</span><span class="kc">false</span><span class="o">]&gt;</span>
<span class="o">]&gt;</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="p">{</span>
    <span class="nl">transaction_type</span><span class="p">:</span> <span class="s2">"authorize3d"</span><span class="p">,</span>
    <span class="nx">status</span><span class="p">:</span> <span class="s2">"error"</span><span class="p">,</span>
    <span class="nx">mode</span><span class="p">:</span> <span class="s2">"live"</span><span class="p">,</span>
    <span class="nx">transaction_id</span><span class="p">:</span> <span class="s2">"43671"</span><span class="p">,</span>
    <span class="nx">unique_id</span><span class="p">:</span> <span class="s2">"44177a21403427eb96664a6d7e5d5d48"</span><span class="p">,</span>
    <span class="nx">response_code</span><span class="p">:</span> <span class="s2">"57"</span><span class="p">,</span>
    <span class="nx">code</span><span class="p">:</span> <span class="s2">"340"</span><span class="p">,</span>
    <span class="nx">technical_message</span><span class="p">:</span> <span class="s2">"expiration_year is invalid"</span><span class="p">,</span>
    <span class="nx">message</span><span class="p">:</span> <span class="s2">"expiration_year is invalid"</span><span class="p">,</span>
    <span class="nx">timestamp</span><span class="p">:</span> <span class="s2">"2019-03-14T12:05:56Z"</span><span class="p">,</span>
    <span class="nx">descriptor</span><span class="p">:</span> <span class="s2">"Descriptor one"</span><span class="p">,</span>
    <span class="nx">amount</span><span class="p">:</span> <span class="s2">"100"</span><span class="p">,</span>
    <span class="nx">currency</span><span class="p">:</span> <span class="s2">"USD"</span><span class="p">,</span>
    <span class="nx">sent_to_acquirer</span><span class="p">:</span> <span class="s2">"false"</span><span class="p">,</span>
<span class="p">}</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;authorize3d&lt;/transaction_type&gt;
  &lt;status&gt;error&lt;/status&gt;
  &lt;mode&gt;live&lt;/mode&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;response_code&gt;57&lt;/response_code&gt;
  &lt;code&gt;340&lt;/code&gt;
  &lt;technical_message&gt;expiration_year is invalid&lt;/technical_message&gt;
  &lt;message&gt;expiration_year is invalid&lt;/message&gt;
  &lt;timestamp&gt;2019-03-14T12:05:56Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
  &lt;sent_to_acquirer&gt;false&lt;/sent_to_acquirer&gt;
&lt;/payment_transaction&gt;
</code></pre>

<p><strong>Error Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>The transaction type</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>transaction_id</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>unique_id</td>
<td>string(32)</td>
<td>Unique id defined by gate (must later be used if capturing, voiding or refunding a transaction)</td>
</tr>
<tr>
<td>gaming</td>
<td>string</td>
<td>Signifies whether a gaming transaction is performed. Gaming transactions usually use MCC 7995, contact tech support for more details.</td>
</tr>
<tr>
<td>moto</td>
<td>string</td>
<td>Signifies whether a MOTO (mail order telephone order) transaction is performed. Contact tech support for more details.</td>
</tr>
<tr>
<td>code</td>
<td>integer</td>
<td>Error code according to <a href="#error-code-table">Error code table</a></td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
<tr>
<td>message</td>
<td>string(255)</td>
<td>Human readable error message which can be displayed to users.</td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when the transaction was processed in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Combined date and time</a> e.g. 2007-08- 30T17:46:11Z</td>
</tr>
<tr>
<td>descriptor</td>
<td>string</td>
<td>Static descriptor MID info as configured on the gateway</td>
</tr>
<tr>
<td>amount</td>
<td>integer</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>dynamic_descriptor_params</td>
<td>section</td>
<td>Optional, returned only if dynamic desc params are submitted on the API. Note here that the formatted dyn desc params are returned - as they would be submitted to the schemes for settlement.</td>
</tr>
</tbody></table>
<h3 id='sale-3d'>Sale 3D</h3>
<p>Sale3D transactions basically have the same request as standard <a href="#sale">sale</a> transactions.</p>

<aside class="notice" >
Sale3D transactions can be handled <b>synchronous</b> or <b>asynchronous</b> depending on the parameers passed. If mpi_params is passed the workflow will be <b>synchronous</b>. If <b>notification_url</b>, <b>return_success_url</b> and <b>return_failure_url</b> are passed the workflow will be <b>asynchronous</b>.
</aside>

<aside class="notice">
This transaction type supports <a href="#tokenization" target="_self">Tokenization</a>.
</aside>

<aside class="notice">
This transaction type supports <a href="#level-3-travel-data" target="_self">Level 3 travel data</a>.
</aside>

<blockquote>
<p>Synchronous  Request</p>
</blockquote>

<pre class="highlight php tab-php"><code><span class="cp">&lt;?php</span>

<span class="c1">// Load the pre-configured ini file...
</span><span class="nx">\Genesis\Config</span><span class="o">::</span><span class="na">loadSettings</span><span class="p">(</span><span class="s1">'/path/to/config.ini'</span><span class="p">);</span>

<span class="nv">$genesis</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Genesis</span><span class="p">(</span><span class="s1">'Financial\Cards\Sale3D'</span><span class="p">);</span>
<span class="nv">$request</span> <span class="o">=</span> <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">request</span><span class="p">();</span>

<span class="nv">$request</span>
  <span class="o">-&gt;</span><span class="na">setTransactionId</span><span class="p">(</span><span class="s1">'43671'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setUsage</span><span class="p">(</span><span class="s1">'40208 concert tickets'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setRemoteIp</span><span class="p">(</span><span class="s1">'245.253.2.12'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setAmount</span><span class="p">(</span><span class="s1">'100'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCurrency</span><span class="p">(</span><span class="s1">'USD'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCardHolder</span><span class="p">(</span><span class="s1">'Travis Pastrana'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCardNumber</span><span class="p">(</span><span class="s1">'4200000000000000'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setExpirationMonth</span><span class="p">(</span><span class="s1">'12'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setExpirationYear</span><span class="p">(</span><span class="s1">'2020'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCvv</span><span class="p">(</span><span class="s1">'834'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCustomerEmail</span><span class="p">(</span><span class="s1">'travis@example.com'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCustomerPhone</span><span class="p">(</span><span class="s1">'+1987987987987'</span><span class="p">)</span>


  <span class="c1">// Billing Address
</span>  <span class="o">-&gt;</span><span class="na">setBillingFirstName</span><span class="p">(</span><span class="s1">'Travis'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingLastName</span><span class="p">(</span><span class="s1">'Pastrana'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingAddress1</span><span class="p">(</span><span class="s1">'Muster Str. 12'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingZipCode</span><span class="p">(</span><span class="s1">'10178'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingCity</span><span class="p">(</span><span class="s1">'Los Angeles'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingState</span><span class="p">(</span><span class="s1">'CA'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingCountry</span><span class="p">(</span><span class="s1">'US'</span><span class="p">)</span>


  <span class="c1">// MPI Synchronous
</span>  <span class="o">-&gt;</span><span class="na">setCavv</span><span class="p">(</span><span class="s1">'AAACA1BHADYJkIASQkcAAAAAAAA='</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setEci</span><span class="p">(</span><span class="s1">'05'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setXid</span><span class="p">(</span><span class="s1">'0pv62FIrT5qQODB7DCewKgEBAQI='</span><span class="p">);</span>

<span class="k">try</span> <span class="p">{</span>
    <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">execute</span><span class="p">();</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">response</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">getResponseObject</span><span class="p">();</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">\Exception</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$e</span><span class="o">-&gt;</span><span class="na">getMessage</span><span class="p">();</span>
<span class="p">}</span>
</code></pre>

<pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.GenesisClient</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.TransactionResult</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.constants.Endpoints</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.constants.Environments</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.requests.financial.card.Sale3DRequest</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.model.Transaction</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Configuration</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Country</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Currency</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.math.BigDecimal</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">GenesisExample</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">()</span>  <span class="o">{</span>

    <span class="c1">// Create configuration</span>
    <span class="n">Configuration</span> <span class="n">configuration</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Configuration</span><span class="o">(</span><span class="n">Environments</span><span class="o">.</span><span class="na">STAGING</span><span class="o">,</span> <span class="n">Endpoints</span><span class="o">.</span><span class="na">EMERCHANTPAY</span><span class="o">);</span>

    <span class="n">configuration</span><span class="o">.</span><span class="na">setUsername</span><span class="o">(</span><span class="s">"SET_YOUR_USERNAME"</span><span class="o">);</span>
    <span class="n">configuration</span><span class="o">.</span><span class="na">setPassword</span><span class="o">(</span><span class="s">"SET_YOUR_PASSWORD"</span><span class="o">);</span>
    <span class="n">configuration</span><span class="o">.</span><span class="na">setToken</span><span class="o">(</span><span class="s">"SET_YOUR_TOKEN"</span><span class="o">);</span>

    <span class="n">Sale3DRequest</span> <span class="n">request</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Sale3DRequest</span><span class="o">();</span>

    <span class="n">request</span><span class="o">.</span><span class="na">setTransactionId</span><span class="o">(</span><span class="s">"43671"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setUsage</span><span class="o">(</span><span class="s">"40208 concert tickets"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setRemoteIp</span><span class="o">(</span><span class="s">"245.253.2.12"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setAmount</span><span class="o">(</span><span class="k">new</span> <span class="n">BigDecimal</span><span class="o">(</span><span class="mi">100</span><span class="o">));</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCurrency</span><span class="o">(</span><span class="s">"USD"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCardHolder</span><span class="o">(</span><span class="s">"Travis Pastrana"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCardNumber</span><span class="o">(</span><span class="s">"4200000000000000"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setExpirationMonth</span><span class="o">(</span><span class="s">"12"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setExpirationYear</span><span class="o">(</span><span class="s">"2020"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCvv</span><span class="o">(</span><span class="s">"834"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCustomerEmail</span><span class="o">(</span><span class="s">"travis@example.com"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCustomerPhone</span><span class="o">(</span><span class="s">"+1987987987987"</span><span class="o">);</span>


    <span class="c1">// Billing Address</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingFirstname</span><span class="o">(</span><span class="s">"Travis"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingLastname</span><span class="o">(</span><span class="s">"Pastrana"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingPrimaryAddress</span><span class="o">(</span><span class="s">"Muster Str. 12"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingZipCode</span><span class="o">(</span><span class="s">"10178"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingCity</span><span class="o">(</span><span class="s">"Los Angeles"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingState</span><span class="o">(</span><span class="s">"CA"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingCountry</span><span class="o">(</span><span class="s">"US"</span><span class="o">);</span>


    <span class="c1">// MPI Synchronous</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCavv</span><span class="o">(</span><span class="s">"AAACA1BHADYJkIASQkcAAAAAAAA="</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setEci</span><span class="o">(</span><span class="s">"05"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setXid</span><span class="o">(</span><span class="s">"0pv62FIrT5qQODB7DCewKgEBAQI="</span><span class="o">);</span>

    <span class="n">GenesisClient</span> <span class="n">client</span> <span class="o">=</span> <span class="k">new</span> <span class="n">GenesisClient</span><span class="o">(</span><span class="n">configuration</span><span class="o">,</span> <span class="n">request</span><span class="o">);</span>
    <span class="n">client</span><span class="o">.</span><span class="na">execute</span><span class="o">();</span>

    <span class="c1">// Parse Payment result</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">client</span><span class="o">.</span><span class="na">getResponse</span><span class="o">());</span>

  <span class="o">}</span>
<span class="o">}</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="kd">var</span> <span class="nx">genesis</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'genesis.js/lib/genesis.js'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">transaction</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">genesis</span><span class="p">.</span><span class="nx">transaction</span><span class="p">();</span>

<span class="kd">var</span> <span class="nx">failure</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">reason</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">reason</span><span class="p">);</span>
<span class="p">};</span>

<span class="kd">var</span> <span class="nx">success</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>

<span class="nx">transaction</span><span class="p">.</span><span class="nx">sale3d</span><span class="p">(</span>
  <span class="p">{</span>
    <span class="s2">"transaction_id"</span><span class="p">:</span> <span class="s2">"43671"</span><span class="p">,</span>
    <span class="s2">"usage"</span><span class="p">:</span> <span class="s2">"40208 concert tickets"</span><span class="p">,</span>
    <span class="s2">"remote_ip"</span><span class="p">:</span> <span class="s2">"245.253.2.12"</span><span class="p">,</span>
    <span class="s2">"amount"</span><span class="p">:</span> <span class="s2">"100"</span><span class="p">,</span>
    <span class="s2">"currency"</span><span class="p">:</span> <span class="s2">"USD"</span><span class="p">,</span>
    <span class="s2">"card_holder"</span><span class="p">:</span> <span class="s2">"Travis Pastrana"</span><span class="p">,</span>
    <span class="s2">"card_number"</span><span class="p">:</span> <span class="s2">"4200000000000000"</span><span class="p">,</span>
    <span class="s2">"expiration_month"</span><span class="p">:</span> <span class="s2">"12"</span><span class="p">,</span>
    <span class="s2">"expiration_year"</span><span class="p">:</span> <span class="mi">2020</span><span class="p">,</span>
    <span class="s2">"cvv"</span><span class="p">:</span> <span class="s2">"834"</span><span class="p">,</span>
    <span class="s2">"customer_email"</span><span class="p">:</span> <span class="s2">"travis@example.com"</span><span class="p">,</span>
    <span class="s2">"customer_phone"</span><span class="p">:</span> <span class="s2">"+1987987987987"</span><span class="p">,</span>
    <span class="s2">"billing_address"</span><span class="p">:</span> <span class="p">{</span>
      <span class="s2">"first_name"</span><span class="p">:</span> <span class="s2">"Travis"</span><span class="p">,</span>
      <span class="s2">"last_name"</span><span class="p">:</span> <span class="s2">"Pastrana"</span><span class="p">,</span>
      <span class="s2">"address1"</span><span class="p">:</span> <span class="s2">"Muster Str. 12"</span><span class="p">,</span>
      <span class="s2">"zip_code"</span><span class="p">:</span> <span class="s2">"10178"</span><span class="p">,</span>
      <span class="s2">"city"</span><span class="p">:</span> <span class="s2">"Los Angeles"</span><span class="p">,</span>
      <span class="s2">"state"</span><span class="p">:</span> <span class="s2">"CA"</span><span class="p">,</span>
      <span class="s2">"country"</span><span class="p">:</span> <span class="s2">"US"</span>
    <span class="p">},</span>
    <span class="s2">"mpi_params"</span><span class="p">:</span> <span class="p">{</span>
      <span class="s2">"cavv"</span><span class="p">:</span> <span class="s2">"AAACA1BHADYJkIASQkcAAAAAAAA="</span><span class="p">,</span>
      <span class="s2">"eci"</span><span class="p">:</span> <span class="s2">"05"</span><span class="p">,</span>
      <span class="s2">"xid"</span><span class="p">:</span> <span class="s2">"0pv62FIrT5qQODB7DCewKgEBAQI="</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">).</span><span class="nx">send</span><span class="p">()</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">success</span><span class="p">)</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">failure</span><span class="p">);</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>curl https://username:password@gate.emerchantpay.net/process/TERMINAL-TOKEN <span class="se">\</span>
   -H <span class="s2">"Content-Type: text/xml"</span> <span class="se">\</span>
   -d <span class="s1">'
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;sale3d&lt;/transaction_type&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;usage&gt;40208 concert tickets&lt;/usage&gt;
  &lt;remote_ip&gt;245.253.2.12&lt;/remote_ip&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
  &lt;card_holder&gt;Travis Pastrana&lt;/card_holder&gt;
  &lt;card_number&gt;4200000000000000&lt;/card_number&gt;
  &lt;expiration_month&gt;12&lt;/expiration_month&gt;
  &lt;expiration_year&gt;2020&lt;/expiration_year&gt;
  &lt;cvv&gt;834&lt;/cvv&gt;
  &lt;customer_email&gt;travis@example.com&lt;/customer_email&gt;
  &lt;customer_phone&gt;+1987987987987&lt;/customer_phone&gt;
  &lt;billing_address&gt;
    &lt;first_name&gt;Travis&lt;/first_name&gt;
    &lt;last_name&gt;Pastrana&lt;/last_name&gt;
    &lt;address1&gt;Muster Str. 12&lt;/address1&gt;
    &lt;zip_code&gt;10178&lt;/zip_code&gt;
    &lt;city&gt;Los Angeles&lt;/city&gt;
    &lt;state&gt;CA&lt;/state&gt;
    &lt;country&gt;US&lt;/country&gt;
  &lt;/billing_address&gt;
  &lt;mpi_params&gt;
    &lt;cavv&gt;AAACA1BHADYJkIASQkcAAAAAAAA=&lt;/cavv&gt;
    &lt;eci&gt;05&lt;/eci&gt;
    &lt;xid&gt;0pv62FIrT5qQODB7DCewKgEBAQI=&lt;/xid&gt;
  &lt;/mpi_params&gt;
&lt;/payment_transaction&gt;'</span>
</code></pre>

<blockquote>
<p>Asynchronous  Request</p>
</blockquote>

<pre class="highlight php tab-php"><code><span class="cp">&lt;?php</span>

<span class="c1">// Load the pre-configured ini file...
</span><span class="nx">\Genesis\Config</span><span class="o">::</span><span class="na">loadSettings</span><span class="p">(</span><span class="s1">'/path/to/config.ini'</span><span class="p">);</span>

<span class="nv">$genesis</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Genesis</span><span class="p">(</span><span class="s1">'Financial\Cards\Sale3D'</span><span class="p">);</span>
<span class="nv">$request</span> <span class="o">=</span> <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">request</span><span class="p">();</span>

<span class="nv">$request</span>
  <span class="o">-&gt;</span><span class="na">setTransactionId</span><span class="p">(</span><span class="s1">'43671'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setUsage</span><span class="p">(</span><span class="s1">'40208 concert tickets'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setRemoteIp</span><span class="p">(</span><span class="s1">'245.253.2.12'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setAmount</span><span class="p">(</span><span class="s1">'100'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCurrency</span><span class="p">(</span><span class="s1">'USD'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCardHolder</span><span class="p">(</span><span class="s1">'Travis Pastrana'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCardNumber</span><span class="p">(</span><span class="s1">'4200000000000000'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setExpirationMonth</span><span class="p">(</span><span class="s1">'12'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setExpirationYear</span><span class="p">(</span><span class="s1">'2020'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCvv</span><span class="p">(</span><span class="s1">'834'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCustomerEmail</span><span class="p">(</span><span class="s1">'travis@example.com'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCustomerPhone</span><span class="p">(</span><span class="s1">'+1987987987987'</span><span class="p">)</span>


  <span class="c1">// Billing Address
</span>  <span class="o">-&gt;</span><span class="na">setBillingFirstName</span><span class="p">(</span><span class="s1">'Travis'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingLastName</span><span class="p">(</span><span class="s1">'Pastrana'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingAddress1</span><span class="p">(</span><span class="s1">'Muster Str. 12'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingZipCode</span><span class="p">(</span><span class="s1">'10178'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingCity</span><span class="p">(</span><span class="s1">'Los Angeles'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingState</span><span class="p">(</span><span class="s1">'CA'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingCountry</span><span class="p">(</span><span class="s1">'US'</span><span class="p">)</span>


  <span class="c1">// MPI Asynchronous
</span>  <span class="o">-&gt;</span><span class="na">setNotificationUrl</span><span class="p">(</span><span class="s1">'https://www.example.com/notification'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setReturnSuccessUrl</span><span class="p">(</span><span class="s1">'http://www.example.com/success.html'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setReturnFailureUrl</span><span class="p">(</span><span class="s1">'http://www.example.com/failure.html'</span><span class="p">);</span>

<span class="k">try</span> <span class="p">{</span>
    <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">execute</span><span class="p">();</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">response</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">getResponseObject</span><span class="p">();</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">\Exception</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$e</span><span class="o">-&gt;</span><span class="na">getMessage</span><span class="p">();</span>
<span class="p">}</span>
</code></pre>

<pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.GenesisClient</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.TransactionResult</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.constants.Endpoints</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.constants.Environments</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.requests.financial.card.Sale3DRequest</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.model.Transaction</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Configuration</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Country</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Currency</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.math.BigDecimal</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">GenesisExample</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">()</span>  <span class="o">{</span>

    <span class="c1">// Create configuration</span>
    <span class="n">Configuration</span> <span class="n">configuration</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Configuration</span><span class="o">(</span><span class="n">Environments</span><span class="o">.</span><span class="na">STAGING</span><span class="o">,</span> <span class="n">Endpoints</span><span class="o">.</span><span class="na">EMERCHANTPAY</span><span class="o">);</span>

    <span class="n">configuration</span><span class="o">.</span><span class="na">setUsername</span><span class="o">(</span><span class="s">"SET_YOUR_USERNAME"</span><span class="o">);</span>
    <span class="n">configuration</span><span class="o">.</span><span class="na">setPassword</span><span class="o">(</span><span class="s">"SET_YOUR_PASSWORD"</span><span class="o">);</span>
    <span class="n">configuration</span><span class="o">.</span><span class="na">setToken</span><span class="o">(</span><span class="s">"SET_YOUR_TOKEN"</span><span class="o">);</span>

    <span class="n">Sale3DRequest</span> <span class="n">request</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Sale3DRequest</span><span class="o">();</span>

    <span class="n">request</span><span class="o">.</span><span class="na">setTransactionId</span><span class="o">(</span><span class="s">"43671"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setUsage</span><span class="o">(</span><span class="s">"40208 concert tickets"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setRemoteIp</span><span class="o">(</span><span class="s">"245.253.2.12"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setAmount</span><span class="o">(</span><span class="k">new</span> <span class="n">BigDecimal</span><span class="o">(</span><span class="mi">100</span><span class="o">));</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCurrency</span><span class="o">(</span><span class="s">"USD"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCardHolder</span><span class="o">(</span><span class="s">"Travis Pastrana"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCardNumber</span><span class="o">(</span><span class="s">"4200000000000000"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setExpirationMonth</span><span class="o">(</span><span class="s">"12"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setExpirationYear</span><span class="o">(</span><span class="s">"2020"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCvv</span><span class="o">(</span><span class="s">"834"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCustomerEmail</span><span class="o">(</span><span class="s">"travis@example.com"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCustomerPhone</span><span class="o">(</span><span class="s">"+1987987987987"</span><span class="o">);</span>


    <span class="c1">// Billing Address</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingFirstname</span><span class="o">(</span><span class="s">"Travis"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingLastname</span><span class="o">(</span><span class="s">"Pastrana"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingPrimaryAddress</span><span class="o">(</span><span class="s">"Muster Str. 12"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingZipCode</span><span class="o">(</span><span class="s">"10178"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingCity</span><span class="o">(</span><span class="s">"Los Angeles"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingState</span><span class="o">(</span><span class="s">"CA"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingCountry</span><span class="o">(</span><span class="s">"US"</span><span class="o">);</span>


    <span class="c1">// MPI Asynchronous</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setNotificationUrl</span><span class="o">(</span><span class="s">"https://www.example.com/notification"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setReturnSuccessUrl</span><span class="o">(</span><span class="s">"http://www.example.com/success.html"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setReturnFailureUrl</span><span class="o">(</span><span class="s">"http://www.example.com/failure.html"</span><span class="o">);</span>

    <span class="n">GenesisClient</span> <span class="n">client</span> <span class="o">=</span> <span class="k">new</span> <span class="n">GenesisClient</span><span class="o">(</span><span class="n">configuration</span><span class="o">,</span> <span class="n">request</span><span class="o">);</span>
    <span class="n">client</span><span class="o">.</span><span class="na">execute</span><span class="o">();</span>

    <span class="c1">// Parse Payment result</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">client</span><span class="o">.</span><span class="na">getResponse</span><span class="o">());</span>

  <span class="o">}</span>
<span class="o">}</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="kd">var</span> <span class="nx">genesis</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'genesis.js/lib/genesis.js'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">transaction</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">genesis</span><span class="p">.</span><span class="nx">transaction</span><span class="p">();</span>

<span class="kd">var</span> <span class="nx">failure</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">reason</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">reason</span><span class="p">);</span>
<span class="p">};</span>

<span class="kd">var</span> <span class="nx">success</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>

<span class="nx">transaction</span><span class="p">.</span><span class="nx">sale3d</span><span class="p">(</span>
  <span class="p">{</span>
    <span class="s2">"transaction_id"</span><span class="p">:</span> <span class="s2">"43671"</span><span class="p">,</span>
    <span class="s2">"usage"</span><span class="p">:</span> <span class="s2">"40208 concert tickets"</span><span class="p">,</span>
    <span class="s2">"remote_ip"</span><span class="p">:</span> <span class="s2">"245.253.2.12"</span><span class="p">,</span>
    <span class="s2">"amount"</span><span class="p">:</span> <span class="s2">"100"</span><span class="p">,</span>
    <span class="s2">"currency"</span><span class="p">:</span> <span class="s2">"USD"</span><span class="p">,</span>
    <span class="s2">"card_holder"</span><span class="p">:</span> <span class="s2">"Travis Pastrana"</span><span class="p">,</span>
    <span class="s2">"card_number"</span><span class="p">:</span> <span class="s2">"4200000000000000"</span><span class="p">,</span>
    <span class="s2">"expiration_month"</span><span class="p">:</span> <span class="s2">"12"</span><span class="p">,</span>
    <span class="s2">"expiration_year"</span><span class="p">:</span> <span class="mi">2020</span><span class="p">,</span>
    <span class="s2">"cvv"</span><span class="p">:</span> <span class="s2">"834"</span><span class="p">,</span>
    <span class="s2">"customer_email"</span><span class="p">:</span> <span class="s2">"travis@example.com"</span><span class="p">,</span>
    <span class="s2">"customer_phone"</span><span class="p">:</span> <span class="s2">"+1987987987987"</span><span class="p">,</span>
    <span class="s2">"billing_address"</span><span class="p">:</span> <span class="p">{</span>
      <span class="s2">"first_name"</span><span class="p">:</span> <span class="s2">"Travis"</span><span class="p">,</span>
      <span class="s2">"last_name"</span><span class="p">:</span> <span class="s2">"Pastrana"</span><span class="p">,</span>
      <span class="s2">"address1"</span><span class="p">:</span> <span class="s2">"Muster Str. 12"</span><span class="p">,</span>
      <span class="s2">"zip_code"</span><span class="p">:</span> <span class="s2">"10178"</span><span class="p">,</span>
      <span class="s2">"city"</span><span class="p">:</span> <span class="s2">"Los Angeles"</span><span class="p">,</span>
      <span class="s2">"state"</span><span class="p">:</span> <span class="s2">"CA"</span><span class="p">,</span>
      <span class="s2">"country"</span><span class="p">:</span> <span class="s2">"US"</span>
    <span class="p">},</span>
    <span class="s2">"notification_url"</span><span class="p">:</span> <span class="s2">"https://www.example.com/notification"</span><span class="p">,</span>
    <span class="s2">"return_success_url"</span><span class="p">:</span> <span class="s2">"http://www.example.com/success.html"</span><span class="p">,</span>
    <span class="s2">"return_failure_url"</span><span class="p">:</span> <span class="s2">"http://www.example.com/failure.html"</span>
  <span class="p">}</span>
<span class="p">).</span><span class="nx">send</span><span class="p">()</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">success</span><span class="p">)</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">failure</span><span class="p">);</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>curl https://username:password@gate.emerchantpay.net/process/TERMINAL-TOKEN <span class="se">\</span>
   -H <span class="s2">"Content-Type: text/xml"</span> <span class="se">\</span>
   -d <span class="s1">'
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;sale3d&lt;/transaction_type&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;usage&gt;40208 concert tickets&lt;/usage&gt;
  &lt;remote_ip&gt;245.253.2.12&lt;/remote_ip&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
  &lt;card_holder&gt;Travis Pastrana&lt;/card_holder&gt;
  &lt;card_number&gt;4200000000000000&lt;/card_number&gt;
  &lt;expiration_month&gt;12&lt;/expiration_month&gt;
  &lt;expiration_year&gt;2020&lt;/expiration_year&gt;
  &lt;cvv&gt;834&lt;/cvv&gt;
  &lt;customer_email&gt;travis@example.com&lt;/customer_email&gt;
  &lt;customer_phone&gt;+1987987987987&lt;/customer_phone&gt;
  &lt;billing_address&gt;
    &lt;first_name&gt;Travis&lt;/first_name&gt;
    &lt;last_name&gt;Pastrana&lt;/last_name&gt;
    &lt;address1&gt;Muster Str. 12&lt;/address1&gt;
    &lt;zip_code&gt;10178&lt;/zip_code&gt;
    &lt;city&gt;Los Angeles&lt;/city&gt;
    &lt;state&gt;CA&lt;/state&gt;
    &lt;country&gt;US&lt;/country&gt;
  &lt;/billing_address&gt;
  &lt;notification_url&gt;https://www.example.com/notification&lt;/notification_url&gt;
  &lt;return_success_url&gt;http://www.example.com/success.html&lt;/return_success_url&gt;
  &lt;return_failure_url&gt;http://www.example.com/failure.html&lt;/return_failure_url&gt;
&lt;/payment_transaction&gt;'</span>
</code></pre>

<p><strong>Request Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>required</td>
<td>string(255)</td>
<td>The transaction type: <strong>sale3d</strong></td>
</tr>
<tr>
<td>transaction_id</td>
<td>required</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>usage</td>
<td>optional</td>
<td>string(255)</td>
<td>Description of the transaction for later use</td>
</tr>
<tr>
<td>gaming</td>
<td>optional</td>
<td>&quot;true&quot;</td>
<td>Signifies whether a gaming transaction is performed. Gaming transactions usually use MCC 7995, contact tech support for more details.</td>
</tr>
<tr>
<td>moto</td>
<td>optional</td>
<td>&quot;true&quot;</td>
<td>Signifies whether a MOTO (mail order telephone order) transaction is performed. Contact tech support for more details.</td>
</tr>
<tr>
<td>remote_ip</td>
<td>required*</td>
<td>IPv4 address</td>
<td>IPv4 address of customer</td>
</tr>
<tr>
<td>notification_url</td>
<td>required<sup>1</sup></td>
<td>url</td>
<td>URL at merchant where gateway sends outcome of transaction.</td>
</tr>
<tr>
<td>return_success_url</td>
<td>required<sup>1</sup></td>
<td>url</td>
<td>URL where customer is sent to after successful payment</td>
</tr>
<tr>
<td>return_failure_url</td>
<td>required<sup>1</sup></td>
<td>url</td>
<td>URL where customer is sent to after unsuccessful payment</td>
</tr>
<tr>
<td>amount</td>
<td>required</td>
<td>integer &gt; 0</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>required</td>
<td>string(3)</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>card_holder</td>
<td>required</td>
<td>string(255)</td>
<td>Full name of customer as printed on credit card (first name and last name at least)</td>
</tr>
<tr>
<td>card_number</td>
<td>required</td>
<td>13 to 16 digits</td>
<td>Complete cc number of customer</td>
</tr>
<tr>
<td>cvv</td>
<td>required</td>
<td>3 to 4 digits</td>
<td>cvv of cc, requirement is based on terminal configuration</td>
</tr>
<tr>
<td>expiration_month</td>
<td>required</td>
<td>MM</td>
<td>Expiration month as printed on credit card</td>
</tr>
<tr>
<td>expiration_year</td>
<td>required</td>
<td>YYYY</td>
<td>Expiration year as printed on credit card</td>
</tr>
<tr>
<td>token</td>
<td>optional</td>
<td>string(36)</td>
<td>See <a href="#tokenization">Tokenization</a> for more details. If present, the cardholder parameters can be omitted. Cannot be set together with <code>remember_card</code></td>
</tr>
<tr>
<td>remember_card</td>
<td>optional</td>
<td>&quot;true&quot;</td>
<td>See <a href="#tokenize">Tokenize</a>. Tokenizes cardholder parameters. Cannot be set together with <code>token</code></td>
</tr>
<tr>
<td>consumer_id</td>
<td>optional</td>
<td>string(10)</td>
<td>See <a href="#consumers">Consumers</a> and <a href="#tokenization">Tokenization</a>. Combine with <code>remember_card</code> to tokenize or with <code>token</code> to use token</td>
</tr>
<tr>
<td><strong>credential_on_file</strong></td>
<td>required*</td>
<td></td>
<td>See <a href="#credential-on-file-cof" target="_self">Credential On File (COF)</a> for more details</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;initial_customer_initiated</td>
<td>required*</td>
<td>string(18)</td>
<td>Initial transaction initiated by customer. Required for external tokenization, and optional for gateway-based tokenization</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;subsequent_customer_initiated</td>
<td>required*</td>
<td>string(18)</td>
<td>Subsequent transaction initiated by customer. Required for external tokenization, and optional for gateway-based tokenization</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;merchant_unscheduled</td>
<td>optional</td>
<td>string(20)</td>
<td>Transaction is initiated by the merchant</td>
</tr>
<tr>
<td>customer_email</td>
<td>required*</td>
<td>e-mail address</td>
<td>Must contain valid e-mail of customer</td>
</tr>
<tr>
<td>customer_phone</td>
<td>required*</td>
<td>string(32)</td>
<td>Must contain valid phone number of customer</td>
</tr>
<tr>
<td>birth_date</td>
<td>required*</td>
<td>dd-mm-yyyy</td>
<td>Required when MCC is a Financial Services one (e.g. MCC 6012) and either card brand is Visa or Mastercard/Maestro with UK-based merchant, UK-based bin (domestic), and DEBIT card type</td>
</tr>
<tr>
<td>document_id</td>
<td>required*</td>
<td>sring(20)</td>
<td>Document ID of the consumer. See <a href="#document-id-parameter">Document ID Parameter</a> for more details.</td>
</tr>
<tr>
<td><strong>billing_address</strong></td>
<td>required</td>
<td></td>
<td>See <a href="#required-vs-optional-api-params">Required vs Optional API params</a> for details</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;first_name</td>
<td>required*</td>
<td>string(255)</td>
<td>Customer first name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;last_name</td>
<td>required*</td>
<td>string(255)</td>
<td>Customer last name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address1</td>
<td>required*</td>
<td>string(255)</td>
<td>Primary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address2</td>
<td>required*</td>
<td>string(255)</td>
<td>Secondary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;zip_code</td>
<td>required*</td>
<td>string</td>
<td>ZIP code</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;city</td>
<td>required*</td>
<td>string(255)</td>
<td>City</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;state</td>
<td>required*</td>
<td>string(2)</td>
<td>State code in <a href="https://en.wikipedia.org/wiki/ISO_3166-2">ISO 3166-2</a>, required for USA and Canada</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;country</td>
<td>required*</td>
<td>string(2)</td>
<td>Country code in <a href="https://www.iso.org/iso-3166-country-codes.html">ISO 3166</a></td>
</tr>
<tr>
<td><strong>shipping_address</strong></td>
<td>optional</td>
<td></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;first_name</td>
<td>optional</td>
<td>string(255)</td>
<td>Customer first name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;last_name</td>
<td>optional</td>
<td>string(255)</td>
<td>Customer last name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address1</td>
<td>optional</td>
<td>string(255)</td>
<td>Primary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address2</td>
<td>optional</td>
<td>string(255)</td>
<td>Secondary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;zip_code</td>
<td>optional</td>
<td>string</td>
<td>ZIP code</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;city</td>
<td>optional</td>
<td>string(255)</td>
<td>City</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;state</td>
<td>optional</td>
<td>string(2)</td>
<td>State code in <a href="https://en.wikipedia.org/wiki/ISO_3166-2">ISO 3166-2</a>, required for USA and Canada</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;country</td>
<td>optional</td>
<td>string(2)</td>
<td>Country code in <a href="https://www.iso.org/iso-3166-country-codes.html">ISO 3166</a></td>
</tr>
<tr>
<td><strong>mpi_params</strong></td>
<td>required<sup>2</sup></td>
<td></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;cavv</td>
<td>required<sup>3</sup></td>
<td>string(255)</td>
<td>Verification Id of the authentication. Please note this can be the CAVV for Visa Card or UCAF to identify MasterCard.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;eci</td>
<td>required<sup>3</sup></td>
<td>string(255)</td>
<td>See <a href="#electronic-commerce-indicator">Electronic Commerce Indicator as returned from the MPI</a> for details</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;xid</td>
<td>required<sup>3</sup></td>
<td>string(255)</td>
<td>Transaction ID generated by the 3D Secure service that uniquely identifies a 3D Secure check request</td>
</tr>
<tr>
<td><strong>dynamic_descriptor_params</strong></td>
<td>optional</td>
<td></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;merchant_name</td>
<td>optional</td>
<td>string(25)</td>
<td>Allows to dynamically override the charge descriptor</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;merchant_city</td>
<td>optional</td>
<td>string(13)</td>
<td>Allows to dynamically override the merchant phone number</td>
</tr>
</tbody></table>

<p><code>required* = conditionally required</code></p>

<p><code>1 - required if mpi_params is not present, transaction will be handled asynchronous.</code></p>

<p><code>2 - required if transaction should be handled synchronous.</code></p>

<p><code>3 - eci is always required if mpi_params is present. xid and cavv are not required for the 3D attempted only workflow, where the merchant does not have the xid/cavv, only the eci.</code></p>

<blockquote>
<p>Successful Synchronous Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>stdClass Object
(
    [transaction_type] =&gt; sale3d
    [status] =&gt; approved
    [mode] =&gt; live
    [transaction_id] =&gt; 43671
    [unique_id] =&gt; 44177a21403427eb96664a6d7e5d5d48
    [consumer_id] =&gt; 123456
    [token] =&gt; ee946db8-d7db-4bb7-b608-b65b153e127d
    [avs_response_code] =&gt; 5I
    [avs_response_text] =&gt; Response provided by issuer processor; Address information not verified
    [authorization_code] =&gt; 345678
    [response_code] =&gt; 00
    [timestamp] =&gt; DateTime Object
        (
            [date] =&gt; 2019-03-14 12:05:56.000000
            [timezone_type] =&gt; 2
            [timezone] =&gt; Z
        )
    [descriptor] =&gt; Descriptor one
    [amount] =&gt; 100
    [currency] =&gt; USD
    [sent_to_acquirer] =&gt; true
    [partial_approval] =&gt; true
)
</code></pre>

<pre class="highlight java tab-java"><code><span class="o">&lt;</span><span class="n">payment_response</span> <span class="n">content</span><span class="o">=[</span>
    <span class="o">&lt;</span><span class="n">transaction_type</span> <span class="n">content</span><span class="o">=[</span><span class="n">sale3d</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">status</span> <span class="n">content</span><span class="o">=[</span><span class="n">approved</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">mode</span> <span class="n">content</span><span class="o">=[</span><span class="n">live</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">transaction_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">43671</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">unique_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">44177</span><span class="n">a21403427eb96664a6d7e5d5d48</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">consumer_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">123456</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">token</span> <span class="n">content</span><span class="o">=[</span><span class="n">ee946db8</span><span class="o">-</span><span class="n">d7db</span><span class="o">-</span><span class="mi">4</span><span class="n">bb7</span><span class="o">-</span><span class="n">b608</span><span class="o">-</span><span class="n">b65b153e127d</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">avs_response_code</span> <span class="n">content</span><span class="o">=[</span><span class="mi">5</span><span class="n">I</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">avs_response_text</span> <span class="n">content</span><span class="o">=[</span><span class="n">Response</span> <span class="n">provided</span> <span class="n">by</span> <span class="n">issuer</span> <span class="n">processor</span><span class="o">;</span> <span class="n">Address</span> <span class="n">information</span> <span class="n">not</span> <span class="n">verified</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">authorization_code</span> <span class="n">content</span><span class="o">=[</span><span class="mi">345678</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">response_code</span> <span class="n">content</span><span class="o">=[</span><span class="mo">00</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">timestamp</span> <span class="n">content</span><span class="o">=[</span><span class="mi">2019</span><span class="o">-</span><span class="mo">03</span><span class="o">-</span><span class="mi">14</span><span class="nl">T12:</span><span class="mo">05</span><span class="o">:</span><span class="mi">56</span><span class="n">Z</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">descriptor</span> <span class="n">content</span><span class="o">=[</span><span class="n">Descriptor</span> <span class="n">one</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">amount</span> <span class="n">content</span><span class="o">=[</span><span class="mi">100</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">currency</span> <span class="n">content</span><span class="o">=[</span><span class="n">USD</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">sent_to_acquirer</span> <span class="n">content</span><span class="o">=[</span><span class="kc">true</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">partial_approval</span> <span class="n">content</span><span class="o">=[</span><span class="kc">true</span><span class="o">]&gt;</span>
<span class="o">]&gt;</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="p">{</span>
    <span class="nl">transaction_type</span><span class="p">:</span> <span class="s2">"sale3d"</span><span class="p">,</span>
    <span class="nx">status</span><span class="p">:</span> <span class="s2">"approved"</span><span class="p">,</span>
    <span class="nx">mode</span><span class="p">:</span> <span class="s2">"live"</span><span class="p">,</span>
    <span class="nx">transaction_id</span><span class="p">:</span> <span class="s2">"43671"</span><span class="p">,</span>
    <span class="nx">unique_id</span><span class="p">:</span> <span class="s2">"44177a21403427eb96664a6d7e5d5d48"</span><span class="p">,</span>
    <span class="nx">consumer_id</span><span class="p">:</span> <span class="s2">"123456"</span><span class="p">,</span>
    <span class="nx">token</span><span class="p">:</span> <span class="s2">"ee946db8-d7db-4bb7-b608-b65b153e127d"</span><span class="p">,</span>
    <span class="nx">avs_response_code</span><span class="p">:</span> <span class="s2">"5I"</span><span class="p">,</span>
    <span class="nx">avs_response_text</span><span class="p">:</span> <span class="s2">"Response provided by issuer processor; Address information not verified"</span><span class="p">,</span>
    <span class="nx">authorization_code</span><span class="p">:</span> <span class="s2">"345678"</span><span class="p">,</span>
    <span class="nx">response_code</span><span class="p">:</span> <span class="s2">"00"</span><span class="p">,</span>
    <span class="nx">timestamp</span><span class="p">:</span> <span class="s2">"2019-03-14T12:05:56Z"</span><span class="p">,</span>
    <span class="nx">descriptor</span><span class="p">:</span> <span class="s2">"Descriptor one"</span><span class="p">,</span>
    <span class="nx">amount</span><span class="p">:</span> <span class="s2">"100"</span><span class="p">,</span>
    <span class="nx">currency</span><span class="p">:</span> <span class="s2">"USD"</span><span class="p">,</span>
    <span class="nx">sent_to_acquirer</span><span class="p">:</span> <span class="s2">"true"</span><span class="p">,</span>
    <span class="nx">partial_approval</span><span class="p">:</span> <span class="s2">"true"</span><span class="p">,</span>
<span class="p">}</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;sale3d&lt;/transaction_type&gt;
  &lt;status&gt;approved&lt;/status&gt;
  &lt;mode&gt;live&lt;/mode&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;consumer_id&gt;123456&lt;/consumer_id&gt;
  &lt;token&gt;ee946db8-d7db-4bb7-b608-b65b153e127d&lt;/token&gt;
  &lt;avs_response_code&gt;5I&lt;/avs_response_code&gt;
  &lt;avs_response_text&gt;Response provided by issuer processor; Address information not verified&lt;/avs_response_text&gt;
  &lt;authorization_code&gt;345678&lt;/authorization_code&gt;
  &lt;response_code&gt;00&lt;/response_code&gt;
  &lt;timestamp&gt;2019-03-14T12:05:56Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
  &lt;sent_to_acquirer&gt;true&lt;/sent_to_acquirer&gt;
  &lt;partial_approval&gt;true&lt;/partial_approval&gt;
&lt;/payment_transaction&gt;
</code></pre>

<blockquote>
<p>Successful Asynchronous Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>stdClass Object
(
    [transaction_type] =&gt; sale3d
    [status] =&gt; pending_async
    [mode] =&gt; live
    [transaction_id] =&gt; 43671
    [unique_id] =&gt; 44177a21403427eb96664a6d7e5d5d48
    [consumer_id] =&gt; 123456
    [token] =&gt; ee946db8-d7db-4bb7-b608-b65b153e127d
    [technical_message] =&gt; Transaction successful!
    [message] =&gt; Transaction successful!
    [redirect_url] =&gt; https://gate.emerchantpay.net/redirect/to_acquirer/649e1ff35c61
    [timestamp] =&gt; DateTime Object
        (
            [date] =&gt; 2019-03-14 12:05:56.000000
            [timezone_type] =&gt; 2
            [timezone] =&gt; Z
        )
    [descriptor] =&gt; Descriptor one
    [amount] =&gt; 100
    [currency] =&gt; USD
    [sent_to_acquirer] =&gt; true
)
</code></pre>

<pre class="highlight java tab-java"><code><span class="o">&lt;</span><span class="n">payment_response</span> <span class="n">content</span><span class="o">=[</span>
    <span class="o">&lt;</span><span class="n">transaction_type</span> <span class="n">content</span><span class="o">=[</span><span class="n">sale3d</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">status</span> <span class="n">content</span><span class="o">=[</span><span class="n">pending_async</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">mode</span> <span class="n">content</span><span class="o">=[</span><span class="n">live</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">transaction_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">43671</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">unique_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">44177</span><span class="n">a21403427eb96664a6d7e5d5d48</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">consumer_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">123456</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">token</span> <span class="n">content</span><span class="o">=[</span><span class="n">ee946db8</span><span class="o">-</span><span class="n">d7db</span><span class="o">-</span><span class="mi">4</span><span class="n">bb7</span><span class="o">-</span><span class="n">b608</span><span class="o">-</span><span class="n">b65b153e127d</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">technical_message</span> <span class="n">content</span><span class="o">=[</span><span class="n">Transaction</span> <span class="n">successful</span><span class="o">!]&gt;</span>
    <span class="o">&lt;</span><span class="n">message</span> <span class="n">content</span><span class="o">=[</span><span class="n">Transaction</span> <span class="n">successful</span><span class="o">!]&gt;</span>
    <span class="o">&lt;</span><span class="n">redirect_url</span> <span class="n">content</span><span class="o">=[</span><span class="nl">https:</span><span class="c1">//gate.emerchantpay.net/redirect/to_acquirer/649e1ff35c61]&gt;</span>
    <span class="o">&lt;</span><span class="n">timestamp</span> <span class="n">content</span><span class="o">=[</span><span class="mi">2019</span><span class="o">-</span><span class="mo">03</span><span class="o">-</span><span class="mi">14</span><span class="nl">T12:</span><span class="mo">05</span><span class="o">:</span><span class="mi">56</span><span class="n">Z</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">descriptor</span> <span class="n">content</span><span class="o">=[</span><span class="n">Descriptor</span> <span class="n">one</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">amount</span> <span class="n">content</span><span class="o">=[</span><span class="mi">100</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">currency</span> <span class="n">content</span><span class="o">=[</span><span class="n">USD</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">sent_to_acquirer</span> <span class="n">content</span><span class="o">=[</span><span class="kc">true</span><span class="o">]&gt;</span>
<span class="o">]&gt;</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="p">{</span>
    <span class="nl">transaction_type</span><span class="p">:</span> <span class="s2">"sale3d"</span><span class="p">,</span>
    <span class="nx">status</span><span class="p">:</span> <span class="s2">"pending_async"</span><span class="p">,</span>
    <span class="nx">mode</span><span class="p">:</span> <span class="s2">"live"</span><span class="p">,</span>
    <span class="nx">transaction_id</span><span class="p">:</span> <span class="s2">"43671"</span><span class="p">,</span>
    <span class="nx">unique_id</span><span class="p">:</span> <span class="s2">"44177a21403427eb96664a6d7e5d5d48"</span><span class="p">,</span>
    <span class="nx">consumer_id</span><span class="p">:</span> <span class="s2">"123456"</span><span class="p">,</span>
    <span class="nx">token</span><span class="p">:</span> <span class="s2">"ee946db8-d7db-4bb7-b608-b65b153e127d"</span><span class="p">,</span>
    <span class="nx">technical_message</span><span class="p">:</span> <span class="s2">"Transaction successful!"</span><span class="p">,</span>
    <span class="nx">message</span><span class="p">:</span> <span class="s2">"Transaction successful!"</span><span class="p">,</span>
    <span class="nx">redirect_url</span><span class="p">:</span> <span class="s2">"https://gate.emerchantpay.net/redirect/to_acquirer/649e1ff35c61"</span><span class="p">,</span>
    <span class="nx">timestamp</span><span class="p">:</span> <span class="s2">"2019-03-14T12:05:56Z"</span><span class="p">,</span>
    <span class="nx">descriptor</span><span class="p">:</span> <span class="s2">"Descriptor one"</span><span class="p">,</span>
    <span class="nx">amount</span><span class="p">:</span> <span class="s2">"100"</span><span class="p">,</span>
    <span class="nx">currency</span><span class="p">:</span> <span class="s2">"USD"</span><span class="p">,</span>
    <span class="nx">sent_to_acquirer</span><span class="p">:</span> <span class="s2">"true"</span><span class="p">,</span>
<span class="p">}</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;sale3d&lt;/transaction_type&gt;
  &lt;status&gt;pending_async&lt;/status&gt;
  &lt;mode&gt;live&lt;/mode&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;consumer_id&gt;123456&lt;/consumer_id&gt;
  &lt;token&gt;ee946db8-d7db-4bb7-b608-b65b153e127d&lt;/token&gt;
  &lt;technical_message&gt;Transaction successful!&lt;/technical_message&gt;
  &lt;message&gt;Transaction successful!&lt;/message&gt;
  &lt;redirect_url&gt;https://gate.emerchantpay.net/redirect/to_acquirer/649e1ff35c61&lt;/redirect_url&gt;
  &lt;timestamp&gt;2019-03-14T12:05:56Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
  &lt;sent_to_acquirer&gt;true&lt;/sent_to_acquirer&gt;
&lt;/payment_transaction&gt;
</code></pre>

<p><strong>Successful Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>The transaction type</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>transaction_id</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>unique_id</td>
<td>string(32)</td>
<td>Unique id defined by gate (must later be used if capturing, voiding or refunding a transaction)</td>
</tr>
<tr>
<td>consumer_id</td>
<td>string(10)</td>
<td>Consumer unique reference. See <a href="#consumers">Consumers</a></td>
</tr>
<tr>
<td>token</td>
<td>string(36)</td>
<td>Plain-text token value. See <a href="#tokenization">Tokenization</a></td>
</tr>
<tr>
<td>gaming</td>
<td>string</td>
<td>Signifies whether a gaming transaction is performed. Gaming transactions usually use MCC 7995, contact tech support for more details.</td>
</tr>
<tr>
<td>moto</td>
<td>string</td>
<td>Signifies whether a MOTO (mail order telephone order) transaction is performed. Contact tech support for more details.</td>
</tr>
<tr>
<td>avs_response_code</td>
<td>string</td>
<td>Generated by the card network on trying to match the billing address when performing the address verification. Optional, returned if config is enabled and acquirer supports it. Check <a href="#avs-status-codes">AVS Status Codes</a> for details.</td>
</tr>
<tr>
<td>avs_response_text</td>
<td>string</td>
<td>Gives the human response text for the AVS response code above. Optional, returned if config is enabled and acquirer supports it. Check [AVS Status Codes](#avs-status-codes for details.</td>
</tr>
<tr>
<td>authorization_code</td>
<td>string(6)</td>
<td>Generated by the card network when an authorisation has occurred, used to identify that auth. Consists of 6 alphanumeric chars</td>
</tr>
<tr>
<td>response_code</td>
<td>string(2)</td>
<td>Defines the issuer result of a transaction, the status of a message or some action taken or required. See <a href="#issuer-response-codes">issuer response codes</a> for details</td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
<tr>
<td>message</td>
<td>string(255)</td>
<td>Human readable error message which can be displayed to users.</td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>redirect_url</td>
<td>url</td>
<td>URL where user has to be redirected to complete payment process. It is available for asynchronous mode</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when the transaction was processed in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Combined date and time</a> e.g. 2007-08- 30T17:46:11Z</td>
</tr>
<tr>
<td>descriptor</td>
<td>string</td>
<td>Static descriptor MID info as configured on the gateway</td>
</tr>
<tr>
<td>amount</td>
<td>integer</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>partial_approval</td>
<td>string(4)</td>
<td>Optional, set to ’true’ if partial approval happened. Partially approved amount is then in the amount field. Check <a href="#partial-approvals">Partial Approvals</a> for details</td>
</tr>
<tr>
<td>sent_to_acquirer</td>
<td>string</td>
<td>&quot;true&quot; or &quot;false&quot;</td>
</tr>
<tr>
<td>dynamic_descriptor_params</td>
<td>section</td>
<td>Optional, returned only if dynamic desc params are submitted on the API. Note here that the formatted dyn desc params are returned - as they would be submitted to the schemes for settlement.</td>
</tr>
</tbody></table>

<blockquote>
<p>Error Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>stdClass Object
(
    [transaction_type] =&gt; sale3d
    [status] =&gt; error
    [mode] =&gt; live
    [transaction_id] =&gt; 43671
    [unique_id] =&gt; 44177a21403427eb96664a6d7e5d5d48
    [response_code] =&gt; 57
    [code] =&gt; 340
    [technical_message] =&gt; expiration_year is invalid
    [message] =&gt; expiration_year is invalid
    [timestamp] =&gt; DateTime Object
        (
            [date] =&gt; 2019-03-14 12:05:56.000000
            [timezone_type] =&gt; 2
            [timezone] =&gt; Z
        )
    [descriptor] =&gt; Descriptor one
    [amount] =&gt; 100
    [currency] =&gt; USD
    [sent_to_acquirer] =&gt; false
)
</code></pre>

<pre class="highlight java tab-java"><code><span class="o">&lt;</span><span class="n">payment_response</span> <span class="n">content</span><span class="o">=[</span>
    <span class="o">&lt;</span><span class="n">transaction_type</span> <span class="n">content</span><span class="o">=[</span><span class="n">sale3d</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">status</span> <span class="n">content</span><span class="o">=[</span><span class="n">error</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">mode</span> <span class="n">content</span><span class="o">=[</span><span class="n">live</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">transaction_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">43671</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">unique_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">44177</span><span class="n">a21403427eb96664a6d7e5d5d48</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">response_code</span> <span class="n">content</span><span class="o">=[</span><span class="mi">57</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">code</span> <span class="n">content</span><span class="o">=[</span><span class="mi">340</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">technical_message</span> <span class="n">content</span><span class="o">=[</span><span class="n">expiration_year</span> <span class="n">is</span> <span class="n">invalid</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">message</span> <span class="n">content</span><span class="o">=[</span><span class="n">expiration_year</span> <span class="n">is</span> <span class="n">invalid</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">timestamp</span> <span class="n">content</span><span class="o">=[</span><span class="mi">2019</span><span class="o">-</span><span class="mo">03</span><span class="o">-</span><span class="mi">14</span><span class="nl">T12:</span><span class="mo">05</span><span class="o">:</span><span class="mi">56</span><span class="n">Z</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">descriptor</span> <span class="n">content</span><span class="o">=[</span><span class="n">Descriptor</span> <span class="n">one</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">amount</span> <span class="n">content</span><span class="o">=[</span><span class="mi">100</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">currency</span> <span class="n">content</span><span class="o">=[</span><span class="n">USD</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">sent_to_acquirer</span> <span class="n">content</span><span class="o">=[</span><span class="kc">false</span><span class="o">]&gt;</span>
<span class="o">]&gt;</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="p">{</span>
    <span class="nl">transaction_type</span><span class="p">:</span> <span class="s2">"sale3d"</span><span class="p">,</span>
    <span class="nx">status</span><span class="p">:</span> <span class="s2">"error"</span><span class="p">,</span>
    <span class="nx">mode</span><span class="p">:</span> <span class="s2">"live"</span><span class="p">,</span>
    <span class="nx">transaction_id</span><span class="p">:</span> <span class="s2">"43671"</span><span class="p">,</span>
    <span class="nx">unique_id</span><span class="p">:</span> <span class="s2">"44177a21403427eb96664a6d7e5d5d48"</span><span class="p">,</span>
    <span class="nx">response_code</span><span class="p">:</span> <span class="s2">"57"</span><span class="p">,</span>
    <span class="nx">code</span><span class="p">:</span> <span class="s2">"340"</span><span class="p">,</span>
    <span class="nx">technical_message</span><span class="p">:</span> <span class="s2">"expiration_year is invalid"</span><span class="p">,</span>
    <span class="nx">message</span><span class="p">:</span> <span class="s2">"expiration_year is invalid"</span><span class="p">,</span>
    <span class="nx">timestamp</span><span class="p">:</span> <span class="s2">"2019-03-14T12:05:56Z"</span><span class="p">,</span>
    <span class="nx">descriptor</span><span class="p">:</span> <span class="s2">"Descriptor one"</span><span class="p">,</span>
    <span class="nx">amount</span><span class="p">:</span> <span class="s2">"100"</span><span class="p">,</span>
    <span class="nx">currency</span><span class="p">:</span> <span class="s2">"USD"</span><span class="p">,</span>
    <span class="nx">sent_to_acquirer</span><span class="p">:</span> <span class="s2">"false"</span><span class="p">,</span>
<span class="p">}</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;sale3d&lt;/transaction_type&gt;
  &lt;status&gt;error&lt;/status&gt;
  &lt;mode&gt;live&lt;/mode&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;response_code&gt;57&lt;/response_code&gt;
  &lt;code&gt;340&lt;/code&gt;
  &lt;technical_message&gt;expiration_year is invalid&lt;/technical_message&gt;
  &lt;message&gt;expiration_year is invalid&lt;/message&gt;
  &lt;timestamp&gt;2019-03-14T12:05:56Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
  &lt;sent_to_acquirer&gt;false&lt;/sent_to_acquirer&gt;
&lt;/payment_transaction&gt;
</code></pre>

<p><strong>Error Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>The transaction type</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>transaction_id</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>unique_id</td>
<td>string(32)</td>
<td>Unique id defined by gate (must later be used if capturing, voiding or refunding a transaction)</td>
</tr>
<tr>
<td>gaming</td>
<td>string</td>
<td>Signifies whether a gaming transaction is performed. Gaming transactions usually use MCC 7995, contact tech support for more details.</td>
</tr>
<tr>
<td>moto</td>
<td>string</td>
<td>Signifies whether a MOTO (mail order telephone order) transaction is performed. Contact tech support for more details.</td>
</tr>
<tr>
<td>code</td>
<td>integer</td>
<td>Error code according to <a href="#error-code-table">Error code table</a></td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
<tr>
<td>message</td>
<td>string(255)</td>
<td>Human readable error message which can be displayed to users.</td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when the transaction was processed in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Combined date and time</a> e.g. 2007-08- 30T17:46:11Z</td>
</tr>
<tr>
<td>descriptor</td>
<td>string</td>
<td>Static descriptor MID info as configured on the gateway</td>
</tr>
<tr>
<td>amount</td>
<td>integer</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>dynamic_descriptor_params</td>
<td>section</td>
<td>Optional, returned only if dynamic desc params are submitted on the API. Note here that the formatted dyn desc params are returned - as they would be submitted to the schemes for settlement.</td>
</tr>
</tbody></table>
<h3 id='init-recurring-sale-3d'>Init Recurring Sale 3D</h3>
<p>InitRecurringSale3D transactions basically have the same request as standard InitRecurringSale transactions.</p>

<aside class="notice" >
InitRecurringSale3D transactions can be handled synchronous or asynchronous depending on the parameters passed. If mpi params is passed the workflow will be synchronous. If notification url, return success url and return failure url are passed the workflow will be asynchronous.
</aside>

<aside class="notice">
This transaction type supports <a href="#tokenization" target="_self">Tokenization</a>.
</aside>

<aside class="notice">
This transaction type supports <a href="#level-3-travel-data" target="_self">Level 3 travel data</a>.
</aside>

<blockquote>
<p>Synchronous  Request</p>
</blockquote>

<pre class="highlight php tab-php"><code><span class="cp">&lt;?php</span>

<span class="c1">// Load the pre-configured ini file...
</span><span class="nx">\Genesis\Config</span><span class="o">::</span><span class="na">loadSettings</span><span class="p">(</span><span class="s1">'/path/to/config.ini'</span><span class="p">);</span>

<span class="nv">$genesis</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Genesis</span><span class="p">(</span><span class="s1">'Financial\Cards\Recurring\InitRecurringSale3D'</span><span class="p">);</span>
<span class="nv">$request</span> <span class="o">=</span> <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">request</span><span class="p">();</span>

<span class="nv">$request</span>
  <span class="o">-&gt;</span><span class="na">setTransactionId</span><span class="p">(</span><span class="s1">'43671'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setUsage</span><span class="p">(</span><span class="s1">'40208 concert tickets'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setRemoteIp</span><span class="p">(</span><span class="s1">'245.253.2.12'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setAmount</span><span class="p">(</span><span class="s1">'100'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCurrency</span><span class="p">(</span><span class="s1">'USD'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCardHolder</span><span class="p">(</span><span class="s1">'Travis Pastrana'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCardNumber</span><span class="p">(</span><span class="s1">'4200000000000000'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setExpirationMonth</span><span class="p">(</span><span class="s1">'12'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setExpirationYear</span><span class="p">(</span><span class="s1">'2020'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCvv</span><span class="p">(</span><span class="s1">'834'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCustomerEmail</span><span class="p">(</span><span class="s1">'travis@example.com'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCustomerPhone</span><span class="p">(</span><span class="s1">'+1987987987987'</span><span class="p">)</span>


  <span class="c1">// Billing Address
</span>  <span class="o">-&gt;</span><span class="na">setBillingFirstName</span><span class="p">(</span><span class="s1">'Travis'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingLastName</span><span class="p">(</span><span class="s1">'Pastrana'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingAddress1</span><span class="p">(</span><span class="s1">'Muster Str. 12'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingZipCode</span><span class="p">(</span><span class="s1">'10178'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingCity</span><span class="p">(</span><span class="s1">'Los Angeles'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingState</span><span class="p">(</span><span class="s1">'CA'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingCountry</span><span class="p">(</span><span class="s1">'US'</span><span class="p">)</span>


  <span class="c1">// MPI Synchronous
</span>  <span class="o">-&gt;</span><span class="na">setCavv</span><span class="p">(</span><span class="s1">'AAACA1BHADYJkIASQkcAAAAAAAA='</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setEci</span><span class="p">(</span><span class="s1">'05'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setXid</span><span class="p">(</span><span class="s1">'0pv62FIrT5qQODB7DCewKgEBAQI='</span><span class="p">);</span>

<span class="k">try</span> <span class="p">{</span>
    <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">execute</span><span class="p">();</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">response</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">getResponseObject</span><span class="p">();</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">\Exception</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$e</span><span class="o">-&gt;</span><span class="na">getMessage</span><span class="p">();</span>
<span class="p">}</span>
</code></pre>

<pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.GenesisClient</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.TransactionResult</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.constants.Endpoints</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.constants.Environments</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.requests.financial.card.recurring.InitRecurringSale3D</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.model.Transaction</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Configuration</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Country</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Currency</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.math.BigDecimal</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">GenesisExample</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">()</span>  <span class="o">{</span>

    <span class="c1">// Create configuration</span>
    <span class="n">Configuration</span> <span class="n">configuration</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Configuration</span><span class="o">(</span><span class="n">Environments</span><span class="o">.</span><span class="na">STAGING</span><span class="o">,</span> <span class="n">Endpoints</span><span class="o">.</span><span class="na">EMERCHANTPAY</span><span class="o">);</span>

    <span class="n">configuration</span><span class="o">.</span><span class="na">setUsername</span><span class="o">(</span><span class="s">"SET_YOUR_USERNAME"</span><span class="o">);</span>
    <span class="n">configuration</span><span class="o">.</span><span class="na">setPassword</span><span class="o">(</span><span class="s">"SET_YOUR_PASSWORD"</span><span class="o">);</span>
    <span class="n">configuration</span><span class="o">.</span><span class="na">setToken</span><span class="o">(</span><span class="s">"SET_YOUR_TOKEN"</span><span class="o">);</span>

    <span class="n">InitRecurringSale3D</span> <span class="n">request</span> <span class="o">=</span> <span class="k">new</span> <span class="n">InitRecurringSale3D</span><span class="o">();</span>

    <span class="n">request</span><span class="o">.</span><span class="na">setTransactionId</span><span class="o">(</span><span class="s">"43671"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setUsage</span><span class="o">(</span><span class="s">"40208 concert tickets"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setRemoteIp</span><span class="o">(</span><span class="s">"245.253.2.12"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setAmount</span><span class="o">(</span><span class="k">new</span> <span class="n">BigDecimal</span><span class="o">(</span><span class="mi">100</span><span class="o">));</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCurrency</span><span class="o">(</span><span class="s">"USD"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCardHolder</span><span class="o">(</span><span class="s">"Travis Pastrana"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCardNumber</span><span class="o">(</span><span class="s">"4200000000000000"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setExpirationMonth</span><span class="o">(</span><span class="s">"12"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setExpirationYear</span><span class="o">(</span><span class="s">"2020"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCvv</span><span class="o">(</span><span class="s">"834"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCustomerEmail</span><span class="o">(</span><span class="s">"travis@example.com"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCustomerPhone</span><span class="o">(</span><span class="s">"+1987987987987"</span><span class="o">);</span>


    <span class="c1">// Billing Address</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingFirstname</span><span class="o">(</span><span class="s">"Travis"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingLastname</span><span class="o">(</span><span class="s">"Pastrana"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingPrimaryAddress</span><span class="o">(</span><span class="s">"Muster Str. 12"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingZipCode</span><span class="o">(</span><span class="s">"10178"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingCity</span><span class="o">(</span><span class="s">"Los Angeles"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingState</span><span class="o">(</span><span class="s">"CA"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingCountry</span><span class="o">(</span><span class="s">"US"</span><span class="o">);</span>


    <span class="c1">// MPI Synchronous</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCavv</span><span class="o">(</span><span class="s">"AAACA1BHADYJkIASQkcAAAAAAAA="</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setEci</span><span class="o">(</span><span class="s">"05"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setXid</span><span class="o">(</span><span class="s">"0pv62FIrT5qQODB7DCewKgEBAQI="</span><span class="o">);</span>

    <span class="n">GenesisClient</span> <span class="n">client</span> <span class="o">=</span> <span class="k">new</span> <span class="n">GenesisClient</span><span class="o">(</span><span class="n">configuration</span><span class="o">,</span> <span class="n">request</span><span class="o">);</span>
    <span class="n">client</span><span class="o">.</span><span class="na">execute</span><span class="o">();</span>

    <span class="c1">// Parse Payment result</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">client</span><span class="o">.</span><span class="na">getResponse</span><span class="o">());</span>

  <span class="o">}</span>
<span class="o">}</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="kd">var</span> <span class="nx">genesis</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'genesis.js/lib/genesis.js'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">transaction</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">genesis</span><span class="p">.</span><span class="nx">transaction</span><span class="p">();</span>

<span class="kd">var</span> <span class="nx">failure</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">reason</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">reason</span><span class="p">);</span>
<span class="p">};</span>

<span class="kd">var</span> <span class="nx">success</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>

<span class="nx">transaction</span><span class="p">.</span><span class="nx">init_recurring_sale3d</span><span class="p">(</span>
  <span class="p">{</span>
    <span class="s2">"transaction_id"</span><span class="p">:</span> <span class="s2">"43671"</span><span class="p">,</span>
    <span class="s2">"usage"</span><span class="p">:</span> <span class="s2">"40208 concert tickets"</span><span class="p">,</span>
    <span class="s2">"remote_ip"</span><span class="p">:</span> <span class="s2">"245.253.2.12"</span><span class="p">,</span>
    <span class="s2">"amount"</span><span class="p">:</span> <span class="s2">"100"</span><span class="p">,</span>
    <span class="s2">"currency"</span><span class="p">:</span> <span class="s2">"USD"</span><span class="p">,</span>
    <span class="s2">"card_holder"</span><span class="p">:</span> <span class="s2">"Travis Pastrana"</span><span class="p">,</span>
    <span class="s2">"card_number"</span><span class="p">:</span> <span class="s2">"4200000000000000"</span><span class="p">,</span>
    <span class="s2">"expiration_month"</span><span class="p">:</span> <span class="s2">"12"</span><span class="p">,</span>
    <span class="s2">"expiration_year"</span><span class="p">:</span> <span class="mi">2020</span><span class="p">,</span>
    <span class="s2">"cvv"</span><span class="p">:</span> <span class="s2">"834"</span><span class="p">,</span>
    <span class="s2">"customer_email"</span><span class="p">:</span> <span class="s2">"travis@example.com"</span><span class="p">,</span>
    <span class="s2">"customer_phone"</span><span class="p">:</span> <span class="s2">"+1987987987987"</span><span class="p">,</span>
    <span class="s2">"billing_address"</span><span class="p">:</span> <span class="p">{</span>
      <span class="s2">"first_name"</span><span class="p">:</span> <span class="s2">"Travis"</span><span class="p">,</span>
      <span class="s2">"last_name"</span><span class="p">:</span> <span class="s2">"Pastrana"</span><span class="p">,</span>
      <span class="s2">"address1"</span><span class="p">:</span> <span class="s2">"Muster Str. 12"</span><span class="p">,</span>
      <span class="s2">"zip_code"</span><span class="p">:</span> <span class="s2">"10178"</span><span class="p">,</span>
      <span class="s2">"city"</span><span class="p">:</span> <span class="s2">"Los Angeles"</span><span class="p">,</span>
      <span class="s2">"state"</span><span class="p">:</span> <span class="s2">"CA"</span><span class="p">,</span>
      <span class="s2">"country"</span><span class="p">:</span> <span class="s2">"US"</span>
    <span class="p">},</span>
    <span class="s2">"mpi_params"</span><span class="p">:</span> <span class="p">{</span>
      <span class="s2">"cavv"</span><span class="p">:</span> <span class="s2">"AAACA1BHADYJkIASQkcAAAAAAAA="</span><span class="p">,</span>
      <span class="s2">"eci"</span><span class="p">:</span> <span class="s2">"05"</span><span class="p">,</span>
      <span class="s2">"xid"</span><span class="p">:</span> <span class="s2">"0pv62FIrT5qQODB7DCewKgEBAQI="</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">).</span><span class="nx">send</span><span class="p">()</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">success</span><span class="p">)</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">failure</span><span class="p">);</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>curl https://username:password@gate.emerchantpay.net/process/TERMINAL-TOKEN <span class="se">\</span>
   -H <span class="s2">"Content-Type: text/xml"</span> <span class="se">\</span>
   -d <span class="s1">'
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;init_recurring_sale3d&lt;/transaction_type&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;usage&gt;40208 concert tickets&lt;/usage&gt;
  &lt;remote_ip&gt;245.253.2.12&lt;/remote_ip&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
  &lt;card_holder&gt;Travis Pastrana&lt;/card_holder&gt;
  &lt;card_number&gt;4200000000000000&lt;/card_number&gt;
  &lt;expiration_month&gt;12&lt;/expiration_month&gt;
  &lt;expiration_year&gt;2020&lt;/expiration_year&gt;
  &lt;cvv&gt;834&lt;/cvv&gt;
  &lt;customer_email&gt;travis@example.com&lt;/customer_email&gt;
  &lt;customer_phone&gt;+1987987987987&lt;/customer_phone&gt;
  &lt;billing_address&gt;
    &lt;first_name&gt;Travis&lt;/first_name&gt;
    &lt;last_name&gt;Pastrana&lt;/last_name&gt;
    &lt;address1&gt;Muster Str. 12&lt;/address1&gt;
    &lt;zip_code&gt;10178&lt;/zip_code&gt;
    &lt;city&gt;Los Angeles&lt;/city&gt;
    &lt;state&gt;CA&lt;/state&gt;
    &lt;country&gt;US&lt;/country&gt;
  &lt;/billing_address&gt;
  &lt;mpi_params&gt;
    &lt;cavv&gt;AAACA1BHADYJkIASQkcAAAAAAAA=&lt;/cavv&gt;
    &lt;eci&gt;05&lt;/eci&gt;
    &lt;xid&gt;0pv62FIrT5qQODB7DCewKgEBAQI=&lt;/xid&gt;
  &lt;/mpi_params&gt;
&lt;/payment_transaction&gt;'</span>
</code></pre>

<blockquote>
<p>Asynchronous  Request</p>
</blockquote>

<pre class="highlight php tab-php"><code><span class="cp">&lt;?php</span>

<span class="c1">// Load the pre-configured ini file...
</span><span class="nx">\Genesis\Config</span><span class="o">::</span><span class="na">loadSettings</span><span class="p">(</span><span class="s1">'/path/to/config.ini'</span><span class="p">);</span>

<span class="nv">$genesis</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Genesis</span><span class="p">(</span><span class="s1">'Financial\Cards\Recurring\InitRecurringSale3D'</span><span class="p">);</span>
<span class="nv">$request</span> <span class="o">=</span> <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">request</span><span class="p">();</span>

<span class="nv">$request</span>
  <span class="o">-&gt;</span><span class="na">setTransactionId</span><span class="p">(</span><span class="s1">'43671'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setUsage</span><span class="p">(</span><span class="s1">'40208 concert tickets'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setRemoteIp</span><span class="p">(</span><span class="s1">'245.253.2.12'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setAmount</span><span class="p">(</span><span class="s1">'100'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCurrency</span><span class="p">(</span><span class="s1">'USD'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCardHolder</span><span class="p">(</span><span class="s1">'Travis Pastrana'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCardNumber</span><span class="p">(</span><span class="s1">'4200000000000000'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setExpirationMonth</span><span class="p">(</span><span class="s1">'12'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setExpirationYear</span><span class="p">(</span><span class="s1">'2020'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCvv</span><span class="p">(</span><span class="s1">'834'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCustomerEmail</span><span class="p">(</span><span class="s1">'travis@example.com'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCustomerPhone</span><span class="p">(</span><span class="s1">'+1987987987987'</span><span class="p">)</span>


  <span class="c1">// Billing Address
</span>  <span class="o">-&gt;</span><span class="na">setBillingFirstName</span><span class="p">(</span><span class="s1">'Travis'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingLastName</span><span class="p">(</span><span class="s1">'Pastrana'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingAddress1</span><span class="p">(</span><span class="s1">'Muster Str. 12'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingZipCode</span><span class="p">(</span><span class="s1">'10178'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingCity</span><span class="p">(</span><span class="s1">'Los Angeles'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingState</span><span class="p">(</span><span class="s1">'CA'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingCountry</span><span class="p">(</span><span class="s1">'US'</span><span class="p">)</span>


  <span class="c1">// MPI Asynchronous
</span>  <span class="o">-&gt;</span><span class="na">setNotificationUrl</span><span class="p">(</span><span class="s1">'https://www.example.com/notification'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setReturnSuccessUrl</span><span class="p">(</span><span class="s1">'http://www.example.com/success.html'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setReturnFailureUrl</span><span class="p">(</span><span class="s1">'http://www.example.com/failure.html'</span><span class="p">);</span>

<span class="k">try</span> <span class="p">{</span>
    <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">execute</span><span class="p">();</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">response</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">getResponseObject</span><span class="p">();</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">\Exception</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$e</span><span class="o">-&gt;</span><span class="na">getMessage</span><span class="p">();</span>
<span class="p">}</span>
</code></pre>

<pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.GenesisClient</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.TransactionResult</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.constants.Endpoints</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.constants.Environments</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.requests.financial.card.recurring.InitRecurringSale3D</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.model.Transaction</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Configuration</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Country</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Currency</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.math.BigDecimal</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">GenesisExample</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">()</span>  <span class="o">{</span>

    <span class="c1">// Create configuration</span>
    <span class="n">Configuration</span> <span class="n">configuration</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Configuration</span><span class="o">(</span><span class="n">Environments</span><span class="o">.</span><span class="na">STAGING</span><span class="o">,</span> <span class="n">Endpoints</span><span class="o">.</span><span class="na">EMERCHANTPAY</span><span class="o">);</span>

    <span class="n">configuration</span><span class="o">.</span><span class="na">setUsername</span><span class="o">(</span><span class="s">"SET_YOUR_USERNAME"</span><span class="o">);</span>
    <span class="n">configuration</span><span class="o">.</span><span class="na">setPassword</span><span class="o">(</span><span class="s">"SET_YOUR_PASSWORD"</span><span class="o">);</span>
    <span class="n">configuration</span><span class="o">.</span><span class="na">setToken</span><span class="o">(</span><span class="s">"SET_YOUR_TOKEN"</span><span class="o">);</span>

    <span class="n">InitRecurringSale3D</span> <span class="n">request</span> <span class="o">=</span> <span class="k">new</span> <span class="n">InitRecurringSale3D</span><span class="o">();</span>

    <span class="n">request</span><span class="o">.</span><span class="na">setTransactionId</span><span class="o">(</span><span class="s">"43671"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setUsage</span><span class="o">(</span><span class="s">"40208 concert tickets"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setRemoteIp</span><span class="o">(</span><span class="s">"245.253.2.12"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setAmount</span><span class="o">(</span><span class="k">new</span> <span class="n">BigDecimal</span><span class="o">(</span><span class="mi">100</span><span class="o">));</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCurrency</span><span class="o">(</span><span class="s">"USD"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCardHolder</span><span class="o">(</span><span class="s">"Travis Pastrana"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCardNumber</span><span class="o">(</span><span class="s">"4200000000000000"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setExpirationMonth</span><span class="o">(</span><span class="s">"12"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setExpirationYear</span><span class="o">(</span><span class="s">"2020"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCvv</span><span class="o">(</span><span class="s">"834"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCustomerEmail</span><span class="o">(</span><span class="s">"travis@example.com"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCustomerPhone</span><span class="o">(</span><span class="s">"+1987987987987"</span><span class="o">);</span>


    <span class="c1">// Billing Address</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingFirstname</span><span class="o">(</span><span class="s">"Travis"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingLastname</span><span class="o">(</span><span class="s">"Pastrana"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingPrimaryAddress</span><span class="o">(</span><span class="s">"Muster Str. 12"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingZipCode</span><span class="o">(</span><span class="s">"10178"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingCity</span><span class="o">(</span><span class="s">"Los Angeles"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingState</span><span class="o">(</span><span class="s">"CA"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingCountry</span><span class="o">(</span><span class="s">"US"</span><span class="o">);</span>


    <span class="c1">// MPI Asynchronous</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setNotificationUrl</span><span class="o">(</span><span class="s">"https://www.example.com/notification"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setReturnSuccessUrl</span><span class="o">(</span><span class="s">"http://www.example.com/success.html"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setReturnFailureUrl</span><span class="o">(</span><span class="s">"http://www.example.com/failure.html"</span><span class="o">);</span>

    <span class="n">GenesisClient</span> <span class="n">client</span> <span class="o">=</span> <span class="k">new</span> <span class="n">GenesisClient</span><span class="o">(</span><span class="n">configuration</span><span class="o">,</span> <span class="n">request</span><span class="o">);</span>
    <span class="n">client</span><span class="o">.</span><span class="na">execute</span><span class="o">();</span>

    <span class="c1">// Parse Payment result</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">client</span><span class="o">.</span><span class="na">getResponse</span><span class="o">());</span>

  <span class="o">}</span>
<span class="o">}</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="kd">var</span> <span class="nx">genesis</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'genesis.js/lib/genesis.js'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">transaction</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">genesis</span><span class="p">.</span><span class="nx">transaction</span><span class="p">();</span>

<span class="kd">var</span> <span class="nx">failure</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">reason</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">reason</span><span class="p">);</span>
<span class="p">};</span>

<span class="kd">var</span> <span class="nx">success</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>

<span class="nx">transaction</span><span class="p">.</span><span class="nx">init_recurring_sale3d</span><span class="p">(</span>
  <span class="p">{</span>
    <span class="s2">"transaction_id"</span><span class="p">:</span> <span class="s2">"43671"</span><span class="p">,</span>
    <span class="s2">"usage"</span><span class="p">:</span> <span class="s2">"40208 concert tickets"</span><span class="p">,</span>
    <span class="s2">"remote_ip"</span><span class="p">:</span> <span class="s2">"245.253.2.12"</span><span class="p">,</span>
    <span class="s2">"amount"</span><span class="p">:</span> <span class="s2">"100"</span><span class="p">,</span>
    <span class="s2">"currency"</span><span class="p">:</span> <span class="s2">"USD"</span><span class="p">,</span>
    <span class="s2">"card_holder"</span><span class="p">:</span> <span class="s2">"Travis Pastrana"</span><span class="p">,</span>
    <span class="s2">"card_number"</span><span class="p">:</span> <span class="s2">"4200000000000000"</span><span class="p">,</span>
    <span class="s2">"expiration_month"</span><span class="p">:</span> <span class="s2">"12"</span><span class="p">,</span>
    <span class="s2">"expiration_year"</span><span class="p">:</span> <span class="mi">2020</span><span class="p">,</span>
    <span class="s2">"cvv"</span><span class="p">:</span> <span class="s2">"834"</span><span class="p">,</span>
    <span class="s2">"customer_email"</span><span class="p">:</span> <span class="s2">"travis@example.com"</span><span class="p">,</span>
    <span class="s2">"customer_phone"</span><span class="p">:</span> <span class="s2">"+1987987987987"</span><span class="p">,</span>
    <span class="s2">"billing_address"</span><span class="p">:</span> <span class="p">{</span>
      <span class="s2">"first_name"</span><span class="p">:</span> <span class="s2">"Travis"</span><span class="p">,</span>
      <span class="s2">"last_name"</span><span class="p">:</span> <span class="s2">"Pastrana"</span><span class="p">,</span>
      <span class="s2">"address1"</span><span class="p">:</span> <span class="s2">"Muster Str. 12"</span><span class="p">,</span>
      <span class="s2">"zip_code"</span><span class="p">:</span> <span class="s2">"10178"</span><span class="p">,</span>
      <span class="s2">"city"</span><span class="p">:</span> <span class="s2">"Los Angeles"</span><span class="p">,</span>
      <span class="s2">"state"</span><span class="p">:</span> <span class="s2">"CA"</span><span class="p">,</span>
      <span class="s2">"country"</span><span class="p">:</span> <span class="s2">"US"</span>
    <span class="p">},</span>
    <span class="s2">"notification_url"</span><span class="p">:</span> <span class="s2">"https://www.example.com/notification"</span><span class="p">,</span>
    <span class="s2">"return_success_url"</span><span class="p">:</span> <span class="s2">"http://www.example.com/success.html"</span><span class="p">,</span>
    <span class="s2">"return_failure_url"</span><span class="p">:</span> <span class="s2">"http://www.example.com/failure.html"</span>
  <span class="p">}</span>
<span class="p">).</span><span class="nx">send</span><span class="p">()</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">success</span><span class="p">)</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">failure</span><span class="p">);</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>curl https://username:password@gate.emerchantpay.net/process/TERMINAL-TOKEN <span class="se">\</span>
   -H <span class="s2">"Content-Type: text/xml"</span> <span class="se">\</span>
   -d <span class="s1">'
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;init_recurring_sale3d&lt;/transaction_type&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;usage&gt;40208 concert tickets&lt;/usage&gt;
  &lt;remote_ip&gt;245.253.2.12&lt;/remote_ip&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
  &lt;card_holder&gt;Travis Pastrana&lt;/card_holder&gt;
  &lt;card_number&gt;4200000000000000&lt;/card_number&gt;
  &lt;expiration_month&gt;12&lt;/expiration_month&gt;
  &lt;expiration_year&gt;2020&lt;/expiration_year&gt;
  &lt;cvv&gt;834&lt;/cvv&gt;
  &lt;customer_email&gt;travis@example.com&lt;/customer_email&gt;
  &lt;customer_phone&gt;+1987987987987&lt;/customer_phone&gt;
  &lt;billing_address&gt;
    &lt;first_name&gt;Travis&lt;/first_name&gt;
    &lt;last_name&gt;Pastrana&lt;/last_name&gt;
    &lt;address1&gt;Muster Str. 12&lt;/address1&gt;
    &lt;zip_code&gt;10178&lt;/zip_code&gt;
    &lt;city&gt;Los Angeles&lt;/city&gt;
    &lt;state&gt;CA&lt;/state&gt;
    &lt;country&gt;US&lt;/country&gt;
  &lt;/billing_address&gt;
  &lt;notification_url&gt;https://www.example.com/notification&lt;/notification_url&gt;
  &lt;return_success_url&gt;http://www.example.com/success.html&lt;/return_success_url&gt;
  &lt;return_failure_url&gt;http://www.example.com/failure.html&lt;/return_failure_url&gt;
&lt;/payment_transaction&gt;'</span>
</code></pre>

<p><strong>Request Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>required</td>
<td>string(255)</td>
<td>The transaction type: <strong>init_recurring_sale3d</strong></td>
</tr>
<tr>
<td>transaction_id</td>
<td>required</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>usage</td>
<td>optional</td>
<td>string(255)</td>
<td>Description of the transaction for later use</td>
</tr>
<tr>
<td>moto</td>
<td>optional</td>
<td>&quot;true&quot;</td>
<td>Signifies whether a MOTO (mail order telephone order) transaction is performed. Contact tech support for more details.</td>
</tr>
<tr>
<td>remote_ip</td>
<td>required*</td>
<td>IPv4 address</td>
<td>IPv4 address of customer</td>
</tr>
<tr>
<td>notification_url</td>
<td>required<sup>1</sup></td>
<td>url</td>
<td>URL at merchant where gateway sends outcome of transaction.</td>
</tr>
<tr>
<td>return_success_url</td>
<td>required<sup>1</sup></td>
<td>url</td>
<td>URL where customer is sent to after successful payment</td>
</tr>
<tr>
<td>return_failure_url</td>
<td>required<sup>1</sup></td>
<td>url</td>
<td>URL where customer is sent to after unsuccessful payment</td>
</tr>
<tr>
<td>amount</td>
<td>required</td>
<td>integer &gt; 0</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>required</td>
<td>string(3)</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>card_holder</td>
<td>required</td>
<td>string(255)</td>
<td>Full name of customer as printed on credit card (first name and last name at least)</td>
</tr>
<tr>
<td>card_number</td>
<td>required</td>
<td>13 to 16 digits</td>
<td>Complete cc number of customer</td>
</tr>
<tr>
<td>cvv</td>
<td>required*</td>
<td>3 to 4 digits</td>
<td>cvv of cc, requirement is based on terminal configuration</td>
</tr>
<tr>
<td>expiration_month</td>
<td>required</td>
<td>MM</td>
<td>Expiration month as printed on credit card</td>
</tr>
<tr>
<td>expiration_year</td>
<td>required</td>
<td>YYYY</td>
<td>Expiration year as printed on credit card</td>
</tr>
<tr>
<td>token</td>
<td>optional</td>
<td>string(36)</td>
<td>See <a href="#tokenization">Tokenization</a> for more details. If present, the cardholder parameters can be omitted. Cannot be set together with <code>remember_card</code></td>
</tr>
<tr>
<td>remember_card</td>
<td>optional</td>
<td>&quot;true&quot;</td>
<td>See <a href="#tokenize">Tokenize</a>. Tokenizes cardholder parameters. Cannot be set together with <code>token</code></td>
</tr>
<tr>
<td>consumer_id</td>
<td>optional</td>
<td>string(10)</td>
<td>See <a href="#consumers">Consumers</a> and <a href="#tokenization">Tokenization</a>. Combine with <code>remember_card</code> to tokenize or with <code>token</code> to use token</td>
</tr>
<tr>
<td><strong>credential_on_file</strong></td>
<td>required*</td>
<td></td>
<td>See <a href="#credential-on-file-cof" target="_self">Credential On File (COF)</a> for more details</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;initial_customer_initiated</td>
<td>required*</td>
<td>string(18)</td>
<td>Initial transaction initiated by customer. Required for external tokenization, and optional for gateway-based tokenization</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;subsequent_customer_initiated</td>
<td>required*</td>
<td>string(18)</td>
<td>Subsequent transaction initiated by customer. Required for external tokenization, and optional for gateway-based tokenization</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;merchant_unscheduled</td>
<td>optional</td>
<td>string(20)</td>
<td>Transaction is initiated by the merchant</td>
</tr>
<tr>
<td>customer_email</td>
<td>required*</td>
<td>e-mail address</td>
<td>Must contain valid e-mail of customer</td>
</tr>
<tr>
<td>customer_phone</td>
<td>required*</td>
<td>string(32)</td>
<td>Must contain valid phone number of customer</td>
</tr>
<tr>
<td>birth_date</td>
<td>required*</td>
<td>dd-mm-yyyy</td>
<td>Required when MCC is a Financial Services one (e.g. MCC 6012) and either card brand is Visa or Mastercard/Maestro with UK-based merchant, UK-based bin (domestic), and DEBIT card type</td>
</tr>
<tr>
<td>document_id</td>
<td>required*</td>
<td>sring(20)</td>
<td>Document ID of the consumer. See <a href="#document-id-parameter">Document ID Parameter</a> for more details.</td>
</tr>
<tr>
<td><strong>billing_address</strong></td>
<td>required</td>
<td></td>
<td>See <a href="#required-vs-optional-api-params">Required vs Optional API params</a> for details</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;first_name</td>
<td>required*</td>
<td>string(255)</td>
<td>Customer first name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;last_name</td>
<td>required*</td>
<td>string(255)</td>
<td>Customer last name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address1</td>
<td>required*</td>
<td>string(255)</td>
<td>Primary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address2</td>
<td>required*</td>
<td>string(255)</td>
<td>Secondary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;zip_code</td>
<td>required*</td>
<td>string</td>
<td>ZIP code</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;city</td>
<td>required*</td>
<td>string(255)</td>
<td>City</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;state</td>
<td>required*</td>
<td>string(2)</td>
<td>State code in <a href="https://en.wikipedia.org/wiki/ISO_3166-2">ISO 3166-2</a>, required for USA and Canada</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;country</td>
<td>required*</td>
<td>string(2)</td>
<td>Country code in <a href="https://www.iso.org/iso-3166-country-codes.html">ISO 3166</a></td>
</tr>
<tr>
<td><strong>shipping_address</strong></td>
<td>optional</td>
<td></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;first_name</td>
<td>optional</td>
<td>string(255)</td>
<td>Customer first name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;last_name</td>
<td>optional</td>
<td>string(255)</td>
<td>Customer last name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address1</td>
<td>optional</td>
<td>string(255)</td>
<td>Primary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address2</td>
<td>optional</td>
<td>string(255)</td>
<td>Secondary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;zip_code</td>
<td>optional</td>
<td>string</td>
<td>ZIP code</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;city</td>
<td>optional</td>
<td>string(255)</td>
<td>City</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;state</td>
<td>optional</td>
<td>string(2)</td>
<td>State code in <a href="https://en.wikipedia.org/wiki/ISO_3166-2">ISO 3166-2</a>, required for USA and Canada</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;country</td>
<td>optional</td>
<td>string(2)</td>
<td>Country code in <a href="https://www.iso.org/iso-3166-country-codes.html">ISO 3166</a></td>
</tr>
<tr>
<td><strong>mpi_params</strong></td>
<td>required<sup>2</sup></td>
<td></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;cavv</td>
<td>required<sup>3</sup></td>
<td>string(255)</td>
<td>Verification Id of the authentication. Please note this can be the CAVV for Visa Card or UCAF to identify MasterCard.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;eci</td>
<td>required<sup>3</sup></td>
<td>string(255)</td>
<td>See <a href="#electronic-commerce-indicator">Electronic Commerce Indicator as returned from the MPI</a> for details</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;xid</td>
<td>required<sup>3</sup></td>
<td>string(255)</td>
<td>Transaction ID generated by the 3D Secure service that uniquely identifies a 3D Secure check request</td>
</tr>
<tr>
<td><strong>dynamic_descriptor_params</strong></td>
<td>optional</td>
<td></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;merchant_name</td>
<td>optional</td>
<td>string(25)</td>
<td>Allows to dynamically override the charge descriptor</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;merchant_city</td>
<td>optional</td>
<td>string(13)</td>
<td>Allows to dynamically override the merchant phone number</td>
</tr>
</tbody></table>

<p><code>required* = conditionally required</code></p>

<p><code>1 - required if mpi_params is not present, transaction will be handled asynchronous.</code></p>

<p><code>2 - required if transaction should be handled synchronous.</code></p>

<p><code>3 - eci is always required if mpi_params is present. xid and cavv are not required for the 3D attempted only workflow, where the merchant does not have the xid/cavv, only the eci.</code></p>

<blockquote>
<p>Successful Synchronous Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>stdClass Object
(
    [transaction_type] =&gt; init_recurring_sale3d
    [status] =&gt; approved
    [mode] =&gt; live
    [transaction_id] =&gt; 43671
    [unique_id] =&gt; 44177a21403427eb96664a6d7e5d5d48
    [consumer_id] =&gt; 123456
    [token] =&gt; ee946db8-d7db-4bb7-b608-b65b153e127d
    [avs_response_code] =&gt; 5I
    [avs_response_text] =&gt; Response provided by issuer processor; Address information not verified
    [authorization_code] =&gt; 345678
    [response_code] =&gt; 00
    [timestamp] =&gt; DateTime Object
        (
            [date] =&gt; 2019-03-14 12:05:56.000000
            [timezone_type] =&gt; 2
            [timezone] =&gt; Z
        )
    [descriptor] =&gt; Descriptor one
    [amount] =&gt; 100
    [currency] =&gt; USD
    [sent_to_acquirer] =&gt; true
    [partial_approval] =&gt; true
)
</code></pre>

<pre class="highlight java tab-java"><code><span class="o">&lt;</span><span class="n">payment_response</span> <span class="n">content</span><span class="o">=[</span>
    <span class="o">&lt;</span><span class="n">transaction_type</span> <span class="n">content</span><span class="o">=[</span><span class="n">init_recurring_sale3d</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">status</span> <span class="n">content</span><span class="o">=[</span><span class="n">approved</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">mode</span> <span class="n">content</span><span class="o">=[</span><span class="n">live</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">transaction_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">43671</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">unique_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">44177</span><span class="n">a21403427eb96664a6d7e5d5d48</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">consumer_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">123456</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">token</span> <span class="n">content</span><span class="o">=[</span><span class="n">ee946db8</span><span class="o">-</span><span class="n">d7db</span><span class="o">-</span><span class="mi">4</span><span class="n">bb7</span><span class="o">-</span><span class="n">b608</span><span class="o">-</span><span class="n">b65b153e127d</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">avs_response_code</span> <span class="n">content</span><span class="o">=[</span><span class="mi">5</span><span class="n">I</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">avs_response_text</span> <span class="n">content</span><span class="o">=[</span><span class="n">Response</span> <span class="n">provided</span> <span class="n">by</span> <span class="n">issuer</span> <span class="n">processor</span><span class="o">;</span> <span class="n">Address</span> <span class="n">information</span> <span class="n">not</span> <span class="n">verified</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">authorization_code</span> <span class="n">content</span><span class="o">=[</span><span class="mi">345678</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">response_code</span> <span class="n">content</span><span class="o">=[</span><span class="mo">00</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">timestamp</span> <span class="n">content</span><span class="o">=[</span><span class="mi">2019</span><span class="o">-</span><span class="mo">03</span><span class="o">-</span><span class="mi">14</span><span class="nl">T12:</span><span class="mo">05</span><span class="o">:</span><span class="mi">56</span><span class="n">Z</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">descriptor</span> <span class="n">content</span><span class="o">=[</span><span class="n">Descriptor</span> <span class="n">one</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">amount</span> <span class="n">content</span><span class="o">=[</span><span class="mi">100</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">currency</span> <span class="n">content</span><span class="o">=[</span><span class="n">USD</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">sent_to_acquirer</span> <span class="n">content</span><span class="o">=[</span><span class="kc">true</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">partial_approval</span> <span class="n">content</span><span class="o">=[</span><span class="kc">true</span><span class="o">]&gt;</span>
<span class="o">]&gt;</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="p">{</span>
    <span class="nl">transaction_type</span><span class="p">:</span> <span class="s2">"init_recurring_sale3d"</span><span class="p">,</span>
    <span class="nx">status</span><span class="p">:</span> <span class="s2">"approved"</span><span class="p">,</span>
    <span class="nx">mode</span><span class="p">:</span> <span class="s2">"live"</span><span class="p">,</span>
    <span class="nx">transaction_id</span><span class="p">:</span> <span class="s2">"43671"</span><span class="p">,</span>
    <span class="nx">unique_id</span><span class="p">:</span> <span class="s2">"44177a21403427eb96664a6d7e5d5d48"</span><span class="p">,</span>
    <span class="nx">consumer_id</span><span class="p">:</span> <span class="s2">"123456"</span><span class="p">,</span>
    <span class="nx">token</span><span class="p">:</span> <span class="s2">"ee946db8-d7db-4bb7-b608-b65b153e127d"</span><span class="p">,</span>
    <span class="nx">avs_response_code</span><span class="p">:</span> <span class="s2">"5I"</span><span class="p">,</span>
    <span class="nx">avs_response_text</span><span class="p">:</span> <span class="s2">"Response provided by issuer processor; Address information not verified"</span><span class="p">,</span>
    <span class="nx">authorization_code</span><span class="p">:</span> <span class="s2">"345678"</span><span class="p">,</span>
    <span class="nx">response_code</span><span class="p">:</span> <span class="s2">"00"</span><span class="p">,</span>
    <span class="nx">timestamp</span><span class="p">:</span> <span class="s2">"2019-03-14T12:05:56Z"</span><span class="p">,</span>
    <span class="nx">descriptor</span><span class="p">:</span> <span class="s2">"Descriptor one"</span><span class="p">,</span>
    <span class="nx">amount</span><span class="p">:</span> <span class="s2">"100"</span><span class="p">,</span>
    <span class="nx">currency</span><span class="p">:</span> <span class="s2">"USD"</span><span class="p">,</span>
    <span class="nx">sent_to_acquirer</span><span class="p">:</span> <span class="s2">"true"</span><span class="p">,</span>
    <span class="nx">partial_approval</span><span class="p">:</span> <span class="s2">"true"</span><span class="p">,</span>
<span class="p">}</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;init_recurring_sale3d&lt;/transaction_type&gt;
  &lt;status&gt;approved&lt;/status&gt;
  &lt;mode&gt;live&lt;/mode&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;consumer_id&gt;123456&lt;/consumer_id&gt;
  &lt;token&gt;ee946db8-d7db-4bb7-b608-b65b153e127d&lt;/token&gt;
  &lt;avs_response_code&gt;5I&lt;/avs_response_code&gt;
  &lt;avs_response_text&gt;Response provided by issuer processor; Address information not verified&lt;/avs_response_text&gt;
  &lt;authorization_code&gt;345678&lt;/authorization_code&gt;
  &lt;response_code&gt;00&lt;/response_code&gt;
  &lt;timestamp&gt;2019-03-14T12:05:56Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
  &lt;sent_to_acquirer&gt;true&lt;/sent_to_acquirer&gt;
  &lt;partial_approval&gt;true&lt;/partial_approval&gt;
&lt;/payment_transaction&gt;
</code></pre>

<blockquote>
<p>Successful Asynchronous Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>stdClass Object
(
    [transaction_type] =&gt; init_recurring_sale3d
    [status] =&gt; pending_async
    [mode] =&gt; live
    [transaction_id] =&gt; 43671
    [unique_id] =&gt; 44177a21403427eb96664a6d7e5d5d48
    [consumer_id] =&gt; 123456
    [token] =&gt; ee946db8-d7db-4bb7-b608-b65b153e127d
    [technical_message] =&gt; Transaction successful!
    [message] =&gt; Transaction successful!
    [redirect_url] =&gt; https://gate.emerchantpay.net/redirect/to_acquirer/649e1ff35c61
    [timestamp] =&gt; DateTime Object
        (
            [date] =&gt; 2019-03-14 12:05:56.000000
            [timezone_type] =&gt; 2
            [timezone] =&gt; Z
        )
    [descriptor] =&gt; Descriptor one
    [amount] =&gt; 100
    [currency] =&gt; USD
    [sent_to_acquirer] =&gt; true
)
</code></pre>

<pre class="highlight java tab-java"><code><span class="o">&lt;</span><span class="n">payment_response</span> <span class="n">content</span><span class="o">=[</span>
    <span class="o">&lt;</span><span class="n">transaction_type</span> <span class="n">content</span><span class="o">=[</span><span class="n">init_recurring_sale3d</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">status</span> <span class="n">content</span><span class="o">=[</span><span class="n">pending_async</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">mode</span> <span class="n">content</span><span class="o">=[</span><span class="n">live</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">transaction_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">43671</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">unique_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">44177</span><span class="n">a21403427eb96664a6d7e5d5d48</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">consumer_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">123456</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">token</span> <span class="n">content</span><span class="o">=[</span><span class="n">ee946db8</span><span class="o">-</span><span class="n">d7db</span><span class="o">-</span><span class="mi">4</span><span class="n">bb7</span><span class="o">-</span><span class="n">b608</span><span class="o">-</span><span class="n">b65b153e127d</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">technical_message</span> <span class="n">content</span><span class="o">=[</span><span class="n">Transaction</span> <span class="n">successful</span><span class="o">!]&gt;</span>
    <span class="o">&lt;</span><span class="n">message</span> <span class="n">content</span><span class="o">=[</span><span class="n">Transaction</span> <span class="n">successful</span><span class="o">!]&gt;</span>
    <span class="o">&lt;</span><span class="n">redirect_url</span> <span class="n">content</span><span class="o">=[</span><span class="nl">https:</span><span class="c1">//gate.emerchantpay.net/redirect/to_acquirer/649e1ff35c61]&gt;</span>
    <span class="o">&lt;</span><span class="n">timestamp</span> <span class="n">content</span><span class="o">=[</span><span class="mi">2019</span><span class="o">-</span><span class="mo">03</span><span class="o">-</span><span class="mi">14</span><span class="nl">T12:</span><span class="mo">05</span><span class="o">:</span><span class="mi">56</span><span class="n">Z</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">descriptor</span> <span class="n">content</span><span class="o">=[</span><span class="n">Descriptor</span> <span class="n">one</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">amount</span> <span class="n">content</span><span class="o">=[</span><span class="mi">100</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">currency</span> <span class="n">content</span><span class="o">=[</span><span class="n">USD</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">sent_to_acquirer</span> <span class="n">content</span><span class="o">=[</span><span class="kc">true</span><span class="o">]&gt;</span>
<span class="o">]&gt;</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="p">{</span>
    <span class="nl">transaction_type</span><span class="p">:</span> <span class="s2">"init_recurring_sale3d"</span><span class="p">,</span>
    <span class="nx">status</span><span class="p">:</span> <span class="s2">"pending_async"</span><span class="p">,</span>
    <span class="nx">mode</span><span class="p">:</span> <span class="s2">"live"</span><span class="p">,</span>
    <span class="nx">transaction_id</span><span class="p">:</span> <span class="s2">"43671"</span><span class="p">,</span>
    <span class="nx">unique_id</span><span class="p">:</span> <span class="s2">"44177a21403427eb96664a6d7e5d5d48"</span><span class="p">,</span>
    <span class="nx">consumer_id</span><span class="p">:</span> <span class="s2">"123456"</span><span class="p">,</span>
    <span class="nx">token</span><span class="p">:</span> <span class="s2">"ee946db8-d7db-4bb7-b608-b65b153e127d"</span><span class="p">,</span>
    <span class="nx">technical_message</span><span class="p">:</span> <span class="s2">"Transaction successful!"</span><span class="p">,</span>
    <span class="nx">message</span><span class="p">:</span> <span class="s2">"Transaction successful!"</span><span class="p">,</span>
    <span class="nx">redirect_url</span><span class="p">:</span> <span class="s2">"https://gate.emerchantpay.net/redirect/to_acquirer/649e1ff35c61"</span><span class="p">,</span>
    <span class="nx">timestamp</span><span class="p">:</span> <span class="s2">"2019-03-14T12:05:56Z"</span><span class="p">,</span>
    <span class="nx">descriptor</span><span class="p">:</span> <span class="s2">"Descriptor one"</span><span class="p">,</span>
    <span class="nx">amount</span><span class="p">:</span> <span class="s2">"100"</span><span class="p">,</span>
    <span class="nx">currency</span><span class="p">:</span> <span class="s2">"USD"</span><span class="p">,</span>
    <span class="nx">sent_to_acquirer</span><span class="p">:</span> <span class="s2">"true"</span><span class="p">,</span>
<span class="p">}</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;init_recurring_sale3d&lt;/transaction_type&gt;
  &lt;status&gt;pending_async&lt;/status&gt;
  &lt;mode&gt;live&lt;/mode&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;consumer_id&gt;123456&lt;/consumer_id&gt;
  &lt;token&gt;ee946db8-d7db-4bb7-b608-b65b153e127d&lt;/token&gt;
  &lt;technical_message&gt;Transaction successful!&lt;/technical_message&gt;
  &lt;message&gt;Transaction successful!&lt;/message&gt;
  &lt;redirect_url&gt;https://gate.emerchantpay.net/redirect/to_acquirer/649e1ff35c61&lt;/redirect_url&gt;
  &lt;timestamp&gt;2019-03-14T12:05:56Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
  &lt;sent_to_acquirer&gt;true&lt;/sent_to_acquirer&gt;
&lt;/payment_transaction&gt;
</code></pre>

<p><strong>Successful Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>The transaction type</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>transaction_id</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>unique_id</td>
<td>string(32)</td>
<td>Unique id defined by gate (must later be used if capturing, voiding or refunding a transaction)</td>
</tr>
<tr>
<td>consumer_id</td>
<td>string(10)</td>
<td>Consumer unique reference. See <a href="#consumers">Consumers</a></td>
</tr>
<tr>
<td>token</td>
<td>string(36)</td>
<td>Plain-text token value. See <a href="#tokenization">Tokenization</a></td>
</tr>
<tr>
<td>moto</td>
<td>string</td>
<td>Signifies whether a MOTO (mail order telephone order) transaction is performed. Contact tech support for more details.</td>
</tr>
<tr>
<td>avs_response_code</td>
<td>string</td>
<td>Generated by the card network on trying to match the billing address when performing the address verification. Optional, returned if config is enabled and acquirer supports it. Check <a href="#avs-status-codes">AVS Status Codes</a> for details.</td>
</tr>
<tr>
<td>avs_response_text</td>
<td>string</td>
<td>Gives the human response text for the AVS response code above. Optional, returned if config is enabled and acquirer supports it. Check [AVS Status Codes](#avs-status-codes for details.</td>
</tr>
<tr>
<td>authorization_code</td>
<td>string(6)</td>
<td>Generated by the card network when an authorisation has occurred, used to identify that auth. Consists of 6 alphanumeric chars</td>
</tr>
<tr>
<td>response_code</td>
<td>string(2)</td>
<td>Defines the issuer result of a transaction, the status of a message or some action taken or required. See <a href="#issuer-response-codes">issuer response codes</a> for details</td>
</tr>
<tr>
<td>recurring_advice_code</td>
<td>string(2)</td>
<td>if received in the response from the issuer</td>
</tr>
<tr>
<td>recurring_advice_text</td>
<td>string</td>
<td>Optional, describes the specific recurring advice code</td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
<tr>
<td>message</td>
<td>string(255)</td>
<td>Human readable error message which can be displayed to users.</td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>redirect_url</td>
<td>url</td>
<td>URL where user has to be redirected to complete payment process. It is available for asynchronous mode</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when the transaction was processed in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Combined date and time</a> e.g. 2007-08- 30T17:46:11Z</td>
</tr>
<tr>
<td>descriptor</td>
<td>string</td>
<td>Static descriptor MID info as configured on the gateway</td>
</tr>
<tr>
<td>amount</td>
<td>integer</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>partial_approval</td>
<td>string(4)</td>
<td>Optional, set to ’true’ if partial approval happened. Partially approved amount is then in the amount field. Check <a href="#partial-approvals">Partial Approvals</a> for details</td>
</tr>
<tr>
<td>sent_to_acquirer</td>
<td>string</td>
<td>&quot;true&quot; or &quot;false&quot;</td>
</tr>
<tr>
<td>dynamic_descriptor_params</td>
<td>section</td>
<td>Optional, returned only if dynamic desc params are submitted on the API. Note here that the formatted dyn desc params are returned - as they would be submitted to the schemes for settlement.</td>
</tr>
</tbody></table>

<blockquote>
<p>Error Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>stdClass Object
(
    [transaction_type] =&gt; init_recurring_sale3d
    [status] =&gt; error
    [mode] =&gt; live
    [transaction_id] =&gt; 43671
    [unique_id] =&gt; 44177a21403427eb96664a6d7e5d5d48
    [response_code] =&gt; 57
    [code] =&gt; 340
    [technical_message] =&gt; expiration_year is invalid
    [message] =&gt; expiration_year is invalid
    [timestamp] =&gt; DateTime Object
        (
            [date] =&gt; 2019-03-14 12:05:56.000000
            [timezone_type] =&gt; 2
            [timezone] =&gt; Z
        )
    [descriptor] =&gt; Descriptor one
    [amount] =&gt; 100
    [currency] =&gt; USD
    [sent_to_acquirer] =&gt; false
)
</code></pre>

<pre class="highlight java tab-java"><code><span class="o">&lt;</span><span class="n">payment_response</span> <span class="n">content</span><span class="o">=[</span>
    <span class="o">&lt;</span><span class="n">transaction_type</span> <span class="n">content</span><span class="o">=[</span><span class="n">init_recurring_sale3d</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">status</span> <span class="n">content</span><span class="o">=[</span><span class="n">error</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">mode</span> <span class="n">content</span><span class="o">=[</span><span class="n">live</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">transaction_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">43671</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">unique_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">44177</span><span class="n">a21403427eb96664a6d7e5d5d48</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">response_code</span> <span class="n">content</span><span class="o">=[</span><span class="mi">57</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">code</span> <span class="n">content</span><span class="o">=[</span><span class="mi">340</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">technical_message</span> <span class="n">content</span><span class="o">=[</span><span class="n">expiration_year</span> <span class="n">is</span> <span class="n">invalid</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">message</span> <span class="n">content</span><span class="o">=[</span><span class="n">expiration_year</span> <span class="n">is</span> <span class="n">invalid</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">timestamp</span> <span class="n">content</span><span class="o">=[</span><span class="mi">2019</span><span class="o">-</span><span class="mo">03</span><span class="o">-</span><span class="mi">14</span><span class="nl">T12:</span><span class="mo">05</span><span class="o">:</span><span class="mi">56</span><span class="n">Z</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">descriptor</span> <span class="n">content</span><span class="o">=[</span><span class="n">Descriptor</span> <span class="n">one</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">amount</span> <span class="n">content</span><span class="o">=[</span><span class="mi">100</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">currency</span> <span class="n">content</span><span class="o">=[</span><span class="n">USD</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">sent_to_acquirer</span> <span class="n">content</span><span class="o">=[</span><span class="kc">false</span><span class="o">]&gt;</span>
<span class="o">]&gt;</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="p">{</span>
    <span class="nl">transaction_type</span><span class="p">:</span> <span class="s2">"init_recurring_sale3d"</span><span class="p">,</span>
    <span class="nx">status</span><span class="p">:</span> <span class="s2">"error"</span><span class="p">,</span>
    <span class="nx">mode</span><span class="p">:</span> <span class="s2">"live"</span><span class="p">,</span>
    <span class="nx">transaction_id</span><span class="p">:</span> <span class="s2">"43671"</span><span class="p">,</span>
    <span class="nx">unique_id</span><span class="p">:</span> <span class="s2">"44177a21403427eb96664a6d7e5d5d48"</span><span class="p">,</span>
    <span class="nx">response_code</span><span class="p">:</span> <span class="s2">"57"</span><span class="p">,</span>
    <span class="nx">code</span><span class="p">:</span> <span class="s2">"340"</span><span class="p">,</span>
    <span class="nx">technical_message</span><span class="p">:</span> <span class="s2">"expiration_year is invalid"</span><span class="p">,</span>
    <span class="nx">message</span><span class="p">:</span> <span class="s2">"expiration_year is invalid"</span><span class="p">,</span>
    <span class="nx">timestamp</span><span class="p">:</span> <span class="s2">"2019-03-14T12:05:56Z"</span><span class="p">,</span>
    <span class="nx">descriptor</span><span class="p">:</span> <span class="s2">"Descriptor one"</span><span class="p">,</span>
    <span class="nx">amount</span><span class="p">:</span> <span class="s2">"100"</span><span class="p">,</span>
    <span class="nx">currency</span><span class="p">:</span> <span class="s2">"USD"</span><span class="p">,</span>
    <span class="nx">sent_to_acquirer</span><span class="p">:</span> <span class="s2">"false"</span><span class="p">,</span>
<span class="p">}</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;init_recurring_sale3d&lt;/transaction_type&gt;
  &lt;status&gt;error&lt;/status&gt;
  &lt;mode&gt;live&lt;/mode&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;response_code&gt;57&lt;/response_code&gt;
  &lt;code&gt;340&lt;/code&gt;
  &lt;technical_message&gt;expiration_year is invalid&lt;/technical_message&gt;
  &lt;message&gt;expiration_year is invalid&lt;/message&gt;
  &lt;timestamp&gt;2019-03-14T12:05:56Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
  &lt;sent_to_acquirer&gt;false&lt;/sent_to_acquirer&gt;
&lt;/payment_transaction&gt;
</code></pre>

<p><strong>Error Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>The transaction type</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>transaction_id</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>unique_id</td>
<td>string(32)</td>
<td>Unique id defined by gate (must later be used if capturing, voiding or refunding a transaction)</td>
</tr>
<tr>
<td>moto</td>
<td>string</td>
<td>Signifies whether a MOTO (mail order telephone order) transaction is performed. Contact tech support for more details.</td>
</tr>
<tr>
<td>code</td>
<td>integer</td>
<td>Error code according to <a href="#error-code-table">Error code table</a></td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
<tr>
<td>message</td>
<td>string(255)</td>
<td>Human readable error message which can be displayed to users.</td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when the transaction was processed in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Combined date and time</a> e.g. 2007-08- 30T17:46:11Z</td>
</tr>
<tr>
<td>descriptor</td>
<td>string</td>
<td>Static descriptor MID info as configured on the gateway</td>
</tr>
<tr>
<td>amount</td>
<td>integer</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>dynamic_descriptor_params</td>
<td>section</td>
<td>Optional, returned only if dynamic desc params are submitted on the API. Note here that the formatted dyn desc params are returned - as they would be submitted to the schemes for settlement.</td>
</tr>
</tbody></table>
<h3 id='notification-for-asynchronous-payments'>Notification for Asynchronous Payments</h3>
<p>When using asynchronous payments like 3-D secured transactions, the transaction depends on user input. Therefore, the outcome of the transaction is not available immediately after sending the request.</p>

<p>The gateway will send a notification to the merchant’s server as soon as the payment has been completed (either approved or declined).</p>

<p>If the user cancels the payment (or the user doesn’t complete the payment within the given time frame, e.g. 2 hours), the transaction will time out and a notification will be sent.</p>

<p>The notification will be sent as an HTTP POST to the <strong>notification_url</strong> specified in the transaction request XML. See <a href="#notifications">Notifications</a> for the HTTP POST-Data and format. Notification will be pure HTTP or HTTPS-based, depending on the URL given by the merchant in the <strong>notification_url</strong>. In case it is a HTTPS-based notification, no SSL verification of the merchant SSL certificate will be performed. Until a notification echo is rendered by the merchant, there will be up to 10 notifications sent, each with a timeout of 15 minutes. Note that notifications in the PROD env will be sent from 80.82.206.228 and 5.179.225.28 for the PROD env, and only 80.82.206.228 for the STG env, so make sure these IP addresses are whitelisted respectively. Note also that notifications are delivered to either port 80 (HTTP notification) or port 443 (HTTPS notification), so make sure the correct notificationurl is passed in the transaction request in the first place.</p>

<p>Also see <a href="#3d-secure-transactions">3-D secure workflow</a>.</p>
<h2 id='recurring-transactions'>Recurring Transactions</h2>
<p>A recurring transaction describes a payment where the cardholder’s account is periodically charged for a repeated delivery and use of a product or service (subscription, membership fee, etc.) over time. A recurring payment consists of an initial transaction and one or several repeated transactions. The ”initial” transaction contains all relevant card and cardholder data, while the subsequent repeated transaction references an identifier which is returned with the response to the initial request.</p>
<h3 id='init-recurring-sale'>Init Recurring Sale</h3>
<p>An InitRecurringSale transaction initializes a recurring payment and is equal to a normal SaleTransaction except that it can be referenced as ”initial” transaction in a RecurringSale transaction.</p>

<p>Note that if an InitRecurringSale is fully refunded, the recurring series is stopped and no more RecurringSales can be performed for that recurring series.</p>

<p>If a InitRecurringSale is partially refunded, the recurring series can continue with more RecurringSales</p>

<aside class="notice">
This transaction type supports <a href="#tokenization" target="_self">Tokenization</a>.
</aside>

<aside class="notice">
This transaction type supports <a href="#level-3-travel-data" target="_self">Level 3 travel data</a>.
</aside>

<blockquote>
<p>Request</p>
</blockquote>

<pre class="highlight php tab-php"><code><span class="cp">&lt;?php</span>

<span class="c1">// Load the pre-configured ini file...
</span><span class="nx">\Genesis\Config</span><span class="o">::</span><span class="na">loadSettings</span><span class="p">(</span><span class="s1">'/path/to/config.ini'</span><span class="p">);</span>

<span class="nv">$genesis</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Genesis</span><span class="p">(</span><span class="s1">'Financial\Cards\Recurring\InitRecurringSale'</span><span class="p">);</span>
<span class="nv">$request</span> <span class="o">=</span> <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">request</span><span class="p">();</span>

<span class="nv">$request</span>
  <span class="o">-&gt;</span><span class="na">setTransactionId</span><span class="p">(</span><span class="s1">'43671'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setUsage</span><span class="p">(</span><span class="s1">'40208 concert tickets'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setRemoteIp</span><span class="p">(</span><span class="s1">'245.253.2.12'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setAmount</span><span class="p">(</span><span class="s1">'100'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCurrency</span><span class="p">(</span><span class="s1">'USD'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCardHolder</span><span class="p">(</span><span class="s1">'Travis Pastrana'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCardNumber</span><span class="p">(</span><span class="s1">'4200000000000000'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setExpirationMonth</span><span class="p">(</span><span class="s1">'12'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setExpirationYear</span><span class="p">(</span><span class="s1">'2020'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCvv</span><span class="p">(</span><span class="s1">'834'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCustomerEmail</span><span class="p">(</span><span class="s1">'travis@example.com'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCustomerPhone</span><span class="p">(</span><span class="s1">'+1987987987987'</span><span class="p">)</span>


  <span class="c1">// Billing Address
</span>  <span class="o">-&gt;</span><span class="na">setBillingFirstName</span><span class="p">(</span><span class="s1">'Travis'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingLastName</span><span class="p">(</span><span class="s1">'Pastrana'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingAddress1</span><span class="p">(</span><span class="s1">'Muster Str. 12'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingZipCode</span><span class="p">(</span><span class="s1">'10178'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingCity</span><span class="p">(</span><span class="s1">'Los Angeles'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingState</span><span class="p">(</span><span class="s1">'CA'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingCountry</span><span class="p">(</span><span class="s1">'US'</span><span class="p">);</span>

<span class="k">try</span> <span class="p">{</span>
    <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">execute</span><span class="p">();</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">response</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">getResponseObject</span><span class="p">();</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">\Exception</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$e</span><span class="o">-&gt;</span><span class="na">getMessage</span><span class="p">();</span>
<span class="p">}</span>
</code></pre>

<pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.GenesisClient</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.TransactionResult</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.constants.Endpoints</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.constants.Environments</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.requests.financial.card.recurring.InitRecurringSale</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.model.Transaction</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Configuration</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Country</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Currency</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.math.BigDecimal</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">GenesisExample</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">()</span>  <span class="o">{</span>

    <span class="c1">// Create configuration</span>
    <span class="n">Configuration</span> <span class="n">configuration</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Configuration</span><span class="o">(</span><span class="n">Environments</span><span class="o">.</span><span class="na">STAGING</span><span class="o">,</span> <span class="n">Endpoints</span><span class="o">.</span><span class="na">EMERCHANTPAY</span><span class="o">);</span>

    <span class="n">configuration</span><span class="o">.</span><span class="na">setUsername</span><span class="o">(</span><span class="s">"SET_YOUR_USERNAME"</span><span class="o">);</span>
    <span class="n">configuration</span><span class="o">.</span><span class="na">setPassword</span><span class="o">(</span><span class="s">"SET_YOUR_PASSWORD"</span><span class="o">);</span>
    <span class="n">configuration</span><span class="o">.</span><span class="na">setToken</span><span class="o">(</span><span class="s">"SET_YOUR_TOKEN"</span><span class="o">);</span>

    <span class="n">InitRecurringSale</span> <span class="n">request</span> <span class="o">=</span> <span class="k">new</span> <span class="n">InitRecurringSale</span><span class="o">();</span>

    <span class="n">request</span><span class="o">.</span><span class="na">setTransactionId</span><span class="o">(</span><span class="s">"43671"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setUsage</span><span class="o">(</span><span class="s">"40208 concert tickets"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setRemoteIp</span><span class="o">(</span><span class="s">"245.253.2.12"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setAmount</span><span class="o">(</span><span class="k">new</span> <span class="n">BigDecimal</span><span class="o">(</span><span class="mi">100</span><span class="o">));</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCurrency</span><span class="o">(</span><span class="s">"USD"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCardHolder</span><span class="o">(</span><span class="s">"Travis Pastrana"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCardNumber</span><span class="o">(</span><span class="s">"4200000000000000"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setExpirationMonth</span><span class="o">(</span><span class="s">"12"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setExpirationYear</span><span class="o">(</span><span class="s">"2020"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCvv</span><span class="o">(</span><span class="s">"834"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCustomerEmail</span><span class="o">(</span><span class="s">"travis@example.com"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCustomerPhone</span><span class="o">(</span><span class="s">"+1987987987987"</span><span class="o">);</span>


    <span class="c1">// Billing Address</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingFirstname</span><span class="o">(</span><span class="s">"Travis"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingLastname</span><span class="o">(</span><span class="s">"Pastrana"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingPrimaryAddress</span><span class="o">(</span><span class="s">"Muster Str. 12"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingZipCode</span><span class="o">(</span><span class="s">"10178"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingCity</span><span class="o">(</span><span class="s">"Los Angeles"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingState</span><span class="o">(</span><span class="s">"CA"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingCountry</span><span class="o">(</span><span class="s">"US"</span><span class="o">);</span>

    <span class="n">GenesisClient</span> <span class="n">client</span> <span class="o">=</span> <span class="k">new</span> <span class="n">GenesisClient</span><span class="o">(</span><span class="n">configuration</span><span class="o">,</span> <span class="n">request</span><span class="o">);</span>
    <span class="n">client</span><span class="o">.</span><span class="na">execute</span><span class="o">();</span>

    <span class="c1">// Parse Payment result</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">client</span><span class="o">.</span><span class="na">getResponse</span><span class="o">());</span>

  <span class="o">}</span>
<span class="o">}</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="kd">var</span> <span class="nx">genesis</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'genesis.js/lib/genesis.js'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">transaction</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">genesis</span><span class="p">.</span><span class="nx">transaction</span><span class="p">();</span>

<span class="kd">var</span> <span class="nx">failure</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">reason</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">reason</span><span class="p">);</span>
<span class="p">};</span>

<span class="kd">var</span> <span class="nx">success</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>

<span class="nx">transaction</span><span class="p">.</span><span class="nx">init_recurring_sale</span><span class="p">(</span>
  <span class="p">{</span>
    <span class="s2">"transaction_id"</span><span class="p">:</span> <span class="s2">"43671"</span><span class="p">,</span>
    <span class="s2">"usage"</span><span class="p">:</span> <span class="s2">"40208 concert tickets"</span><span class="p">,</span>
    <span class="s2">"remote_ip"</span><span class="p">:</span> <span class="s2">"245.253.2.12"</span><span class="p">,</span>
    <span class="s2">"amount"</span><span class="p">:</span> <span class="s2">"100"</span><span class="p">,</span>
    <span class="s2">"currency"</span><span class="p">:</span> <span class="s2">"USD"</span><span class="p">,</span>
    <span class="s2">"card_holder"</span><span class="p">:</span> <span class="s2">"Travis Pastrana"</span><span class="p">,</span>
    <span class="s2">"card_number"</span><span class="p">:</span> <span class="s2">"4200000000000000"</span><span class="p">,</span>
    <span class="s2">"expiration_month"</span><span class="p">:</span> <span class="s2">"12"</span><span class="p">,</span>
    <span class="s2">"expiration_year"</span><span class="p">:</span> <span class="mi">2020</span><span class="p">,</span>
    <span class="s2">"cvv"</span><span class="p">:</span> <span class="s2">"834"</span><span class="p">,</span>
    <span class="s2">"customer_email"</span><span class="p">:</span> <span class="s2">"travis@example.com"</span><span class="p">,</span>
    <span class="s2">"customer_phone"</span><span class="p">:</span> <span class="s2">"+1987987987987"</span><span class="p">,</span>
    <span class="s2">"billing_address"</span><span class="p">:</span> <span class="p">{</span>
      <span class="s2">"first_name"</span><span class="p">:</span> <span class="s2">"Travis"</span><span class="p">,</span>
      <span class="s2">"last_name"</span><span class="p">:</span> <span class="s2">"Pastrana"</span><span class="p">,</span>
      <span class="s2">"address1"</span><span class="p">:</span> <span class="s2">"Muster Str. 12"</span><span class="p">,</span>
      <span class="s2">"zip_code"</span><span class="p">:</span> <span class="s2">"10178"</span><span class="p">,</span>
      <span class="s2">"city"</span><span class="p">:</span> <span class="s2">"Los Angeles"</span><span class="p">,</span>
      <span class="s2">"state"</span><span class="p">:</span> <span class="s2">"CA"</span><span class="p">,</span>
      <span class="s2">"country"</span><span class="p">:</span> <span class="s2">"US"</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">).</span><span class="nx">send</span><span class="p">()</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">success</span><span class="p">)</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">failure</span><span class="p">);</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>curl https://username:password@gate.emerchantpay.net/process/TERMINAL-TOKEN <span class="se">\</span>
   -H <span class="s2">"Content-Type: text/xml"</span> <span class="se">\</span>
   -d <span class="s1">'
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;init_recurring_sale&lt;/transaction_type&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;usage&gt;40208 concert tickets&lt;/usage&gt;
  &lt;remote_ip&gt;245.253.2.12&lt;/remote_ip&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
  &lt;card_holder&gt;Travis Pastrana&lt;/card_holder&gt;
  &lt;card_number&gt;4200000000000000&lt;/card_number&gt;
  &lt;expiration_month&gt;12&lt;/expiration_month&gt;
  &lt;expiration_year&gt;2020&lt;/expiration_year&gt;
  &lt;cvv&gt;834&lt;/cvv&gt;
  &lt;customer_email&gt;travis@example.com&lt;/customer_email&gt;
  &lt;customer_phone&gt;+1987987987987&lt;/customer_phone&gt;
  &lt;billing_address&gt;
    &lt;first_name&gt;Travis&lt;/first_name&gt;
    &lt;last_name&gt;Pastrana&lt;/last_name&gt;
    &lt;address1&gt;Muster Str. 12&lt;/address1&gt;
    &lt;zip_code&gt;10178&lt;/zip_code&gt;
    &lt;city&gt;Los Angeles&lt;/city&gt;
    &lt;state&gt;CA&lt;/state&gt;
    &lt;country&gt;US&lt;/country&gt;
  &lt;/billing_address&gt;
&lt;/payment_transaction&gt;'</span>
</code></pre>

<p><strong>Request Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>required</td>
<td>string(255)</td>
<td>The transaction type: <strong>init_recurring_sale</strong></td>
</tr>
<tr>
<td>transaction_id</td>
<td>required</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>usage</td>
<td>optional</td>
<td>string(255)</td>
<td>Description of the transaction for later use</td>
</tr>
<tr>
<td>moto</td>
<td>optional</td>
<td>&quot;true&quot;</td>
<td>Signifies whether a MOTO (mail order telephone order) transaction is performed. Contact tech support for more details.</td>
</tr>
<tr>
<td>remote_ip</td>
<td>required*</td>
<td>IPv4 address</td>
<td>IPv4 address of customer</td>
</tr>
<tr>
<td>amount</td>
<td>required</td>
<td>integer &gt; 0</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>required</td>
<td>string(3)</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>card_holder</td>
<td>required</td>
<td>string(255)</td>
<td>Full name of customer as printed on credit card (first name and last name at least)</td>
</tr>
<tr>
<td>card_number</td>
<td>required</td>
<td>13 to 16 digits</td>
<td>Complete cc number of customer</td>
</tr>
<tr>
<td>cvv</td>
<td>required*</td>
<td>3 to 4 digits</td>
<td>cvv of cc, requirement is based on terminal configuration</td>
</tr>
<tr>
<td>expiration_month</td>
<td>required</td>
<td>MM</td>
<td>Expiration month as printed on credit card</td>
</tr>
<tr>
<td>expiration_year</td>
<td>required</td>
<td>YYYY</td>
<td>Expiration year as printed on credit card</td>
</tr>
<tr>
<td>token</td>
<td>optional</td>
<td>string(36)</td>
<td>See <a href="#tokenization">Tokenization</a> for more details. If present, the cardholder parameters can be omitted. Cannot be set together with <code>remember_card</code></td>
</tr>
<tr>
<td>remember_card</td>
<td>optional</td>
<td>&quot;true&quot;</td>
<td>See <a href="#tokenize">Tokenize</a>. Tokenizes cardholder parameters. Cannot be set together with <code>token</code></td>
</tr>
<tr>
<td>consumer_id</td>
<td>optional</td>
<td>string(10)</td>
<td>See <a href="#consumers">Consumers</a> and <a href="#tokenization">Tokenization</a>. Combine with <code>remember_card</code> to tokenize or with <code>token</code> to use token</td>
</tr>
<tr>
<td><strong>credential_on_file</strong></td>
<td>required*</td>
<td></td>
<td>See <a href="#credential-on-file-cof" target="_self">Credential On File (COF)</a> for more details</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;initial_customer_initiated</td>
<td>required*</td>
<td>string(18)</td>
<td>Initial transaction initiated by customer. Required for external tokenization, and optional for gateway-based tokenization</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;subsequent_customer_initiated</td>
<td>required*</td>
<td>string(18)</td>
<td>Subsequent transaction initiated by customer. Required for external tokenization, and optional for gateway-based tokenization</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;merchant_unscheduled</td>
<td>optional</td>
<td>string(20)</td>
<td>Transaction is initiated by the merchant</td>
</tr>
<tr>
<td>customer_email</td>
<td>required*</td>
<td>e-mail address</td>
<td>Must contain valid e-mail of customer</td>
</tr>
<tr>
<td>customer_phone</td>
<td>required*</td>
<td>string(32)</td>
<td>Must contain valid phone number of customer</td>
</tr>
<tr>
<td>birth_date</td>
<td>required*</td>
<td>dd-mm-yyyy</td>
<td>Required when MCC is a Financial Services one (e.g. MCC 6012) and either card brand is Visa or Mastercard/Maestro with UK-based merchant, UK-based bin (domestic), and DEBIT card type</td>
</tr>
<tr>
<td>document_id</td>
<td>required*</td>
<td>sring(20)</td>
<td>Document ID of the consumer. See <a href="#document-id-parameter">Document ID Parameter</a> for more details.</td>
</tr>
<tr>
<td><strong>billing_address</strong></td>
<td>required</td>
<td></td>
<td>See <a href="#required-vs-optional-api-params">Required vs Optional API params</a> for details</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;first_name</td>
<td>required*</td>
<td>string(255)</td>
<td>Customer first name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;last_name</td>
<td>required*</td>
<td>string(255)</td>
<td>Customer last name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address1</td>
<td>required*</td>
<td>string(255)</td>
<td>Primary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address2</td>
<td>required*</td>
<td>string(255)</td>
<td>Secondary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;zip_code</td>
<td>required*</td>
<td>string</td>
<td>ZIP code</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;city</td>
<td>required*</td>
<td>string(255)</td>
<td>City</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;state</td>
<td>required*</td>
<td>string(2)</td>
<td>State code in <a href="https://en.wikipedia.org/wiki/ISO_3166-2">ISO 3166-2</a>, required for USA and Canada</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;country</td>
<td>required*</td>
<td>string(2)</td>
<td>Country code in <a href="https://www.iso.org/iso-3166-country-codes.html">ISO 3166</a></td>
</tr>
<tr>
<td><strong>shipping_address</strong></td>
<td>optional</td>
<td></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;first_name</td>
<td>optional</td>
<td>string(255)</td>
<td>Customer first name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;last_name</td>
<td>optional</td>
<td>string(255)</td>
<td>Customer last name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address1</td>
<td>optional</td>
<td>string(255)</td>
<td>Primary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address2</td>
<td>optional</td>
<td>string(255)</td>
<td>Secondary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;zip_code</td>
<td>optional</td>
<td>string</td>
<td>ZIP code</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;city</td>
<td>optional</td>
<td>string(255)</td>
<td>City</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;state</td>
<td>optional</td>
<td>string(2)</td>
<td>State code in <a href="https://en.wikipedia.org/wiki/ISO_3166-2">ISO 3166-2</a>, required for USA and Canada</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;country</td>
<td>optional</td>
<td>string(2)</td>
<td>Country code in <a href="https://www.iso.org/iso-3166-country-codes.html">ISO 3166</a></td>
</tr>
<tr>
<td><strong>dynamic_descriptor_params</strong></td>
<td>optional</td>
<td></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;merchant_name</td>
<td>optional</td>
<td>string(25)</td>
<td>Allows to dynamically override the charge descriptor</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;merchant_city</td>
<td>optional</td>
<td>string(13)</td>
<td>Allows to dynamically override the merchant phone number</td>
</tr>
</tbody></table>

<p><code>required* = conditionally required</code></p>

<blockquote>
<p>Successful Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>stdClass Object
(
    [transaction_type] =&gt; init_recurring_sale
    [status] =&gt; approved
    [mode] =&gt; live
    [transaction_id] =&gt; 43671
    [unique_id] =&gt; 44177a21403427eb96664a6d7e5d5d48
    [consumer_id] =&gt; 123456
    [token] =&gt; ee946db8-d7db-4bb7-b608-b65b153e127d
    [avs_response_code] =&gt; 5I
    [avs_response_text] =&gt; Response provided by issuer processor; Address information not verified
    [authorization_code] =&gt; 345678
    [response_code] =&gt; 00
    [technical_message] =&gt; Transaction successful!
    [message] =&gt; Transaction successful!
    [redirect_url] =&gt; https://gate.emerchantpay.net/redirect/to_acquirer/649e1ff35c61
    [timestamp] =&gt; DateTime Object
        (
            [date] =&gt; 2019-03-14 12:05:56.000000
            [timezone_type] =&gt; 2
            [timezone] =&gt; Z
        )
    [descriptor] =&gt; Descriptor one
    [amount] =&gt; 100
    [currency] =&gt; USD
    [sent_to_acquirer] =&gt; true
)
</code></pre>

<pre class="highlight java tab-java"><code><span class="o">&lt;</span><span class="n">payment_response</span> <span class="n">content</span><span class="o">=[</span>
    <span class="o">&lt;</span><span class="n">transaction_type</span> <span class="n">content</span><span class="o">=[</span><span class="n">init_recurring_sale</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">status</span> <span class="n">content</span><span class="o">=[</span><span class="n">approved</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">mode</span> <span class="n">content</span><span class="o">=[</span><span class="n">live</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">transaction_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">43671</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">unique_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">44177</span><span class="n">a21403427eb96664a6d7e5d5d48</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">consumer_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">123456</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">token</span> <span class="n">content</span><span class="o">=[</span><span class="n">ee946db8</span><span class="o">-</span><span class="n">d7db</span><span class="o">-</span><span class="mi">4</span><span class="n">bb7</span><span class="o">-</span><span class="n">b608</span><span class="o">-</span><span class="n">b65b153e127d</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">avs_response_code</span> <span class="n">content</span><span class="o">=[</span><span class="mi">5</span><span class="n">I</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">avs_response_text</span> <span class="n">content</span><span class="o">=[</span><span class="n">Response</span> <span class="n">provided</span> <span class="n">by</span> <span class="n">issuer</span> <span class="n">processor</span><span class="o">;</span> <span class="n">Address</span> <span class="n">information</span> <span class="n">not</span> <span class="n">verified</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">authorization_code</span> <span class="n">content</span><span class="o">=[</span><span class="mi">345678</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">response_code</span> <span class="n">content</span><span class="o">=[</span><span class="mo">00</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">technical_message</span> <span class="n">content</span><span class="o">=[</span><span class="n">Transaction</span> <span class="n">successful</span><span class="o">!]&gt;</span>
    <span class="o">&lt;</span><span class="n">message</span> <span class="n">content</span><span class="o">=[</span><span class="n">Transaction</span> <span class="n">successful</span><span class="o">!]&gt;</span>
    <span class="o">&lt;</span><span class="n">redirect_url</span> <span class="n">content</span><span class="o">=[</span><span class="nl">https:</span><span class="c1">//gate.emerchantpay.net/redirect/to_acquirer/649e1ff35c61]&gt;</span>
    <span class="o">&lt;</span><span class="n">timestamp</span> <span class="n">content</span><span class="o">=[</span><span class="mi">2019</span><span class="o">-</span><span class="mo">03</span><span class="o">-</span><span class="mi">14</span><span class="nl">T12:</span><span class="mo">05</span><span class="o">:</span><span class="mi">56</span><span class="n">Z</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">descriptor</span> <span class="n">content</span><span class="o">=[</span><span class="n">Descriptor</span> <span class="n">one</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">amount</span> <span class="n">content</span><span class="o">=[</span><span class="mi">100</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">currency</span> <span class="n">content</span><span class="o">=[</span><span class="n">USD</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">sent_to_acquirer</span> <span class="n">content</span><span class="o">=[</span><span class="kc">true</span><span class="o">]&gt;</span>
<span class="o">]&gt;</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="p">{</span>
    <span class="nl">transaction_type</span><span class="p">:</span> <span class="s2">"init_recurring_sale"</span><span class="p">,</span>
    <span class="nx">status</span><span class="p">:</span> <span class="s2">"approved"</span><span class="p">,</span>
    <span class="nx">mode</span><span class="p">:</span> <span class="s2">"live"</span><span class="p">,</span>
    <span class="nx">transaction_id</span><span class="p">:</span> <span class="s2">"43671"</span><span class="p">,</span>
    <span class="nx">unique_id</span><span class="p">:</span> <span class="s2">"44177a21403427eb96664a6d7e5d5d48"</span><span class="p">,</span>
    <span class="nx">consumer_id</span><span class="p">:</span> <span class="s2">"123456"</span><span class="p">,</span>
    <span class="nx">token</span><span class="p">:</span> <span class="s2">"ee946db8-d7db-4bb7-b608-b65b153e127d"</span><span class="p">,</span>
    <span class="nx">avs_response_code</span><span class="p">:</span> <span class="s2">"5I"</span><span class="p">,</span>
    <span class="nx">avs_response_text</span><span class="p">:</span> <span class="s2">"Response provided by issuer processor; Address information not verified"</span><span class="p">,</span>
    <span class="nx">authorization_code</span><span class="p">:</span> <span class="s2">"345678"</span><span class="p">,</span>
    <span class="nx">response_code</span><span class="p">:</span> <span class="s2">"00"</span><span class="p">,</span>
    <span class="nx">technical_message</span><span class="p">:</span> <span class="s2">"Transaction successful!"</span><span class="p">,</span>
    <span class="nx">message</span><span class="p">:</span> <span class="s2">"Transaction successful!"</span><span class="p">,</span>
    <span class="nx">redirect_url</span><span class="p">:</span> <span class="s2">"https://gate.emerchantpay.net/redirect/to_acquirer/649e1ff35c61"</span><span class="p">,</span>
    <span class="nx">timestamp</span><span class="p">:</span> <span class="s2">"2019-03-14T12:05:56Z"</span><span class="p">,</span>
    <span class="nx">descriptor</span><span class="p">:</span> <span class="s2">"Descriptor one"</span><span class="p">,</span>
    <span class="nx">amount</span><span class="p">:</span> <span class="s2">"100"</span><span class="p">,</span>
    <span class="nx">currency</span><span class="p">:</span> <span class="s2">"USD"</span><span class="p">,</span>
    <span class="nx">sent_to_acquirer</span><span class="p">:</span> <span class="s2">"true"</span><span class="p">,</span>
<span class="p">}</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;init_recurring_sale&lt;/transaction_type&gt;
  &lt;status&gt;approved&lt;/status&gt;
  &lt;mode&gt;live&lt;/mode&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;consumer_id&gt;123456&lt;/consumer_id&gt;
  &lt;token&gt;ee946db8-d7db-4bb7-b608-b65b153e127d&lt;/token&gt;
  &lt;avs_response_code&gt;5I&lt;/avs_response_code&gt;
  &lt;avs_response_text&gt;Response provided by issuer processor; Address information not verified&lt;/avs_response_text&gt;
  &lt;authorization_code&gt;345678&lt;/authorization_code&gt;
  &lt;response_code&gt;00&lt;/response_code&gt;
  &lt;technical_message&gt;Transaction successful!&lt;/technical_message&gt;
  &lt;message&gt;Transaction successful!&lt;/message&gt;
  &lt;redirect_url&gt;https://gate.emerchantpay.net/redirect/to_acquirer/649e1ff35c61&lt;/redirect_url&gt;
  &lt;timestamp&gt;2019-03-14T12:05:56Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
  &lt;sent_to_acquirer&gt;true&lt;/sent_to_acquirer&gt;
&lt;/payment_transaction&gt;
</code></pre>

<p><strong>Successful Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>The transaction type</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>transaction_id</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>unique_id</td>
<td>string(32)</td>
<td>Unique id defined by gate (must later be used if capturing, voiding or refunding a transaction)</td>
</tr>
<tr>
<td>consumer_id</td>
<td>string(10)</td>
<td>Consumer unique reference. See <a href="#consumers">Consumers</a></td>
</tr>
<tr>
<td>token</td>
<td>string(36)</td>
<td>Plain-text token value. See <a href="#tokenization">Tokenization</a></td>
</tr>
<tr>
<td>moto</td>
<td>string</td>
<td>Signifies whether a MOTO (mail order telephone order) transaction is performed. Contact tech support for more details.</td>
</tr>
<tr>
<td>avs_response_code</td>
<td>string</td>
<td>Generated by the card network on trying to match the billing address when performing the address verification. Optional, returned if config is enabled and acquirer supports it. Check <a href="#avs-status-codes">AVS Status Codes</a> for details.</td>
</tr>
<tr>
<td>avs_response_text</td>
<td>string</td>
<td>Gives the human response text for the AVS response code above. Optional, returned if config is enabled and acquirer supports it. Check [AVS Status Codes](#avs-status-codes for details.</td>
</tr>
<tr>
<td>authorization_code</td>
<td>string(6)</td>
<td>Generated by the card network when an authorisation has occurred, used to identify that auth. Consists of 6 alphanumeric chars</td>
</tr>
<tr>
<td>response_code</td>
<td>string(2)</td>
<td>Defines the issuer result of a transaction, the status of a message or some action taken or required. See <a href="#issuer-response-codes">issuer response codes</a> for details</td>
</tr>
<tr>
<td>recurring_advice_code</td>
<td>string(2)</td>
<td>Optional, if received in the response from the issuer</td>
</tr>
<tr>
<td>recurring_advice_text</td>
<td>string</td>
<td>Optional, describes the specific recurring advice code</td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
<tr>
<td>message</td>
<td>string(255)</td>
<td>Human readable error message which can be displayed to users.</td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>redirect_url</td>
<td>url</td>
<td>URL where user has to be redirected to complete payment process. It is available for asynchronous mode</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when the transaction was processed in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Combined date and time</a> e.g. 2007-08- 30T17:46:11Z</td>
</tr>
<tr>
<td>descriptor</td>
<td>string</td>
<td>Static descriptor MID info as configured on the gateway</td>
</tr>
<tr>
<td>amount</td>
<td>integer</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>partial_approval</td>
<td>string(4)</td>
<td>Optional, set to ’true’ if partial approval happened. Partially approved amount is then in the amount field. Check <a href="#partial-approvals">Partial Approvals</a> for details</td>
</tr>
<tr>
<td>sent_to_acquirer</td>
<td>string</td>
<td>&quot;true&quot; or &quot;false&quot;</td>
</tr>
<tr>
<td>dynamic_descriptor_params</td>
<td>section</td>
<td>Optional, returned only if dynamic desc params are submitted on the API. Note here that the formatted dyn desc params are returned - as they would be submitted to the schemes for settlement.</td>
</tr>
</tbody></table>

<blockquote>
<p>Error Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>stdClass Object
(
    [transaction_type] =&gt; init_recurring_sale
    [status] =&gt; error
    [mode] =&gt; live
    [transaction_id] =&gt; 43671
    [unique_id] =&gt; 44177a21403427eb96664a6d7e5d5d48
    [response_code] =&gt; 57
    [code] =&gt; 340
    [message] =&gt; billing_address[zip_code] is invalid!
    [timestamp] =&gt; DateTime Object
        (
            [date] =&gt; 2019-03-14 12:05:56.000000
            [timezone_type] =&gt; 2
            [timezone] =&gt; Z
        )
    [descriptor] =&gt; Descriptor one
    [amount] =&gt; 100
    [currency] =&gt; USD
    [sent_to_acquirer] =&gt; false
)
</code></pre>

<pre class="highlight java tab-java"><code><span class="o">&lt;</span><span class="n">payment_response</span> <span class="n">content</span><span class="o">=[</span>
    <span class="o">&lt;</span><span class="n">transaction_type</span> <span class="n">content</span><span class="o">=[</span><span class="n">init_recurring_sale</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">status</span> <span class="n">content</span><span class="o">=[</span><span class="n">error</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">mode</span> <span class="n">content</span><span class="o">=[</span><span class="n">live</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">transaction_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">43671</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">unique_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">44177</span><span class="n">a21403427eb96664a6d7e5d5d48</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">response_code</span> <span class="n">content</span><span class="o">=[</span><span class="mi">57</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">code</span> <span class="n">content</span><span class="o">=[</span><span class="mi">340</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">message</span> <span class="n">content</span><span class="o">=[</span><span class="n">billing_address</span><span class="o">[</span><span class="n">zip_code</span><span class="o">]</span> <span class="n">is</span> <span class="n">invalid</span><span class="o">!]&gt;</span>
    <span class="o">&lt;</span><span class="n">timestamp</span> <span class="n">content</span><span class="o">=[</span><span class="mi">2019</span><span class="o">-</span><span class="mo">03</span><span class="o">-</span><span class="mi">14</span><span class="nl">T12:</span><span class="mo">05</span><span class="o">:</span><span class="mi">56</span><span class="n">Z</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">descriptor</span> <span class="n">content</span><span class="o">=[</span><span class="n">Descriptor</span> <span class="n">one</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">amount</span> <span class="n">content</span><span class="o">=[</span><span class="mi">100</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">currency</span> <span class="n">content</span><span class="o">=[</span><span class="n">USD</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">sent_to_acquirer</span> <span class="n">content</span><span class="o">=[</span><span class="kc">false</span><span class="o">]&gt;</span>
<span class="o">]&gt;</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="p">{</span>
    <span class="nl">transaction_type</span><span class="p">:</span> <span class="s2">"init_recurring_sale"</span><span class="p">,</span>
    <span class="nx">status</span><span class="p">:</span> <span class="s2">"error"</span><span class="p">,</span>
    <span class="nx">mode</span><span class="p">:</span> <span class="s2">"live"</span><span class="p">,</span>
    <span class="nx">transaction_id</span><span class="p">:</span> <span class="s2">"43671"</span><span class="p">,</span>
    <span class="nx">unique_id</span><span class="p">:</span> <span class="s2">"44177a21403427eb96664a6d7e5d5d48"</span><span class="p">,</span>
    <span class="nx">response_code</span><span class="p">:</span> <span class="s2">"57"</span><span class="p">,</span>
    <span class="nx">code</span><span class="p">:</span> <span class="s2">"340"</span><span class="p">,</span>
    <span class="nx">message</span><span class="p">:</span> <span class="s2">"billing_address[zip_code] is invalid!"</span><span class="p">,</span>
    <span class="nx">timestamp</span><span class="p">:</span> <span class="s2">"2019-03-14T12:05:56Z"</span><span class="p">,</span>
    <span class="nx">descriptor</span><span class="p">:</span> <span class="s2">"Descriptor one"</span><span class="p">,</span>
    <span class="nx">amount</span><span class="p">:</span> <span class="s2">"100"</span><span class="p">,</span>
    <span class="nx">currency</span><span class="p">:</span> <span class="s2">"USD"</span><span class="p">,</span>
    <span class="nx">sent_to_acquirer</span><span class="p">:</span> <span class="s2">"false"</span><span class="p">,</span>
<span class="p">}</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;init_recurring_sale&lt;/transaction_type&gt;
  &lt;status&gt;error&lt;/status&gt;
  &lt;mode&gt;live&lt;/mode&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;response_code&gt;57&lt;/response_code&gt;
  &lt;code&gt;340&lt;/code&gt;
  &lt;message&gt;billing_address[zip_code] is invalid!&lt;/message&gt;
  &lt;timestamp&gt;2019-03-14T12:05:56Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
  &lt;sent_to_acquirer&gt;false&lt;/sent_to_acquirer&gt;
&lt;/payment_transaction&gt;
</code></pre>

<p><strong>Error Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>The transaction type</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>transaction_id</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>unique_id</td>
<td>string(32)</td>
<td>Unique id defined by gate (must later be used if capturing, voiding or refunding a transaction)</td>
</tr>
<tr>
<td>code</td>
<td>integer</td>
<td>Error code according to <a href="#error-code-table">Error code table</a></td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
<tr>
<td>message</td>
<td>string(255)</td>
<td>Human readable error message which can be displayed to users.</td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when the transaction was processed in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Combined date and time</a> e.g. 2007-08- 30T17:46:11Z</td>
</tr>
<tr>
<td>descriptor</td>
<td>string</td>
<td>Static descriptor MID info as configured on the gateway</td>
</tr>
<tr>
<td>amount</td>
<td>integer</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>sent_to_acquirer</td>
<td>string</td>
<td>&quot;true&quot; or &quot;false&quot;</td>
</tr>
<tr>
<td>dynamic_descriptor_params</td>
<td>section</td>
<td>Optional, returned only if dynamic desc params are submitted on the API. Note here that the formatted dyn desc params are returned - as they would be submitted to the schemes for settlement.</td>
</tr>
</tbody></table>
<h3 id='recurring-sale'>Recurring Sale</h3>
<p>A RecurringSale transaction is a ”repeated” transaction which follows and references a <a href="#init-recurring-sale">Init Recurring Sale</a> transaction.</p>

<p>The card and cardholder data is omitted. Note that RecurringSales can be partially or fully refunded if configuration allows it, and this will not stop the recurring series.</p>

<aside class="notice">
This transaction type supports <a href="#level-3-travel-data" target="_self">Level 3 travel data</a>.
</aside>

<blockquote>
<p>Request</p>
</blockquote>

<pre class="highlight php tab-php"><code><span class="cp">&lt;?php</span>

<span class="c1">// Load the pre-configured ini file...
</span><span class="nx">\Genesis\Config</span><span class="o">::</span><span class="na">loadSettings</span><span class="p">(</span><span class="s1">'/path/to/config.ini'</span><span class="p">);</span>

<span class="nv">$genesis</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Genesis</span><span class="p">(</span><span class="s1">'Financial\Cards\Recurring\RecurringSale'</span><span class="p">);</span>
<span class="nv">$request</span> <span class="o">=</span> <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">request</span><span class="p">();</span>

<span class="nv">$request</span>
  <span class="o">-&gt;</span><span class="na">setTransactionId</span><span class="p">(</span><span class="s1">'43671'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setUsage</span><span class="p">(</span><span class="s1">'40208 concert tickets'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setRemoteIp</span><span class="p">(</span><span class="s1">'245.253.2.12'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setReferenceId</span><span class="p">(</span><span class="s1">'43672'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setAmount</span><span class="p">(</span><span class="s1">'100'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCurrency</span><span class="p">(</span><span class="s1">'USD'</span><span class="p">);</span>

<span class="k">try</span> <span class="p">{</span>
    <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">execute</span><span class="p">();</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">response</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">getResponseObject</span><span class="p">();</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">\Exception</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$e</span><span class="o">-&gt;</span><span class="na">getMessage</span><span class="p">();</span>
<span class="p">}</span>
</code></pre>

<pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.GenesisClient</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.TransactionResult</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.constants.Endpoints</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.constants.Environments</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.requests.financial.card.recurring.RecurringSale</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.model.Transaction</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Configuration</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Country</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Currency</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.math.BigDecimal</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">GenesisExample</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">()</span>  <span class="o">{</span>

    <span class="c1">// Create configuration</span>
    <span class="n">Configuration</span> <span class="n">configuration</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Configuration</span><span class="o">(</span><span class="n">Environments</span><span class="o">.</span><span class="na">STAGING</span><span class="o">,</span> <span class="n">Endpoints</span><span class="o">.</span><span class="na">EMERCHANTPAY</span><span class="o">);</span>

    <span class="n">configuration</span><span class="o">.</span><span class="na">setUsername</span><span class="o">(</span><span class="s">"SET_YOUR_USERNAME"</span><span class="o">);</span>
    <span class="n">configuration</span><span class="o">.</span><span class="na">setPassword</span><span class="o">(</span><span class="s">"SET_YOUR_PASSWORD"</span><span class="o">);</span>
    <span class="n">configuration</span><span class="o">.</span><span class="na">setToken</span><span class="o">(</span><span class="s">"SET_YOUR_TOKEN"</span><span class="o">);</span>

    <span class="n">RecurringSale</span> <span class="n">request</span> <span class="o">=</span> <span class="k">new</span> <span class="n">RecurringSale</span><span class="o">();</span>

    <span class="n">request</span><span class="o">.</span><span class="na">setTransactionId</span><span class="o">(</span><span class="s">"43671"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setUsage</span><span class="o">(</span><span class="s">"40208 concert tickets"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setRemoteIp</span><span class="o">(</span><span class="s">"245.253.2.12"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setReferenceId</span><span class="o">(</span><span class="s">"43672"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setAmount</span><span class="o">(</span><span class="k">new</span> <span class="n">BigDecimal</span><span class="o">(</span><span class="mi">100</span><span class="o">));</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCurrency</span><span class="o">(</span><span class="s">"USD"</span><span class="o">);</span>

    <span class="n">GenesisClient</span> <span class="n">client</span> <span class="o">=</span> <span class="k">new</span> <span class="n">GenesisClient</span><span class="o">(</span><span class="n">configuration</span><span class="o">,</span> <span class="n">request</span><span class="o">);</span>
    <span class="n">client</span><span class="o">.</span><span class="na">execute</span><span class="o">();</span>

    <span class="c1">// Parse Payment result</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">client</span><span class="o">.</span><span class="na">getResponse</span><span class="o">());</span>

  <span class="o">}</span>
<span class="o">}</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="kd">var</span> <span class="nx">genesis</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'genesis.js/lib/genesis.js'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">transaction</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">genesis</span><span class="p">.</span><span class="nx">transaction</span><span class="p">();</span>

<span class="kd">var</span> <span class="nx">failure</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">reason</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">reason</span><span class="p">);</span>
<span class="p">};</span>

<span class="kd">var</span> <span class="nx">success</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>

<span class="nx">transaction</span><span class="p">.</span><span class="nx">recurring_sale</span><span class="p">(</span>
  <span class="p">{</span>
    <span class="s2">"transaction_id"</span><span class="p">:</span> <span class="s2">"43671"</span><span class="p">,</span>
    <span class="s2">"usage"</span><span class="p">:</span> <span class="s2">"40208 concert tickets"</span><span class="p">,</span>
    <span class="s2">"remote_ip"</span><span class="p">:</span> <span class="s2">"245.253.2.12"</span><span class="p">,</span>
    <span class="s2">"reference_id"</span><span class="p">:</span> <span class="s2">"43672"</span><span class="p">,</span>
    <span class="s2">"amount"</span><span class="p">:</span> <span class="s2">"100"</span><span class="p">,</span>
    <span class="s2">"currency"</span><span class="p">:</span> <span class="s2">"USD"</span>
  <span class="p">}</span>
<span class="p">).</span><span class="nx">send</span><span class="p">()</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">success</span><span class="p">)</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">failure</span><span class="p">);</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>curl https://username:password@gate.emerchantpay.net/process/TERMINAL-TOKEN <span class="se">\</span>
   -H <span class="s2">"Content-Type: text/xml"</span> <span class="se">\</span>
   -d <span class="s1">'
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;recurring_sale&lt;/transaction_type&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;usage&gt;40208 concert tickets&lt;/usage&gt;
  &lt;remote_ip&gt;245.253.2.12&lt;/remote_ip&gt;
  &lt;reference_id&gt;43672&lt;/reference_id&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
&lt;/payment_transaction&gt;'</span>
</code></pre>

<p><strong>Request Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>required</td>
<td>string(255)</td>
<td>The transaction type: <strong>recurring_sale</strong></td>
</tr>
<tr>
<td>transaction_id</td>
<td>required</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>usage</td>
<td>optional</td>
<td>string(255)</td>
<td>Description of the transaction for later use</td>
</tr>
<tr>
<td>gaming</td>
<td>optional</td>
<td>&quot;true&quot;</td>
<td>Signifies whether a gaming transaction is performed. Gaming transactions usually use MCC 7995, contact tech support for more details.</td>
</tr>
<tr>
<td>moto</td>
<td>optional</td>
<td>&quot;true&quot;</td>
<td>Signifies whether a MOTO (mail order telephone order) transaction is performed. Contact tech support for more details.</td>
</tr>
<tr>
<td>remote_ip</td>
<td>required*</td>
<td>IPv4 address</td>
<td>IPv4 address of customer</td>
</tr>
<tr>
<td>reference_id</td>
<td>required</td>
<td>string(32)</td>
<td>Unique id returned by corresponding transaction</td>
</tr>
<tr>
<td>amount</td>
<td>required</td>
<td>integer &gt; 0</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>required</td>
<td>string(3)</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
</tbody></table>

<p><code>required* = conditionally required</code></p>

<blockquote>
<p>Successful Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>stdClass Object
(
    [transaction_type] =&gt; recurring_sale
    [status] =&gt; approved
    [mode] =&gt; live
    [transaction_id] =&gt; 43671
    [unique_id] =&gt; 44177a21403427eb96664a6d7e5d5d48
    [avs_response_code] =&gt; 5I
    [avs_response_text] =&gt; Response provided by issuer processor; Address information not verified
    [authorization_code] =&gt; 345678
    [response_code] =&gt; 00
    [technical_message] =&gt; Transaction successful!
    [message] =&gt; Transaction successful!
    [redirect_url] =&gt; https://gate.emerchantpay.net/redirect/to_acquirer/649e1ff35c61
    [timestamp] =&gt; DateTime Object
        (
            [date] =&gt; 2019-03-14 12:05:56.000000
            [timezone_type] =&gt; 2
            [timezone] =&gt; Z
        )
    [descriptor] =&gt; Descriptor one
    [amount] =&gt; 100
    [currency] =&gt; USD
    [sent_to_acquirer] =&gt; true
)
</code></pre>

<pre class="highlight java tab-java"><code><span class="o">&lt;</span><span class="n">payment_response</span> <span class="n">content</span><span class="o">=[</span>
    <span class="o">&lt;</span><span class="n">transaction_type</span> <span class="n">content</span><span class="o">=[</span><span class="n">recurring_sale</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">status</span> <span class="n">content</span><span class="o">=[</span><span class="n">approved</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">mode</span> <span class="n">content</span><span class="o">=[</span><span class="n">live</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">transaction_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">43671</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">unique_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">44177</span><span class="n">a21403427eb96664a6d7e5d5d48</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">avs_response_code</span> <span class="n">content</span><span class="o">=[</span><span class="mi">5</span><span class="n">I</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">avs_response_text</span> <span class="n">content</span><span class="o">=[</span><span class="n">Response</span> <span class="n">provided</span> <span class="n">by</span> <span class="n">issuer</span> <span class="n">processor</span><span class="o">;</span> <span class="n">Address</span> <span class="n">information</span> <span class="n">not</span> <span class="n">verified</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">authorization_code</span> <span class="n">content</span><span class="o">=[</span><span class="mi">345678</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">response_code</span> <span class="n">content</span><span class="o">=[</span><span class="mo">00</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">technical_message</span> <span class="n">content</span><span class="o">=[</span><span class="n">Transaction</span> <span class="n">successful</span><span class="o">!]&gt;</span>
    <span class="o">&lt;</span><span class="n">message</span> <span class="n">content</span><span class="o">=[</span><span class="n">Transaction</span> <span class="n">successful</span><span class="o">!]&gt;</span>
    <span class="o">&lt;</span><span class="n">redirect_url</span> <span class="n">content</span><span class="o">=[</span><span class="nl">https:</span><span class="c1">//gate.emerchantpay.net/redirect/to_acquirer/649e1ff35c61]&gt;</span>
    <span class="o">&lt;</span><span class="n">timestamp</span> <span class="n">content</span><span class="o">=[</span><span class="mi">2019</span><span class="o">-</span><span class="mo">03</span><span class="o">-</span><span class="mi">14</span><span class="nl">T12:</span><span class="mo">05</span><span class="o">:</span><span class="mi">56</span><span class="n">Z</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">descriptor</span> <span class="n">content</span><span class="o">=[</span><span class="n">Descriptor</span> <span class="n">one</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">amount</span> <span class="n">content</span><span class="o">=[</span><span class="mi">100</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">currency</span> <span class="n">content</span><span class="o">=[</span><span class="n">USD</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">sent_to_acquirer</span> <span class="n">content</span><span class="o">=[</span><span class="kc">true</span><span class="o">]&gt;</span>
<span class="o">]&gt;</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="p">{</span>
    <span class="nl">transaction_type</span><span class="p">:</span> <span class="s2">"recurring_sale"</span><span class="p">,</span>
    <span class="nx">status</span><span class="p">:</span> <span class="s2">"approved"</span><span class="p">,</span>
    <span class="nx">mode</span><span class="p">:</span> <span class="s2">"live"</span><span class="p">,</span>
    <span class="nx">transaction_id</span><span class="p">:</span> <span class="s2">"43671"</span><span class="p">,</span>
    <span class="nx">unique_id</span><span class="p">:</span> <span class="s2">"44177a21403427eb96664a6d7e5d5d48"</span><span class="p">,</span>
    <span class="nx">avs_response_code</span><span class="p">:</span> <span class="s2">"5I"</span><span class="p">,</span>
    <span class="nx">avs_response_text</span><span class="p">:</span> <span class="s2">"Response provided by issuer processor; Address information not verified"</span><span class="p">,</span>
    <span class="nx">authorization_code</span><span class="p">:</span> <span class="s2">"345678"</span><span class="p">,</span>
    <span class="nx">response_code</span><span class="p">:</span> <span class="s2">"00"</span><span class="p">,</span>
    <span class="nx">technical_message</span><span class="p">:</span> <span class="s2">"Transaction successful!"</span><span class="p">,</span>
    <span class="nx">message</span><span class="p">:</span> <span class="s2">"Transaction successful!"</span><span class="p">,</span>
    <span class="nx">redirect_url</span><span class="p">:</span> <span class="s2">"https://gate.emerchantpay.net/redirect/to_acquirer/649e1ff35c61"</span><span class="p">,</span>
    <span class="nx">timestamp</span><span class="p">:</span> <span class="s2">"2019-03-14T12:05:56Z"</span><span class="p">,</span>
    <span class="nx">descriptor</span><span class="p">:</span> <span class="s2">"Descriptor one"</span><span class="p">,</span>
    <span class="nx">amount</span><span class="p">:</span> <span class="s2">"100"</span><span class="p">,</span>
    <span class="nx">currency</span><span class="p">:</span> <span class="s2">"USD"</span><span class="p">,</span>
    <span class="nx">sent_to_acquirer</span><span class="p">:</span> <span class="s2">"true"</span><span class="p">,</span>
<span class="p">}</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;recurring_sale&lt;/transaction_type&gt;
  &lt;status&gt;approved&lt;/status&gt;
  &lt;mode&gt;live&lt;/mode&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;avs_response_code&gt;5I&lt;/avs_response_code&gt;
  &lt;avs_response_text&gt;Response provided by issuer processor; Address information not verified&lt;/avs_response_text&gt;
  &lt;authorization_code&gt;345678&lt;/authorization_code&gt;
  &lt;response_code&gt;00&lt;/response_code&gt;
  &lt;technical_message&gt;Transaction successful!&lt;/technical_message&gt;
  &lt;message&gt;Transaction successful!&lt;/message&gt;
  &lt;redirect_url&gt;https://gate.emerchantpay.net/redirect/to_acquirer/649e1ff35c61&lt;/redirect_url&gt;
  &lt;timestamp&gt;2019-03-14T12:05:56Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
  &lt;sent_to_acquirer&gt;true&lt;/sent_to_acquirer&gt;
&lt;/payment_transaction&gt;
</code></pre>

<p><strong>Successful Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>The transaction type</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>transaction_id</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>unique_id</td>
<td>string(32)</td>
<td>Unique id defined by gate (must later be used if capturing, voiding or refunding a transaction)</td>
</tr>
<tr>
<td>authorization_code</td>
<td>string(6)</td>
<td>Generated by the card network when an authorisation has occurred, used to identify that auth. Consists of 6 alphanumeric chars</td>
</tr>
<tr>
<td>response_code</td>
<td>string(2)</td>
<td>Defines the issuer result of a transaction, the status of a message or some action taken or required. See <a href="#issuer-response-codes">issuer response codes</a> for details</td>
</tr>
<tr>
<td>recurring_advice_code</td>
<td>string(2)</td>
<td>Optional, if received in the response from the issuer</td>
</tr>
<tr>
<td>recurring_advice_text</td>
<td>string</td>
<td>Optional, describes the specific recurring advice code</td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
<tr>
<td>message</td>
<td>string(255)</td>
<td>Human readable error message which can be displayed to users.</td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when the transaction was processed in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Combined date and time</a> e.g. 2007-08- 30T17:46:11Z</td>
</tr>
<tr>
<td>descriptor</td>
<td>string</td>
<td>Static descriptor MID info as configured on the gateway</td>
</tr>
<tr>
<td>amount</td>
<td>integer</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>sent_to_acquirer</td>
<td>string</td>
<td>&quot;true&quot; or &quot;false&quot;</td>
</tr>
</tbody></table>

<blockquote>
<p>Error Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>stdClass Object
(
    [transaction_type] =&gt; recurring_sale
    [status] =&gt; error
    [mode] =&gt; live
    [transaction_id] =&gt; 43671
    [unique_id] =&gt; 44177a21403427eb96664a6d7e5d5d48
    [response_code] =&gt; 57
    [code] =&gt; 340
    [message] =&gt; billing_address[zip_code] is invalid!
    [timestamp] =&gt; DateTime Object
        (
            [date] =&gt; 2019-03-14 12:05:56.000000
            [timezone_type] =&gt; 2
            [timezone] =&gt; Z
        )
    [descriptor] =&gt; Descriptor one
    [amount] =&gt; 100
    [currency] =&gt; USD
    [sent_to_acquirer] =&gt; false
)
</code></pre>

<pre class="highlight java tab-java"><code><span class="o">&lt;</span><span class="n">payment_response</span> <span class="n">content</span><span class="o">=[</span>
    <span class="o">&lt;</span><span class="n">transaction_type</span> <span class="n">content</span><span class="o">=[</span><span class="n">recurring_sale</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">status</span> <span class="n">content</span><span class="o">=[</span><span class="n">error</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">mode</span> <span class="n">content</span><span class="o">=[</span><span class="n">live</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">transaction_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">43671</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">unique_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">44177</span><span class="n">a21403427eb96664a6d7e5d5d48</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">response_code</span> <span class="n">content</span><span class="o">=[</span><span class="mi">57</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">code</span> <span class="n">content</span><span class="o">=[</span><span class="mi">340</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">message</span> <span class="n">content</span><span class="o">=[</span><span class="n">billing_address</span><span class="o">[</span><span class="n">zip_code</span><span class="o">]</span> <span class="n">is</span> <span class="n">invalid</span><span class="o">!]&gt;</span>
    <span class="o">&lt;</span><span class="n">timestamp</span> <span class="n">content</span><span class="o">=[</span><span class="mi">2019</span><span class="o">-</span><span class="mo">03</span><span class="o">-</span><span class="mi">14</span><span class="nl">T12:</span><span class="mo">05</span><span class="o">:</span><span class="mi">56</span><span class="n">Z</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">descriptor</span> <span class="n">content</span><span class="o">=[</span><span class="n">Descriptor</span> <span class="n">one</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">amount</span> <span class="n">content</span><span class="o">=[</span><span class="mi">100</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">currency</span> <span class="n">content</span><span class="o">=[</span><span class="n">USD</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">sent_to_acquirer</span> <span class="n">content</span><span class="o">=[</span><span class="kc">false</span><span class="o">]&gt;</span>
<span class="o">]&gt;</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="p">{</span>
    <span class="nl">transaction_type</span><span class="p">:</span> <span class="s2">"recurring_sale"</span><span class="p">,</span>
    <span class="nx">status</span><span class="p">:</span> <span class="s2">"error"</span><span class="p">,</span>
    <span class="nx">mode</span><span class="p">:</span> <span class="s2">"live"</span><span class="p">,</span>
    <span class="nx">transaction_id</span><span class="p">:</span> <span class="s2">"43671"</span><span class="p">,</span>
    <span class="nx">unique_id</span><span class="p">:</span> <span class="s2">"44177a21403427eb96664a6d7e5d5d48"</span><span class="p">,</span>
    <span class="nx">response_code</span><span class="p">:</span> <span class="s2">"57"</span><span class="p">,</span>
    <span class="nx">code</span><span class="p">:</span> <span class="s2">"340"</span><span class="p">,</span>
    <span class="nx">message</span><span class="p">:</span> <span class="s2">"billing_address[zip_code] is invalid!"</span><span class="p">,</span>
    <span class="nx">timestamp</span><span class="p">:</span> <span class="s2">"2019-03-14T12:05:56Z"</span><span class="p">,</span>
    <span class="nx">descriptor</span><span class="p">:</span> <span class="s2">"Descriptor one"</span><span class="p">,</span>
    <span class="nx">amount</span><span class="p">:</span> <span class="s2">"100"</span><span class="p">,</span>
    <span class="nx">currency</span><span class="p">:</span> <span class="s2">"USD"</span><span class="p">,</span>
    <span class="nx">sent_to_acquirer</span><span class="p">:</span> <span class="s2">"false"</span><span class="p">,</span>
<span class="p">}</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;recurring_sale&lt;/transaction_type&gt;
  &lt;status&gt;error&lt;/status&gt;
  &lt;mode&gt;live&lt;/mode&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;response_code&gt;57&lt;/response_code&gt;
  &lt;code&gt;340&lt;/code&gt;
  &lt;message&gt;billing_address[zip_code] is invalid!&lt;/message&gt;
  &lt;timestamp&gt;2019-03-14T12:05:56Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
  &lt;sent_to_acquirer&gt;false&lt;/sent_to_acquirer&gt;
&lt;/payment_transaction&gt;
</code></pre>

<p><strong>Error Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>The transaction type</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>transaction_id</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>unique_id</td>
<td>string(32)</td>
<td>Unique id defined by gate (must later be used if capturing, voiding or refunding a transaction)</td>
</tr>
<tr>
<td>gaming</td>
<td>string</td>
<td>Signifies whether a gaming transaction is performed. Gaming transactions usually use MCC 7995, contact tech support for more details.</td>
</tr>
<tr>
<td>moto</td>
<td>string</td>
<td>Signifies whether a MOTO (mail order telephone order) transaction is performed. Contact tech support for more details.</td>
</tr>
<tr>
<td>response_code</td>
<td>string(2)</td>
<td>Defines the issuer result of a transaction, the status of a message or some action taken or required. See <a href="#issuer-response-codes">issuer response codes</a> for details</td>
</tr>
<tr>
<td>code</td>
<td>integer</td>
<td>Error code according to <a href="#error-code-table">Error code table</a></td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
<tr>
<td>message</td>
<td>string(255)</td>
<td>Human readable error message which can be displayed to users.</td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when the transaction was processed in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Combined date and time</a> e.g. 2007-08- 30T17:46:11Z</td>
</tr>
<tr>
<td>descriptor</td>
<td>string</td>
<td>Static descriptor MID info as configured on the gateway</td>
</tr>
<tr>
<td>amount</td>
<td>integer</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>sent_to_acquirer</td>
<td>string</td>
<td>&quot;true&quot; or &quot;false&quot;</td>
</tr>
<tr>
<td>dynamic_descriptor_params</td>
<td>section</td>
<td>Optional, returned only if dynamic desc params are submitted on the API. Note here that the formatted dyn desc params are returned - as they would be submitted to the schemes for settlement.</td>
</tr>
</tbody></table>
<h2 id='wallets'>Wallets</h2><h3 id='neteller'>Neteller</h3>
<aside class="notice" >
    Neteller transactions are only synchronous. When the payment reached a final state Genesis gateway sends notification to merchant on the configured url into its account.
</aside>

<blockquote>
<p>Request</p>
</blockquote>

<pre class="highlight php tab-php"><code><span class="cp">&lt;?php</span>

<span class="c1">// Load the pre-configured ini file...
</span><span class="nx">\Genesis\Config</span><span class="o">::</span><span class="na">loadSettings</span><span class="p">(</span><span class="s1">'/path/to/config.ini'</span><span class="p">);</span>

<span class="nv">$genesis</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Genesis</span><span class="p">(</span><span class="s1">'Financial\Wallets\Neteller'</span><span class="p">);</span>
<span class="nv">$request</span> <span class="o">=</span> <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">request</span><span class="p">();</span>

<span class="nv">$request</span>
  <span class="o">-&gt;</span><span class="na">setTransactionId</span><span class="p">(</span><span class="s1">'43671'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setUsage</span><span class="p">(</span><span class="s1">'40208 concert tickets'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setRemoteIp</span><span class="p">(</span><span class="s1">'245.253.2.12'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setNotificationUrl</span><span class="p">(</span><span class="s1">'https://www.example.com/notification'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setReturnSuccessUrl</span><span class="p">(</span><span class="s1">'http://www.example.com/success'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setReturnFailureUrl</span><span class="p">(</span><span class="s1">'http://www.example.com/failure'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setAmount</span><span class="p">(</span><span class="s1">'100'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCurrency</span><span class="p">(</span><span class="s1">'USD'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCustomerAccount</span><span class="p">(</span><span class="s1">'453501020503'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setAccountPassword</span><span class="p">(</span><span class="s1">'908379'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCustomerEmail</span><span class="p">(</span><span class="s1">'travis@example.com'</span><span class="p">)</span>


  <span class="c1">// Billing Address
</span>  <span class="o">-&gt;</span><span class="na">setBillingFirstName</span><span class="p">(</span><span class="s1">'Travis'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingLastName</span><span class="p">(</span><span class="s1">'Pastrana'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingAddress1</span><span class="p">(</span><span class="s1">'Muster Str. 12'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingZipCode</span><span class="p">(</span><span class="s1">'10178'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingCity</span><span class="p">(</span><span class="s1">'Los Angeles'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingState</span><span class="p">(</span><span class="s1">'CA'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingCountry</span><span class="p">(</span><span class="s1">'US'</span><span class="p">);</span>

<span class="k">try</span> <span class="p">{</span>
    <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">execute</span><span class="p">();</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">response</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">getResponseObject</span><span class="p">();</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">\Exception</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$e</span><span class="o">-&gt;</span><span class="na">getMessage</span><span class="p">();</span>
<span class="p">}</span>
</code></pre>

<pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.GenesisClient</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.TransactionResult</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.constants.Endpoints</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.constants.Environments</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.requests.financial.wallets.NetellerRequest</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.model.Transaction</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Configuration</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Country</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Currency</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.math.BigDecimal</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.MalformedURLException</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.URL</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">GenesisExample</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">MalformedURLException</span> <span class="o">{</span>

    <span class="c1">// Create configuration</span>
    <span class="n">Configuration</span> <span class="n">configuration</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Configuration</span><span class="o">(</span><span class="n">Environments</span><span class="o">.</span><span class="na">STAGING</span><span class="o">,</span> <span class="n">Endpoints</span><span class="o">.</span><span class="na">EMERCHANTPAY</span><span class="o">);</span>

    <span class="n">configuration</span><span class="o">.</span><span class="na">setUsername</span><span class="o">(</span><span class="s">"SET_YOUR_USERNAME"</span><span class="o">);</span>
    <span class="n">configuration</span><span class="o">.</span><span class="na">setPassword</span><span class="o">(</span><span class="s">"SET_YOUR_PASSWORD"</span><span class="o">);</span>
    <span class="n">configuration</span><span class="o">.</span><span class="na">setToken</span><span class="o">(</span><span class="s">"SET_YOUR_TOKEN"</span><span class="o">);</span>

    <span class="n">NetellerRequest</span> <span class="n">request</span> <span class="o">=</span> <span class="k">new</span> <span class="n">NetellerRequest</span><span class="o">();</span>

    <span class="n">request</span><span class="o">.</span><span class="na">setTransactionId</span><span class="o">(</span><span class="s">"43671"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setUsage</span><span class="o">(</span><span class="s">"40208 concert tickets"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setRemoteIp</span><span class="o">(</span><span class="s">"245.253.2.12"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setNotificationUrl</span><span class="o">(</span><span class="k">new</span> <span class="n">URL</span><span class="o">(</span><span class="s">"https://www.example.com/notification"</span><span class="o">));</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setReturnSuccessUrl</span><span class="o">(</span><span class="k">new</span> <span class="n">URL</span><span class="o">(</span><span class="s">"http://www.example.com/success"</span><span class="o">));</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setReturnFailureUrl</span><span class="o">(</span><span class="k">new</span> <span class="n">URL</span><span class="o">(</span><span class="s">"http://www.example.com/failure"</span><span class="o">));</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setAmount</span><span class="o">(</span><span class="k">new</span> <span class="n">BigDecimal</span><span class="o">(</span><span class="mi">100</span><span class="o">));</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCurrency</span><span class="o">(</span><span class="s">"USD"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCustomerAccount</span><span class="o">(</span><span class="s">"453501020503"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setAccountPassword</span><span class="o">(</span><span class="s">"908379"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCustomerEmail</span><span class="o">(</span><span class="s">"travis@example.com"</span><span class="o">);</span>


    <span class="c1">// Billing Address</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingFirstname</span><span class="o">(</span><span class="s">"Travis"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingLastname</span><span class="o">(</span><span class="s">"Pastrana"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingPrimaryAddress</span><span class="o">(</span><span class="s">"Muster Str. 12"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingZipCode</span><span class="o">(</span><span class="s">"10178"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingCity</span><span class="o">(</span><span class="s">"Los Angeles"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingState</span><span class="o">(</span><span class="s">"CA"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingCountry</span><span class="o">(</span><span class="s">"US"</span><span class="o">);</span>

    <span class="n">GenesisClient</span> <span class="n">client</span> <span class="o">=</span> <span class="k">new</span> <span class="n">GenesisClient</span><span class="o">(</span><span class="n">configuration</span><span class="o">,</span> <span class="n">request</span><span class="o">);</span>
    <span class="n">client</span><span class="o">.</span><span class="na">execute</span><span class="o">();</span>

    <span class="c1">// Parse Payment result</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">client</span><span class="o">.</span><span class="na">getResponse</span><span class="o">());</span>

  <span class="o">}</span>
<span class="o">}</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="kd">var</span> <span class="nx">genesis</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'genesis.js/lib/genesis.js'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">transaction</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">genesis</span><span class="p">.</span><span class="nx">transaction</span><span class="p">();</span>

<span class="kd">var</span> <span class="nx">failure</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">reason</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">reason</span><span class="p">);</span>
<span class="p">};</span>

<span class="kd">var</span> <span class="nx">success</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>

<span class="nx">transaction</span><span class="p">.</span><span class="nx">neteller</span><span class="p">(</span>
  <span class="p">{</span>
    <span class="s2">"transaction_id"</span><span class="p">:</span> <span class="s2">"43671"</span><span class="p">,</span>
    <span class="s2">"usage"</span><span class="p">:</span> <span class="s2">"40208 concert tickets"</span><span class="p">,</span>
    <span class="s2">"remote_ip"</span><span class="p">:</span> <span class="s2">"245.253.2.12"</span><span class="p">,</span>
    <span class="s2">"notification_url"</span><span class="p">:</span> <span class="s2">"https://www.example.com/notification"</span><span class="p">,</span>
    <span class="s2">"return_success_url"</span><span class="p">:</span> <span class="s2">"http://www.example.com/success"</span><span class="p">,</span>
    <span class="s2">"return_failure_url"</span><span class="p">:</span> <span class="s2">"http://www.example.com/failure"</span><span class="p">,</span>
    <span class="s2">"amount"</span><span class="p">:</span> <span class="s2">"100"</span><span class="p">,</span>
    <span class="s2">"currency"</span><span class="p">:</span> <span class="s2">"USD"</span><span class="p">,</span>
    <span class="s2">"customer_account"</span><span class="p">:</span> <span class="s2">"453501020503"</span><span class="p">,</span>
    <span class="s2">"account_password"</span><span class="p">:</span> <span class="s2">"908379"</span><span class="p">,</span>
    <span class="s2">"customer_email"</span><span class="p">:</span> <span class="s2">"travis@example.com"</span><span class="p">,</span>
    <span class="s2">"billing_address"</span><span class="p">:</span> <span class="p">{</span>
      <span class="s2">"first_name"</span><span class="p">:</span> <span class="s2">"Travis"</span><span class="p">,</span>
      <span class="s2">"last_name"</span><span class="p">:</span> <span class="s2">"Pastrana"</span><span class="p">,</span>
      <span class="s2">"address1"</span><span class="p">:</span> <span class="s2">"Muster Str. 12"</span><span class="p">,</span>
      <span class="s2">"zip_code"</span><span class="p">:</span> <span class="s2">"10178"</span><span class="p">,</span>
      <span class="s2">"city"</span><span class="p">:</span> <span class="s2">"Los Angeles"</span><span class="p">,</span>
      <span class="s2">"state"</span><span class="p">:</span> <span class="s2">"CA"</span><span class="p">,</span>
      <span class="s2">"country"</span><span class="p">:</span> <span class="s2">"US"</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">).</span><span class="nx">send</span><span class="p">()</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">success</span><span class="p">)</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">failure</span><span class="p">);</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>curl https://username:password@gate.emerchantpay.net/process/TERMINAL-TOKEN <span class="se">\</span>
   -H <span class="s2">"Content-Type: text/xml"</span> <span class="se">\</span>
   -d <span class="s1">'
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;neteller&lt;/transaction_type&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;usage&gt;40208 concert tickets&lt;/usage&gt;
  &lt;remote_ip&gt;245.253.2.12&lt;/remote_ip&gt;
  &lt;notification_url&gt;https://www.example.com/notification&lt;/notification_url&gt;
  &lt;return_success_url&gt;http://www.example.com/success&lt;/return_success_url&gt;
  &lt;return_failure_url&gt;http://www.example.com/failure&lt;/return_failure_url&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
  &lt;customer_account&gt;453501020503&lt;/customer_account&gt;
  &lt;account_password&gt;908379&lt;/account_password&gt;
  &lt;customer_email&gt;travis@example.com&lt;/customer_email&gt;
  &lt;billing_address&gt;
    &lt;first_name&gt;Travis&lt;/first_name&gt;
    &lt;last_name&gt;Pastrana&lt;/last_name&gt;
    &lt;address1&gt;Muster Str. 12&lt;/address1&gt;
    &lt;zip_code&gt;10178&lt;/zip_code&gt;
    &lt;city&gt;Los Angeles&lt;/city&gt;
    &lt;state&gt;CA&lt;/state&gt;
    &lt;country&gt;US&lt;/country&gt;
  &lt;/billing_address&gt;
&lt;/payment_transaction&gt;'</span>
</code></pre>

<p><strong>Request Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>required</td>
<td>string(255)</td>
<td>The transaction type: <strong>neteller</strong></td>
</tr>
<tr>
<td>transaction_id</td>
<td>required</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>usage</td>
<td>optional</td>
<td>string(255)</td>
<td>Description of the transaction for later use</td>
</tr>
<tr>
<td>remote_ip</td>
<td>required</td>
<td>IPv4 address</td>
<td>IPv4 address of customer</td>
</tr>
<tr>
<td>return_success_url</td>
<td>required</td>
<td>url</td>
<td>URL where customer is sent to after successful payment</td>
</tr>
<tr>
<td>return_failure_url</td>
<td>required</td>
<td>url</td>
<td>URL where customer is sent to after unsuccessful payment</td>
</tr>
<tr>
<td>amount</td>
<td>required</td>
<td>integer &gt; 0</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>required</td>
<td>string(3)</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>customer_email</td>
<td>required</td>
<td>e-mail address</td>
<td>Must contain valid e-mail of customer</td>
</tr>
<tr>
<td>customer_phone</td>
<td>required*</td>
<td>string(32)</td>
<td>Must contain valid phone number of customer</td>
</tr>
<tr>
<td>customer_account</td>
<td>required</td>
<td>string(100)</td>
<td>Customer email/id of neteller account</td>
</tr>
<tr>
<td>account_password</td>
<td>required</td>
<td>string(6)</td>
<td>Account secret password</td>
</tr>
<tr>
<td><strong>billing_address</strong></td>
<td>required</td>
<td></td>
<td>See <a href="#required-vs-optional-api-params">Required vs Optional API params</a> for details</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;first_name</td>
<td>required*</td>
<td>string(255)</td>
<td>Customer first name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;last_name</td>
<td>required*</td>
<td>string(255)</td>
<td>Customer last name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address1</td>
<td>required*</td>
<td>string(255)</td>
<td>Primary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address2</td>
<td>required*</td>
<td>string(255)</td>
<td>Secondary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;zip_code</td>
<td>required*</td>
<td>string</td>
<td>ZIP code</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;city</td>
<td>required*</td>
<td>string(255)</td>
<td>City</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;state</td>
<td>required*</td>
<td>string(2)</td>
<td>State code in <a href="https://en.wikipedia.org/wiki/ISO_3166-2">ISO 3166-2</a>, required for USA and Canada</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;country</td>
<td>required</td>
<td>string(2)</td>
<td>Country code in <a href="https://www.iso.org/iso-3166-country-codes.html">ISO 3166</a></td>
</tr>
<tr>
<td><strong>shipping_address</strong></td>
<td>optional</td>
<td></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;first_name</td>
<td>optional</td>
<td>string(255)</td>
<td>Customer first name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;last_name</td>
<td>optional</td>
<td>string(255)</td>
<td>Customer last name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address1</td>
<td>optional</td>
<td>string(255)</td>
<td>Primary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address2</td>
<td>optional</td>
<td>string(255)</td>
<td>Secondary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;zip_code</td>
<td>optional</td>
<td>string</td>
<td>ZIP code</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;city</td>
<td>optional</td>
<td>string(255)</td>
<td>City</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;state</td>
<td>optional</td>
<td>string(2)</td>
<td>State code in <a href="https://en.wikipedia.org/wiki/ISO_3166-2">ISO 3166-2</a>, required for USA and Canada</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;country</td>
<td>optional</td>
<td>string(2)</td>
<td>Country code in <a href="https://www.iso.org/iso-3166-country-codes.html">ISO 3166</a></td>
</tr>
</tbody></table>

<p><code>required* = conditionally required</code></p>

<blockquote>
<p>Successful Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>stdClass Object
(
    [transaction_type] =&gt; neteller
    [status] =&gt; approved
    [mode] =&gt; live
    [transaction_id] =&gt; 43671
    [unique_id] =&gt; 44177a21403427eb96664a6d7e5d5d48
    [technical_message] =&gt; Transaction successful!
    [message] =&gt; Transaction successful!
    [timestamp] =&gt; DateTime Object
        (
            [date] =&gt; 2019-03-14 12:05:56.000000
            [timezone_type] =&gt; 2
            [timezone] =&gt; Z
        )
    [descriptor] =&gt; Descriptor one
    [amount] =&gt; 100
    [currency] =&gt; USD
    [sent_to_acquirer] =&gt; true
)
</code></pre>

<pre class="highlight java tab-java"><code><span class="o">&lt;</span><span class="n">payment_response</span> <span class="n">content</span><span class="o">=[</span>
    <span class="o">&lt;</span><span class="n">transaction_type</span> <span class="n">content</span><span class="o">=[</span><span class="n">neteller</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">status</span> <span class="n">content</span><span class="o">=[</span><span class="n">approved</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">mode</span> <span class="n">content</span><span class="o">=[</span><span class="n">live</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">transaction_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">43671</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">unique_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">44177</span><span class="n">a21403427eb96664a6d7e5d5d48</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">technical_message</span> <span class="n">content</span><span class="o">=[</span><span class="n">Transaction</span> <span class="n">successful</span><span class="o">!]&gt;</span>
    <span class="o">&lt;</span><span class="n">message</span> <span class="n">content</span><span class="o">=[</span><span class="n">Transaction</span> <span class="n">successful</span><span class="o">!]&gt;</span>
    <span class="o">&lt;</span><span class="n">timestamp</span> <span class="n">content</span><span class="o">=[</span><span class="mi">2019</span><span class="o">-</span><span class="mo">03</span><span class="o">-</span><span class="mi">14</span><span class="nl">T12:</span><span class="mo">05</span><span class="o">:</span><span class="mi">56</span><span class="n">Z</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">descriptor</span> <span class="n">content</span><span class="o">=[</span><span class="n">Descriptor</span> <span class="n">one</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">amount</span> <span class="n">content</span><span class="o">=[</span><span class="mi">100</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">currency</span> <span class="n">content</span><span class="o">=[</span><span class="n">USD</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">sent_to_acquirer</span> <span class="n">content</span><span class="o">=[</span><span class="kc">true</span><span class="o">]&gt;</span>
<span class="o">]&gt;</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="p">{</span>
    <span class="nl">transaction_type</span><span class="p">:</span> <span class="s2">"neteller"</span><span class="p">,</span>
    <span class="nx">status</span><span class="p">:</span> <span class="s2">"approved"</span><span class="p">,</span>
    <span class="nx">mode</span><span class="p">:</span> <span class="s2">"live"</span><span class="p">,</span>
    <span class="nx">transaction_id</span><span class="p">:</span> <span class="s2">"43671"</span><span class="p">,</span>
    <span class="nx">unique_id</span><span class="p">:</span> <span class="s2">"44177a21403427eb96664a6d7e5d5d48"</span><span class="p">,</span>
    <span class="nx">technical_message</span><span class="p">:</span> <span class="s2">"Transaction successful!"</span><span class="p">,</span>
    <span class="nx">message</span><span class="p">:</span> <span class="s2">"Transaction successful!"</span><span class="p">,</span>
    <span class="nx">timestamp</span><span class="p">:</span> <span class="s2">"2019-03-14T12:05:56Z"</span><span class="p">,</span>
    <span class="nx">descriptor</span><span class="p">:</span> <span class="s2">"Descriptor one"</span><span class="p">,</span>
    <span class="nx">amount</span><span class="p">:</span> <span class="s2">"100"</span><span class="p">,</span>
    <span class="nx">currency</span><span class="p">:</span> <span class="s2">"USD"</span><span class="p">,</span>
    <span class="nx">sent_to_acquirer</span><span class="p">:</span> <span class="s2">"true"</span><span class="p">,</span>
<span class="p">}</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;neteller&lt;/transaction_type&gt;
  &lt;status&gt;approved&lt;/status&gt;
  &lt;mode&gt;live&lt;/mode&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;technical_message&gt;Transaction successful!&lt;/technical_message&gt;
  &lt;message&gt;Transaction successful!&lt;/message&gt;
  &lt;timestamp&gt;2019-03-14T12:05:56Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
  &lt;sent_to_acquirer&gt;true&lt;/sent_to_acquirer&gt;
&lt;/payment_transaction&gt;
</code></pre>

<p><strong>Successful Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>The transaction type</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>transaction_id</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>unique_id</td>
<td>string(32)</td>
<td>Unique id defined by gate (must later be used if capturing, voiding or refunding a transaction)</td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
<tr>
<td>message</td>
<td>string(255)</td>
<td>Human readable error message which can be displayed to users.</td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when the transaction was processed in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Combined date and time</a> e.g. 2007-08- 30T17:46:11Z</td>
</tr>
<tr>
<td>descriptor</td>
<td>string</td>
<td>Static descriptor MID info as configured on the gateway</td>
</tr>
<tr>
<td>amount</td>
<td>integer</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>sent_to_acquirer</td>
<td>string</td>
<td>&quot;true&quot; or &quot;false&quot;</td>
</tr>
</tbody></table>

<blockquote>
<p>Error Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>stdClass Object
(
    [transaction_type] =&gt; neteller
    [status] =&gt; error
    [mode] =&gt; live
    [transaction_id] =&gt; 43671
    [unique_id] =&gt; 44177a21403427eb96664a6d7e5d5d48
    [code] =&gt; 110
    [message] =&gt; Something went wrong, please contact support!
    [timestamp] =&gt; DateTime Object
        (
            [date] =&gt; 2019-03-14 12:05:56.000000
            [timezone_type] =&gt; 2
            [timezone] =&gt; Z
        )
    [descriptor] =&gt; Descriptor one
    [amount] =&gt; 100
    [currency] =&gt; USD
    [sent_to_acquirer] =&gt; false
)
</code></pre>

<pre class="highlight java tab-java"><code><span class="o">&lt;</span><span class="n">payment_response</span> <span class="n">content</span><span class="o">=[</span>
    <span class="o">&lt;</span><span class="n">transaction_type</span> <span class="n">content</span><span class="o">=[</span><span class="n">neteller</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">status</span> <span class="n">content</span><span class="o">=[</span><span class="n">error</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">mode</span> <span class="n">content</span><span class="o">=[</span><span class="n">live</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">transaction_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">43671</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">unique_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">44177</span><span class="n">a21403427eb96664a6d7e5d5d48</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">code</span> <span class="n">content</span><span class="o">=[</span><span class="mi">110</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">message</span> <span class="n">content</span><span class="o">=[</span><span class="n">Something</span> <span class="n">went</span> <span class="n">wrong</span><span class="o">,</span> <span class="n">please</span> <span class="n">contact</span> <span class="n">support</span><span class="o">!]&gt;</span>
    <span class="o">&lt;</span><span class="n">timestamp</span> <span class="n">content</span><span class="o">=[</span><span class="mi">2019</span><span class="o">-</span><span class="mo">03</span><span class="o">-</span><span class="mi">14</span><span class="nl">T12:</span><span class="mo">05</span><span class="o">:</span><span class="mi">56</span><span class="n">Z</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">descriptor</span> <span class="n">content</span><span class="o">=[</span><span class="n">Descriptor</span> <span class="n">one</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">amount</span> <span class="n">content</span><span class="o">=[</span><span class="mi">100</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">currency</span> <span class="n">content</span><span class="o">=[</span><span class="n">USD</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">sent_to_acquirer</span> <span class="n">content</span><span class="o">=[</span><span class="kc">false</span><span class="o">]&gt;</span>
<span class="o">]&gt;</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="p">{</span>
    <span class="nl">transaction_type</span><span class="p">:</span> <span class="s2">"neteller"</span><span class="p">,</span>
    <span class="nx">status</span><span class="p">:</span> <span class="s2">"error"</span><span class="p">,</span>
    <span class="nx">mode</span><span class="p">:</span> <span class="s2">"live"</span><span class="p">,</span>
    <span class="nx">transaction_id</span><span class="p">:</span> <span class="s2">"43671"</span><span class="p">,</span>
    <span class="nx">unique_id</span><span class="p">:</span> <span class="s2">"44177a21403427eb96664a6d7e5d5d48"</span><span class="p">,</span>
    <span class="nx">code</span><span class="p">:</span> <span class="s2">"110"</span><span class="p">,</span>
    <span class="nx">message</span><span class="p">:</span> <span class="s2">"Something went wrong, please contact support!"</span><span class="p">,</span>
    <span class="nx">timestamp</span><span class="p">:</span> <span class="s2">"2019-03-14T12:05:56Z"</span><span class="p">,</span>
    <span class="nx">descriptor</span><span class="p">:</span> <span class="s2">"Descriptor one"</span><span class="p">,</span>
    <span class="nx">amount</span><span class="p">:</span> <span class="s2">"100"</span><span class="p">,</span>
    <span class="nx">currency</span><span class="p">:</span> <span class="s2">"USD"</span><span class="p">,</span>
    <span class="nx">sent_to_acquirer</span><span class="p">:</span> <span class="s2">"false"</span><span class="p">,</span>
<span class="p">}</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;neteller&lt;/transaction_type&gt;
  &lt;status&gt;error&lt;/status&gt;
  &lt;mode&gt;live&lt;/mode&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;code&gt;110&lt;/code&gt;
  &lt;message&gt;Something went wrong, please contact support!&lt;/message&gt;
  &lt;timestamp&gt;2019-03-14T12:05:56Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
  &lt;sent_to_acquirer&gt;false&lt;/sent_to_acquirer&gt;
&lt;/payment_transaction&gt;
</code></pre>

<p><strong>Error Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>The transaction type</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>transaction_id</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>unique_id</td>
<td>string(32)</td>
<td>Unique id defined by gate (must later be used if capturing, voiding or refunding a transaction)</td>
</tr>
<tr>
<td>code</td>
<td>integer</td>
<td>Error code according to <a href="#error-code-table">Error code table</a></td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
<tr>
<td>message</td>
<td>string(255)</td>
<td>Human readable error message which can be displayed to users.</td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when the transaction was processed in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Combined date and time</a> e.g. 2007-08- 30T17:46:11Z</td>
</tr>
<tr>
<td>descriptor</td>
<td>string</td>
<td>Static descriptor MID info as configured on the gateway</td>
</tr>
<tr>
<td>amount</td>
<td>integer</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>sent_to_acquirer</td>
<td>string</td>
<td>&quot;true&quot; or &quot;false&quot;</td>
</tr>
</tbody></table>
<h3 id='paypal-express-checkout'>PayPal Express Checkout</h3>
<aside class="notice" >
Express Checkout is a fast, easy way for buyers to pay with PayPal. Express Checkout eliminates one of the major causes of checkout abandonment by giving buyers all the transaction details at once, including order details, shipping options, insurance choices, and tax totals.
</aside>

<blockquote>
<p>Request</p>
</blockquote>

<pre class="highlight php tab-php"><code><span class="cp">&lt;?php</span>

<span class="c1">// Load the pre-configured ini file...
</span><span class="nx">\Genesis\Config</span><span class="o">::</span><span class="na">loadSettings</span><span class="p">(</span><span class="s1">'/path/to/config.ini'</span><span class="p">);</span>

<span class="nv">$genesis</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Genesis</span><span class="p">(</span><span class="s1">'Financial\Alternatives\PaypalExpress'</span><span class="p">);</span>
<span class="nv">$request</span> <span class="o">=</span> <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">request</span><span class="p">();</span>

<span class="nv">$request</span>
  <span class="o">-&gt;</span><span class="na">setTransactionId</span><span class="p">(</span><span class="s1">'43671'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setUsage</span><span class="p">(</span><span class="s1">'40208 concert tickets'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setRemoteIp</span><span class="p">(</span><span class="s1">'245.253.2.12'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setNotificationUrl</span><span class="p">(</span><span class="s1">'https://www.example.com/notification'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setReturnSuccessUrl</span><span class="p">(</span><span class="s1">'http://www.example.com/success'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setReturnFailureUrl</span><span class="p">(</span><span class="s1">'http://www.example.com/failure'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setAmount</span><span class="p">(</span><span class="s1">'100'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCurrency</span><span class="p">(</span><span class="s1">'USD'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCustomerEmail</span><span class="p">(</span><span class="s1">'travis@example.com'</span><span class="p">)</span>


  <span class="c1">// Billing Address
</span>  <span class="o">-&gt;</span><span class="na">setBillingFirstName</span><span class="p">(</span><span class="s1">'Travis'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingLastName</span><span class="p">(</span><span class="s1">'Pastrana'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingAddress1</span><span class="p">(</span><span class="s1">'Muster Str. 12'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingZipCode</span><span class="p">(</span><span class="s1">'10178'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingCity</span><span class="p">(</span><span class="s1">'Los Angeles'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingState</span><span class="p">(</span><span class="s1">'CA'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingCountry</span><span class="p">(</span><span class="s1">'US'</span><span class="p">);</span>

<span class="k">try</span> <span class="p">{</span>
    <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">execute</span><span class="p">();</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">response</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">getResponseObject</span><span class="p">();</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">\Exception</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$e</span><span class="o">-&gt;</span><span class="na">getMessage</span><span class="p">();</span>
<span class="p">}</span>
</code></pre>

<pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.GenesisClient</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.TransactionResult</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.constants.Endpoints</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.constants.Environments</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.requests.financial.apm.PayPalExpressRequest</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.model.Transaction</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Configuration</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Country</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Currency</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.math.BigDecimal</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.MalformedURLException</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.URL</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">GenesisExample</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">MalformedURLException</span> <span class="o">{</span>

    <span class="c1">// Create configuration</span>
    <span class="n">Configuration</span> <span class="n">configuration</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Configuration</span><span class="o">(</span><span class="n">Environments</span><span class="o">.</span><span class="na">STAGING</span><span class="o">,</span> <span class="n">Endpoints</span><span class="o">.</span><span class="na">EMERCHANTPAY</span><span class="o">);</span>

    <span class="n">configuration</span><span class="o">.</span><span class="na">setUsername</span><span class="o">(</span><span class="s">"SET_YOUR_USERNAME"</span><span class="o">);</span>
    <span class="n">configuration</span><span class="o">.</span><span class="na">setPassword</span><span class="o">(</span><span class="s">"SET_YOUR_PASSWORD"</span><span class="o">);</span>
    <span class="n">configuration</span><span class="o">.</span><span class="na">setToken</span><span class="o">(</span><span class="s">"SET_YOUR_TOKEN"</span><span class="o">);</span>

    <span class="n">PayPalExpressRequest</span> <span class="n">request</span> <span class="o">=</span> <span class="k">new</span> <span class="n">PayPalExpressRequest</span><span class="o">();</span>

    <span class="n">request</span><span class="o">.</span><span class="na">setTransactionId</span><span class="o">(</span><span class="s">"43671"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setUsage</span><span class="o">(</span><span class="s">"40208 concert tickets"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setRemoteIp</span><span class="o">(</span><span class="s">"245.253.2.12"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setNotificationUrl</span><span class="o">(</span><span class="k">new</span> <span class="n">URL</span><span class="o">(</span><span class="s">"https://www.example.com/notification"</span><span class="o">));</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setReturnSuccessUrl</span><span class="o">(</span><span class="k">new</span> <span class="n">URL</span><span class="o">(</span><span class="s">"http://www.example.com/success"</span><span class="o">));</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setReturnFailureUrl</span><span class="o">(</span><span class="k">new</span> <span class="n">URL</span><span class="o">(</span><span class="s">"http://www.example.com/failure"</span><span class="o">));</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setAmount</span><span class="o">(</span><span class="k">new</span> <span class="n">BigDecimal</span><span class="o">(</span><span class="mi">100</span><span class="o">));</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCurrency</span><span class="o">(</span><span class="s">"USD"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCustomerEmail</span><span class="o">(</span><span class="s">"travis@example.com"</span><span class="o">);</span>


    <span class="c1">// Billing Address</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingFirstname</span><span class="o">(</span><span class="s">"Travis"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingLastname</span><span class="o">(</span><span class="s">"Pastrana"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingPrimaryAddress</span><span class="o">(</span><span class="s">"Muster Str. 12"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingZipCode</span><span class="o">(</span><span class="s">"10178"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingCity</span><span class="o">(</span><span class="s">"Los Angeles"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingState</span><span class="o">(</span><span class="s">"CA"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingCountry</span><span class="o">(</span><span class="s">"US"</span><span class="o">);</span>

    <span class="n">GenesisClient</span> <span class="n">client</span> <span class="o">=</span> <span class="k">new</span> <span class="n">GenesisClient</span><span class="o">(</span><span class="n">configuration</span><span class="o">,</span> <span class="n">request</span><span class="o">);</span>
    <span class="n">client</span><span class="o">.</span><span class="na">execute</span><span class="o">();</span>

    <span class="c1">// Parse Payment result</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">client</span><span class="o">.</span><span class="na">getResponse</span><span class="o">());</span>

  <span class="o">}</span>
<span class="o">}</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="kd">var</span> <span class="nx">genesis</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'genesis.js/lib/genesis.js'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">transaction</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">genesis</span><span class="p">.</span><span class="nx">transaction</span><span class="p">();</span>

<span class="kd">var</span> <span class="nx">failure</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">reason</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">reason</span><span class="p">);</span>
<span class="p">};</span>

<span class="kd">var</span> <span class="nx">success</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>

<span class="nx">transaction</span><span class="p">.</span><span class="nx">paypal_express</span><span class="p">(</span>
  <span class="p">{</span>
    <span class="s2">"transaction_id"</span><span class="p">:</span> <span class="s2">"43671"</span><span class="p">,</span>
    <span class="s2">"usage"</span><span class="p">:</span> <span class="s2">"40208 concert tickets"</span><span class="p">,</span>
    <span class="s2">"remote_ip"</span><span class="p">:</span> <span class="s2">"245.253.2.12"</span><span class="p">,</span>
    <span class="s2">"notification_url"</span><span class="p">:</span> <span class="s2">"https://www.example.com/notification"</span><span class="p">,</span>
    <span class="s2">"return_success_url"</span><span class="p">:</span> <span class="s2">"http://www.example.com/success"</span><span class="p">,</span>
    <span class="s2">"return_failure_url"</span><span class="p">:</span> <span class="s2">"http://www.example.com/failure"</span><span class="p">,</span>
    <span class="s2">"amount"</span><span class="p">:</span> <span class="s2">"100"</span><span class="p">,</span>
    <span class="s2">"currency"</span><span class="p">:</span> <span class="s2">"USD"</span><span class="p">,</span>
    <span class="s2">"customer_email"</span><span class="p">:</span> <span class="s2">"travis@example.com"</span><span class="p">,</span>
    <span class="s2">"billing_address"</span><span class="p">:</span> <span class="p">{</span>
      <span class="s2">"first_name"</span><span class="p">:</span> <span class="s2">"Travis"</span><span class="p">,</span>
      <span class="s2">"last_name"</span><span class="p">:</span> <span class="s2">"Pastrana"</span><span class="p">,</span>
      <span class="s2">"address1"</span><span class="p">:</span> <span class="s2">"Muster Str. 12"</span><span class="p">,</span>
      <span class="s2">"zip_code"</span><span class="p">:</span> <span class="s2">"10178"</span><span class="p">,</span>
      <span class="s2">"city"</span><span class="p">:</span> <span class="s2">"Los Angeles"</span><span class="p">,</span>
      <span class="s2">"state"</span><span class="p">:</span> <span class="s2">"CA"</span><span class="p">,</span>
      <span class="s2">"country"</span><span class="p">:</span> <span class="s2">"US"</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">).</span><span class="nx">send</span><span class="p">()</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">success</span><span class="p">)</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">failure</span><span class="p">);</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>curl https://username:password@gate.emerchantpay.net/process/TERMINAL-TOKEN <span class="se">\</span>
   -H <span class="s2">"Content-Type: text/xml"</span> <span class="se">\</span>
   -d <span class="s1">'
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;paypal_express&lt;/transaction_type&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;usage&gt;40208 concert tickets&lt;/usage&gt;
  &lt;remote_ip&gt;245.253.2.12&lt;/remote_ip&gt;
  &lt;notification_url&gt;https://www.example.com/notification&lt;/notification_url&gt;
  &lt;return_success_url&gt;http://www.example.com/success&lt;/return_success_url&gt;
  &lt;return_failure_url&gt;http://www.example.com/failure&lt;/return_failure_url&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
  &lt;customer_email&gt;travis@example.com&lt;/customer_email&gt;
  &lt;billing_address&gt;
    &lt;first_name&gt;Travis&lt;/first_name&gt;
    &lt;last_name&gt;Pastrana&lt;/last_name&gt;
    &lt;address1&gt;Muster Str. 12&lt;/address1&gt;
    &lt;zip_code&gt;10178&lt;/zip_code&gt;
    &lt;city&gt;Los Angeles&lt;/city&gt;
    &lt;state&gt;CA&lt;/state&gt;
    &lt;country&gt;US&lt;/country&gt;
  &lt;/billing_address&gt;
&lt;/payment_transaction&gt;'</span>
</code></pre>

<p><strong>Request Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>required</td>
<td>string(255)</td>
<td>The transaction type: <strong>paypal_express</strong></td>
</tr>
<tr>
<td>transaction_id</td>
<td>required</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>usage</td>
<td>optional</td>
<td>string(255)</td>
<td>Description of the transaction for later use</td>
</tr>
<tr>
<td>remote_ip</td>
<td>required*</td>
<td>IPv4 address</td>
<td>IPv4 address of customer</td>
</tr>
<tr>
<td>return_success_url</td>
<td>required</td>
<td>url</td>
<td>URL where customer is sent to after successful payment</td>
</tr>
<tr>
<td>return_failure_url</td>
<td>required</td>
<td>url</td>
<td>URL where customer is sent to after unsuccessful payment</td>
</tr>
<tr>
<td>amount</td>
<td>required</td>
<td>integer &gt; 0</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>required</td>
<td>string(3)</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>customer_email</td>
<td>required*</td>
<td>e-mail address</td>
<td>Must contain valid e-mail of customer</td>
</tr>
<tr>
<td>customer_phone</td>
<td>required*</td>
<td>string(32)</td>
<td>Must contain valid phone number of customer</td>
</tr>
<tr>
<td><strong>billing_address</strong></td>
<td>required</td>
<td></td>
<td>See <a href="#required-vs-optional-api-params">Required vs Optional API params</a> for details</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;first_name</td>
<td>required*</td>
<td>string(255)</td>
<td>Customer first name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;last_name</td>
<td>required*</td>
<td>string(255)</td>
<td>Customer last name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address1</td>
<td>required*</td>
<td>string(255)</td>
<td>Primary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address2</td>
<td>required*</td>
<td>string(255)</td>
<td>Secondary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;zip_code</td>
<td>required*</td>
<td>string</td>
<td>ZIP code</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;city</td>
<td>required*</td>
<td>string(255)</td>
<td>City</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;state</td>
<td>required*</td>
<td>string(2)</td>
<td>State code in <a href="https://en.wikipedia.org/wiki/ISO_3166-2">ISO 3166-2</a>, required for USA and Canada</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;country</td>
<td>required</td>
<td>string(2)</td>
<td>Country code in <a href="https://www.iso.org/iso-3166-country-codes.html">ISO 3166</a></td>
</tr>
</tbody></table>

<p><code>required* = conditionally required</code></p>

<blockquote>
<p>Successful Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>stdClass Object
(
    [transaction_type] =&gt; paypal_express
    [status] =&gt; pending_async
    [mode] =&gt; live
    [transaction_id] =&gt; 43671
    [unique_id] =&gt; 44177a21403427eb96664a6d7e5d5d48
    [technical_message] =&gt; Transaction successful!
    [message] =&gt; Transaction successful!
    [redirect_url] =&gt; https://gate.emerchantpay.net/redirect/to_acquirer/649e1ff35c61
    [timestamp] =&gt; DateTime Object
        (
            [date] =&gt; 2019-03-14 12:05:56.000000
            [timezone_type] =&gt; 2
            [timezone] =&gt; Z
        )
    [descriptor] =&gt; Descriptor one
    [amount] =&gt; 100
    [currency] =&gt; USD
    [sent_to_acquirer] =&gt; true
)
</code></pre>

<pre class="highlight java tab-java"><code><span class="o">&lt;</span><span class="n">payment_response</span> <span class="n">content</span><span class="o">=[</span>
    <span class="o">&lt;</span><span class="n">transaction_type</span> <span class="n">content</span><span class="o">=[</span><span class="n">paypal_express</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">status</span> <span class="n">content</span><span class="o">=[</span><span class="n">pending_async</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">mode</span> <span class="n">content</span><span class="o">=[</span><span class="n">live</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">transaction_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">43671</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">unique_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">44177</span><span class="n">a21403427eb96664a6d7e5d5d48</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">technical_message</span> <span class="n">content</span><span class="o">=[</span><span class="n">Transaction</span> <span class="n">successful</span><span class="o">!]&gt;</span>
    <span class="o">&lt;</span><span class="n">message</span> <span class="n">content</span><span class="o">=[</span><span class="n">Transaction</span> <span class="n">successful</span><span class="o">!]&gt;</span>
    <span class="o">&lt;</span><span class="n">redirect_url</span> <span class="n">content</span><span class="o">=[</span><span class="nl">https:</span><span class="c1">//gate.emerchantpay.net/redirect/to_acquirer/649e1ff35c61]&gt;</span>
    <span class="o">&lt;</span><span class="n">timestamp</span> <span class="n">content</span><span class="o">=[</span><span class="mi">2019</span><span class="o">-</span><span class="mo">03</span><span class="o">-</span><span class="mi">14</span><span class="nl">T12:</span><span class="mo">05</span><span class="o">:</span><span class="mi">56</span><span class="n">Z</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">descriptor</span> <span class="n">content</span><span class="o">=[</span><span class="n">Descriptor</span> <span class="n">one</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">amount</span> <span class="n">content</span><span class="o">=[</span><span class="mi">100</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">currency</span> <span class="n">content</span><span class="o">=[</span><span class="n">USD</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">sent_to_acquirer</span> <span class="n">content</span><span class="o">=[</span><span class="kc">true</span><span class="o">]&gt;</span>
<span class="o">]&gt;</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="p">{</span>
    <span class="nl">transaction_type</span><span class="p">:</span> <span class="s2">"paypal_express"</span><span class="p">,</span>
    <span class="nx">status</span><span class="p">:</span> <span class="s2">"pending_async"</span><span class="p">,</span>
    <span class="nx">mode</span><span class="p">:</span> <span class="s2">"live"</span><span class="p">,</span>
    <span class="nx">transaction_id</span><span class="p">:</span> <span class="s2">"43671"</span><span class="p">,</span>
    <span class="nx">unique_id</span><span class="p">:</span> <span class="s2">"44177a21403427eb96664a6d7e5d5d48"</span><span class="p">,</span>
    <span class="nx">technical_message</span><span class="p">:</span> <span class="s2">"Transaction successful!"</span><span class="p">,</span>
    <span class="nx">message</span><span class="p">:</span> <span class="s2">"Transaction successful!"</span><span class="p">,</span>
    <span class="nx">redirect_url</span><span class="p">:</span> <span class="s2">"https://gate.emerchantpay.net/redirect/to_acquirer/649e1ff35c61"</span><span class="p">,</span>
    <span class="nx">timestamp</span><span class="p">:</span> <span class="s2">"2019-03-14T12:05:56Z"</span><span class="p">,</span>
    <span class="nx">descriptor</span><span class="p">:</span> <span class="s2">"Descriptor one"</span><span class="p">,</span>
    <span class="nx">amount</span><span class="p">:</span> <span class="s2">"100"</span><span class="p">,</span>
    <span class="nx">currency</span><span class="p">:</span> <span class="s2">"USD"</span><span class="p">,</span>
    <span class="nx">sent_to_acquirer</span><span class="p">:</span> <span class="s2">"true"</span><span class="p">,</span>
<span class="p">}</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;paypal_express&lt;/transaction_type&gt;
  &lt;status&gt;pending_async&lt;/status&gt;
  &lt;mode&gt;live&lt;/mode&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;technical_message&gt;Transaction successful!&lt;/technical_message&gt;
  &lt;message&gt;Transaction successful!&lt;/message&gt;
  &lt;redirect_url&gt;https://gate.emerchantpay.net/redirect/to_acquirer/649e1ff35c61&lt;/redirect_url&gt;
  &lt;timestamp&gt;2019-03-14T12:05:56Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
  &lt;sent_to_acquirer&gt;true&lt;/sent_to_acquirer&gt;
&lt;/payment_transaction&gt;
</code></pre>

<p><strong>Successful Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>The transaction type</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>transaction_id</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>unique_id</td>
<td>string(32)</td>
<td>Unique id defined by gate (must later be used if capturing, voiding or refunding a transaction)</td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
<tr>
<td>message</td>
<td>string(255)</td>
<td>Human readable error message which can be displayed to users.</td>
</tr>
<tr>
<td>redirect_url</td>
<td>url</td>
<td>URL where user has to be redirected to complete payment process. It is available for asynchronous mode</td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when the transaction was processed in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Combined date and time</a> e.g. 2007-08- 30T17:46:11Z</td>
</tr>
<tr>
<td>descriptor</td>
<td>string</td>
<td>Static descriptor MID info as configured on the gateway</td>
</tr>
<tr>
<td>amount</td>
<td>integer</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>sent_to_acquirer</td>
<td>string</td>
<td>&quot;true&quot; or &quot;false&quot;</td>
</tr>
</tbody></table>

<blockquote>
<p>Error Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>stdClass Object
(
    [transaction_type] =&gt; paypal_express
    [status] =&gt; error
    [mode] =&gt; live
    [transaction_id] =&gt; 43671
    [unique_id] =&gt; 44177a21403427eb96664a6d7e5d5d48
    [code] =&gt; 110
    [message] =&gt; Something went wrong, please contact support!
    [timestamp] =&gt; DateTime Object
        (
            [date] =&gt; 2019-03-14 12:05:56.000000
            [timezone_type] =&gt; 2
            [timezone] =&gt; Z
        )
    [descriptor] =&gt; Descriptor one
    [amount] =&gt; 100
    [currency] =&gt; USD
    [sent_to_acquirer] =&gt; false
)
</code></pre>

<pre class="highlight java tab-java"><code><span class="o">&lt;</span><span class="n">payment_response</span> <span class="n">content</span><span class="o">=[</span>
    <span class="o">&lt;</span><span class="n">transaction_type</span> <span class="n">content</span><span class="o">=[</span><span class="n">paypal_express</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">status</span> <span class="n">content</span><span class="o">=[</span><span class="n">error</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">mode</span> <span class="n">content</span><span class="o">=[</span><span class="n">live</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">transaction_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">43671</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">unique_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">44177</span><span class="n">a21403427eb96664a6d7e5d5d48</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">code</span> <span class="n">content</span><span class="o">=[</span><span class="mi">110</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">message</span> <span class="n">content</span><span class="o">=[</span><span class="n">Something</span> <span class="n">went</span> <span class="n">wrong</span><span class="o">,</span> <span class="n">please</span> <span class="n">contact</span> <span class="n">support</span><span class="o">!]&gt;</span>
    <span class="o">&lt;</span><span class="n">timestamp</span> <span class="n">content</span><span class="o">=[</span><span class="mi">2019</span><span class="o">-</span><span class="mo">03</span><span class="o">-</span><span class="mi">14</span><span class="nl">T12:</span><span class="mo">05</span><span class="o">:</span><span class="mi">56</span><span class="n">Z</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">descriptor</span> <span class="n">content</span><span class="o">=[</span><span class="n">Descriptor</span> <span class="n">one</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">amount</span> <span class="n">content</span><span class="o">=[</span><span class="mi">100</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">currency</span> <span class="n">content</span><span class="o">=[</span><span class="n">USD</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">sent_to_acquirer</span> <span class="n">content</span><span class="o">=[</span><span class="kc">false</span><span class="o">]&gt;</span>
<span class="o">]&gt;</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="p">{</span>
    <span class="nl">transaction_type</span><span class="p">:</span> <span class="s2">"paypal_express"</span><span class="p">,</span>
    <span class="nx">status</span><span class="p">:</span> <span class="s2">"error"</span><span class="p">,</span>
    <span class="nx">mode</span><span class="p">:</span> <span class="s2">"live"</span><span class="p">,</span>
    <span class="nx">transaction_id</span><span class="p">:</span> <span class="s2">"43671"</span><span class="p">,</span>
    <span class="nx">unique_id</span><span class="p">:</span> <span class="s2">"44177a21403427eb96664a6d7e5d5d48"</span><span class="p">,</span>
    <span class="nx">code</span><span class="p">:</span> <span class="s2">"110"</span><span class="p">,</span>
    <span class="nx">message</span><span class="p">:</span> <span class="s2">"Something went wrong, please contact support!"</span><span class="p">,</span>
    <span class="nx">timestamp</span><span class="p">:</span> <span class="s2">"2019-03-14T12:05:56Z"</span><span class="p">,</span>
    <span class="nx">descriptor</span><span class="p">:</span> <span class="s2">"Descriptor one"</span><span class="p">,</span>
    <span class="nx">amount</span><span class="p">:</span> <span class="s2">"100"</span><span class="p">,</span>
    <span class="nx">currency</span><span class="p">:</span> <span class="s2">"USD"</span><span class="p">,</span>
    <span class="nx">sent_to_acquirer</span><span class="p">:</span> <span class="s2">"false"</span><span class="p">,</span>
<span class="p">}</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;paypal_express&lt;/transaction_type&gt;
  &lt;status&gt;error&lt;/status&gt;
  &lt;mode&gt;live&lt;/mode&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;code&gt;110&lt;/code&gt;
  &lt;message&gt;Something went wrong, please contact support!&lt;/message&gt;
  &lt;timestamp&gt;2019-03-14T12:05:56Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
  &lt;sent_to_acquirer&gt;false&lt;/sent_to_acquirer&gt;
&lt;/payment_transaction&gt;
</code></pre>

<p><strong>Error Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>The transaction type</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>transaction_id</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>unique_id</td>
<td>string(32)</td>
<td>Unique id defined by gate (must later be used if capturing, voiding or refunding a transaction)</td>
</tr>
<tr>
<td>code</td>
<td>integer</td>
<td>Error code according to <a href="#error-code-table">Error code table</a></td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
<tr>
<td>message</td>
<td>string(255)</td>
<td>Human readable error message which can be displayed to users.</td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when the transaction was processed in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Combined date and time</a> e.g. 2007-08- 30T17:46:11Z</td>
</tr>
<tr>
<td>descriptor</td>
<td>string</td>
<td>Static descriptor MID info as configured on the gateway</td>
</tr>
<tr>
<td>amount</td>
<td>integer</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>sent_to_acquirer</td>
<td>string</td>
<td>&quot;true&quot; or &quot;false&quot;</td>
</tr>
</tbody></table>
<h3 id='qiwi'>QIWI</h3>
<p>QIWI Wallet is a very popular Eastern European e-wallet.</p>

<blockquote>
<p>Request</p>
</blockquote>

<pre class="highlight php tab-php"><code><span class="cp">&lt;?php</span>

<span class="c1">// Load the pre-configured ini file...
</span><span class="nx">\Genesis\Config</span><span class="o">::</span><span class="na">loadSettings</span><span class="p">(</span><span class="s1">'/path/to/config.ini'</span><span class="p">);</span>

<span class="nv">$genesis</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Genesis</span><span class="p">(</span><span class="s1">'Financial\Alternatives\PPRO'</span><span class="p">);</span>
<span class="nv">$request</span> <span class="o">=</span> <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">request</span><span class="p">();</span>

<span class="nv">$request</span>
  <span class="o">-&gt;</span><span class="na">setTransactionId</span><span class="p">(</span><span class="s1">'43671'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setPaymentType</span><span class="p">(</span><span class="s1">'qiwi'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setUsage</span><span class="p">(</span><span class="s1">'40208 concert tickets'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setRemoteIp</span><span class="p">(</span><span class="s1">'245.253.2.12'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setReturnSuccessUrl</span><span class="p">(</span><span class="s1">'http://www.example.com/success'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setReturnFailureUrl</span><span class="p">(</span><span class="s1">'http://www.example.com/failure'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setAmount</span><span class="p">(</span><span class="s1">'5000'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCurrency</span><span class="p">(</span><span class="s1">'RUB'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setAccountPhone</span><span class="p">(</span><span class="s1">'71234567891'</span><span class="p">)</span>


  <span class="c1">// Billing Address
</span>  <span class="o">-&gt;</span><span class="na">setBillingFirstName</span><span class="p">(</span><span class="s1">'Barney'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingLastName</span><span class="p">(</span><span class="s1">'Rubble'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingAddress1</span><span class="p">(</span><span class="s1">'14, Nerazdelni str'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingZipCode</span><span class="p">(</span><span class="s1">'1407'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingCity</span><span class="p">(</span><span class="s1">'Moscow'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingCountry</span><span class="p">(</span><span class="s1">'RU'</span><span class="p">)</span>


  <span class="c1">// Risk Params
</span>  <span class="o">-&gt;</span><span class="na">setRiskUserId</span><span class="p">(</span><span class="s1">'123456'</span><span class="p">);</span>

<span class="k">try</span> <span class="p">{</span>
    <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">execute</span><span class="p">();</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">response</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">getResponseObject</span><span class="p">();</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">\Exception</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$e</span><span class="o">-&gt;</span><span class="na">getMessage</span><span class="p">();</span>
<span class="p">}</span>
</code></pre>

<pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.GenesisClient</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.TransactionResult</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.constants.Endpoints</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.constants.Environments</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.requests.financial.apm.PProRequest</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.model.Transaction</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Configuration</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Country</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Currency</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.math.BigDecimal</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.MalformedURLException</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.URL</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">GenesisExample</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">MalformedURLException</span> <span class="o">{</span>

    <span class="c1">// Create configuration</span>
    <span class="n">Configuration</span> <span class="n">configuration</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Configuration</span><span class="o">(</span><span class="n">Environments</span><span class="o">.</span><span class="na">STAGING</span><span class="o">,</span> <span class="n">Endpoints</span><span class="o">.</span><span class="na">EMERCHANTPAY</span><span class="o">);</span>

    <span class="n">configuration</span><span class="o">.</span><span class="na">setUsername</span><span class="o">(</span><span class="s">"SET_YOUR_USERNAME"</span><span class="o">);</span>
    <span class="n">configuration</span><span class="o">.</span><span class="na">setPassword</span><span class="o">(</span><span class="s">"SET_YOUR_PASSWORD"</span><span class="o">);</span>
    <span class="n">configuration</span><span class="o">.</span><span class="na">setToken</span><span class="o">(</span><span class="s">"SET_YOUR_TOKEN"</span><span class="o">);</span>

    <span class="n">PProRequest</span> <span class="n">request</span> <span class="o">=</span> <span class="k">new</span> <span class="n">PProRequest</span><span class="o">();</span>

    <span class="n">request</span><span class="o">.</span><span class="na">setTransactionId</span><span class="o">(</span><span class="s">"43671"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setPaymentType</span><span class="o">(</span><span class="s">"qiwi"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setUsage</span><span class="o">(</span><span class="s">"40208 concert tickets"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setRemoteIp</span><span class="o">(</span><span class="s">"245.253.2.12"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setReturnSuccessUrl</span><span class="o">(</span><span class="k">new</span> <span class="n">URL</span><span class="o">(</span><span class="s">"http://www.example.com/success"</span><span class="o">));</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setReturnFailureUrl</span><span class="o">(</span><span class="k">new</span> <span class="n">URL</span><span class="o">(</span><span class="s">"http://www.example.com/failure"</span><span class="o">));</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setAmount</span><span class="o">(</span><span class="k">new</span> <span class="n">BigDecimal</span><span class="o">(</span><span class="mi">5000</span><span class="o">));</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCurrency</span><span class="o">(</span><span class="s">"RUB"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setAccountPhone</span><span class="o">(</span><span class="s">"71234567891"</span><span class="o">);</span>


    <span class="c1">// Billing Address</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingFirstname</span><span class="o">(</span><span class="s">"Barney"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingLastname</span><span class="o">(</span><span class="s">"Rubble"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingPrimaryAddress</span><span class="o">(</span><span class="s">"14, Nerazdelni str"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingZipCode</span><span class="o">(</span><span class="s">"1407"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingCity</span><span class="o">(</span><span class="s">"Moscow"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingCountry</span><span class="o">(</span><span class="s">"RU"</span><span class="o">);</span>


    <span class="c1">// Risk Params</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setRiskUserId</span><span class="o">(</span><span class="s">"123456"</span><span class="o">);</span>

    <span class="n">GenesisClient</span> <span class="n">client</span> <span class="o">=</span> <span class="k">new</span> <span class="n">GenesisClient</span><span class="o">(</span><span class="n">configuration</span><span class="o">,</span> <span class="n">request</span><span class="o">);</span>
    <span class="n">client</span><span class="o">.</span><span class="na">execute</span><span class="o">();</span>

    <span class="c1">// Parse Payment result</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">client</span><span class="o">.</span><span class="na">getResponse</span><span class="o">());</span>

  <span class="o">}</span>
<span class="o">}</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="kd">var</span> <span class="nx">genesis</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'genesis.js/lib/genesis.js'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">transaction</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">genesis</span><span class="p">.</span><span class="nx">transaction</span><span class="p">();</span>

<span class="kd">var</span> <span class="nx">failure</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">reason</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">reason</span><span class="p">);</span>
<span class="p">};</span>

<span class="kd">var</span> <span class="nx">success</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>

<span class="nx">transaction</span><span class="p">.</span><span class="nx">ppro</span><span class="p">(</span>
  <span class="p">{</span>
    <span class="s2">"transaction_id"</span><span class="p">:</span> <span class="s2">"43671"</span><span class="p">,</span>
    <span class="s2">"payment_type"</span><span class="p">:</span> <span class="s2">"qiwi"</span><span class="p">,</span>
    <span class="s2">"usage"</span><span class="p">:</span> <span class="s2">"40208 concert tickets"</span><span class="p">,</span>
    <span class="s2">"remote_ip"</span><span class="p">:</span> <span class="s2">"245.253.2.12"</span><span class="p">,</span>
    <span class="s2">"return_success_url"</span><span class="p">:</span> <span class="s2">"http://www.example.com/success"</span><span class="p">,</span>
    <span class="s2">"return_failure_url"</span><span class="p">:</span> <span class="s2">"http://www.example.com/failure"</span><span class="p">,</span>
    <span class="s2">"amount"</span><span class="p">:</span> <span class="s2">"5000"</span><span class="p">,</span>
    <span class="s2">"currency"</span><span class="p">:</span> <span class="s2">"RUB"</span><span class="p">,</span>
    <span class="s2">"account_phone"</span><span class="p">:</span> <span class="s2">"71234567891"</span><span class="p">,</span>
    <span class="s2">"billing_address"</span><span class="p">:</span> <span class="p">{</span>
      <span class="s2">"first_name"</span><span class="p">:</span> <span class="s2">"Barney"</span><span class="p">,</span>
      <span class="s2">"last_name"</span><span class="p">:</span> <span class="s2">"Rubble"</span><span class="p">,</span>
      <span class="s2">"address1"</span><span class="p">:</span> <span class="s2">"14, Nerazdelni str"</span><span class="p">,</span>
      <span class="s2">"zip_code"</span><span class="p">:</span> <span class="s2">"1407"</span><span class="p">,</span>
      <span class="s2">"city"</span><span class="p">:</span> <span class="s2">"Moscow"</span><span class="p">,</span>
      <span class="s2">"country"</span><span class="p">:</span> <span class="s2">"RU"</span>
    <span class="p">},</span>
    <span class="s2">"risk_params"</span><span class="p">:</span> <span class="p">{</span>
      <span class="s2">"user_id"</span><span class="p">:</span> <span class="s2">"123456"</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">).</span><span class="nx">send</span><span class="p">()</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">success</span><span class="p">)</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">failure</span><span class="p">);</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>curl https://username:password@gate.emerchantpay.net/process/TERMINAL-TOKEN <span class="se">\</span>
   -H <span class="s2">"Content-Type: text/xml"</span> <span class="se">\</span>
   -d <span class="s1">'
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;ppro&lt;/transaction_type&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;payment_type&gt;qiwi&lt;/payment_type&gt;
  &lt;usage&gt;40208 concert tickets&lt;/usage&gt;
  &lt;remote_ip&gt;245.253.2.12&lt;/remote_ip&gt;
  &lt;return_success_url&gt;http://www.example.com/success&lt;/return_success_url&gt;
  &lt;return_failure_url&gt;http://www.example.com/failure&lt;/return_failure_url&gt;
  &lt;amount&gt;5000&lt;/amount&gt;
  &lt;currency&gt;RUB&lt;/currency&gt;
  &lt;account_phone&gt;71234567891&lt;/account_phone&gt;
  &lt;billing_address&gt;
    &lt;first_name&gt;Barney&lt;/first_name&gt;
    &lt;last_name&gt;Rubble&lt;/last_name&gt;
    &lt;address1&gt;14, Nerazdelni str&lt;/address1&gt;
    &lt;zip_code&gt;1407&lt;/zip_code&gt;
    &lt;city&gt;Moscow&lt;/city&gt;
    &lt;country&gt;RU&lt;/country&gt;
  &lt;/billing_address&gt;
  &lt;risk_params&gt;
    &lt;user_id&gt;123456&lt;/user_id&gt;
  &lt;/risk_params&gt;
&lt;/payment_transaction&gt;'</span>
</code></pre>

<p><strong>Request Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>required</td>
<td>string(255)</td>
<td><strong>ppro</strong> or <strong>qiwi</strong>. Contact tech support at <a href="mailto:tech-support@emerchantpay.net">tech-support@emerchantpay.net</a> for more details.</td>
</tr>
<tr>
<td>transaction_id</td>
<td>required</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>payment_type</td>
<td>required<sup>1</sup></td>
<td>qiwi</td>
<td>QIWI. Contact tech support at <a href="mailto:tech-support@emerchantpay.net">tech-support@emerchantpay.net</a> for more details.</td>
</tr>
<tr>
<td>usage</td>
<td>optional</td>
<td>string(255)</td>
<td>Description of the transaction for later use</td>
</tr>
<tr>
<td>remote_ip</td>
<td>required*</td>
<td>IPv4 address</td>
<td>IPv4 address of customer</td>
</tr>
<tr>
<td>return_success_url</td>
<td>required</td>
<td>url</td>
<td>URL where customer is sent to after successful payment</td>
</tr>
<tr>
<td>return_failure_url</td>
<td>required</td>
<td>url</td>
<td>URL where customer is sent to after unsuccessful payment</td>
</tr>
<tr>
<td>amount</td>
<td>required</td>
<td>integer &gt; 0</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>required</td>
<td>string(3)</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>account_phone</td>
<td>required</td>
<td>string(11)</td>
<td>Must be a 10 digits Russian valid mobile number(either with or without international prefix +7), or International mobile phone number, starting with + followed by at least 9 digits.</td>
</tr>
<tr>
<td><strong>billing_address</strong></td>
<td>required</td>
<td></td>
<td>See <a href="#required-vs-optional-api-params">Required vs Optional API params</a> for details</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;first_name</td>
<td>required*</td>
<td>string(255)</td>
<td>Customer first name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;last_name</td>
<td>required*</td>
<td>string(255)</td>
<td>Customer last name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address1</td>
<td>required*</td>
<td>string(255)</td>
<td>Primary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address2</td>
<td>required*</td>
<td>string(255)</td>
<td>Secondary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;zip_code</td>
<td>required*</td>
<td>string</td>
<td>ZIP code</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;city</td>
<td>required*</td>
<td>string(255)</td>
<td>City</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;state</td>
<td>required*</td>
<td>string(2)</td>
<td>State code in <a href="https://en.wikipedia.org/wiki/ISO_3166-2">ISO 3166-2</a>, required for USA and Canada</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;country</td>
<td>required</td>
<td>string(2)</td>
<td>Country code in <a href="https://www.iso.org/iso-3166-country-codes.html">ISO 3166</a></td>
</tr>
<tr>
<td><strong>shipping_address</strong></td>
<td>optional</td>
<td></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;first_name</td>
<td>optional</td>
<td>string(255)</td>
<td>Customer first name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;last_name</td>
<td>optional</td>
<td>string(255)</td>
<td>Customer last name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address1</td>
<td>optional</td>
<td>string(255)</td>
<td>Primary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address2</td>
<td>optional</td>
<td>string(255)</td>
<td>Secondary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;zip_code</td>
<td>optional</td>
<td>string</td>
<td>ZIP code</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;city</td>
<td>optional</td>
<td>string(255)</td>
<td>City</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;state</td>
<td>optional</td>
<td>string(2)</td>
<td>State code in <a href="https://en.wikipedia.org/wiki/ISO_3166-2">ISO 3166-2</a>, required for USA and Canada</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;country</td>
<td>optional</td>
<td>string(2)</td>
<td>Country code in <a href="https://www.iso.org/iso-3166-country-codes.html">ISO 3166</a></td>
</tr>
</tbody></table>

<p><code>required* = conditionally required</code></p>

<p><code>1 - payment_type must be submitted only when the transaction type is set to ppro</code></p>

<p><strong>Supported countries and countries</strong></p>

<table><thead>
<tr>
<th>Country code</th>
<th>Currency code</th>
</tr>
</thead><tbody>
<tr>
<td>RU</td>
<td>EUR, RUB</td>
</tr>
<tr>
<td>KZ</td>
<td>EUR, KZT</td>
</tr>
<tr>
<td>UA</td>
<td>USD</td>
</tr>
</tbody></table>

<blockquote>
<p>Successful Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>stdClass Object
(
    [transaction_type] =&gt; ppro
    [status] =&gt; approved
    [mode] =&gt; live
    [transaction_id] =&gt; 43671
    [unique_id] =&gt; 44177a21403427eb96664a6d7e5d5d48
    [technical_message] =&gt; Transaction successful!
    [message] =&gt; Transaction successful!
    [timestamp] =&gt; DateTime Object
        (
            [date] =&gt; 2019-03-14 12:05:56.000000
            [timezone_type] =&gt; 2
            [timezone] =&gt; Z
        )
    [descriptor] =&gt; Descriptor one
    [amount] =&gt; 5000
    [currency] =&gt; RUB
    [sent_to_acquirer] =&gt; true
)
</code></pre>

<pre class="highlight java tab-java"><code><span class="o">&lt;</span><span class="n">payment_response</span> <span class="n">content</span><span class="o">=[</span>
    <span class="o">&lt;</span><span class="n">transaction_type</span> <span class="n">content</span><span class="o">=[</span><span class="n">ppro</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">status</span> <span class="n">content</span><span class="o">=[</span><span class="n">approved</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">mode</span> <span class="n">content</span><span class="o">=[</span><span class="n">live</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">transaction_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">43671</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">unique_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">44177</span><span class="n">a21403427eb96664a6d7e5d5d48</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">technical_message</span> <span class="n">content</span><span class="o">=[</span><span class="n">Transaction</span> <span class="n">successful</span><span class="o">!]&gt;</span>
    <span class="o">&lt;</span><span class="n">message</span> <span class="n">content</span><span class="o">=[</span><span class="n">Transaction</span> <span class="n">successful</span><span class="o">!]&gt;</span>
    <span class="o">&lt;</span><span class="n">timestamp</span> <span class="n">content</span><span class="o">=[</span><span class="mi">2019</span><span class="o">-</span><span class="mo">03</span><span class="o">-</span><span class="mi">14</span><span class="nl">T12:</span><span class="mo">05</span><span class="o">:</span><span class="mi">56</span><span class="n">Z</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">descriptor</span> <span class="n">content</span><span class="o">=[</span><span class="n">Descriptor</span> <span class="n">one</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">amount</span> <span class="n">content</span><span class="o">=[</span><span class="mi">5000</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">currency</span> <span class="n">content</span><span class="o">=[</span><span class="n">RUB</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">sent_to_acquirer</span> <span class="n">content</span><span class="o">=[</span><span class="kc">true</span><span class="o">]&gt;</span>
<span class="o">]&gt;</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="p">{</span>
    <span class="nl">transaction_type</span><span class="p">:</span> <span class="s2">"ppro"</span><span class="p">,</span>
    <span class="nx">status</span><span class="p">:</span> <span class="s2">"approved"</span><span class="p">,</span>
    <span class="nx">mode</span><span class="p">:</span> <span class="s2">"live"</span><span class="p">,</span>
    <span class="nx">transaction_id</span><span class="p">:</span> <span class="s2">"43671"</span><span class="p">,</span>
    <span class="nx">unique_id</span><span class="p">:</span> <span class="s2">"44177a21403427eb96664a6d7e5d5d48"</span><span class="p">,</span>
    <span class="nx">technical_message</span><span class="p">:</span> <span class="s2">"Transaction successful!"</span><span class="p">,</span>
    <span class="nx">message</span><span class="p">:</span> <span class="s2">"Transaction successful!"</span><span class="p">,</span>
    <span class="nx">timestamp</span><span class="p">:</span> <span class="s2">"2019-03-14T12:05:56Z"</span><span class="p">,</span>
    <span class="nx">descriptor</span><span class="p">:</span> <span class="s2">"Descriptor one"</span><span class="p">,</span>
    <span class="nx">amount</span><span class="p">:</span> <span class="s2">"5000"</span><span class="p">,</span>
    <span class="nx">currency</span><span class="p">:</span> <span class="s2">"RUB"</span><span class="p">,</span>
    <span class="nx">sent_to_acquirer</span><span class="p">:</span> <span class="s2">"true"</span><span class="p">,</span>
<span class="p">}</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;ppro&lt;/transaction_type&gt;
  &lt;status&gt;approved&lt;/status&gt;
  &lt;mode&gt;live&lt;/mode&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;technical_message&gt;Transaction successful!&lt;/technical_message&gt;
  &lt;message&gt;Transaction successful!&lt;/message&gt;
  &lt;timestamp&gt;2019-03-14T12:05:56Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;amount&gt;5000&lt;/amount&gt;
  &lt;currency&gt;RUB&lt;/currency&gt;
  &lt;sent_to_acquirer&gt;true&lt;/sent_to_acquirer&gt;
&lt;/payment_transaction&gt;
</code></pre>

<p><strong>Successful Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>The transaction type</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>transaction_id</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>unique_id</td>
<td>string(32)</td>
<td>Unique id defined by gate (must later be used if capturing, voiding or refunding a transaction)</td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
<tr>
<td>message</td>
<td>string(255)</td>
<td>Human readable error message which can be displayed to users.</td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when the transaction was processed in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Combined date and time</a> e.g. 2007-08- 30T17:46:11Z</td>
</tr>
<tr>
<td>descriptor</td>
<td>string</td>
<td>Static descriptor MID info as configured on the gateway</td>
</tr>
<tr>
<td>amount</td>
<td>integer</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>sent_to_acquirer</td>
<td>string</td>
<td>&quot;true&quot; or &quot;false&quot;</td>
</tr>
</tbody></table>

<blockquote>
<p>Error Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>stdClass Object
(
    [transaction_type] =&gt; ppro
    [status] =&gt; error
    [mode] =&gt; live
    [transaction_id] =&gt; 43671
    [unique_id] =&gt; 44177a21403427eb96664a6d7e5d5d48
    [code] =&gt; 110
    [message] =&gt; Something went wrong, please contact support!
    [timestamp] =&gt; DateTime Object
        (
            [date] =&gt; 2019-03-14 12:05:56.000000
            [timezone_type] =&gt; 2
            [timezone] =&gt; Z
        )
    [descriptor] =&gt; Descriptor one
    [amount] =&gt; 5000
    [currency] =&gt; RUB
    [sent_to_acquirer] =&gt; true
)
</code></pre>

<pre class="highlight java tab-java"><code><span class="o">&lt;</span><span class="n">payment_response</span> <span class="n">content</span><span class="o">=[</span>
    <span class="o">&lt;</span><span class="n">transaction_type</span> <span class="n">content</span><span class="o">=[</span><span class="n">ppro</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">status</span> <span class="n">content</span><span class="o">=[</span><span class="n">error</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">mode</span> <span class="n">content</span><span class="o">=[</span><span class="n">live</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">transaction_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">43671</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">unique_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">44177</span><span class="n">a21403427eb96664a6d7e5d5d48</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">code</span> <span class="n">content</span><span class="o">=[</span><span class="mi">110</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">message</span> <span class="n">content</span><span class="o">=[</span><span class="n">Something</span> <span class="n">went</span> <span class="n">wrong</span><span class="o">,</span> <span class="n">please</span> <span class="n">contact</span> <span class="n">support</span><span class="o">!]&gt;</span>
    <span class="o">&lt;</span><span class="n">timestamp</span> <span class="n">content</span><span class="o">=[</span><span class="mi">2019</span><span class="o">-</span><span class="mo">03</span><span class="o">-</span><span class="mi">14</span><span class="nl">T12:</span><span class="mo">05</span><span class="o">:</span><span class="mi">56</span><span class="n">Z</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">descriptor</span> <span class="n">content</span><span class="o">=[</span><span class="n">Descriptor</span> <span class="n">one</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">amount</span> <span class="n">content</span><span class="o">=[</span><span class="mi">5000</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">currency</span> <span class="n">content</span><span class="o">=[</span><span class="n">RUB</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">sent_to_acquirer</span> <span class="n">content</span><span class="o">=[</span><span class="kc">true</span><span class="o">]&gt;</span>
<span class="o">]&gt;</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="p">{</span>
    <span class="nl">transaction_type</span><span class="p">:</span> <span class="s2">"ppro"</span><span class="p">,</span>
    <span class="nx">status</span><span class="p">:</span> <span class="s2">"error"</span><span class="p">,</span>
    <span class="nx">mode</span><span class="p">:</span> <span class="s2">"live"</span><span class="p">,</span>
    <span class="nx">transaction_id</span><span class="p">:</span> <span class="s2">"43671"</span><span class="p">,</span>
    <span class="nx">unique_id</span><span class="p">:</span> <span class="s2">"44177a21403427eb96664a6d7e5d5d48"</span><span class="p">,</span>
    <span class="nx">code</span><span class="p">:</span> <span class="s2">"110"</span><span class="p">,</span>
    <span class="nx">message</span><span class="p">:</span> <span class="s2">"Something went wrong, please contact support!"</span><span class="p">,</span>
    <span class="nx">timestamp</span><span class="p">:</span> <span class="s2">"2019-03-14T12:05:56Z"</span><span class="p">,</span>
    <span class="nx">descriptor</span><span class="p">:</span> <span class="s2">"Descriptor one"</span><span class="p">,</span>
    <span class="nx">amount</span><span class="p">:</span> <span class="s2">"5000"</span><span class="p">,</span>
    <span class="nx">currency</span><span class="p">:</span> <span class="s2">"RUB"</span><span class="p">,</span>
    <span class="nx">sent_to_acquirer</span><span class="p">:</span> <span class="s2">"true"</span><span class="p">,</span>
<span class="p">}</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;ppro&lt;/transaction_type&gt;
  &lt;status&gt;error&lt;/status&gt;
  &lt;mode&gt;live&lt;/mode&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;code&gt;110&lt;/code&gt;
  &lt;message&gt;Something went wrong, please contact support!&lt;/message&gt;
  &lt;timestamp&gt;2019-03-14T12:05:56Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;amount&gt;5000&lt;/amount&gt;
  &lt;currency&gt;RUB&lt;/currency&gt;
  &lt;sent_to_acquirer&gt;true&lt;/sent_to_acquirer&gt;
&lt;/payment_transaction&gt;
</code></pre>

<p><strong>Error Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>The transaction type</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>transaction_id</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>unique_id</td>
<td>string(32)</td>
<td>Unique id defined by gate (must later be used if capturing, voiding or refunding a transaction)</td>
</tr>
<tr>
<td>code</td>
<td>integer</td>
<td>Error code according to <a href="#error-code-table">Error code table</a></td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
<tr>
<td>message</td>
<td>string(255)</td>
<td>Human readable error message which can be displayed to users.</td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when the transaction was processed in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Combined date and time</a> e.g. 2007-08- 30T17:46:11Z</td>
</tr>
<tr>
<td>descriptor</td>
<td>string</td>
<td>Static descriptor MID info as configured on the gateway</td>
</tr>
<tr>
<td>amount</td>
<td>integer</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>sent_to_acquirer</td>
<td>string</td>
<td>&quot;true&quot; or &quot;false&quot;</td>
</tr>
</tbody></table>
<h3 id='webmoney'>WebMoney</h3>
<aside class="notice" >
    WebMoney is a global settlement system and environment for online business activities. Over 28 million people from all over the world have joined the system. Although WebMoney targeted mainly at clients in Russia and the Former Soviet Union, it is now used worldwide.
</aside>

<aside class="notice" >
  WebMoney transactions can be either asynchronous or synchronous, based on 'is_payout' flag. After a successful validation of transaction parameters transaction status is set to pending_async the user is redirected to WebMoney authentication page where he enters additional information to finish the payment. When the payment reached a final state Genesis gateway sends notification to merchant on the configured url into its account. When the payment is checked as payout then the transaction is synchronous and transaction status is set immediately after the response.
</aside>

<blockquote>
<p>Auth  Request</p>
</blockquote>

<pre class="highlight php tab-php"><code><span class="cp">&lt;?php</span>

<span class="c1">// Load the pre-configured ini file...
</span><span class="nx">\Genesis\Config</span><span class="o">::</span><span class="na">loadSettings</span><span class="p">(</span><span class="s1">'/path/to/config.ini'</span><span class="p">);</span>

<span class="nv">$genesis</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Genesis</span><span class="p">(</span><span class="s1">'Financial\Wallets\WebMoney'</span><span class="p">);</span>
<span class="nv">$request</span> <span class="o">=</span> <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">request</span><span class="p">();</span>

<span class="nv">$request</span>
  <span class="o">-&gt;</span><span class="na">setTransactionId</span><span class="p">(</span><span class="s1">'43671'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setUsage</span><span class="p">(</span><span class="s1">'40208 concert tickets'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setRemoteIp</span><span class="p">(</span><span class="s1">'245.253.2.12'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setAmount</span><span class="p">(</span><span class="s1">'100'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCurrency</span><span class="p">(</span><span class="s1">'USD'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setReturnSuccessUrl</span><span class="p">(</span><span class="s1">'http://www.example.com/success'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setReturnFailureUrl</span><span class="p">(</span><span class="s1">'http://www.example.com/failure'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCustomerPhone</span><span class="p">(</span><span class="s1">'+1987987987987'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCustomerEmail</span><span class="p">(</span><span class="s1">'travis@example.com'</span><span class="p">)</span>


  <span class="c1">// Billing Address
</span>  <span class="o">-&gt;</span><span class="na">setBillingFirstName</span><span class="p">(</span><span class="s1">'Travis'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingLastName</span><span class="p">(</span><span class="s1">'Pastrana'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingAddress1</span><span class="p">(</span><span class="s1">'Muster Str. 12'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingZipCode</span><span class="p">(</span><span class="s1">'10178'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingCity</span><span class="p">(</span><span class="s1">'Los Angeles'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingState</span><span class="p">(</span><span class="s1">'CA'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingCountry</span><span class="p">(</span><span class="s1">'US'</span><span class="p">);</span>

<span class="k">try</span> <span class="p">{</span>
    <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">execute</span><span class="p">();</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">response</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">getResponseObject</span><span class="p">();</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">\Exception</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$e</span><span class="o">-&gt;</span><span class="na">getMessage</span><span class="p">();</span>
<span class="p">}</span>
</code></pre>

<pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.GenesisClient</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.TransactionResult</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.constants.Endpoints</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.constants.Environments</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.requests.financial.wallets.WebMoneyRequest</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.model.Transaction</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Configuration</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Country</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Currency</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.math.BigDecimal</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.MalformedURLException</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.URL</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">GenesisExample</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">MalformedURLException</span> <span class="o">{</span>

    <span class="c1">// Create configuration</span>
    <span class="n">Configuration</span> <span class="n">configuration</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Configuration</span><span class="o">(</span><span class="n">Environments</span><span class="o">.</span><span class="na">STAGING</span><span class="o">,</span> <span class="n">Endpoints</span><span class="o">.</span><span class="na">EMERCHANTPAY</span><span class="o">);</span>

    <span class="n">configuration</span><span class="o">.</span><span class="na">setUsername</span><span class="o">(</span><span class="s">"SET_YOUR_USERNAME"</span><span class="o">);</span>
    <span class="n">configuration</span><span class="o">.</span><span class="na">setPassword</span><span class="o">(</span><span class="s">"SET_YOUR_PASSWORD"</span><span class="o">);</span>
    <span class="n">configuration</span><span class="o">.</span><span class="na">setToken</span><span class="o">(</span><span class="s">"SET_YOUR_TOKEN"</span><span class="o">);</span>

    <span class="n">WebMoneyRequest</span> <span class="n">request</span> <span class="o">=</span> <span class="k">new</span> <span class="n">WebMoneyRequest</span><span class="o">();</span>

    <span class="n">request</span><span class="o">.</span><span class="na">setTransactionId</span><span class="o">(</span><span class="s">"43671"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setUsage</span><span class="o">(</span><span class="s">"40208 concert tickets"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setRemoteIp</span><span class="o">(</span><span class="s">"245.253.2.12"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setAmount</span><span class="o">(</span><span class="k">new</span> <span class="n">BigDecimal</span><span class="o">(</span><span class="mi">100</span><span class="o">));</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCurrency</span><span class="o">(</span><span class="s">"USD"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setReturnSuccessUrl</span><span class="o">(</span><span class="k">new</span> <span class="n">URL</span><span class="o">(</span><span class="s">"http://www.example.com/success"</span><span class="o">));</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setReturnFailureUrl</span><span class="o">(</span><span class="k">new</span> <span class="n">URL</span><span class="o">(</span><span class="s">"http://www.example.com/failure"</span><span class="o">));</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCustomerPhone</span><span class="o">(</span><span class="s">"+1987987987987"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCustomerEmail</span><span class="o">(</span><span class="s">"travis@example.com"</span><span class="o">);</span>


    <span class="c1">// Billing Address</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingFirstname</span><span class="o">(</span><span class="s">"Travis"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingLastname</span><span class="o">(</span><span class="s">"Pastrana"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingPrimaryAddress</span><span class="o">(</span><span class="s">"Muster Str. 12"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingZipCode</span><span class="o">(</span><span class="s">"10178"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingCity</span><span class="o">(</span><span class="s">"Los Angeles"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingState</span><span class="o">(</span><span class="s">"CA"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingCountry</span><span class="o">(</span><span class="s">"US"</span><span class="o">);</span>

    <span class="n">GenesisClient</span> <span class="n">client</span> <span class="o">=</span> <span class="k">new</span> <span class="n">GenesisClient</span><span class="o">(</span><span class="n">configuration</span><span class="o">,</span> <span class="n">request</span><span class="o">);</span>
    <span class="n">client</span><span class="o">.</span><span class="na">execute</span><span class="o">();</span>

    <span class="c1">// Parse Payment result</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">client</span><span class="o">.</span><span class="na">getResponse</span><span class="o">());</span>

  <span class="o">}</span>
<span class="o">}</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="kd">var</span> <span class="nx">genesis</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'genesis.js/lib/genesis.js'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">transaction</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">genesis</span><span class="p">.</span><span class="nx">transaction</span><span class="p">();</span>

<span class="kd">var</span> <span class="nx">failure</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">reason</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">reason</span><span class="p">);</span>
<span class="p">};</span>

<span class="kd">var</span> <span class="nx">success</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>

<span class="nx">transaction</span><span class="p">.</span><span class="nx">webmoney</span><span class="p">(</span>
  <span class="p">{</span>
    <span class="s2">"transaction_id"</span><span class="p">:</span> <span class="s2">"43671"</span><span class="p">,</span>
    <span class="s2">"usage"</span><span class="p">:</span> <span class="s2">"40208 concert tickets"</span><span class="p">,</span>
    <span class="s2">"remote_ip"</span><span class="p">:</span> <span class="s2">"245.253.2.12"</span><span class="p">,</span>
    <span class="s2">"amount"</span><span class="p">:</span> <span class="s2">"100"</span><span class="p">,</span>
    <span class="s2">"currency"</span><span class="p">:</span> <span class="s2">"USD"</span><span class="p">,</span>
    <span class="s2">"return_success_url"</span><span class="p">:</span> <span class="s2">"http://www.example.com/success"</span><span class="p">,</span>
    <span class="s2">"return_failure_url"</span><span class="p">:</span> <span class="s2">"http://www.example.com/failure"</span><span class="p">,</span>
    <span class="s2">"customer_phone"</span><span class="p">:</span> <span class="s2">"+1987987987987"</span><span class="p">,</span>
    <span class="s2">"customer_email"</span><span class="p">:</span> <span class="s2">"travis@example.com"</span><span class="p">,</span>
    <span class="s2">"billing_address"</span><span class="p">:</span> <span class="p">{</span>
      <span class="s2">"first_name"</span><span class="p">:</span> <span class="s2">"Travis"</span><span class="p">,</span>
      <span class="s2">"last_name"</span><span class="p">:</span> <span class="s2">"Pastrana"</span><span class="p">,</span>
      <span class="s2">"address1"</span><span class="p">:</span> <span class="s2">"Muster Str. 12"</span><span class="p">,</span>
      <span class="s2">"zip_code"</span><span class="p">:</span> <span class="s2">"10178"</span><span class="p">,</span>
      <span class="s2">"city"</span><span class="p">:</span> <span class="s2">"Los Angeles"</span><span class="p">,</span>
      <span class="s2">"state"</span><span class="p">:</span> <span class="s2">"CA"</span><span class="p">,</span>
      <span class="s2">"country"</span><span class="p">:</span> <span class="s2">"US"</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">).</span><span class="nx">send</span><span class="p">()</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">success</span><span class="p">)</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">failure</span><span class="p">);</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>curl https://username:password@gate.emerchantpay.net/process/TERMINAL-TOKEN <span class="se">\</span>
   -H <span class="s2">"Content-Type: text/xml"</span> <span class="se">\</span>
   -d <span class="s1">'
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;webmoney&lt;/transaction_type&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;usage&gt;40208 concert tickets&lt;/usage&gt;
  &lt;remote_ip&gt;245.253.2.12&lt;/remote_ip&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
  &lt;return_success_url&gt;http://www.example.com/success&lt;/return_success_url&gt;
  &lt;return_failure_url&gt;http://www.example.com/failure&lt;/return_failure_url&gt;
  &lt;customer_phone&gt;+1987987987987&lt;/customer_phone&gt;
  &lt;customer_email&gt;travis@example.com&lt;/customer_email&gt;
  &lt;billing_address&gt;
    &lt;first_name&gt;Travis&lt;/first_name&gt;
    &lt;last_name&gt;Pastrana&lt;/last_name&gt;
    &lt;address1&gt;Muster Str. 12&lt;/address1&gt;
    &lt;zip_code&gt;10178&lt;/zip_code&gt;
    &lt;city&gt;Los Angeles&lt;/city&gt;
    &lt;state&gt;CA&lt;/state&gt;
    &lt;country&gt;US&lt;/country&gt;
  &lt;/billing_address&gt;
&lt;/payment_transaction&gt;'</span>
</code></pre>

<blockquote>
<p>Payout  Request</p>
</blockquote>

<pre class="highlight php tab-php"><code><span class="cp">&lt;?php</span>

<span class="c1">// Load the pre-configured ini file...
</span><span class="nx">\Genesis\Config</span><span class="o">::</span><span class="na">loadSettings</span><span class="p">(</span><span class="s1">'/path/to/config.ini'</span><span class="p">);</span>

<span class="nv">$genesis</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Genesis</span><span class="p">(</span><span class="s1">'Financial\Wallets\WebMoney'</span><span class="p">);</span>
<span class="nv">$request</span> <span class="o">=</span> <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">request</span><span class="p">();</span>

<span class="nv">$request</span>
  <span class="o">-&gt;</span><span class="na">setTransactionId</span><span class="p">(</span><span class="s1">'43671'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setUsage</span><span class="p">(</span><span class="s1">'40208 concert tickets'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setRemoteIp</span><span class="p">(</span><span class="s1">'245.253.2.12'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setAmount</span><span class="p">(</span><span class="s1">'100'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCurrency</span><span class="p">(</span><span class="s1">'USD'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setIsPayout</span><span class="p">(</span><span class="s1">'true'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setReturnSuccessUrl</span><span class="p">(</span><span class="s1">'http://www.example.com/success'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setReturnFailureUrl</span><span class="p">(</span><span class="s1">'http://www.example.com/failure'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCustomerPhone</span><span class="p">(</span><span class="s1">'+1987987987987'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCustomerEmail</span><span class="p">(</span><span class="s1">'travis@example.com'</span><span class="p">)</span>


  <span class="c1">// Billing Address
</span>  <span class="o">-&gt;</span><span class="na">setBillingFirstName</span><span class="p">(</span><span class="s1">'Travis'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingLastName</span><span class="p">(</span><span class="s1">'Pastrana'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingAddress1</span><span class="p">(</span><span class="s1">'Muster Str. 12'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingZipCode</span><span class="p">(</span><span class="s1">'10178'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingCity</span><span class="p">(</span><span class="s1">'Los Angeles'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingState</span><span class="p">(</span><span class="s1">'CA'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingCountry</span><span class="p">(</span><span class="s1">'US'</span><span class="p">);</span>

<span class="k">try</span> <span class="p">{</span>
    <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">execute</span><span class="p">();</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">response</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">getResponseObject</span><span class="p">();</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">\Exception</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$e</span><span class="o">-&gt;</span><span class="na">getMessage</span><span class="p">();</span>
<span class="p">}</span>
</code></pre>

<pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.GenesisClient</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.TransactionResult</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.constants.Endpoints</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.constants.Environments</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.requests.financial.wallets.WebMoneyRequest</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.model.Transaction</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Configuration</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Country</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Currency</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.math.BigDecimal</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.MalformedURLException</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.URL</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">GenesisExample</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">MalformedURLException</span> <span class="o">{</span>

    <span class="c1">// Create configuration</span>
    <span class="n">Configuration</span> <span class="n">configuration</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Configuration</span><span class="o">(</span><span class="n">Environments</span><span class="o">.</span><span class="na">STAGING</span><span class="o">,</span> <span class="n">Endpoints</span><span class="o">.</span><span class="na">EMERCHANTPAY</span><span class="o">);</span>

    <span class="n">configuration</span><span class="o">.</span><span class="na">setUsername</span><span class="o">(</span><span class="s">"SET_YOUR_USERNAME"</span><span class="o">);</span>
    <span class="n">configuration</span><span class="o">.</span><span class="na">setPassword</span><span class="o">(</span><span class="s">"SET_YOUR_PASSWORD"</span><span class="o">);</span>
    <span class="n">configuration</span><span class="o">.</span><span class="na">setToken</span><span class="o">(</span><span class="s">"SET_YOUR_TOKEN"</span><span class="o">);</span>

    <span class="n">WebMoneyRequest</span> <span class="n">request</span> <span class="o">=</span> <span class="k">new</span> <span class="n">WebMoneyRequest</span><span class="o">();</span>

    <span class="n">request</span><span class="o">.</span><span class="na">setTransactionId</span><span class="o">(</span><span class="s">"43671"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setUsage</span><span class="o">(</span><span class="s">"40208 concert tickets"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setRemoteIp</span><span class="o">(</span><span class="s">"245.253.2.12"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setAmount</span><span class="o">(</span><span class="k">new</span> <span class="n">BigDecimal</span><span class="o">(</span><span class="mi">100</span><span class="o">));</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCurrency</span><span class="o">(</span><span class="s">"USD"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setIsPayout</span><span class="o">(</span><span class="s">"true"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setReturnSuccessUrl</span><span class="o">(</span><span class="k">new</span> <span class="n">URL</span><span class="o">(</span><span class="s">"http://www.example.com/success"</span><span class="o">));</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setReturnFailureUrl</span><span class="o">(</span><span class="k">new</span> <span class="n">URL</span><span class="o">(</span><span class="s">"http://www.example.com/failure"</span><span class="o">));</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCustomerPhone</span><span class="o">(</span><span class="s">"+1987987987987"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCustomerEmail</span><span class="o">(</span><span class="s">"travis@example.com"</span><span class="o">);</span>


    <span class="c1">// Billing Address</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingFirstname</span><span class="o">(</span><span class="s">"Travis"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingLastname</span><span class="o">(</span><span class="s">"Pastrana"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingPrimaryAddress</span><span class="o">(</span><span class="s">"Muster Str. 12"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingZipCode</span><span class="o">(</span><span class="s">"10178"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingCity</span><span class="o">(</span><span class="s">"Los Angeles"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingState</span><span class="o">(</span><span class="s">"CA"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingCountry</span><span class="o">(</span><span class="s">"US"</span><span class="o">);</span>

    <span class="n">GenesisClient</span> <span class="n">client</span> <span class="o">=</span> <span class="k">new</span> <span class="n">GenesisClient</span><span class="o">(</span><span class="n">configuration</span><span class="o">,</span> <span class="n">request</span><span class="o">);</span>
    <span class="n">client</span><span class="o">.</span><span class="na">execute</span><span class="o">();</span>

    <span class="c1">// Parse Payment result</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">client</span><span class="o">.</span><span class="na">getResponse</span><span class="o">());</span>

  <span class="o">}</span>
<span class="o">}</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="kd">var</span> <span class="nx">genesis</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'genesis.js/lib/genesis.js'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">transaction</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">genesis</span><span class="p">.</span><span class="nx">transaction</span><span class="p">();</span>

<span class="kd">var</span> <span class="nx">failure</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">reason</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">reason</span><span class="p">);</span>
<span class="p">};</span>

<span class="kd">var</span> <span class="nx">success</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>

<span class="nx">transaction</span><span class="p">.</span><span class="nx">webmoney</span><span class="p">(</span>
  <span class="p">{</span>
    <span class="s2">"transaction_id"</span><span class="p">:</span> <span class="s2">"43671"</span><span class="p">,</span>
    <span class="s2">"usage"</span><span class="p">:</span> <span class="s2">"40208 concert tickets"</span><span class="p">,</span>
    <span class="s2">"remote_ip"</span><span class="p">:</span> <span class="s2">"245.253.2.12"</span><span class="p">,</span>
    <span class="s2">"amount"</span><span class="p">:</span> <span class="s2">"100"</span><span class="p">,</span>
    <span class="s2">"currency"</span><span class="p">:</span> <span class="s2">"USD"</span><span class="p">,</span>
    <span class="s2">"is_payout"</span><span class="p">:</span> <span class="s2">"true"</span><span class="p">,</span>
    <span class="s2">"return_success_url"</span><span class="p">:</span> <span class="s2">"http://www.example.com/success"</span><span class="p">,</span>
    <span class="s2">"return_failure_url"</span><span class="p">:</span> <span class="s2">"http://www.example.com/failure"</span><span class="p">,</span>
    <span class="s2">"customer_phone"</span><span class="p">:</span> <span class="s2">"+1987987987987"</span><span class="p">,</span>
    <span class="s2">"customer_email"</span><span class="p">:</span> <span class="s2">"travis@example.com"</span><span class="p">,</span>
    <span class="s2">"billing_address"</span><span class="p">:</span> <span class="p">{</span>
      <span class="s2">"first_name"</span><span class="p">:</span> <span class="s2">"Travis"</span><span class="p">,</span>
      <span class="s2">"last_name"</span><span class="p">:</span> <span class="s2">"Pastrana"</span><span class="p">,</span>
      <span class="s2">"address1"</span><span class="p">:</span> <span class="s2">"Muster Str. 12"</span><span class="p">,</span>
      <span class="s2">"zip_code"</span><span class="p">:</span> <span class="s2">"10178"</span><span class="p">,</span>
      <span class="s2">"city"</span><span class="p">:</span> <span class="s2">"Los Angeles"</span><span class="p">,</span>
      <span class="s2">"state"</span><span class="p">:</span> <span class="s2">"CA"</span><span class="p">,</span>
      <span class="s2">"country"</span><span class="p">:</span> <span class="s2">"US"</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">).</span><span class="nx">send</span><span class="p">()</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">success</span><span class="p">)</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">failure</span><span class="p">);</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>curl https://username:password@gate.emerchantpay.net/process/TERMINAL-TOKEN <span class="se">\</span>
   -H <span class="s2">"Content-Type: text/xml"</span> <span class="se">\</span>
   -d <span class="s1">'
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;webmoney&lt;/transaction_type&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;usage&gt;40208 concert tickets&lt;/usage&gt;
  &lt;remote_ip&gt;245.253.2.12&lt;/remote_ip&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
  &lt;is_payout&gt;true&lt;/is_payout&gt;
  &lt;return_success_url&gt;http://www.example.com/success&lt;/return_success_url&gt;
  &lt;return_failure_url&gt;http://www.example.com/failure&lt;/return_failure_url&gt;
  &lt;customer_phone&gt;+1987987987987&lt;/customer_phone&gt;
  &lt;customer_email&gt;travis@example.com&lt;/customer_email&gt;
  &lt;billing_address&gt;
    &lt;first_name&gt;Travis&lt;/first_name&gt;
    &lt;last_name&gt;Pastrana&lt;/last_name&gt;
    &lt;address1&gt;Muster Str. 12&lt;/address1&gt;
    &lt;zip_code&gt;10178&lt;/zip_code&gt;
    &lt;city&gt;Los Angeles&lt;/city&gt;
    &lt;state&gt;CA&lt;/state&gt;
    &lt;country&gt;US&lt;/country&gt;
  &lt;/billing_address&gt;
&lt;/payment_transaction&gt;'</span>
</code></pre>

<p><strong>Request Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>required</td>
<td>string(255)</td>
<td>The transaction type: <strong>webmoney</strong></td>
</tr>
<tr>
<td>transaction_id</td>
<td>required</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>usage</td>
<td>optional</td>
<td>string(255)</td>
<td>Description of the transaction for later use</td>
</tr>
<tr>
<td>remote_ip</td>
<td>required</td>
<td>IPv4 address</td>
<td>IPv4 address of customer</td>
</tr>
<tr>
<td>return_success_url</td>
<td>required</td>
<td>url</td>
<td>URL where customer is sent to after successful payment</td>
</tr>
<tr>
<td>return_failure_url</td>
<td>required</td>
<td>url</td>
<td>URL where customer is sent to after unsuccessful payment</td>
</tr>
<tr>
<td>amount</td>
<td>required</td>
<td>integer &gt; 0</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>required</td>
<td>string(3)</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>is_payout</td>
<td>required*</td>
<td>string</td>
<td>Value:true/false Flag for payout transaction</td>
</tr>
<tr>
<td>customer_account_id</td>
<td>required*</td>
<td>string(12)</td>
<td>Webmoney account ID (WMID). This field is required if is payout is set to &quot;true&quot;</td>
</tr>
<tr>
<td>customer_email</td>
<td>required</td>
<td>e-mail address</td>
<td>Must contain valid e-mail of customer</td>
</tr>
<tr>
<td>customer_phone</td>
<td>required*</td>
<td>string(32)</td>
<td>Must contain valid phone number of customer</td>
</tr>
<tr>
<td><strong>billing_address</strong></td>
<td>required</td>
<td></td>
<td>See <a href="#required-vs-optional-api-params">Required vs Optional API params</a> for details</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;first_name</td>
<td>required*</td>
<td>string(255)</td>
<td>Customer first name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;last_name</td>
<td>required*</td>
<td>string(255)</td>
<td>Customer last name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address1</td>
<td>required*</td>
<td>string(255)</td>
<td>Primary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address2</td>
<td>required*</td>
<td>string(255)</td>
<td>Secondary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;zip_code</td>
<td>required*</td>
<td>string</td>
<td>ZIP code</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;city</td>
<td>required*</td>
<td>string(255)</td>
<td>City</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;state</td>
<td>required*</td>
<td>string(2)</td>
<td>State code in <a href="https://en.wikipedia.org/wiki/ISO_3166-2">ISO 3166-2</a>, required for USA and Canada</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;country</td>
<td>required</td>
<td>string(2)</td>
<td>Country code in <a href="https://www.iso.org/iso-3166-country-codes.html">ISO 3166</a></td>
</tr>
<tr>
<td><strong>shipping_address</strong></td>
<td>optional</td>
<td></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;first_name</td>
<td>optional</td>
<td>string(255)</td>
<td>Customer first name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;last_name</td>
<td>optional</td>
<td>string(255)</td>
<td>Customer last name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address1</td>
<td>optional</td>
<td>string(255)</td>
<td>Primary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address2</td>
<td>optional</td>
<td>string(255)</td>
<td>Secondary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;zip_code</td>
<td>optional</td>
<td>string</td>
<td>ZIP code</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;city</td>
<td>optional</td>
<td>string(255)</td>
<td>City</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;state</td>
<td>optional</td>
<td>string(2)</td>
<td>State code in <a href="https://en.wikipedia.org/wiki/ISO_3166-2">ISO 3166-2</a>, required for USA and Canada</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;country</td>
<td>optional</td>
<td>string(2)</td>
<td>Country code in <a href="https://www.iso.org/iso-3166-country-codes.html">ISO 3166</a></td>
</tr>
</tbody></table>

<p><code>required* = conditionally required</code></p>

<blockquote>
<p>Auth Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>stdClass Object
(
    [transaction_type] =&gt; webmoney
    [status] =&gt; pending_async
    [mode] =&gt; live
    [transaction_id] =&gt; 43671
    [unique_id] =&gt; 44177a21403427eb96664a6d7e5d5d48
    [technical_message] =&gt; Transaction successful!
    [message] =&gt; Transaction successful!
    [redirect_url] =&gt; https://gate.emerchantpay.net/redirect/to_acquirer/649e1ff35c61
    [timestamp] =&gt; DateTime Object
        (
            [date] =&gt; 2019-03-14 12:05:57.000000
            [timezone_type] =&gt; 2
            [timezone] =&gt; Z
        )
    [descriptor] =&gt; Descriptor one
    [amount] =&gt; 100
    [currency] =&gt; USD
    [sent_to_acquirer] =&gt; true
)
</code></pre>

<pre class="highlight java tab-java"><code><span class="o">&lt;</span><span class="n">payment_response</span> <span class="n">content</span><span class="o">=[</span>
    <span class="o">&lt;</span><span class="n">transaction_type</span> <span class="n">content</span><span class="o">=[</span><span class="n">webmoney</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">status</span> <span class="n">content</span><span class="o">=[</span><span class="n">pending_async</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">mode</span> <span class="n">content</span><span class="o">=[</span><span class="n">live</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">transaction_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">43671</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">unique_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">44177</span><span class="n">a21403427eb96664a6d7e5d5d48</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">technical_message</span> <span class="n">content</span><span class="o">=[</span><span class="n">Transaction</span> <span class="n">successful</span><span class="o">!]&gt;</span>
    <span class="o">&lt;</span><span class="n">message</span> <span class="n">content</span><span class="o">=[</span><span class="n">Transaction</span> <span class="n">successful</span><span class="o">!]&gt;</span>
    <span class="o">&lt;</span><span class="n">redirect_url</span> <span class="n">content</span><span class="o">=[</span><span class="nl">https:</span><span class="c1">//gate.emerchantpay.net/redirect/to_acquirer/649e1ff35c61]&gt;</span>
    <span class="o">&lt;</span><span class="n">timestamp</span> <span class="n">content</span><span class="o">=[</span><span class="mi">2019</span><span class="o">-</span><span class="mo">03</span><span class="o">-</span><span class="mi">14</span><span class="nl">T12:</span><span class="mo">05</span><span class="o">:</span><span class="mi">57</span><span class="n">Z</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">descriptor</span> <span class="n">content</span><span class="o">=[</span><span class="n">Descriptor</span> <span class="n">one</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">amount</span> <span class="n">content</span><span class="o">=[</span><span class="mi">100</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">currency</span> <span class="n">content</span><span class="o">=[</span><span class="n">USD</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">sent_to_acquirer</span> <span class="n">content</span><span class="o">=[</span><span class="kc">true</span><span class="o">]&gt;</span>
<span class="o">]&gt;</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="p">{</span>
    <span class="nl">transaction_type</span><span class="p">:</span> <span class="s2">"webmoney"</span><span class="p">,</span>
    <span class="nx">status</span><span class="p">:</span> <span class="s2">"pending_async"</span><span class="p">,</span>
    <span class="nx">mode</span><span class="p">:</span> <span class="s2">"live"</span><span class="p">,</span>
    <span class="nx">transaction_id</span><span class="p">:</span> <span class="s2">"43671"</span><span class="p">,</span>
    <span class="nx">unique_id</span><span class="p">:</span> <span class="s2">"44177a21403427eb96664a6d7e5d5d48"</span><span class="p">,</span>
    <span class="nx">technical_message</span><span class="p">:</span> <span class="s2">"Transaction successful!"</span><span class="p">,</span>
    <span class="nx">message</span><span class="p">:</span> <span class="s2">"Transaction successful!"</span><span class="p">,</span>
    <span class="nx">redirect_url</span><span class="p">:</span> <span class="s2">"https://gate.emerchantpay.net/redirect/to_acquirer/649e1ff35c61"</span><span class="p">,</span>
    <span class="nx">timestamp</span><span class="p">:</span> <span class="s2">"2019-03-14T12:05:57Z"</span><span class="p">,</span>
    <span class="nx">descriptor</span><span class="p">:</span> <span class="s2">"Descriptor one"</span><span class="p">,</span>
    <span class="nx">amount</span><span class="p">:</span> <span class="s2">"100"</span><span class="p">,</span>
    <span class="nx">currency</span><span class="p">:</span> <span class="s2">"USD"</span><span class="p">,</span>
    <span class="nx">sent_to_acquirer</span><span class="p">:</span> <span class="s2">"true"</span><span class="p">,</span>
<span class="p">}</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;webmoney&lt;/transaction_type&gt;
  &lt;status&gt;pending_async&lt;/status&gt;
  &lt;mode&gt;live&lt;/mode&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;technical_message&gt;Transaction successful!&lt;/technical_message&gt;
  &lt;message&gt;Transaction successful!&lt;/message&gt;
  &lt;redirect_url&gt;https://gate.emerchantpay.net/redirect/to_acquirer/649e1ff35c61&lt;/redirect_url&gt;
  &lt;timestamp&gt;2019-03-14T12:05:57Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
  &lt;sent_to_acquirer&gt;true&lt;/sent_to_acquirer&gt;
&lt;/payment_transaction&gt;
</code></pre>

<blockquote>
<p>Payout Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>stdClass Object
(
    [transaction_type] =&gt; webmoney
    [status] =&gt; approved
    [mode] =&gt; live
    [transaction_id] =&gt; 43671
    [unique_id] =&gt; 44177a21403427eb96664a6d7e5d5d48
    [technical_message] =&gt; Transaction successful!
    [message] =&gt; Transaction successful!
    [timestamp] =&gt; DateTime Object
        (
            [date] =&gt; 2019-03-14 12:05:57.000000
            [timezone_type] =&gt; 2
            [timezone] =&gt; Z
        )
    [descriptor] =&gt; Descriptor one
    [amount] =&gt; 100
    [currency] =&gt; USD
    [sent_to_acquirer] =&gt; true
)
</code></pre>

<pre class="highlight java tab-java"><code><span class="o">&lt;</span><span class="n">payment_response</span> <span class="n">content</span><span class="o">=[</span>
    <span class="o">&lt;</span><span class="n">transaction_type</span> <span class="n">content</span><span class="o">=[</span><span class="n">webmoney</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">status</span> <span class="n">content</span><span class="o">=[</span><span class="n">approved</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">mode</span> <span class="n">content</span><span class="o">=[</span><span class="n">live</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">transaction_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">43671</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">unique_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">44177</span><span class="n">a21403427eb96664a6d7e5d5d48</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">technical_message</span> <span class="n">content</span><span class="o">=[</span><span class="n">Transaction</span> <span class="n">successful</span><span class="o">!]&gt;</span>
    <span class="o">&lt;</span><span class="n">message</span> <span class="n">content</span><span class="o">=[</span><span class="n">Transaction</span> <span class="n">successful</span><span class="o">!]&gt;</span>
    <span class="o">&lt;</span><span class="n">timestamp</span> <span class="n">content</span><span class="o">=[</span><span class="mi">2019</span><span class="o">-</span><span class="mo">03</span><span class="o">-</span><span class="mi">14</span><span class="nl">T12:</span><span class="mo">05</span><span class="o">:</span><span class="mi">57</span><span class="n">Z</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">descriptor</span> <span class="n">content</span><span class="o">=[</span><span class="n">Descriptor</span> <span class="n">one</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">amount</span> <span class="n">content</span><span class="o">=[</span><span class="mi">100</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">currency</span> <span class="n">content</span><span class="o">=[</span><span class="n">USD</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">sent_to_acquirer</span> <span class="n">content</span><span class="o">=[</span><span class="kc">true</span><span class="o">]&gt;</span>
<span class="o">]&gt;</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="p">{</span>
    <span class="nl">transaction_type</span><span class="p">:</span> <span class="s2">"webmoney"</span><span class="p">,</span>
    <span class="nx">status</span><span class="p">:</span> <span class="s2">"approved"</span><span class="p">,</span>
    <span class="nx">mode</span><span class="p">:</span> <span class="s2">"live"</span><span class="p">,</span>
    <span class="nx">transaction_id</span><span class="p">:</span> <span class="s2">"43671"</span><span class="p">,</span>
    <span class="nx">unique_id</span><span class="p">:</span> <span class="s2">"44177a21403427eb96664a6d7e5d5d48"</span><span class="p">,</span>
    <span class="nx">technical_message</span><span class="p">:</span> <span class="s2">"Transaction successful!"</span><span class="p">,</span>
    <span class="nx">message</span><span class="p">:</span> <span class="s2">"Transaction successful!"</span><span class="p">,</span>
    <span class="nx">timestamp</span><span class="p">:</span> <span class="s2">"2019-03-14T12:05:57Z"</span><span class="p">,</span>
    <span class="nx">descriptor</span><span class="p">:</span> <span class="s2">"Descriptor one"</span><span class="p">,</span>
    <span class="nx">amount</span><span class="p">:</span> <span class="s2">"100"</span><span class="p">,</span>
    <span class="nx">currency</span><span class="p">:</span> <span class="s2">"USD"</span><span class="p">,</span>
    <span class="nx">sent_to_acquirer</span><span class="p">:</span> <span class="s2">"true"</span><span class="p">,</span>
<span class="p">}</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;webmoney&lt;/transaction_type&gt;
  &lt;status&gt;approved&lt;/status&gt;
  &lt;mode&gt;live&lt;/mode&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;technical_message&gt;Transaction successful!&lt;/technical_message&gt;
  &lt;message&gt;Transaction successful!&lt;/message&gt;
  &lt;timestamp&gt;2019-03-14T12:05:57Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
  &lt;sent_to_acquirer&gt;true&lt;/sent_to_acquirer&gt;
&lt;/payment_transaction&gt;
</code></pre>

<p><strong>Successful Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>The transaction type</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>transaction_id</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>unique_id</td>
<td>string(32)</td>
<td>Unique id defined by gate (must later be used if capturing, voiding or refunding a transaction)</td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
<tr>
<td>message</td>
<td>string(255)</td>
<td>Human readable error message which can be displayed to users.</td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>redirect_url</td>
<td>url</td>
<td>URL where user has to be redirected to complete payment process. It is available for asynchronous mode</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when the transaction was processed in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Combined date and time</a> e.g. 2007-08- 30T17:46:11Z</td>
</tr>
<tr>
<td>descriptor</td>
<td>string</td>
<td>Static descriptor MID info as configured on the gateway</td>
</tr>
<tr>
<td>amount</td>
<td>integer</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>sent_to_acquirer</td>
<td>string</td>
<td>&quot;true&quot; or &quot;false&quot;</td>
</tr>
</tbody></table>

<blockquote>
<p>Error Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>stdClass Object
(
    [transaction_type] =&gt; webmoney
    [status] =&gt; error
    [mode] =&gt; live
    [transaction_id] =&gt; 43671
    [unique_id] =&gt; 44177a21403427eb96664a6d7e5d5d48
    [code] =&gt; 110
    [message] =&gt; Something went wrong, please contact support!
    [timestamp] =&gt; DateTime Object
        (
            [date] =&gt; 2019-03-14 12:05:57.000000
            [timezone_type] =&gt; 2
            [timezone] =&gt; Z
        )
    [descriptor] =&gt; Descriptor one
    [amount] =&gt; 100
    [currency] =&gt; USD
    [sent_to_acquirer] =&gt; false
)
</code></pre>

<pre class="highlight java tab-java"><code><span class="o">&lt;</span><span class="n">payment_response</span> <span class="n">content</span><span class="o">=[</span>
    <span class="o">&lt;</span><span class="n">transaction_type</span> <span class="n">content</span><span class="o">=[</span><span class="n">webmoney</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">status</span> <span class="n">content</span><span class="o">=[</span><span class="n">error</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">mode</span> <span class="n">content</span><span class="o">=[</span><span class="n">live</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">transaction_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">43671</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">unique_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">44177</span><span class="n">a21403427eb96664a6d7e5d5d48</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">code</span> <span class="n">content</span><span class="o">=[</span><span class="mi">110</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">message</span> <span class="n">content</span><span class="o">=[</span><span class="n">Something</span> <span class="n">went</span> <span class="n">wrong</span><span class="o">,</span> <span class="n">please</span> <span class="n">contact</span> <span class="n">support</span><span class="o">!]&gt;</span>
    <span class="o">&lt;</span><span class="n">timestamp</span> <span class="n">content</span><span class="o">=[</span><span class="mi">2019</span><span class="o">-</span><span class="mo">03</span><span class="o">-</span><span class="mi">14</span><span class="nl">T12:</span><span class="mo">05</span><span class="o">:</span><span class="mi">57</span><span class="n">Z</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">descriptor</span> <span class="n">content</span><span class="o">=[</span><span class="n">Descriptor</span> <span class="n">one</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">amount</span> <span class="n">content</span><span class="o">=[</span><span class="mi">100</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">currency</span> <span class="n">content</span><span class="o">=[</span><span class="n">USD</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">sent_to_acquirer</span> <span class="n">content</span><span class="o">=[</span><span class="kc">false</span><span class="o">]&gt;</span>
<span class="o">]&gt;</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="p">{</span>
    <span class="nl">transaction_type</span><span class="p">:</span> <span class="s2">"webmoney"</span><span class="p">,</span>
    <span class="nx">status</span><span class="p">:</span> <span class="s2">"error"</span><span class="p">,</span>
    <span class="nx">mode</span><span class="p">:</span> <span class="s2">"live"</span><span class="p">,</span>
    <span class="nx">transaction_id</span><span class="p">:</span> <span class="s2">"43671"</span><span class="p">,</span>
    <span class="nx">unique_id</span><span class="p">:</span> <span class="s2">"44177a21403427eb96664a6d7e5d5d48"</span><span class="p">,</span>
    <span class="nx">code</span><span class="p">:</span> <span class="s2">"110"</span><span class="p">,</span>
    <span class="nx">message</span><span class="p">:</span> <span class="s2">"Something went wrong, please contact support!"</span><span class="p">,</span>
    <span class="nx">timestamp</span><span class="p">:</span> <span class="s2">"2019-03-14T12:05:57Z"</span><span class="p">,</span>
    <span class="nx">descriptor</span><span class="p">:</span> <span class="s2">"Descriptor one"</span><span class="p">,</span>
    <span class="nx">amount</span><span class="p">:</span> <span class="s2">"100"</span><span class="p">,</span>
    <span class="nx">currency</span><span class="p">:</span> <span class="s2">"USD"</span><span class="p">,</span>
    <span class="nx">sent_to_acquirer</span><span class="p">:</span> <span class="s2">"false"</span><span class="p">,</span>
<span class="p">}</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;webmoney&lt;/transaction_type&gt;
  &lt;status&gt;error&lt;/status&gt;
  &lt;mode&gt;live&lt;/mode&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;code&gt;110&lt;/code&gt;
  &lt;message&gt;Something went wrong, please contact support!&lt;/message&gt;
  &lt;timestamp&gt;2019-03-14T12:05:57Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
  &lt;sent_to_acquirer&gt;false&lt;/sent_to_acquirer&gt;
&lt;/payment_transaction&gt;
</code></pre>

<p><strong>Error Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>The transaction type</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>transaction_id</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>unique_id</td>
<td>string(32)</td>
<td>Unique id defined by gate (must later be used if capturing, voiding or refunding a transaction)</td>
</tr>
<tr>
<td>code</td>
<td>integer</td>
<td>Error code according to <a href="#error-code-table">Error code table</a></td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
<tr>
<td>message</td>
<td>string(255)</td>
<td>Human readable error message which can be displayed to users.</td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when the transaction was processed in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Combined date and time</a> e.g. 2007-08- 30T17:46:11Z</td>
</tr>
<tr>
<td>descriptor</td>
<td>string</td>
<td>Static descriptor MID info as configured on the gateway</td>
</tr>
<tr>
<td>amount</td>
<td>integer</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>sent_to_acquirer</td>
<td>string</td>
<td>&quot;true&quot; or &quot;false&quot;</td>
</tr>
</tbody></table>
<h3 id='wechat'>Wechat</h3>
<aside class="notice" >
WeChat Pay solution offers merchants access to the over 300 million WeChat users that have linked payment accounts to their WeChat account. The solution works on desktop and mobile via a QR code generation platform.
<br><br>
Wechat payment transaction - after a successful validation of transaction parameters, transaction status is set to pending async and the consumer is redirected to page that contains the QR Code for scan. The consumer then opens the WeChat application on phone and scans the QR Code for payment confirmation. The gateway waits for an async notification from PaySec with the payment result of the consumer bank payment and updates the transaction status accordingly.
<br><br>
When the payment reaches a final state, the gateway sends a notification to the merchant on the configured notification URL for the merchant.
</aside>

<p><strong>Supported countries:</strong> All countries are supported</p>

<blockquote>
<p>Request</p>
</blockquote>

<pre class="highlight php tab-php"><code><span class="cp">&lt;?php</span>

<span class="c1">// Load the pre-configured ini file...
</span><span class="nx">\Genesis\Config</span><span class="o">::</span><span class="na">loadSettings</span><span class="p">(</span><span class="s1">'/path/to/config.ini'</span><span class="p">);</span>

<span class="nv">$genesis</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Genesis</span><span class="p">(</span><span class="s1">'Financial\OnlineBankingPayments\WeChat'</span><span class="p">);</span>
<span class="nv">$request</span> <span class="o">=</span> <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">request</span><span class="p">();</span>

<span class="nv">$request</span>
  <span class="o">-&gt;</span><span class="na">setTransactionId</span><span class="p">(</span><span class="s1">'43671'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setUsage</span><span class="p">(</span><span class="s1">'40208 concert tickets'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setRemoteIp</span><span class="p">(</span><span class="s1">'245.253.2.12'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setNotificationUrl</span><span class="p">(</span><span class="s1">'https://www.example.com/notification'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setReturnUrl</span><span class="p">(</span><span class="s1">'https://gate.emerchantpay.net/redirect/to_acquirer/a55ab44d242f'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setAmount</span><span class="p">(</span><span class="s1">'100'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCurrency</span><span class="p">(</span><span class="s1">'USD'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setProductCode</span><span class="p">(</span><span class="s1">'product-code'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setProductNum</span><span class="p">(</span><span class="s1">'1234'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setProductDesc</span><span class="p">(</span><span class="s1">'Product description'</span><span class="p">)</span>


  <span class="c1">// Billing Address
</span>  <span class="o">-&gt;</span><span class="na">setBillingFirstName</span><span class="p">(</span><span class="s1">'Travis'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingLastName</span><span class="p">(</span><span class="s1">'Pastrana'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingAddress1</span><span class="p">(</span><span class="s1">'Muster Str. 12'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingZipCode</span><span class="p">(</span><span class="s1">'10178'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingCity</span><span class="p">(</span><span class="s1">'Los Angeles'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingState</span><span class="p">(</span><span class="s1">'CA'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingCountry</span><span class="p">(</span><span class="s1">'US'</span><span class="p">);</span>

<span class="k">try</span> <span class="p">{</span>
    <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">execute</span><span class="p">();</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">response</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">getResponseObject</span><span class="p">();</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">\Exception</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$e</span><span class="o">-&gt;</span><span class="na">getMessage</span><span class="p">();</span>
<span class="p">}</span>
</code></pre>

<pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.GenesisClient</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.TransactionResult</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.constants.Endpoints</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.constants.Environments</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.requests.financial.oBeP.WechatRequest</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.model.Transaction</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Configuration</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Country</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Currency</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.math.BigDecimal</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.MalformedURLException</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.URL</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">GenesisExample</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">MalformedURLException</span> <span class="o">{</span>

    <span class="c1">// Create configuration</span>
    <span class="n">Configuration</span> <span class="n">configuration</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Configuration</span><span class="o">(</span><span class="n">Environments</span><span class="o">.</span><span class="na">STAGING</span><span class="o">,</span> <span class="n">Endpoints</span><span class="o">.</span><span class="na">EMERCHANTPAY</span><span class="o">);</span>

    <span class="n">configuration</span><span class="o">.</span><span class="na">setUsername</span><span class="o">(</span><span class="s">"SET_YOUR_USERNAME"</span><span class="o">);</span>
    <span class="n">configuration</span><span class="o">.</span><span class="na">setPassword</span><span class="o">(</span><span class="s">"SET_YOUR_PASSWORD"</span><span class="o">);</span>
    <span class="n">configuration</span><span class="o">.</span><span class="na">setToken</span><span class="o">(</span><span class="s">"SET_YOUR_TOKEN"</span><span class="o">);</span>

    <span class="n">WechatRequest</span> <span class="n">request</span> <span class="o">=</span> <span class="k">new</span> <span class="n">WechatRequest</span><span class="o">();</span>

    <span class="n">request</span><span class="o">.</span><span class="na">setTransactionId</span><span class="o">(</span><span class="s">"43671"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setUsage</span><span class="o">(</span><span class="s">"40208 concert tickets"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setRemoteIp</span><span class="o">(</span><span class="s">"245.253.2.12"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setNotificationUrl</span><span class="o">(</span><span class="k">new</span> <span class="n">URL</span><span class="o">(</span><span class="s">"https://www.example.com/notification"</span><span class="o">));</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setReturnUrl</span><span class="o">(</span><span class="k">new</span> <span class="n">URL</span><span class="o">(</span><span class="s">"https://gate.emerchantpay.net/redirect/to_acquirer/a55ab44d242f"</span><span class="o">));</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setAmount</span><span class="o">(</span><span class="k">new</span> <span class="n">BigDecimal</span><span class="o">(</span><span class="mi">100</span><span class="o">));</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCurrency</span><span class="o">(</span><span class="s">"USD"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setProductCode</span><span class="o">(</span><span class="s">"product-code"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setProductNum</span><span class="o">(</span><span class="s">"1234"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setProductDesc</span><span class="o">(</span><span class="s">"Product description"</span><span class="o">);</span>


    <span class="c1">// Billing Address</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingFirstname</span><span class="o">(</span><span class="s">"Travis"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingLastname</span><span class="o">(</span><span class="s">"Pastrana"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingPrimaryAddress</span><span class="o">(</span><span class="s">"Muster Str. 12"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingZipCode</span><span class="o">(</span><span class="s">"10178"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingCity</span><span class="o">(</span><span class="s">"Los Angeles"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingState</span><span class="o">(</span><span class="s">"CA"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingCountry</span><span class="o">(</span><span class="s">"US"</span><span class="o">);</span>

    <span class="n">GenesisClient</span> <span class="n">client</span> <span class="o">=</span> <span class="k">new</span> <span class="n">GenesisClient</span><span class="o">(</span><span class="n">configuration</span><span class="o">,</span> <span class="n">request</span><span class="o">);</span>
    <span class="n">client</span><span class="o">.</span><span class="na">execute</span><span class="o">();</span>

    <span class="c1">// Parse Payment result</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">client</span><span class="o">.</span><span class="na">getResponse</span><span class="o">());</span>

  <span class="o">}</span>
<span class="o">}</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="kd">var</span> <span class="nx">genesis</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'genesis.js/lib/genesis.js'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">transaction</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">genesis</span><span class="p">.</span><span class="nx">transaction</span><span class="p">();</span>

<span class="kd">var</span> <span class="nx">failure</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">reason</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">reason</span><span class="p">);</span>
<span class="p">};</span>

<span class="kd">var</span> <span class="nx">success</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>

<span class="nx">transaction</span><span class="p">.</span><span class="nx">wechat</span><span class="p">(</span>
  <span class="p">{</span>
    <span class="s2">"transaction_id"</span><span class="p">:</span> <span class="s2">"43671"</span><span class="p">,</span>
    <span class="s2">"usage"</span><span class="p">:</span> <span class="s2">"40208 concert tickets"</span><span class="p">,</span>
    <span class="s2">"remote_ip"</span><span class="p">:</span> <span class="s2">"245.253.2.12"</span><span class="p">,</span>
    <span class="s2">"notification_url"</span><span class="p">:</span> <span class="s2">"https://www.example.com/notification"</span><span class="p">,</span>
    <span class="s2">"return_url"</span><span class="p">:</span> <span class="s2">"https://gate.emerchantpay.net/redirect/to_acquirer/a55ab44d242f"</span><span class="p">,</span>
    <span class="s2">"amount"</span><span class="p">:</span> <span class="s2">"100"</span><span class="p">,</span>
    <span class="s2">"currency"</span><span class="p">:</span> <span class="s2">"USD"</span><span class="p">,</span>
    <span class="s2">"product_code"</span><span class="p">:</span> <span class="s2">"product-code"</span><span class="p">,</span>
    <span class="s2">"product_num"</span><span class="p">:</span> <span class="s2">"1234"</span><span class="p">,</span>
    <span class="s2">"product_desc"</span><span class="p">:</span> <span class="s2">"Product description"</span><span class="p">,</span>
    <span class="s2">"billing_address"</span><span class="p">:</span> <span class="p">{</span>
      <span class="s2">"first_name"</span><span class="p">:</span> <span class="s2">"Travis"</span><span class="p">,</span>
      <span class="s2">"last_name"</span><span class="p">:</span> <span class="s2">"Pastrana"</span><span class="p">,</span>
      <span class="s2">"address1"</span><span class="p">:</span> <span class="s2">"Muster Str. 12"</span><span class="p">,</span>
      <span class="s2">"zip_code"</span><span class="p">:</span> <span class="s2">"10178"</span><span class="p">,</span>
      <span class="s2">"city"</span><span class="p">:</span> <span class="s2">"Los Angeles"</span><span class="p">,</span>
      <span class="s2">"state"</span><span class="p">:</span> <span class="s2">"CA"</span><span class="p">,</span>
      <span class="s2">"country"</span><span class="p">:</span> <span class="s2">"US"</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">).</span><span class="nx">send</span><span class="p">()</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">success</span><span class="p">)</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">failure</span><span class="p">);</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>curl https://username:password@gate.emerchantpay.net/process/TERMINAL-TOKEN <span class="se">\</span>
   -H <span class="s2">"Content-Type: text/xml"</span> <span class="se">\</span>
   -d <span class="s1">'
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;wechat&lt;/transaction_type&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;usage&gt;40208 concert tickets&lt;/usage&gt;
  &lt;remote_ip&gt;245.253.2.12&lt;/remote_ip&gt;
  &lt;notification_url&gt;https://www.example.com/notification&lt;/notification_url&gt;
  &lt;return_url&gt;https://gate.emerchantpay.net/redirect/to_acquirer/a55ab44d242f&lt;/return_url&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
  &lt;product_code&gt;product-code&lt;/product_code&gt;
  &lt;product_num&gt;1234&lt;/product_num&gt;
  &lt;product_desc&gt;Product description&lt;/product_desc&gt;
  &lt;billing_address&gt;
    &lt;first_name&gt;Travis&lt;/first_name&gt;
    &lt;last_name&gt;Pastrana&lt;/last_name&gt;
    &lt;address1&gt;Muster Str. 12&lt;/address1&gt;
    &lt;zip_code&gt;10178&lt;/zip_code&gt;
    &lt;city&gt;Los Angeles&lt;/city&gt;
    &lt;state&gt;CA&lt;/state&gt;
    &lt;country&gt;US&lt;/country&gt;
  &lt;/billing_address&gt;
&lt;/payment_transaction&gt;'</span>
</code></pre>

<p><strong>Request Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>required</td>
<td>string(255)</td>
<td>The transaction type: <strong>wechat</strong></td>
</tr>
<tr>
<td>transaction_id</td>
<td>required</td>
<td>string(30)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>usage</td>
<td>required</td>
<td>string(255)</td>
<td>Description of the transaction for later use</td>
</tr>
<tr>
<td>remote_ip</td>
<td>required*</td>
<td>IPv4 address</td>
<td>IPv4 address of customer</td>
</tr>
<tr>
<td>notification_url</td>
<td>required</td>
<td>url</td>
<td>URL at merchant where gateway sends outcome of transaction.</td>
</tr>
<tr>
<td>return_url</td>
<td>required</td>
<td>url</td>
<td>URL where consumer is sent to after payment</td>
</tr>
<tr>
<td>amount</td>
<td>required</td>
<td>integer &gt; 0</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details<br>Max amount in minor currency unit: 999999</td>
</tr>
<tr>
<td>currency</td>
<td>required</td>
<td>string(3)</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>product_code</td>
<td>optional</td>
<td>string(60)</td>
<td>Product code</td>
</tr>
<tr>
<td>product_num</td>
<td>optional</td>
<td>integer(10)</td>
<td>Product number</td>
</tr>
<tr>
<td>product_desc</td>
<td>optional</td>
<td>string(255)</td>
<td>Product description</td>
</tr>
<tr>
<td>customer_email</td>
<td>required*</td>
<td>e-mail address</td>
<td>Must contain valid e-mail of customer</td>
</tr>
<tr>
<td>customer_phone</td>
<td>required*</td>
<td>string(32)</td>
<td>Must contain valid phone number of customer</td>
</tr>
<tr>
<td><strong>billing_address</strong></td>
<td>required</td>
<td></td>
<td>See <a href="#required-vs-optional-api-params">Required vs Optional API params</a> for details</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;first_name</td>
<td>required*</td>
<td>string(255)</td>
<td>Customer first name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;last_name</td>
<td>required*</td>
<td>string(255)</td>
<td>Customer last name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address1</td>
<td>required*</td>
<td>string(255)</td>
<td>Primary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address2</td>
<td>required*</td>
<td>string(255)</td>
<td>Secondary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;zip_code</td>
<td>required*</td>
<td>string</td>
<td>ZIP code</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;city</td>
<td>required*</td>
<td>string(255)</td>
<td>City</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;state</td>
<td>required*</td>
<td>string(2)</td>
<td>State code in <a href="https://en.wikipedia.org/wiki/ISO_3166-2">ISO 3166-2</a>, required for USA and Canada</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;country</td>
<td>required</td>
<td>string(2)</td>
<td>Country code in <a href="https://www.iso.org/iso-3166-country-codes.html">ISO 3166</a></td>
</tr>
</tbody></table>

<p><code>required* = conditionally required</code></p>

<blockquote>
<p>Successful Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>stdClass Object
(
    [transaction_type] =&gt; wechat
    [status] =&gt; pending_async
    [mode] =&gt; live
    [transaction_id] =&gt; 43671
    [unique_id] =&gt; 44177a21403427eb96664a6d7e5d5d48
    [technical_message] =&gt; Transaction successful!
    [message] =&gt; Transaction successful!
    [redirect_url] =&gt; https://gate.emerchantpay.net/redirect/to_acquirer/649e1ff35c61
    [timestamp] =&gt; DateTime Object
        (
            [date] =&gt; 2019-03-14 12:05:57.000000
            [timezone_type] =&gt; 2
            [timezone] =&gt; Z
        )
    [descriptor] =&gt; Descriptor one
    [amount] =&gt; 100
    [currency] =&gt; USD
    [sent_to_acquirer] =&gt; true
)
</code></pre>

<pre class="highlight java tab-java"><code><span class="o">&lt;</span><span class="n">payment_response</span> <span class="n">content</span><span class="o">=[</span>
    <span class="o">&lt;</span><span class="n">transaction_type</span> <span class="n">content</span><span class="o">=[</span><span class="n">wechat</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">status</span> <span class="n">content</span><span class="o">=[</span><span class="n">pending_async</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">mode</span> <span class="n">content</span><span class="o">=[</span><span class="n">live</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">transaction_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">43671</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">unique_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">44177</span><span class="n">a21403427eb96664a6d7e5d5d48</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">technical_message</span> <span class="n">content</span><span class="o">=[</span><span class="n">Transaction</span> <span class="n">successful</span><span class="o">!]&gt;</span>
    <span class="o">&lt;</span><span class="n">message</span> <span class="n">content</span><span class="o">=[</span><span class="n">Transaction</span> <span class="n">successful</span><span class="o">!]&gt;</span>
    <span class="o">&lt;</span><span class="n">redirect_url</span> <span class="n">content</span><span class="o">=[</span><span class="nl">https:</span><span class="c1">//gate.emerchantpay.net/redirect/to_acquirer/649e1ff35c61]&gt;</span>
    <span class="o">&lt;</span><span class="n">timestamp</span> <span class="n">content</span><span class="o">=[</span><span class="mi">2019</span><span class="o">-</span><span class="mo">03</span><span class="o">-</span><span class="mi">14</span><span class="nl">T12:</span><span class="mo">05</span><span class="o">:</span><span class="mi">57</span><span class="n">Z</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">descriptor</span> <span class="n">content</span><span class="o">=[</span><span class="n">Descriptor</span> <span class="n">one</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">amount</span> <span class="n">content</span><span class="o">=[</span><span class="mi">100</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">currency</span> <span class="n">content</span><span class="o">=[</span><span class="n">USD</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">sent_to_acquirer</span> <span class="n">content</span><span class="o">=[</span><span class="kc">true</span><span class="o">]&gt;</span>
<span class="o">]&gt;</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="p">{</span>
    <span class="nl">transaction_type</span><span class="p">:</span> <span class="s2">"wechat"</span><span class="p">,</span>
    <span class="nx">status</span><span class="p">:</span> <span class="s2">"pending_async"</span><span class="p">,</span>
    <span class="nx">mode</span><span class="p">:</span> <span class="s2">"live"</span><span class="p">,</span>
    <span class="nx">transaction_id</span><span class="p">:</span> <span class="s2">"43671"</span><span class="p">,</span>
    <span class="nx">unique_id</span><span class="p">:</span> <span class="s2">"44177a21403427eb96664a6d7e5d5d48"</span><span class="p">,</span>
    <span class="nx">technical_message</span><span class="p">:</span> <span class="s2">"Transaction successful!"</span><span class="p">,</span>
    <span class="nx">message</span><span class="p">:</span> <span class="s2">"Transaction successful!"</span><span class="p">,</span>
    <span class="nx">redirect_url</span><span class="p">:</span> <span class="s2">"https://gate.emerchantpay.net/redirect/to_acquirer/649e1ff35c61"</span><span class="p">,</span>
    <span class="nx">timestamp</span><span class="p">:</span> <span class="s2">"2019-03-14T12:05:57Z"</span><span class="p">,</span>
    <span class="nx">descriptor</span><span class="p">:</span> <span class="s2">"Descriptor one"</span><span class="p">,</span>
    <span class="nx">amount</span><span class="p">:</span> <span class="s2">"100"</span><span class="p">,</span>
    <span class="nx">currency</span><span class="p">:</span> <span class="s2">"USD"</span><span class="p">,</span>
    <span class="nx">sent_to_acquirer</span><span class="p">:</span> <span class="s2">"true"</span><span class="p">,</span>
<span class="p">}</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;wechat&lt;/transaction_type&gt;
  &lt;status&gt;pending_async&lt;/status&gt;
  &lt;mode&gt;live&lt;/mode&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;technical_message&gt;Transaction successful!&lt;/technical_message&gt;
  &lt;message&gt;Transaction successful!&lt;/message&gt;
  &lt;redirect_url&gt;https://gate.emerchantpay.net/redirect/to_acquirer/649e1ff35c61&lt;/redirect_url&gt;
  &lt;timestamp&gt;2019-03-14T12:05:57Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
  &lt;sent_to_acquirer&gt;true&lt;/sent_to_acquirer&gt;
&lt;/payment_transaction&gt;
</code></pre>

<p><strong>Successful Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>The transaction type</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>transaction_id</td>
<td>string(30)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>unique_id</td>
<td>string(32)</td>
<td>Unique id defined by gate (must later be used if capturing, voiding or refunding a transaction)</td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
<tr>
<td>message</td>
<td>string(255)</td>
<td>Human readable error message which can be displayed to users.</td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>redirect_url</td>
<td>url</td>
<td>URL where user has to be redirected to complete payment process. It is available for asynchronous mode</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when the transaction was processed in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Combined date and time</a> e.g. 2007-08- 30T17:46:11Z</td>
</tr>
<tr>
<td>descriptor</td>
<td>string</td>
<td>Static descriptor MID info as configured on the gateway</td>
</tr>
<tr>
<td>amount</td>
<td>integer</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>sent_to_acquirer</td>
<td>string</td>
<td>&quot;true&quot; or &quot;false&quot;</td>
</tr>
</tbody></table>

<blockquote>
<p>Error Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>stdClass Object
(
    [transaction_type] =&gt; wechat
    [status] =&gt; error
    [mode] =&gt; live
    [transaction_id] =&gt; 43671
    [unique_id] =&gt; 44177a21403427eb96664a6d7e5d5d48
    [code] =&gt; 110
    [message] =&gt; Please check input data for errors!
    [timestamp] =&gt; DateTime Object
        (
            [date] =&gt; 2019-03-14 12:05:57.000000
            [timezone_type] =&gt; 2
            [timezone] =&gt; Z
        )
    [descriptor] =&gt; Descriptor one
    [amount] =&gt; 100
    [currency] =&gt; USD
    [sent_to_acquirer] =&gt; true
)
</code></pre>

<pre class="highlight java tab-java"><code><span class="o">&lt;</span><span class="n">payment_response</span> <span class="n">content</span><span class="o">=[</span>
    <span class="o">&lt;</span><span class="n">transaction_type</span> <span class="n">content</span><span class="o">=[</span><span class="n">wechat</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">status</span> <span class="n">content</span><span class="o">=[</span><span class="n">error</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">mode</span> <span class="n">content</span><span class="o">=[</span><span class="n">live</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">transaction_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">43671</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">unique_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">44177</span><span class="n">a21403427eb96664a6d7e5d5d48</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">code</span> <span class="n">content</span><span class="o">=[</span><span class="mi">110</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">message</span> <span class="n">content</span><span class="o">=[</span><span class="n">Please</span> <span class="n">check</span> <span class="n">input</span> <span class="n">data</span> <span class="k">for</span> <span class="n">errors</span><span class="o">!]&gt;</span>
    <span class="o">&lt;</span><span class="n">timestamp</span> <span class="n">content</span><span class="o">=[</span><span class="mi">2019</span><span class="o">-</span><span class="mo">03</span><span class="o">-</span><span class="mi">14</span><span class="nl">T12:</span><span class="mo">05</span><span class="o">:</span><span class="mi">57</span><span class="n">Z</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">descriptor</span> <span class="n">content</span><span class="o">=[</span><span class="n">Descriptor</span> <span class="n">one</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">amount</span> <span class="n">content</span><span class="o">=[</span><span class="mi">100</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">currency</span> <span class="n">content</span><span class="o">=[</span><span class="n">USD</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">sent_to_acquirer</span> <span class="n">content</span><span class="o">=[</span><span class="kc">true</span><span class="o">]&gt;</span>
<span class="o">]&gt;</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="p">{</span>
    <span class="nl">transaction_type</span><span class="p">:</span> <span class="s2">"wechat"</span><span class="p">,</span>
    <span class="nx">status</span><span class="p">:</span> <span class="s2">"error"</span><span class="p">,</span>
    <span class="nx">mode</span><span class="p">:</span> <span class="s2">"live"</span><span class="p">,</span>
    <span class="nx">transaction_id</span><span class="p">:</span> <span class="s2">"43671"</span><span class="p">,</span>
    <span class="nx">unique_id</span><span class="p">:</span> <span class="s2">"44177a21403427eb96664a6d7e5d5d48"</span><span class="p">,</span>
    <span class="nx">code</span><span class="p">:</span> <span class="s2">"110"</span><span class="p">,</span>
    <span class="nx">message</span><span class="p">:</span> <span class="s2">"Please check input data for errors!"</span><span class="p">,</span>
    <span class="nx">timestamp</span><span class="p">:</span> <span class="s2">"2019-03-14T12:05:57Z"</span><span class="p">,</span>
    <span class="nx">descriptor</span><span class="p">:</span> <span class="s2">"Descriptor one"</span><span class="p">,</span>
    <span class="nx">amount</span><span class="p">:</span> <span class="s2">"100"</span><span class="p">,</span>
    <span class="nx">currency</span><span class="p">:</span> <span class="s2">"USD"</span><span class="p">,</span>
    <span class="nx">sent_to_acquirer</span><span class="p">:</span> <span class="s2">"true"</span><span class="p">,</span>
<span class="p">}</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;wechat&lt;/transaction_type&gt;
  &lt;status&gt;error&lt;/status&gt;
  &lt;mode&gt;live&lt;/mode&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;code&gt;110&lt;/code&gt;
  &lt;message&gt;Please check input data <span class="k">for </span>errors!&lt;/message&gt;
  &lt;timestamp&gt;2019-03-14T12:05:57Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
  &lt;sent_to_acquirer&gt;true&lt;/sent_to_acquirer&gt;
&lt;/payment_transaction&gt;
</code></pre>

<p><strong>Error Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>The transaction type</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>transaction_id</td>
<td>string(30)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>unique_id</td>
<td>string(32)</td>
<td>Unique id defined by gate (must later be used if capturing, voiding or refunding a transaction)</td>
</tr>
<tr>
<td>code</td>
<td>integer</td>
<td>Error code according to <a href="#error-code-table">Error code table</a></td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
<tr>
<td>message</td>
<td>string(255)</td>
<td>Human readable error message which can be displayed to users.</td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when the transaction was processed in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Combined date and time</a> e.g. 2007-08- 30T17:46:11Z</td>
</tr>
<tr>
<td>descriptor</td>
<td>string</td>
<td>Static descriptor MID info as configured on the gateway</td>
</tr>
<tr>
<td>amount</td>
<td>integer</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>sent_to_acquirer</td>
<td>string</td>
<td>&quot;true&quot; or &quot;false&quot;</td>
</tr>
</tbody></table>
<h3 id='zimpler'>Zimpler</h3>
<aside class="notice" >
Zimpler is a Swedish payment method
</aside>

<blockquote>
<p>Request</p>
</blockquote>

<pre class="highlight php tab-php"><code>This request is not implemented yet
</code></pre>

<pre class="highlight java tab-java"><code><span class="n">This</span> <span class="n">request</span> <span class="n">is</span> <span class="n">not</span> <span class="n">implemented</span> <span class="n">yet</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>curl https://username:password@gate.emerchantpay.net/process/TERMINAL-TOKEN <span class="se">\</span>
   -H <span class="s2">"Content-Type: text/xml"</span> <span class="se">\</span>
   -d <span class="s1">'
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;zimpler&lt;/transaction_type&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;usage&gt;40208 concert tickets&lt;/usage&gt;
  &lt;remote_ip&gt;245.253.2.12&lt;/remote_ip&gt;
  &lt;return_success_url&gt;http://www.example.com/success&lt;/return_success_url&gt;
  &lt;return_failure_url&gt;http://www.example.com/failure&lt;/return_failure_url&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;SEK&lt;/currency&gt;
  &lt;customer_email&gt;travis@example.com&lt;/customer_email&gt;
  &lt;billing_address&gt;
    &lt;first_name&gt;Barney&lt;/first_name&gt;
    &lt;last_name&gt;Rubble&lt;/last_name&gt;
    &lt;address1&gt;14, Nerazdelni str&lt;/address1&gt;
    &lt;zip_code&gt;1407&lt;/zip_code&gt;
    &lt;city&gt;Stockholm&lt;/city&gt;
    &lt;country&gt;SE&lt;/country&gt;
  &lt;/billing_address&gt;
  &lt;risk_params&gt;
    &lt;user_id&gt;123456&lt;/user_id&gt;
  &lt;/risk_params&gt;
&lt;/payment_transaction&gt;'</span>
</code></pre>

<p><strong>Request Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>required</td>
<td>string(255)</td>
<td>The transaction type: <strong>zimpler</strong></td>
</tr>
<tr>
<td>transaction_id</td>
<td>required</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>usage</td>
<td>optional</td>
<td>string(255)</td>
<td>Description of the transaction for later use</td>
</tr>
<tr>
<td>remote_ip</td>
<td>required*</td>
<td>IPv4 address</td>
<td>IPv4 address of customer</td>
</tr>
<tr>
<td>return_success_url</td>
<td>required</td>
<td>url</td>
<td>URL where customer is sent to after successful payment</td>
</tr>
<tr>
<td>return_failure_url</td>
<td>required</td>
<td>url</td>
<td>URL where customer is sent to after unsuccessful payment</td>
</tr>
<tr>
<td>amount</td>
<td>required</td>
<td>integer &gt; 0</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>required</td>
<td>string(3)</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>customer_email</td>
<td>required</td>
<td>e-mail address</td>
<td>Must contain valid e-mail of customer</td>
</tr>
<tr>
<td>customer_phone</td>
<td>optional</td>
<td>string(32)</td>
<td>Must be 6, 7 or 8 digits Swedish or Finnish valid mobile number(either with or without international prefix +46, +358 or 0).</td>
</tr>
<tr>
<td><strong>billing_address</strong></td>
<td>required</td>
<td></td>
<td>See <a href="#required-vs-optional-api-params">Required vs Optional API params</a> for details</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;first_name</td>
<td>required</td>
<td>string(255)</td>
<td>Customer first name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;last_name</td>
<td>required</td>
<td>string(255)</td>
<td>Customer last name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address1</td>
<td>required*</td>
<td>string(255)</td>
<td>Primary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address2</td>
<td>required*</td>
<td>string(255)</td>
<td>Secondary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;zip_code</td>
<td>required*</td>
<td>string</td>
<td>ZIP code</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;city</td>
<td>required*</td>
<td>string(255)</td>
<td>City</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;state</td>
<td>required*</td>
<td>string(2)</td>
<td>State code in <a href="https://en.wikipedia.org/wiki/ISO_3166-2">ISO 3166-2</a>, required for USA and Canada</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;country</td>
<td>required</td>
<td>string(2)</td>
<td>Country code in <a href="https://www.iso.org/iso-3166-country-codes.html">ISO 3166</a></td>
</tr>
<tr>
<td><strong>shipping_address</strong></td>
<td>optional</td>
<td></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;first_name</td>
<td>optional</td>
<td>string(255)</td>
<td>Customer first name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;last_name</td>
<td>optional</td>
<td>string(255)</td>
<td>Customer last name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address1</td>
<td>optional</td>
<td>string(255)</td>
<td>Primary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address2</td>
<td>optional</td>
<td>string(255)</td>
<td>Secondary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;zip_code</td>
<td>optional</td>
<td>string</td>
<td>ZIP code</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;city</td>
<td>optional</td>
<td>string(255)</td>
<td>City</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;state</td>
<td>optional</td>
<td>string(2)</td>
<td>State code in <a href="https://en.wikipedia.org/wiki/ISO_3166-2">ISO 3166-2</a>, required for USA and Canada</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;country</td>
<td>optional</td>
<td>string(2)</td>
<td>Country code in <a href="https://www.iso.org/iso-3166-country-codes.html">ISO 3166</a></td>
</tr>
</tbody></table>

<p><code>required* = conditionally required</code></p>

<p><strong>Supported currencies and countries:</strong></p>

<table><thead>
<tr>
<th>Currency code</th>
<th>Country code</th>
</tr>
</thead><tbody>
<tr>
<td>EUR</td>
<td>FI</td>
</tr>
<tr>
<td>SEK</td>
<td>SE</td>
</tr>
</tbody></table>

<blockquote>
<p>Successful Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>This request is not implemented yet
</code></pre>

<pre class="highlight java tab-java"><code><span class="n">This</span> <span class="n">request</span> <span class="n">is</span> <span class="n">not</span> <span class="n">implemented</span> <span class="n">yet</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;zimpler&lt;/transaction_type&gt;
  &lt;status&gt;pending_async&lt;/status&gt;
  &lt;mode&gt;live&lt;/mode&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;technical_message&gt;Transaction successful!&lt;/technical_message&gt;
  &lt;message&gt;Transaction successful!&lt;/message&gt;
  &lt;redirect_url&gt;https://gate.emerchantpay.net/redirect/to_acquirer/649e1ff35c61&lt;/redirect_url&gt;
  &lt;timestamp&gt;2019-03-14T12:05:57Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;SEK&lt;/currency&gt;
  &lt;sent_to_acquirer&gt;true&lt;/sent_to_acquirer&gt;
&lt;/payment_transaction&gt;
</code></pre>

<p><strong>Successful Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>The transaction type</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>transaction_id</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>unique_id</td>
<td>string(32)</td>
<td>Unique id defined by gate (must later be used if capturing, voiding or refunding a transaction)</td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
<tr>
<td>message</td>
<td>string(255)</td>
<td>Human readable error message which can be displayed to users.</td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>redirect_url</td>
<td>url</td>
<td>URL where user has to be redirected to complete payment process. It is available for asynchronous mode</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when the transaction was processed in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Combined date and time</a> e.g. 2007-08- 30T17:46:11Z</td>
</tr>
<tr>
<td>descriptor</td>
<td>string</td>
<td>Static descriptor MID info as configured on the gateway</td>
</tr>
<tr>
<td>amount</td>
<td>integer</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>sent_to_acquirer</td>
<td>string</td>
<td>&quot;true&quot; or &quot;false&quot;</td>
</tr>
</tbody></table>

<blockquote>
<p>Error Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>This request is not implemented yet
</code></pre>

<pre class="highlight java tab-java"><code><span class="n">This</span> <span class="n">request</span> <span class="n">is</span> <span class="n">not</span> <span class="n">implemented</span> <span class="n">yet</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;zimpler&lt;/transaction_type&gt;
  &lt;status&gt;error&lt;/status&gt;
  &lt;mode&gt;live&lt;/mode&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;code&gt;110&lt;/code&gt;
  &lt;message&gt;Something went wrong, please contact support!&lt;/message&gt;
  &lt;timestamp&gt;2019-03-14T12:05:57Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;SEK&lt;/currency&gt;
  &lt;sent_to_acquirer&gt;true&lt;/sent_to_acquirer&gt;
&lt;/payment_transaction&gt;
</code></pre>

<p><strong>Error Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>The transaction type</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>transaction_id</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>unique_id</td>
<td>string(32)</td>
<td>Unique id defined by gate (must later be used if capturing, voiding or refunding a transaction)</td>
</tr>
<tr>
<td>code</td>
<td>integer</td>
<td>Error code according to <a href="#error-code-table">Error code table</a></td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
<tr>
<td>message</td>
<td>string(255)</td>
<td>Human readable error message which can be displayed to users.</td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when the transaction was processed in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Combined date and time</a> e.g. 2007-08- 30T17:46:11Z</td>
</tr>
<tr>
<td>descriptor</td>
<td>string</td>
<td>Static descriptor MID info as configured on the gateway</td>
</tr>
<tr>
<td>amount</td>
<td>integer</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>sent_to_acquirer</td>
<td>string</td>
<td>&quot;true&quot; or &quot;false&quot;</td>
</tr>
</tbody></table>
<h2 id='vouchers'>Vouchers</h2><h3 id='astropay-card'>Astropay Card</h3>
<aside class="notice" >
Astropay Card is the most popular virtual pre-paid card for making deposits and withdrawals. It is accepted at hundreds of online sites all around the globe. It is the preferred option by users because of its instantaneity, flexibility, confidentiality and safety.
</aside>

<blockquote>
<p>Request</p>
</blockquote>

<pre class="highlight php tab-php"><code>This request is not implemented yet
</code></pre>

<pre class="highlight java tab-java"><code><span class="n">This</span> <span class="n">request</span> <span class="n">is</span> <span class="n">not</span> <span class="n">implemented</span> <span class="n">yet</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>curl https://username:password@gate.emerchantpay.net/process/TERMINAL-TOKEN <span class="se">\</span>
   -H <span class="s2">"Content-Type: text/xml"</span> <span class="se">\</span>
   -d <span class="s1">'
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;astropay_card&lt;/transaction_type&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;usage&gt;40208 concert tickets&lt;/usage&gt;
  &lt;remote_ip&gt;245.253.2.12&lt;/remote_ip&gt;
  &lt;return_success_url&gt;http://www.example.com/success&lt;/return_success_url&gt;
  &lt;return_failure_url&gt;http://www.example.com/failure&lt;/return_failure_url&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
  &lt;consumer_reference&gt;barney_rubble&lt;/consumer_reference&gt;
  &lt;billing_address&gt;
    &lt;first_name&gt;Barney&lt;/first_name&gt;
    &lt;last_name&gt;Rubble&lt;/last_name&gt;
    &lt;address1&gt;14, Nerazdelni str&lt;/address1&gt;
    &lt;zip_code&gt;1407&lt;/zip_code&gt;
    &lt;city&gt;Sidney&lt;/city&gt;
    &lt;country&gt;AR&lt;/country&gt;
  &lt;/billing_address&gt;
&lt;/payment_transaction&gt;'</span>
</code></pre>

<p><strong>Request Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>required</td>
<td>string(255)</td>
<td>The transaction type: <strong>astropay_card</strong></td>
</tr>
<tr>
<td>transaction_id</td>
<td>required</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>usage</td>
<td>optional</td>
<td>string(255)</td>
<td>Description of the transaction for later use</td>
</tr>
<tr>
<td>remote_ip</td>
<td>required*</td>
<td>IPv4 address</td>
<td>IPv4 address of customer</td>
</tr>
<tr>
<td>return_success_url</td>
<td>required</td>
<td>url</td>
<td>URL where customer is sent to after successful payment</td>
</tr>
<tr>
<td>return_failure_url</td>
<td>required</td>
<td>url</td>
<td>URL where customer is sent to after unsuccessful payment</td>
</tr>
<tr>
<td>amount</td>
<td>required</td>
<td>integer &gt; 0</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>required</td>
<td>string(3)</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>consumer_reference</td>
<td>required</td>
<td>string(20)</td>
<td>Consumer reference is a unique consumer identifier</td>
</tr>
<tr>
<td><strong>billing_address</strong></td>
<td>required</td>
<td></td>
<td>See <a href="#required-vs-optional-api-params">Required vs Optional API params</a> for details</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;first_name</td>
<td>required*</td>
<td>string(255)</td>
<td>Customer first name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;last_name</td>
<td>required*</td>
<td>string(255)</td>
<td>Customer last name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address1</td>
<td>required*</td>
<td>string(255)</td>
<td>Primary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address2</td>
<td>required*</td>
<td>string(255)</td>
<td>Secondary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;zip_code</td>
<td>required*</td>
<td>string</td>
<td>ZIP code</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;city</td>
<td>required*</td>
<td>string(255)</td>
<td>City</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;state</td>
<td>required*</td>
<td>string(2)</td>
<td>State code in <a href="https://en.wikipedia.org/wiki/ISO_3166-2">ISO 3166-2</a>, required for USA and Canada</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;country</td>
<td>required</td>
<td>string(2)</td>
<td>Country code in <a href="https://www.iso.org/iso-3166-country-codes.html">ISO 3166</a></td>
</tr>
<tr>
<td><strong>shipping_address</strong></td>
<td>optional</td>
<td></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;first_name</td>
<td>optional</td>
<td>string(255)</td>
<td>Customer first name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;last_name</td>
<td>optional</td>
<td>string(255)</td>
<td>Customer last name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address1</td>
<td>optional</td>
<td>string(255)</td>
<td>Primary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address2</td>
<td>optional</td>
<td>string(255)</td>
<td>Secondary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;zip_code</td>
<td>optional</td>
<td>string</td>
<td>ZIP code</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;city</td>
<td>optional</td>
<td>string(255)</td>
<td>City</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;state</td>
<td>optional</td>
<td>string(2)</td>
<td>State code in <a href="https://en.wikipedia.org/wiki/ISO_3166-2">ISO 3166-2</a>, required for USA and Canada</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;country</td>
<td>optional</td>
<td>string(2)</td>
<td>Country code in <a href="https://www.iso.org/iso-3166-country-codes.html">ISO 3166</a></td>
</tr>
</tbody></table>

<p><code>required* = conditionally required</code></p>

<p><strong>Supported countries:</strong></p>

<table><thead>
<tr>
<th>Country</th>
</tr>
</thead><tbody>
<tr>
<td>AR</td>
</tr>
<tr>
<td>BR</td>
</tr>
<tr>
<td>CL</td>
</tr>
<tr>
<td>CO</td>
</tr>
<tr>
<td>CR</td>
</tr>
<tr>
<td>MX</td>
</tr>
<tr>
<td>PE</td>
</tr>
<tr>
<td>UY</td>
</tr>
<tr>
<td>VE</td>
</tr>
</tbody></table>

<blockquote>
<p>Successful Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>This request is not implemented yet
</code></pre>

<pre class="highlight java tab-java"><code><span class="n">This</span> <span class="n">request</span> <span class="n">is</span> <span class="n">not</span> <span class="n">implemented</span> <span class="n">yet</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;astropay_card&lt;/transaction_type&gt;
  &lt;status&gt;pending_async&lt;/status&gt;
  &lt;mode&gt;live&lt;/mode&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;technical_message&gt;Transaction successful!&lt;/technical_message&gt;
  &lt;message&gt;Transaction successful!&lt;/message&gt;
  &lt;redirect_url&gt;https://gate.emerchantpay.net/redirect/to_acquirer/649e1ff35c61&lt;/redirect_url&gt;
  &lt;timestamp&gt;2019-03-14T12:05:57Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
  &lt;sent_to_acquirer&gt;true&lt;/sent_to_acquirer&gt;
&lt;/payment_transaction&gt;
</code></pre>

<p><strong>Successful Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>The transaction type</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>transaction_id</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>unique_id</td>
<td>string(32)</td>
<td>Unique id defined by gate (must later be used if capturing, voiding or refunding a transaction)</td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
<tr>
<td>message</td>
<td>string(255)</td>
<td>Human readable error message which can be displayed to users.</td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>redirect_url</td>
<td>url</td>
<td>URL where user has to be redirected to complete payment process. It is available for asynchronous mode</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when the transaction was processed in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Combined date and time</a> e.g. 2007-08- 30T17:46:11Z</td>
</tr>
<tr>
<td>descriptor</td>
<td>string</td>
<td>Static descriptor MID info as configured on the gateway</td>
</tr>
<tr>
<td>amount</td>
<td>integer</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>sent_to_acquirer</td>
<td>string</td>
<td>&quot;true&quot; or &quot;false&quot;</td>
</tr>
</tbody></table>

<blockquote>
<p>Error Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>This request is not implemented yet
</code></pre>

<pre class="highlight java tab-java"><code><span class="n">This</span> <span class="n">request</span> <span class="n">is</span> <span class="n">not</span> <span class="n">implemented</span> <span class="n">yet</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;astropay_card&lt;/transaction_type&gt;
  &lt;status&gt;error&lt;/status&gt;
  &lt;mode&gt;live&lt;/mode&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;code&gt;110&lt;/code&gt;
  &lt;message&gt;Something went wrong, please contact support!&lt;/message&gt;
  &lt;timestamp&gt;2019-03-14T12:05:57Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
  &lt;sent_to_acquirer&gt;true&lt;/sent_to_acquirer&gt;
&lt;/payment_transaction&gt;
</code></pre>

<p><strong>Error Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>The transaction type</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>transaction_id</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>unique_id</td>
<td>string(32)</td>
<td>Unique id defined by gate (must later be used if capturing, voiding or refunding a transaction)</td>
</tr>
<tr>
<td>code</td>
<td>integer</td>
<td>Error code according to <a href="#error-code-table">Error code table</a></td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
<tr>
<td>message</td>
<td>string(255)</td>
<td>Human readable error message which can be displayed to users.</td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when the transaction was processed in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Combined date and time</a> e.g. 2007-08- 30T17:46:11Z</td>
</tr>
<tr>
<td>descriptor</td>
<td>string</td>
<td>Static descriptor MID info as configured on the gateway</td>
</tr>
<tr>
<td>amount</td>
<td>integer</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>sent_to_acquirer</td>
<td>string</td>
<td>&quot;true&quot; or &quot;false&quot;</td>
</tr>
</tbody></table>
<h3 id='cashu'>CashU</h3>
<aside class="notice" >
CashU transactions are only asynchronous. After a successful validation of transaction parameters transaction status is set to pending async the user is redirected to CashU authentication page where he enters additional information to finish the payment. When the payment reached a final state Genesis gateway sends notification to merchant on the configured url into its account.
</aside>

<blockquote>
<p>Request</p>
</blockquote>

<pre class="highlight php tab-php"><code><span class="cp">&lt;?php</span>

<span class="c1">// Load the pre-configured ini file...
</span><span class="nx">\Genesis\Config</span><span class="o">::</span><span class="na">loadSettings</span><span class="p">(</span><span class="s1">'/path/to/config.ini'</span><span class="p">);</span>

<span class="nv">$genesis</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Genesis</span><span class="p">(</span><span class="s1">'Financial\Alternatives\CashU'</span><span class="p">);</span>
<span class="nv">$request</span> <span class="o">=</span> <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">request</span><span class="p">();</span>

<span class="nv">$request</span>
  <span class="o">-&gt;</span><span class="na">setTransactionId</span><span class="p">(</span><span class="s1">'43671'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setUsage</span><span class="p">(</span><span class="s1">'40208 concert tickets'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setRemoteIp</span><span class="p">(</span><span class="s1">'245.253.2.12'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setReturnSuccessUrl</span><span class="p">(</span><span class="s1">'http://www.example.com/success'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setReturnFailureUrl</span><span class="p">(</span><span class="s1">'http://www.example.com/failure'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setAmount</span><span class="p">(</span><span class="s1">'100'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCurrency</span><span class="p">(</span><span class="s1">'EUR'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCustomerEmail</span><span class="p">(</span><span class="s1">'travis@example.com'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCustomerPhone</span><span class="p">(</span><span class="s1">'+1987987987987'</span><span class="p">)</span>


  <span class="c1">// Billing Address
</span>  <span class="o">-&gt;</span><span class="na">setBillingFirstName</span><span class="p">(</span><span class="s1">'Travis'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingLastName</span><span class="p">(</span><span class="s1">'Pastrana'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingAddress1</span><span class="p">(</span><span class="s1">'Muster Str. 12'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingZipCode</span><span class="p">(</span><span class="s1">'10178'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingCity</span><span class="p">(</span><span class="s1">'Los Angeles'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingState</span><span class="p">(</span><span class="s1">'CA'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingCountry</span><span class="p">(</span><span class="s1">'US'</span><span class="p">);</span>

<span class="k">try</span> <span class="p">{</span>
    <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">execute</span><span class="p">();</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">response</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">getResponseObject</span><span class="p">();</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">\Exception</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$e</span><span class="o">-&gt;</span><span class="na">getMessage</span><span class="p">();</span>
<span class="p">}</span>
</code></pre>

<pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.GenesisClient</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.TransactionResult</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.constants.Endpoints</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.constants.Environments</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.requests.financial.apm.CashURequest</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.model.Transaction</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Configuration</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Country</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Currency</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.math.BigDecimal</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.MalformedURLException</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.URL</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">GenesisExample</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">MalformedURLException</span> <span class="o">{</span>

    <span class="c1">// Create configuration</span>
    <span class="n">Configuration</span> <span class="n">configuration</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Configuration</span><span class="o">(</span><span class="n">Environments</span><span class="o">.</span><span class="na">STAGING</span><span class="o">,</span> <span class="n">Endpoints</span><span class="o">.</span><span class="na">EMERCHANTPAY</span><span class="o">);</span>

    <span class="n">configuration</span><span class="o">.</span><span class="na">setUsername</span><span class="o">(</span><span class="s">"SET_YOUR_USERNAME"</span><span class="o">);</span>
    <span class="n">configuration</span><span class="o">.</span><span class="na">setPassword</span><span class="o">(</span><span class="s">"SET_YOUR_PASSWORD"</span><span class="o">);</span>
    <span class="n">configuration</span><span class="o">.</span><span class="na">setToken</span><span class="o">(</span><span class="s">"SET_YOUR_TOKEN"</span><span class="o">);</span>

    <span class="n">CashURequest</span> <span class="n">request</span> <span class="o">=</span> <span class="k">new</span> <span class="n">CashURequest</span><span class="o">();</span>

    <span class="n">request</span><span class="o">.</span><span class="na">setTransactionId</span><span class="o">(</span><span class="s">"43671"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setUsage</span><span class="o">(</span><span class="s">"40208 concert tickets"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setRemoteIp</span><span class="o">(</span><span class="s">"245.253.2.12"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setReturnSuccessUrl</span><span class="o">(</span><span class="k">new</span> <span class="n">URL</span><span class="o">(</span><span class="s">"http://www.example.com/success"</span><span class="o">));</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setReturnFailureUrl</span><span class="o">(</span><span class="k">new</span> <span class="n">URL</span><span class="o">(</span><span class="s">"http://www.example.com/failure"</span><span class="o">));</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setAmount</span><span class="o">(</span><span class="k">new</span> <span class="n">BigDecimal</span><span class="o">(</span><span class="mi">100</span><span class="o">));</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCurrency</span><span class="o">(</span><span class="s">"EUR"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCustomerEmail</span><span class="o">(</span><span class="s">"travis@example.com"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCustomerPhone</span><span class="o">(</span><span class="s">"+1987987987987"</span><span class="o">);</span>


    <span class="c1">// Billing Address</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingFirstname</span><span class="o">(</span><span class="s">"Travis"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingLastname</span><span class="o">(</span><span class="s">"Pastrana"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingPrimaryAddress</span><span class="o">(</span><span class="s">"Muster Str. 12"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingZipCode</span><span class="o">(</span><span class="s">"10178"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingCity</span><span class="o">(</span><span class="s">"Los Angeles"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingState</span><span class="o">(</span><span class="s">"CA"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingCountry</span><span class="o">(</span><span class="s">"US"</span><span class="o">);</span>

    <span class="n">GenesisClient</span> <span class="n">client</span> <span class="o">=</span> <span class="k">new</span> <span class="n">GenesisClient</span><span class="o">(</span><span class="n">configuration</span><span class="o">,</span> <span class="n">request</span><span class="o">);</span>
    <span class="n">client</span><span class="o">.</span><span class="na">execute</span><span class="o">();</span>

    <span class="c1">// Parse Payment result</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">client</span><span class="o">.</span><span class="na">getResponse</span><span class="o">());</span>

  <span class="o">}</span>
<span class="o">}</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="kd">var</span> <span class="nx">genesis</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'genesis.js/lib/genesis.js'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">transaction</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">genesis</span><span class="p">.</span><span class="nx">transaction</span><span class="p">();</span>

<span class="kd">var</span> <span class="nx">failure</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">reason</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">reason</span><span class="p">);</span>
<span class="p">};</span>

<span class="kd">var</span> <span class="nx">success</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>

<span class="nx">transaction</span><span class="p">.</span><span class="nx">cashu</span><span class="p">(</span>
  <span class="p">{</span>
    <span class="s2">"transaction_id"</span><span class="p">:</span> <span class="s2">"43671"</span><span class="p">,</span>
    <span class="s2">"usage"</span><span class="p">:</span> <span class="s2">"40208 concert tickets"</span><span class="p">,</span>
    <span class="s2">"remote_ip"</span><span class="p">:</span> <span class="s2">"245.253.2.12"</span><span class="p">,</span>
    <span class="s2">"return_success_url"</span><span class="p">:</span> <span class="s2">"http://www.example.com/success"</span><span class="p">,</span>
    <span class="s2">"return_failure_url"</span><span class="p">:</span> <span class="s2">"http://www.example.com/failure"</span><span class="p">,</span>
    <span class="s2">"amount"</span><span class="p">:</span> <span class="s2">"100"</span><span class="p">,</span>
    <span class="s2">"currency"</span><span class="p">:</span> <span class="s2">"EUR"</span><span class="p">,</span>
    <span class="s2">"customer_email"</span><span class="p">:</span> <span class="s2">"travis@example.com"</span><span class="p">,</span>
    <span class="s2">"customer_phone"</span><span class="p">:</span> <span class="s2">"+1987987987987"</span><span class="p">,</span>
    <span class="s2">"billing_address"</span><span class="p">:</span> <span class="p">{</span>
      <span class="s2">"first_name"</span><span class="p">:</span> <span class="s2">"Travis"</span><span class="p">,</span>
      <span class="s2">"last_name"</span><span class="p">:</span> <span class="s2">"Pastrana"</span><span class="p">,</span>
      <span class="s2">"address1"</span><span class="p">:</span> <span class="s2">"Muster Str. 12"</span><span class="p">,</span>
      <span class="s2">"zip_code"</span><span class="p">:</span> <span class="s2">"10178"</span><span class="p">,</span>
      <span class="s2">"city"</span><span class="p">:</span> <span class="s2">"Los Angeles"</span><span class="p">,</span>
      <span class="s2">"state"</span><span class="p">:</span> <span class="s2">"CA"</span><span class="p">,</span>
      <span class="s2">"country"</span><span class="p">:</span> <span class="s2">"US"</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">).</span><span class="nx">send</span><span class="p">()</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">success</span><span class="p">)</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">failure</span><span class="p">);</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>curl https://username:password@gate.emerchantpay.net/process/TERMINAL-TOKEN <span class="se">\</span>
   -H <span class="s2">"Content-Type: text/xml"</span> <span class="se">\</span>
   -d <span class="s1">'
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;cashu&lt;/transaction_type&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;usage&gt;40208 concert tickets&lt;/usage&gt;
  &lt;remote_ip&gt;245.253.2.12&lt;/remote_ip&gt;
  &lt;return_success_url&gt;http://www.example.com/success&lt;/return_success_url&gt;
  &lt;return_failure_url&gt;http://www.example.com/failure&lt;/return_failure_url&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;EUR&lt;/currency&gt;
  &lt;customer_email&gt;travis@example.com&lt;/customer_email&gt;
  &lt;customer_phone&gt;+1987987987987&lt;/customer_phone&gt;
  &lt;billing_address&gt;
    &lt;first_name&gt;Travis&lt;/first_name&gt;
    &lt;last_name&gt;Pastrana&lt;/last_name&gt;
    &lt;address1&gt;Muster Str. 12&lt;/address1&gt;
    &lt;zip_code&gt;10178&lt;/zip_code&gt;
    &lt;city&gt;Los Angeles&lt;/city&gt;
    &lt;state&gt;CA&lt;/state&gt;
    &lt;country&gt;US&lt;/country&gt;
  &lt;/billing_address&gt;
&lt;/payment_transaction&gt;'</span>
</code></pre>

<p><strong>Request Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>required</td>
<td>string(255)</td>
<td>The transaction type: <strong>cashu</strong></td>
</tr>
<tr>
<td>transaction_id</td>
<td>required</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>usage</td>
<td>optional</td>
<td>string(255)</td>
<td>Description of the transaction for later use</td>
</tr>
<tr>
<td>remote_ip</td>
<td>required</td>
<td>IPv4 address</td>
<td>IPv4 address of customer</td>
</tr>
<tr>
<td>return_success_url</td>
<td>required</td>
<td>url</td>
<td>URL where customer is sent to after successful payment</td>
</tr>
<tr>
<td>return_failure_url</td>
<td>required</td>
<td>url</td>
<td>URL where customer is sent to after unsuccessful payment</td>
</tr>
<tr>
<td>amount</td>
<td>required</td>
<td>integer &gt; 0</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>required</td>
<td>string(3)</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>customer_email</td>
<td>required</td>
<td>e-mail address</td>
<td>Must contain valid e-mail of customer</td>
</tr>
<tr>
<td>customer_phone</td>
<td>required*</td>
<td>string(32)</td>
<td>Must contain valid phone number of customer</td>
</tr>
<tr>
<td><strong>billing_address</strong></td>
<td>required</td>
<td></td>
<td>See <a href="#required-vs-optional-api-params">Required vs Optional API params</a> for details</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;first_name</td>
<td>required*</td>
<td>string(255)</td>
<td>Customer first name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;last_name</td>
<td>required*</td>
<td>string(255)</td>
<td>Customer last name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address1</td>
<td>required*</td>
<td>string(255)</td>
<td>Primary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address2</td>
<td>required*</td>
<td>string(255)</td>
<td>Secondary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;zip_code</td>
<td>required*</td>
<td>string</td>
<td>ZIP code</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;city</td>
<td>required*</td>
<td>string(255)</td>
<td>City</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;state</td>
<td>required*</td>
<td>string(2)</td>
<td>State code in <a href="https://en.wikipedia.org/wiki/ISO_3166-2">ISO 3166-2</a>, required for USA and Canada</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;country</td>
<td>required</td>
<td>string(2)</td>
<td>Country code in <a href="https://www.iso.org/iso-3166-country-codes.html">ISO 3166</a></td>
</tr>
<tr>
<td><strong>shipping_address</strong></td>
<td>optional</td>
<td></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;first_name</td>
<td>optional</td>
<td>string(255)</td>
<td>Customer first name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;last_name</td>
<td>optional</td>
<td>string(255)</td>
<td>Customer last name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address1</td>
<td>optional</td>
<td>string(255)</td>
<td>Primary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address2</td>
<td>optional</td>
<td>string(255)</td>
<td>Secondary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;zip_code</td>
<td>optional</td>
<td>string</td>
<td>ZIP code</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;city</td>
<td>optional</td>
<td>string(255)</td>
<td>City</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;state</td>
<td>optional</td>
<td>string(2)</td>
<td>State code in <a href="https://en.wikipedia.org/wiki/ISO_3166-2">ISO 3166-2</a>, required for USA and Canada</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;country</td>
<td>optional</td>
<td>string(2)</td>
<td>Country code in <a href="https://www.iso.org/iso-3166-country-codes.html">ISO 3166</a></td>
</tr>
</tbody></table>

<p><code>required* = conditionally required</code></p>

<p><strong>Supported countries</strong></p>

<table><thead>
<tr>
<th>Country name</th>
<th>Country code</th>
</tr>
</thead><tbody>
<tr>
<td>Algeria</td>
<td>DZ</td>
</tr>
<tr>
<td>Bahrain</td>
<td>BH</td>
</tr>
<tr>
<td>Egypt</td>
<td>EG</td>
</tr>
<tr>
<td>Gambia</td>
<td>GM</td>
</tr>
<tr>
<td>Ghana</td>
<td>GH</td>
</tr>
<tr>
<td>India</td>
<td>IN</td>
</tr>
<tr>
<td>Iran</td>
<td>IR</td>
</tr>
<tr>
<td>Iraq</td>
<td>IQ</td>
</tr>
<tr>
<td>Israel</td>
<td>IL</td>
</tr>
<tr>
<td>Jordan</td>
<td>JO</td>
</tr>
<tr>
<td>Kenya</td>
<td>KE</td>
</tr>
<tr>
<td>Korea</td>
<td>KP</td>
</tr>
<tr>
<td>Kuwait</td>
<td>KW</td>
</tr>
<tr>
<td>Lebanon</td>
<td>LB</td>
</tr>
<tr>
<td>Libya</td>
<td>LY</td>
</tr>
<tr>
<td>Malaysia</td>
<td>MY</td>
</tr>
<tr>
<td>Mauritania</td>
<td>MR</td>
</tr>
<tr>
<td>Morocco</td>
<td>MA</td>
</tr>
<tr>
<td>Nigeria</td>
<td>NG</td>
</tr>
<tr>
<td>Oman</td>
<td>OM</td>
</tr>
<tr>
<td>Pakistan</td>
<td>PK</td>
</tr>
<tr>
<td>Palestine</td>
<td>PS</td>
</tr>
<tr>
<td>Qatar</td>
<td>QA</td>
</tr>
<tr>
<td>Saudi Arabia</td>
<td>SA</td>
</tr>
<tr>
<td>Sierra Leone</td>
<td>SL</td>
</tr>
<tr>
<td>Sudan</td>
<td>SD</td>
</tr>
<tr>
<td>Syria</td>
<td>SY</td>
</tr>
<tr>
<td>Tanzania</td>
<td>TZ</td>
</tr>
<tr>
<td>Tunisia</td>
<td>TN</td>
</tr>
<tr>
<td>Turkey</td>
<td>TR</td>
</tr>
<tr>
<td>United Arab Emirates</td>
<td>AE</td>
</tr>
<tr>
<td>United States</td>
<td>US</td>
</tr>
<tr>
<td>Yemen</td>
<td>YE</td>
</tr>
</tbody></table>

<p><strong>Supported currencies</strong></p>

<table><thead>
<tr>
<th>Currency name</th>
<th>Currency code</th>
</tr>
</thead><tbody>
<tr>
<td>Algerian Dinar</td>
<td>DZD</td>
</tr>
<tr>
<td>AmericanDollar</td>
<td>USD</td>
</tr>
<tr>
<td>EgyptianPound</td>
<td>EGP</td>
</tr>
<tr>
<td>Euro</td>
<td>EUR</td>
</tr>
<tr>
<td>JordanianDinar</td>
<td>JOD</td>
</tr>
<tr>
<td>LebanesePound</td>
<td>LBP</td>
</tr>
<tr>
<td>MoroccanDirham</td>
<td>MAD</td>
</tr>
<tr>
<td>Qatar Riyal</td>
<td>QAR</td>
</tr>
<tr>
<td>Saudi Riyal</td>
<td>SAR</td>
</tr>
<tr>
<td>Turkish Lira</td>
<td>TRY</td>
</tr>
<tr>
<td>UAE Dirham</td>
<td>AED</td>
</tr>
</tbody></table>

<blockquote>
<p>Successful Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>stdClass Object
(
    [transaction_type] =&gt; cashu
    [status] =&gt; approved
    [mode] =&gt; live
    [transaction_id] =&gt; 43671
    [unique_id] =&gt; 44177a21403427eb96664a6d7e5d5d48
    [technical_message] =&gt; Transaction successful!
    [message] =&gt; Transaction successful!
    [redirect_url] =&gt; https://gate.emerchantpay.net/redirect/to_acquirer/649e1ff35c61
    [timestamp] =&gt; DateTime Object
        (
            [date] =&gt; 2019-03-14 12:05:57.000000
            [timezone_type] =&gt; 2
            [timezone] =&gt; Z
        )
    [descriptor] =&gt; Descriptor one
    [amount] =&gt; 100
    [currency] =&gt; EUR
    [sent_to_acquirer] =&gt; true
)
</code></pre>

<pre class="highlight java tab-java"><code><span class="o">&lt;</span><span class="n">payment_response</span> <span class="n">content</span><span class="o">=[</span>
    <span class="o">&lt;</span><span class="n">transaction_type</span> <span class="n">content</span><span class="o">=[</span><span class="n">cashu</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">status</span> <span class="n">content</span><span class="o">=[</span><span class="n">approved</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">mode</span> <span class="n">content</span><span class="o">=[</span><span class="n">live</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">transaction_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">43671</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">unique_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">44177</span><span class="n">a21403427eb96664a6d7e5d5d48</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">technical_message</span> <span class="n">content</span><span class="o">=[</span><span class="n">Transaction</span> <span class="n">successful</span><span class="o">!]&gt;</span>
    <span class="o">&lt;</span><span class="n">message</span> <span class="n">content</span><span class="o">=[</span><span class="n">Transaction</span> <span class="n">successful</span><span class="o">!]&gt;</span>
    <span class="o">&lt;</span><span class="n">redirect_url</span> <span class="n">content</span><span class="o">=[</span><span class="nl">https:</span><span class="c1">//gate.emerchantpay.net/redirect/to_acquirer/649e1ff35c61]&gt;</span>
    <span class="o">&lt;</span><span class="n">timestamp</span> <span class="n">content</span><span class="o">=[</span><span class="mi">2019</span><span class="o">-</span><span class="mo">03</span><span class="o">-</span><span class="mi">14</span><span class="nl">T12:</span><span class="mo">05</span><span class="o">:</span><span class="mi">57</span><span class="n">Z</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">descriptor</span> <span class="n">content</span><span class="o">=[</span><span class="n">Descriptor</span> <span class="n">one</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">amount</span> <span class="n">content</span><span class="o">=[</span><span class="mi">100</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">currency</span> <span class="n">content</span><span class="o">=[</span><span class="n">EUR</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">sent_to_acquirer</span> <span class="n">content</span><span class="o">=[</span><span class="kc">true</span><span class="o">]&gt;</span>
<span class="o">]&gt;</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="p">{</span>
    <span class="nl">transaction_type</span><span class="p">:</span> <span class="s2">"cashu"</span><span class="p">,</span>
    <span class="nx">status</span><span class="p">:</span> <span class="s2">"approved"</span><span class="p">,</span>
    <span class="nx">mode</span><span class="p">:</span> <span class="s2">"live"</span><span class="p">,</span>
    <span class="nx">transaction_id</span><span class="p">:</span> <span class="s2">"43671"</span><span class="p">,</span>
    <span class="nx">unique_id</span><span class="p">:</span> <span class="s2">"44177a21403427eb96664a6d7e5d5d48"</span><span class="p">,</span>
    <span class="nx">technical_message</span><span class="p">:</span> <span class="s2">"Transaction successful!"</span><span class="p">,</span>
    <span class="nx">message</span><span class="p">:</span> <span class="s2">"Transaction successful!"</span><span class="p">,</span>
    <span class="nx">redirect_url</span><span class="p">:</span> <span class="s2">"https://gate.emerchantpay.net/redirect/to_acquirer/649e1ff35c61"</span><span class="p">,</span>
    <span class="nx">timestamp</span><span class="p">:</span> <span class="s2">"2019-03-14T12:05:57Z"</span><span class="p">,</span>
    <span class="nx">descriptor</span><span class="p">:</span> <span class="s2">"Descriptor one"</span><span class="p">,</span>
    <span class="nx">amount</span><span class="p">:</span> <span class="s2">"100"</span><span class="p">,</span>
    <span class="nx">currency</span><span class="p">:</span> <span class="s2">"EUR"</span><span class="p">,</span>
    <span class="nx">sent_to_acquirer</span><span class="p">:</span> <span class="s2">"true"</span><span class="p">,</span>
<span class="p">}</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;cashu&lt;/transaction_type&gt;
  &lt;status&gt;approved&lt;/status&gt;
  &lt;mode&gt;live&lt;/mode&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;technical_message&gt;Transaction successful!&lt;/technical_message&gt;
  &lt;message&gt;Transaction successful!&lt;/message&gt;
  &lt;redirect_url&gt;https://gate.emerchantpay.net/redirect/to_acquirer/649e1ff35c61&lt;/redirect_url&gt;
  &lt;timestamp&gt;2019-03-14T12:05:57Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;EUR&lt;/currency&gt;
  &lt;sent_to_acquirer&gt;true&lt;/sent_to_acquirer&gt;
&lt;/payment_transaction&gt;
</code></pre>

<p><strong>Successful Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>The transaction type</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>transaction_id</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>unique_id</td>
<td>string(32)</td>
<td>Unique id defined by gate (must later be used if capturing, voiding or refunding a transaction)</td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
<tr>
<td>message</td>
<td>string(255)</td>
<td>Human readable error message which can be displayed to users.</td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>redirect_url</td>
<td>url</td>
<td>URL where user has to be redirected to complete payment process. It is available for asynchronous mode</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when the transaction was processed in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Combined date and time</a> e.g. 2007-08- 30T17:46:11Z</td>
</tr>
<tr>
<td>descriptor</td>
<td>string</td>
<td>Static descriptor MID info as configured on the gateway</td>
</tr>
<tr>
<td>amount</td>
<td>integer</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>sent_to_acquirer</td>
<td>string</td>
<td>&quot;true&quot; or &quot;false&quot;</td>
</tr>
</tbody></table>

<blockquote>
<p>Error Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>stdClass Object
(
    [transaction_type] =&gt; cashu
    [status] =&gt; error
    [mode] =&gt; live
    [transaction_id] =&gt; 43671
    [unique_id] =&gt; 44177a21403427eb96664a6d7e5d5d48
    [code] =&gt; 110
    [message] =&gt; Something went wrong, please contact support!
    [timestamp] =&gt; DateTime Object
        (
            [date] =&gt; 2019-03-14 12:05:57.000000
            [timezone_type] =&gt; 2
            [timezone] =&gt; Z
        )
    [descriptor] =&gt; Descriptor one
    [amount] =&gt; 100
    [currency] =&gt; EUR
    [sent_to_acquirer] =&gt; true
)
</code></pre>

<pre class="highlight java tab-java"><code><span class="o">&lt;</span><span class="n">payment_response</span> <span class="n">content</span><span class="o">=[</span>
    <span class="o">&lt;</span><span class="n">transaction_type</span> <span class="n">content</span><span class="o">=[</span><span class="n">cashu</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">status</span> <span class="n">content</span><span class="o">=[</span><span class="n">error</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">mode</span> <span class="n">content</span><span class="o">=[</span><span class="n">live</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">transaction_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">43671</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">unique_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">44177</span><span class="n">a21403427eb96664a6d7e5d5d48</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">code</span> <span class="n">content</span><span class="o">=[</span><span class="mi">110</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">message</span> <span class="n">content</span><span class="o">=[</span><span class="n">Something</span> <span class="n">went</span> <span class="n">wrong</span><span class="o">,</span> <span class="n">please</span> <span class="n">contact</span> <span class="n">support</span><span class="o">!]&gt;</span>
    <span class="o">&lt;</span><span class="n">timestamp</span> <span class="n">content</span><span class="o">=[</span><span class="mi">2019</span><span class="o">-</span><span class="mo">03</span><span class="o">-</span><span class="mi">14</span><span class="nl">T12:</span><span class="mo">05</span><span class="o">:</span><span class="mi">57</span><span class="n">Z</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">descriptor</span> <span class="n">content</span><span class="o">=[</span><span class="n">Descriptor</span> <span class="n">one</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">amount</span> <span class="n">content</span><span class="o">=[</span><span class="mi">100</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">currency</span> <span class="n">content</span><span class="o">=[</span><span class="n">EUR</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">sent_to_acquirer</span> <span class="n">content</span><span class="o">=[</span><span class="kc">true</span><span class="o">]&gt;</span>
<span class="o">]&gt;</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="p">{</span>
    <span class="nl">transaction_type</span><span class="p">:</span> <span class="s2">"cashu"</span><span class="p">,</span>
    <span class="nx">status</span><span class="p">:</span> <span class="s2">"error"</span><span class="p">,</span>
    <span class="nx">mode</span><span class="p">:</span> <span class="s2">"live"</span><span class="p">,</span>
    <span class="nx">transaction_id</span><span class="p">:</span> <span class="s2">"43671"</span><span class="p">,</span>
    <span class="nx">unique_id</span><span class="p">:</span> <span class="s2">"44177a21403427eb96664a6d7e5d5d48"</span><span class="p">,</span>
    <span class="nx">code</span><span class="p">:</span> <span class="s2">"110"</span><span class="p">,</span>
    <span class="nx">message</span><span class="p">:</span> <span class="s2">"Something went wrong, please contact support!"</span><span class="p">,</span>
    <span class="nx">timestamp</span><span class="p">:</span> <span class="s2">"2019-03-14T12:05:57Z"</span><span class="p">,</span>
    <span class="nx">descriptor</span><span class="p">:</span> <span class="s2">"Descriptor one"</span><span class="p">,</span>
    <span class="nx">amount</span><span class="p">:</span> <span class="s2">"100"</span><span class="p">,</span>
    <span class="nx">currency</span><span class="p">:</span> <span class="s2">"EUR"</span><span class="p">,</span>
    <span class="nx">sent_to_acquirer</span><span class="p">:</span> <span class="s2">"true"</span><span class="p">,</span>
<span class="p">}</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;cashu&lt;/transaction_type&gt;
  &lt;status&gt;error&lt;/status&gt;
  &lt;mode&gt;live&lt;/mode&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;code&gt;110&lt;/code&gt;
  &lt;message&gt;Something went wrong, please contact support!&lt;/message&gt;
  &lt;timestamp&gt;2019-03-14T12:05:57Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;EUR&lt;/currency&gt;
  &lt;sent_to_acquirer&gt;true&lt;/sent_to_acquirer&gt;
&lt;/payment_transaction&gt;
</code></pre>

<p><strong>Error Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>The transaction type</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>transaction_id</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>unique_id</td>
<td>string(32)</td>
<td>Unique id defined by gate (must later be used if capturing, voiding or refunding a transaction)</td>
</tr>
<tr>
<td>code</td>
<td>integer</td>
<td>Error code according to <a href="#error-code-table">Error code table</a></td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
<tr>
<td>message</td>
<td>string(255)</td>
<td>Human readable error message which can be displayed to users.</td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when the transaction was processed in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Combined date and time</a> e.g. 2007-08- 30T17:46:11Z</td>
</tr>
<tr>
<td>descriptor</td>
<td>string</td>
<td>Static descriptor MID info as configured on the gateway</td>
</tr>
<tr>
<td>amount</td>
<td>integer</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>sent_to_acquirer</td>
<td>string</td>
<td>&quot;true&quot; or &quot;false&quot;</td>
</tr>
</tbody></table>
<h3 id='neosurf'>Neosurf</h3>
<aside class="notice">
Neosurf is a prepaid card (voucher) that is used for online shopping. The card is available in over
100,000 stores worldwide, where customers can buy the prepaid vouchers, denominated up to EUR
250.00 or its equivalent in other currencies.
</aside>

<blockquote>
<p>Request</p>
</blockquote>

<pre class="highlight php tab-php"><code>This request is not implemented yet
</code></pre>

<pre class="highlight java tab-java"><code><span class="n">This</span> <span class="n">request</span> <span class="n">is</span> <span class="n">not</span> <span class="n">implemented</span> <span class="n">yet</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>curl https://username:password@gate.emerchantpay.net/process/TERMINAL-TOKEN <span class="se">\</span>
   -H <span class="s2">"Content-Type: text/xml"</span> <span class="se">\</span>
   -d <span class="s1">'
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;neosurf&lt;/transaction_type&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;usage&gt;40208 concert tickets&lt;/usage&gt;
  &lt;remote_ip&gt;245.253.2.12&lt;/remote_ip&gt;
  &lt;return_success_url&gt;http://www.example.com/success&lt;/return_success_url&gt;
  &lt;return_failure_url&gt;http://www.example.com/failure&lt;/return_failure_url&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;EUR&lt;/currency&gt;
  &lt;voucher_number&gt;&lt;/voucher_number&gt;
  &lt;customer_email&gt;travis@example.com&lt;/customer_email&gt;
  &lt;customer_phone&gt;+1987987987987&lt;/customer_phone&gt;
  &lt;billing_address&gt;
    &lt;first_name&gt;Barney&lt;/first_name&gt;
    &lt;last_name&gt;Rubble&lt;/last_name&gt;
    &lt;address1&gt;23, Doestreet&lt;/address1&gt;
    &lt;zip_code&gt;11923&lt;/zip_code&gt;
    &lt;city&gt;New York City&lt;/city&gt;
    &lt;country&gt;DE&lt;/country&gt;
  &lt;/billing_address&gt;
&lt;/payment_transaction&gt;'</span>
</code></pre>

<p><strong>Request Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>required</td>
<td>string(255)</td>
<td>The transaction type: <strong>neosurf</strong></td>
</tr>
<tr>
<td>transaction_id</td>
<td>required</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>usage</td>
<td>optional</td>
<td>string(255)</td>
<td>Description of the transaction for later use</td>
</tr>
<tr>
<td>remote_ip</td>
<td>required</td>
<td>IPv4 address</td>
<td>IPv4 address of customer</td>
</tr>
<tr>
<td>return_success_url</td>
<td>required</td>
<td>url</td>
<td>URL where customer is sent to after successful payment</td>
</tr>
<tr>
<td>return_failure_url</td>
<td>required</td>
<td>url</td>
<td>URL where customer is sent to after unsuccessful payment</td>
</tr>
<tr>
<td>amount</td>
<td>required</td>
<td>integer &gt; 0</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>required</td>
<td>string(3)</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>voucher_number</td>
<td>required</td>
<td>string(10)</td>
<td>Voucher number. Alphanumeric maximum 10 characters</td>
</tr>
<tr>
<td>customer_email</td>
<td>required*</td>
<td>e-mail address</td>
<td>Must contain valid e-mail of customer</td>
</tr>
<tr>
<td>customer_phone</td>
<td>required*</td>
<td>string(32)</td>
<td>Must contain valid phone number of customer</td>
</tr>
<tr>
<td><strong>billing_address</strong></td>
<td>required</td>
<td></td>
<td>See <a href="#required-vs-optional-api-params">Required vs Optional API params</a> for details</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;first_name</td>
<td>required*</td>
<td>string(255)</td>
<td>Customer first name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;last_name</td>
<td>required*</td>
<td>string(255)</td>
<td>Customer last name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address1</td>
<td>required*</td>
<td>string(255)</td>
<td>Primary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address2</td>
<td>required*</td>
<td>string(255)</td>
<td>Secondary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;zip_code</td>
<td>required*</td>
<td>string</td>
<td>ZIP code</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;city</td>
<td>required*</td>
<td>string(255)</td>
<td>City</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;state</td>
<td>required*</td>
<td>string(2)</td>
<td>State code in <a href="https://en.wikipedia.org/wiki/ISO_3166-2">ISO 3166-2</a>, required for USA and Canada</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;country</td>
<td>required</td>
<td>string(2)</td>
<td>Country code in <a href="https://www.iso.org/iso-3166-country-codes.html">ISO 3166</a></td>
</tr>
<tr>
<td><strong>shipping_address</strong></td>
<td>optional</td>
<td></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;first_name</td>
<td>optional</td>
<td>string(255)</td>
<td>Customer first name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;last_name</td>
<td>optional</td>
<td>string(255)</td>
<td>Customer last name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address1</td>
<td>optional</td>
<td>string(255)</td>
<td>Primary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address2</td>
<td>optional</td>
<td>string(255)</td>
<td>Secondary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;zip_code</td>
<td>optional</td>
<td>string</td>
<td>ZIP code</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;city</td>
<td>optional</td>
<td>string(255)</td>
<td>City</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;state</td>
<td>optional</td>
<td>string(2)</td>
<td>State code in <a href="https://en.wikipedia.org/wiki/ISO_3166-2">ISO 3166-2</a>, required for USA and Canada</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;country</td>
<td>optional</td>
<td>string(2)</td>
<td>Country code in <a href="https://www.iso.org/iso-3166-country-codes.html">ISO 3166</a></td>
</tr>
</tbody></table>

<p><code>required* = conditionally required</code></p>

<p><strong>Supported countries</strong></p>

<table><thead>
<tr>
<th>Country Name</th>
<th>Country code</th>
</tr>
</thead><tbody>
<tr>
<td>Austria</td>
<td>AT</td>
</tr>
<tr>
<td>Algeria</td>
<td>DZ</td>
</tr>
<tr>
<td>Australia</td>
<td>AU</td>
</tr>
<tr>
<td>Burundi</td>
<td>BI</td>
</tr>
<tr>
<td>Burkina Faso</td>
<td>BF</td>
</tr>
<tr>
<td>Benin</td>
<td>BJ</td>
</tr>
<tr>
<td>Belgium</td>
<td>BE</td>
</tr>
<tr>
<td>Cape Verde</td>
<td>CV</td>
</tr>
<tr>
<td>Cyprus</td>
<td>CY</td>
</tr>
<tr>
<td>Canada</td>
<td>CA</td>
</tr>
<tr>
<td>Central African Republic</td>
<td>CF</td>
</tr>
<tr>
<td>Chad</td>
<td>TD</td>
</tr>
<tr>
<td>Colombia</td>
<td>CO</td>
</tr>
<tr>
<td>Congo</td>
<td>CG</td>
</tr>
<tr>
<td>Cameroon</td>
<td>CM</td>
</tr>
<tr>
<td>Democratic Republic of Congo</td>
<td>CD</td>
</tr>
<tr>
<td>Denmark</td>
<td>DK</td>
</tr>
<tr>
<td>Equatorial Guinea</td>
<td>GQ</td>
</tr>
<tr>
<td>France</td>
<td>FR</td>
</tr>
<tr>
<td>Gambia</td>
<td>GM</td>
</tr>
<tr>
<td>Germany</td>
<td>DE</td>
</tr>
<tr>
<td>Gabon</td>
<td>GA</td>
</tr>
<tr>
<td>Guinea</td>
<td>GN</td>
</tr>
<tr>
<td>Ghana</td>
<td>GH</td>
</tr>
<tr>
<td>Guinea-Bissau</td>
<td>GW</td>
</tr>
<tr>
<td>Hong Kong</td>
<td>HK</td>
</tr>
<tr>
<td>Ireland</td>
<td>IE</td>
</tr>
<tr>
<td>Italy</td>
<td>IT</td>
</tr>
<tr>
<td>Ivory Coast</td>
<td>CI</td>
</tr>
<tr>
<td>Kenya</td>
<td>KE</td>
</tr>
<tr>
<td>Luxembourg</td>
<td>LU</td>
</tr>
<tr>
<td>Malawi</td>
<td>MW</td>
</tr>
<tr>
<td>Mozambique</td>
<td>MZ</td>
</tr>
<tr>
<td>Morocco</td>
<td>MA</td>
</tr>
<tr>
<td>Mauritania</td>
<td>MR</td>
</tr>
<tr>
<td>Mali</td>
<td>ML</td>
</tr>
<tr>
<td>Niger</td>
<td>NE</td>
</tr>
<tr>
<td>Nigeria</td>
<td>NG</td>
</tr>
<tr>
<td>Netherlands</td>
<td>NL</td>
</tr>
<tr>
<td>Norway</td>
<td>NO</td>
</tr>
<tr>
<td>Poland</td>
<td>PL</td>
</tr>
<tr>
<td>Portugal</td>
<td>PT</td>
</tr>
<tr>
<td>Rwanda</td>
<td>RW</td>
</tr>
<tr>
<td>Russia</td>
<td>RU</td>
</tr>
<tr>
<td>Romania</td>
<td>RO</td>
</tr>
<tr>
<td>Sweden</td>
<td>SE</td>
</tr>
<tr>
<td>Spain</td>
<td>ES</td>
</tr>
<tr>
<td>Sierra Leone</td>
<td>SL</td>
</tr>
<tr>
<td>Senegal</td>
<td>SN</td>
</tr>
<tr>
<td>Sao Tome and Principe</td>
<td>ST</td>
</tr>
<tr>
<td>Switzerland</td>
<td>CH</td>
</tr>
<tr>
<td>Serbia</td>
<td>RS</td>
</tr>
<tr>
<td>Turkey</td>
<td>TR</td>
</tr>
<tr>
<td>Togo</td>
<td>TG</td>
</tr>
<tr>
<td>Tunisia</td>
<td>TN</td>
</tr>
<tr>
<td>United Kingdom</td>
<td>GB</td>
</tr>
<tr>
<td>United Republic of Tanzania</td>
<td>TZ</td>
</tr>
<tr>
<td>Uganda</td>
<td>UG</td>
</tr>
<tr>
<td>Zimbabwe</td>
<td>ZW</td>
</tr>
<tr>
<td>Zambia</td>
<td>ZM</td>
</tr>
</tbody></table>

<blockquote>
<p>Successful Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>This request is not implemented yet
</code></pre>

<pre class="highlight java tab-java"><code><span class="n">This</span> <span class="n">request</span> <span class="n">is</span> <span class="n">not</span> <span class="n">implemented</span> <span class="n">yet</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;neosurf&lt;/transaction_type&gt;
  &lt;status&gt;pending_async&lt;/status&gt;
  &lt;mode&gt;live&lt;/mode&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;redirect_url&gt;https://gate.emerchantpay.net/redirect/to_acquirer/649e1ff35c61&lt;/redirect_url&gt;
  &lt;technical_message&gt;Transaction successful!&lt;/technical_message&gt;
  &lt;message&gt;Transaction successful!&lt;/message&gt;
  &lt;timestamp&gt;2019-03-14T12:05:57Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;EUR&lt;/currency&gt;
  &lt;sent_to_acquirer&gt;true&lt;/sent_to_acquirer&gt;
&lt;/payment_transaction&gt;
</code></pre>

<p><strong>Successful Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>The transaction type</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>transaction_id</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>unique_id</td>
<td>string(32)</td>
<td>Unique id defined by gate (must later be used if capturing, voiding or refunding a transaction)</td>
</tr>
<tr>
<td>redirect_url</td>
<td>url</td>
<td>URL where user has to be redirected to complete payment process. It is available for asynchronous mode</td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
<tr>
<td>message</td>
<td>string(255)</td>
<td>Human readable error message which can be displayed to users.</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when the transaction was processed in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Combined date and time</a> e.g. 2007-08- 30T17:46:11Z</td>
</tr>
<tr>
<td>descriptor</td>
<td>string</td>
<td>Static descriptor MID info as configured on the gateway</td>
</tr>
<tr>
<td>amount</td>
<td>integer</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>sent_to_acquirer</td>
<td>string</td>
<td>&quot;true&quot; or &quot;false&quot;</td>
</tr>
</tbody></table>

<blockquote>
<p>Error Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>This request is not implemented yet
</code></pre>

<pre class="highlight java tab-java"><code><span class="n">This</span> <span class="n">request</span> <span class="n">is</span> <span class="n">not</span> <span class="n">implemented</span> <span class="n">yet</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;neosurf&lt;/transaction_type&gt;
  &lt;status&gt;error&lt;/status&gt;
  &lt;mode&gt;live&lt;/mode&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;code&gt;110&lt;/code&gt;
  &lt;message&gt;Something went wrong, please contact support!&lt;/message&gt;
  &lt;timestamp&gt;2019-03-14T12:05:57Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;EUR&lt;/currency&gt;
  &lt;sent_to_acquirer&gt;false&lt;/sent_to_acquirer&gt;
&lt;/payment_transaction&gt;
</code></pre>

<p><strong>Error Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>The transaction type</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>transaction_id</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>unique_id</td>
<td>string(32)</td>
<td>Unique id defined by gate (must later be used if capturing, voiding or refunding a transaction)</td>
</tr>
<tr>
<td>code</td>
<td>integer</td>
<td>Error code according to <a href="#error-code-table">Error code table</a></td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
<tr>
<td>message</td>
<td>string(255)</td>
<td>Human readable error message which can be displayed to users.</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when the transaction was processed in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Combined date and time</a> e.g. 2007-08- 30T17:46:11Z</td>
</tr>
<tr>
<td>descriptor</td>
<td>string</td>
<td>Static descriptor MID info as configured on the gateway</td>
</tr>
<tr>
<td>amount</td>
<td>integer</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>sent_to_acquirer</td>
<td>string</td>
<td>&quot;true&quot; or &quot;false&quot;</td>
</tr>
</tbody></table>
<h3 id='paysafecard'>Paysafecard</h3>
<aside class="notice" >
Paysafecard transactions are only asynchronous. After a successful validation of transaction param- eters transaction status is set to pending async the user is redirected to Paysafecard authentication page where he enters additional information to finish the payment. When the payment reached a final state Genesis gateway sends notification to merchant on the configured url into its account.
</aside>

<blockquote>
<p>Request</p>
</blockquote>

<pre class="highlight php tab-php"><code><span class="cp">&lt;?php</span>

<span class="c1">// Load the pre-configured ini file...
</span><span class="nx">\Genesis\Config</span><span class="o">::</span><span class="na">loadSettings</span><span class="p">(</span><span class="s1">'/path/to/config.ini'</span><span class="p">);</span>

<span class="nv">$genesis</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Genesis</span><span class="p">(</span><span class="s1">'Financial\Alternatives\Paysafecard'</span><span class="p">);</span>
<span class="nv">$request</span> <span class="o">=</span> <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">request</span><span class="p">();</span>

<span class="nv">$request</span>
  <span class="o">-&gt;</span><span class="na">setTransactionId</span><span class="p">(</span><span class="s1">'43671'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setUsage</span><span class="p">(</span><span class="s1">'40208 concert tickets'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setRemoteIp</span><span class="p">(</span><span class="s1">'245.253.2.12'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setReturnSuccessUrl</span><span class="p">(</span><span class="s1">'http://www.example.com/success'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setReturnFailureUrl</span><span class="p">(</span><span class="s1">'http://www.example.com/failure'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setAmount</span><span class="p">(</span><span class="s1">'100'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCurrency</span><span class="p">(</span><span class="s1">'USD'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCustomerEmail</span><span class="p">(</span><span class="s1">'travis@example.com'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCustomerPhone</span><span class="p">(</span><span class="s1">'+1987987987987'</span><span class="p">)</span>


  <span class="c1">// Billing Address
</span>  <span class="o">-&gt;</span><span class="na">setBillingFirstName</span><span class="p">(</span><span class="s1">'Travis'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingLastName</span><span class="p">(</span><span class="s1">'Pastrana'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingAddress1</span><span class="p">(</span><span class="s1">'Muster Str. 12'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingZipCode</span><span class="p">(</span><span class="s1">'10178'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingCity</span><span class="p">(</span><span class="s1">'Los Angeles'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingState</span><span class="p">(</span><span class="s1">'CA'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingCountry</span><span class="p">(</span><span class="s1">'US'</span><span class="p">);</span>

<span class="k">try</span> <span class="p">{</span>
    <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">execute</span><span class="p">();</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">response</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">getResponseObject</span><span class="p">();</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">\Exception</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$e</span><span class="o">-&gt;</span><span class="na">getMessage</span><span class="p">();</span>
<span class="p">}</span>
</code></pre>

<pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.GenesisClient</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.TransactionResult</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.constants.Endpoints</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.constants.Environments</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.requests.financial.apm.PaySafeCardRequest</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.model.Transaction</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Configuration</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Country</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Currency</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.math.BigDecimal</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.MalformedURLException</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.URL</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">GenesisExample</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">MalformedURLException</span> <span class="o">{</span>

    <span class="c1">// Create configuration</span>
    <span class="n">Configuration</span> <span class="n">configuration</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Configuration</span><span class="o">(</span><span class="n">Environments</span><span class="o">.</span><span class="na">STAGING</span><span class="o">,</span> <span class="n">Endpoints</span><span class="o">.</span><span class="na">EMERCHANTPAY</span><span class="o">);</span>

    <span class="n">configuration</span><span class="o">.</span><span class="na">setUsername</span><span class="o">(</span><span class="s">"SET_YOUR_USERNAME"</span><span class="o">);</span>
    <span class="n">configuration</span><span class="o">.</span><span class="na">setPassword</span><span class="o">(</span><span class="s">"SET_YOUR_PASSWORD"</span><span class="o">);</span>
    <span class="n">configuration</span><span class="o">.</span><span class="na">setToken</span><span class="o">(</span><span class="s">"SET_YOUR_TOKEN"</span><span class="o">);</span>

    <span class="n">PaySafeCardRequest</span> <span class="n">request</span> <span class="o">=</span> <span class="k">new</span> <span class="n">PaySafeCardRequest</span><span class="o">();</span>

    <span class="n">request</span><span class="o">.</span><span class="na">setTransactionId</span><span class="o">(</span><span class="s">"43671"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setUsage</span><span class="o">(</span><span class="s">"40208 concert tickets"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setRemoteIp</span><span class="o">(</span><span class="s">"245.253.2.12"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setReturnSuccessUrl</span><span class="o">(</span><span class="k">new</span> <span class="n">URL</span><span class="o">(</span><span class="s">"http://www.example.com/success"</span><span class="o">));</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setReturnFailureUrl</span><span class="o">(</span><span class="k">new</span> <span class="n">URL</span><span class="o">(</span><span class="s">"http://www.example.com/failure"</span><span class="o">));</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setAmount</span><span class="o">(</span><span class="k">new</span> <span class="n">BigDecimal</span><span class="o">(</span><span class="mi">100</span><span class="o">));</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCurrency</span><span class="o">(</span><span class="s">"USD"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCustomerEmail</span><span class="o">(</span><span class="s">"travis@example.com"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCustomerPhone</span><span class="o">(</span><span class="s">"+1987987987987"</span><span class="o">);</span>


    <span class="c1">// Billing Address</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingFirstname</span><span class="o">(</span><span class="s">"Travis"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingLastname</span><span class="o">(</span><span class="s">"Pastrana"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingPrimaryAddress</span><span class="o">(</span><span class="s">"Muster Str. 12"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingZipCode</span><span class="o">(</span><span class="s">"10178"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingCity</span><span class="o">(</span><span class="s">"Los Angeles"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingState</span><span class="o">(</span><span class="s">"CA"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingCountry</span><span class="o">(</span><span class="s">"US"</span><span class="o">);</span>

    <span class="n">GenesisClient</span> <span class="n">client</span> <span class="o">=</span> <span class="k">new</span> <span class="n">GenesisClient</span><span class="o">(</span><span class="n">configuration</span><span class="o">,</span> <span class="n">request</span><span class="o">);</span>
    <span class="n">client</span><span class="o">.</span><span class="na">execute</span><span class="o">();</span>

    <span class="c1">// Parse Payment result</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">client</span><span class="o">.</span><span class="na">getResponse</span><span class="o">());</span>

  <span class="o">}</span>
<span class="o">}</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="kd">var</span> <span class="nx">genesis</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'genesis.js/lib/genesis.js'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">transaction</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">genesis</span><span class="p">.</span><span class="nx">transaction</span><span class="p">();</span>

<span class="kd">var</span> <span class="nx">failure</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">reason</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">reason</span><span class="p">);</span>
<span class="p">};</span>

<span class="kd">var</span> <span class="nx">success</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>

<span class="nx">transaction</span><span class="p">.</span><span class="nx">paysafecard</span><span class="p">(</span>
  <span class="p">{</span>
    <span class="s2">"transaction_id"</span><span class="p">:</span> <span class="s2">"43671"</span><span class="p">,</span>
    <span class="s2">"usage"</span><span class="p">:</span> <span class="s2">"40208 concert tickets"</span><span class="p">,</span>
    <span class="s2">"remote_ip"</span><span class="p">:</span> <span class="s2">"245.253.2.12"</span><span class="p">,</span>
    <span class="s2">"return_success_url"</span><span class="p">:</span> <span class="s2">"http://www.example.com/success"</span><span class="p">,</span>
    <span class="s2">"return_failure_url"</span><span class="p">:</span> <span class="s2">"http://www.example.com/failure"</span><span class="p">,</span>
    <span class="s2">"amount"</span><span class="p">:</span> <span class="s2">"100"</span><span class="p">,</span>
    <span class="s2">"currency"</span><span class="p">:</span> <span class="s2">"USD"</span><span class="p">,</span>
    <span class="s2">"customer_email"</span><span class="p">:</span> <span class="s2">"travis@example.com"</span><span class="p">,</span>
    <span class="s2">"customer_phone"</span><span class="p">:</span> <span class="s2">"+1987987987987"</span><span class="p">,</span>
    <span class="s2">"billing_address"</span><span class="p">:</span> <span class="p">{</span>
      <span class="s2">"first_name"</span><span class="p">:</span> <span class="s2">"Travis"</span><span class="p">,</span>
      <span class="s2">"last_name"</span><span class="p">:</span> <span class="s2">"Pastrana"</span><span class="p">,</span>
      <span class="s2">"address1"</span><span class="p">:</span> <span class="s2">"Muster Str. 12"</span><span class="p">,</span>
      <span class="s2">"zip_code"</span><span class="p">:</span> <span class="s2">"10178"</span><span class="p">,</span>
      <span class="s2">"city"</span><span class="p">:</span> <span class="s2">"Los Angeles"</span><span class="p">,</span>
      <span class="s2">"state"</span><span class="p">:</span> <span class="s2">"CA"</span><span class="p">,</span>
      <span class="s2">"country"</span><span class="p">:</span> <span class="s2">"US"</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">).</span><span class="nx">send</span><span class="p">()</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">success</span><span class="p">)</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">failure</span><span class="p">);</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>curl https://username:password@gate.emerchantpay.net/process/TERMINAL-TOKEN <span class="se">\</span>
   -H <span class="s2">"Content-Type: text/xml"</span> <span class="se">\</span>
   -d <span class="s1">'
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;paysafecard&lt;/transaction_type&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;usage&gt;40208 concert tickets&lt;/usage&gt;
  &lt;remote_ip&gt;245.253.2.12&lt;/remote_ip&gt;
  &lt;return_success_url&gt;http://www.example.com/success&lt;/return_success_url&gt;
  &lt;return_failure_url&gt;http://www.example.com/failure&lt;/return_failure_url&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
  &lt;customer_email&gt;travis@example.com&lt;/customer_email&gt;
  &lt;customer_phone&gt;+1987987987987&lt;/customer_phone&gt;
  &lt;billing_address&gt;
    &lt;first_name&gt;Travis&lt;/first_name&gt;
    &lt;last_name&gt;Pastrana&lt;/last_name&gt;
    &lt;address1&gt;Muster Str. 12&lt;/address1&gt;
    &lt;zip_code&gt;10178&lt;/zip_code&gt;
    &lt;city&gt;Los Angeles&lt;/city&gt;
    &lt;state&gt;CA&lt;/state&gt;
    &lt;country&gt;US&lt;/country&gt;
  &lt;/billing_address&gt;
&lt;/payment_transaction&gt;'</span>
</code></pre>

<p><strong>Request Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>required</td>
<td>string(255)</td>
<td>The transaction type: <strong>paysafecard</strong></td>
</tr>
<tr>
<td>transaction_id</td>
<td>required</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>usage</td>
<td>optional</td>
<td>string(255)</td>
<td>Description of the transaction for later use</td>
</tr>
<tr>
<td>remote_ip</td>
<td>required</td>
<td>IPv4 address</td>
<td>IPv4 address of customer</td>
</tr>
<tr>
<td>return_success_url</td>
<td>required</td>
<td>url</td>
<td>URL where customer is sent to after successful payment</td>
</tr>
<tr>
<td>return_failure_url</td>
<td>required</td>
<td>url</td>
<td>URL where customer is sent to after unsuccessful payment</td>
</tr>
<tr>
<td>amount</td>
<td>required</td>
<td>integer &gt; 0</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>required</td>
<td>string(3)</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>customer_email</td>
<td>required</td>
<td>e-mail address</td>
<td>Must contain valid e-mail of customer</td>
</tr>
<tr>
<td>customer_phone</td>
<td>required*</td>
<td>string(32)</td>
<td>Must contain valid phone number of customer</td>
</tr>
<tr>
<td><strong>billing_address</strong></td>
<td>required</td>
<td></td>
<td>See <a href="#required-vs-optional-api-params">Required vs Optional API params</a> for details</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;first_name</td>
<td>required*</td>
<td>string(255)</td>
<td>Customer first name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;last_name</td>
<td>required*</td>
<td>string(255)</td>
<td>Customer last name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address1</td>
<td>required*</td>
<td>string(255)</td>
<td>Primary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address2</td>
<td>required*</td>
<td>string(255)</td>
<td>Secondary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;zip_code</td>
<td>required*</td>
<td>string</td>
<td>ZIP code</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;city</td>
<td>required*</td>
<td>string(255)</td>
<td>City</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;state</td>
<td>required*</td>
<td>string(2)</td>
<td>State code in <a href="https://en.wikipedia.org/wiki/ISO_3166-2">ISO 3166-2</a>, required for USA and Canada</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;country</td>
<td>required</td>
<td>string(2)</td>
<td>Country code in <a href="https://www.iso.org/iso-3166-country-codes.html">ISO 3166</a></td>
</tr>
<tr>
<td><strong>shipping_address</strong></td>
<td>optional</td>
<td></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;first_name</td>
<td>optional</td>
<td>string(255)</td>
<td>Customer first name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;last_name</td>
<td>optional</td>
<td>string(255)</td>
<td>Customer last name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address1</td>
<td>optional</td>
<td>string(255)</td>
<td>Primary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address2</td>
<td>optional</td>
<td>string(255)</td>
<td>Secondary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;zip_code</td>
<td>optional</td>
<td>string</td>
<td>ZIP code</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;city</td>
<td>optional</td>
<td>string(255)</td>
<td>City</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;state</td>
<td>optional</td>
<td>string(2)</td>
<td>State code in <a href="https://en.wikipedia.org/wiki/ISO_3166-2">ISO 3166-2</a>, required for USA and Canada</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;country</td>
<td>optional</td>
<td>string(2)</td>
<td>Country code in <a href="https://www.iso.org/iso-3166-country-codes.html">ISO 3166</a></td>
</tr>
</tbody></table>

<p><code>required* = conditionally required</code></p>

<p><strong>Supported countries:</strong></p>

<table><thead>
<tr>
<th>Country name</th>
<th>Country code</th>
</tr>
</thead><tbody>
<tr>
<td>Austria</td>
<td>AT</td>
</tr>
<tr>
<td>Belgium</td>
<td>BE</td>
</tr>
<tr>
<td>Canada</td>
<td>CA</td>
</tr>
<tr>
<td>Czech Republic</td>
<td>CZ</td>
</tr>
<tr>
<td>Cyprus</td>
<td>CY</td>
</tr>
<tr>
<td>Croatia</td>
<td>HR</td>
</tr>
<tr>
<td>Denmark</td>
<td>DK</td>
</tr>
<tr>
<td>Finland</td>
<td>FI</td>
</tr>
<tr>
<td>France</td>
<td>FR</td>
</tr>
<tr>
<td>Germany</td>
<td>DE</td>
</tr>
<tr>
<td>Greece</td>
<td>GR</td>
</tr>
<tr>
<td>Hungary</td>
<td>HU</td>
</tr>
<tr>
<td>Ireland</td>
<td>IE</td>
</tr>
<tr>
<td>Italy</td>
<td>IT</td>
</tr>
<tr>
<td>Luxembourg</td>
<td>LU</td>
</tr>
<tr>
<td>Mexico</td>
<td>MX</td>
</tr>
<tr>
<td>Malta</td>
<td>MT</td>
</tr>
<tr>
<td>Netherlands</td>
<td>NL</td>
</tr>
<tr>
<td>Norway</td>
<td>NO</td>
</tr>
<tr>
<td>Portugal</td>
<td>PT</td>
</tr>
<tr>
<td>Poland</td>
<td>PL</td>
</tr>
<tr>
<td>Romania</td>
<td>RO</td>
</tr>
<tr>
<td>Sweden</td>
<td>SE</td>
</tr>
<tr>
<td>Slovenia</td>
<td>SI</td>
</tr>
<tr>
<td>Slovakia</td>
<td>SK</td>
</tr>
<tr>
<td>Switzerland</td>
<td>CH</td>
</tr>
<tr>
<td>Spain</td>
<td>ES</td>
</tr>
<tr>
<td>Turkey</td>
<td>TR</td>
</tr>
<tr>
<td>United Arab Emirates</td>
<td>AE</td>
</tr>
<tr>
<td>United Kingdom</td>
<td>GB</td>
</tr>
<tr>
<td>United States</td>
<td>US</td>
</tr>
</tbody></table>

<blockquote>
<p>Successful Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>stdClass Object
(
    [transaction_type] =&gt; paysafecard
    [status] =&gt; approved
    [mode] =&gt; live
    [transaction_id] =&gt; 43671
    [unique_id] =&gt; 44177a21403427eb96664a6d7e5d5d48
    [technical_message] =&gt; Transaction successful!
    [message] =&gt; Transaction successful!
    [redirect_url] =&gt; https://gate.emerchantpay.net/redirect/to_acquirer/649e1ff35c61
    [timestamp] =&gt; DateTime Object
        (
            [date] =&gt; 2019-03-14 12:05:57.000000
            [timezone_type] =&gt; 2
            [timezone] =&gt; Z
        )
    [descriptor] =&gt; Descriptor one
    [amount] =&gt; 100
    [currency] =&gt; USD
    [sent_to_acquirer] =&gt; true
)
</code></pre>

<pre class="highlight java tab-java"><code><span class="o">&lt;</span><span class="n">payment_response</span> <span class="n">content</span><span class="o">=[</span>
    <span class="o">&lt;</span><span class="n">transaction_type</span> <span class="n">content</span><span class="o">=[</span><span class="n">paysafecard</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">status</span> <span class="n">content</span><span class="o">=[</span><span class="n">approved</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">mode</span> <span class="n">content</span><span class="o">=[</span><span class="n">live</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">transaction_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">43671</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">unique_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">44177</span><span class="n">a21403427eb96664a6d7e5d5d48</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">technical_message</span> <span class="n">content</span><span class="o">=[</span><span class="n">Transaction</span> <span class="n">successful</span><span class="o">!]&gt;</span>
    <span class="o">&lt;</span><span class="n">message</span> <span class="n">content</span><span class="o">=[</span><span class="n">Transaction</span> <span class="n">successful</span><span class="o">!]&gt;</span>
    <span class="o">&lt;</span><span class="n">redirect_url</span> <span class="n">content</span><span class="o">=[</span><span class="nl">https:</span><span class="c1">//gate.emerchantpay.net/redirect/to_acquirer/649e1ff35c61]&gt;</span>
    <span class="o">&lt;</span><span class="n">timestamp</span> <span class="n">content</span><span class="o">=[</span><span class="mi">2019</span><span class="o">-</span><span class="mo">03</span><span class="o">-</span><span class="mi">14</span><span class="nl">T12:</span><span class="mo">05</span><span class="o">:</span><span class="mi">57</span><span class="n">Z</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">descriptor</span> <span class="n">content</span><span class="o">=[</span><span class="n">Descriptor</span> <span class="n">one</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">amount</span> <span class="n">content</span><span class="o">=[</span><span class="mi">100</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">currency</span> <span class="n">content</span><span class="o">=[</span><span class="n">USD</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">sent_to_acquirer</span> <span class="n">content</span><span class="o">=[</span><span class="kc">true</span><span class="o">]&gt;</span>
<span class="o">]&gt;</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="p">{</span>
    <span class="nl">transaction_type</span><span class="p">:</span> <span class="s2">"paysafecard"</span><span class="p">,</span>
    <span class="nx">status</span><span class="p">:</span> <span class="s2">"approved"</span><span class="p">,</span>
    <span class="nx">mode</span><span class="p">:</span> <span class="s2">"live"</span><span class="p">,</span>
    <span class="nx">transaction_id</span><span class="p">:</span> <span class="s2">"43671"</span><span class="p">,</span>
    <span class="nx">unique_id</span><span class="p">:</span> <span class="s2">"44177a21403427eb96664a6d7e5d5d48"</span><span class="p">,</span>
    <span class="nx">technical_message</span><span class="p">:</span> <span class="s2">"Transaction successful!"</span><span class="p">,</span>
    <span class="nx">message</span><span class="p">:</span> <span class="s2">"Transaction successful!"</span><span class="p">,</span>
    <span class="nx">redirect_url</span><span class="p">:</span> <span class="s2">"https://gate.emerchantpay.net/redirect/to_acquirer/649e1ff35c61"</span><span class="p">,</span>
    <span class="nx">timestamp</span><span class="p">:</span> <span class="s2">"2019-03-14T12:05:57Z"</span><span class="p">,</span>
    <span class="nx">descriptor</span><span class="p">:</span> <span class="s2">"Descriptor one"</span><span class="p">,</span>
    <span class="nx">amount</span><span class="p">:</span> <span class="s2">"100"</span><span class="p">,</span>
    <span class="nx">currency</span><span class="p">:</span> <span class="s2">"USD"</span><span class="p">,</span>
    <span class="nx">sent_to_acquirer</span><span class="p">:</span> <span class="s2">"true"</span><span class="p">,</span>
<span class="p">}</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;paysafecard&lt;/transaction_type&gt;
  &lt;status&gt;approved&lt;/status&gt;
  &lt;mode&gt;live&lt;/mode&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;technical_message&gt;Transaction successful!&lt;/technical_message&gt;
  &lt;message&gt;Transaction successful!&lt;/message&gt;
  &lt;redirect_url&gt;https://gate.emerchantpay.net/redirect/to_acquirer/649e1ff35c61&lt;/redirect_url&gt;
  &lt;timestamp&gt;2019-03-14T12:05:57Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
  &lt;sent_to_acquirer&gt;true&lt;/sent_to_acquirer&gt;
&lt;/payment_transaction&gt;
</code></pre>

<p><strong>Successful Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>The transaction type</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>transaction_id</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>unique_id</td>
<td>string(32)</td>
<td>Unique id defined by gate (must later be used if capturing, voiding or refunding a transaction)</td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
<tr>
<td>message</td>
<td>string(255)</td>
<td>Human readable error message which can be displayed to users.</td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>redirect_url</td>
<td>url</td>
<td>URL where user has to be redirected to complete payment process. It is available for asynchronous mode</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when the transaction was processed in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Combined date and time</a> e.g. 2007-08- 30T17:46:11Z</td>
</tr>
<tr>
<td>descriptor</td>
<td>string</td>
<td>Static descriptor MID info as configured on the gateway</td>
</tr>
<tr>
<td>amount</td>
<td>integer</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>sent_to_acquirer</td>
<td>string</td>
<td>&quot;true&quot; or &quot;false&quot;</td>
</tr>
</tbody></table>

<blockquote>
<p>Error Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>stdClass Object
(
    [transaction_type] =&gt; paysafecard
    [status] =&gt; error
    [mode] =&gt; live
    [transaction_id] =&gt; 43671
    [unique_id] =&gt; 44177a21403427eb96664a6d7e5d5d48
    [code] =&gt; 110
    [message] =&gt; Something went wrong, please contact support!
    [timestamp] =&gt; DateTime Object
        (
            [date] =&gt; 2019-03-14 12:05:57.000000
            [timezone_type] =&gt; 2
            [timezone] =&gt; Z
        )
    [descriptor] =&gt; Descriptor one
    [amount] =&gt; 100
    [currency] =&gt; USD
    [sent_to_acquirer] =&gt; false
)
</code></pre>

<pre class="highlight java tab-java"><code><span class="o">&lt;</span><span class="n">payment_response</span> <span class="n">content</span><span class="o">=[</span>
    <span class="o">&lt;</span><span class="n">transaction_type</span> <span class="n">content</span><span class="o">=[</span><span class="n">paysafecard</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">status</span> <span class="n">content</span><span class="o">=[</span><span class="n">error</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">mode</span> <span class="n">content</span><span class="o">=[</span><span class="n">live</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">transaction_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">43671</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">unique_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">44177</span><span class="n">a21403427eb96664a6d7e5d5d48</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">code</span> <span class="n">content</span><span class="o">=[</span><span class="mi">110</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">message</span> <span class="n">content</span><span class="o">=[</span><span class="n">Something</span> <span class="n">went</span> <span class="n">wrong</span><span class="o">,</span> <span class="n">please</span> <span class="n">contact</span> <span class="n">support</span><span class="o">!]&gt;</span>
    <span class="o">&lt;</span><span class="n">timestamp</span> <span class="n">content</span><span class="o">=[</span><span class="mi">2019</span><span class="o">-</span><span class="mo">03</span><span class="o">-</span><span class="mi">14</span><span class="nl">T12:</span><span class="mo">05</span><span class="o">:</span><span class="mi">57</span><span class="n">Z</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">descriptor</span> <span class="n">content</span><span class="o">=[</span><span class="n">Descriptor</span> <span class="n">one</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">amount</span> <span class="n">content</span><span class="o">=[</span><span class="mi">100</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">currency</span> <span class="n">content</span><span class="o">=[</span><span class="n">USD</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">sent_to_acquirer</span> <span class="n">content</span><span class="o">=[</span><span class="kc">false</span><span class="o">]&gt;</span>
<span class="o">]&gt;</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="p">{</span>
    <span class="nl">transaction_type</span><span class="p">:</span> <span class="s2">"paysafecard"</span><span class="p">,</span>
    <span class="nx">status</span><span class="p">:</span> <span class="s2">"error"</span><span class="p">,</span>
    <span class="nx">mode</span><span class="p">:</span> <span class="s2">"live"</span><span class="p">,</span>
    <span class="nx">transaction_id</span><span class="p">:</span> <span class="s2">"43671"</span><span class="p">,</span>
    <span class="nx">unique_id</span><span class="p">:</span> <span class="s2">"44177a21403427eb96664a6d7e5d5d48"</span><span class="p">,</span>
    <span class="nx">code</span><span class="p">:</span> <span class="s2">"110"</span><span class="p">,</span>
    <span class="nx">message</span><span class="p">:</span> <span class="s2">"Something went wrong, please contact support!"</span><span class="p">,</span>
    <span class="nx">timestamp</span><span class="p">:</span> <span class="s2">"2019-03-14T12:05:57Z"</span><span class="p">,</span>
    <span class="nx">descriptor</span><span class="p">:</span> <span class="s2">"Descriptor one"</span><span class="p">,</span>
    <span class="nx">amount</span><span class="p">:</span> <span class="s2">"100"</span><span class="p">,</span>
    <span class="nx">currency</span><span class="p">:</span> <span class="s2">"USD"</span><span class="p">,</span>
    <span class="nx">sent_to_acquirer</span><span class="p">:</span> <span class="s2">"false"</span><span class="p">,</span>
<span class="p">}</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;paysafecard&lt;/transaction_type&gt;
  &lt;status&gt;error&lt;/status&gt;
  &lt;mode&gt;live&lt;/mode&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;code&gt;110&lt;/code&gt;
  &lt;message&gt;Something went wrong, please contact support!&lt;/message&gt;
  &lt;timestamp&gt;2019-03-14T12:05:57Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
  &lt;sent_to_acquirer&gt;false&lt;/sent_to_acquirer&gt;
&lt;/payment_transaction&gt;
</code></pre>

<p><strong>Error Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>The transaction type</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>transaction_id</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>unique_id</td>
<td>string(32)</td>
<td>Unique id defined by gate (must later be used if capturing, voiding or refunding a transaction)</td>
</tr>
<tr>
<td>code</td>
<td>integer</td>
<td>Error code according to <a href="#error-code-table">Error code table</a></td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
<tr>
<td>message</td>
<td>string(255)</td>
<td>Human readable error message which can be displayed to users.</td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when the transaction was processed in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Combined date and time</a> e.g. 2007-08- 30T17:46:11Z</td>
</tr>
<tr>
<td>descriptor</td>
<td>string</td>
<td>Static descriptor MID info as configured on the gateway</td>
</tr>
<tr>
<td>amount</td>
<td>integer</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>sent_to_acquirer</td>
<td>string</td>
<td>&quot;true&quot; or &quot;false&quot;</td>
</tr>
</tbody></table>
<h2 id='online-banking-epayments-obep'>Online Banking ePayments (oBeP)</h2>
<p>Online Banking ePayments refer to payment methods that are used as an alternative to credit card payments allowing consumers to pay online with their bank account.</p>
<h3 id='astropay-direct'>Astropay Direct</h3>
<aside class="notice">
Astropay Direct is Online Banking ePayment which allows the customers to pay with their bank accounts in their local currency. Customers go straight from the merchant checkout page to a payment interface, which connects the customer with their bank of preference.
</aside>

<blockquote>
<p>Request</p>
</blockquote>

<pre class="highlight php tab-php"><code>This request is not implemented yet
</code></pre>

<pre class="highlight java tab-java"><code><span class="n">This</span> <span class="n">request</span> <span class="n">is</span> <span class="n">not</span> <span class="n">implemented</span> <span class="n">yet</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>curl https://username:password@gate.emerchantpay.net/process/TERMINAL-TOKEN <span class="se">\</span>
   -H <span class="s2">"Content-Type: text/xml"</span> <span class="se">\</span>
   -d <span class="s1">'
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;astropay_direct&lt;/transaction_type&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;usage&gt;40208 concert tickets&lt;/usage&gt;
  &lt;remote_ip&gt;245.253.2.12&lt;/remote_ip&gt;
  &lt;return_success_url&gt;http://www.example.com/success&lt;/return_success_url&gt;
  &lt;return_failure_url&gt;http://www.example.com/failure&lt;/return_failure_url&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;EUR&lt;/currency&gt;
  &lt;consumer_reference&gt;barney_rumble&lt;/consumer_reference&gt;
  &lt;billing_address&gt;
    &lt;first_name&gt;Barney&lt;/first_name&gt;
    &lt;last_name&gt;Rubble&lt;/last_name&gt;
    &lt;address1&gt;14, Nerazdelni str&lt;/address1&gt;
    &lt;zip_code&gt;1407&lt;/zip_code&gt;
    &lt;city&gt;Salvador&lt;/city&gt;
    &lt;country&gt;BR&lt;/country&gt;
  &lt;/billing_address&gt;
  &lt;risk_params&gt;
    &lt;user_id&gt;123456&lt;/user_id&gt;
  &lt;/risk_params&gt;
&lt;/payment_transaction&gt;'</span>
</code></pre>

<p><strong>Request Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>required</td>
<td>string(255)</td>
<td>The transaction type: <strong>astropay_direct</strong></td>
</tr>
<tr>
<td>transaction_id</td>
<td>required</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>usage</td>
<td>optional</td>
<td>string(255)</td>
<td>Description of the transaction for later use</td>
</tr>
<tr>
<td>remote_ip</td>
<td>required*</td>
<td>IPv4 address</td>
<td>IPv4 address of customer</td>
</tr>
<tr>
<td>return_success_url</td>
<td>required</td>
<td>url</td>
<td>URL where customer is sent to after successful payment</td>
</tr>
<tr>
<td>return_failure_url</td>
<td>required</td>
<td>url</td>
<td>URL where customer is sent to after unsuccessful payment</td>
</tr>
<tr>
<td>amount</td>
<td>required</td>
<td>integer &gt; 0</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>required</td>
<td>string(3)</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>consumer_reference</td>
<td>required</td>
<td>string(20)</td>
<td>Consumer reference is a unique consumer identifier</td>
</tr>
<tr>
<td><strong>billing_address</strong></td>
<td>required</td>
<td></td>
<td>See <a href="#required-vs-optional-api-params">Required vs Optional API params</a> for details</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;first_name</td>
<td>required*</td>
<td>string(255)</td>
<td>Customer first name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;last_name</td>
<td>required*</td>
<td>string(255)</td>
<td>Customer last name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address1</td>
<td>required*</td>
<td>string(255)</td>
<td>Primary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address2</td>
<td>required*</td>
<td>string(255)</td>
<td>Secondary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;zip_code</td>
<td>required*</td>
<td>string</td>
<td>ZIP code</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;city</td>
<td>required*</td>
<td>string(255)</td>
<td>City</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;state</td>
<td>required*</td>
<td>string(2)</td>
<td>State code in <a href="https://en.wikipedia.org/wiki/ISO_3166-2">ISO 3166-2</a>, required for USA and Canada</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;country</td>
<td>required</td>
<td>string(2)</td>
<td>Country code in <a href="https://www.iso.org/iso-3166-country-codes.html">ISO 3166</a></td>
</tr>
<tr>
<td><strong>shipping_address</strong></td>
<td>optional</td>
<td></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;first_name</td>
<td>optional</td>
<td>string(255)</td>
<td>Customer first name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;last_name</td>
<td>optional</td>
<td>string(255)</td>
<td>Customer last name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address1</td>
<td>optional</td>
<td>string(255)</td>
<td>Primary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address2</td>
<td>optional</td>
<td>string(255)</td>
<td>Secondary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;zip_code</td>
<td>optional</td>
<td>string</td>
<td>ZIP code</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;city</td>
<td>optional</td>
<td>string(255)</td>
<td>City</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;state</td>
<td>optional</td>
<td>string(2)</td>
<td>State code in <a href="https://en.wikipedia.org/wiki/ISO_3166-2">ISO 3166-2</a>, required for USA and Canada</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;country</td>
<td>optional</td>
<td>string(2)</td>
<td>Country code in <a href="https://www.iso.org/iso-3166-country-codes.html">ISO 3166</a></td>
</tr>
</tbody></table>

<p><code>required* = conditionally required</code></p>

<p><strong>Supported countries:</strong></p>

<table><thead>
<tr>
<th>Country</th>
</tr>
</thead><tbody>
<tr>
<td>AR</td>
</tr>
<tr>
<td>BR</td>
</tr>
<tr>
<td>CL</td>
</tr>
<tr>
<td>CN</td>
</tr>
<tr>
<td>CO</td>
</tr>
<tr>
<td>MX</td>
</tr>
<tr>
<td>PE</td>
</tr>
<tr>
<td>UY</td>
</tr>
</tbody></table>

<blockquote>
<p>Successful Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>This request is not implemented yet
</code></pre>

<pre class="highlight java tab-java"><code><span class="n">This</span> <span class="n">request</span> <span class="n">is</span> <span class="n">not</span> <span class="n">implemented</span> <span class="n">yet</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;astropay_direct&lt;/transaction_type&gt;
  &lt;status&gt;pending_async&lt;/status&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;redirect_url&gt;https://gate.emerchantpay.net/redirect/to_acquirer/649e1ff35c61&lt;/redirect_url&gt;
  &lt;technical_message&gt;Transaction successful!&lt;/technical_message&gt;
  &lt;message&gt;Transaction successful!&lt;/message&gt;
  &lt;timestamp&gt;2019-03-14T12:05:57Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;EUR&lt;/currency&gt;
  &lt;sent_to_acquirer&gt;true&lt;/sent_to_acquirer&gt;
&lt;/payment_transaction&gt;
</code></pre>

<p><strong>Successful Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>The transaction type</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>transaction_id</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>unique_id</td>
<td>string(32)</td>
<td>Unique id defined by gate (must later be used if capturing, voiding or refunding a transaction)</td>
</tr>
<tr>
<td>redirect_url</td>
<td>url</td>
<td>URL where user has to be redirected to complete payment process. It is available for asynchronous mode</td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
<tr>
<td>message</td>
<td>string(255)</td>
<td>Human readable error message which can be displayed to users.</td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when the transaction was processed in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Combined date and time</a> e.g. 2007-08- 30T17:46:11Z</td>
</tr>
<tr>
<td>descriptor</td>
<td>string</td>
<td>Static descriptor MID info as configured on the gateway</td>
</tr>
<tr>
<td>amount</td>
<td>integer</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>sent_to_acquirer</td>
<td>string</td>
<td>&quot;true&quot; or &quot;false&quot;</td>
</tr>
</tbody></table>

<blockquote>
<p>Error Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>This request is not implemented yet
</code></pre>

<pre class="highlight java tab-java"><code><span class="n">This</span> <span class="n">request</span> <span class="n">is</span> <span class="n">not</span> <span class="n">implemented</span> <span class="n">yet</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;astropay_direct&lt;/transaction_type&gt;
  &lt;status&gt;error&lt;/status&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;code&gt;110&lt;/code&gt;
  &lt;message&gt;Something went wrong, please contact support!&lt;/message&gt;
  &lt;timestamp&gt;2019-03-14T12:05:57Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;EUR&lt;/currency&gt;
  &lt;sent_to_acquirer&gt;true&lt;/sent_to_acquirer&gt;
&lt;/payment_transaction&gt;
</code></pre>

<p><strong>Error Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>The transaction type</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>transaction_id</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>unique_id</td>
<td>string(32)</td>
<td>Unique id defined by gate (must later be used if capturing, voiding or refunding a transaction)</td>
</tr>
<tr>
<td>code</td>
<td>integer</td>
<td>Error code according to <a href="#error-code-table">Error code table</a></td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
<tr>
<td>message</td>
<td>string(255)</td>
<td>Human readable error message which can be displayed to users.</td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when the transaction was processed in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Combined date and time</a> e.g. 2007-08- 30T17:46:11Z</td>
</tr>
<tr>
<td>descriptor</td>
<td>string</td>
<td>Static descriptor MID info as configured on the gateway</td>
</tr>
<tr>
<td>amount</td>
<td>integer</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>sent_to_acquirer</td>
<td>string</td>
<td>&quot;true&quot; or &quot;false&quot;</td>
</tr>
</tbody></table>
<h3 id='banco-do-brasil'>Banco do Brasil</h3>
<aside class="notice" >
Banco do Brasil offers online bank transfer payment service.
</aside>

<blockquote>
<p>Request</p>
</blockquote>

<pre class="highlight php tab-php"><code>This request is not implemented yet
</code></pre>

<pre class="highlight java tab-java"><code><span class="n">This</span> <span class="n">request</span> <span class="n">is</span> <span class="n">not</span> <span class="n">implemented</span> <span class="n">yet</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>curl https://username:password@gate.emerchantpay.net/process/TERMINAL-TOKEN <span class="se">\</span>
   -H <span class="s2">"Content-Type: text/xml"</span> <span class="se">\</span>
   -d <span class="s1">'
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;banco_do_brasil&lt;/transaction_type&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;usage&gt;40208 concert tickets&lt;/usage&gt;
  &lt;remote_ip&gt;245.253.2.12&lt;/remote_ip&gt;
  &lt;return_success_url&gt;http://www.example.com/success&lt;/return_success_url&gt;
  &lt;return_failure_url&gt;http://www.example.com/failure&lt;/return_failure_url&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
  &lt;consumer_reference&gt;barney_rubble&lt;/consumer_reference&gt;
  &lt;national_id&gt;8812128812&lt;/national_id&gt;
  &lt;birth_date&gt;30-12-1992&lt;/birth_date&gt;
  &lt;customer_email&gt;travis@example.com&lt;/customer_email&gt;
  &lt;billing_address&gt;
    &lt;first_name&gt;Barney&lt;/first_name&gt;
    &lt;last_name&gt;Rubble&lt;/last_name&gt;
    &lt;address1&gt;14, Nerazdelni str&lt;/address1&gt;
    &lt;zip_code&gt;1407&lt;/zip_code&gt;
    &lt;city&gt;Natal&lt;/city&gt;
    &lt;country&gt;BR&lt;/country&gt;
  &lt;/billing_address&gt;
  &lt;risk_params&gt;
    &lt;user_id&gt;123456&lt;/user_id&gt;
  &lt;/risk_params&gt;
&lt;/payment_transaction&gt;'</span>
</code></pre>

<p><strong>Request Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>required</td>
<td>string(255)</td>
<td>The transaction type: <strong>banco_do_brasil</strong></td>
</tr>
<tr>
<td>transaction_id</td>
<td>required</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>usage</td>
<td>optional</td>
<td>string(255)</td>
<td>Description of the transaction for later use</td>
</tr>
<tr>
<td>remote_ip</td>
<td>required*</td>
<td>IPv4 address</td>
<td>IPv4 address of customer</td>
</tr>
<tr>
<td>return_success_url</td>
<td>required</td>
<td>url</td>
<td>URL where customer is sent to after successful payment</td>
</tr>
<tr>
<td>return_failure_url</td>
<td>required</td>
<td>url</td>
<td>URL where customer is sent to after unsuccessful payment</td>
</tr>
<tr>
<td>amount</td>
<td>required</td>
<td>integer &gt; 0</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>required</td>
<td>string(3)</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>consumer_reference</td>
<td>required</td>
<td>string(20)</td>
<td>Consumer reference is a unique consumer identifier</td>
</tr>
<tr>
<td>national_id</td>
<td>required</td>
<td>string(20)</td>
<td>National Identifier number of the customer</td>
</tr>
<tr>
<td>birth_date</td>
<td>optional</td>
<td>string(20)</td>
<td>Birth date of the customer</td>
</tr>
<tr>
<td>customer_email</td>
<td>required</td>
<td>e-mail address</td>
<td>Must contain valid e-mail of customer</td>
</tr>
<tr>
<td><strong>billing_address</strong></td>
<td>required</td>
<td></td>
<td>See <a href="#required-vs-optional-api-params">Required vs Optional API params</a> for details</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;first_name</td>
<td>required*</td>
<td>string(255)</td>
<td>Customer first name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;last_name</td>
<td>required*</td>
<td>string(255)</td>
<td>Customer last name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address1</td>
<td>required*</td>
<td>string(255)</td>
<td>Primary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address2</td>
<td>required*</td>
<td>string(255)</td>
<td>Secondary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;zip_code</td>
<td>required*</td>
<td>string</td>
<td>ZIP code</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;city</td>
<td>required*</td>
<td>string(255)</td>
<td>City</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;state</td>
<td>required*</td>
<td>string(2)</td>
<td>State code in <a href="https://en.wikipedia.org/wiki/ISO_3166-2">ISO 3166-2</a>, required for USA and Canada</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;country</td>
<td>required</td>
<td>string(2)</td>
<td>Country code in <a href="https://www.iso.org/iso-3166-country-codes.html">ISO 3166</a></td>
</tr>
<tr>
<td><strong>shipping_address</strong></td>
<td>optional</td>
<td></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;first_name</td>
<td>optional</td>
<td>string(255)</td>
<td>Customer first name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;last_name</td>
<td>optional</td>
<td>string(255)</td>
<td>Customer last name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address1</td>
<td>optional</td>
<td>string(255)</td>
<td>Primary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address2</td>
<td>optional</td>
<td>string(255)</td>
<td>Secondary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;zip_code</td>
<td>optional</td>
<td>string</td>
<td>ZIP code</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;city</td>
<td>optional</td>
<td>string(255)</td>
<td>City</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;state</td>
<td>optional</td>
<td>string(2)</td>
<td>State code in <a href="https://en.wikipedia.org/wiki/ISO_3166-2">ISO 3166-2</a>, required for USA and Canada</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;country</td>
<td>optional</td>
<td>string(2)</td>
<td>Country code in <a href="https://www.iso.org/iso-3166-country-codes.html">ISO 3166</a></td>
</tr>
</tbody></table>

<p><code>required* = conditionally required</code></p>

<p><strong>Supported countries:</strong></p>

<table><thead>
<tr>
<th>Country</th>
</tr>
</thead><tbody>
<tr>
<td>BR</td>
</tr>
</tbody></table>

<blockquote>
<p>Successful Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>This request is not implemented yet
</code></pre>

<pre class="highlight java tab-java"><code><span class="n">This</span> <span class="n">request</span> <span class="n">is</span> <span class="n">not</span> <span class="n">implemented</span> <span class="n">yet</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;banco_do_brasil&lt;/transaction_type&gt;
  &lt;status&gt;pending_async&lt;/status&gt;
  &lt;mode&gt;live&lt;/mode&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;technical_message&gt;Transaction successful!&lt;/technical_message&gt;
  &lt;message&gt;Transaction successful!&lt;/message&gt;
  &lt;redirect_url&gt;https://gate.emerchantpay.net/redirect/to_acquirer/649e1ff35c61&lt;/redirect_url&gt;
  &lt;timestamp&gt;2019-03-14T12:05:57Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
  &lt;sent_to_acquirer&gt;true&lt;/sent_to_acquirer&gt;
&lt;/payment_transaction&gt;
</code></pre>

<p><strong>Successful Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>The transaction type</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>transaction_id</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>unique_id</td>
<td>string(32)</td>
<td>Unique id defined by gate (must later be used if capturing, voiding or refunding a transaction)</td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
<tr>
<td>message</td>
<td>string(255)</td>
<td>Human readable error message which can be displayed to users.</td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>redirect_url</td>
<td>url</td>
<td>URL where user has to be redirected to complete payment process. It is available for asynchronous mode</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when the transaction was processed in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Combined date and time</a> e.g. 2007-08- 30T17:46:11Z</td>
</tr>
<tr>
<td>descriptor</td>
<td>string</td>
<td>Static descriptor MID info as configured on the gateway</td>
</tr>
<tr>
<td>amount</td>
<td>integer</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>sent_to_acquirer</td>
<td>string</td>
<td>&quot;true&quot; or &quot;false&quot;</td>
</tr>
</tbody></table>

<blockquote>
<p>Error Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>This request is not implemented yet
</code></pre>

<pre class="highlight java tab-java"><code><span class="n">This</span> <span class="n">request</span> <span class="n">is</span> <span class="n">not</span> <span class="n">implemented</span> <span class="n">yet</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;banco_do_brasil&lt;/transaction_type&gt;
  &lt;status&gt;error&lt;/status&gt;
  &lt;mode&gt;live&lt;/mode&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;code&gt;110&lt;/code&gt;
  &lt;message&gt;Something went wrong, please contact support!&lt;/message&gt;
  &lt;timestamp&gt;2019-03-14T12:05:57Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
  &lt;sent_to_acquirer&gt;true&lt;/sent_to_acquirer&gt;
&lt;/payment_transaction&gt;
</code></pre>

<p><strong>Error Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>The transaction type</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>transaction_id</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>unique_id</td>
<td>string(32)</td>
<td>Unique id defined by gate (must later be used if capturing, voiding or refunding a transaction)</td>
</tr>
<tr>
<td>code</td>
<td>integer</td>
<td>Error code according to <a href="#error-code-table">Error code table</a></td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
<tr>
<td>message</td>
<td>string(255)</td>
<td>Human readable error message which can be displayed to users.</td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when the transaction was processed in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Combined date and time</a> e.g. 2007-08- 30T17:46:11Z</td>
</tr>
<tr>
<td>descriptor</td>
<td>string</td>
<td>Static descriptor MID info as configured on the gateway</td>
</tr>
<tr>
<td>amount</td>
<td>integer</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>sent_to_acquirer</td>
<td>string</td>
<td>&quot;true&quot; or &quot;false&quot;</td>
</tr>
</tbody></table>
<h3 id='bancomer'>Bancomer</h3>
<aside class="notice" >
Bancomer offers two options for payments in Mexico, cash payment and bank transfer.
</aside>

<blockquote>
<p>Request</p>
</blockquote>

<pre class="highlight php tab-php"><code>This request is not implemented yet
</code></pre>

<pre class="highlight java tab-java"><code><span class="n">This</span> <span class="n">request</span> <span class="n">is</span> <span class="n">not</span> <span class="n">implemented</span> <span class="n">yet</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>curl https://username:password@gate.emerchantpay.net/process/TERMINAL-TOKEN <span class="se">\</span>
   -H <span class="s2">"Content-Type: text/xml"</span> <span class="se">\</span>
   -d <span class="s1">'
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;bancomer&lt;/transaction_type&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;usage&gt;40208 concert tickets&lt;/usage&gt;
  &lt;remote_ip&gt;245.253.2.12&lt;/remote_ip&gt;
  &lt;return_success_url&gt;http://www.example.com/success&lt;/return_success_url&gt;
  &lt;return_failure_url&gt;http://www.example.com/failure&lt;/return_failure_url&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
  &lt;consumer_reference&gt;barney_rubble&lt;/consumer_reference&gt;
  &lt;national_id&gt;8812128812&lt;/national_id&gt;
  &lt;birth_date&gt;30-12-1992&lt;/birth_date&gt;
  &lt;customer_email&gt;travis@example.com&lt;/customer_email&gt;
  &lt;billing_address&gt;
    &lt;first_name&gt;Barney&lt;/first_name&gt;
    &lt;last_name&gt;Rubble&lt;/last_name&gt;
    &lt;address1&gt;14, Nerazdelni str&lt;/address1&gt;
    &lt;zip_code&gt;1407&lt;/zip_code&gt;
    &lt;city&gt;Mexico City&lt;/city&gt;
    &lt;country&gt;MX&lt;/country&gt;
  &lt;/billing_address&gt;
  &lt;risk_params&gt;
    &lt;user_id&gt;123456&lt;/user_id&gt;
  &lt;/risk_params&gt;
&lt;/payment_transaction&gt;'</span>
</code></pre>

<p><strong>Request Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>required</td>
<td>string(255)</td>
<td>The transaction type: <strong>bancomer</strong></td>
</tr>
<tr>
<td>transaction_id</td>
<td>required</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>usage</td>
<td>optional</td>
<td>string(255)</td>
<td>Description of the transaction for later use</td>
</tr>
<tr>
<td>remote_ip</td>
<td>required*</td>
<td>IPv4 address</td>
<td>IPv4 address of customer</td>
</tr>
<tr>
<td>return_success_url</td>
<td>required</td>
<td>url</td>
<td>URL where customer is sent to after successful payment</td>
</tr>
<tr>
<td>return_failure_url</td>
<td>required</td>
<td>url</td>
<td>URL where customer is sent to after unsuccessful payment</td>
</tr>
<tr>
<td>amount</td>
<td>required</td>
<td>integer &gt; 0</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>required</td>
<td>string(3)</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>consumer_reference</td>
<td>required</td>
<td>string(20)</td>
<td>Consumer reference is a unique consumer identifier</td>
</tr>
<tr>
<td>national_id</td>
<td>required</td>
<td>string(20)</td>
<td>National Identifier number of the customer</td>
</tr>
<tr>
<td>birth_date</td>
<td>optional</td>
<td>string(20)</td>
<td>Birth date of the customer</td>
</tr>
<tr>
<td>customer_email</td>
<td>required</td>
<td>e-mail address</td>
<td>Must contain valid e-mail of customer</td>
</tr>
<tr>
<td><strong>billing_address</strong></td>
<td>required</td>
<td></td>
<td>See <a href="#required-vs-optional-api-params">Required vs Optional API params</a> for details</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;first_name</td>
<td>required*</td>
<td>string(255)</td>
<td>Customer first name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;last_name</td>
<td>required*</td>
<td>string(255)</td>
<td>Customer last name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address1</td>
<td>required*</td>
<td>string(255)</td>
<td>Primary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address2</td>
<td>required*</td>
<td>string(255)</td>
<td>Secondary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;zip_code</td>
<td>required*</td>
<td>string</td>
<td>ZIP code</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;city</td>
<td>required*</td>
<td>string(255)</td>
<td>City</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;state</td>
<td>required*</td>
<td>string(2)</td>
<td>State code in <a href="https://en.wikipedia.org/wiki/ISO_3166-2">ISO 3166-2</a>, required for USA and Canada</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;country</td>
<td>required</td>
<td>string(2)</td>
<td>Country code in <a href="https://www.iso.org/iso-3166-country-codes.html">ISO 3166</a></td>
</tr>
<tr>
<td><strong>shipping_address</strong></td>
<td>optional</td>
<td></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;first_name</td>
<td>optional</td>
<td>string(255)</td>
<td>Customer first name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;last_name</td>
<td>optional</td>
<td>string(255)</td>
<td>Customer last name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address1</td>
<td>optional</td>
<td>string(255)</td>
<td>Primary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address2</td>
<td>optional</td>
<td>string(255)</td>
<td>Secondary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;zip_code</td>
<td>optional</td>
<td>string</td>
<td>ZIP code</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;city</td>
<td>optional</td>
<td>string(255)</td>
<td>City</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;state</td>
<td>optional</td>
<td>string(2)</td>
<td>State code in <a href="https://en.wikipedia.org/wiki/ISO_3166-2">ISO 3166-2</a>, required for USA and Canada</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;country</td>
<td>optional</td>
<td>string(2)</td>
<td>Country code in <a href="https://www.iso.org/iso-3166-country-codes.html">ISO 3166</a></td>
</tr>
</tbody></table>

<p><code>required* = conditionally required</code></p>

<p><strong>Supported countries:</strong></p>

<table><thead>
<tr>
<th>Country</th>
</tr>
</thead><tbody>
<tr>
<td>MX</td>
</tr>
</tbody></table>

<blockquote>
<p>Successful Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>This request is not implemented yet
</code></pre>

<pre class="highlight java tab-java"><code><span class="n">This</span> <span class="n">request</span> <span class="n">is</span> <span class="n">not</span> <span class="n">implemented</span> <span class="n">yet</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;bancomer&lt;/transaction_type&gt;
  &lt;status&gt;pending_async&lt;/status&gt;
  &lt;mode&gt;live&lt;/mode&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;technical_message&gt;Transaction successful!&lt;/technical_message&gt;
  &lt;message&gt;Transaction successful!&lt;/message&gt;
  &lt;redirect_url&gt;https://gate.emerchantpay.net/redirect/to_acquirer/649e1ff35c61&lt;/redirect_url&gt;
  &lt;timestamp&gt;2019-03-14T12:05:57Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
  &lt;sent_to_acquirer&gt;true&lt;/sent_to_acquirer&gt;
&lt;/payment_transaction&gt;
</code></pre>

<p><strong>Successful Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>The transaction type</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>transaction_id</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>unique_id</td>
<td>string(32)</td>
<td>Unique id defined by gate (must later be used if capturing, voiding or refunding a transaction)</td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
<tr>
<td>message</td>
<td>string(255)</td>
<td>Human readable error message which can be displayed to users.</td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>redirect_url</td>
<td>url</td>
<td>URL where user has to be redirected to complete payment process. It is available for asynchronous mode</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when the transaction was processed in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Combined date and time</a> e.g. 2007-08- 30T17:46:11Z</td>
</tr>
<tr>
<td>descriptor</td>
<td>string</td>
<td>Static descriptor MID info as configured on the gateway</td>
</tr>
<tr>
<td>amount</td>
<td>integer</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>sent_to_acquirer</td>
<td>string</td>
<td>&quot;true&quot; or &quot;false&quot;</td>
</tr>
</tbody></table>

<blockquote>
<p>Error Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>This request is not implemented yet
</code></pre>

<pre class="highlight java tab-java"><code><span class="n">This</span> <span class="n">request</span> <span class="n">is</span> <span class="n">not</span> <span class="n">implemented</span> <span class="n">yet</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;bancomer&lt;/transaction_type&gt;
  &lt;status&gt;error&lt;/status&gt;
  &lt;mode&gt;live&lt;/mode&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;code&gt;110&lt;/code&gt;
  &lt;message&gt;Something went wrong, please contact support!&lt;/message&gt;
  &lt;timestamp&gt;2019-03-14T12:05:57Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
  &lt;sent_to_acquirer&gt;true&lt;/sent_to_acquirer&gt;
&lt;/payment_transaction&gt;
</code></pre>

<p><strong>Error Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>The transaction type</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>transaction_id</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>unique_id</td>
<td>string(32)</td>
<td>Unique id defined by gate (must later be used if capturing, voiding or refunding a transaction)</td>
</tr>
<tr>
<td>code</td>
<td>integer</td>
<td>Error code according to <a href="#error-code-table">Error code table</a></td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
<tr>
<td>message</td>
<td>string(255)</td>
<td>Human readable error message which can be displayed to users.</td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when the transaction was processed in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Combined date and time</a> e.g. 2007-08- 30T17:46:11Z</td>
</tr>
<tr>
<td>descriptor</td>
<td>string</td>
<td>Static descriptor MID info as configured on the gateway</td>
</tr>
<tr>
<td>amount</td>
<td>integer</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>sent_to_acquirer</td>
<td>string</td>
<td>&quot;true&quot; or &quot;false&quot;</td>
</tr>
</tbody></table>
<h3 id='bradesco'>Bradesco</h3>
<aside class="notice" >
  Bradesco is a payment service in Brazil
</aside>

<blockquote>
<p>Request</p>
</blockquote>

<pre class="highlight php tab-php"><code>This request is not implemented yet
</code></pre>

<pre class="highlight java tab-java"><code><span class="n">This</span> <span class="n">request</span> <span class="n">is</span> <span class="n">not</span> <span class="n">implemented</span> <span class="n">yet</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>curl https://username:password@gate.emerchantpay.net/process/TERMINAL-TOKEN <span class="se">\</span>
   -H <span class="s2">"Content-Type: text/xml"</span> <span class="se">\</span>
   -d <span class="s1">'
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;bradesco&lt;/transaction_type&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;usage&gt;40208 concert tickets&lt;/usage&gt;
  &lt;remote_ip&gt;245.253.2.12&lt;/remote_ip&gt;
  &lt;return_success_url&gt;http://www.example.com/success&lt;/return_success_url&gt;
  &lt;return_failure_url&gt;http://www.example.com/failure&lt;/return_failure_url&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
  &lt;consumer_reference&gt;barney_rubble&lt;/consumer_reference&gt;
  &lt;national_id&gt;8812128812&lt;/national_id&gt;
  &lt;birth_date&gt;30-12-1992&lt;/birth_date&gt;
  &lt;customer_email&gt;travis@example.com&lt;/customer_email&gt;
  &lt;billing_address&gt;
    &lt;first_name&gt;Barney&lt;/first_name&gt;
    &lt;last_name&gt;Rubble&lt;/last_name&gt;
    &lt;address1&gt;14, Nerazdelni str&lt;/address1&gt;
    &lt;zip_code&gt;1407&lt;/zip_code&gt;
    &lt;city&gt;Rio de Janeiro&lt;/city&gt;
    &lt;country&gt;BR&lt;/country&gt;
  &lt;/billing_address&gt;
  &lt;risk_params&gt;
    &lt;user_id&gt;123456&lt;/user_id&gt;
  &lt;/risk_params&gt;
&lt;/payment_transaction&gt;'</span>
</code></pre>

<p><strong>Request Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>required</td>
<td>string(255)</td>
<td>The transaction type: <strong>bradesco</strong></td>
</tr>
<tr>
<td>transaction_id</td>
<td>required</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>usage</td>
<td>optional</td>
<td>string(255)</td>
<td>Description of the transaction for later use</td>
</tr>
<tr>
<td>remote_ip</td>
<td>required*</td>
<td>IPv4 address</td>
<td>IPv4 address of customer</td>
</tr>
<tr>
<td>return_success_url</td>
<td>required</td>
<td>url</td>
<td>URL where customer is sent to after successful payment</td>
</tr>
<tr>
<td>return_failure_url</td>
<td>required</td>
<td>url</td>
<td>URL where customer is sent to after unsuccessful payment</td>
</tr>
<tr>
<td>amount</td>
<td>required</td>
<td>integer &gt; 0</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>required</td>
<td>string(3)</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>consumer_reference</td>
<td>required</td>
<td>string(20)</td>
<td>Consumer reference is a unique consumer identifier</td>
</tr>
<tr>
<td>national_id</td>
<td>required</td>
<td>string(20)</td>
<td>National Identifier number of the customer</td>
</tr>
<tr>
<td>birth_date</td>
<td>optional</td>
<td>string(20)</td>
<td>Birth date of the customer</td>
</tr>
<tr>
<td>customer_email</td>
<td>required</td>
<td>e-mail address</td>
<td>Must contain valid e-mail of customer</td>
</tr>
<tr>
<td><strong>billing_address</strong></td>
<td>required</td>
<td></td>
<td>See <a href="#required-vs-optional-api-params">Required vs Optional API params</a> for details</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;first_name</td>
<td>required*</td>
<td>string(255)</td>
<td>Customer first name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;last_name</td>
<td>required*</td>
<td>string(255)</td>
<td>Customer last name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address1</td>
<td>required*</td>
<td>string(255)</td>
<td>Primary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address2</td>
<td>required*</td>
<td>string(255)</td>
<td>Secondary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;zip_code</td>
<td>required*</td>
<td>string</td>
<td>ZIP code</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;city</td>
<td>required*</td>
<td>string(255)</td>
<td>City</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;state</td>
<td>required*</td>
<td>string(2)</td>
<td>State code in <a href="https://en.wikipedia.org/wiki/ISO_3166-2">ISO 3166-2</a>, required for USA and Canada</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;country</td>
<td>required</td>
<td>string(2)</td>
<td>Country code in <a href="https://www.iso.org/iso-3166-country-codes.html">ISO 3166</a></td>
</tr>
<tr>
<td><strong>shipping_address</strong></td>
<td>optional</td>
<td></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;first_name</td>
<td>optional</td>
<td>string(255)</td>
<td>Customer first name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;last_name</td>
<td>optional</td>
<td>string(255)</td>
<td>Customer last name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address1</td>
<td>optional</td>
<td>string(255)</td>
<td>Primary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address2</td>
<td>optional</td>
<td>string(255)</td>
<td>Secondary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;zip_code</td>
<td>optional</td>
<td>string</td>
<td>ZIP code</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;city</td>
<td>optional</td>
<td>string(255)</td>
<td>City</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;state</td>
<td>optional</td>
<td>string(2)</td>
<td>State code in <a href="https://en.wikipedia.org/wiki/ISO_3166-2">ISO 3166-2</a>, required for USA and Canada</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;country</td>
<td>optional</td>
<td>string(2)</td>
<td>Country code in <a href="https://www.iso.org/iso-3166-country-codes.html">ISO 3166</a></td>
</tr>
</tbody></table>

<p><code>required* = conditionally required</code></p>

<p><strong>Supported countries:</strong></p>

<table><thead>
<tr>
<th>Country</th>
</tr>
</thead><tbody>
<tr>
<td>BR</td>
</tr>
</tbody></table>

<blockquote>
<p>Successful Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>This request is not implemented yet
</code></pre>

<pre class="highlight java tab-java"><code><span class="n">This</span> <span class="n">request</span> <span class="n">is</span> <span class="n">not</span> <span class="n">implemented</span> <span class="n">yet</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;bradesco&lt;/transaction_type&gt;
  &lt;status&gt;pending_async&lt;/status&gt;
  &lt;mode&gt;live&lt;/mode&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;technical_message&gt;Transaction successful!&lt;/technical_message&gt;
  &lt;message&gt;Transaction successful!&lt;/message&gt;
  &lt;redirect_url&gt;https://gate.emerchantpay.net/redirect/to_acquirer/649e1ff35c61&lt;/redirect_url&gt;
  &lt;timestamp&gt;2019-03-14T12:05:57Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
  &lt;sent_to_acquirer&gt;true&lt;/sent_to_acquirer&gt;
&lt;/payment_transaction&gt;
</code></pre>

<p><strong>Successful Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>The transaction type</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>transaction_id</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>unique_id</td>
<td>string(32)</td>
<td>Unique id defined by gate (must later be used if capturing, voiding or refunding a transaction)</td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
<tr>
<td>message</td>
<td>string(255)</td>
<td>Human readable error message which can be displayed to users.</td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>redirect_url</td>
<td>url</td>
<td>URL where user has to be redirected to complete payment process. It is available for asynchronous mode</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when the transaction was processed in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Combined date and time</a> e.g. 2007-08- 30T17:46:11Z</td>
</tr>
<tr>
<td>descriptor</td>
<td>string</td>
<td>Static descriptor MID info as configured on the gateway</td>
</tr>
<tr>
<td>amount</td>
<td>integer</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>sent_to_acquirer</td>
<td>string</td>
<td>&quot;true&quot; or &quot;false&quot;</td>
</tr>
</tbody></table>

<blockquote>
<p>Error Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>This request is not implemented yet
</code></pre>

<pre class="highlight java tab-java"><code><span class="n">This</span> <span class="n">request</span> <span class="n">is</span> <span class="n">not</span> <span class="n">implemented</span> <span class="n">yet</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;bradesco&lt;/transaction_type&gt;
  &lt;status&gt;error&lt;/status&gt;
  &lt;mode&gt;live&lt;/mode&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;code&gt;110&lt;/code&gt;
  &lt;message&gt;Something went wrong, please contact support!&lt;/message&gt;
  &lt;timestamp&gt;2019-03-14T12:05:57Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
  &lt;sent_to_acquirer&gt;true&lt;/sent_to_acquirer&gt;
&lt;/payment_transaction&gt;
</code></pre>

<p><strong>Error Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>The transaction type</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>transaction_id</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>unique_id</td>
<td>string(32)</td>
<td>Unique id defined by gate (must later be used if capturing, voiding or refunding a transaction)</td>
</tr>
<tr>
<td>code</td>
<td>integer</td>
<td>Error code according to <a href="#error-code-table">Error code table</a></td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
<tr>
<td>message</td>
<td>string(255)</td>
<td>Human readable error message which can be displayed to users.</td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when the transaction was processed in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Combined date and time</a> e.g. 2007-08- 30T17:46:11Z</td>
</tr>
<tr>
<td>descriptor</td>
<td>string</td>
<td>Static descriptor MID info as configured on the gateway</td>
</tr>
<tr>
<td>amount</td>
<td>integer</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>sent_to_acquirer</td>
<td>string</td>
<td>&quot;true&quot; or &quot;false&quot;</td>
</tr>
</tbody></table>
<h3 id='entercash'>Entercash</h3>
<aside class="notice" >
Entercash is a payment method provider across Europe
</aside>

<blockquote>
<p>Request</p>
</blockquote>

<pre class="highlight php tab-php"><code>This request is not implemented yet
</code></pre>

<pre class="highlight java tab-java"><code><span class="n">This</span> <span class="n">request</span> <span class="n">is</span> <span class="n">not</span> <span class="n">implemented</span> <span class="n">yet</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>curl https://username:password@gate.emerchantpay.net/process/TERMINAL-TOKEN <span class="se">\</span>
   -H <span class="s2">"Content-Type: text/xml"</span> <span class="se">\</span>
   -d <span class="s1">'
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;entercash&lt;/transaction_type&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;usage&gt;40208 concert tickets&lt;/usage&gt;
  &lt;remote_ip&gt;245.253.2.12&lt;/remote_ip&gt;
  &lt;return_success_url&gt;http://www.example.com/success&lt;/return_success_url&gt;
  &lt;return_failure_url&gt;http://www.example.com/failure&lt;/return_failure_url&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;EUR&lt;/currency&gt;
  &lt;consumer_reference&gt;123456&lt;/consumer_reference&gt;
  &lt;customer_email&gt;travis@example.com&lt;/customer_email&gt;
  &lt;billing_address&gt;
    &lt;first_name&gt;Barney&lt;/first_name&gt;
    &lt;last_name&gt;Rubble&lt;/last_name&gt;
    &lt;address1&gt;14, Nerazdelni str&lt;/address1&gt;
    &lt;zip_code&gt;1407&lt;/zip_code&gt;
    &lt;city&gt;Graz&lt;/city&gt;
    &lt;country&gt;AT&lt;/country&gt;
  &lt;/billing_address&gt;
  &lt;risk_params&gt;
    &lt;user_id&gt;123456&lt;/user_id&gt;
  &lt;/risk_params&gt;
&lt;/payment_transaction&gt;'</span>
</code></pre>

<p><strong>Request Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>required</td>
<td>string(255)</td>
<td>The transaction type: <strong>entercash</strong></td>
</tr>
<tr>
<td>transaction_id</td>
<td>required</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>usage</td>
<td>optional</td>
<td>string(255)</td>
<td>Description of the transaction for later use</td>
</tr>
<tr>
<td>remote_ip</td>
<td>required*</td>
<td>IPv4 address</td>
<td>IPv4 address of customer</td>
</tr>
<tr>
<td>return_success_url</td>
<td>required</td>
<td>url</td>
<td>URL where customer is sent to after successful payment</td>
</tr>
<tr>
<td>return_failure_url</td>
<td>required</td>
<td>url</td>
<td>URL where customer is sent to after unsuccessful payment</td>
</tr>
<tr>
<td>amount</td>
<td>required</td>
<td>integer &gt; 0</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>required</td>
<td>string(3)</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>consumer_reference</td>
<td>required</td>
<td>string(20)</td>
<td>Consumer reference is a unique consumer identifier</td>
</tr>
<tr>
<td>iban</td>
<td>optional</td>
<td>string</td>
<td>Valid German (when selected Germany as country) or Austrian (when selected Austria as country) IBAN</td>
</tr>
<tr>
<td>bic</td>
<td>optional</td>
<td>string</td>
<td>Valid BIC when Germany or Austria selected as country</td>
</tr>
<tr>
<td>customer_email</td>
<td>required</td>
<td>e-mail address</td>
<td>Must contain valid e-mail of customer</td>
</tr>
<tr>
<td><strong>billing_address</strong></td>
<td>required</td>
<td></td>
<td>See <a href="#required-vs-optional-api-params">Required vs Optional API params</a> for details</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;first_name</td>
<td>required*</td>
<td>string(255)</td>
<td>Customer first name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;last_name</td>
<td>required*</td>
<td>string(255)</td>
<td>Customer last name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address1</td>
<td>required*</td>
<td>string(255)</td>
<td>Primary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address2</td>
<td>required*</td>
<td>string(255)</td>
<td>Secondary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;zip_code</td>
<td>required*</td>
<td>string</td>
<td>ZIP code</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;city</td>
<td>required*</td>
<td>string(255)</td>
<td>City</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;state</td>
<td>required*</td>
<td>string(2)</td>
<td>State code in <a href="https://en.wikipedia.org/wiki/ISO_3166-2">ISO 3166-2</a>, required for USA and Canada</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;country</td>
<td>required</td>
<td>string(2)</td>
<td>Country code in <a href="https://www.iso.org/iso-3166-country-codes.html">ISO 3166</a></td>
</tr>
<tr>
<td><strong>shipping_address</strong></td>
<td>optional</td>
<td></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;first_name</td>
<td>optional</td>
<td>string(255)</td>
<td>Customer first name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;last_name</td>
<td>optional</td>
<td>string(255)</td>
<td>Customer last name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address1</td>
<td>optional</td>
<td>string(255)</td>
<td>Primary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address2</td>
<td>optional</td>
<td>string(255)</td>
<td>Secondary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;zip_code</td>
<td>optional</td>
<td>string</td>
<td>ZIP code</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;city</td>
<td>optional</td>
<td>string(255)</td>
<td>City</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;state</td>
<td>optional</td>
<td>string(2)</td>
<td>State code in <a href="https://en.wikipedia.org/wiki/ISO_3166-2">ISO 3166-2</a>, required for USA and Canada</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;country</td>
<td>optional</td>
<td>string(2)</td>
<td>Country code in <a href="https://www.iso.org/iso-3166-country-codes.html">ISO 3166</a></td>
</tr>
</tbody></table>

<p><code>required* = conditionally required</code></p>

<p><strong>Supported currencies and countries:</strong></p>

<table><thead>
<tr>
<th>Currency code</th>
<th>Country code</th>
</tr>
</thead><tbody>
<tr>
<td>EUR</td>
<td>AT</td>
</tr>
<tr>
<td>EUR</td>
<td>DE</td>
</tr>
<tr>
<td>EUR</td>
<td>FI</td>
</tr>
<tr>
<td>SEK</td>
<td>SE</td>
</tr>
</tbody></table>

<blockquote>
<p>Successful Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>This request is not implemented yet
</code></pre>

<pre class="highlight java tab-java"><code><span class="n">This</span> <span class="n">request</span> <span class="n">is</span> <span class="n">not</span> <span class="n">implemented</span> <span class="n">yet</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;entercash&lt;/transaction_type&gt;
  &lt;status&gt;pending_async&lt;/status&gt;
  &lt;mode&gt;live&lt;/mode&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;technical_message&gt;Transaction successful!&lt;/technical_message&gt;
  &lt;message&gt;Transaction successful!&lt;/message&gt;
  &lt;redirect_url&gt;https://gate.emerchantpay.net/redirect/to_acquirer/649e1ff35c61&lt;/redirect_url&gt;
  &lt;timestamp&gt;2019-03-14T12:05:57Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;EUR&lt;/currency&gt;
  &lt;sent_to_acquirer&gt;true&lt;/sent_to_acquirer&gt;
&lt;/payment_transaction&gt;
</code></pre>

<p><strong>Successful Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>The transaction type</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>transaction_id</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>unique_id</td>
<td>string(32)</td>
<td>Unique id defined by gate (must later be used if capturing, voiding or refunding a transaction)</td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
<tr>
<td>message</td>
<td>string(255)</td>
<td>Human readable error message which can be displayed to users.</td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>redirect_url</td>
<td>url</td>
<td>URL where user has to be redirected to complete payment process. It is available for asynchronous mode</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when the transaction was processed in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Combined date and time</a> e.g. 2007-08- 30T17:46:11Z</td>
</tr>
<tr>
<td>descriptor</td>
<td>string</td>
<td>Static descriptor MID info as configured on the gateway</td>
</tr>
<tr>
<td>amount</td>
<td>integer</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>sent_to_acquirer</td>
<td>string</td>
<td>&quot;true&quot; or &quot;false&quot;</td>
</tr>
</tbody></table>

<blockquote>
<p>Error Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>This request is not implemented yet
</code></pre>

<pre class="highlight java tab-java"><code><span class="n">This</span> <span class="n">request</span> <span class="n">is</span> <span class="n">not</span> <span class="n">implemented</span> <span class="n">yet</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;entercash&lt;/transaction_type&gt;
  &lt;status&gt;error&lt;/status&gt;
  &lt;mode&gt;live&lt;/mode&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;code&gt;110&lt;/code&gt;
  &lt;message&gt;Something went wrong, please contact support!&lt;/message&gt;
  &lt;timestamp&gt;2019-03-14T12:05:57Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;EUR&lt;/currency&gt;
  &lt;sent_to_acquirer&gt;true&lt;/sent_to_acquirer&gt;
&lt;/payment_transaction&gt;
</code></pre>

<p><strong>Error Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>The transaction type</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>transaction_id</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>unique_id</td>
<td>string(32)</td>
<td>Unique id defined by gate (must later be used if capturing, voiding or refunding a transaction)</td>
</tr>
<tr>
<td>code</td>
<td>integer</td>
<td>Error code according to <a href="#error-code-table">Error code table</a></td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
<tr>
<td>message</td>
<td>string(255)</td>
<td>Human readable error message which can be displayed to users.</td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when the transaction was processed in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Combined date and time</a> e.g. 2007-08- 30T17:46:11Z</td>
</tr>
<tr>
<td>descriptor</td>
<td>string</td>
<td>Static descriptor MID info as configured on the gateway</td>
</tr>
<tr>
<td>amount</td>
<td>integer</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>sent_to_acquirer</td>
<td>string</td>
<td>&quot;true&quot; or &quot;false&quot;</td>
</tr>
</tbody></table>
<h3 id='eps'>EPS</h3>
<p>EPS is the main bank transfer payment method in Austria. Every transaction is guaranteed via the scheme.</p>

<blockquote>
<p>Request</p>
</blockquote>

<pre class="highlight php tab-php"><code><span class="cp">&lt;?php</span>

<span class="c1">// Load the pre-configured ini file...
</span><span class="nx">\Genesis\Config</span><span class="o">::</span><span class="na">loadSettings</span><span class="p">(</span><span class="s1">'/path/to/config.ini'</span><span class="p">);</span>

<span class="nv">$genesis</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Genesis</span><span class="p">(</span><span class="s1">'Financial\Alternatives\PPRO'</span><span class="p">);</span>
<span class="nv">$request</span> <span class="o">=</span> <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">request</span><span class="p">();</span>

<span class="nv">$request</span>
  <span class="o">-&gt;</span><span class="na">setTransactionId</span><span class="p">(</span><span class="s1">'43671'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setPaymentType</span><span class="p">(</span><span class="s1">'eps'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setUsage</span><span class="p">(</span><span class="s1">'40208 concert tickets'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setRemoteIp</span><span class="p">(</span><span class="s1">'245.253.2.12'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setReturnSuccessUrl</span><span class="p">(</span><span class="s1">'http://www.example.com/success'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setReturnFailureUrl</span><span class="p">(</span><span class="s1">'http://www.example.com/failure'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setAmount</span><span class="p">(</span><span class="s1">'100'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCurrency</span><span class="p">(</span><span class="s1">'EUR'</span><span class="p">)</span>


  <span class="c1">// Billing Address
</span>  <span class="o">-&gt;</span><span class="na">setBillingFirstName</span><span class="p">(</span><span class="s1">'Barney'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingLastName</span><span class="p">(</span><span class="s1">'Rubble'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingAddress1</span><span class="p">(</span><span class="s1">'14, Nerazdelni str'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingZipCode</span><span class="p">(</span><span class="s1">'1407'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingCity</span><span class="p">(</span><span class="s1">'Vienna'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingCountry</span><span class="p">(</span><span class="s1">'AT'</span><span class="p">);</span>

<span class="k">try</span> <span class="p">{</span>
    <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">execute</span><span class="p">();</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">response</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">getResponseObject</span><span class="p">();</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">\Exception</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$e</span><span class="o">-&gt;</span><span class="na">getMessage</span><span class="p">();</span>
<span class="p">}</span>
</code></pre>

<pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.GenesisClient</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.TransactionResult</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.constants.Endpoints</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.constants.Environments</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.requests.financial.apm.PProRequest</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.model.Transaction</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Configuration</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Country</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Currency</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.math.BigDecimal</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.MalformedURLException</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.URL</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">GenesisExample</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">MalformedURLException</span> <span class="o">{</span>

    <span class="c1">// Create configuration</span>
    <span class="n">Configuration</span> <span class="n">configuration</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Configuration</span><span class="o">(</span><span class="n">Environments</span><span class="o">.</span><span class="na">STAGING</span><span class="o">,</span> <span class="n">Endpoints</span><span class="o">.</span><span class="na">EMERCHANTPAY</span><span class="o">);</span>

    <span class="n">configuration</span><span class="o">.</span><span class="na">setUsername</span><span class="o">(</span><span class="s">"SET_YOUR_USERNAME"</span><span class="o">);</span>
    <span class="n">configuration</span><span class="o">.</span><span class="na">setPassword</span><span class="o">(</span><span class="s">"SET_YOUR_PASSWORD"</span><span class="o">);</span>
    <span class="n">configuration</span><span class="o">.</span><span class="na">setToken</span><span class="o">(</span><span class="s">"SET_YOUR_TOKEN"</span><span class="o">);</span>

    <span class="n">PProRequest</span> <span class="n">request</span> <span class="o">=</span> <span class="k">new</span> <span class="n">PProRequest</span><span class="o">();</span>

    <span class="n">request</span><span class="o">.</span><span class="na">setTransactionId</span><span class="o">(</span><span class="s">"43671"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setPaymentType</span><span class="o">(</span><span class="s">"eps"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setUsage</span><span class="o">(</span><span class="s">"40208 concert tickets"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setRemoteIp</span><span class="o">(</span><span class="s">"245.253.2.12"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setReturnSuccessUrl</span><span class="o">(</span><span class="k">new</span> <span class="n">URL</span><span class="o">(</span><span class="s">"http://www.example.com/success"</span><span class="o">));</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setReturnFailureUrl</span><span class="o">(</span><span class="k">new</span> <span class="n">URL</span><span class="o">(</span><span class="s">"http://www.example.com/failure"</span><span class="o">));</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setAmount</span><span class="o">(</span><span class="k">new</span> <span class="n">BigDecimal</span><span class="o">(</span><span class="mi">100</span><span class="o">));</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCurrency</span><span class="o">(</span><span class="s">"EUR"</span><span class="o">);</span>


    <span class="c1">// Billing Address</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingFirstname</span><span class="o">(</span><span class="s">"Barney"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingLastname</span><span class="o">(</span><span class="s">"Rubble"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingPrimaryAddress</span><span class="o">(</span><span class="s">"14, Nerazdelni str"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingZipCode</span><span class="o">(</span><span class="s">"1407"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingCity</span><span class="o">(</span><span class="s">"Vienna"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingCountry</span><span class="o">(</span><span class="s">"AT"</span><span class="o">);</span>

    <span class="n">GenesisClient</span> <span class="n">client</span> <span class="o">=</span> <span class="k">new</span> <span class="n">GenesisClient</span><span class="o">(</span><span class="n">configuration</span><span class="o">,</span> <span class="n">request</span><span class="o">);</span>
    <span class="n">client</span><span class="o">.</span><span class="na">execute</span><span class="o">();</span>

    <span class="c1">// Parse Payment result</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">client</span><span class="o">.</span><span class="na">getResponse</span><span class="o">());</span>

  <span class="o">}</span>
<span class="o">}</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="kd">var</span> <span class="nx">genesis</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'genesis.js/lib/genesis.js'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">transaction</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">genesis</span><span class="p">.</span><span class="nx">transaction</span><span class="p">();</span>

<span class="kd">var</span> <span class="nx">failure</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">reason</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">reason</span><span class="p">);</span>
<span class="p">};</span>

<span class="kd">var</span> <span class="nx">success</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>

<span class="nx">transaction</span><span class="p">.</span><span class="nx">ppro</span><span class="p">(</span>
  <span class="p">{</span>
    <span class="s2">"transaction_id"</span><span class="p">:</span> <span class="s2">"43671"</span><span class="p">,</span>
    <span class="s2">"payment_type"</span><span class="p">:</span> <span class="s2">"eps"</span><span class="p">,</span>
    <span class="s2">"usage"</span><span class="p">:</span> <span class="s2">"40208 concert tickets"</span><span class="p">,</span>
    <span class="s2">"remote_ip"</span><span class="p">:</span> <span class="s2">"245.253.2.12"</span><span class="p">,</span>
    <span class="s2">"return_success_url"</span><span class="p">:</span> <span class="s2">"http://www.example.com/success"</span><span class="p">,</span>
    <span class="s2">"return_failure_url"</span><span class="p">:</span> <span class="s2">"http://www.example.com/failure"</span><span class="p">,</span>
    <span class="s2">"amount"</span><span class="p">:</span> <span class="s2">"100"</span><span class="p">,</span>
    <span class="s2">"currency"</span><span class="p">:</span> <span class="s2">"EUR"</span><span class="p">,</span>
    <span class="s2">"billing_address"</span><span class="p">:</span> <span class="p">{</span>
      <span class="s2">"first_name"</span><span class="p">:</span> <span class="s2">"Barney"</span><span class="p">,</span>
      <span class="s2">"last_name"</span><span class="p">:</span> <span class="s2">"Rubble"</span><span class="p">,</span>
      <span class="s2">"address1"</span><span class="p">:</span> <span class="s2">"14, Nerazdelni str"</span><span class="p">,</span>
      <span class="s2">"zip_code"</span><span class="p">:</span> <span class="s2">"1407"</span><span class="p">,</span>
      <span class="s2">"city"</span><span class="p">:</span> <span class="s2">"Vienna"</span><span class="p">,</span>
      <span class="s2">"country"</span><span class="p">:</span> <span class="s2">"AT"</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">).</span><span class="nx">send</span><span class="p">()</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">success</span><span class="p">)</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">failure</span><span class="p">);</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>curl https://username:password@gate.emerchantpay.net/process/TERMINAL-TOKEN <span class="se">\</span>
   -H <span class="s2">"Content-Type: text/xml"</span> <span class="se">\</span>
   -d <span class="s1">'
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;ppro&lt;/transaction_type&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;payment_type&gt;eps&lt;/payment_type&gt;
  &lt;usage&gt;40208 concert tickets&lt;/usage&gt;
  &lt;remote_ip&gt;245.253.2.12&lt;/remote_ip&gt;
  &lt;return_success_url&gt;http://www.example.com/success&lt;/return_success_url&gt;
  &lt;return_failure_url&gt;http://www.example.com/failure&lt;/return_failure_url&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;EUR&lt;/currency&gt;
  &lt;billing_address&gt;
    &lt;first_name&gt;Barney&lt;/first_name&gt;
    &lt;last_name&gt;Rubble&lt;/last_name&gt;
    &lt;address1&gt;14, Nerazdelni str&lt;/address1&gt;
    &lt;zip_code&gt;1407&lt;/zip_code&gt;
    &lt;city&gt;Vienna&lt;/city&gt;
    &lt;country&gt;AT&lt;/country&gt;
  &lt;/billing_address&gt;
&lt;/payment_transaction&gt;'</span>
</code></pre>

<p><strong>Request Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>required</td>
<td>string(255)</td>
<td><strong>ppro</strong> or <strong>eps</strong>. Contact tech support at <a href="mailto:tech-support@emerchantpay.net">tech-support@emerchantpay.net</a> for more details.</td>
</tr>
<tr>
<td>transaction_id</td>
<td>required</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>payment_type</td>
<td>required<sup>1</sup></td>
<td>eps</td>
<td>EPS. Contact tech support for more details.</td>
</tr>
<tr>
<td>usage</td>
<td>optional</td>
<td>string(255)</td>
<td>Description of the transaction for later use</td>
</tr>
<tr>
<td>remote_ip</td>
<td>required*</td>
<td>IPv4 address</td>
<td>IPv4 address of customer</td>
</tr>
<tr>
<td>return_success_url</td>
<td>required</td>
<td>url</td>
<td>URL where customer is sent to after successful payment</td>
</tr>
<tr>
<td>return_failure_url</td>
<td>required</td>
<td>url</td>
<td>URL where customer is sent to after unsuccessful payment</td>
</tr>
<tr>
<td>amount</td>
<td>required</td>
<td>integer &gt; 0</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>required</td>
<td>string(3)</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td><strong>billing_address</strong></td>
<td>required</td>
<td></td>
<td>See <a href="#required-vs-optional-api-params">Required vs Optional API params</a> for details</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;first_name</td>
<td>required*</td>
<td>string(255)</td>
<td>Customer first name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;last_name</td>
<td>required*</td>
<td>string(255)</td>
<td>Customer last name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address1</td>
<td>required*</td>
<td>string(255)</td>
<td>Primary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address2</td>
<td>required*</td>
<td>string(255)</td>
<td>Secondary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;zip_code</td>
<td>required*</td>
<td>string</td>
<td>ZIP code</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;city</td>
<td>required*</td>
<td>string(255)</td>
<td>City</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;state</td>
<td>required*</td>
<td>string(2)</td>
<td>State code in <a href="https://en.wikipedia.org/wiki/ISO_3166-2">ISO 3166-2</a>, required for USA and Canada</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;country</td>
<td>required</td>
<td>string(2)</td>
<td>Country code in <a href="https://www.iso.org/iso-3166-country-codes.html">ISO 3166</a></td>
</tr>
<tr>
<td><strong>shipping_address</strong></td>
<td>optional</td>
<td></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;first_name</td>
<td>optional</td>
<td>string(255)</td>
<td>Customer first name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;last_name</td>
<td>optional</td>
<td>string(255)</td>
<td>Customer last name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address1</td>
<td>optional</td>
<td>string(255)</td>
<td>Primary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address2</td>
<td>optional</td>
<td>string(255)</td>
<td>Secondary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;zip_code</td>
<td>optional</td>
<td>string</td>
<td>ZIP code</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;city</td>
<td>optional</td>
<td>string(255)</td>
<td>City</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;state</td>
<td>optional</td>
<td>string(2)</td>
<td>State code in <a href="https://en.wikipedia.org/wiki/ISO_3166-2">ISO 3166-2</a>, required for USA and Canada</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;country</td>
<td>optional</td>
<td>string(2)</td>
<td>Country code in <a href="https://www.iso.org/iso-3166-country-codes.html">ISO 3166</a></td>
</tr>
</tbody></table>

<p><code>required* = conditionally required</code></p>

<p><code>1 - payment_type must be submitted only when the transaction type is set to ppro</code></p>

<p><strong>Supported countries and countries</strong></p>

<table><thead>
<tr>
<th>Currency code</th>
<th>Country code</th>
</tr>
</thead><tbody>
<tr>
<td>EUR</td>
<td>AT</td>
</tr>
</tbody></table>

<blockquote>
<p>Successful Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>stdClass Object
(
    [transaction_type] =&gt; ppro
    [status] =&gt; pending_async
    [mode] =&gt; live
    [transaction_id] =&gt; 43671
    [unique_id] =&gt; 44177a21403427eb96664a6d7e5d5d48
    [technical_message] =&gt; Transaction successful!
    [message] =&gt; Transaction successful!
    [redirect_url] =&gt; https://gate.emerchantpay.net/redirect/to_acquirer/649e1ff35c61
    [timestamp] =&gt; DateTime Object
        (
            [date] =&gt; 2019-03-14 12:05:58.000000
            [timezone_type] =&gt; 2
            [timezone] =&gt; Z
        )
    [descriptor] =&gt; Descriptor one
    [amount] =&gt; 100
    [currency] =&gt; EUR
    [sent_to_acquirer] =&gt; true
)
</code></pre>

<pre class="highlight java tab-java"><code><span class="o">&lt;</span><span class="n">payment_response</span> <span class="n">content</span><span class="o">=[</span>
    <span class="o">&lt;</span><span class="n">transaction_type</span> <span class="n">content</span><span class="o">=[</span><span class="n">ppro</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">status</span> <span class="n">content</span><span class="o">=[</span><span class="n">pending_async</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">mode</span> <span class="n">content</span><span class="o">=[</span><span class="n">live</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">transaction_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">43671</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">unique_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">44177</span><span class="n">a21403427eb96664a6d7e5d5d48</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">technical_message</span> <span class="n">content</span><span class="o">=[</span><span class="n">Transaction</span> <span class="n">successful</span><span class="o">!]&gt;</span>
    <span class="o">&lt;</span><span class="n">message</span> <span class="n">content</span><span class="o">=[</span><span class="n">Transaction</span> <span class="n">successful</span><span class="o">!]&gt;</span>
    <span class="o">&lt;</span><span class="n">redirect_url</span> <span class="n">content</span><span class="o">=[</span><span class="nl">https:</span><span class="c1">//gate.emerchantpay.net/redirect/to_acquirer/649e1ff35c61]&gt;</span>
    <span class="o">&lt;</span><span class="n">timestamp</span> <span class="n">content</span><span class="o">=[</span><span class="mi">2019</span><span class="o">-</span><span class="mo">03</span><span class="o">-</span><span class="mi">14</span><span class="nl">T12:</span><span class="mo">05</span><span class="o">:</span><span class="mi">58</span><span class="n">Z</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">descriptor</span> <span class="n">content</span><span class="o">=[</span><span class="n">Descriptor</span> <span class="n">one</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">amount</span> <span class="n">content</span><span class="o">=[</span><span class="mi">100</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">currency</span> <span class="n">content</span><span class="o">=[</span><span class="n">EUR</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">sent_to_acquirer</span> <span class="n">content</span><span class="o">=[</span><span class="kc">true</span><span class="o">]&gt;</span>
<span class="o">]&gt;</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="p">{</span>
    <span class="nl">transaction_type</span><span class="p">:</span> <span class="s2">"ppro"</span><span class="p">,</span>
    <span class="nx">status</span><span class="p">:</span> <span class="s2">"pending_async"</span><span class="p">,</span>
    <span class="nx">mode</span><span class="p">:</span> <span class="s2">"live"</span><span class="p">,</span>
    <span class="nx">transaction_id</span><span class="p">:</span> <span class="s2">"43671"</span><span class="p">,</span>
    <span class="nx">unique_id</span><span class="p">:</span> <span class="s2">"44177a21403427eb96664a6d7e5d5d48"</span><span class="p">,</span>
    <span class="nx">technical_message</span><span class="p">:</span> <span class="s2">"Transaction successful!"</span><span class="p">,</span>
    <span class="nx">message</span><span class="p">:</span> <span class="s2">"Transaction successful!"</span><span class="p">,</span>
    <span class="nx">redirect_url</span><span class="p">:</span> <span class="s2">"https://gate.emerchantpay.net/redirect/to_acquirer/649e1ff35c61"</span><span class="p">,</span>
    <span class="nx">timestamp</span><span class="p">:</span> <span class="s2">"2019-03-14T12:05:58Z"</span><span class="p">,</span>
    <span class="nx">descriptor</span><span class="p">:</span> <span class="s2">"Descriptor one"</span><span class="p">,</span>
    <span class="nx">amount</span><span class="p">:</span> <span class="s2">"100"</span><span class="p">,</span>
    <span class="nx">currency</span><span class="p">:</span> <span class="s2">"EUR"</span><span class="p">,</span>
    <span class="nx">sent_to_acquirer</span><span class="p">:</span> <span class="s2">"true"</span><span class="p">,</span>
<span class="p">}</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;ppro&lt;/transaction_type&gt;
  &lt;status&gt;pending_async&lt;/status&gt;
  &lt;mode&gt;live&lt;/mode&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;technical_message&gt;Transaction successful!&lt;/technical_message&gt;
  &lt;message&gt;Transaction successful!&lt;/message&gt;
  &lt;redirect_url&gt;https://gate.emerchantpay.net/redirect/to_acquirer/649e1ff35c61&lt;/redirect_url&gt;
  &lt;timestamp&gt;2019-03-14T12:05:58Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;EUR&lt;/currency&gt;
  &lt;sent_to_acquirer&gt;true&lt;/sent_to_acquirer&gt;
&lt;/payment_transaction&gt;
</code></pre>

<p><strong>Successful Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>The transaction type</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>transaction_id</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>unique_id</td>
<td>string(32)</td>
<td>Unique id defined by gate (must later be used if capturing, voiding or refunding a transaction)</td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
<tr>
<td>message</td>
<td>string(255)</td>
<td>Human readable error message which can be displayed to users.</td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>redirect_url</td>
<td>url</td>
<td>URL where user has to be redirected to complete payment process. It is available for asynchronous mode</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when the transaction was processed in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Combined date and time</a> e.g. 2007-08- 30T17:46:11Z</td>
</tr>
<tr>
<td>descriptor</td>
<td>string</td>
<td>Static descriptor MID info as configured on the gateway</td>
</tr>
<tr>
<td>amount</td>
<td>integer</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>sent_to_acquirer</td>
<td>string</td>
<td>&quot;true&quot; or &quot;false&quot;</td>
</tr>
</tbody></table>

<blockquote>
<p>Error Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>stdClass Object
(
    [transaction_type] =&gt; ppro
    [status] =&gt; error
    [mode] =&gt; live
    [transaction_id] =&gt; 43671
    [unique_id] =&gt; 44177a21403427eb96664a6d7e5d5d48
    [code] =&gt; 110
    [message] =&gt; Something went wrong, please contact support!
    [timestamp] =&gt; DateTime Object
        (
            [date] =&gt; 2019-03-14 12:05:58.000000
            [timezone_type] =&gt; 2
            [timezone] =&gt; Z
        )
    [descriptor] =&gt; Descriptor one
    [amount] =&gt; 100
    [currency] =&gt; EUR
    [sent_to_acquirer] =&gt; true
)
</code></pre>

<pre class="highlight java tab-java"><code><span class="o">&lt;</span><span class="n">payment_response</span> <span class="n">content</span><span class="o">=[</span>
    <span class="o">&lt;</span><span class="n">transaction_type</span> <span class="n">content</span><span class="o">=[</span><span class="n">ppro</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">status</span> <span class="n">content</span><span class="o">=[</span><span class="n">error</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">mode</span> <span class="n">content</span><span class="o">=[</span><span class="n">live</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">transaction_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">43671</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">unique_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">44177</span><span class="n">a21403427eb96664a6d7e5d5d48</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">code</span> <span class="n">content</span><span class="o">=[</span><span class="mi">110</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">message</span> <span class="n">content</span><span class="o">=[</span><span class="n">Something</span> <span class="n">went</span> <span class="n">wrong</span><span class="o">,</span> <span class="n">please</span> <span class="n">contact</span> <span class="n">support</span><span class="o">!]&gt;</span>
    <span class="o">&lt;</span><span class="n">timestamp</span> <span class="n">content</span><span class="o">=[</span><span class="mi">2019</span><span class="o">-</span><span class="mo">03</span><span class="o">-</span><span class="mi">14</span><span class="nl">T12:</span><span class="mo">05</span><span class="o">:</span><span class="mi">58</span><span class="n">Z</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">descriptor</span> <span class="n">content</span><span class="o">=[</span><span class="n">Descriptor</span> <span class="n">one</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">amount</span> <span class="n">content</span><span class="o">=[</span><span class="mi">100</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">currency</span> <span class="n">content</span><span class="o">=[</span><span class="n">EUR</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">sent_to_acquirer</span> <span class="n">content</span><span class="o">=[</span><span class="kc">true</span><span class="o">]&gt;</span>
<span class="o">]&gt;</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="p">{</span>
    <span class="nl">transaction_type</span><span class="p">:</span> <span class="s2">"ppro"</span><span class="p">,</span>
    <span class="nx">status</span><span class="p">:</span> <span class="s2">"error"</span><span class="p">,</span>
    <span class="nx">mode</span><span class="p">:</span> <span class="s2">"live"</span><span class="p">,</span>
    <span class="nx">transaction_id</span><span class="p">:</span> <span class="s2">"43671"</span><span class="p">,</span>
    <span class="nx">unique_id</span><span class="p">:</span> <span class="s2">"44177a21403427eb96664a6d7e5d5d48"</span><span class="p">,</span>
    <span class="nx">code</span><span class="p">:</span> <span class="s2">"110"</span><span class="p">,</span>
    <span class="nx">message</span><span class="p">:</span> <span class="s2">"Something went wrong, please contact support!"</span><span class="p">,</span>
    <span class="nx">timestamp</span><span class="p">:</span> <span class="s2">"2019-03-14T12:05:58Z"</span><span class="p">,</span>
    <span class="nx">descriptor</span><span class="p">:</span> <span class="s2">"Descriptor one"</span><span class="p">,</span>
    <span class="nx">amount</span><span class="p">:</span> <span class="s2">"100"</span><span class="p">,</span>
    <span class="nx">currency</span><span class="p">:</span> <span class="s2">"EUR"</span><span class="p">,</span>
    <span class="nx">sent_to_acquirer</span><span class="p">:</span> <span class="s2">"true"</span><span class="p">,</span>
<span class="p">}</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;ppro&lt;/transaction_type&gt;
  &lt;status&gt;error&lt;/status&gt;
  &lt;mode&gt;live&lt;/mode&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;code&gt;110&lt;/code&gt;
  &lt;message&gt;Something went wrong, please contact support!&lt;/message&gt;
  &lt;timestamp&gt;2019-03-14T12:05:58Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;EUR&lt;/currency&gt;
  &lt;sent_to_acquirer&gt;true&lt;/sent_to_acquirer&gt;
&lt;/payment_transaction&gt;
</code></pre>

<p><strong>Error Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>The transaction type</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>transaction_id</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>unique_id</td>
<td>string(32)</td>
<td>Unique id defined by gate (must later be used if capturing, voiding or refunding a transaction)</td>
</tr>
<tr>
<td>code</td>
<td>integer</td>
<td>Error code according to <a href="#error-code-table">Error code table</a></td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
<tr>
<td>message</td>
<td>string(255)</td>
<td>Human readable error message which can be displayed to users.</td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when the transaction was processed in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Combined date and time</a> e.g. 2007-08- 30T17:46:11Z</td>
</tr>
<tr>
<td>descriptor</td>
<td>string</td>
<td>Static descriptor MID info as configured on the gateway</td>
</tr>
<tr>
<td>amount</td>
<td>integer</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>sent_to_acquirer</td>
<td>string</td>
<td>&quot;true&quot; or &quot;false&quot;</td>
</tr>
</tbody></table>
<h3 id='giropay'>GiroPay</h3>
<p>GiroPay is a popular real-time bank transfer payment method in Germany that integrates more than
1,500 German banks.</p>

<blockquote>
<p>Request</p>
</blockquote>

<pre class="highlight php tab-php"><code><span class="cp">&lt;?php</span>

<span class="c1">// Load the pre-configured ini file...
</span><span class="nx">\Genesis\Config</span><span class="o">::</span><span class="na">loadSettings</span><span class="p">(</span><span class="s1">'/path/to/config.ini'</span><span class="p">);</span>

<span class="nv">$genesis</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Genesis</span><span class="p">(</span><span class="s1">'Financial\Alternatives\PPRO'</span><span class="p">);</span>
<span class="nv">$request</span> <span class="o">=</span> <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">request</span><span class="p">();</span>

<span class="nv">$request</span>
  <span class="o">-&gt;</span><span class="na">setTransactionId</span><span class="p">(</span><span class="s1">'43671'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setPaymentType</span><span class="p">(</span><span class="s1">'giropay'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setUsage</span><span class="p">(</span><span class="s1">'40208 concert tickets'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setRemoteIp</span><span class="p">(</span><span class="s1">'245.253.2.12'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setReturnSuccessUrl</span><span class="p">(</span><span class="s1">'http://www.example.com/success'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setReturnFailureUrl</span><span class="p">(</span><span class="s1">'http://www.example.com/failure'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setAmount</span><span class="p">(</span><span class="s1">'100'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCurrency</span><span class="p">(</span><span class="s1">'EUR'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBic</span><span class="p">(</span><span class="s1">'GENODETT488'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setIban</span><span class="p">(</span><span class="s1">'DE07444488880123456789'</span><span class="p">)</span>


  <span class="c1">// Billing Address
</span>  <span class="o">-&gt;</span><span class="na">setBillingFirstName</span><span class="p">(</span><span class="s1">'Barney'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingLastName</span><span class="p">(</span><span class="s1">'Rubble'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingAddress1</span><span class="p">(</span><span class="s1">'14, Nerazdelni str'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingZipCode</span><span class="p">(</span><span class="s1">'1407'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingCity</span><span class="p">(</span><span class="s1">'Berlin'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingCountry</span><span class="p">(</span><span class="s1">'DE'</span><span class="p">);</span>

<span class="k">try</span> <span class="p">{</span>
    <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">execute</span><span class="p">();</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">response</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">getResponseObject</span><span class="p">();</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">\Exception</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$e</span><span class="o">-&gt;</span><span class="na">getMessage</span><span class="p">();</span>
<span class="p">}</span>
</code></pre>

<pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.GenesisClient</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.TransactionResult</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.constants.Endpoints</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.constants.Environments</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.requests.financial.apm.PProRequest</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.model.Transaction</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Configuration</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Country</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Currency</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.math.BigDecimal</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.MalformedURLException</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.URL</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">GenesisExample</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">MalformedURLException</span> <span class="o">{</span>

    <span class="c1">// Create configuration</span>
    <span class="n">Configuration</span> <span class="n">configuration</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Configuration</span><span class="o">(</span><span class="n">Environments</span><span class="o">.</span><span class="na">STAGING</span><span class="o">,</span> <span class="n">Endpoints</span><span class="o">.</span><span class="na">EMERCHANTPAY</span><span class="o">);</span>

    <span class="n">configuration</span><span class="o">.</span><span class="na">setUsername</span><span class="o">(</span><span class="s">"SET_YOUR_USERNAME"</span><span class="o">);</span>
    <span class="n">configuration</span><span class="o">.</span><span class="na">setPassword</span><span class="o">(</span><span class="s">"SET_YOUR_PASSWORD"</span><span class="o">);</span>
    <span class="n">configuration</span><span class="o">.</span><span class="na">setToken</span><span class="o">(</span><span class="s">"SET_YOUR_TOKEN"</span><span class="o">);</span>

    <span class="n">PProRequest</span> <span class="n">request</span> <span class="o">=</span> <span class="k">new</span> <span class="n">PProRequest</span><span class="o">();</span>

    <span class="n">request</span><span class="o">.</span><span class="na">setTransactionId</span><span class="o">(</span><span class="s">"43671"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setPaymentType</span><span class="o">(</span><span class="s">"giropay"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setUsage</span><span class="o">(</span><span class="s">"40208 concert tickets"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setRemoteIp</span><span class="o">(</span><span class="s">"245.253.2.12"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setReturnSuccessUrl</span><span class="o">(</span><span class="k">new</span> <span class="n">URL</span><span class="o">(</span><span class="s">"http://www.example.com/success"</span><span class="o">));</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setReturnFailureUrl</span><span class="o">(</span><span class="k">new</span> <span class="n">URL</span><span class="o">(</span><span class="s">"http://www.example.com/failure"</span><span class="o">));</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setAmount</span><span class="o">(</span><span class="k">new</span> <span class="n">BigDecimal</span><span class="o">(</span><span class="mi">100</span><span class="o">));</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCurrency</span><span class="o">(</span><span class="s">"EUR"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBic</span><span class="o">(</span><span class="s">"GENODETT488"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setIban</span><span class="o">(</span><span class="s">"DE07444488880123456789"</span><span class="o">);</span>


    <span class="c1">// Billing Address</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingFirstname</span><span class="o">(</span><span class="s">"Barney"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingLastname</span><span class="o">(</span><span class="s">"Rubble"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingPrimaryAddress</span><span class="o">(</span><span class="s">"14, Nerazdelni str"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingZipCode</span><span class="o">(</span><span class="s">"1407"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingCity</span><span class="o">(</span><span class="s">"Berlin"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingCountry</span><span class="o">(</span><span class="s">"DE"</span><span class="o">);</span>

    <span class="n">GenesisClient</span> <span class="n">client</span> <span class="o">=</span> <span class="k">new</span> <span class="n">GenesisClient</span><span class="o">(</span><span class="n">configuration</span><span class="o">,</span> <span class="n">request</span><span class="o">);</span>
    <span class="n">client</span><span class="o">.</span><span class="na">execute</span><span class="o">();</span>

    <span class="c1">// Parse Payment result</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">client</span><span class="o">.</span><span class="na">getResponse</span><span class="o">());</span>

  <span class="o">}</span>
<span class="o">}</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="kd">var</span> <span class="nx">genesis</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'genesis.js/lib/genesis.js'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">transaction</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">genesis</span><span class="p">.</span><span class="nx">transaction</span><span class="p">();</span>

<span class="kd">var</span> <span class="nx">failure</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">reason</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">reason</span><span class="p">);</span>
<span class="p">};</span>

<span class="kd">var</span> <span class="nx">success</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>

<span class="nx">transaction</span><span class="p">.</span><span class="nx">ppro</span><span class="p">(</span>
  <span class="p">{</span>
    <span class="s2">"transaction_id"</span><span class="p">:</span> <span class="s2">"43671"</span><span class="p">,</span>
    <span class="s2">"payment_type"</span><span class="p">:</span> <span class="s2">"giropay"</span><span class="p">,</span>
    <span class="s2">"usage"</span><span class="p">:</span> <span class="s2">"40208 concert tickets"</span><span class="p">,</span>
    <span class="s2">"remote_ip"</span><span class="p">:</span> <span class="s2">"245.253.2.12"</span><span class="p">,</span>
    <span class="s2">"return_success_url"</span><span class="p">:</span> <span class="s2">"http://www.example.com/success"</span><span class="p">,</span>
    <span class="s2">"return_failure_url"</span><span class="p">:</span> <span class="s2">"http://www.example.com/failure"</span><span class="p">,</span>
    <span class="s2">"amount"</span><span class="p">:</span> <span class="s2">"100"</span><span class="p">,</span>
    <span class="s2">"currency"</span><span class="p">:</span> <span class="s2">"EUR"</span><span class="p">,</span>
    <span class="s2">"bic"</span><span class="p">:</span> <span class="s2">"GENODETT488"</span><span class="p">,</span>
    <span class="s2">"iban"</span><span class="p">:</span> <span class="s2">"DE07444488880123456789"</span><span class="p">,</span>
    <span class="s2">"billing_address"</span><span class="p">:</span> <span class="p">{</span>
      <span class="s2">"first_name"</span><span class="p">:</span> <span class="s2">"Barney"</span><span class="p">,</span>
      <span class="s2">"last_name"</span><span class="p">:</span> <span class="s2">"Rubble"</span><span class="p">,</span>
      <span class="s2">"address1"</span><span class="p">:</span> <span class="s2">"14, Nerazdelni str"</span><span class="p">,</span>
      <span class="s2">"zip_code"</span><span class="p">:</span> <span class="s2">"1407"</span><span class="p">,</span>
      <span class="s2">"city"</span><span class="p">:</span> <span class="s2">"Berlin"</span><span class="p">,</span>
      <span class="s2">"country"</span><span class="p">:</span> <span class="s2">"DE"</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">).</span><span class="nx">send</span><span class="p">()</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">success</span><span class="p">)</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">failure</span><span class="p">);</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>curl https://username:password@gate.emerchantpay.net/process/TERMINAL-TOKEN <span class="se">\</span>
   -H <span class="s2">"Content-Type: text/xml"</span> <span class="se">\</span>
   -d <span class="s1">'
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;ppro&lt;/transaction_type&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;payment_type&gt;giropay&lt;/payment_type&gt;
  &lt;usage&gt;40208 concert tickets&lt;/usage&gt;
  &lt;remote_ip&gt;245.253.2.12&lt;/remote_ip&gt;
  &lt;return_success_url&gt;http://www.example.com/success&lt;/return_success_url&gt;
  &lt;return_failure_url&gt;http://www.example.com/failure&lt;/return_failure_url&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;EUR&lt;/currency&gt;
  &lt;bic&gt;GENODETT488&lt;/bic&gt;
  &lt;iban&gt;DE07444488880123456789&lt;/iban&gt;
  &lt;billing_address&gt;
    &lt;first_name&gt;Barney&lt;/first_name&gt;
    &lt;last_name&gt;Rubble&lt;/last_name&gt;
    &lt;address1&gt;14, Nerazdelni str&lt;/address1&gt;
    &lt;zip_code&gt;1407&lt;/zip_code&gt;
    &lt;city&gt;Berlin&lt;/city&gt;
    &lt;country&gt;DE&lt;/country&gt;
  &lt;/billing_address&gt;
&lt;/payment_transaction&gt;'</span>
</code></pre>

<p><strong>Request Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>required</td>
<td>string(255)</td>
<td><strong>ppro</strong> or <strong>giropay</strong>. Contact tech support at <a href="mailto:tech-support@emerchantpay.net">tech-support@emerchantpay.net</a> for more details.</td>
</tr>
<tr>
<td>transaction_id</td>
<td>required</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>payment_type</td>
<td>required<sup>1</sup></td>
<td>giropay</td>
<td>GiroPay. Contact tech support for more details.</td>
</tr>
<tr>
<td>usage</td>
<td>optional</td>
<td>string(255)</td>
<td>Description of the transaction for later use</td>
</tr>
<tr>
<td>remote_ip</td>
<td>required*</td>
<td>IPv4 address</td>
<td>IPv4 address of customer</td>
</tr>
<tr>
<td>return_success_url</td>
<td>required</td>
<td>url</td>
<td>URL where customer is sent to after successful payment</td>
</tr>
<tr>
<td>return_failure_url</td>
<td>required</td>
<td>url</td>
<td>URL where customer is sent to after unsuccessful payment</td>
</tr>
<tr>
<td>amount</td>
<td>required</td>
<td>integer &gt; 0</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>required</td>
<td>string(3)</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>bic</td>
<td>required</td>
<td>string(11)</td>
<td>Valid BIC string. Must be 8 or 11 characters long</td>
</tr>
<tr>
<td>iban</td>
<td>required*</td>
<td>string(22)</td>
<td>String must start with ”DE” followed by 20 digits</td>
</tr>
<tr>
<td><strong>billing_address</strong></td>
<td>required</td>
<td></td>
<td>See <a href="#required-vs-optional-api-params">Required vs Optional API params</a> for details</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;first_name</td>
<td>required</td>
<td>string(255)</td>
<td>Customer first name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;last_name</td>
<td>required</td>
<td>string(255)</td>
<td>Customer last name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address1</td>
<td>required*</td>
<td>string(255)</td>
<td>Primary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address2</td>
<td>required*</td>
<td>string(255)</td>
<td>Secondary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;zip_code</td>
<td>required*</td>
<td>string</td>
<td>ZIP code</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;city</td>
<td>required*</td>
<td>string(255)</td>
<td>City</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;state</td>
<td>required*</td>
<td>string(2)</td>
<td>State code in <a href="https://en.wikipedia.org/wiki/ISO_3166-2">ISO 3166-2</a>, required for USA and Canada</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;country</td>
<td>required</td>
<td>string(2)</td>
<td>Country code in <a href="https://www.iso.org/iso-3166-country-codes.html">ISO 3166</a></td>
</tr>
<tr>
<td><strong>shipping_address</strong></td>
<td>optional</td>
<td></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;first_name</td>
<td>optional</td>
<td>string(255)</td>
<td>Customer first name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;last_name</td>
<td>optional</td>
<td>string(255)</td>
<td>Customer last name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address1</td>
<td>optional</td>
<td>string(255)</td>
<td>Primary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address2</td>
<td>optional</td>
<td>string(255)</td>
<td>Secondary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;zip_code</td>
<td>optional</td>
<td>string</td>
<td>ZIP code</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;city</td>
<td>optional</td>
<td>string(255)</td>
<td>City</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;state</td>
<td>optional</td>
<td>string(2)</td>
<td>State code in <a href="https://en.wikipedia.org/wiki/ISO_3166-2">ISO 3166-2</a>, required for USA and Canada</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;country</td>
<td>optional</td>
<td>string(2)</td>
<td>Country code in <a href="https://www.iso.org/iso-3166-country-codes.html">ISO 3166</a></td>
</tr>
</tbody></table>

<p><code>required* = conditionally required</code></p>

<p><code>1 - payment_type must be submitted only when the transaction type is set to ppro</code></p>

<p><strong>Supported currencies and countries</strong></p>

<table><thead>
<tr>
<th>Currency code</th>
<th>Country code</th>
</tr>
</thead><tbody>
<tr>
<td>EUR</td>
<td>DE</td>
</tr>
</tbody></table>

<blockquote>
<p>Successful Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>stdClass Object
(
    [transaction_type] =&gt; ppro
    [status] =&gt; pending_async
    [mode] =&gt; live
    [transaction_id] =&gt; 43671
    [unique_id] =&gt; 44177a21403427eb96664a6d7e5d5d48
    [technical_message] =&gt; Transaction successful!
    [message] =&gt; Transaction successful!
    [redirect_url] =&gt; https://gate.emerchantpay.net/redirect/to_acquirer/649e1ff35c61
    [timestamp] =&gt; DateTime Object
        (
            [date] =&gt; 2019-03-14 12:05:58.000000
            [timezone_type] =&gt; 2
            [timezone] =&gt; Z
        )
    [descriptor] =&gt; Descriptor one
    [amount] =&gt; 100
    [currency] =&gt; EUR
    [sent_to_acquirer] =&gt; true
)
</code></pre>

<pre class="highlight java tab-java"><code><span class="o">&lt;</span><span class="n">payment_response</span> <span class="n">content</span><span class="o">=[</span>
    <span class="o">&lt;</span><span class="n">transaction_type</span> <span class="n">content</span><span class="o">=[</span><span class="n">ppro</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">status</span> <span class="n">content</span><span class="o">=[</span><span class="n">pending_async</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">mode</span> <span class="n">content</span><span class="o">=[</span><span class="n">live</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">transaction_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">43671</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">unique_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">44177</span><span class="n">a21403427eb96664a6d7e5d5d48</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">technical_message</span> <span class="n">content</span><span class="o">=[</span><span class="n">Transaction</span> <span class="n">successful</span><span class="o">!]&gt;</span>
    <span class="o">&lt;</span><span class="n">message</span> <span class="n">content</span><span class="o">=[</span><span class="n">Transaction</span> <span class="n">successful</span><span class="o">!]&gt;</span>
    <span class="o">&lt;</span><span class="n">redirect_url</span> <span class="n">content</span><span class="o">=[</span><span class="nl">https:</span><span class="c1">//gate.emerchantpay.net/redirect/to_acquirer/649e1ff35c61]&gt;</span>
    <span class="o">&lt;</span><span class="n">timestamp</span> <span class="n">content</span><span class="o">=[</span><span class="mi">2019</span><span class="o">-</span><span class="mo">03</span><span class="o">-</span><span class="mi">14</span><span class="nl">T12:</span><span class="mo">05</span><span class="o">:</span><span class="mi">58</span><span class="n">Z</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">descriptor</span> <span class="n">content</span><span class="o">=[</span><span class="n">Descriptor</span> <span class="n">one</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">amount</span> <span class="n">content</span><span class="o">=[</span><span class="mi">100</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">currency</span> <span class="n">content</span><span class="o">=[</span><span class="n">EUR</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">sent_to_acquirer</span> <span class="n">content</span><span class="o">=[</span><span class="kc">true</span><span class="o">]&gt;</span>
<span class="o">]&gt;</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="p">{</span>
    <span class="nl">transaction_type</span><span class="p">:</span> <span class="s2">"ppro"</span><span class="p">,</span>
    <span class="nx">status</span><span class="p">:</span> <span class="s2">"pending_async"</span><span class="p">,</span>
    <span class="nx">mode</span><span class="p">:</span> <span class="s2">"live"</span><span class="p">,</span>
    <span class="nx">transaction_id</span><span class="p">:</span> <span class="s2">"43671"</span><span class="p">,</span>
    <span class="nx">unique_id</span><span class="p">:</span> <span class="s2">"44177a21403427eb96664a6d7e5d5d48"</span><span class="p">,</span>
    <span class="nx">technical_message</span><span class="p">:</span> <span class="s2">"Transaction successful!"</span><span class="p">,</span>
    <span class="nx">message</span><span class="p">:</span> <span class="s2">"Transaction successful!"</span><span class="p">,</span>
    <span class="nx">redirect_url</span><span class="p">:</span> <span class="s2">"https://gate.emerchantpay.net/redirect/to_acquirer/649e1ff35c61"</span><span class="p">,</span>
    <span class="nx">timestamp</span><span class="p">:</span> <span class="s2">"2019-03-14T12:05:58Z"</span><span class="p">,</span>
    <span class="nx">descriptor</span><span class="p">:</span> <span class="s2">"Descriptor one"</span><span class="p">,</span>
    <span class="nx">amount</span><span class="p">:</span> <span class="s2">"100"</span><span class="p">,</span>
    <span class="nx">currency</span><span class="p">:</span> <span class="s2">"EUR"</span><span class="p">,</span>
    <span class="nx">sent_to_acquirer</span><span class="p">:</span> <span class="s2">"true"</span><span class="p">,</span>
<span class="p">}</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;ppro&lt;/transaction_type&gt;
  &lt;status&gt;pending_async&lt;/status&gt;
  &lt;mode&gt;live&lt;/mode&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;technical_message&gt;Transaction successful!&lt;/technical_message&gt;
  &lt;message&gt;Transaction successful!&lt;/message&gt;
  &lt;redirect_url&gt;https://gate.emerchantpay.net/redirect/to_acquirer/649e1ff35c61&lt;/redirect_url&gt;
  &lt;timestamp&gt;2019-03-14T12:05:58Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;EUR&lt;/currency&gt;
  &lt;sent_to_acquirer&gt;true&lt;/sent_to_acquirer&gt;
&lt;/payment_transaction&gt;
</code></pre>

<p><strong>Successful Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>The transaction type</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>transaction_id</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>unique_id</td>
<td>string(32)</td>
<td>Unique id defined by gate (must later be used if capturing, voiding or refunding a transaction)</td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
<tr>
<td>message</td>
<td>string(255)</td>
<td>Human readable error message which can be displayed to users.</td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>redirect_url</td>
<td>url</td>
<td>URL where user has to be redirected to complete payment process. It is available for asynchronous mode</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when the transaction was processed in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Combined date and time</a> e.g. 2007-08- 30T17:46:11Z</td>
</tr>
<tr>
<td>descriptor</td>
<td>string</td>
<td>Static descriptor MID info as configured on the gateway</td>
</tr>
<tr>
<td>amount</td>
<td>integer</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>sent_to_acquirer</td>
<td>string</td>
<td>&quot;true&quot; or &quot;false&quot;</td>
</tr>
</tbody></table>

<blockquote>
<p>Error Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>stdClass Object
(
    [transaction_type] =&gt; ppro
    [status] =&gt; error
    [mode] =&gt; live
    [transaction_id] =&gt; 43671
    [unique_id] =&gt; 44177a21403427eb96664a6d7e5d5d48
    [code] =&gt; 110
    [message] =&gt; Something went wrong, please contact support!
    [timestamp] =&gt; DateTime Object
        (
            [date] =&gt; 2019-03-14 12:05:58.000000
            [timezone_type] =&gt; 2
            [timezone] =&gt; Z
        )
    [descriptor] =&gt; Descriptor one
    [amount] =&gt; 100
    [currency] =&gt; EUR
    [sent_to_acquirer] =&gt; true
)
</code></pre>

<pre class="highlight java tab-java"><code><span class="o">&lt;</span><span class="n">payment_response</span> <span class="n">content</span><span class="o">=[</span>
    <span class="o">&lt;</span><span class="n">transaction_type</span> <span class="n">content</span><span class="o">=[</span><span class="n">ppro</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">status</span> <span class="n">content</span><span class="o">=[</span><span class="n">error</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">mode</span> <span class="n">content</span><span class="o">=[</span><span class="n">live</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">transaction_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">43671</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">unique_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">44177</span><span class="n">a21403427eb96664a6d7e5d5d48</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">code</span> <span class="n">content</span><span class="o">=[</span><span class="mi">110</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">message</span> <span class="n">content</span><span class="o">=[</span><span class="n">Something</span> <span class="n">went</span> <span class="n">wrong</span><span class="o">,</span> <span class="n">please</span> <span class="n">contact</span> <span class="n">support</span><span class="o">!]&gt;</span>
    <span class="o">&lt;</span><span class="n">timestamp</span> <span class="n">content</span><span class="o">=[</span><span class="mi">2019</span><span class="o">-</span><span class="mo">03</span><span class="o">-</span><span class="mi">14</span><span class="nl">T12:</span><span class="mo">05</span><span class="o">:</span><span class="mi">58</span><span class="n">Z</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">descriptor</span> <span class="n">content</span><span class="o">=[</span><span class="n">Descriptor</span> <span class="n">one</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">amount</span> <span class="n">content</span><span class="o">=[</span><span class="mi">100</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">currency</span> <span class="n">content</span><span class="o">=[</span><span class="n">EUR</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">sent_to_acquirer</span> <span class="n">content</span><span class="o">=[</span><span class="kc">true</span><span class="o">]&gt;</span>
<span class="o">]&gt;</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="p">{</span>
    <span class="nl">transaction_type</span><span class="p">:</span> <span class="s2">"ppro"</span><span class="p">,</span>
    <span class="nx">status</span><span class="p">:</span> <span class="s2">"error"</span><span class="p">,</span>
    <span class="nx">mode</span><span class="p">:</span> <span class="s2">"live"</span><span class="p">,</span>
    <span class="nx">transaction_id</span><span class="p">:</span> <span class="s2">"43671"</span><span class="p">,</span>
    <span class="nx">unique_id</span><span class="p">:</span> <span class="s2">"44177a21403427eb96664a6d7e5d5d48"</span><span class="p">,</span>
    <span class="nx">code</span><span class="p">:</span> <span class="s2">"110"</span><span class="p">,</span>
    <span class="nx">message</span><span class="p">:</span> <span class="s2">"Something went wrong, please contact support!"</span><span class="p">,</span>
    <span class="nx">timestamp</span><span class="p">:</span> <span class="s2">"2019-03-14T12:05:58Z"</span><span class="p">,</span>
    <span class="nx">descriptor</span><span class="p">:</span> <span class="s2">"Descriptor one"</span><span class="p">,</span>
    <span class="nx">amount</span><span class="p">:</span> <span class="s2">"100"</span><span class="p">,</span>
    <span class="nx">currency</span><span class="p">:</span> <span class="s2">"EUR"</span><span class="p">,</span>
    <span class="nx">sent_to_acquirer</span><span class="p">:</span> <span class="s2">"true"</span><span class="p">,</span>
<span class="p">}</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;ppro&lt;/transaction_type&gt;
  &lt;status&gt;error&lt;/status&gt;
  &lt;mode&gt;live&lt;/mode&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;code&gt;110&lt;/code&gt;
  &lt;message&gt;Something went wrong, please contact support!&lt;/message&gt;
  &lt;timestamp&gt;2019-03-14T12:05:58Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;EUR&lt;/currency&gt;
  &lt;sent_to_acquirer&gt;true&lt;/sent_to_acquirer&gt;
&lt;/payment_transaction&gt;
</code></pre>

<p><strong>Error Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>The transaction type</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>transaction_id</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>unique_id</td>
<td>string(32)</td>
<td>Unique id defined by gate (must later be used if capturing, voiding or refunding a transaction)</td>
</tr>
<tr>
<td>code</td>
<td>integer</td>
<td>Error code according to <a href="#error-code-table">Error code table</a></td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
<tr>
<td>message</td>
<td>string(255)</td>
<td>Human readable error message which can be displayed to users.</td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when the transaction was processed in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Combined date and time</a> e.g. 2007-08- 30T17:46:11Z</td>
</tr>
<tr>
<td>descriptor</td>
<td>string</td>
<td>Static descriptor MID info as configured on the gateway</td>
</tr>
<tr>
<td>amount</td>
<td>integer</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>sent_to_acquirer</td>
<td>string</td>
<td>&quot;true&quot; or &quot;false&quot;</td>
</tr>
</tbody></table>
<h3 id='idebit'>iDebit</h3>
<aside class="notice" >
iDebit connects consumers to their online banking directly from checkout, enabling secure, real-time payments without a credit card. Using iDebit allows consumers to transfer funds to merchants without revealing their personal banking information.
<br><br>
The main difference between iDebit and InstaDebit is that InstaDebit uses eCheck, iDebit uses online bank transfer.
<br><br>
iDebit transactions have payins and payouts. The payin is asynchronous, while the payout is synchronous.
<br><br>
iDebit Payin transaction - after a successful validation of transaction parameters, transaction status is set to pending async and the consumer is redirected to the iDebit consumers page. The consumer then carries out the specified transaction details and finalizes the transaction. The gateway waits for an async notification from iDebit with the payment result of the consumer bank payment executed on the iDebit consumers page, and updates the transaction status accordingly.
<br><br>
When the payment reaches a final state, the gateway sends a notification to the merchant on the configured notification URL for the merchant.
iDebit Payout transaction - the transaction is synchronous and transaction status is set immediately after the response.
</aside>

<p><strong>Supported countries</strong></p>

<table><thead>
<tr>
<th>Country name</th>
<th>Country code</th>
</tr>
</thead><tbody>
<tr>
<td>Canada</td>
<td>CA</td>
</tr>
</tbody></table>

<p>iDebit is available only for Canadian merchants and consumers.</p>
<h4 id='payin'>Payin</h4>
<blockquote>
<p>Request</p>
</blockquote>

<pre class="highlight php tab-php"><code><span class="cp">&lt;?php</span>

<span class="c1">// Load the pre-configured ini file...
</span><span class="nx">\Genesis\Config</span><span class="o">::</span><span class="na">loadSettings</span><span class="p">(</span><span class="s1">'/path/to/config.ini'</span><span class="p">);</span>

<span class="nv">$genesis</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Genesis</span><span class="p">(</span><span class="s1">'Financial\OnlineBankingPayments\iDebit\Payin'</span><span class="p">);</span>
<span class="nv">$request</span> <span class="o">=</span> <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">request</span><span class="p">();</span>

<span class="nv">$request</span>
  <span class="o">-&gt;</span><span class="na">setTransactionId</span><span class="p">(</span><span class="s1">'43671'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCustomerAccountId</span><span class="p">(</span><span class="s1">'1534537'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setUsage</span><span class="p">(</span><span class="s1">'40208 concert tickets'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setRemoteIp</span><span class="p">(</span><span class="s1">'245.253.2.12'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setNotificationUrl</span><span class="p">(</span><span class="s1">'https://www.example.com/notification'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setReturnUrl</span><span class="p">(</span><span class="s1">'https://gate.emerchantpay.net/redirect/to_acquirer/a55ab44d242f'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setAmount</span><span class="p">(</span><span class="s1">'100'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCurrency</span><span class="p">(</span><span class="s1">'CAD'</span><span class="p">)</span>


  <span class="c1">// Billing Address
</span>  <span class="o">-&gt;</span><span class="na">setBillingFirstName</span><span class="p">(</span><span class="s1">'Travis'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingLastName</span><span class="p">(</span><span class="s1">'Pastrana'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingAddress1</span><span class="p">(</span><span class="s1">'46 Donora Dr'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingZipCode</span><span class="p">(</span><span class="s1">'M4B1B3'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingCity</span><span class="p">(</span><span class="s1">'Toronto'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingState</span><span class="p">(</span><span class="s1">'ON'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingCountry</span><span class="p">(</span><span class="s1">'CA'</span><span class="p">);</span>

<span class="k">try</span> <span class="p">{</span>
    <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">execute</span><span class="p">();</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">response</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">getResponseObject</span><span class="p">();</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">\Exception</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$e</span><span class="o">-&gt;</span><span class="na">getMessage</span><span class="p">();</span>
<span class="p">}</span>
</code></pre>

<pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.GenesisClient</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.TransactionResult</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.constants.Endpoints</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.constants.Environments</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.requests.financial.oBeP.IDebitPayInRequest</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.model.Transaction</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Configuration</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Country</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Currency</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.math.BigDecimal</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.MalformedURLException</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.URL</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">GenesisExample</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">MalformedURLException</span> <span class="o">{</span>

    <span class="c1">// Create configuration</span>
    <span class="n">Configuration</span> <span class="n">configuration</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Configuration</span><span class="o">(</span><span class="n">Environments</span><span class="o">.</span><span class="na">STAGING</span><span class="o">,</span> <span class="n">Endpoints</span><span class="o">.</span><span class="na">EMERCHANTPAY</span><span class="o">);</span>

    <span class="n">configuration</span><span class="o">.</span><span class="na">setUsername</span><span class="o">(</span><span class="s">"SET_YOUR_USERNAME"</span><span class="o">);</span>
    <span class="n">configuration</span><span class="o">.</span><span class="na">setPassword</span><span class="o">(</span><span class="s">"SET_YOUR_PASSWORD"</span><span class="o">);</span>
    <span class="n">configuration</span><span class="o">.</span><span class="na">setToken</span><span class="o">(</span><span class="s">"SET_YOUR_TOKEN"</span><span class="o">);</span>

    <span class="n">IDebitPayInRequest</span> <span class="n">request</span> <span class="o">=</span> <span class="k">new</span> <span class="n">IDebitPayInRequest</span><span class="o">();</span>

    <span class="n">request</span><span class="o">.</span><span class="na">setTransactionId</span><span class="o">(</span><span class="s">"43671"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCustomerAccountId</span><span class="o">(</span><span class="s">"1534537"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setUsage</span><span class="o">(</span><span class="s">"40208 concert tickets"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setRemoteIp</span><span class="o">(</span><span class="s">"245.253.2.12"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setNotificationUrl</span><span class="o">(</span><span class="k">new</span> <span class="n">URL</span><span class="o">(</span><span class="s">"https://www.example.com/notification"</span><span class="o">));</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setReturnUrl</span><span class="o">(</span><span class="k">new</span> <span class="n">URL</span><span class="o">(</span><span class="s">"https://gate.emerchantpay.net/redirect/to_acquirer/a55ab44d242f"</span><span class="o">));</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setAmount</span><span class="o">(</span><span class="k">new</span> <span class="n">BigDecimal</span><span class="o">(</span><span class="mi">100</span><span class="o">));</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCurrency</span><span class="o">(</span><span class="s">"CAD"</span><span class="o">);</span>


    <span class="c1">// Billing Address</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingFirstname</span><span class="o">(</span><span class="s">"Travis"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingLastname</span><span class="o">(</span><span class="s">"Pastrana"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingPrimaryAddress</span><span class="o">(</span><span class="s">"46 Donora Dr"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingZipCode</span><span class="o">(</span><span class="s">"M4B1B3"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingCity</span><span class="o">(</span><span class="s">"Toronto"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingState</span><span class="o">(</span><span class="s">"ON"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingCountry</span><span class="o">(</span><span class="s">"CA"</span><span class="o">);</span>

    <span class="n">GenesisClient</span> <span class="n">client</span> <span class="o">=</span> <span class="k">new</span> <span class="n">GenesisClient</span><span class="o">(</span><span class="n">configuration</span><span class="o">,</span> <span class="n">request</span><span class="o">);</span>
    <span class="n">client</span><span class="o">.</span><span class="na">execute</span><span class="o">();</span>

    <span class="c1">// Parse Payment result</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">client</span><span class="o">.</span><span class="na">getResponse</span><span class="o">());</span>

  <span class="o">}</span>
<span class="o">}</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="kd">var</span> <span class="nx">genesis</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'genesis.js/lib/genesis.js'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">transaction</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">genesis</span><span class="p">.</span><span class="nx">transaction</span><span class="p">();</span>

<span class="kd">var</span> <span class="nx">failure</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">reason</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">reason</span><span class="p">);</span>
<span class="p">};</span>

<span class="kd">var</span> <span class="nx">success</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>

<span class="nx">transaction</span><span class="p">.</span><span class="nx">idebit_payin</span><span class="p">(</span>
  <span class="p">{</span>
    <span class="s2">"transaction_id"</span><span class="p">:</span> <span class="s2">"43671"</span><span class="p">,</span>
    <span class="s2">"customer_account_id"</span><span class="p">:</span> <span class="s2">"1534537"</span><span class="p">,</span>
    <span class="s2">"usage"</span><span class="p">:</span> <span class="s2">"40208 concert tickets"</span><span class="p">,</span>
    <span class="s2">"remote_ip"</span><span class="p">:</span> <span class="s2">"245.253.2.12"</span><span class="p">,</span>
    <span class="s2">"notification_url"</span><span class="p">:</span> <span class="s2">"https://www.example.com/notification"</span><span class="p">,</span>
    <span class="s2">"return_url"</span><span class="p">:</span> <span class="s2">"https://gate.emerchantpay.net/redirect/to_acquirer/a55ab44d242f"</span><span class="p">,</span>
    <span class="s2">"amount"</span><span class="p">:</span> <span class="s2">"100"</span><span class="p">,</span>
    <span class="s2">"currency"</span><span class="p">:</span> <span class="s2">"CAD"</span><span class="p">,</span>
    <span class="s2">"billing_address"</span><span class="p">:</span> <span class="p">{</span>
      <span class="s2">"first_name"</span><span class="p">:</span> <span class="s2">"Travis"</span><span class="p">,</span>
      <span class="s2">"last_name"</span><span class="p">:</span> <span class="s2">"Pastrana"</span><span class="p">,</span>
      <span class="s2">"address1"</span><span class="p">:</span> <span class="s2">"46 Donora Dr"</span><span class="p">,</span>
      <span class="s2">"zip_code"</span><span class="p">:</span> <span class="s2">"M4B1B3"</span><span class="p">,</span>
      <span class="s2">"city"</span><span class="p">:</span> <span class="s2">"Toronto"</span><span class="p">,</span>
      <span class="s2">"state"</span><span class="p">:</span> <span class="s2">"ON"</span><span class="p">,</span>
      <span class="s2">"country"</span><span class="p">:</span> <span class="s2">"CA"</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">).</span><span class="nx">send</span><span class="p">()</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">success</span><span class="p">)</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">failure</span><span class="p">);</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>curl https://username:password@gate.emerchantpay.net/process/TERMINAL-TOKEN <span class="se">\</span>
   -H <span class="s2">"Content-Type: text/xml"</span> <span class="se">\</span>
   -d <span class="s1">'
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;idebit_payin&lt;/transaction_type&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;customer_account_id&gt;1534537&lt;/customer_account_id&gt;
  &lt;usage&gt;40208 concert tickets&lt;/usage&gt;
  &lt;remote_ip&gt;245.253.2.12&lt;/remote_ip&gt;
  &lt;notification_url&gt;https://www.example.com/notification&lt;/notification_url&gt;
  &lt;return_url&gt;https://gate.emerchantpay.net/redirect/to_acquirer/a55ab44d242f&lt;/return_url&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;CAD&lt;/currency&gt;
  &lt;billing_address&gt;
    &lt;first_name&gt;Travis&lt;/first_name&gt;
    &lt;last_name&gt;Pastrana&lt;/last_name&gt;
    &lt;address1&gt;46 Donora Dr&lt;/address1&gt;
    &lt;zip_code&gt;M4B1B3&lt;/zip_code&gt;
    &lt;city&gt;Toronto&lt;/city&gt;
    &lt;state&gt;ON&lt;/state&gt;
    &lt;country&gt;CA&lt;/country&gt;
  &lt;/billing_address&gt;
&lt;/payment_transaction&gt;'</span>
</code></pre>

<p><strong>Request Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>required</td>
<td>string(255)</td>
<td>The transaction type: <strong>idebit_payin</strong></td>
</tr>
<tr>
<td>transaction_id</td>
<td>required</td>
<td>string(30)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>usage</td>
<td>required*</td>
<td>string(255)</td>
<td>Description of the transaction for later use</td>
</tr>
<tr>
<td>remote_ip</td>
<td>required*</td>
<td>IPv4 address</td>
<td>IPv4 address of customer</td>
</tr>
<tr>
<td>customer_account_id</td>
<td>required</td>
<td>string(20)</td>
<td>Unique consumer account ID</td>
</tr>
<tr>
<td>amount</td>
<td>required</td>
<td>integer &gt; 0</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>required</td>
<td>string(3)</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>customer_email</td>
<td>required*</td>
<td>e-mail address</td>
<td>Must contain valid e-mail of customer</td>
</tr>
<tr>
<td>customer_phone</td>
<td>required*</td>
<td>string(32)</td>
<td>Must contain valid phone number of customer</td>
</tr>
<tr>
<td>birth_date</td>
<td>required*</td>
<td>dd-mm-yyyy</td>
<td>Required for Visa only when MCC is a Financial Services one (e.g. MCC 6012)</td>
</tr>
<tr>
<td><strong>billing_address</strong></td>
<td>required</td>
<td></td>
<td>See <a href="#required-vs-optional-api-params">Required vs Optional API params</a> for details</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;first_name</td>
<td>required*</td>
<td>string(255)</td>
<td>Customer first name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;last_name</td>
<td>required*</td>
<td>string(255)</td>
<td>Customer last name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address1</td>
<td>required*</td>
<td>string(255)</td>
<td>Primary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address2</td>
<td>required*</td>
<td>string(255)</td>
<td>Secondary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;zip_code</td>
<td>required*</td>
<td>string</td>
<td>ZIP code</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;city</td>
<td>required*</td>
<td>string(255)</td>
<td>City</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;state</td>
<td>required*</td>
<td>string(2)</td>
<td>State code in <a href="https://en.wikipedia.org/wiki/ISO_3166-2">ISO 3166-2</a>, required for USA and Canada</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;country</td>
<td>required</td>
<td>string(2)</td>
<td>Country code in <a href="https://www.iso.org/iso-3166-country-codes.html">ISO 3166</a></td>
</tr>
</tbody></table>

<p><code>required* = conditionally required</code></p>

<blockquote>
<p>Successful Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>stdClass Object
(
    [transaction_type] =&gt; idebit_payin
    [status] =&gt; pending_async
    [mode] =&gt; live
    [transaction_id] =&gt; 43671
    [unique_id] =&gt; 44177a21403427eb96664a6d7e5d5d48
    [technical_message] =&gt; Transaction successful!
    [message] =&gt; Transaction successful!
    [redirect_url] =&gt; https://gate.emerchantpay.net/redirect/to_acquirer/649e1ff35c61
    [timestamp] =&gt; DateTime Object
        (
            [date] =&gt; 2019-03-14 12:05:58.000000
            [timezone_type] =&gt; 2
            [timezone] =&gt; Z
        )
    [descriptor] =&gt; Descriptor one
    [amount] =&gt; 100
    [currency] =&gt; CAD
    [sent_to_acquirer] =&gt; true
)
</code></pre>

<pre class="highlight java tab-java"><code><span class="o">&lt;</span><span class="n">payment_response</span> <span class="n">content</span><span class="o">=[</span>
    <span class="o">&lt;</span><span class="n">transaction_type</span> <span class="n">content</span><span class="o">=[</span><span class="n">idebit_payin</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">status</span> <span class="n">content</span><span class="o">=[</span><span class="n">pending_async</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">mode</span> <span class="n">content</span><span class="o">=[</span><span class="n">live</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">transaction_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">43671</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">unique_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">44177</span><span class="n">a21403427eb96664a6d7e5d5d48</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">technical_message</span> <span class="n">content</span><span class="o">=[</span><span class="n">Transaction</span> <span class="n">successful</span><span class="o">!]&gt;</span>
    <span class="o">&lt;</span><span class="n">message</span> <span class="n">content</span><span class="o">=[</span><span class="n">Transaction</span> <span class="n">successful</span><span class="o">!]&gt;</span>
    <span class="o">&lt;</span><span class="n">redirect_url</span> <span class="n">content</span><span class="o">=[</span><span class="nl">https:</span><span class="c1">//gate.emerchantpay.net/redirect/to_acquirer/649e1ff35c61]&gt;</span>
    <span class="o">&lt;</span><span class="n">timestamp</span> <span class="n">content</span><span class="o">=[</span><span class="mi">2019</span><span class="o">-</span><span class="mo">03</span><span class="o">-</span><span class="mi">14</span><span class="nl">T12:</span><span class="mo">05</span><span class="o">:</span><span class="mi">58</span><span class="n">Z</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">descriptor</span> <span class="n">content</span><span class="o">=[</span><span class="n">Descriptor</span> <span class="n">one</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">amount</span> <span class="n">content</span><span class="o">=[</span><span class="mi">100</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">currency</span> <span class="n">content</span><span class="o">=[</span><span class="n">CAD</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">sent_to_acquirer</span> <span class="n">content</span><span class="o">=[</span><span class="kc">true</span><span class="o">]&gt;</span>
<span class="o">]&gt;</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="p">{</span>
    <span class="nl">transaction_type</span><span class="p">:</span> <span class="s2">"idebit_payin"</span><span class="p">,</span>
    <span class="nx">status</span><span class="p">:</span> <span class="s2">"pending_async"</span><span class="p">,</span>
    <span class="nx">mode</span><span class="p">:</span> <span class="s2">"live"</span><span class="p">,</span>
    <span class="nx">transaction_id</span><span class="p">:</span> <span class="s2">"43671"</span><span class="p">,</span>
    <span class="nx">unique_id</span><span class="p">:</span> <span class="s2">"44177a21403427eb96664a6d7e5d5d48"</span><span class="p">,</span>
    <span class="nx">technical_message</span><span class="p">:</span> <span class="s2">"Transaction successful!"</span><span class="p">,</span>
    <span class="nx">message</span><span class="p">:</span> <span class="s2">"Transaction successful!"</span><span class="p">,</span>
    <span class="nx">redirect_url</span><span class="p">:</span> <span class="s2">"https://gate.emerchantpay.net/redirect/to_acquirer/649e1ff35c61"</span><span class="p">,</span>
    <span class="nx">timestamp</span><span class="p">:</span> <span class="s2">"2019-03-14T12:05:58Z"</span><span class="p">,</span>
    <span class="nx">descriptor</span><span class="p">:</span> <span class="s2">"Descriptor one"</span><span class="p">,</span>
    <span class="nx">amount</span><span class="p">:</span> <span class="s2">"100"</span><span class="p">,</span>
    <span class="nx">currency</span><span class="p">:</span> <span class="s2">"CAD"</span><span class="p">,</span>
    <span class="nx">sent_to_acquirer</span><span class="p">:</span> <span class="s2">"true"</span><span class="p">,</span>
<span class="p">}</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;idebit_payin&lt;/transaction_type&gt;
  &lt;status&gt;pending_async&lt;/status&gt;
  &lt;mode&gt;live&lt;/mode&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;technical_message&gt;Transaction successful!&lt;/technical_message&gt;
  &lt;message&gt;Transaction successful!&lt;/message&gt;
  &lt;redirect_url&gt;https://gate.emerchantpay.net/redirect/to_acquirer/649e1ff35c61&lt;/redirect_url&gt;
  &lt;timestamp&gt;2019-03-14T12:05:58Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;CAD&lt;/currency&gt;
  &lt;sent_to_acquirer&gt;true&lt;/sent_to_acquirer&gt;
&lt;/payment_transaction&gt;
</code></pre>

<p><strong>Successful Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>The transaction type</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>transaction_id</td>
<td>string(30)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>unique_id</td>
<td>string(32)</td>
<td>Unique id defined by gate (must later be used if capturing, voiding or refunding a transaction)</td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
<tr>
<td>message</td>
<td>string(255)</td>
<td>Human readable error message which can be displayed to users.</td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>redirect_url</td>
<td>url</td>
<td>URL where user has to be redirected to complete payment process. It is available for asynchronous mode</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when the transaction was processed in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Combined date and time</a> e.g. 2007-08- 30T17:46:11Z</td>
</tr>
<tr>
<td>descriptor</td>
<td>string</td>
<td>Static descriptor MID info as configured on the gateway</td>
</tr>
<tr>
<td>amount</td>
<td>integer</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>sent_to_acquirer</td>
<td>string</td>
<td>&quot;true&quot; or &quot;false&quot;</td>
</tr>
</tbody></table>

<blockquote>
<p>Error Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>stdClass Object
(
    [transaction_type] =&gt; idebit_payin
    [status] =&gt; error
    [mode] =&gt; live
    [transaction_id] =&gt; 43671
    [unique_id] =&gt; 44177a21403427eb96664a6d7e5d5d48
    [code] =&gt; 320
    [message] =&gt; amount is missing!
    [timestamp] =&gt; DateTime Object
        (
            [date] =&gt; 2019-03-14 12:05:58.000000
            [timezone_type] =&gt; 2
            [timezone] =&gt; Z
        )
    [descriptor] =&gt; Descriptor one
    [amount] =&gt; 100
    [currency] =&gt; CAD
    [sent_to_acquirer] =&gt; false
)
</code></pre>

<pre class="highlight java tab-java"><code><span class="o">&lt;</span><span class="n">payment_response</span> <span class="n">content</span><span class="o">=[</span>
    <span class="o">&lt;</span><span class="n">transaction_type</span> <span class="n">content</span><span class="o">=[</span><span class="n">idebit_payin</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">status</span> <span class="n">content</span><span class="o">=[</span><span class="n">error</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">mode</span> <span class="n">content</span><span class="o">=[</span><span class="n">live</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">transaction_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">43671</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">unique_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">44177</span><span class="n">a21403427eb96664a6d7e5d5d48</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">code</span> <span class="n">content</span><span class="o">=[</span><span class="mi">320</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">message</span> <span class="n">content</span><span class="o">=[</span><span class="n">amount</span> <span class="n">is</span> <span class="n">missing</span><span class="o">!]&gt;</span>
    <span class="o">&lt;</span><span class="n">timestamp</span> <span class="n">content</span><span class="o">=[</span><span class="mi">2019</span><span class="o">-</span><span class="mo">03</span><span class="o">-</span><span class="mi">14</span><span class="nl">T12:</span><span class="mo">05</span><span class="o">:</span><span class="mi">58</span><span class="n">Z</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">descriptor</span> <span class="n">content</span><span class="o">=[</span><span class="n">Descriptor</span> <span class="n">one</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">amount</span> <span class="n">content</span><span class="o">=[</span><span class="mi">100</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">currency</span> <span class="n">content</span><span class="o">=[</span><span class="n">CAD</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">sent_to_acquirer</span> <span class="n">content</span><span class="o">=[</span><span class="kc">false</span><span class="o">]&gt;</span>
<span class="o">]&gt;</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="p">{</span>
    <span class="nl">transaction_type</span><span class="p">:</span> <span class="s2">"idebit_payin"</span><span class="p">,</span>
    <span class="nx">status</span><span class="p">:</span> <span class="s2">"error"</span><span class="p">,</span>
    <span class="nx">mode</span><span class="p">:</span> <span class="s2">"live"</span><span class="p">,</span>
    <span class="nx">transaction_id</span><span class="p">:</span> <span class="s2">"43671"</span><span class="p">,</span>
    <span class="nx">unique_id</span><span class="p">:</span> <span class="s2">"44177a21403427eb96664a6d7e5d5d48"</span><span class="p">,</span>
    <span class="nx">code</span><span class="p">:</span> <span class="s2">"320"</span><span class="p">,</span>
    <span class="nx">message</span><span class="p">:</span> <span class="s2">"amount is missing!"</span><span class="p">,</span>
    <span class="nx">timestamp</span><span class="p">:</span> <span class="s2">"2019-03-14T12:05:58Z"</span><span class="p">,</span>
    <span class="nx">descriptor</span><span class="p">:</span> <span class="s2">"Descriptor one"</span><span class="p">,</span>
    <span class="nx">amount</span><span class="p">:</span> <span class="s2">"100"</span><span class="p">,</span>
    <span class="nx">currency</span><span class="p">:</span> <span class="s2">"CAD"</span><span class="p">,</span>
    <span class="nx">sent_to_acquirer</span><span class="p">:</span> <span class="s2">"false"</span><span class="p">,</span>
<span class="p">}</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;idebit_payin&lt;/transaction_type&gt;
  &lt;status&gt;error&lt;/status&gt;
  &lt;mode&gt;live&lt;/mode&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;code&gt;320&lt;/code&gt;
  &lt;message&gt;amount is missing!&lt;/message&gt;
  &lt;timestamp&gt;2019-03-14T12:05:58Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;CAD&lt;/currency&gt;
  &lt;sent_to_acquirer&gt;false&lt;/sent_to_acquirer&gt;
&lt;/payment_transaction&gt;
</code></pre>

<p><strong>Error Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>The transaction type</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>transaction_id</td>
<td>string(30)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>unique_id</td>
<td>string(32)</td>
<td>Unique id defined by gate (must later be used if capturing, voiding or refunding a transaction)</td>
</tr>
<tr>
<td>code</td>
<td>integer</td>
<td>Error code according to <a href="#error-code-table">Error code table</a></td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
<tr>
<td>message</td>
<td>string(255)</td>
<td>Human readable error message which can be displayed to users.</td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when the transaction was processed in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Combined date and time</a> e.g. 2007-08- 30T17:46:11Z</td>
</tr>
<tr>
<td>descriptor</td>
<td>string</td>
<td>Static descriptor MID info as configured on the gateway</td>
</tr>
<tr>
<td>amount</td>
<td>integer</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>sent_to_acquirer</td>
<td>string</td>
<td>&quot;true&quot; or &quot;false&quot;</td>
</tr>
</tbody></table>
<h4 id='payout'>Payout</h4>
<blockquote>
<p>Request</p>
</blockquote>

<pre class="highlight php tab-php"><code><span class="cp">&lt;?php</span>

<span class="c1">// Load the pre-configured ini file...
</span><span class="nx">\Genesis\Config</span><span class="o">::</span><span class="na">loadSettings</span><span class="p">(</span><span class="s1">'/path/to/config.ini'</span><span class="p">);</span>

<span class="nv">$genesis</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Genesis</span><span class="p">(</span><span class="s1">'Financial\OnlineBankingPayments\iDebit\Payin'</span><span class="p">);</span>
<span class="nv">$request</span> <span class="o">=</span> <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">request</span><span class="p">();</span>

<span class="nv">$request</span>
  <span class="o">-&gt;</span><span class="na">setReferenceId</span><span class="p">(</span><span class="s1">'43672'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setAmount</span><span class="p">(</span><span class="s1">'100'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCurrency</span><span class="p">(</span><span class="s1">'CAD'</span><span class="p">);</span>

<span class="k">try</span> <span class="p">{</span>
    <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">execute</span><span class="p">();</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">response</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">getResponseObject</span><span class="p">();</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">\Exception</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$e</span><span class="o">-&gt;</span><span class="na">getMessage</span><span class="p">();</span>
<span class="p">}</span>
</code></pre>

<pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.GenesisClient</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.TransactionResult</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.constants.Endpoints</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.constants.Environments</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.requests.financial.oBeP.IDebitPayInRequest</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.model.Transaction</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Configuration</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Country</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Currency</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.math.BigDecimal</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">GenesisExample</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">()</span>  <span class="o">{</span>

    <span class="c1">// Create configuration</span>
    <span class="n">Configuration</span> <span class="n">configuration</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Configuration</span><span class="o">(</span><span class="n">Environments</span><span class="o">.</span><span class="na">STAGING</span><span class="o">,</span> <span class="n">Endpoints</span><span class="o">.</span><span class="na">EMERCHANTPAY</span><span class="o">);</span>

    <span class="n">configuration</span><span class="o">.</span><span class="na">setUsername</span><span class="o">(</span><span class="s">"SET_YOUR_USERNAME"</span><span class="o">);</span>
    <span class="n">configuration</span><span class="o">.</span><span class="na">setPassword</span><span class="o">(</span><span class="s">"SET_YOUR_PASSWORD"</span><span class="o">);</span>
    <span class="n">configuration</span><span class="o">.</span><span class="na">setToken</span><span class="o">(</span><span class="s">"SET_YOUR_TOKEN"</span><span class="o">);</span>

    <span class="n">IDebitPayInRequest</span> <span class="n">request</span> <span class="o">=</span> <span class="k">new</span> <span class="n">IDebitPayInRequest</span><span class="o">();</span>

    <span class="n">request</span><span class="o">.</span><span class="na">setReferenceId</span><span class="o">(</span><span class="s">"43672"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setAmount</span><span class="o">(</span><span class="k">new</span> <span class="n">BigDecimal</span><span class="o">(</span><span class="mi">100</span><span class="o">));</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCurrency</span><span class="o">(</span><span class="s">"CAD"</span><span class="o">);</span>

    <span class="n">GenesisClient</span> <span class="n">client</span> <span class="o">=</span> <span class="k">new</span> <span class="n">GenesisClient</span><span class="o">(</span><span class="n">configuration</span><span class="o">,</span> <span class="n">request</span><span class="o">);</span>
    <span class="n">client</span><span class="o">.</span><span class="na">execute</span><span class="o">();</span>

    <span class="c1">// Parse Payment result</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">client</span><span class="o">.</span><span class="na">getResponse</span><span class="o">());</span>

  <span class="o">}</span>
<span class="o">}</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="kd">var</span> <span class="nx">genesis</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'genesis.js/lib/genesis.js'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">transaction</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">genesis</span><span class="p">.</span><span class="nx">transaction</span><span class="p">();</span>

<span class="kd">var</span> <span class="nx">failure</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">reason</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">reason</span><span class="p">);</span>
<span class="p">};</span>

<span class="kd">var</span> <span class="nx">success</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>

<span class="nx">transaction</span><span class="p">.</span><span class="nx">idebit_payin</span><span class="p">(</span>
  <span class="p">{</span>
    <span class="s2">"reference_id"</span><span class="p">:</span> <span class="s2">"43672"</span><span class="p">,</span>
    <span class="s2">"amount"</span><span class="p">:</span> <span class="s2">"100"</span><span class="p">,</span>
    <span class="s2">"currency"</span><span class="p">:</span> <span class="s2">"CAD"</span>
  <span class="p">}</span>
<span class="p">).</span><span class="nx">send</span><span class="p">()</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">success</span><span class="p">)</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">failure</span><span class="p">);</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>curl https://username:password@gate.emerchantpay.net/process/TERMINAL-TOKEN <span class="se">\</span>
   -H <span class="s2">"Content-Type: text/xml"</span> <span class="se">\</span>
   -d <span class="s1">'
&lt;payment_transaction&gt;
  &lt;reference_id&gt;43672&lt;/reference_id&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;CAD&lt;/currency&gt;
&lt;/payment_transaction&gt;'</span>
</code></pre>

<p><strong>Request Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>required</td>
<td>string(255)</td>
<td>The transaction type: <strong>idebit_payin</strong></td>
</tr>
<tr>
<td>transaction_id</td>
<td>required</td>
<td>string(30)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>reference_id</td>
<td>required</td>
<td>string(32)</td>
<td>Unique id returned by corresponding transaction</td>
</tr>
<tr>
<td>amount</td>
<td>required</td>
<td>integer &gt; 0</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>required</td>
<td>string(3)</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
</tbody></table>

<p><code>required* = conditionally required</code></p>

<blockquote>
<p>Successful Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>stdClass Object
(
    [transaction_type] =&gt; idebit_payin
    [status] =&gt; approved
    [mode] =&gt; live
    [transaction_id] =&gt; 43671
    [unique_id] =&gt; 44177a21403427eb96664a6d7e5d5d48
    [technical_message] =&gt; Transaction successful!
    [message] =&gt; Transaction successful!
    [timestamp] =&gt; DateTime Object
        (
            [date] =&gt; 2019-03-14 12:05:58.000000
            [timezone_type] =&gt; 2
            [timezone] =&gt; Z
        )
    [amount] =&gt; 100
    [currency] =&gt; CAD
    [sent_to_acquirer] =&gt; true
)
</code></pre>

<pre class="highlight java tab-java"><code><span class="o">&lt;</span><span class="n">payment_response</span> <span class="n">content</span><span class="o">=[</span>
    <span class="o">&lt;</span><span class="n">transaction_type</span> <span class="n">content</span><span class="o">=[</span><span class="n">idebit_payin</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">status</span> <span class="n">content</span><span class="o">=[</span><span class="n">approved</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">mode</span> <span class="n">content</span><span class="o">=[</span><span class="n">live</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">transaction_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">43671</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">unique_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">44177</span><span class="n">a21403427eb96664a6d7e5d5d48</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">technical_message</span> <span class="n">content</span><span class="o">=[</span><span class="n">Transaction</span> <span class="n">successful</span><span class="o">!]&gt;</span>
    <span class="o">&lt;</span><span class="n">message</span> <span class="n">content</span><span class="o">=[</span><span class="n">Transaction</span> <span class="n">successful</span><span class="o">!]&gt;</span>
    <span class="o">&lt;</span><span class="n">timestamp</span> <span class="n">content</span><span class="o">=[</span><span class="mi">2019</span><span class="o">-</span><span class="mo">03</span><span class="o">-</span><span class="mi">14</span><span class="nl">T12:</span><span class="mo">05</span><span class="o">:</span><span class="mi">58</span><span class="n">Z</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">amount</span> <span class="n">content</span><span class="o">=[</span><span class="mi">100</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">currency</span> <span class="n">content</span><span class="o">=[</span><span class="n">CAD</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">sent_to_acquirer</span> <span class="n">content</span><span class="o">=[</span><span class="kc">true</span><span class="o">]&gt;</span>
<span class="o">]&gt;</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="p">{</span>
    <span class="nl">transaction_type</span><span class="p">:</span> <span class="s2">"idebit_payin"</span><span class="p">,</span>
    <span class="nx">status</span><span class="p">:</span> <span class="s2">"approved"</span><span class="p">,</span>
    <span class="nx">mode</span><span class="p">:</span> <span class="s2">"live"</span><span class="p">,</span>
    <span class="nx">transaction_id</span><span class="p">:</span> <span class="s2">"43671"</span><span class="p">,</span>
    <span class="nx">unique_id</span><span class="p">:</span> <span class="s2">"44177a21403427eb96664a6d7e5d5d48"</span><span class="p">,</span>
    <span class="nx">technical_message</span><span class="p">:</span> <span class="s2">"Transaction successful!"</span><span class="p">,</span>
    <span class="nx">message</span><span class="p">:</span> <span class="s2">"Transaction successful!"</span><span class="p">,</span>
    <span class="nx">timestamp</span><span class="p">:</span> <span class="s2">"2019-03-14T12:05:58Z"</span><span class="p">,</span>
    <span class="nx">amount</span><span class="p">:</span> <span class="s2">"100"</span><span class="p">,</span>
    <span class="nx">currency</span><span class="p">:</span> <span class="s2">"CAD"</span><span class="p">,</span>
    <span class="nx">sent_to_acquirer</span><span class="p">:</span> <span class="s2">"true"</span><span class="p">,</span>
<span class="p">}</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;idebit_payin&lt;/transaction_type&gt;
  &lt;status&gt;approved&lt;/status&gt;
  &lt;mode&gt;live&lt;/mode&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;technical_message&gt;Transaction successful!&lt;/technical_message&gt;
  &lt;message&gt;Transaction successful!&lt;/message&gt;
  &lt;timestamp&gt;2019-03-14T12:05:58Z&lt;/timestamp&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;CAD&lt;/currency&gt;
  &lt;sent_to_acquirer&gt;true&lt;/sent_to_acquirer&gt;
&lt;/payment_transaction&gt;
</code></pre>

<p><strong>Successful Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>The transaction type</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>transaction_id</td>
<td>string(30)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>unique_id</td>
<td>string(32)</td>
<td>Unique id defined by gate (must later be used if capturing, voiding or refunding a transaction)</td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
<tr>
<td>message</td>
<td>string(255)</td>
<td>Human readable error message which can be displayed to users.</td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when the transaction was processed in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Combined date and time</a> e.g. 2007-08- 30T17:46:11Z</td>
</tr>
<tr>
<td>amount</td>
<td>integer</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>sent_to_acquirer</td>
<td>string</td>
<td>&quot;true&quot; or &quot;false&quot;</td>
</tr>
</tbody></table>

<blockquote>
<p>Error Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>stdClass Object
(
    [transaction_type] =&gt; idebit_payin
    [status] =&gt; error
    [mode] =&gt; live
    [transaction_id] =&gt; 43671
    [unique_id] =&gt; 44177a21403427eb96664a6d7e5d5d48
    [code] =&gt; 110
    [technical_message] =&gt; amount is missing!
    [message] =&gt; Please check input data for errors!
    [timestamp] =&gt; DateTime Object
        (
            [date] =&gt; 2019-03-14 12:05:58.000000
            [timezone_type] =&gt; 2
            [timezone] =&gt; Z
        )
    [amount] =&gt; 100
    [currency] =&gt; CAD
    [sent_to_acquirer] =&gt; false
)
</code></pre>

<pre class="highlight java tab-java"><code><span class="o">&lt;</span><span class="n">payment_response</span> <span class="n">content</span><span class="o">=[</span>
    <span class="o">&lt;</span><span class="n">transaction_type</span> <span class="n">content</span><span class="o">=[</span><span class="n">idebit_payin</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">status</span> <span class="n">content</span><span class="o">=[</span><span class="n">error</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">mode</span> <span class="n">content</span><span class="o">=[</span><span class="n">live</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">transaction_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">43671</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">unique_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">44177</span><span class="n">a21403427eb96664a6d7e5d5d48</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">code</span> <span class="n">content</span><span class="o">=[</span><span class="mi">110</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">technical_message</span> <span class="n">content</span><span class="o">=[</span><span class="n">amount</span> <span class="n">is</span> <span class="n">missing</span><span class="o">!]&gt;</span>
    <span class="o">&lt;</span><span class="n">message</span> <span class="n">content</span><span class="o">=[</span><span class="n">Please</span> <span class="n">check</span> <span class="n">input</span> <span class="n">data</span> <span class="k">for</span> <span class="n">errors</span><span class="o">!]&gt;</span>
    <span class="o">&lt;</span><span class="n">timestamp</span> <span class="n">content</span><span class="o">=[</span><span class="mi">2019</span><span class="o">-</span><span class="mo">03</span><span class="o">-</span><span class="mi">14</span><span class="nl">T12:</span><span class="mo">05</span><span class="o">:</span><span class="mi">58</span><span class="n">Z</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">amount</span> <span class="n">content</span><span class="o">=[</span><span class="mi">100</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">currency</span> <span class="n">content</span><span class="o">=[</span><span class="n">CAD</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">sent_to_acquirer</span> <span class="n">content</span><span class="o">=[</span><span class="kc">false</span><span class="o">]&gt;</span>
<span class="o">]&gt;</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="p">{</span>
    <span class="nl">transaction_type</span><span class="p">:</span> <span class="s2">"idebit_payin"</span><span class="p">,</span>
    <span class="nx">status</span><span class="p">:</span> <span class="s2">"error"</span><span class="p">,</span>
    <span class="nx">mode</span><span class="p">:</span> <span class="s2">"live"</span><span class="p">,</span>
    <span class="nx">transaction_id</span><span class="p">:</span> <span class="s2">"43671"</span><span class="p">,</span>
    <span class="nx">unique_id</span><span class="p">:</span> <span class="s2">"44177a21403427eb96664a6d7e5d5d48"</span><span class="p">,</span>
    <span class="nx">code</span><span class="p">:</span> <span class="s2">"110"</span><span class="p">,</span>
    <span class="nx">technical_message</span><span class="p">:</span> <span class="s2">"amount is missing!"</span><span class="p">,</span>
    <span class="nx">message</span><span class="p">:</span> <span class="s2">"Please check input data for errors!"</span><span class="p">,</span>
    <span class="nx">timestamp</span><span class="p">:</span> <span class="s2">"2019-03-14T12:05:58Z"</span><span class="p">,</span>
    <span class="nx">amount</span><span class="p">:</span> <span class="s2">"100"</span><span class="p">,</span>
    <span class="nx">currency</span><span class="p">:</span> <span class="s2">"CAD"</span><span class="p">,</span>
    <span class="nx">sent_to_acquirer</span><span class="p">:</span> <span class="s2">"false"</span><span class="p">,</span>
<span class="p">}</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;idebit_payin&lt;/transaction_type&gt;
  &lt;status&gt;error&lt;/status&gt;
  &lt;mode&gt;live&lt;/mode&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;code&gt;110&lt;/code&gt;
  &lt;technical_message&gt;amount is missing!&lt;/technical_message&gt;
  &lt;message&gt;Please check input data <span class="k">for </span>errors!&lt;/message&gt;
  &lt;timestamp&gt;2019-03-14T12:05:58Z&lt;/timestamp&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;CAD&lt;/currency&gt;
  &lt;sent_to_acquirer&gt;false&lt;/sent_to_acquirer&gt;
&lt;/payment_transaction&gt;
</code></pre>

<p><strong>Error Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>The transaction type</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>transaction_id</td>
<td>string(30)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>unique_id</td>
<td>string(32)</td>
<td>Unique id defined by gate (must later be used if capturing, voiding or refunding a transaction)</td>
</tr>
<tr>
<td>code</td>
<td>integer</td>
<td>Error code according to <a href="#error-code-table">Error code table</a></td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
<tr>
<td>message</td>
<td>string(255)</td>
<td>Human readable error message which can be displayed to users.</td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when the transaction was processed in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Combined date and time</a> e.g. 2007-08- 30T17:46:11Z</td>
</tr>
<tr>
<td>amount</td>
<td>integer</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>sent_to_acquirer</td>
<td>string</td>
<td>&quot;true&quot; or &quot;false&quot;</td>
</tr>
</tbody></table>
<h3 id='ideal'>iDeal</h3>
<p>iDeal is the most popular payment method in the Netherlands and is a real-time bank transfer system covering all major Dutch consumer banks.</p>

<blockquote>
<p>Request</p>
</blockquote>

<pre class="highlight php tab-php"><code><span class="cp">&lt;?php</span>

<span class="c1">// Load the pre-configured ini file...
</span><span class="nx">\Genesis\Config</span><span class="o">::</span><span class="na">loadSettings</span><span class="p">(</span><span class="s1">'/path/to/config.ini'</span><span class="p">);</span>

<span class="nv">$genesis</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Genesis</span><span class="p">(</span><span class="s1">'Financial\Alternatives\PPRO'</span><span class="p">);</span>
<span class="nv">$request</span> <span class="o">=</span> <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">request</span><span class="p">();</span>

<span class="nv">$request</span>
  <span class="o">-&gt;</span><span class="na">setTransactionId</span><span class="p">(</span><span class="s1">'43671'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setPaymentType</span><span class="p">(</span><span class="s1">'ideal'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setUsage</span><span class="p">(</span><span class="s1">'40208 concert tickets'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setRemoteIp</span><span class="p">(</span><span class="s1">'245.253.2.12'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setReturnSuccessUrl</span><span class="p">(</span><span class="s1">'http://www.example.com/success'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setReturnFailureUrl</span><span class="p">(</span><span class="s1">'http://www.example.com/failure'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setAmount</span><span class="p">(</span><span class="s1">'100'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCurrency</span><span class="p">(</span><span class="s1">'EUR'</span><span class="p">)</span>


  <span class="c1">// Billing Address
</span>  <span class="o">-&gt;</span><span class="na">setBillingFirstName</span><span class="p">(</span><span class="s1">'Barney'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingLastName</span><span class="p">(</span><span class="s1">'Rubble'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingAddress1</span><span class="p">(</span><span class="s1">'14, Nerazdelni str'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingZipCode</span><span class="p">(</span><span class="s1">'1407'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingCity</span><span class="p">(</span><span class="s1">'Amsterdam'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingCountry</span><span class="p">(</span><span class="s1">'NL'</span><span class="p">);</span>

<span class="k">try</span> <span class="p">{</span>
    <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">execute</span><span class="p">();</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">response</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">getResponseObject</span><span class="p">();</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">\Exception</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$e</span><span class="o">-&gt;</span><span class="na">getMessage</span><span class="p">();</span>
<span class="p">}</span>
</code></pre>

<pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.GenesisClient</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.TransactionResult</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.constants.Endpoints</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.constants.Environments</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.requests.financial.apm.PProRequest</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.model.Transaction</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Configuration</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Country</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Currency</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.math.BigDecimal</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.MalformedURLException</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.URL</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">GenesisExample</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">MalformedURLException</span> <span class="o">{</span>

    <span class="c1">// Create configuration</span>
    <span class="n">Configuration</span> <span class="n">configuration</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Configuration</span><span class="o">(</span><span class="n">Environments</span><span class="o">.</span><span class="na">STAGING</span><span class="o">,</span> <span class="n">Endpoints</span><span class="o">.</span><span class="na">EMERCHANTPAY</span><span class="o">);</span>

    <span class="n">configuration</span><span class="o">.</span><span class="na">setUsername</span><span class="o">(</span><span class="s">"SET_YOUR_USERNAME"</span><span class="o">);</span>
    <span class="n">configuration</span><span class="o">.</span><span class="na">setPassword</span><span class="o">(</span><span class="s">"SET_YOUR_PASSWORD"</span><span class="o">);</span>
    <span class="n">configuration</span><span class="o">.</span><span class="na">setToken</span><span class="o">(</span><span class="s">"SET_YOUR_TOKEN"</span><span class="o">);</span>

    <span class="n">PProRequest</span> <span class="n">request</span> <span class="o">=</span> <span class="k">new</span> <span class="n">PProRequest</span><span class="o">();</span>

    <span class="n">request</span><span class="o">.</span><span class="na">setTransactionId</span><span class="o">(</span><span class="s">"43671"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setPaymentType</span><span class="o">(</span><span class="s">"ideal"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setUsage</span><span class="o">(</span><span class="s">"40208 concert tickets"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setRemoteIp</span><span class="o">(</span><span class="s">"245.253.2.12"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setReturnSuccessUrl</span><span class="o">(</span><span class="k">new</span> <span class="n">URL</span><span class="o">(</span><span class="s">"http://www.example.com/success"</span><span class="o">));</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setReturnFailureUrl</span><span class="o">(</span><span class="k">new</span> <span class="n">URL</span><span class="o">(</span><span class="s">"http://www.example.com/failure"</span><span class="o">));</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setAmount</span><span class="o">(</span><span class="k">new</span> <span class="n">BigDecimal</span><span class="o">(</span><span class="mi">100</span><span class="o">));</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCurrency</span><span class="o">(</span><span class="s">"EUR"</span><span class="o">);</span>


    <span class="c1">// Billing Address</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingFirstname</span><span class="o">(</span><span class="s">"Barney"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingLastname</span><span class="o">(</span><span class="s">"Rubble"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingPrimaryAddress</span><span class="o">(</span><span class="s">"14, Nerazdelni str"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingZipCode</span><span class="o">(</span><span class="s">"1407"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingCity</span><span class="o">(</span><span class="s">"Amsterdam"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingCountry</span><span class="o">(</span><span class="s">"NL"</span><span class="o">);</span>

    <span class="n">GenesisClient</span> <span class="n">client</span> <span class="o">=</span> <span class="k">new</span> <span class="n">GenesisClient</span><span class="o">(</span><span class="n">configuration</span><span class="o">,</span> <span class="n">request</span><span class="o">);</span>
    <span class="n">client</span><span class="o">.</span><span class="na">execute</span><span class="o">();</span>

    <span class="c1">// Parse Payment result</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">client</span><span class="o">.</span><span class="na">getResponse</span><span class="o">());</span>

  <span class="o">}</span>
<span class="o">}</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="kd">var</span> <span class="nx">genesis</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'genesis.js/lib/genesis.js'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">transaction</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">genesis</span><span class="p">.</span><span class="nx">transaction</span><span class="p">();</span>

<span class="kd">var</span> <span class="nx">failure</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">reason</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">reason</span><span class="p">);</span>
<span class="p">};</span>

<span class="kd">var</span> <span class="nx">success</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>

<span class="nx">transaction</span><span class="p">.</span><span class="nx">ppro</span><span class="p">(</span>
  <span class="p">{</span>
    <span class="s2">"transaction_id"</span><span class="p">:</span> <span class="s2">"43671"</span><span class="p">,</span>
    <span class="s2">"payment_type"</span><span class="p">:</span> <span class="s2">"ideal"</span><span class="p">,</span>
    <span class="s2">"usage"</span><span class="p">:</span> <span class="s2">"40208 concert tickets"</span><span class="p">,</span>
    <span class="s2">"remote_ip"</span><span class="p">:</span> <span class="s2">"245.253.2.12"</span><span class="p">,</span>
    <span class="s2">"return_success_url"</span><span class="p">:</span> <span class="s2">"http://www.example.com/success"</span><span class="p">,</span>
    <span class="s2">"return_failure_url"</span><span class="p">:</span> <span class="s2">"http://www.example.com/failure"</span><span class="p">,</span>
    <span class="s2">"amount"</span><span class="p">:</span> <span class="s2">"100"</span><span class="p">,</span>
    <span class="s2">"currency"</span><span class="p">:</span> <span class="s2">"EUR"</span><span class="p">,</span>
    <span class="s2">"billing_address"</span><span class="p">:</span> <span class="p">{</span>
      <span class="s2">"first_name"</span><span class="p">:</span> <span class="s2">"Barney"</span><span class="p">,</span>
      <span class="s2">"last_name"</span><span class="p">:</span> <span class="s2">"Rubble"</span><span class="p">,</span>
      <span class="s2">"address1"</span><span class="p">:</span> <span class="s2">"14, Nerazdelni str"</span><span class="p">,</span>
      <span class="s2">"zip_code"</span><span class="p">:</span> <span class="s2">"1407"</span><span class="p">,</span>
      <span class="s2">"city"</span><span class="p">:</span> <span class="s2">"Amsterdam"</span><span class="p">,</span>
      <span class="s2">"country"</span><span class="p">:</span> <span class="s2">"NL"</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">).</span><span class="nx">send</span><span class="p">()</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">success</span><span class="p">)</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">failure</span><span class="p">);</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>curl https://username:password@gate.emerchantpay.net/process/TERMINAL-TOKEN <span class="se">\</span>
   -H <span class="s2">"Content-Type: text/xml"</span> <span class="se">\</span>
   -d <span class="s1">'
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;ppro&lt;/transaction_type&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;payment_type&gt;ideal&lt;/payment_type&gt;
  &lt;usage&gt;40208 concert tickets&lt;/usage&gt;
  &lt;remote_ip&gt;245.253.2.12&lt;/remote_ip&gt;
  &lt;return_success_url&gt;http://www.example.com/success&lt;/return_success_url&gt;
  &lt;return_failure_url&gt;http://www.example.com/failure&lt;/return_failure_url&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;EUR&lt;/currency&gt;
  &lt;billing_address&gt;
    &lt;first_name&gt;Barney&lt;/first_name&gt;
    &lt;last_name&gt;Rubble&lt;/last_name&gt;
    &lt;address1&gt;14, Nerazdelni str&lt;/address1&gt;
    &lt;zip_code&gt;1407&lt;/zip_code&gt;
    &lt;city&gt;Amsterdam&lt;/city&gt;
    &lt;country&gt;NL&lt;/country&gt;
  &lt;/billing_address&gt;
&lt;/payment_transaction&gt;'</span>
</code></pre>

<p><strong>Request Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>required</td>
<td>string(255)</td>
<td><strong>ppro</strong> or <strong>ideal</strong>. Contact tech support at <a href="mailto:tech-support@emerchantpay.net">tech-support@emerchantpay.net</a> for more details.</td>
</tr>
<tr>
<td>transaction_id</td>
<td>required</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>payment_type</td>
<td>required<sup>1</sup></td>
<td>ideal</td>
<td>iDeal. Contact tech support at <a href="mailto:tech-support@emerchantpay.net">tech-support@emerchantpay.net</a> for more details.</td>
</tr>
<tr>
<td>usage</td>
<td>optional</td>
<td>string(255)</td>
<td>Description of the transaction for later use</td>
</tr>
<tr>
<td>remote_ip</td>
<td>required*</td>
<td>IPv4 address</td>
<td>IPv4 address of customer</td>
</tr>
<tr>
<td>return_success_url</td>
<td>required</td>
<td>url</td>
<td>URL where customer is sent to after successful payment</td>
</tr>
<tr>
<td>return_failure_url</td>
<td>required</td>
<td>url</td>
<td>URL where customer is sent to after unsuccessful payment</td>
</tr>
<tr>
<td>amount</td>
<td>required</td>
<td>integer &gt; 0</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>required</td>
<td>string(3)</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td><strong>billing_address</strong></td>
<td>required</td>
<td></td>
<td>See <a href="#required-vs-optional-api-params">Required vs Optional API params</a> for details</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;first_name</td>
<td>required*</td>
<td>string(255)</td>
<td>Customer first name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;last_name</td>
<td>required*</td>
<td>string(255)</td>
<td>Customer last name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address1</td>
<td>required*</td>
<td>string(255)</td>
<td>Primary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address2</td>
<td>required*</td>
<td>string(255)</td>
<td>Secondary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;zip_code</td>
<td>required*</td>
<td>string</td>
<td>ZIP code</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;city</td>
<td>required*</td>
<td>string(255)</td>
<td>City</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;state</td>
<td>required*</td>
<td>string(2)</td>
<td>State code in <a href="https://en.wikipedia.org/wiki/ISO_3166-2">ISO 3166-2</a>, required for USA and Canada</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;country</td>
<td>required</td>
<td>string(2)</td>
<td>Country code in <a href="https://www.iso.org/iso-3166-country-codes.html">ISO 3166</a></td>
</tr>
<tr>
<td><strong>shipping_address</strong></td>
<td>optional</td>
<td></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;first_name</td>
<td>optional</td>
<td>string(255)</td>
<td>Customer first name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;last_name</td>
<td>optional</td>
<td>string(255)</td>
<td>Customer last name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address1</td>
<td>optional</td>
<td>string(255)</td>
<td>Primary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address2</td>
<td>optional</td>
<td>string(255)</td>
<td>Secondary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;zip_code</td>
<td>optional</td>
<td>string</td>
<td>ZIP code</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;city</td>
<td>optional</td>
<td>string(255)</td>
<td>City</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;state</td>
<td>optional</td>
<td>string(2)</td>
<td>State code in <a href="https://en.wikipedia.org/wiki/ISO_3166-2">ISO 3166-2</a>, required for USA and Canada</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;country</td>
<td>optional</td>
<td>string(2)</td>
<td>Country code in <a href="https://www.iso.org/iso-3166-country-codes.html">ISO 3166</a></td>
</tr>
</tbody></table>

<p><code>required* = conditionally required</code></p>

<p><code>1 - payment_type must be submitted only when the transaction type is set to ppro</code></p>

<p><strong>Supported currencies and countries</strong></p>

<table><thead>
<tr>
<th>Currency code</th>
<th>Country code</th>
</tr>
</thead><tbody>
<tr>
<td>EUR</td>
<td>NL</td>
</tr>
</tbody></table>

<blockquote>
<p>Successful Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>stdClass Object
(
    [transaction_type] =&gt; ppro
    [status] =&gt; pending_async
    [mode] =&gt; live
    [transaction_id] =&gt; 43671
    [unique_id] =&gt; 44177a21403427eb96664a6d7e5d5d48
    [technical_message] =&gt; Transaction successful!
    [message] =&gt; Transaction successful!
    [redirect_url] =&gt; https://gate.emerchantpay.net/redirect/to_acquirer/649e1ff35c61
    [timestamp] =&gt; DateTime Object
        (
            [date] =&gt; 2019-03-14 12:05:58.000000
            [timezone_type] =&gt; 2
            [timezone] =&gt; Z
        )
    [descriptor] =&gt; Descriptor one
    [amount] =&gt; 100
    [currency] =&gt; EUR
    [sent_to_acquirer] =&gt; true
)
</code></pre>

<pre class="highlight java tab-java"><code><span class="o">&lt;</span><span class="n">payment_response</span> <span class="n">content</span><span class="o">=[</span>
    <span class="o">&lt;</span><span class="n">transaction_type</span> <span class="n">content</span><span class="o">=[</span><span class="n">ppro</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">status</span> <span class="n">content</span><span class="o">=[</span><span class="n">pending_async</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">mode</span> <span class="n">content</span><span class="o">=[</span><span class="n">live</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">transaction_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">43671</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">unique_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">44177</span><span class="n">a21403427eb96664a6d7e5d5d48</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">technical_message</span> <span class="n">content</span><span class="o">=[</span><span class="n">Transaction</span> <span class="n">successful</span><span class="o">!]&gt;</span>
    <span class="o">&lt;</span><span class="n">message</span> <span class="n">content</span><span class="o">=[</span><span class="n">Transaction</span> <span class="n">successful</span><span class="o">!]&gt;</span>
    <span class="o">&lt;</span><span class="n">redirect_url</span> <span class="n">content</span><span class="o">=[</span><span class="nl">https:</span><span class="c1">//gate.emerchantpay.net/redirect/to_acquirer/649e1ff35c61]&gt;</span>
    <span class="o">&lt;</span><span class="n">timestamp</span> <span class="n">content</span><span class="o">=[</span><span class="mi">2019</span><span class="o">-</span><span class="mo">03</span><span class="o">-</span><span class="mi">14</span><span class="nl">T12:</span><span class="mo">05</span><span class="o">:</span><span class="mi">58</span><span class="n">Z</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">descriptor</span> <span class="n">content</span><span class="o">=[</span><span class="n">Descriptor</span> <span class="n">one</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">amount</span> <span class="n">content</span><span class="o">=[</span><span class="mi">100</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">currency</span> <span class="n">content</span><span class="o">=[</span><span class="n">EUR</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">sent_to_acquirer</span> <span class="n">content</span><span class="o">=[</span><span class="kc">true</span><span class="o">]&gt;</span>
<span class="o">]&gt;</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="p">{</span>
    <span class="nl">transaction_type</span><span class="p">:</span> <span class="s2">"ppro"</span><span class="p">,</span>
    <span class="nx">status</span><span class="p">:</span> <span class="s2">"pending_async"</span><span class="p">,</span>
    <span class="nx">mode</span><span class="p">:</span> <span class="s2">"live"</span><span class="p">,</span>
    <span class="nx">transaction_id</span><span class="p">:</span> <span class="s2">"43671"</span><span class="p">,</span>
    <span class="nx">unique_id</span><span class="p">:</span> <span class="s2">"44177a21403427eb96664a6d7e5d5d48"</span><span class="p">,</span>
    <span class="nx">technical_message</span><span class="p">:</span> <span class="s2">"Transaction successful!"</span><span class="p">,</span>
    <span class="nx">message</span><span class="p">:</span> <span class="s2">"Transaction successful!"</span><span class="p">,</span>
    <span class="nx">redirect_url</span><span class="p">:</span> <span class="s2">"https://gate.emerchantpay.net/redirect/to_acquirer/649e1ff35c61"</span><span class="p">,</span>
    <span class="nx">timestamp</span><span class="p">:</span> <span class="s2">"2019-03-14T12:05:58Z"</span><span class="p">,</span>
    <span class="nx">descriptor</span><span class="p">:</span> <span class="s2">"Descriptor one"</span><span class="p">,</span>
    <span class="nx">amount</span><span class="p">:</span> <span class="s2">"100"</span><span class="p">,</span>
    <span class="nx">currency</span><span class="p">:</span> <span class="s2">"EUR"</span><span class="p">,</span>
    <span class="nx">sent_to_acquirer</span><span class="p">:</span> <span class="s2">"true"</span><span class="p">,</span>
<span class="p">}</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;ppro&lt;/transaction_type&gt;
  &lt;status&gt;pending_async&lt;/status&gt;
  &lt;mode&gt;live&lt;/mode&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;technical_message&gt;Transaction successful!&lt;/technical_message&gt;
  &lt;message&gt;Transaction successful!&lt;/message&gt;
  &lt;redirect_url&gt;https://gate.emerchantpay.net/redirect/to_acquirer/649e1ff35c61&lt;/redirect_url&gt;
  &lt;timestamp&gt;2019-03-14T12:05:58Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;EUR&lt;/currency&gt;
  &lt;sent_to_acquirer&gt;true&lt;/sent_to_acquirer&gt;
&lt;/payment_transaction&gt;
</code></pre>

<p><strong>Successful Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>The transaction type</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>transaction_id</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>unique_id</td>
<td>string(32)</td>
<td>Unique id defined by gate (must later be used if capturing, voiding or refunding a transaction)</td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
<tr>
<td>message</td>
<td>string(255)</td>
<td>Human readable error message which can be displayed to users.</td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>redirect_url</td>
<td>url</td>
<td>URL where user has to be redirected to complete payment process. It is available for asynchronous mode</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when the transaction was processed in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Combined date and time</a> e.g. 2007-08- 30T17:46:11Z</td>
</tr>
<tr>
<td>descriptor</td>
<td>string</td>
<td>Static descriptor MID info as configured on the gateway</td>
</tr>
<tr>
<td>amount</td>
<td>integer</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>sent_to_acquirer</td>
<td>string</td>
<td>&quot;true&quot; or &quot;false&quot;</td>
</tr>
</tbody></table>

<blockquote>
<p>Error Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>stdClass Object
(
    [transaction_type] =&gt; ppro
    [status] =&gt; error
    [mode] =&gt; live
    [transaction_id] =&gt; 43671
    [unique_id] =&gt; 44177a21403427eb96664a6d7e5d5d48
    [code] =&gt; 110
    [message] =&gt; Something went wrong, please contact support!
    [timestamp] =&gt; DateTime Object
        (
            [date] =&gt; 2019-03-14 12:05:58.000000
            [timezone_type] =&gt; 2
            [timezone] =&gt; Z
        )
    [descriptor] =&gt; Descriptor one
    [amount] =&gt; 100
    [currency] =&gt; EUR
    [sent_to_acquirer] =&gt; true
)
</code></pre>

<pre class="highlight java tab-java"><code><span class="o">&lt;</span><span class="n">payment_response</span> <span class="n">content</span><span class="o">=[</span>
    <span class="o">&lt;</span><span class="n">transaction_type</span> <span class="n">content</span><span class="o">=[</span><span class="n">ppro</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">status</span> <span class="n">content</span><span class="o">=[</span><span class="n">error</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">mode</span> <span class="n">content</span><span class="o">=[</span><span class="n">live</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">transaction_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">43671</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">unique_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">44177</span><span class="n">a21403427eb96664a6d7e5d5d48</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">code</span> <span class="n">content</span><span class="o">=[</span><span class="mi">110</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">message</span> <span class="n">content</span><span class="o">=[</span><span class="n">Something</span> <span class="n">went</span> <span class="n">wrong</span><span class="o">,</span> <span class="n">please</span> <span class="n">contact</span> <span class="n">support</span><span class="o">!]&gt;</span>
    <span class="o">&lt;</span><span class="n">timestamp</span> <span class="n">content</span><span class="o">=[</span><span class="mi">2019</span><span class="o">-</span><span class="mo">03</span><span class="o">-</span><span class="mi">14</span><span class="nl">T12:</span><span class="mo">05</span><span class="o">:</span><span class="mi">58</span><span class="n">Z</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">descriptor</span> <span class="n">content</span><span class="o">=[</span><span class="n">Descriptor</span> <span class="n">one</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">amount</span> <span class="n">content</span><span class="o">=[</span><span class="mi">100</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">currency</span> <span class="n">content</span><span class="o">=[</span><span class="n">EUR</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">sent_to_acquirer</span> <span class="n">content</span><span class="o">=[</span><span class="kc">true</span><span class="o">]&gt;</span>
<span class="o">]&gt;</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="p">{</span>
    <span class="nl">transaction_type</span><span class="p">:</span> <span class="s2">"ppro"</span><span class="p">,</span>
    <span class="nx">status</span><span class="p">:</span> <span class="s2">"error"</span><span class="p">,</span>
    <span class="nx">mode</span><span class="p">:</span> <span class="s2">"live"</span><span class="p">,</span>
    <span class="nx">transaction_id</span><span class="p">:</span> <span class="s2">"43671"</span><span class="p">,</span>
    <span class="nx">unique_id</span><span class="p">:</span> <span class="s2">"44177a21403427eb96664a6d7e5d5d48"</span><span class="p">,</span>
    <span class="nx">code</span><span class="p">:</span> <span class="s2">"110"</span><span class="p">,</span>
    <span class="nx">message</span><span class="p">:</span> <span class="s2">"Something went wrong, please contact support!"</span><span class="p">,</span>
    <span class="nx">timestamp</span><span class="p">:</span> <span class="s2">"2019-03-14T12:05:58Z"</span><span class="p">,</span>
    <span class="nx">descriptor</span><span class="p">:</span> <span class="s2">"Descriptor one"</span><span class="p">,</span>
    <span class="nx">amount</span><span class="p">:</span> <span class="s2">"100"</span><span class="p">,</span>
    <span class="nx">currency</span><span class="p">:</span> <span class="s2">"EUR"</span><span class="p">,</span>
    <span class="nx">sent_to_acquirer</span><span class="p">:</span> <span class="s2">"true"</span><span class="p">,</span>
<span class="p">}</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;ppro&lt;/transaction_type&gt;
  &lt;status&gt;error&lt;/status&gt;
  &lt;mode&gt;live&lt;/mode&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;code&gt;110&lt;/code&gt;
  &lt;message&gt;Something went wrong, please contact support!&lt;/message&gt;
  &lt;timestamp&gt;2019-03-14T12:05:58Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;EUR&lt;/currency&gt;
  &lt;sent_to_acquirer&gt;true&lt;/sent_to_acquirer&gt;
&lt;/payment_transaction&gt;
</code></pre>

<p><strong>Error Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>The transaction type</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>transaction_id</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>unique_id</td>
<td>string(32)</td>
<td>Unique id defined by gate (must later be used if capturing, voiding or refunding a transaction)</td>
</tr>
<tr>
<td>code</td>
<td>integer</td>
<td>Error code according to <a href="#error-code-table">Error code table</a></td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
<tr>
<td>message</td>
<td>string(255)</td>
<td>Human readable error message which can be displayed to users.</td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when the transaction was processed in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Combined date and time</a> e.g. 2007-08- 30T17:46:11Z</td>
</tr>
<tr>
<td>descriptor</td>
<td>string</td>
<td>Static descriptor MID info as configured on the gateway</td>
</tr>
<tr>
<td>amount</td>
<td>integer</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>sent_to_acquirer</td>
<td>string</td>
<td>&quot;true&quot; or &quot;false&quot;</td>
</tr>
</tbody></table>
<h3 id='instadebit'>InstaDebit</h3>
<aside class="notice" >
InstaDebit connects consumers to their online banking directly from checkout, enabling secure, realtime payments without a credit card. Using InstaDebit allows consumers to transfer funds to merchants without revealing their personal banking information.
<br><br>
The main difference between iDebit and InstaDebit is that InstaDebit uses eCheck, iDebit uses online bank transfer.
<br><br>
InstaDebit transactions have payins and payouts. The payin is asynchronous, while the payout is synchronous.
<br><br>
InstaDebit Payin transaction - after a successful validation of transaction parameters, transaction status is set to pending async and the consumer is redirected to the InstaDebit consumers page. The consumer then carries out the specified transaction details and finalizes the transaction. The gateway waits for an async notification from InstaDebit with the payment result of the consumer bank payment executed on the InstaDebit consumers page, and updates the transaction status accordingly.
<br><br>
When the payment reaches a final state, the gateway sends a notification to the merchant on the configured notification URL for the merchant.
<br><br>
InstaDebit Payout transaction - the transaction is synchronous and transaction status is set immediately after the response.
</aside>

<p><strong>Supported countries</strong></p>

<table><thead>
<tr>
<th>Country name</th>
<th>Country code</th>
</tr>
</thead><tbody>
<tr>
<td>Canada</td>
<td>CA</td>
</tr>
</tbody></table>

<p>InstaDebit is available only for Canadian merchants and consumers.</p>
<h4 id='payin-2'>Payin</h4>
<blockquote>
<p>Request</p>
</blockquote>

<pre class="highlight php tab-php"><code><span class="cp">&lt;?php</span>

<span class="c1">// Load the pre-configured ini file...
</span><span class="nx">\Genesis\Config</span><span class="o">::</span><span class="na">loadSettings</span><span class="p">(</span><span class="s1">'/path/to/config.ini'</span><span class="p">);</span>

<span class="nv">$genesis</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Genesis</span><span class="p">(</span><span class="s1">'Financial\OnlineBankingPayments\InstaDebit\Payin'</span><span class="p">);</span>
<span class="nv">$request</span> <span class="o">=</span> <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">request</span><span class="p">();</span>

<span class="nv">$request</span>
  <span class="o">-&gt;</span><span class="na">setTransactionId</span><span class="p">(</span><span class="s1">'43671'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCustomerAccountId</span><span class="p">(</span><span class="s1">'118221674199'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setUsage</span><span class="p">(</span><span class="s1">'40208 concert tickets'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setRemoteIp</span><span class="p">(</span><span class="s1">'245.253.2.12'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setNotificationUrl</span><span class="p">(</span><span class="s1">'https://www.example.com/notification'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setReturnUrl</span><span class="p">(</span><span class="s1">'https://gate.emerchantpay.net/redirect/to_acquirer/a55ab44d242f'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setAmount</span><span class="p">(</span><span class="s1">'100'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCurrency</span><span class="p">(</span><span class="s1">'CAD'</span><span class="p">)</span>


  <span class="c1">// Billing Address
</span>  <span class="o">-&gt;</span><span class="na">setBillingFirstName</span><span class="p">(</span><span class="s1">'Travis'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingLastName</span><span class="p">(</span><span class="s1">'Pastrana'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingAddress1</span><span class="p">(</span><span class="s1">'46 Donora Dr'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingZipCode</span><span class="p">(</span><span class="s1">'M4B1B3'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingCity</span><span class="p">(</span><span class="s1">'Toronto'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingState</span><span class="p">(</span><span class="s1">'ON'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingCountry</span><span class="p">(</span><span class="s1">'CA'</span><span class="p">);</span>

<span class="k">try</span> <span class="p">{</span>
    <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">execute</span><span class="p">();</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">response</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">getResponseObject</span><span class="p">();</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">\Exception</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$e</span><span class="o">-&gt;</span><span class="na">getMessage</span><span class="p">();</span>
<span class="p">}</span>
</code></pre>

<pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.GenesisClient</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.TransactionResult</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.constants.Endpoints</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.constants.Environments</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.requests.financial.oBeP.InstaDebitPayInRequest</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.model.Transaction</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Configuration</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Country</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Currency</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.math.BigDecimal</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.MalformedURLException</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.URL</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">GenesisExample</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">MalformedURLException</span> <span class="o">{</span>

    <span class="c1">// Create configuration</span>
    <span class="n">Configuration</span> <span class="n">configuration</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Configuration</span><span class="o">(</span><span class="n">Environments</span><span class="o">.</span><span class="na">STAGING</span><span class="o">,</span> <span class="n">Endpoints</span><span class="o">.</span><span class="na">EMERCHANTPAY</span><span class="o">);</span>

    <span class="n">configuration</span><span class="o">.</span><span class="na">setUsername</span><span class="o">(</span><span class="s">"SET_YOUR_USERNAME"</span><span class="o">);</span>
    <span class="n">configuration</span><span class="o">.</span><span class="na">setPassword</span><span class="o">(</span><span class="s">"SET_YOUR_PASSWORD"</span><span class="o">);</span>
    <span class="n">configuration</span><span class="o">.</span><span class="na">setToken</span><span class="o">(</span><span class="s">"SET_YOUR_TOKEN"</span><span class="o">);</span>

    <span class="n">InstaDebitPayInRequest</span> <span class="n">request</span> <span class="o">=</span> <span class="k">new</span> <span class="n">InstaDebitPayInRequest</span><span class="o">();</span>

    <span class="n">request</span><span class="o">.</span><span class="na">setTransactionId</span><span class="o">(</span><span class="s">"43671"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCustomerAccountId</span><span class="o">(</span><span class="s">"118221674199"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setUsage</span><span class="o">(</span><span class="s">"40208 concert tickets"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setRemoteIp</span><span class="o">(</span><span class="s">"245.253.2.12"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setNotificationUrl</span><span class="o">(</span><span class="k">new</span> <span class="n">URL</span><span class="o">(</span><span class="s">"https://www.example.com/notification"</span><span class="o">));</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setReturnUrl</span><span class="o">(</span><span class="k">new</span> <span class="n">URL</span><span class="o">(</span><span class="s">"https://gate.emerchantpay.net/redirect/to_acquirer/a55ab44d242f"</span><span class="o">));</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setAmount</span><span class="o">(</span><span class="k">new</span> <span class="n">BigDecimal</span><span class="o">(</span><span class="mi">100</span><span class="o">));</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCurrency</span><span class="o">(</span><span class="s">"CAD"</span><span class="o">);</span>


    <span class="c1">// Billing Address</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingFirstname</span><span class="o">(</span><span class="s">"Travis"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingLastname</span><span class="o">(</span><span class="s">"Pastrana"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingPrimaryAddress</span><span class="o">(</span><span class="s">"46 Donora Dr"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingZipCode</span><span class="o">(</span><span class="s">"M4B1B3"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingCity</span><span class="o">(</span><span class="s">"Toronto"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingState</span><span class="o">(</span><span class="s">"ON"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingCountry</span><span class="o">(</span><span class="s">"CA"</span><span class="o">);</span>

    <span class="n">GenesisClient</span> <span class="n">client</span> <span class="o">=</span> <span class="k">new</span> <span class="n">GenesisClient</span><span class="o">(</span><span class="n">configuration</span><span class="o">,</span> <span class="n">request</span><span class="o">);</span>
    <span class="n">client</span><span class="o">.</span><span class="na">execute</span><span class="o">();</span>

    <span class="c1">// Parse Payment result</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">client</span><span class="o">.</span><span class="na">getResponse</span><span class="o">());</span>

  <span class="o">}</span>
<span class="o">}</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="kd">var</span> <span class="nx">genesis</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'genesis.js/lib/genesis.js'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">transaction</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">genesis</span><span class="p">.</span><span class="nx">transaction</span><span class="p">();</span>

<span class="kd">var</span> <span class="nx">failure</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">reason</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">reason</span><span class="p">);</span>
<span class="p">};</span>

<span class="kd">var</span> <span class="nx">success</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>

<span class="nx">transaction</span><span class="p">.</span><span class="nx">insta_debit_payin</span><span class="p">(</span>
  <span class="p">{</span>
    <span class="s2">"transaction_id"</span><span class="p">:</span> <span class="s2">"43671"</span><span class="p">,</span>
    <span class="s2">"customer_account_id"</span><span class="p">:</span> <span class="s2">"118221674199"</span><span class="p">,</span>
    <span class="s2">"usage"</span><span class="p">:</span> <span class="s2">"40208 concert tickets"</span><span class="p">,</span>
    <span class="s2">"remote_ip"</span><span class="p">:</span> <span class="s2">"245.253.2.12"</span><span class="p">,</span>
    <span class="s2">"notification_url"</span><span class="p">:</span> <span class="s2">"https://www.example.com/notification"</span><span class="p">,</span>
    <span class="s2">"return_url"</span><span class="p">:</span> <span class="s2">"https://gate.emerchantpay.net/redirect/to_acquirer/a55ab44d242f"</span><span class="p">,</span>
    <span class="s2">"amount"</span><span class="p">:</span> <span class="s2">"100"</span><span class="p">,</span>
    <span class="s2">"currency"</span><span class="p">:</span> <span class="s2">"CAD"</span><span class="p">,</span>
    <span class="s2">"billing_address"</span><span class="p">:</span> <span class="p">{</span>
      <span class="s2">"first_name"</span><span class="p">:</span> <span class="s2">"Travis"</span><span class="p">,</span>
      <span class="s2">"last_name"</span><span class="p">:</span> <span class="s2">"Pastrana"</span><span class="p">,</span>
      <span class="s2">"address1"</span><span class="p">:</span> <span class="s2">"46 Donora Dr"</span><span class="p">,</span>
      <span class="s2">"zip_code"</span><span class="p">:</span> <span class="s2">"M4B1B3"</span><span class="p">,</span>
      <span class="s2">"city"</span><span class="p">:</span> <span class="s2">"Toronto"</span><span class="p">,</span>
      <span class="s2">"state"</span><span class="p">:</span> <span class="s2">"ON"</span><span class="p">,</span>
      <span class="s2">"country"</span><span class="p">:</span> <span class="s2">"CA"</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">).</span><span class="nx">send</span><span class="p">()</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">success</span><span class="p">)</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">failure</span><span class="p">);</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>curl https://username:password@gate.emerchantpay.net/process/TERMINAL-TOKEN <span class="se">\</span>
   -H <span class="s2">"Content-Type: text/xml"</span> <span class="se">\</span>
   -d <span class="s1">'
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;insta_debit_payin&lt;/transaction_type&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;customer_account_id&gt;118221674199&lt;/customer_account_id&gt;
  &lt;usage&gt;40208 concert tickets&lt;/usage&gt;
  &lt;remote_ip&gt;245.253.2.12&lt;/remote_ip&gt;
  &lt;notification_url&gt;https://www.example.com/notification&lt;/notification_url&gt;
  &lt;return_url&gt;https://gate.emerchantpay.net/redirect/to_acquirer/a55ab44d242f&lt;/return_url&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;CAD&lt;/currency&gt;
  &lt;billing_address&gt;
    &lt;first_name&gt;Travis&lt;/first_name&gt;
    &lt;last_name&gt;Pastrana&lt;/last_name&gt;
    &lt;address1&gt;46 Donora Dr&lt;/address1&gt;
    &lt;zip_code&gt;M4B1B3&lt;/zip_code&gt;
    &lt;city&gt;Toronto&lt;/city&gt;
    &lt;state&gt;ON&lt;/state&gt;
    &lt;country&gt;CA&lt;/country&gt;
  &lt;/billing_address&gt;
&lt;/payment_transaction&gt;'</span>
</code></pre>

<p><strong>Request Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>required</td>
<td>string(255)</td>
<td>The transaction type: <strong>insta_debit_payin</strong></td>
</tr>
<tr>
<td>transaction_id</td>
<td>required</td>
<td>string(30)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>customer_account_id</td>
<td>required</td>
<td>string(20)</td>
<td>Unique consumer account ID</td>
</tr>
<tr>
<td>usage</td>
<td>optional</td>
<td>string(255)</td>
<td>Description of the transaction for later use</td>
</tr>
<tr>
<td>remote_ip</td>
<td>required</td>
<td>IPv4 address</td>
<td>IPv4 address of customer</td>
</tr>
<tr>
<td>return_url</td>
<td>required</td>
<td>url</td>
<td>URL where consumer is sent to after payment</td>
</tr>
<tr>
<td>amount</td>
<td>required</td>
<td>integer &gt; 0</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>required</td>
<td>string(3)</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>customer_email</td>
<td>required*</td>
<td>e-mail address</td>
<td>Must contain valid e-mail of customer</td>
</tr>
<tr>
<td>customer_phone</td>
<td>required*</td>
<td>string(32)</td>
<td>Must contain valid phone number of customer</td>
</tr>
<tr>
<td><strong>billing_address</strong></td>
<td>required</td>
<td></td>
<td>See <a href="#required-vs-optional-api-params">Required vs Optional API params</a> for details</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;first_name</td>
<td>required*</td>
<td>string(255)</td>
<td>Customer first name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;last_name</td>
<td>required*</td>
<td>string(255)</td>
<td>Customer last name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address1</td>
<td>required*</td>
<td>string(255)</td>
<td>Primary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address2</td>
<td>required*</td>
<td>string(255)</td>
<td>Secondary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;zip_code</td>
<td>required*</td>
<td>string</td>
<td>ZIP code</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;city</td>
<td>required*</td>
<td>string(255)</td>
<td>City</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;state</td>
<td>required*</td>
<td>string(2)</td>
<td>State code in <a href="https://en.wikipedia.org/wiki/ISO_3166-2">ISO 3166-2</a>, required for USA and Canada</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;country</td>
<td>required</td>
<td>string(2)</td>
<td>Country code in <a href="https://www.iso.org/iso-3166-country-codes.html">ISO 3166</a></td>
</tr>
</tbody></table>

<p><code>required* = conditionally required</code></p>

<blockquote>
<p>Successful Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>stdClass Object
(
    [transaction_type] =&gt; insta_debit_payin
    [status] =&gt; pending_async
    [mode] =&gt; live
    [transaction_id] =&gt; 43671
    [unique_id] =&gt; 44177a21403427eb96664a6d7e5d5d48
    [technical_message] =&gt; Transaction successful!
    [message] =&gt; Transaction successful!
    [redirect_url] =&gt; https://gate.emerchantpay.net/redirect/to_acquirer/649e1ff35c61
    [timestamp] =&gt; DateTime Object
        (
            [date] =&gt; 2019-03-14 12:05:58.000000
            [timezone_type] =&gt; 2
            [timezone] =&gt; Z
        )
    [descriptor] =&gt; Descriptor one
    [amount] =&gt; 100
    [currency] =&gt; CAD
    [sent_to_acquirer] =&gt; true
)
</code></pre>

<pre class="highlight java tab-java"><code><span class="o">&lt;</span><span class="n">payment_response</span> <span class="n">content</span><span class="o">=[</span>
    <span class="o">&lt;</span><span class="n">transaction_type</span> <span class="n">content</span><span class="o">=[</span><span class="n">insta_debit_payin</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">status</span> <span class="n">content</span><span class="o">=[</span><span class="n">pending_async</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">mode</span> <span class="n">content</span><span class="o">=[</span><span class="n">live</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">transaction_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">43671</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">unique_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">44177</span><span class="n">a21403427eb96664a6d7e5d5d48</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">technical_message</span> <span class="n">content</span><span class="o">=[</span><span class="n">Transaction</span> <span class="n">successful</span><span class="o">!]&gt;</span>
    <span class="o">&lt;</span><span class="n">message</span> <span class="n">content</span><span class="o">=[</span><span class="n">Transaction</span> <span class="n">successful</span><span class="o">!]&gt;</span>
    <span class="o">&lt;</span><span class="n">redirect_url</span> <span class="n">content</span><span class="o">=[</span><span class="nl">https:</span><span class="c1">//gate.emerchantpay.net/redirect/to_acquirer/649e1ff35c61]&gt;</span>
    <span class="o">&lt;</span><span class="n">timestamp</span> <span class="n">content</span><span class="o">=[</span><span class="mi">2019</span><span class="o">-</span><span class="mo">03</span><span class="o">-</span><span class="mi">14</span><span class="nl">T12:</span><span class="mo">05</span><span class="o">:</span><span class="mi">58</span><span class="n">Z</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">descriptor</span> <span class="n">content</span><span class="o">=[</span><span class="n">Descriptor</span> <span class="n">one</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">amount</span> <span class="n">content</span><span class="o">=[</span><span class="mi">100</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">currency</span> <span class="n">content</span><span class="o">=[</span><span class="n">CAD</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">sent_to_acquirer</span> <span class="n">content</span><span class="o">=[</span><span class="kc">true</span><span class="o">]&gt;</span>
<span class="o">]&gt;</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="p">{</span>
    <span class="nl">transaction_type</span><span class="p">:</span> <span class="s2">"insta_debit_payin"</span><span class="p">,</span>
    <span class="nx">status</span><span class="p">:</span> <span class="s2">"pending_async"</span><span class="p">,</span>
    <span class="nx">mode</span><span class="p">:</span> <span class="s2">"live"</span><span class="p">,</span>
    <span class="nx">transaction_id</span><span class="p">:</span> <span class="s2">"43671"</span><span class="p">,</span>
    <span class="nx">unique_id</span><span class="p">:</span> <span class="s2">"44177a21403427eb96664a6d7e5d5d48"</span><span class="p">,</span>
    <span class="nx">technical_message</span><span class="p">:</span> <span class="s2">"Transaction successful!"</span><span class="p">,</span>
    <span class="nx">message</span><span class="p">:</span> <span class="s2">"Transaction successful!"</span><span class="p">,</span>
    <span class="nx">redirect_url</span><span class="p">:</span> <span class="s2">"https://gate.emerchantpay.net/redirect/to_acquirer/649e1ff35c61"</span><span class="p">,</span>
    <span class="nx">timestamp</span><span class="p">:</span> <span class="s2">"2019-03-14T12:05:58Z"</span><span class="p">,</span>
    <span class="nx">descriptor</span><span class="p">:</span> <span class="s2">"Descriptor one"</span><span class="p">,</span>
    <span class="nx">amount</span><span class="p">:</span> <span class="s2">"100"</span><span class="p">,</span>
    <span class="nx">currency</span><span class="p">:</span> <span class="s2">"CAD"</span><span class="p">,</span>
    <span class="nx">sent_to_acquirer</span><span class="p">:</span> <span class="s2">"true"</span><span class="p">,</span>
<span class="p">}</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;insta_debit_payin&lt;/transaction_type&gt;
  &lt;status&gt;pending_async&lt;/status&gt;
  &lt;mode&gt;live&lt;/mode&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;technical_message&gt;Transaction successful!&lt;/technical_message&gt;
  &lt;message&gt;Transaction successful!&lt;/message&gt;
  &lt;redirect_url&gt;https://gate.emerchantpay.net/redirect/to_acquirer/649e1ff35c61&lt;/redirect_url&gt;
  &lt;timestamp&gt;2019-03-14T12:05:58Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;CAD&lt;/currency&gt;
  &lt;sent_to_acquirer&gt;true&lt;/sent_to_acquirer&gt;
&lt;/payment_transaction&gt;
</code></pre>

<p><strong>Successful Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>The transaction type</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>transaction_id</td>
<td>string(30)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>unique_id</td>
<td>string(32)</td>
<td>Unique id defined by gate (must later be used if capturing, voiding or refunding a transaction)</td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
<tr>
<td>message</td>
<td>string(255)</td>
<td>Human readable error message which can be displayed to users.</td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>redirect_url</td>
<td>url</td>
<td>URL where user has to be redirected to complete payment process. It is available for asynchronous mode</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when the transaction was processed in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Combined date and time</a> e.g. 2007-08- 30T17:46:11Z</td>
</tr>
<tr>
<td>descriptor</td>
<td>string</td>
<td>Static descriptor MID info as configured on the gateway</td>
</tr>
<tr>
<td>amount</td>
<td>integer</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>sent_to_acquirer</td>
<td>string</td>
<td>&quot;true&quot; or &quot;false&quot;</td>
</tr>
</tbody></table>

<blockquote>
<p>Error Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>stdClass Object
(
    [transaction_type] =&gt; insta_debit_payin
    [status] =&gt; error
    [mode] =&gt; live
    [transaction_id] =&gt; 43671
    [unique_id] =&gt; 44177a21403427eb96664a6d7e5d5d48
    [message] =&gt; Please check input data for errors!
    [timestamp] =&gt; DateTime Object
        (
            [date] =&gt; 2019-03-14 12:05:58.000000
            [timezone_type] =&gt; 2
            [timezone] =&gt; Z
        )
    [descriptor] =&gt; Descriptor one
    [amount] =&gt; 100
    [currency] =&gt; CAD
    [sent_to_acquirer] =&gt; true
)
</code></pre>

<pre class="highlight java tab-java"><code><span class="o">&lt;</span><span class="n">payment_response</span> <span class="n">content</span><span class="o">=[</span>
    <span class="o">&lt;</span><span class="n">transaction_type</span> <span class="n">content</span><span class="o">=[</span><span class="n">insta_debit_payin</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">status</span> <span class="n">content</span><span class="o">=[</span><span class="n">error</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">mode</span> <span class="n">content</span><span class="o">=[</span><span class="n">live</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">transaction_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">43671</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">unique_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">44177</span><span class="n">a21403427eb96664a6d7e5d5d48</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">message</span> <span class="n">content</span><span class="o">=[</span><span class="n">Please</span> <span class="n">check</span> <span class="n">input</span> <span class="n">data</span> <span class="k">for</span> <span class="n">errors</span><span class="o">!]&gt;</span>
    <span class="o">&lt;</span><span class="n">timestamp</span> <span class="n">content</span><span class="o">=[</span><span class="mi">2019</span><span class="o">-</span><span class="mo">03</span><span class="o">-</span><span class="mi">14</span><span class="nl">T12:</span><span class="mo">05</span><span class="o">:</span><span class="mi">58</span><span class="n">Z</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">descriptor</span> <span class="n">content</span><span class="o">=[</span><span class="n">Descriptor</span> <span class="n">one</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">amount</span> <span class="n">content</span><span class="o">=[</span><span class="mi">100</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">currency</span> <span class="n">content</span><span class="o">=[</span><span class="n">CAD</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">sent_to_acquirer</span> <span class="n">content</span><span class="o">=[</span><span class="kc">true</span><span class="o">]&gt;</span>
<span class="o">]&gt;</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="p">{</span>
    <span class="nl">transaction_type</span><span class="p">:</span> <span class="s2">"insta_debit_payin"</span><span class="p">,</span>
    <span class="nx">status</span><span class="p">:</span> <span class="s2">"error"</span><span class="p">,</span>
    <span class="nx">mode</span><span class="p">:</span> <span class="s2">"live"</span><span class="p">,</span>
    <span class="nx">transaction_id</span><span class="p">:</span> <span class="s2">"43671"</span><span class="p">,</span>
    <span class="nx">unique_id</span><span class="p">:</span> <span class="s2">"44177a21403427eb96664a6d7e5d5d48"</span><span class="p">,</span>
    <span class="nx">message</span><span class="p">:</span> <span class="s2">"Please check input data for errors!"</span><span class="p">,</span>
    <span class="nx">timestamp</span><span class="p">:</span> <span class="s2">"2019-03-14T12:05:58Z"</span><span class="p">,</span>
    <span class="nx">descriptor</span><span class="p">:</span> <span class="s2">"Descriptor one"</span><span class="p">,</span>
    <span class="nx">amount</span><span class="p">:</span> <span class="s2">"100"</span><span class="p">,</span>
    <span class="nx">currency</span><span class="p">:</span> <span class="s2">"CAD"</span><span class="p">,</span>
    <span class="nx">sent_to_acquirer</span><span class="p">:</span> <span class="s2">"true"</span><span class="p">,</span>
<span class="p">}</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;insta_debit_payin&lt;/transaction_type&gt;
  &lt;status&gt;error&lt;/status&gt;
  &lt;mode&gt;live&lt;/mode&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;message&gt;Please check input data <span class="k">for </span>errors!&lt;/message&gt;
  &lt;timestamp&gt;2019-03-14T12:05:58Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;CAD&lt;/currency&gt;
  &lt;sent_to_acquirer&gt;true&lt;/sent_to_acquirer&gt;
&lt;/payment_transaction&gt;
</code></pre>

<p><strong>Error Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>The transaction type</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>transaction_id</td>
<td>string(30)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>unique_id</td>
<td>string(32)</td>
<td>Unique id defined by gate (must later be used if capturing, voiding or refunding a transaction)</td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
<tr>
<td>message</td>
<td>string(255)</td>
<td>Human readable error message which can be displayed to users.</td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when the transaction was processed in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Combined date and time</a> e.g. 2007-08- 30T17:46:11Z</td>
</tr>
<tr>
<td>descriptor</td>
<td>string</td>
<td>Static descriptor MID info as configured on the gateway</td>
</tr>
<tr>
<td>amount</td>
<td>integer</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>sent_to_acquirer</td>
<td>string</td>
<td>&quot;true&quot; or &quot;false&quot;</td>
</tr>
</tbody></table>
<h4 id='payout-2'>Payout</h4>
<blockquote>
<p>Request</p>
</blockquote>

<pre class="highlight php tab-php"><code><span class="cp">&lt;?php</span>

<span class="c1">// Load the pre-configured ini file...
</span><span class="nx">\Genesis\Config</span><span class="o">::</span><span class="na">loadSettings</span><span class="p">(</span><span class="s1">'/path/to/config.ini'</span><span class="p">);</span>

<span class="nv">$genesis</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Genesis</span><span class="p">(</span><span class="s1">'Financial\OnlineBankingPayments\InstaDebit\Payout'</span><span class="p">);</span>
<span class="nv">$request</span> <span class="o">=</span> <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">request</span><span class="p">();</span>

<span class="nv">$request</span>
  <span class="o">-&gt;</span><span class="na">setReferenceId</span><span class="p">(</span><span class="s1">'43672'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setAmount</span><span class="p">(</span><span class="s1">'100'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCurrency</span><span class="p">(</span><span class="s1">'CAD'</span><span class="p">);</span>

<span class="k">try</span> <span class="p">{</span>
    <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">execute</span><span class="p">();</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">response</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">getResponseObject</span><span class="p">();</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">\Exception</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$e</span><span class="o">-&gt;</span><span class="na">getMessage</span><span class="p">();</span>
<span class="p">}</span>
</code></pre>

<pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.GenesisClient</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.TransactionResult</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.constants.Endpoints</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.constants.Environments</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.requests.financial.oBeP.InstaDebitPayOutRequest</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.model.Transaction</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Configuration</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Country</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Currency</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.math.BigDecimal</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">GenesisExample</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">()</span>  <span class="o">{</span>

    <span class="c1">// Create configuration</span>
    <span class="n">Configuration</span> <span class="n">configuration</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Configuration</span><span class="o">(</span><span class="n">Environments</span><span class="o">.</span><span class="na">STAGING</span><span class="o">,</span> <span class="n">Endpoints</span><span class="o">.</span><span class="na">EMERCHANTPAY</span><span class="o">);</span>

    <span class="n">configuration</span><span class="o">.</span><span class="na">setUsername</span><span class="o">(</span><span class="s">"SET_YOUR_USERNAME"</span><span class="o">);</span>
    <span class="n">configuration</span><span class="o">.</span><span class="na">setPassword</span><span class="o">(</span><span class="s">"SET_YOUR_PASSWORD"</span><span class="o">);</span>
    <span class="n">configuration</span><span class="o">.</span><span class="na">setToken</span><span class="o">(</span><span class="s">"SET_YOUR_TOKEN"</span><span class="o">);</span>

    <span class="n">InstaDebitPayOutRequest</span> <span class="n">request</span> <span class="o">=</span> <span class="k">new</span> <span class="n">InstaDebitPayOutRequest</span><span class="o">();</span>

    <span class="n">request</span><span class="o">.</span><span class="na">setReferenceId</span><span class="o">(</span><span class="s">"43672"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setAmount</span><span class="o">(</span><span class="k">new</span> <span class="n">BigDecimal</span><span class="o">(</span><span class="mi">100</span><span class="o">));</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCurrency</span><span class="o">(</span><span class="s">"CAD"</span><span class="o">);</span>

    <span class="n">GenesisClient</span> <span class="n">client</span> <span class="o">=</span> <span class="k">new</span> <span class="n">GenesisClient</span><span class="o">(</span><span class="n">configuration</span><span class="o">,</span> <span class="n">request</span><span class="o">);</span>
    <span class="n">client</span><span class="o">.</span><span class="na">execute</span><span class="o">();</span>

    <span class="c1">// Parse Payment result</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">client</span><span class="o">.</span><span class="na">getResponse</span><span class="o">());</span>

  <span class="o">}</span>
<span class="o">}</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="kd">var</span> <span class="nx">genesis</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'genesis.js/lib/genesis.js'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">transaction</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">genesis</span><span class="p">.</span><span class="nx">transaction</span><span class="p">();</span>

<span class="kd">var</span> <span class="nx">failure</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">reason</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">reason</span><span class="p">);</span>
<span class="p">};</span>

<span class="kd">var</span> <span class="nx">success</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>

<span class="nx">transaction</span><span class="p">.</span><span class="nx">insta_debit_payout</span><span class="p">(</span>
  <span class="p">{</span>
    <span class="s2">"reference_id"</span><span class="p">:</span> <span class="s2">"43672"</span><span class="p">,</span>
    <span class="s2">"amount"</span><span class="p">:</span> <span class="s2">"100"</span><span class="p">,</span>
    <span class="s2">"currency"</span><span class="p">:</span> <span class="s2">"CAD"</span>
  <span class="p">}</span>
<span class="p">).</span><span class="nx">send</span><span class="p">()</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">success</span><span class="p">)</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">failure</span><span class="p">);</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>curl https://username:password@gate.emerchantpay.net/process/TERMINAL-TOKEN <span class="se">\</span>
   -H <span class="s2">"Content-Type: text/xml"</span> <span class="se">\</span>
   -d <span class="s1">'
&lt;payment_transaction&gt;
  &lt;reference_id&gt;43672&lt;/reference_id&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;CAD&lt;/currency&gt;
&lt;/payment_transaction&gt;'</span>
</code></pre>

<p><strong>Request Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>required</td>
<td>string(255)</td>
<td>The transaction type: <strong>insta_debit_payout</strong></td>
</tr>
<tr>
<td>transaction_id</td>
<td>required</td>
<td>string(30)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>reference_id</td>
<td>required</td>
<td>string(32)</td>
<td>unique id of approved InstaDebit Payin transaction. See InstaDebit Payin Response, unique id</td>
</tr>
<tr>
<td>amount</td>
<td>required</td>
<td>integer &gt; 0</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details<br>Max amount in minor currency unit: 999999</td>
</tr>
<tr>
<td>currency</td>
<td>required</td>
<td>string(3)</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
</tbody></table>

<p><code>required* = conditionally required</code></p>

<blockquote>
<p>Successful Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>stdClass Object
(
    [transaction_type] =&gt; insta_debit_payout
    [status] =&gt; approved
    [mode] =&gt; live
    [transaction_id] =&gt; 43671
    [unique_id] =&gt; 44177a21403427eb96664a6d7e5d5d48
    [technical_message] =&gt; Transaction successful!
    [message] =&gt; Transaction successful!
    [timestamp] =&gt; DateTime Object
        (
            [date] =&gt; 2019-03-14 12:05:58.000000
            [timezone_type] =&gt; 2
            [timezone] =&gt; Z
        )
    [amount] =&gt; 100
    [currency] =&gt; CAD
    [sent_to_acquirer] =&gt; true
)
</code></pre>

<pre class="highlight java tab-java"><code><span class="o">&lt;</span><span class="n">payment_response</span> <span class="n">content</span><span class="o">=[</span>
    <span class="o">&lt;</span><span class="n">transaction_type</span> <span class="n">content</span><span class="o">=[</span><span class="n">insta_debit_payout</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">status</span> <span class="n">content</span><span class="o">=[</span><span class="n">approved</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">mode</span> <span class="n">content</span><span class="o">=[</span><span class="n">live</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">transaction_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">43671</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">unique_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">44177</span><span class="n">a21403427eb96664a6d7e5d5d48</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">technical_message</span> <span class="n">content</span><span class="o">=[</span><span class="n">Transaction</span> <span class="n">successful</span><span class="o">!]&gt;</span>
    <span class="o">&lt;</span><span class="n">message</span> <span class="n">content</span><span class="o">=[</span><span class="n">Transaction</span> <span class="n">successful</span><span class="o">!]&gt;</span>
    <span class="o">&lt;</span><span class="n">timestamp</span> <span class="n">content</span><span class="o">=[</span><span class="mi">2019</span><span class="o">-</span><span class="mo">03</span><span class="o">-</span><span class="mi">14</span><span class="nl">T12:</span><span class="mo">05</span><span class="o">:</span><span class="mi">58</span><span class="n">Z</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">amount</span> <span class="n">content</span><span class="o">=[</span><span class="mi">100</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">currency</span> <span class="n">content</span><span class="o">=[</span><span class="n">CAD</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">sent_to_acquirer</span> <span class="n">content</span><span class="o">=[</span><span class="kc">true</span><span class="o">]&gt;</span>
<span class="o">]&gt;</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="p">{</span>
    <span class="nl">transaction_type</span><span class="p">:</span> <span class="s2">"insta_debit_payout"</span><span class="p">,</span>
    <span class="nx">status</span><span class="p">:</span> <span class="s2">"approved"</span><span class="p">,</span>
    <span class="nx">mode</span><span class="p">:</span> <span class="s2">"live"</span><span class="p">,</span>
    <span class="nx">transaction_id</span><span class="p">:</span> <span class="s2">"43671"</span><span class="p">,</span>
    <span class="nx">unique_id</span><span class="p">:</span> <span class="s2">"44177a21403427eb96664a6d7e5d5d48"</span><span class="p">,</span>
    <span class="nx">technical_message</span><span class="p">:</span> <span class="s2">"Transaction successful!"</span><span class="p">,</span>
    <span class="nx">message</span><span class="p">:</span> <span class="s2">"Transaction successful!"</span><span class="p">,</span>
    <span class="nx">timestamp</span><span class="p">:</span> <span class="s2">"2019-03-14T12:05:58Z"</span><span class="p">,</span>
    <span class="nx">amount</span><span class="p">:</span> <span class="s2">"100"</span><span class="p">,</span>
    <span class="nx">currency</span><span class="p">:</span> <span class="s2">"CAD"</span><span class="p">,</span>
    <span class="nx">sent_to_acquirer</span><span class="p">:</span> <span class="s2">"true"</span><span class="p">,</span>
<span class="p">}</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;insta_debit_payout&lt;/transaction_type&gt;
  &lt;status&gt;approved&lt;/status&gt;
  &lt;mode&gt;live&lt;/mode&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;technical_message&gt;Transaction successful!&lt;/technical_message&gt;
  &lt;message&gt;Transaction successful!&lt;/message&gt;
  &lt;timestamp&gt;2019-03-14T12:05:58Z&lt;/timestamp&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;CAD&lt;/currency&gt;
  &lt;sent_to_acquirer&gt;true&lt;/sent_to_acquirer&gt;
&lt;/payment_transaction&gt;
</code></pre>

<p><strong>Successful Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>The transaction type</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>transaction_id</td>
<td>string(30)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>unique_id</td>
<td>string(32)</td>
<td>Unique id defined by gate (must later be used if capturing, voiding or refunding a transaction)</td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
<tr>
<td>message</td>
<td>string(255)</td>
<td>Human readable error message which can be displayed to users.</td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when the transaction was processed in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Combined date and time</a> e.g. 2007-08- 30T17:46:11Z</td>
</tr>
<tr>
<td>amount</td>
<td>integer</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>sent_to_acquirer</td>
<td>string</td>
<td>&quot;true&quot; or &quot;false&quot;</td>
</tr>
</tbody></table>

<blockquote>
<p>Error Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>stdClass Object
(
    [transaction_type] =&gt; insta_debit_payout
    [status] =&gt; error
    [mode] =&gt; live
    [transaction_id] =&gt; 43671
    [unique_id] =&gt; 44177a21403427eb96664a6d7e5d5d48
    [code] =&gt; 320
    [technical_message] =&gt; amount is missing!
    [message] =&gt; Please check input data for errors!
    [timestamp] =&gt; DateTime Object
        (
            [date] =&gt; 2019-03-14 12:05:58.000000
            [timezone_type] =&gt; 2
            [timezone] =&gt; Z
        )
    [amount] =&gt; 100
    [currency] =&gt; CAD
    [sent_to_acquirer] =&gt; false
)
</code></pre>

<pre class="highlight java tab-java"><code><span class="o">&lt;</span><span class="n">payment_response</span> <span class="n">content</span><span class="o">=[</span>
    <span class="o">&lt;</span><span class="n">transaction_type</span> <span class="n">content</span><span class="o">=[</span><span class="n">insta_debit_payout</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">status</span> <span class="n">content</span><span class="o">=[</span><span class="n">error</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">mode</span> <span class="n">content</span><span class="o">=[</span><span class="n">live</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">transaction_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">43671</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">unique_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">44177</span><span class="n">a21403427eb96664a6d7e5d5d48</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">code</span> <span class="n">content</span><span class="o">=[</span><span class="mi">320</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">technical_message</span> <span class="n">content</span><span class="o">=[</span><span class="n">amount</span> <span class="n">is</span> <span class="n">missing</span><span class="o">!]&gt;</span>
    <span class="o">&lt;</span><span class="n">message</span> <span class="n">content</span><span class="o">=[</span><span class="n">Please</span> <span class="n">check</span> <span class="n">input</span> <span class="n">data</span> <span class="k">for</span> <span class="n">errors</span><span class="o">!]&gt;</span>
    <span class="o">&lt;</span><span class="n">timestamp</span> <span class="n">content</span><span class="o">=[</span><span class="mi">2019</span><span class="o">-</span><span class="mo">03</span><span class="o">-</span><span class="mi">14</span><span class="nl">T12:</span><span class="mo">05</span><span class="o">:</span><span class="mi">58</span><span class="n">Z</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">amount</span> <span class="n">content</span><span class="o">=[</span><span class="mi">100</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">currency</span> <span class="n">content</span><span class="o">=[</span><span class="n">CAD</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">sent_to_acquirer</span> <span class="n">content</span><span class="o">=[</span><span class="kc">false</span><span class="o">]&gt;</span>
<span class="o">]&gt;</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="p">{</span>
    <span class="nl">transaction_type</span><span class="p">:</span> <span class="s2">"insta_debit_payout"</span><span class="p">,</span>
    <span class="nx">status</span><span class="p">:</span> <span class="s2">"error"</span><span class="p">,</span>
    <span class="nx">mode</span><span class="p">:</span> <span class="s2">"live"</span><span class="p">,</span>
    <span class="nx">transaction_id</span><span class="p">:</span> <span class="s2">"43671"</span><span class="p">,</span>
    <span class="nx">unique_id</span><span class="p">:</span> <span class="s2">"44177a21403427eb96664a6d7e5d5d48"</span><span class="p">,</span>
    <span class="nx">code</span><span class="p">:</span> <span class="s2">"320"</span><span class="p">,</span>
    <span class="nx">technical_message</span><span class="p">:</span> <span class="s2">"amount is missing!"</span><span class="p">,</span>
    <span class="nx">message</span><span class="p">:</span> <span class="s2">"Please check input data for errors!"</span><span class="p">,</span>
    <span class="nx">timestamp</span><span class="p">:</span> <span class="s2">"2019-03-14T12:05:58Z"</span><span class="p">,</span>
    <span class="nx">amount</span><span class="p">:</span> <span class="s2">"100"</span><span class="p">,</span>
    <span class="nx">currency</span><span class="p">:</span> <span class="s2">"CAD"</span><span class="p">,</span>
    <span class="nx">sent_to_acquirer</span><span class="p">:</span> <span class="s2">"false"</span><span class="p">,</span>
<span class="p">}</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;insta_debit_payout&lt;/transaction_type&gt;
  &lt;status&gt;error&lt;/status&gt;
  &lt;mode&gt;live&lt;/mode&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;code&gt;320&lt;/code&gt;
  &lt;technical_message&gt;amount is missing!&lt;/technical_message&gt;
  &lt;message&gt;Please check input data <span class="k">for </span>errors!&lt;/message&gt;
  &lt;timestamp&gt;2019-03-14T12:05:58Z&lt;/timestamp&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;CAD&lt;/currency&gt;
  &lt;sent_to_acquirer&gt;false&lt;/sent_to_acquirer&gt;
&lt;/payment_transaction&gt;
</code></pre>

<p><strong>Error Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>The transaction type</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>transaction_id</td>
<td>string(30)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>unique_id</td>
<td>string(32)</td>
<td>Unique id defined by gate (must later be used if capturing, voiding or refunding a transaction)</td>
</tr>
<tr>
<td>code</td>
<td>integer</td>
<td>Error code according to <a href="#error-code-table">Error code table</a></td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
<tr>
<td>message</td>
<td>string(255)</td>
<td>Human readable error message which can be displayed to users.</td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when the transaction was processed in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Combined date and time</a> e.g. 2007-08- 30T17:46:11Z</td>
</tr>
<tr>
<td>amount</td>
<td>integer</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>sent_to_acquirer</td>
<td>string</td>
<td>&quot;true&quot; or &quot;false&quot;</td>
</tr>
</tbody></table>
<h3 id='instanttransfer'>InstantTransfer</h3>
<aside class="notice" >
InstantTransfer is a payment method in Germany
</aside>

<blockquote>
<p>Request</p>
</blockquote>

<pre class="highlight php tab-php"><code>This request is not implemented yet
</code></pre>

<pre class="highlight java tab-java"><code><span class="n">This</span> <span class="n">request</span> <span class="n">is</span> <span class="n">not</span> <span class="n">implemented</span> <span class="n">yet</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>curl https://username:password@gate.emerchantpay.net/process/TERMINAL-TOKEN <span class="se">\</span>
   -H <span class="s2">"Content-Type: text/xml"</span> <span class="se">\</span>
   -d <span class="s1">'
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;instant_transfer&lt;/transaction_type&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;usage&gt;40208 concert tickets&lt;/usage&gt;
  &lt;remote_ip&gt;245.253.2.12&lt;/remote_ip&gt;
  &lt;return_success_url&gt;http://www.example.com/success&lt;/return_success_url&gt;
  &lt;return_failure_url&gt;http://www.example.com/failure&lt;/return_failure_url&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;EUR&lt;/currency&gt;
  &lt;iban&gt;DE07444488880123456789&lt;/iban&gt;
  &lt;bic&gt;GENODETT488&lt;/bic&gt;
  &lt;customer_email&gt;travis@example.com&lt;/customer_email&gt;
  &lt;billing_address&gt;
    &lt;first_name&gt;Barney&lt;/first_name&gt;
    &lt;last_name&gt;Rubble&lt;/last_name&gt;
    &lt;address1&gt;14, Nerazdelni str&lt;/address1&gt;
    &lt;zip_code&gt;1407&lt;/zip_code&gt;
    &lt;city&gt;Berlin&lt;/city&gt;
    &lt;country&gt;DE&lt;/country&gt;
  &lt;/billing_address&gt;
  &lt;risk_params&gt;
    &lt;user_id&gt;123456&lt;/user_id&gt;
  &lt;/risk_params&gt;
&lt;/payment_transaction&gt;'</span>
</code></pre>

<p><strong>Request Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>required</td>
<td>string(255)</td>
<td>The transaction type: <strong>instant_transfer</strong></td>
</tr>
<tr>
<td>transaction_id</td>
<td>required</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>usage</td>
<td>optional</td>
<td>string(255)</td>
<td>Description of the transaction for later use</td>
</tr>
<tr>
<td>remote_ip</td>
<td>required*</td>
<td>IPv4 address</td>
<td>IPv4 address of customer</td>
</tr>
<tr>
<td>return_success_url</td>
<td>required</td>
<td>url</td>
<td>URL where customer is sent to after successful payment</td>
</tr>
<tr>
<td>return_failure_url</td>
<td>required</td>
<td>url</td>
<td>URL where customer is sent to after unsuccessful payment</td>
</tr>
<tr>
<td>amount</td>
<td>required</td>
<td>integer &gt; 0</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>required</td>
<td>string(3)</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>iban</td>
<td>optional</td>
<td>string(34)</td>
<td>Customer’s IBAN number</td>
</tr>
<tr>
<td>bic</td>
<td>optional</td>
<td>string(11)</td>
<td>SWIFT/BIC code of the customer’s bank</td>
</tr>
<tr>
<td>customer_email</td>
<td>optional</td>
<td>e-mail address</td>
<td>Must contain valid e-mail of customer</td>
</tr>
<tr>
<td><strong>billing_address</strong></td>
<td>required</td>
<td></td>
<td>See <a href="#required-vs-optional-api-params">Required vs Optional API params</a> for details</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;first_name</td>
<td>required*</td>
<td>string(255)</td>
<td>Customer first name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;last_name</td>
<td>required*</td>
<td>string(255)</td>
<td>Customer last name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address1</td>
<td>required*</td>
<td>string(255)</td>
<td>Primary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address2</td>
<td>required*</td>
<td>string(255)</td>
<td>Secondary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;zip_code</td>
<td>required*</td>
<td>string</td>
<td>ZIP code</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;city</td>
<td>required*</td>
<td>string(255)</td>
<td>City</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;state</td>
<td>required*</td>
<td>string(2)</td>
<td>State code in <a href="https://en.wikipedia.org/wiki/ISO_3166-2">ISO 3166-2</a>, required for USA and Canada</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;country</td>
<td>required</td>
<td>string(2)</td>
<td>Country code in <a href="https://www.iso.org/iso-3166-country-codes.html">ISO 3166</a></td>
</tr>
<tr>
<td><strong>shipping_address</strong></td>
<td>optional</td>
<td></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;first_name</td>
<td>optional</td>
<td>string(255)</td>
<td>Customer first name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;last_name</td>
<td>optional</td>
<td>string(255)</td>
<td>Customer last name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address1</td>
<td>optional</td>
<td>string(255)</td>
<td>Primary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address2</td>
<td>optional</td>
<td>string(255)</td>
<td>Secondary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;zip_code</td>
<td>optional</td>
<td>string</td>
<td>ZIP code</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;city</td>
<td>optional</td>
<td>string(255)</td>
<td>City</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;state</td>
<td>optional</td>
<td>string(2)</td>
<td>State code in <a href="https://en.wikipedia.org/wiki/ISO_3166-2">ISO 3166-2</a>, required for USA and Canada</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;country</td>
<td>optional</td>
<td>string(2)</td>
<td>Country code in <a href="https://www.iso.org/iso-3166-country-codes.html">ISO 3166</a></td>
</tr>
</tbody></table>

<p><code>required* = conditionally required</code></p>

<p><strong>Supported countries:</strong></p>

<table><thead>
<tr>
<th>Country code</th>
</tr>
</thead><tbody>
<tr>
<td>DE</td>
</tr>
</tbody></table>

<blockquote>
<p>Successful Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>This request is not implemented yet
</code></pre>

<pre class="highlight java tab-java"><code><span class="n">This</span> <span class="n">request</span> <span class="n">is</span> <span class="n">not</span> <span class="n">implemented</span> <span class="n">yet</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;instant_transfer&lt;/transaction_type&gt;
  &lt;status&gt;pending_async&lt;/status&gt;
  &lt;mode&gt;live&lt;/mode&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;technical_message&gt;Transaction successful!&lt;/technical_message&gt;
  &lt;message&gt;Transaction successful!&lt;/message&gt;
  &lt;redirect_url&gt;https://gate.emerchantpay.net/redirect/to_acquirer/649e1ff35c61&lt;/redirect_url&gt;
  &lt;timestamp&gt;2019-03-14T12:05:58Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;EUR&lt;/currency&gt;
  &lt;sent_to_acquirer&gt;true&lt;/sent_to_acquirer&gt;
&lt;/payment_transaction&gt;
</code></pre>

<p><strong>Successful Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>The transaction type</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>transaction_id</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>unique_id</td>
<td>string(32)</td>
<td>Unique id defined by gate (must later be used if capturing, voiding or refunding a transaction)</td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
<tr>
<td>message</td>
<td>string(255)</td>
<td>Human readable error message which can be displayed to users.</td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>redirect_url</td>
<td>url</td>
<td>URL where user has to be redirected to complete payment process. It is available for asynchronous mode</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when the transaction was processed in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Combined date and time</a> e.g. 2007-08- 30T17:46:11Z</td>
</tr>
<tr>
<td>descriptor</td>
<td>string</td>
<td>Static descriptor MID info as configured on the gateway</td>
</tr>
<tr>
<td>amount</td>
<td>integer</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>sent_to_acquirer</td>
<td>string</td>
<td>&quot;true&quot; or &quot;false&quot;</td>
</tr>
</tbody></table>

<blockquote>
<p>Error Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>This request is not implemented yet
</code></pre>

<pre class="highlight java tab-java"><code><span class="n">This</span> <span class="n">request</span> <span class="n">is</span> <span class="n">not</span> <span class="n">implemented</span> <span class="n">yet</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;instant_transfer&lt;/transaction_type&gt;
  &lt;status&gt;error&lt;/status&gt;
  &lt;mode&gt;live&lt;/mode&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;code&gt;110&lt;/code&gt;
  &lt;message&gt;Something went wrong, please contact support!&lt;/message&gt;
  &lt;timestamp&gt;2019-03-14T12:05:58Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;EUR&lt;/currency&gt;
  &lt;sent_to_acquirer&gt;true&lt;/sent_to_acquirer&gt;
&lt;/payment_transaction&gt;
</code></pre>

<p><strong>Error Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>The transaction type</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>transaction_id</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>unique_id</td>
<td>string(32)</td>
<td>Unique id defined by gate (must later be used if capturing, voiding or refunding a transaction)</td>
</tr>
<tr>
<td>code</td>
<td>integer</td>
<td>Error code according to <a href="#error-code-table">Error code table</a></td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
<tr>
<td>message</td>
<td>string(255)</td>
<td>Human readable error message which can be displayed to users.</td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when the transaction was processed in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Combined date and time</a> e.g. 2007-08- 30T17:46:11Z</td>
</tr>
<tr>
<td>descriptor</td>
<td>string</td>
<td>Static descriptor MID info as configured on the gateway</td>
</tr>
<tr>
<td>amount</td>
<td>integer</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>sent_to_acquirer</td>
<td>string</td>
<td>&quot;true&quot; or &quot;false&quot;</td>
</tr>
</tbody></table>
<h3 id='itau'>Itau</h3>
<aside class="notice">
Itau is a real-time online bank transfer method and a virtual card.
</aside>

<blockquote>
<p>Request</p>
</blockquote>

<pre class="highlight php tab-php"><code>This request is not implemented yet
</code></pre>

<pre class="highlight java tab-java"><code><span class="n">This</span> <span class="n">request</span> <span class="n">is</span> <span class="n">not</span> <span class="n">implemented</span> <span class="n">yet</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>curl https://username:password@gate.emerchantpay.net/process/TERMINAL-TOKEN <span class="se">\</span>
   -H <span class="s2">"Content-Type: text/xml"</span> <span class="se">\</span>
   -d <span class="s1">'
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;itau&lt;/transaction_type&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;usage&gt;40208 concert tickets&lt;/usage&gt;
  &lt;remote_ip&gt;245.253.2.12&lt;/remote_ip&gt;
  &lt;return_success_url&gt;http://www.example.com/success&lt;/return_success_url&gt;
  &lt;return_failure_url&gt;http://www.example.com/failure&lt;/return_failure_url&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
  &lt;consumer_reference&gt;barney_rubble&lt;/consumer_reference&gt;
  &lt;national_id&gt;8812128812&lt;/national_id&gt;
  &lt;birth_date&gt;30-12-1992&lt;/birth_date&gt;
  &lt;customer_email&gt;travis@example.com&lt;/customer_email&gt;
  &lt;billing_address&gt;
    &lt;first_name&gt;Barney&lt;/first_name&gt;
    &lt;last_name&gt;Rubble&lt;/last_name&gt;
    &lt;address1&gt;14, Nerazdelni str&lt;/address1&gt;
    &lt;zip_code&gt;1407&lt;/zip_code&gt;
    &lt;city&gt;Rio de Janeiro&lt;/city&gt;
    &lt;country&gt;BR&lt;/country&gt;
  &lt;/billing_address&gt;
  &lt;risk_params&gt;
    &lt;user_id&gt;123456&lt;/user_id&gt;
  &lt;/risk_params&gt;
&lt;/payment_transaction&gt;'</span>
</code></pre>

<p><strong>Request Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>required</td>
<td>string(255)</td>
<td>The transaction type: <strong>itau</strong></td>
</tr>
<tr>
<td>transaction_id</td>
<td>required</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>usage</td>
<td>optional</td>
<td>string(255)</td>
<td>Description of the transaction for later use</td>
</tr>
<tr>
<td>remote_ip</td>
<td>required*</td>
<td>IPv4 address</td>
<td>IPv4 address of customer</td>
</tr>
<tr>
<td>return_success_url</td>
<td>required</td>
<td>url</td>
<td>URL where customer is sent to after successful payment</td>
</tr>
<tr>
<td>return_failure_url</td>
<td>required</td>
<td>url</td>
<td>URL where customer is sent to after unsuccessful payment</td>
</tr>
<tr>
<td>amount</td>
<td>required</td>
<td>integer &gt; 0</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>required</td>
<td>string(3)</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>consumer_reference</td>
<td>required</td>
<td>string(20)</td>
<td>Consumer reference is a unique consumer identifier</td>
</tr>
<tr>
<td>national_id</td>
<td>required</td>
<td>string(20)</td>
<td>National Identifier number of the customer</td>
</tr>
<tr>
<td>birth_date</td>
<td>optional</td>
<td>string(20)</td>
<td>Birth date of the customer</td>
</tr>
<tr>
<td>customer_email</td>
<td>required</td>
<td>e-mail address</td>
<td>Must contain valid e-mail of customer</td>
</tr>
<tr>
<td><strong>billing_address</strong></td>
<td>required</td>
<td></td>
<td>See <a href="#required-vs-optional-api-params">Required vs Optional API params</a> for details</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;first_name</td>
<td>required*</td>
<td>string(255)</td>
<td>Customer first name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;last_name</td>
<td>required*</td>
<td>string(255)</td>
<td>Customer last name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address1</td>
<td>required*</td>
<td>string(255)</td>
<td>Primary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address2</td>
<td>required*</td>
<td>string(255)</td>
<td>Secondary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;zip_code</td>
<td>required*</td>
<td>string</td>
<td>ZIP code</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;city</td>
<td>required*</td>
<td>string(255)</td>
<td>City</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;state</td>
<td>required*</td>
<td>string(2)</td>
<td>State code in <a href="https://en.wikipedia.org/wiki/ISO_3166-2">ISO 3166-2</a>, required for USA and Canada</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;country</td>
<td>required</td>
<td>string(2)</td>
<td>Country code in <a href="https://www.iso.org/iso-3166-country-codes.html">ISO 3166</a></td>
</tr>
<tr>
<td><strong>shipping_address</strong></td>
<td>optional</td>
<td></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;first_name</td>
<td>optional</td>
<td>string(255)</td>
<td>Customer first name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;last_name</td>
<td>optional</td>
<td>string(255)</td>
<td>Customer last name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address1</td>
<td>optional</td>
<td>string(255)</td>
<td>Primary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address2</td>
<td>optional</td>
<td>string(255)</td>
<td>Secondary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;zip_code</td>
<td>optional</td>
<td>string</td>
<td>ZIP code</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;city</td>
<td>optional</td>
<td>string(255)</td>
<td>City</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;state</td>
<td>optional</td>
<td>string(2)</td>
<td>State code in <a href="https://en.wikipedia.org/wiki/ISO_3166-2">ISO 3166-2</a>, required for USA and Canada</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;country</td>
<td>optional</td>
<td>string(2)</td>
<td>Country code in <a href="https://www.iso.org/iso-3166-country-codes.html">ISO 3166</a></td>
</tr>
</tbody></table>

<p><code>required* = conditionally required</code></p>

<p><strong>Supported countries:</strong></p>

<table><thead>
<tr>
<th>Country</th>
</tr>
</thead><tbody>
<tr>
<td>BR</td>
</tr>
</tbody></table>

<blockquote>
<p>Successful Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>This request is not implemented yet
</code></pre>

<pre class="highlight java tab-java"><code><span class="n">This</span> <span class="n">request</span> <span class="n">is</span> <span class="n">not</span> <span class="n">implemented</span> <span class="n">yet</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;itau&lt;/transaction_type&gt;
  &lt;status&gt;pending_async&lt;/status&gt;
  &lt;mode&gt;live&lt;/mode&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;technical_message&gt;Transaction successful!&lt;/technical_message&gt;
  &lt;message&gt;Transaction successful!&lt;/message&gt;
  &lt;redirect_url&gt;https://gate.emerchantpay.net/redirect/to_acquirer/649e1ff35c61&lt;/redirect_url&gt;
  &lt;timestamp&gt;2019-03-14T12:05:58Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
  &lt;sent_to_acquirer&gt;true&lt;/sent_to_acquirer&gt;
&lt;/payment_transaction&gt;
</code></pre>

<p><strong>Successful Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>The transaction type</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>transaction_id</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>unique_id</td>
<td>string(32)</td>
<td>Unique id defined by gate (must later be used if capturing, voiding or refunding a transaction)</td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
<tr>
<td>message</td>
<td>string(255)</td>
<td>Human readable error message which can be displayed to users.</td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>redirect_url</td>
<td>url</td>
<td>URL where user has to be redirected to complete payment process. It is available for asynchronous mode</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when the transaction was processed in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Combined date and time</a> e.g. 2007-08- 30T17:46:11Z</td>
</tr>
<tr>
<td>descriptor</td>
<td>string</td>
<td>Static descriptor MID info as configured on the gateway</td>
</tr>
<tr>
<td>amount</td>
<td>integer</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>sent_to_acquirer</td>
<td>string</td>
<td>&quot;true&quot; or &quot;false&quot;</td>
</tr>
</tbody></table>

<blockquote>
<p>Error Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>This request is not implemented yet
</code></pre>

<pre class="highlight java tab-java"><code><span class="n">This</span> <span class="n">request</span> <span class="n">is</span> <span class="n">not</span> <span class="n">implemented</span> <span class="n">yet</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;itau&lt;/transaction_type&gt;
  &lt;status&gt;error&lt;/status&gt;
  &lt;mode&gt;live&lt;/mode&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;code&gt;110&lt;/code&gt;
  &lt;message&gt;Something went wrong, please contact support!&lt;/message&gt;
  &lt;timestamp&gt;2019-03-14T12:05:58Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
  &lt;sent_to_acquirer&gt;true&lt;/sent_to_acquirer&gt;
&lt;/payment_transaction&gt;
</code></pre>

<p><strong>Error Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>The transaction type</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>transaction_id</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>unique_id</td>
<td>string(32)</td>
<td>Unique id defined by gate (must later be used if capturing, voiding or refunding a transaction)</td>
</tr>
<tr>
<td>code</td>
<td>integer</td>
<td>Error code according to <a href="#error-code-table">Error code table</a></td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
<tr>
<td>message</td>
<td>string(255)</td>
<td>Human readable error message which can be displayed to users.</td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when the transaction was processed in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Combined date and time</a> e.g. 2007-08- 30T17:46:11Z</td>
</tr>
<tr>
<td>descriptor</td>
<td>string</td>
<td>Static descriptor MID info as configured on the gateway</td>
</tr>
<tr>
<td>amount</td>
<td>integer</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>sent_to_acquirer</td>
<td>string</td>
<td>&quot;true&quot; or &quot;false&quot;</td>
</tr>
</tbody></table>
<h3 id='multibanco'>Multibanco</h3>
<aside class="notice" >
Multibanco allows Portuguese shoppers to do payments through the Internet by using virtual credit cards
</aside>

<blockquote>
<p>Request</p>
</blockquote>

<pre class="highlight php tab-php"><code>This request is not implemented yet
</code></pre>

<pre class="highlight java tab-java"><code><span class="n">This</span> <span class="n">request</span> <span class="n">is</span> <span class="n">not</span> <span class="n">implemented</span> <span class="n">yet</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>curl https://username:password@gate.emerchantpay.net/process/TERMINAL-TOKEN <span class="se">\</span>
   -H <span class="s2">"Content-Type: text/xml"</span> <span class="se">\</span>
   -d <span class="s1">'
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;multibanco&lt;/transaction_type&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;usage&gt;40208 concert tickets&lt;/usage&gt;
  &lt;remote_ip&gt;245.253.2.12&lt;/remote_ip&gt;
  &lt;return_success_url&gt;http://www.example.com/success&lt;/return_success_url&gt;
  &lt;return_failure_url&gt;http://www.example.com/failure&lt;/return_failure_url&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;EUR&lt;/currency&gt;
  &lt;customer_email&gt;travis@example.com&lt;/customer_email&gt;
  &lt;billing_address&gt;
    &lt;first_name&gt;Barney&lt;/first_name&gt;
    &lt;last_name&gt;Rubble&lt;/last_name&gt;
    &lt;address1&gt;14, Nerazdelni str&lt;/address1&gt;
    &lt;zip_code&gt;1407&lt;/zip_code&gt;
    &lt;city&gt;Porto&lt;/city&gt;
    &lt;country&gt;PT&lt;/country&gt;
  &lt;/billing_address&gt;
  &lt;risk_params&gt;
    &lt;user_id&gt;123456&lt;/user_id&gt;
  &lt;/risk_params&gt;
&lt;/payment_transaction&gt;'</span>
</code></pre>

<p><strong>Request Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>required</td>
<td>string(255)</td>
<td>The transaction type: <strong>multibanco</strong></td>
</tr>
<tr>
<td>transaction_id</td>
<td>required</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>usage</td>
<td>optional</td>
<td>string(255)</td>
<td>Description of the transaction for later use</td>
</tr>
<tr>
<td>remote_ip</td>
<td>required*</td>
<td>IPv4 address</td>
<td>IPv4 address of customer</td>
</tr>
<tr>
<td>return_success_url</td>
<td>required</td>
<td>url</td>
<td>URL where customer is sent to after successful payment</td>
</tr>
<tr>
<td>return_failure_url</td>
<td>required</td>
<td>url</td>
<td>URL where customer is sent to after unsuccessful payment</td>
</tr>
<tr>
<td>amount</td>
<td>required</td>
<td>integer &gt; 0</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>required</td>
<td>string(3)</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>customer_email</td>
<td>optional</td>
<td>e-mail address</td>
<td>Must contain valid e-mail of customer</td>
</tr>
<tr>
<td><strong>billing_address</strong></td>
<td>required</td>
<td></td>
<td>See <a href="#required-vs-optional-api-params">Required vs Optional API params</a> for details</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;first_name</td>
<td>required*</td>
<td>string(255)</td>
<td>Customer first name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;last_name</td>
<td>required*</td>
<td>string(255)</td>
<td>Customer last name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address1</td>
<td>required*</td>
<td>string(255)</td>
<td>Primary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address2</td>
<td>required*</td>
<td>string(255)</td>
<td>Secondary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;zip_code</td>
<td>required*</td>
<td>string</td>
<td>ZIP code</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;city</td>
<td>required*</td>
<td>string(255)</td>
<td>City</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;state</td>
<td>required*</td>
<td>string(2)</td>
<td>State code in <a href="https://en.wikipedia.org/wiki/ISO_3166-2">ISO 3166-2</a>, required for USA and Canada</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;country</td>
<td>required</td>
<td>string(2)</td>
<td>Country code in <a href="https://www.iso.org/iso-3166-country-codes.html">ISO 3166</a></td>
</tr>
<tr>
<td><strong>shipping_address</strong></td>
<td>optional</td>
<td></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;first_name</td>
<td>optional</td>
<td>string(255)</td>
<td>Customer first name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;last_name</td>
<td>optional</td>
<td>string(255)</td>
<td>Customer last name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address1</td>
<td>optional</td>
<td>string(255)</td>
<td>Primary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address2</td>
<td>optional</td>
<td>string(255)</td>
<td>Secondary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;zip_code</td>
<td>optional</td>
<td>string</td>
<td>ZIP code</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;city</td>
<td>optional</td>
<td>string(255)</td>
<td>City</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;state</td>
<td>optional</td>
<td>string(2)</td>
<td>State code in <a href="https://en.wikipedia.org/wiki/ISO_3166-2">ISO 3166-2</a>, required for USA and Canada</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;country</td>
<td>optional</td>
<td>string(2)</td>
<td>Country code in <a href="https://www.iso.org/iso-3166-country-codes.html">ISO 3166</a></td>
</tr>
</tbody></table>

<p><code>required* = conditionally required</code></p>

<p><strong>Supported countries:</strong></p>

<table><thead>
<tr>
<th>Country code</th>
</tr>
</thead><tbody>
<tr>
<td>PT</td>
</tr>
</tbody></table>

<blockquote>
<p>Successful Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>This request is not implemented yet
</code></pre>

<pre class="highlight java tab-java"><code><span class="n">This</span> <span class="n">request</span> <span class="n">is</span> <span class="n">not</span> <span class="n">implemented</span> <span class="n">yet</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;multibanco&lt;/transaction_type&gt;
  &lt;status&gt;pending_async&lt;/status&gt;
  &lt;mode&gt;live&lt;/mode&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;technical_message&gt;Transaction successful!&lt;/technical_message&gt;
  &lt;message&gt;Transaction successful!&lt;/message&gt;
  &lt;redirect_url&gt;https://gate.emerchantpay.net/redirect/to_acquirer/649e1ff35c61&lt;/redirect_url&gt;
  &lt;timestamp&gt;2019-03-14T12:05:58Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;EUR&lt;/currency&gt;
  &lt;sent_to_acquirer&gt;true&lt;/sent_to_acquirer&gt;
&lt;/payment_transaction&gt;
</code></pre>

<p><strong>Successful Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>The transaction type</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>transaction_id</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>unique_id</td>
<td>string(32)</td>
<td>Unique id defined by gate (must later be used if capturing, voiding or refunding a transaction)</td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
<tr>
<td>message</td>
<td>string(255)</td>
<td>Human readable error message which can be displayed to users.</td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>redirect_url</td>
<td>url</td>
<td>URL where user has to be redirected to complete payment process. It is available for asynchronous mode</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when the transaction was processed in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Combined date and time</a> e.g. 2007-08- 30T17:46:11Z</td>
</tr>
<tr>
<td>descriptor</td>
<td>string</td>
<td>Static descriptor MID info as configured on the gateway</td>
</tr>
<tr>
<td>amount</td>
<td>integer</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>sent_to_acquirer</td>
<td>string</td>
<td>&quot;true&quot; or &quot;false&quot;</td>
</tr>
</tbody></table>

<blockquote>
<p>Error Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>This request is not implemented yet
</code></pre>

<pre class="highlight java tab-java"><code><span class="n">This</span> <span class="n">request</span> <span class="n">is</span> <span class="n">not</span> <span class="n">implemented</span> <span class="n">yet</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;multibanco&lt;/transaction_type&gt;
  &lt;status&gt;error&lt;/status&gt;
  &lt;mode&gt;live&lt;/mode&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;code&gt;110&lt;/code&gt;
  &lt;message&gt;Something went wrong, please contact support!&lt;/message&gt;
  &lt;timestamp&gt;2019-03-14T12:05:58Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;EUR&lt;/currency&gt;
  &lt;sent_to_acquirer&gt;true&lt;/sent_to_acquirer&gt;
&lt;/payment_transaction&gt;
</code></pre>

<p><strong>Error Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>The transaction type</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>transaction_id</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>unique_id</td>
<td>string(32)</td>
<td>Unique id defined by gate (must later be used if capturing, voiding or refunding a transaction)</td>
</tr>
<tr>
<td>code</td>
<td>integer</td>
<td>Error code according to <a href="#error-code-table">Error code table</a></td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
<tr>
<td>message</td>
<td>string(255)</td>
<td>Human readable error message which can be displayed to users.</td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when the transaction was processed in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Combined date and time</a> e.g. 2007-08- 30T17:46:11Z</td>
</tr>
<tr>
<td>descriptor</td>
<td>string</td>
<td>Static descriptor MID info as configured on the gateway</td>
</tr>
<tr>
<td>amount</td>
<td>integer</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>sent_to_acquirer</td>
<td>string</td>
<td>&quot;true&quot; or &quot;false&quot;</td>
</tr>
</tbody></table>
<h3 id='my-bank'>My Bank</h3>
<p>My Bank is an overlay banking system for Belgium, France, Italy and Luxembourg.</p>

<blockquote>
<p>Request</p>
</blockquote>

<pre class="highlight php tab-php"><code><span class="cp">&lt;?php</span>

<span class="c1">// Load the pre-configured ini file...
</span><span class="nx">\Genesis\Config</span><span class="o">::</span><span class="na">loadSettings</span><span class="p">(</span><span class="s1">'/path/to/config.ini'</span><span class="p">);</span>

<span class="nv">$genesis</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Genesis</span><span class="p">(</span><span class="s1">'Financial\Alternatives\PPRO'</span><span class="p">);</span>
<span class="nv">$request</span> <span class="o">=</span> <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">request</span><span class="p">();</span>

<span class="nv">$request</span>
  <span class="o">-&gt;</span><span class="na">setTransactionId</span><span class="p">(</span><span class="s1">'43671'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setPaymentType</span><span class="p">(</span><span class="s1">'mybank'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setUsage</span><span class="p">(</span><span class="s1">'40208 concert tickets'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setRemoteIp</span><span class="p">(</span><span class="s1">'245.253.2.12'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setReturnSuccessUrl</span><span class="p">(</span><span class="s1">'http://www.example.com/success'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setReturnFailureUrl</span><span class="p">(</span><span class="s1">'http://www.example.com/failure'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setAmount</span><span class="p">(</span><span class="s1">'100'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCurrency</span><span class="p">(</span><span class="s1">'EUR'</span><span class="p">)</span>


  <span class="c1">// Billing Address
</span>  <span class="o">-&gt;</span><span class="na">setBillingFirstName</span><span class="p">(</span><span class="s1">'Barney'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingLastName</span><span class="p">(</span><span class="s1">'Rubble'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingAddress1</span><span class="p">(</span><span class="s1">'14, Nerazdelni str'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingZipCode</span><span class="p">(</span><span class="s1">'1407'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingCity</span><span class="p">(</span><span class="s1">'Rome'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingCountry</span><span class="p">(</span><span class="s1">'IT'</span><span class="p">);</span>

<span class="k">try</span> <span class="p">{</span>
    <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">execute</span><span class="p">();</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">response</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">getResponseObject</span><span class="p">();</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">\Exception</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$e</span><span class="o">-&gt;</span><span class="na">getMessage</span><span class="p">();</span>
<span class="p">}</span>
</code></pre>

<pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.GenesisClient</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.TransactionResult</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.constants.Endpoints</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.constants.Environments</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.requests.financial.apm.PProRequest</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.model.Transaction</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Configuration</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Country</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Currency</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.math.BigDecimal</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.MalformedURLException</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.URL</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">GenesisExample</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">MalformedURLException</span> <span class="o">{</span>

    <span class="c1">// Create configuration</span>
    <span class="n">Configuration</span> <span class="n">configuration</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Configuration</span><span class="o">(</span><span class="n">Environments</span><span class="o">.</span><span class="na">STAGING</span><span class="o">,</span> <span class="n">Endpoints</span><span class="o">.</span><span class="na">EMERCHANTPAY</span><span class="o">);</span>

    <span class="n">configuration</span><span class="o">.</span><span class="na">setUsername</span><span class="o">(</span><span class="s">"SET_YOUR_USERNAME"</span><span class="o">);</span>
    <span class="n">configuration</span><span class="o">.</span><span class="na">setPassword</span><span class="o">(</span><span class="s">"SET_YOUR_PASSWORD"</span><span class="o">);</span>
    <span class="n">configuration</span><span class="o">.</span><span class="na">setToken</span><span class="o">(</span><span class="s">"SET_YOUR_TOKEN"</span><span class="o">);</span>

    <span class="n">PProRequest</span> <span class="n">request</span> <span class="o">=</span> <span class="k">new</span> <span class="n">PProRequest</span><span class="o">();</span>

    <span class="n">request</span><span class="o">.</span><span class="na">setTransactionId</span><span class="o">(</span><span class="s">"43671"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setPaymentType</span><span class="o">(</span><span class="s">"mybank"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setUsage</span><span class="o">(</span><span class="s">"40208 concert tickets"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setRemoteIp</span><span class="o">(</span><span class="s">"245.253.2.12"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setReturnSuccessUrl</span><span class="o">(</span><span class="k">new</span> <span class="n">URL</span><span class="o">(</span><span class="s">"http://www.example.com/success"</span><span class="o">));</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setReturnFailureUrl</span><span class="o">(</span><span class="k">new</span> <span class="n">URL</span><span class="o">(</span><span class="s">"http://www.example.com/failure"</span><span class="o">));</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setAmount</span><span class="o">(</span><span class="k">new</span> <span class="n">BigDecimal</span><span class="o">(</span><span class="mi">100</span><span class="o">));</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCurrency</span><span class="o">(</span><span class="s">"EUR"</span><span class="o">);</span>


    <span class="c1">// Billing Address</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingFirstname</span><span class="o">(</span><span class="s">"Barney"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingLastname</span><span class="o">(</span><span class="s">"Rubble"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingPrimaryAddress</span><span class="o">(</span><span class="s">"14, Nerazdelni str"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingZipCode</span><span class="o">(</span><span class="s">"1407"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingCity</span><span class="o">(</span><span class="s">"Rome"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingCountry</span><span class="o">(</span><span class="s">"IT"</span><span class="o">);</span>

    <span class="n">GenesisClient</span> <span class="n">client</span> <span class="o">=</span> <span class="k">new</span> <span class="n">GenesisClient</span><span class="o">(</span><span class="n">configuration</span><span class="o">,</span> <span class="n">request</span><span class="o">);</span>
    <span class="n">client</span><span class="o">.</span><span class="na">execute</span><span class="o">();</span>

    <span class="c1">// Parse Payment result</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">client</span><span class="o">.</span><span class="na">getResponse</span><span class="o">());</span>

  <span class="o">}</span>
<span class="o">}</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="kd">var</span> <span class="nx">genesis</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'genesis.js/lib/genesis.js'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">transaction</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">genesis</span><span class="p">.</span><span class="nx">transaction</span><span class="p">();</span>

<span class="kd">var</span> <span class="nx">failure</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">reason</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">reason</span><span class="p">);</span>
<span class="p">};</span>

<span class="kd">var</span> <span class="nx">success</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>

<span class="nx">transaction</span><span class="p">.</span><span class="nx">ppro</span><span class="p">(</span>
  <span class="p">{</span>
    <span class="s2">"transaction_id"</span><span class="p">:</span> <span class="s2">"43671"</span><span class="p">,</span>
    <span class="s2">"payment_type"</span><span class="p">:</span> <span class="s2">"mybank"</span><span class="p">,</span>
    <span class="s2">"usage"</span><span class="p">:</span> <span class="s2">"40208 concert tickets"</span><span class="p">,</span>
    <span class="s2">"remote_ip"</span><span class="p">:</span> <span class="s2">"245.253.2.12"</span><span class="p">,</span>
    <span class="s2">"return_success_url"</span><span class="p">:</span> <span class="s2">"http://www.example.com/success"</span><span class="p">,</span>
    <span class="s2">"return_failure_url"</span><span class="p">:</span> <span class="s2">"http://www.example.com/failure"</span><span class="p">,</span>
    <span class="s2">"amount"</span><span class="p">:</span> <span class="s2">"100"</span><span class="p">,</span>
    <span class="s2">"currency"</span><span class="p">:</span> <span class="s2">"EUR"</span><span class="p">,</span>
    <span class="s2">"billing_address"</span><span class="p">:</span> <span class="p">{</span>
      <span class="s2">"first_name"</span><span class="p">:</span> <span class="s2">"Barney"</span><span class="p">,</span>
      <span class="s2">"last_name"</span><span class="p">:</span> <span class="s2">"Rubble"</span><span class="p">,</span>
      <span class="s2">"address1"</span><span class="p">:</span> <span class="s2">"14, Nerazdelni str"</span><span class="p">,</span>
      <span class="s2">"zip_code"</span><span class="p">:</span> <span class="s2">"1407"</span><span class="p">,</span>
      <span class="s2">"city"</span><span class="p">:</span> <span class="s2">"Rome"</span><span class="p">,</span>
      <span class="s2">"country"</span><span class="p">:</span> <span class="s2">"IT"</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">).</span><span class="nx">send</span><span class="p">()</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">success</span><span class="p">)</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">failure</span><span class="p">);</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>curl https://username:password@gate.emerchantpay.net/process/TERMINAL-TOKEN <span class="se">\</span>
   -H <span class="s2">"Content-Type: text/xml"</span> <span class="se">\</span>
   -d <span class="s1">'
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;ppro&lt;/transaction_type&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;payment_type&gt;mybank&lt;/payment_type&gt;
  &lt;usage&gt;40208 concert tickets&lt;/usage&gt;
  &lt;remote_ip&gt;245.253.2.12&lt;/remote_ip&gt;
  &lt;return_success_url&gt;http://www.example.com/success&lt;/return_success_url&gt;
  &lt;return_failure_url&gt;http://www.example.com/failure&lt;/return_failure_url&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;EUR&lt;/currency&gt;
  &lt;billing_address&gt;
    &lt;first_name&gt;Barney&lt;/first_name&gt;
    &lt;last_name&gt;Rubble&lt;/last_name&gt;
    &lt;address1&gt;14, Nerazdelni str&lt;/address1&gt;
    &lt;zip_code&gt;1407&lt;/zip_code&gt;
    &lt;city&gt;Rome&lt;/city&gt;
    &lt;country&gt;IT&lt;/country&gt;
  &lt;/billing_address&gt;
&lt;/payment_transaction&gt;'</span>
</code></pre>

<p><strong>Request Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>required</td>
<td>string(255)</td>
<td><strong>ppro</strong> or <strong>mybank</strong>. Contact tech support at <a href="mailto:tech-support@emerchantpay.net">tech-support@emerchantpay.net</a> for more details.</td>
</tr>
<tr>
<td>transaction_id</td>
<td>required</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>payment_type</td>
<td>required<sup>1</sup></td>
<td>ppro</td>
<td>MyBank. Contact tech support at <a href="mailto:tech-support@emerchantpay.net">tech-support@emerchantpay.net</a> for more details.</td>
</tr>
<tr>
<td>usage</td>
<td>optional</td>
<td>string(255)</td>
<td>Description of the transaction for later use</td>
</tr>
<tr>
<td>remote_ip</td>
<td>required*</td>
<td>IPv4 address</td>
<td>IPv4 address of customer</td>
</tr>
<tr>
<td>return_success_url</td>
<td>required</td>
<td>url</td>
<td>URL where customer is sent to after successful payment</td>
</tr>
<tr>
<td>return_failure_url</td>
<td>required</td>
<td>url</td>
<td>URL where customer is sent to after unsuccessful payment</td>
</tr>
<tr>
<td>amount</td>
<td>required</td>
<td>integer &gt; 0</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>required</td>
<td>string(3)</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td><strong>billing_address</strong></td>
<td>required</td>
<td></td>
<td>See <a href="#required-vs-optional-api-params">Required vs Optional API params</a> for details</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;first_name</td>
<td>required*</td>
<td>string(255)</td>
<td>Customer first name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;last_name</td>
<td>required*</td>
<td>string(255)</td>
<td>Customer last name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address1</td>
<td>required*</td>
<td>string(255)</td>
<td>Primary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address2</td>
<td>required*</td>
<td>string(255)</td>
<td>Secondary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;zip_code</td>
<td>required*</td>
<td>string</td>
<td>ZIP code</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;city</td>
<td>required*</td>
<td>string(255)</td>
<td>City</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;state</td>
<td>required*</td>
<td>string(2)</td>
<td>State code in <a href="https://en.wikipedia.org/wiki/ISO_3166-2">ISO 3166-2</a>, required for USA and Canada</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;country</td>
<td>required</td>
<td>string(2)</td>
<td>Country code in <a href="https://www.iso.org/iso-3166-country-codes.html">ISO 3166</a></td>
</tr>
<tr>
<td><strong>shipping_address</strong></td>
<td>optional</td>
<td></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;first_name</td>
<td>optional</td>
<td>string(255)</td>
<td>Customer first name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;last_name</td>
<td>optional</td>
<td>string(255)</td>
<td>Customer last name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address1</td>
<td>optional</td>
<td>string(255)</td>
<td>Primary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address2</td>
<td>optional</td>
<td>string(255)</td>
<td>Secondary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;zip_code</td>
<td>optional</td>
<td>string</td>
<td>ZIP code</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;city</td>
<td>optional</td>
<td>string(255)</td>
<td>City</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;state</td>
<td>optional</td>
<td>string(2)</td>
<td>State code in <a href="https://en.wikipedia.org/wiki/ISO_3166-2">ISO 3166-2</a>, required for USA and Canada</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;country</td>
<td>optional</td>
<td>string(2)</td>
<td>Country code in <a href="https://www.iso.org/iso-3166-country-codes.html">ISO 3166</a></td>
</tr>
</tbody></table>

<p><code>required* = conditionally required</code></p>

<p><code>1 - payment_type must be submitted only when the transaction type is set to ppro</code></p>

<p><strong>Supported currencies and countries</strong></p>

<table><thead>
<tr>
<th>Currency code</th>
<th>Country code</th>
</tr>
</thead><tbody>
<tr>
<td>EUR</td>
<td>BE, FR, IT, LU</td>
</tr>
</tbody></table>

<blockquote>
<p>Successful Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>stdClass Object
(
    [transaction_type] =&gt; ppro
    [status] =&gt; pending_async
    [mode] =&gt; live
    [transaction_id] =&gt; 43671
    [unique_id] =&gt; 44177a21403427eb96664a6d7e5d5d48
    [technical_message] =&gt; Transaction successful!
    [message] =&gt; Transaction successful!
    [redirect_url] =&gt; https://gate.emerchantpay.net/redirect/to_acquirer/649e1ff35c61
    [timestamp] =&gt; DateTime Object
        (
            [date] =&gt; 2019-03-14 12:05:58.000000
            [timezone_type] =&gt; 2
            [timezone] =&gt; Z
        )
    [descriptor] =&gt; Descriptor one
    [amount] =&gt; 100
    [currency] =&gt; EUR
    [sent_to_acquirer] =&gt; true
)
</code></pre>

<pre class="highlight java tab-java"><code><span class="o">&lt;</span><span class="n">payment_response</span> <span class="n">content</span><span class="o">=[</span>
    <span class="o">&lt;</span><span class="n">transaction_type</span> <span class="n">content</span><span class="o">=[</span><span class="n">ppro</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">status</span> <span class="n">content</span><span class="o">=[</span><span class="n">pending_async</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">mode</span> <span class="n">content</span><span class="o">=[</span><span class="n">live</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">transaction_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">43671</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">unique_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">44177</span><span class="n">a21403427eb96664a6d7e5d5d48</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">technical_message</span> <span class="n">content</span><span class="o">=[</span><span class="n">Transaction</span> <span class="n">successful</span><span class="o">!]&gt;</span>
    <span class="o">&lt;</span><span class="n">message</span> <span class="n">content</span><span class="o">=[</span><span class="n">Transaction</span> <span class="n">successful</span><span class="o">!]&gt;</span>
    <span class="o">&lt;</span><span class="n">redirect_url</span> <span class="n">content</span><span class="o">=[</span><span class="nl">https:</span><span class="c1">//gate.emerchantpay.net/redirect/to_acquirer/649e1ff35c61]&gt;</span>
    <span class="o">&lt;</span><span class="n">timestamp</span> <span class="n">content</span><span class="o">=[</span><span class="mi">2019</span><span class="o">-</span><span class="mo">03</span><span class="o">-</span><span class="mi">14</span><span class="nl">T12:</span><span class="mo">05</span><span class="o">:</span><span class="mi">58</span><span class="n">Z</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">descriptor</span> <span class="n">content</span><span class="o">=[</span><span class="n">Descriptor</span> <span class="n">one</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">amount</span> <span class="n">content</span><span class="o">=[</span><span class="mi">100</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">currency</span> <span class="n">content</span><span class="o">=[</span><span class="n">EUR</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">sent_to_acquirer</span> <span class="n">content</span><span class="o">=[</span><span class="kc">true</span><span class="o">]&gt;</span>
<span class="o">]&gt;</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="p">{</span>
    <span class="nl">transaction_type</span><span class="p">:</span> <span class="s2">"ppro"</span><span class="p">,</span>
    <span class="nx">status</span><span class="p">:</span> <span class="s2">"pending_async"</span><span class="p">,</span>
    <span class="nx">mode</span><span class="p">:</span> <span class="s2">"live"</span><span class="p">,</span>
    <span class="nx">transaction_id</span><span class="p">:</span> <span class="s2">"43671"</span><span class="p">,</span>
    <span class="nx">unique_id</span><span class="p">:</span> <span class="s2">"44177a21403427eb96664a6d7e5d5d48"</span><span class="p">,</span>
    <span class="nx">technical_message</span><span class="p">:</span> <span class="s2">"Transaction successful!"</span><span class="p">,</span>
    <span class="nx">message</span><span class="p">:</span> <span class="s2">"Transaction successful!"</span><span class="p">,</span>
    <span class="nx">redirect_url</span><span class="p">:</span> <span class="s2">"https://gate.emerchantpay.net/redirect/to_acquirer/649e1ff35c61"</span><span class="p">,</span>
    <span class="nx">timestamp</span><span class="p">:</span> <span class="s2">"2019-03-14T12:05:58Z"</span><span class="p">,</span>
    <span class="nx">descriptor</span><span class="p">:</span> <span class="s2">"Descriptor one"</span><span class="p">,</span>
    <span class="nx">amount</span><span class="p">:</span> <span class="s2">"100"</span><span class="p">,</span>
    <span class="nx">currency</span><span class="p">:</span> <span class="s2">"EUR"</span><span class="p">,</span>
    <span class="nx">sent_to_acquirer</span><span class="p">:</span> <span class="s2">"true"</span><span class="p">,</span>
<span class="p">}</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;ppro&lt;/transaction_type&gt;
  &lt;status&gt;pending_async&lt;/status&gt;
  &lt;mode&gt;live&lt;/mode&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;technical_message&gt;Transaction successful!&lt;/technical_message&gt;
  &lt;message&gt;Transaction successful!&lt;/message&gt;
  &lt;redirect_url&gt;https://gate.emerchantpay.net/redirect/to_acquirer/649e1ff35c61&lt;/redirect_url&gt;
  &lt;timestamp&gt;2019-03-14T12:05:58Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;EUR&lt;/currency&gt;
  &lt;sent_to_acquirer&gt;true&lt;/sent_to_acquirer&gt;
&lt;/payment_transaction&gt;
</code></pre>

<p><strong>Successful Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>The transaction type</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>transaction_id</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>unique_id</td>
<td>string(32)</td>
<td>Unique id defined by gate (must later be used if capturing, voiding or refunding a transaction)</td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
<tr>
<td>message</td>
<td>string(255)</td>
<td>Human readable error message which can be displayed to users.</td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>redirect_url</td>
<td>url</td>
<td>URL where user has to be redirected to complete payment process. It is available for asynchronous mode</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when the transaction was processed in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Combined date and time</a> e.g. 2007-08- 30T17:46:11Z</td>
</tr>
<tr>
<td>descriptor</td>
<td>string</td>
<td>Static descriptor MID info as configured on the gateway</td>
</tr>
<tr>
<td>amount</td>
<td>integer</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>sent_to_acquirer</td>
<td>string</td>
<td>&quot;true&quot; or &quot;false&quot;</td>
</tr>
</tbody></table>

<blockquote>
<p>Error Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>stdClass Object
(
    [transaction_type] =&gt; ppro
    [status] =&gt; error
    [mode] =&gt; live
    [transaction_id] =&gt; 43671
    [unique_id] =&gt; 44177a21403427eb96664a6d7e5d5d48
    [code] =&gt; 110
    [message] =&gt; Something went wrong, please contact support!
    [timestamp] =&gt; DateTime Object
        (
            [date] =&gt; 2019-03-14 12:05:58.000000
            [timezone_type] =&gt; 2
            [timezone] =&gt; Z
        )
    [descriptor] =&gt; Descriptor one
    [amount] =&gt; 100
    [currency] =&gt; EUR
    [sent_to_acquirer] =&gt; true
)
</code></pre>

<pre class="highlight java tab-java"><code><span class="o">&lt;</span><span class="n">payment_response</span> <span class="n">content</span><span class="o">=[</span>
    <span class="o">&lt;</span><span class="n">transaction_type</span> <span class="n">content</span><span class="o">=[</span><span class="n">ppro</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">status</span> <span class="n">content</span><span class="o">=[</span><span class="n">error</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">mode</span> <span class="n">content</span><span class="o">=[</span><span class="n">live</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">transaction_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">43671</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">unique_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">44177</span><span class="n">a21403427eb96664a6d7e5d5d48</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">code</span> <span class="n">content</span><span class="o">=[</span><span class="mi">110</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">message</span> <span class="n">content</span><span class="o">=[</span><span class="n">Something</span> <span class="n">went</span> <span class="n">wrong</span><span class="o">,</span> <span class="n">please</span> <span class="n">contact</span> <span class="n">support</span><span class="o">!]&gt;</span>
    <span class="o">&lt;</span><span class="n">timestamp</span> <span class="n">content</span><span class="o">=[</span><span class="mi">2019</span><span class="o">-</span><span class="mo">03</span><span class="o">-</span><span class="mi">14</span><span class="nl">T12:</span><span class="mo">05</span><span class="o">:</span><span class="mi">58</span><span class="n">Z</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">descriptor</span> <span class="n">content</span><span class="o">=[</span><span class="n">Descriptor</span> <span class="n">one</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">amount</span> <span class="n">content</span><span class="o">=[</span><span class="mi">100</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">currency</span> <span class="n">content</span><span class="o">=[</span><span class="n">EUR</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">sent_to_acquirer</span> <span class="n">content</span><span class="o">=[</span><span class="kc">true</span><span class="o">]&gt;</span>
<span class="o">]&gt;</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="p">{</span>
    <span class="nl">transaction_type</span><span class="p">:</span> <span class="s2">"ppro"</span><span class="p">,</span>
    <span class="nx">status</span><span class="p">:</span> <span class="s2">"error"</span><span class="p">,</span>
    <span class="nx">mode</span><span class="p">:</span> <span class="s2">"live"</span><span class="p">,</span>
    <span class="nx">transaction_id</span><span class="p">:</span> <span class="s2">"43671"</span><span class="p">,</span>
    <span class="nx">unique_id</span><span class="p">:</span> <span class="s2">"44177a21403427eb96664a6d7e5d5d48"</span><span class="p">,</span>
    <span class="nx">code</span><span class="p">:</span> <span class="s2">"110"</span><span class="p">,</span>
    <span class="nx">message</span><span class="p">:</span> <span class="s2">"Something went wrong, please contact support!"</span><span class="p">,</span>
    <span class="nx">timestamp</span><span class="p">:</span> <span class="s2">"2019-03-14T12:05:58Z"</span><span class="p">,</span>
    <span class="nx">descriptor</span><span class="p">:</span> <span class="s2">"Descriptor one"</span><span class="p">,</span>
    <span class="nx">amount</span><span class="p">:</span> <span class="s2">"100"</span><span class="p">,</span>
    <span class="nx">currency</span><span class="p">:</span> <span class="s2">"EUR"</span><span class="p">,</span>
    <span class="nx">sent_to_acquirer</span><span class="p">:</span> <span class="s2">"true"</span><span class="p">,</span>
<span class="p">}</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;ppro&lt;/transaction_type&gt;
  &lt;status&gt;error&lt;/status&gt;
  &lt;mode&gt;live&lt;/mode&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;code&gt;110&lt;/code&gt;
  &lt;message&gt;Something went wrong, please contact support!&lt;/message&gt;
  &lt;timestamp&gt;2019-03-14T12:05:58Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;EUR&lt;/currency&gt;
  &lt;sent_to_acquirer&gt;true&lt;/sent_to_acquirer&gt;
&lt;/payment_transaction&gt;
</code></pre>

<p><strong>Error Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>The transaction type</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>transaction_id</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>unique_id</td>
<td>string(32)</td>
<td>Unique id defined by gate (must later be used if capturing, voiding or refunding a transaction)</td>
</tr>
<tr>
<td>code</td>
<td>integer</td>
<td>Error code according to <a href="#error-code-table">Error code table</a></td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
<tr>
<td>message</td>
<td>string(255)</td>
<td>Human readable error message which can be displayed to users.</td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when the transaction was processed in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Combined date and time</a> e.g. 2007-08- 30T17:46:11Z</td>
</tr>
<tr>
<td>descriptor</td>
<td>string</td>
<td>Static descriptor MID info as configured on the gateway</td>
</tr>
<tr>
<td>amount</td>
<td>integer</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>sent_to_acquirer</td>
<td>string</td>
<td>&quot;true&quot; or &quot;false&quot;</td>
</tr>
</tbody></table>
<h3 id='online-banking'>Online Banking</h3>
<p>Online Banking is an oBeP-style alternative payment method that allows you to pay directly with your ebank account. After initiating a transaction, the online banking will redirect you to their page. There you will find a list with available banks to finish the payment.</p>

<blockquote>
<p>Request</p>
</blockquote>

<pre class="highlight php tab-php"><code>This request is not implemented yet
</code></pre>

<pre class="highlight java tab-java"><code><span class="n">This</span> <span class="n">request</span> <span class="n">is</span> <span class="n">not</span> <span class="n">implemented</span> <span class="n">yet</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>curl https://username:password@gate.emerchantpay.net/process/TERMINAL-TOKEN <span class="se">\</span>
   -H <span class="s2">"Content-Type: text/xml"</span> <span class="se">\</span>
   -d <span class="s1">'
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;online_banking&lt;/transaction_type&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;usage&gt;40208 concert tickets&lt;/usage&gt;
  &lt;remote_ip&gt;245.253.2.12&lt;/remote_ip&gt;
  &lt;notification_url&gt;https://www.example.com/notification&lt;/notification_url&gt;
  &lt;return_success_url&gt;http://www.example.com/success&lt;/return_success_url&gt;
  &lt;return_failure_url&gt;http://www.example.com/failure&lt;/return_failure_url&gt;
  &lt;amount&gt;50000&lt;/amount&gt;
  &lt;currency&gt;CNY&lt;/currency&gt;
  &lt;customer_email&gt;travis@example.com&lt;/customer_email&gt;
  &lt;bank_code&gt;CITIC&lt;/bank_code&gt;
  &lt;billing_address&gt;
    &lt;first_name&gt;Travis&lt;/first_name&gt;
    &lt;last_name&gt;Pastrana&lt;/last_name&gt;
    &lt;address1&gt;Muster Str. 12&lt;/address1&gt;
    &lt;zip_code&gt;10178&lt;/zip_code&gt;
    &lt;city&gt;Los Angeles&lt;/city&gt;
    &lt;state&gt;CA&lt;/state&gt;
    &lt;country&gt;US&lt;/country&gt;
  &lt;/billing_address&gt;
&lt;/payment_transaction&gt;'</span>
</code></pre>

<p><strong>Request Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>required</td>
<td>string(255)</td>
<td>The transaction type: <strong>online_banking</strong></td>
</tr>
<tr>
<td>transaction_id</td>
<td>required</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>usage</td>
<td>optional</td>
<td>string(255)</td>
<td>Description of the transaction for later use</td>
</tr>
<tr>
<td>remote_ip</td>
<td>required</td>
<td>IPv4 address</td>
<td>IPv4 address of customer</td>
</tr>
<tr>
<td>return_success_url</td>
<td>required</td>
<td>url</td>
<td>URL where customer is sent to after successful payment</td>
</tr>
<tr>
<td>return_failure_url</td>
<td>required</td>
<td>url</td>
<td>URL where customer is sent to after unsuccessful payment</td>
</tr>
<tr>
<td>amount</td>
<td>required</td>
<td>integer &gt; 0</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>required</td>
<td>string(3)</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>customer_email</td>
<td>required*</td>
<td>e-mail address</td>
<td>Must contain valid e-mail of customer</td>
</tr>
<tr>
<td>customer_phone</td>
<td>required*</td>
<td>string(32)</td>
<td>Must contain valid phone number of customer</td>
</tr>
<tr>
<td>bank_code</td>
<td>required</td>
<td>bank code</td>
<td>Must contain <a href="#bank-codes" target="_self">Bank code</a></td>
</tr>
<tr>
<td>document_id</td>
<td>required*</td>
<td>sring(20)</td>
<td>Document ID of the consumer. See <a href="#document-id-parameter">Document ID Parameter</a> for more details.</td>
</tr>
<tr>
<td>payment_type</td>
<td>required*</td>
<td>string</td>
<td>The payment type describes the type of online banking used to process the transaction. Allowed values are quick_payment, qr_payment or online_banking, but they may vary based on the specific setup. If ommited, transaction will be processed with online_banking payment_type.</td>
</tr>
<tr>
<td><strong>billing_address</strong></td>
<td>required</td>
<td></td>
<td>See <a href="#required-vs-optional-api-params">Required vs Optional API params</a> for details</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;first_name</td>
<td>required*</td>
<td>string(255)</td>
<td>Customer first name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;last_name</td>
<td>required*</td>
<td>string(255)</td>
<td>Customer last name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address1</td>
<td>required*</td>
<td>string(255)</td>
<td>Primary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address2</td>
<td>required*</td>
<td>string(255)</td>
<td>Secondary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;zip_code</td>
<td>required*</td>
<td>string</td>
<td>ZIP code</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;city</td>
<td>required*</td>
<td>string(255)</td>
<td>City</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;state</td>
<td>required*</td>
<td>string(2)</td>
<td>State code in <a href="https://en.wikipedia.org/wiki/ISO_3166-2">ISO 3166-2</a>, required for USA and Canada</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;country</td>
<td>required</td>
<td>string(2)</td>
<td>Country code in <a href="https://www.iso.org/iso-3166-country-codes.html">ISO 3166</a></td>
</tr>
</tbody></table>

<p><code>required* = conditionally required</code></p>

<p><strong>Supported currencies</strong></p>

<table><thead>
<tr>
<th>Currency name</th>
<th>Currency code</th>
</tr>
</thead><tbody>
<tr>
<td>China yen</td>
<td>CNY</td>
</tr>
<tr>
<td>Indonesian rupiah</td>
<td>IDR</td>
</tr>
<tr>
<td>Malaysian ringgit</td>
<td>MYR</td>
</tr>
<tr>
<td>Thai baht</td>
<td>THB</td>
</tr>
</tbody></table>
<h4 id='bank-codes'>Bank Codes</h4>
<aside class="notice">
Bank codes may vary based on the specific setup.
</aside>

<p><strong>For CNY currency</strong></p>

<table><thead>
<tr>
<th>Bank Name</th>
<th>Bank Code</th>
</tr>
</thead><tbody>
<tr>
<td>Agricultural Bank of China</td>
<td>ABC</td>
</tr>
<tr>
<td>Bank of China</td>
<td>BOC</td>
</tr>
<tr>
<td>China Union Pay</td>
<td>QUICKPAY</td>
</tr>
<tr>
<td>China Minsheng Bank</td>
<td>CMBC</td>
</tr>
<tr>
<td>China Construction Bank</td>
<td>CCB</td>
</tr>
<tr>
<td>China Citic Bank</td>
<td>CITIC</td>
</tr>
<tr>
<td>China Everbright Bank</td>
<td>CEB</td>
</tr>
<tr>
<td>China Guangfa Bank</td>
<td>GDB</td>
</tr>
<tr>
<td>China Postal Savings Bank</td>
<td>PSBC</td>
</tr>
<tr>
<td>Industrial and Commercial Bank of China</td>
<td>ICBC</td>
</tr>
<tr>
<td>Bank of Communications</td>
<td>BOCO</td>
</tr>
<tr>
<td>Pingan Bank</td>
<td>PINGANBANK</td>
</tr>
<tr>
<td>Shanghai Pudong Development Bank</td>
<td>SPDB</td>
</tr>
<tr>
<td>Industrial Bank</td>
<td>CIB</td>
</tr>
<tr>
<td>Huaxia Bank</td>
<td>HXB</td>
</tr>
</tbody></table>

<p><strong>For THB currency:</strong></p>

<table><thead>
<tr>
<th>Bank Name</th>
<th>Bank Code</th>
</tr>
</thead><tbody>
<tr>
<td>Bangkok Bank</td>
<td>BBL_THB</td>
</tr>
<tr>
<td>Kasikorn Bank</td>
<td>KKB_THB</td>
</tr>
<tr>
<td>Krungsri (Bank of Ayudhya Public Company Limited)</td>
<td>BAY_THB</td>
</tr>
<tr>
<td>Krung Thai Bank</td>
<td>KTB_THB</td>
</tr>
<tr>
<td>Siam Commercial Bank</td>
<td>SCB_THB</td>
</tr>
<tr>
<td>UOBT</td>
<td>UOB_THB</td>
</tr>
</tbody></table>

<p><strong>For MYR currency:</strong></p>

<table><thead>
<tr>
<th>Bank Name</th>
<th>Bank Code</th>
</tr>
</thead><tbody>
<tr>
<td>CIMB Clicks Bank</td>
<td>CIMB_MYR</td>
</tr>
<tr>
<td>Hong Leong Bank</td>
<td>HLE_MYR</td>
</tr>
<tr>
<td>May Bank</td>
<td>MAY_MYR</td>
</tr>
<tr>
<td>Public Bank</td>
<td>PBE_MYR</td>
</tr>
<tr>
<td>RHB Bank</td>
<td>RHB_MYR</td>
</tr>
</tbody></table>

<p><strong>For IDR currency:</strong></p>

<table><thead>
<tr>
<th>Bank Name</th>
<th>Bank Code</th>
</tr>
</thead><tbody>
<tr>
<td>Bank Central Asia</td>
<td>BCA_IDR</td>
</tr>
<tr>
<td>Bank Rakyat Indonesia</td>
<td>BRI_IDR</td>
</tr>
<tr>
<td>Bank Negara Indonesia</td>
<td>BNI_IDR</td>
</tr>
<tr>
<td>BTN Bank</td>
<td>BTN_IDR</td>
</tr>
<tr>
<td>CIMB Clicks Indonesia</td>
<td>CIMB_IDR</td>
</tr>
<tr>
<td>Danamon Bank</td>
<td>DMN_IDR</td>
</tr>
<tr>
<td>Mandiri Bank</td>
<td>MDR_IDR</td>
</tr>
<tr>
<td>Permata Bank</td>
<td>PMB_IDR</td>
</tr>
<tr>
<td>Virtual Account Bank</td>
<td>VA</td>
</tr>
</tbody></table>

<p><strong>For INR currency:</strong></p>

<table><thead>
<tr>
<th>Bank Name</th>
<th>Bank Code</th>
</tr>
</thead><tbody>
<tr>
<td>Netbanking</td>
<td>NB</td>
</tr>
<tr>
<td>UPI</td>
<td>UI</td>
</tr>
</tbody></table>

<blockquote>
<p>Successful Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>This request is not implemented yet
</code></pre>

<pre class="highlight java tab-java"><code><span class="n">This</span> <span class="n">request</span> <span class="n">is</span> <span class="n">not</span> <span class="n">implemented</span> <span class="n">yet</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;online_banking&lt;/transaction_type&gt;
  &lt;status&gt;pending_async&lt;/status&gt;
  &lt;mode&gt;live&lt;/mode&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;technical_message&gt;Transaction successful!&lt;/technical_message&gt;
  &lt;message&gt;Transaction successful!&lt;/message&gt;
  &lt;redirect_url&gt;https://gate.emerchantpay.net/redirect/to_acquirer/649e1ff35c61&lt;/redirect_url&gt;
  &lt;timestamp&gt;2019-03-14T12:05:59Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;amount&gt;50000&lt;/amount&gt;
  &lt;currency&gt;CNY&lt;/currency&gt;
  &lt;sent_to_acquirer&gt;true&lt;/sent_to_acquirer&gt;
&lt;/payment_transaction&gt;
</code></pre>

<p><strong>Successful Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>The transaction type</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>transaction_id</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>unique_id</td>
<td>string(32)</td>
<td>Unique id defined by gate (must later be used if capturing, voiding or refunding a transaction)</td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
<tr>
<td>message</td>
<td>string(255)</td>
<td>Human readable error message which can be displayed to users.</td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>redirect_url</td>
<td>url</td>
<td>URL where user has to be redirected to complete payment process. It is available for asynchronous mode</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when the transaction was processed in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Combined date and time</a> e.g. 2007-08- 30T17:46:11Z</td>
</tr>
<tr>
<td>descriptor</td>
<td>string</td>
<td>Static descriptor MID info as configured on the gateway</td>
</tr>
<tr>
<td>amount</td>
<td>integer</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>sent_to_acquirer</td>
<td>string</td>
<td>&quot;true&quot; or &quot;false&quot;</td>
</tr>
</tbody></table>

<blockquote>
<p>Error Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>This request is not implemented yet
</code></pre>

<pre class="highlight java tab-java"><code><span class="n">This</span> <span class="n">request</span> <span class="n">is</span> <span class="n">not</span> <span class="n">implemented</span> <span class="n">yet</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;online_banking&lt;/transaction_type&gt;
  &lt;status&gt;error&lt;/status&gt;
  &lt;mode&gt;live&lt;/mode&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;code&gt;110&lt;/code&gt;
  &lt;technical_message&gt;amount is missing&lt;/technical_message&gt;
  &lt;message&gt;Please check input data <span class="k">for </span>errors!&lt;/message&gt;
  &lt;timestamp&gt;2019-03-14T12:05:59Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;amount&gt;50000&lt;/amount&gt;
  &lt;currency&gt;CNY&lt;/currency&gt;
  &lt;sent_to_acquirer&gt;true&lt;/sent_to_acquirer&gt;
&lt;/payment_transaction&gt;
</code></pre>

<p><strong>Error Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>The transaction type</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>transaction_id</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>unique_id</td>
<td>string(32)</td>
<td>Unique id defined by gate (must later be used if capturing, voiding or refunding a transaction)</td>
</tr>
<tr>
<td>code</td>
<td>integer</td>
<td>Error code according to <a href="#error-code-table">Error code table</a></td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
<tr>
<td>message</td>
<td>string(255)</td>
<td>Human readable error message which can be displayed to users.</td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when the transaction was processed in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Combined date and time</a> e.g. 2007-08- 30T17:46:11Z</td>
</tr>
<tr>
<td>descriptor</td>
<td>string</td>
<td>Static descriptor MID info as configured on the gateway</td>
</tr>
<tr>
<td>amount</td>
<td>integer</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>sent_to_acquirer</td>
<td>string</td>
<td>&quot;true&quot; or &quot;false&quot;</td>
</tr>
</tbody></table>
<h3 id='p24'>P24</h3>
<aside class="notice" >
P24 transactions are only asynchronous. After a successful validation of transaction parameters, transaction status is set to pending async and the user is redirected to the P24 payment page where he enters additional information to finish the payment. When the payment reaches a final state, Genesis gateway sends a notification to the merchant.
</aside>

<blockquote>
<p>Request</p>
</blockquote>

<pre class="highlight php tab-php"><code><span class="cp">&lt;?php</span>

<span class="c1">// Load the pre-configured ini file...
</span><span class="nx">\Genesis\Config</span><span class="o">::</span><span class="na">loadSettings</span><span class="p">(</span><span class="s1">'/path/to/config.ini'</span><span class="p">);</span>

<span class="nv">$genesis</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Genesis</span><span class="p">(</span><span class="s1">'Financial\Alternatives\P24'</span><span class="p">);</span>
<span class="nv">$request</span> <span class="o">=</span> <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">request</span><span class="p">();</span>

<span class="nv">$request</span>
  <span class="o">-&gt;</span><span class="na">setTransactionId</span><span class="p">(</span><span class="s1">'43671'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setUsage</span><span class="p">(</span><span class="s1">'40208 concert tickets'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setRemoteIp</span><span class="p">(</span><span class="s1">'245.253.2.12'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setReturnSuccessUrl</span><span class="p">(</span><span class="s1">'http://www.example.com/success'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setReturnFailureUrl</span><span class="p">(</span><span class="s1">'http://www.example.com/failure'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setAmount</span><span class="p">(</span><span class="s1">'100'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCurrency</span><span class="p">(</span><span class="s1">'USD'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCustomerEmail</span><span class="p">(</span><span class="s1">'travis@example.com'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCustomerPhone</span><span class="p">(</span><span class="s1">'+1987987987987'</span><span class="p">)</span>


  <span class="c1">// Billing Address
</span>  <span class="o">-&gt;</span><span class="na">setBillingFirstName</span><span class="p">(</span><span class="s1">'Travis'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingLastName</span><span class="p">(</span><span class="s1">'Pastrana'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingAddress1</span><span class="p">(</span><span class="s1">'Muster Str. 12'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingZipCode</span><span class="p">(</span><span class="s1">'10178'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingCity</span><span class="p">(</span><span class="s1">'Los Angeles'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingState</span><span class="p">(</span><span class="s1">'CA'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingCountry</span><span class="p">(</span><span class="s1">'US'</span><span class="p">);</span>

<span class="k">try</span> <span class="p">{</span>
    <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">execute</span><span class="p">();</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">response</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">getResponseObject</span><span class="p">();</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">\Exception</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$e</span><span class="o">-&gt;</span><span class="na">getMessage</span><span class="p">();</span>
<span class="p">}</span>
</code></pre>

<pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.GenesisClient</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.TransactionResult</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.constants.Endpoints</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.constants.Environments</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.requests.financial.apm.P24Request</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.model.Transaction</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Configuration</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Country</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Currency</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.math.BigDecimal</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.MalformedURLException</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.URL</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">GenesisExample</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">MalformedURLException</span> <span class="o">{</span>

    <span class="c1">// Create configuration</span>
    <span class="n">Configuration</span> <span class="n">configuration</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Configuration</span><span class="o">(</span><span class="n">Environments</span><span class="o">.</span><span class="na">STAGING</span><span class="o">,</span> <span class="n">Endpoints</span><span class="o">.</span><span class="na">EMERCHANTPAY</span><span class="o">);</span>

    <span class="n">configuration</span><span class="o">.</span><span class="na">setUsername</span><span class="o">(</span><span class="s">"SET_YOUR_USERNAME"</span><span class="o">);</span>
    <span class="n">configuration</span><span class="o">.</span><span class="na">setPassword</span><span class="o">(</span><span class="s">"SET_YOUR_PASSWORD"</span><span class="o">);</span>
    <span class="n">configuration</span><span class="o">.</span><span class="na">setToken</span><span class="o">(</span><span class="s">"SET_YOUR_TOKEN"</span><span class="o">);</span>

    <span class="n">P24Request</span> <span class="n">request</span> <span class="o">=</span> <span class="k">new</span> <span class="n">P24Request</span><span class="o">();</span>

    <span class="n">request</span><span class="o">.</span><span class="na">setTransactionId</span><span class="o">(</span><span class="s">"43671"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setUsage</span><span class="o">(</span><span class="s">"40208 concert tickets"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setRemoteIp</span><span class="o">(</span><span class="s">"245.253.2.12"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setReturnSuccessUrl</span><span class="o">(</span><span class="k">new</span> <span class="n">URL</span><span class="o">(</span><span class="s">"http://www.example.com/success"</span><span class="o">));</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setReturnFailureUrl</span><span class="o">(</span><span class="k">new</span> <span class="n">URL</span><span class="o">(</span><span class="s">"http://www.example.com/failure"</span><span class="o">));</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setAmount</span><span class="o">(</span><span class="k">new</span> <span class="n">BigDecimal</span><span class="o">(</span><span class="mi">100</span><span class="o">));</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCurrency</span><span class="o">(</span><span class="s">"USD"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCustomerEmail</span><span class="o">(</span><span class="s">"travis@example.com"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCustomerPhone</span><span class="o">(</span><span class="s">"+1987987987987"</span><span class="o">);</span>


    <span class="c1">// Billing Address</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingFirstname</span><span class="o">(</span><span class="s">"Travis"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingLastname</span><span class="o">(</span><span class="s">"Pastrana"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingPrimaryAddress</span><span class="o">(</span><span class="s">"Muster Str. 12"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingZipCode</span><span class="o">(</span><span class="s">"10178"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingCity</span><span class="o">(</span><span class="s">"Los Angeles"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingState</span><span class="o">(</span><span class="s">"CA"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingCountry</span><span class="o">(</span><span class="s">"US"</span><span class="o">);</span>

    <span class="n">GenesisClient</span> <span class="n">client</span> <span class="o">=</span> <span class="k">new</span> <span class="n">GenesisClient</span><span class="o">(</span><span class="n">configuration</span><span class="o">,</span> <span class="n">request</span><span class="o">);</span>
    <span class="n">client</span><span class="o">.</span><span class="na">execute</span><span class="o">();</span>

    <span class="c1">// Parse Payment result</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">client</span><span class="o">.</span><span class="na">getResponse</span><span class="o">());</span>

  <span class="o">}</span>
<span class="o">}</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="kd">var</span> <span class="nx">genesis</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'genesis.js/lib/genesis.js'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">transaction</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">genesis</span><span class="p">.</span><span class="nx">transaction</span><span class="p">();</span>

<span class="kd">var</span> <span class="nx">failure</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">reason</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">reason</span><span class="p">);</span>
<span class="p">};</span>

<span class="kd">var</span> <span class="nx">success</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>

<span class="nx">transaction</span><span class="p">.</span><span class="nx">p24</span><span class="p">(</span>
  <span class="p">{</span>
    <span class="s2">"transaction_id"</span><span class="p">:</span> <span class="s2">"43671"</span><span class="p">,</span>
    <span class="s2">"usage"</span><span class="p">:</span> <span class="s2">"40208 concert tickets"</span><span class="p">,</span>
    <span class="s2">"remote_ip"</span><span class="p">:</span> <span class="s2">"245.253.2.12"</span><span class="p">,</span>
    <span class="s2">"return_success_url"</span><span class="p">:</span> <span class="s2">"http://www.example.com/success"</span><span class="p">,</span>
    <span class="s2">"return_failure_url"</span><span class="p">:</span> <span class="s2">"http://www.example.com/failure"</span><span class="p">,</span>
    <span class="s2">"amount"</span><span class="p">:</span> <span class="s2">"100"</span><span class="p">,</span>
    <span class="s2">"currency"</span><span class="p">:</span> <span class="s2">"USD"</span><span class="p">,</span>
    <span class="s2">"customer_email"</span><span class="p">:</span> <span class="s2">"travis@example.com"</span><span class="p">,</span>
    <span class="s2">"customer_phone"</span><span class="p">:</span> <span class="s2">"+1987987987987"</span><span class="p">,</span>
    <span class="s2">"billing_address"</span><span class="p">:</span> <span class="p">{</span>
      <span class="s2">"first_name"</span><span class="p">:</span> <span class="s2">"Travis"</span><span class="p">,</span>
      <span class="s2">"last_name"</span><span class="p">:</span> <span class="s2">"Pastrana"</span><span class="p">,</span>
      <span class="s2">"address1"</span><span class="p">:</span> <span class="s2">"Muster Str. 12"</span><span class="p">,</span>
      <span class="s2">"zip_code"</span><span class="p">:</span> <span class="s2">"10178"</span><span class="p">,</span>
      <span class="s2">"city"</span><span class="p">:</span> <span class="s2">"Los Angeles"</span><span class="p">,</span>
      <span class="s2">"state"</span><span class="p">:</span> <span class="s2">"CA"</span><span class="p">,</span>
      <span class="s2">"country"</span><span class="p">:</span> <span class="s2">"US"</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">).</span><span class="nx">send</span><span class="p">()</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">success</span><span class="p">)</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">failure</span><span class="p">);</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>curl https://username:password@gate.emerchantpay.net/process/TERMINAL-TOKEN <span class="se">\</span>
   -H <span class="s2">"Content-Type: text/xml"</span> <span class="se">\</span>
   -d <span class="s1">'
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;p24&lt;/transaction_type&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;usage&gt;40208 concert tickets&lt;/usage&gt;
  &lt;remote_ip&gt;245.253.2.12&lt;/remote_ip&gt;
  &lt;return_success_url&gt;http://www.example.com/success&lt;/return_success_url&gt;
  &lt;return_failure_url&gt;http://www.example.com/failure&lt;/return_failure_url&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
  &lt;customer_email&gt;travis@example.com&lt;/customer_email&gt;
  &lt;customer_phone&gt;+1987987987987&lt;/customer_phone&gt;
  &lt;billing_address&gt;
    &lt;first_name&gt;Travis&lt;/first_name&gt;
    &lt;last_name&gt;Pastrana&lt;/last_name&gt;
    &lt;address1&gt;Muster Str. 12&lt;/address1&gt;
    &lt;zip_code&gt;10178&lt;/zip_code&gt;
    &lt;city&gt;Los Angeles&lt;/city&gt;
    &lt;state&gt;CA&lt;/state&gt;
    &lt;country&gt;US&lt;/country&gt;
  &lt;/billing_address&gt;
&lt;/payment_transaction&gt;'</span>
</code></pre>

<p><strong>Request Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>required</td>
<td>string(255)</td>
<td>The transaction type: <strong>p24</strong></td>
</tr>
<tr>
<td>transaction_id</td>
<td>required</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>usage</td>
<td>required*</td>
<td>string(255)</td>
<td>Description of the transaction for later use</td>
</tr>
<tr>
<td>remote_ip</td>
<td>required</td>
<td>IPv4 address</td>
<td>IPv4 address of customer</td>
</tr>
<tr>
<td>return_success_url</td>
<td>required</td>
<td>url</td>
<td>URL where customer is sent to after successful payment</td>
</tr>
<tr>
<td>return_failure_url</td>
<td>required</td>
<td>url</td>
<td>URL where customer is sent to after unsuccessful payment</td>
</tr>
<tr>
<td>amount</td>
<td>required</td>
<td>integer &gt; 0</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>required</td>
<td>string(3)</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>customer_email</td>
<td>required</td>
<td>e-mail address</td>
<td>Must contain valid e-mail of customer</td>
</tr>
<tr>
<td>customer_phone</td>
<td>required*</td>
<td>string(32)</td>
<td>Must contain valid phone number of customer</td>
</tr>
<tr>
<td><strong>billing_address</strong></td>
<td>required</td>
<td></td>
<td>See <a href="#required-vs-optional-api-params">Required vs Optional API params</a> for details</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;first_name</td>
<td>required*</td>
<td>string(255)</td>
<td>Customer first name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;last_name</td>
<td>required*</td>
<td>string(255)</td>
<td>Customer last name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address1</td>
<td>required*</td>
<td>string(255)</td>
<td>Primary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address2</td>
<td>required*</td>
<td>string(255)</td>
<td>Secondary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;zip_code</td>
<td>required*</td>
<td>string</td>
<td>ZIP code</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;city</td>
<td>required*</td>
<td>string(255)</td>
<td>City</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;state</td>
<td>required*</td>
<td>string(2)</td>
<td>State code in <a href="https://en.wikipedia.org/wiki/ISO_3166-2">ISO 3166-2</a>, required for USA and Canada</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;country</td>
<td>required</td>
<td>string(2)</td>
<td>Country code in <a href="https://www.iso.org/iso-3166-country-codes.html">ISO 3166</a></td>
</tr>
<tr>
<td><strong>shipping_address</strong></td>
<td>optional</td>
<td></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;first_name</td>
<td>optional</td>
<td>string(255)</td>
<td>Customer first name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;last_name</td>
<td>optional</td>
<td>string(255)</td>
<td>Customer last name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address1</td>
<td>optional</td>
<td>string(255)</td>
<td>Primary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address2</td>
<td>optional</td>
<td>string(255)</td>
<td>Secondary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;zip_code</td>
<td>optional</td>
<td>string</td>
<td>ZIP code</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;city</td>
<td>optional</td>
<td>string(255)</td>
<td>City</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;state</td>
<td>optional</td>
<td>string(2)</td>
<td>State code in <a href="https://en.wikipedia.org/wiki/ISO_3166-2">ISO 3166-2</a>, required for USA and Canada</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;country</td>
<td>optional</td>
<td>string(2)</td>
<td>Country code in <a href="https://www.iso.org/iso-3166-country-codes.html">ISO 3166</a></td>
</tr>
</tbody></table>

<p><code>required* = conditionally required</code></p>

<blockquote>
<p>Successful Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>stdClass Object
(
    [transaction_type] =&gt; p24
    [status] =&gt; pending_async
    [mode] =&gt; live
    [transaction_id] =&gt; 43671
    [unique_id] =&gt; 44177a21403427eb96664a6d7e5d5d48
    [technical_message] =&gt; Transaction successful!
    [message] =&gt; Transaction successful!
    [redirect_url] =&gt; https://gate.emerchantpay.net/redirect/to_acquirer/649e1ff35c61
    [timestamp] =&gt; DateTime Object
        (
            [date] =&gt; 2019-03-14 12:05:59.000000
            [timezone_type] =&gt; 2
            [timezone] =&gt; Z
        )
    [descriptor] =&gt; Descriptor one
    [amount] =&gt; 100
    [currency] =&gt; USD
    [sent_to_acquirer] =&gt; true
)
</code></pre>

<pre class="highlight java tab-java"><code><span class="o">&lt;</span><span class="n">payment_response</span> <span class="n">content</span><span class="o">=[</span>
    <span class="o">&lt;</span><span class="n">transaction_type</span> <span class="n">content</span><span class="o">=[</span><span class="n">p24</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">status</span> <span class="n">content</span><span class="o">=[</span><span class="n">pending_async</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">mode</span> <span class="n">content</span><span class="o">=[</span><span class="n">live</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">transaction_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">43671</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">unique_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">44177</span><span class="n">a21403427eb96664a6d7e5d5d48</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">technical_message</span> <span class="n">content</span><span class="o">=[</span><span class="n">Transaction</span> <span class="n">successful</span><span class="o">!]&gt;</span>
    <span class="o">&lt;</span><span class="n">message</span> <span class="n">content</span><span class="o">=[</span><span class="n">Transaction</span> <span class="n">successful</span><span class="o">!]&gt;</span>
    <span class="o">&lt;</span><span class="n">redirect_url</span> <span class="n">content</span><span class="o">=[</span><span class="nl">https:</span><span class="c1">//gate.emerchantpay.net/redirect/to_acquirer/649e1ff35c61]&gt;</span>
    <span class="o">&lt;</span><span class="n">timestamp</span> <span class="n">content</span><span class="o">=[</span><span class="mi">2019</span><span class="o">-</span><span class="mo">03</span><span class="o">-</span><span class="mi">14</span><span class="nl">T12:</span><span class="mo">05</span><span class="o">:</span><span class="mi">59</span><span class="n">Z</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">descriptor</span> <span class="n">content</span><span class="o">=[</span><span class="n">Descriptor</span> <span class="n">one</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">amount</span> <span class="n">content</span><span class="o">=[</span><span class="mi">100</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">currency</span> <span class="n">content</span><span class="o">=[</span><span class="n">USD</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">sent_to_acquirer</span> <span class="n">content</span><span class="o">=[</span><span class="kc">true</span><span class="o">]&gt;</span>
<span class="o">]&gt;</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="p">{</span>
    <span class="nl">transaction_type</span><span class="p">:</span> <span class="s2">"p24"</span><span class="p">,</span>
    <span class="nx">status</span><span class="p">:</span> <span class="s2">"pending_async"</span><span class="p">,</span>
    <span class="nx">mode</span><span class="p">:</span> <span class="s2">"live"</span><span class="p">,</span>
    <span class="nx">transaction_id</span><span class="p">:</span> <span class="s2">"43671"</span><span class="p">,</span>
    <span class="nx">unique_id</span><span class="p">:</span> <span class="s2">"44177a21403427eb96664a6d7e5d5d48"</span><span class="p">,</span>
    <span class="nx">technical_message</span><span class="p">:</span> <span class="s2">"Transaction successful!"</span><span class="p">,</span>
    <span class="nx">message</span><span class="p">:</span> <span class="s2">"Transaction successful!"</span><span class="p">,</span>
    <span class="nx">redirect_url</span><span class="p">:</span> <span class="s2">"https://gate.emerchantpay.net/redirect/to_acquirer/649e1ff35c61"</span><span class="p">,</span>
    <span class="nx">timestamp</span><span class="p">:</span> <span class="s2">"2019-03-14T12:05:59Z"</span><span class="p">,</span>
    <span class="nx">descriptor</span><span class="p">:</span> <span class="s2">"Descriptor one"</span><span class="p">,</span>
    <span class="nx">amount</span><span class="p">:</span> <span class="s2">"100"</span><span class="p">,</span>
    <span class="nx">currency</span><span class="p">:</span> <span class="s2">"USD"</span><span class="p">,</span>
    <span class="nx">sent_to_acquirer</span><span class="p">:</span> <span class="s2">"true"</span><span class="p">,</span>
<span class="p">}</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;p24&lt;/transaction_type&gt;
  &lt;status&gt;pending_async&lt;/status&gt;
  &lt;mode&gt;live&lt;/mode&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;technical_message&gt;Transaction successful!&lt;/technical_message&gt;
  &lt;message&gt;Transaction successful!&lt;/message&gt;
  &lt;redirect_url&gt;https://gate.emerchantpay.net/redirect/to_acquirer/649e1ff35c61&lt;/redirect_url&gt;
  &lt;timestamp&gt;2019-03-14T12:05:59Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
  &lt;sent_to_acquirer&gt;true&lt;/sent_to_acquirer&gt;
&lt;/payment_transaction&gt;
</code></pre>

<p><strong>Successful Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>The transaction type</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>transaction_id</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>unique_id</td>
<td>string(32)</td>
<td>Unique id defined by gate (must later be used if capturing, voiding or refunding a transaction)</td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
<tr>
<td>message</td>
<td>string(255)</td>
<td>Human readable error message which can be displayed to users.</td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>redirect_url</td>
<td>url</td>
<td>URL where user has to be redirected to complete payment process. It is available for asynchronous mode</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when the transaction was processed in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Combined date and time</a> e.g. 2007-08- 30T17:46:11Z</td>
</tr>
<tr>
<td>descriptor</td>
<td>string</td>
<td>Static descriptor MID info as configured on the gateway</td>
</tr>
<tr>
<td>amount</td>
<td>integer</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>sent_to_acquirer</td>
<td>string</td>
<td>&quot;true&quot; or &quot;false&quot;</td>
</tr>
</tbody></table>

<blockquote>
<p>Error Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>stdClass Object
(
    [transaction_type] =&gt; p24
    [status] =&gt; error
    [mode] =&gt; live
    [transaction_id] =&gt; 43671
    [unique_id] =&gt; 44177a21403427eb96664a6d7e5d5d48
    [code] =&gt; 110
    [message] =&gt; Something went wrong, please contact support!
    [timestamp] =&gt; DateTime Object
        (
            [date] =&gt; 2019-03-14 12:05:59.000000
            [timezone_type] =&gt; 2
            [timezone] =&gt; Z
        )
    [descriptor] =&gt; Descriptor one
    [amount] =&gt; 100
    [currency] =&gt; USD
    [sent_to_acquirer] =&gt; true
)
</code></pre>

<pre class="highlight java tab-java"><code><span class="o">&lt;</span><span class="n">payment_response</span> <span class="n">content</span><span class="o">=[</span>
    <span class="o">&lt;</span><span class="n">transaction_type</span> <span class="n">content</span><span class="o">=[</span><span class="n">p24</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">status</span> <span class="n">content</span><span class="o">=[</span><span class="n">error</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">mode</span> <span class="n">content</span><span class="o">=[</span><span class="n">live</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">transaction_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">43671</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">unique_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">44177</span><span class="n">a21403427eb96664a6d7e5d5d48</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">code</span> <span class="n">content</span><span class="o">=[</span><span class="mi">110</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">message</span> <span class="n">content</span><span class="o">=[</span><span class="n">Something</span> <span class="n">went</span> <span class="n">wrong</span><span class="o">,</span> <span class="n">please</span> <span class="n">contact</span> <span class="n">support</span><span class="o">!]&gt;</span>
    <span class="o">&lt;</span><span class="n">timestamp</span> <span class="n">content</span><span class="o">=[</span><span class="mi">2019</span><span class="o">-</span><span class="mo">03</span><span class="o">-</span><span class="mi">14</span><span class="nl">T12:</span><span class="mo">05</span><span class="o">:</span><span class="mi">59</span><span class="n">Z</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">descriptor</span> <span class="n">content</span><span class="o">=[</span><span class="n">Descriptor</span> <span class="n">one</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">amount</span> <span class="n">content</span><span class="o">=[</span><span class="mi">100</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">currency</span> <span class="n">content</span><span class="o">=[</span><span class="n">USD</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">sent_to_acquirer</span> <span class="n">content</span><span class="o">=[</span><span class="kc">true</span><span class="o">]&gt;</span>
<span class="o">]&gt;</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="p">{</span>
    <span class="nl">transaction_type</span><span class="p">:</span> <span class="s2">"p24"</span><span class="p">,</span>
    <span class="nx">status</span><span class="p">:</span> <span class="s2">"error"</span><span class="p">,</span>
    <span class="nx">mode</span><span class="p">:</span> <span class="s2">"live"</span><span class="p">,</span>
    <span class="nx">transaction_id</span><span class="p">:</span> <span class="s2">"43671"</span><span class="p">,</span>
    <span class="nx">unique_id</span><span class="p">:</span> <span class="s2">"44177a21403427eb96664a6d7e5d5d48"</span><span class="p">,</span>
    <span class="nx">code</span><span class="p">:</span> <span class="s2">"110"</span><span class="p">,</span>
    <span class="nx">message</span><span class="p">:</span> <span class="s2">"Something went wrong, please contact support!"</span><span class="p">,</span>
    <span class="nx">timestamp</span><span class="p">:</span> <span class="s2">"2019-03-14T12:05:59Z"</span><span class="p">,</span>
    <span class="nx">descriptor</span><span class="p">:</span> <span class="s2">"Descriptor one"</span><span class="p">,</span>
    <span class="nx">amount</span><span class="p">:</span> <span class="s2">"100"</span><span class="p">,</span>
    <span class="nx">currency</span><span class="p">:</span> <span class="s2">"USD"</span><span class="p">,</span>
    <span class="nx">sent_to_acquirer</span><span class="p">:</span> <span class="s2">"true"</span><span class="p">,</span>
<span class="p">}</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;p24&lt;/transaction_type&gt;
  &lt;status&gt;error&lt;/status&gt;
  &lt;mode&gt;live&lt;/mode&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;code&gt;110&lt;/code&gt;
  &lt;message&gt;Something went wrong, please contact support!&lt;/message&gt;
  &lt;timestamp&gt;2019-03-14T12:05:59Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
  &lt;sent_to_acquirer&gt;true&lt;/sent_to_acquirer&gt;
&lt;/payment_transaction&gt;
</code></pre>

<p><strong>Error Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>The transaction type</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>transaction_id</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>unique_id</td>
<td>string(32)</td>
<td>Unique id defined by gate (must later be used if capturing, voiding or refunding a transaction)</td>
</tr>
<tr>
<td>code</td>
<td>integer</td>
<td>Error code according to <a href="#error-code-table">Error code table</a></td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
<tr>
<td>message</td>
<td>string(255)</td>
<td>Human readable error message which can be displayed to users.</td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when the transaction was processed in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Combined date and time</a> e.g. 2007-08- 30T17:46:11Z</td>
</tr>
<tr>
<td>descriptor</td>
<td>string</td>
<td>Static descriptor MID info as configured on the gateway</td>
</tr>
<tr>
<td>amount</td>
<td>integer</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>sent_to_acquirer</td>
<td>string</td>
<td>&quot;true&quot; or &quot;false&quot;</td>
</tr>
</tbody></table>
<h3 id='payu'>PayU</h3>
<aside class="notice" >
PayU is a payment method for Czech Republic and Poland
</aside>

<blockquote>
<p>Request</p>
</blockquote>

<pre class="highlight php tab-php"><code>This request is not implemented yet
</code></pre>

<pre class="highlight java tab-java"><code><span class="n">This</span> <span class="n">request</span> <span class="n">is</span> <span class="n">not</span> <span class="n">implemented</span> <span class="n">yet</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>curl https://username:password@gate.emerchantpay.net/process/TERMINAL-TOKEN <span class="se">\</span>
   -H <span class="s2">"Content-Type: text/xml"</span> <span class="se">\</span>
   -d <span class="s1">'
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;payu&lt;/transaction_type&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;usage&gt;40208 concert tickets&lt;/usage&gt;
  &lt;remote_ip&gt;245.253.2.12&lt;/remote_ip&gt;
  &lt;return_success_url&gt;http://www.example.com/success&lt;/return_success_url&gt;
  &lt;return_failure_url&gt;http://www.example.com/failure&lt;/return_failure_url&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;PLN&lt;/currency&gt;
  &lt;customer_email&gt;travis@example.com&lt;/customer_email&gt;
  &lt;billing_address&gt;
    &lt;first_name&gt;Barney&lt;/first_name&gt;
    &lt;last_name&gt;Rubble&lt;/last_name&gt;
    &lt;address1&gt;14, Nerazdelni str&lt;/address1&gt;
    &lt;zip_code&gt;1407&lt;/zip_code&gt;
    &lt;city&gt;Krakov&lt;/city&gt;
    &lt;country&gt;PL&lt;/country&gt;
  &lt;/billing_address&gt;
  &lt;risk_params&gt;
    &lt;user_id&gt;123456&lt;/user_id&gt;
  &lt;/risk_params&gt;
&lt;/payment_transaction&gt;'</span>
</code></pre>

<p><strong>Request Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>required</td>
<td>string(255)</td>
<td>The transaction type: <strong>payu</strong></td>
</tr>
<tr>
<td>transaction_id</td>
<td>required</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>usage</td>
<td>optional</td>
<td>string(255)</td>
<td>Description of the transaction for later use</td>
</tr>
<tr>
<td>remote_ip</td>
<td>required*</td>
<td>IPv4 address</td>
<td>IPv4 address of customer</td>
</tr>
<tr>
<td>return_success_url</td>
<td>required</td>
<td>url</td>
<td>URL where customer is sent to after successful payment</td>
</tr>
<tr>
<td>return_failure_url</td>
<td>required</td>
<td>url</td>
<td>URL where customer is sent to after unsuccessful payment</td>
</tr>
<tr>
<td>amount</td>
<td>required</td>
<td>integer &gt; 0</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>required</td>
<td>string(3)</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>customer_email</td>
<td>optional</td>
<td>e-mail address</td>
<td>Must contain valid e-mail of customer</td>
</tr>
<tr>
<td><strong>billing_address</strong></td>
<td>required</td>
<td></td>
<td>See <a href="#required-vs-optional-api-params">Required vs Optional API params</a> for details</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;first_name</td>
<td>required</td>
<td>string(255)</td>
<td>Customer first name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;last_name</td>
<td>required</td>
<td>string(255)</td>
<td>Customer last name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address1</td>
<td>required*</td>
<td>string(255)</td>
<td>Primary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address2</td>
<td>required*</td>
<td>string(255)</td>
<td>Secondary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;zip_code</td>
<td>required*</td>
<td>string</td>
<td>ZIP code</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;city</td>
<td>required*</td>
<td>string(255)</td>
<td>City</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;state</td>
<td>required*</td>
<td>string(2)</td>
<td>State code in <a href="https://en.wikipedia.org/wiki/ISO_3166-2">ISO 3166-2</a>, required for USA and Canada</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;country</td>
<td>required</td>
<td>string(2)</td>
<td>Country code in <a href="https://www.iso.org/iso-3166-country-codes.html">ISO 3166</a></td>
</tr>
<tr>
<td><strong>shipping_address</strong></td>
<td>optional</td>
<td></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;first_name</td>
<td>optional</td>
<td>string(255)</td>
<td>Customer first name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;last_name</td>
<td>optional</td>
<td>string(255)</td>
<td>Customer last name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address1</td>
<td>optional</td>
<td>string(255)</td>
<td>Primary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address2</td>
<td>optional</td>
<td>string(255)</td>
<td>Secondary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;zip_code</td>
<td>optional</td>
<td>string</td>
<td>ZIP code</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;city</td>
<td>optional</td>
<td>string(255)</td>
<td>City</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;state</td>
<td>optional</td>
<td>string(2)</td>
<td>State code in <a href="https://en.wikipedia.org/wiki/ISO_3166-2">ISO 3166-2</a>, required for USA and Canada</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;country</td>
<td>optional</td>
<td>string(2)</td>
<td>Country code in <a href="https://www.iso.org/iso-3166-country-codes.html">ISO 3166</a></td>
</tr>
</tbody></table>

<p><code>required* = conditionally required</code></p>

<p><strong>Supported currencies and countries:</strong></p>

<table><thead>
<tr>
<th>Currency code</th>
<th>Country code</th>
</tr>
</thead><tbody>
<tr>
<td>CZK</td>
<td>CZ</td>
</tr>
<tr>
<td>PLN</td>
<td>PL</td>
</tr>
</tbody></table>

<blockquote>
<p>Successful Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>This request is not implemented yet
</code></pre>

<pre class="highlight java tab-java"><code><span class="n">This</span> <span class="n">request</span> <span class="n">is</span> <span class="n">not</span> <span class="n">implemented</span> <span class="n">yet</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;payu&lt;/transaction_type&gt;
  &lt;status&gt;pending_async&lt;/status&gt;
  &lt;mode&gt;live&lt;/mode&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;technical_message&gt;Transaction successful!&lt;/technical_message&gt;
  &lt;message&gt;Transaction successful!&lt;/message&gt;
  &lt;redirect_url&gt;https://gate.emerchantpay.net/redirect/to_acquirer/649e1ff35c61&lt;/redirect_url&gt;
  &lt;timestamp&gt;2019-03-14T12:05:59Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;PLN&lt;/currency&gt;
  &lt;sent_to_acquirer&gt;true&lt;/sent_to_acquirer&gt;
&lt;/payment_transaction&gt;
</code></pre>

<p><strong>Successful Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>The transaction type</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>transaction_id</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>unique_id</td>
<td>string(32)</td>
<td>Unique id defined by gate (must later be used if capturing, voiding or refunding a transaction)</td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
<tr>
<td>message</td>
<td>string(255)</td>
<td>Human readable error message which can be displayed to users.</td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>redirect_url</td>
<td>url</td>
<td>URL where user has to be redirected to complete payment process. It is available for asynchronous mode</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when the transaction was processed in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Combined date and time</a> e.g. 2007-08- 30T17:46:11Z</td>
</tr>
<tr>
<td>descriptor</td>
<td>string</td>
<td>Static descriptor MID info as configured on the gateway</td>
</tr>
<tr>
<td>amount</td>
<td>integer</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>sent_to_acquirer</td>
<td>string</td>
<td>&quot;true&quot; or &quot;false&quot;</td>
</tr>
</tbody></table>

<blockquote>
<p>Error Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>This request is not implemented yet
</code></pre>

<pre class="highlight java tab-java"><code><span class="n">This</span> <span class="n">request</span> <span class="n">is</span> <span class="n">not</span> <span class="n">implemented</span> <span class="n">yet</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;payu&lt;/transaction_type&gt;
  &lt;status&gt;error&lt;/status&gt;
  &lt;mode&gt;live&lt;/mode&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;code&gt;110&lt;/code&gt;
  &lt;message&gt;Something went wrong, please contact support!&lt;/message&gt;
  &lt;timestamp&gt;2019-03-14T12:05:59Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;PLN&lt;/currency&gt;
  &lt;sent_to_acquirer&gt;true&lt;/sent_to_acquirer&gt;
&lt;/payment_transaction&gt;
</code></pre>

<p><strong>Error Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>The transaction type</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>transaction_id</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>unique_id</td>
<td>string(32)</td>
<td>Unique id defined by gate (must later be used if capturing, voiding or refunding a transaction)</td>
</tr>
<tr>
<td>code</td>
<td>integer</td>
<td>Error code according to <a href="#error-code-table">Error code table</a></td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
<tr>
<td>message</td>
<td>string(255)</td>
<td>Human readable error message which can be displayed to users.</td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when the transaction was processed in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Combined date and time</a> e.g. 2007-08- 30T17:46:11Z</td>
</tr>
<tr>
<td>descriptor</td>
<td>string</td>
<td>Static descriptor MID info as configured on the gateway</td>
</tr>
<tr>
<td>amount</td>
<td>integer</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>sent_to_acquirer</td>
<td>string</td>
<td>&quot;true&quot; or &quot;false&quot;</td>
</tr>
</tbody></table>
<h3 id='poli'>POLi</h3>
<aside class="notice" >
POLi is Australia’s most popular online real time debit payment system. They process in excess of 1 billion dollars per year in payments and are trusted by a variety of Australia’s most respected companies. POLi is available within Australia and New Zealand.

POLi’s transactions are only asynchronous. After a successful validation of transaction parameters transaction status is set to pending async the user is redirected to POLi authentication page where he enters additional information to finish the payment. When the payment reached a final state Genesis gateway sends notification to merchant on the configured url into its account.
</aside>

<blockquote>
<p>Request</p>
</blockquote>

<pre class="highlight php tab-php"><code><span class="cp">&lt;?php</span>

<span class="c1">// Load the pre-configured ini file...
</span><span class="nx">\Genesis\Config</span><span class="o">::</span><span class="na">loadSettings</span><span class="p">(</span><span class="s1">'/path/to/config.ini'</span><span class="p">);</span>

<span class="nv">$genesis</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Genesis</span><span class="p">(</span><span class="s1">'Financial\Alternatives\POLi'</span><span class="p">);</span>
<span class="nv">$request</span> <span class="o">=</span> <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">request</span><span class="p">();</span>

<span class="nv">$request</span>
  <span class="o">-&gt;</span><span class="na">setTransactionId</span><span class="p">(</span><span class="s1">'43671'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setUsage</span><span class="p">(</span><span class="s1">'40208 concert tickets'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setRemoteIp</span><span class="p">(</span><span class="s1">'245.253.2.12'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setNotificationUrl</span><span class="p">(</span><span class="s1">'https://www.example.com/notification'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setReturnSuccessUrl</span><span class="p">(</span><span class="s1">'http://www.example.com/success'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setReturnFailureUrl</span><span class="p">(</span><span class="s1">'http://www.example.com/failure'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setAmount</span><span class="p">(</span><span class="s1">'100'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCurrency</span><span class="p">(</span><span class="s1">'AUD'</span><span class="p">)</span>


  <span class="c1">// Billing Address
</span>  <span class="o">-&gt;</span><span class="na">setBillingFirstName</span><span class="p">(</span><span class="s1">'Barney'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingLastName</span><span class="p">(</span><span class="s1">'Rubble'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingAddress1</span><span class="p">(</span><span class="s1">'14, Nerazdelni str'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingZipCode</span><span class="p">(</span><span class="s1">'1407'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingCity</span><span class="p">(</span><span class="s1">'Sofia'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingCountry</span><span class="p">(</span><span class="s1">'AU'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingState</span><span class="p">(</span><span class="s1">'AC'</span><span class="p">);</span>

<span class="k">try</span> <span class="p">{</span>
    <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">execute</span><span class="p">();</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">response</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">getResponseObject</span><span class="p">();</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">\Exception</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$e</span><span class="o">-&gt;</span><span class="na">getMessage</span><span class="p">();</span>
<span class="p">}</span>
</code></pre>

<pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.GenesisClient</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.TransactionResult</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.constants.Endpoints</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.constants.Environments</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.requests.financial.apm.POLiRequest</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.model.Transaction</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Configuration</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Country</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Currency</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.math.BigDecimal</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.MalformedURLException</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.URL</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">GenesisExample</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">MalformedURLException</span> <span class="o">{</span>

    <span class="c1">// Create configuration</span>
    <span class="n">Configuration</span> <span class="n">configuration</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Configuration</span><span class="o">(</span><span class="n">Environments</span><span class="o">.</span><span class="na">STAGING</span><span class="o">,</span> <span class="n">Endpoints</span><span class="o">.</span><span class="na">EMERCHANTPAY</span><span class="o">);</span>

    <span class="n">configuration</span><span class="o">.</span><span class="na">setUsername</span><span class="o">(</span><span class="s">"SET_YOUR_USERNAME"</span><span class="o">);</span>
    <span class="n">configuration</span><span class="o">.</span><span class="na">setPassword</span><span class="o">(</span><span class="s">"SET_YOUR_PASSWORD"</span><span class="o">);</span>
    <span class="n">configuration</span><span class="o">.</span><span class="na">setToken</span><span class="o">(</span><span class="s">"SET_YOUR_TOKEN"</span><span class="o">);</span>

    <span class="n">POLiRequest</span> <span class="n">request</span> <span class="o">=</span> <span class="k">new</span> <span class="n">POLiRequest</span><span class="o">();</span>

    <span class="n">request</span><span class="o">.</span><span class="na">setTransactionId</span><span class="o">(</span><span class="s">"43671"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setUsage</span><span class="o">(</span><span class="s">"40208 concert tickets"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setRemoteIp</span><span class="o">(</span><span class="s">"245.253.2.12"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setNotificationUrl</span><span class="o">(</span><span class="k">new</span> <span class="n">URL</span><span class="o">(</span><span class="s">"https://www.example.com/notification"</span><span class="o">));</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setReturnSuccessUrl</span><span class="o">(</span><span class="k">new</span> <span class="n">URL</span><span class="o">(</span><span class="s">"http://www.example.com/success"</span><span class="o">));</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setReturnFailureUrl</span><span class="o">(</span><span class="k">new</span> <span class="n">URL</span><span class="o">(</span><span class="s">"http://www.example.com/failure"</span><span class="o">));</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setAmount</span><span class="o">(</span><span class="k">new</span> <span class="n">BigDecimal</span><span class="o">(</span><span class="mi">100</span><span class="o">));</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCurrency</span><span class="o">(</span><span class="s">"AUD"</span><span class="o">);</span>


    <span class="c1">// Billing Address</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingFirstname</span><span class="o">(</span><span class="s">"Barney"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingLastname</span><span class="o">(</span><span class="s">"Rubble"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingPrimaryAddress</span><span class="o">(</span><span class="s">"14, Nerazdelni str"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingZipCode</span><span class="o">(</span><span class="s">"1407"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingCity</span><span class="o">(</span><span class="s">"Sofia"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingCountry</span><span class="o">(</span><span class="s">"AU"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingState</span><span class="o">(</span><span class="s">"AC"</span><span class="o">);</span>

    <span class="n">GenesisClient</span> <span class="n">client</span> <span class="o">=</span> <span class="k">new</span> <span class="n">GenesisClient</span><span class="o">(</span><span class="n">configuration</span><span class="o">,</span> <span class="n">request</span><span class="o">);</span>
    <span class="n">client</span><span class="o">.</span><span class="na">execute</span><span class="o">();</span>

    <span class="c1">// Parse Payment result</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">client</span><span class="o">.</span><span class="na">getResponse</span><span class="o">());</span>

  <span class="o">}</span>
<span class="o">}</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="kd">var</span> <span class="nx">genesis</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'genesis.js/lib/genesis.js'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">transaction</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">genesis</span><span class="p">.</span><span class="nx">transaction</span><span class="p">();</span>

<span class="kd">var</span> <span class="nx">failure</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">reason</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">reason</span><span class="p">);</span>
<span class="p">};</span>

<span class="kd">var</span> <span class="nx">success</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>

<span class="nx">transaction</span><span class="p">.</span><span class="nx">poli</span><span class="p">(</span>
  <span class="p">{</span>
    <span class="s2">"transaction_id"</span><span class="p">:</span> <span class="s2">"43671"</span><span class="p">,</span>
    <span class="s2">"usage"</span><span class="p">:</span> <span class="s2">"40208 concert tickets"</span><span class="p">,</span>
    <span class="s2">"remote_ip"</span><span class="p">:</span> <span class="s2">"245.253.2.12"</span><span class="p">,</span>
    <span class="s2">"notification_url"</span><span class="p">:</span> <span class="s2">"https://www.example.com/notification"</span><span class="p">,</span>
    <span class="s2">"return_success_url"</span><span class="p">:</span> <span class="s2">"http://www.example.com/success"</span><span class="p">,</span>
    <span class="s2">"return_failure_url"</span><span class="p">:</span> <span class="s2">"http://www.example.com/failure"</span><span class="p">,</span>
    <span class="s2">"amount"</span><span class="p">:</span> <span class="s2">"100"</span><span class="p">,</span>
    <span class="s2">"currency"</span><span class="p">:</span> <span class="s2">"AUD"</span><span class="p">,</span>
    <span class="s2">"billing_address"</span><span class="p">:</span> <span class="p">{</span>
      <span class="s2">"first_name"</span><span class="p">:</span> <span class="s2">"Barney"</span><span class="p">,</span>
      <span class="s2">"last_name"</span><span class="p">:</span> <span class="s2">"Rubble"</span><span class="p">,</span>
      <span class="s2">"address1"</span><span class="p">:</span> <span class="s2">"14, Nerazdelni str"</span><span class="p">,</span>
      <span class="s2">"zip_code"</span><span class="p">:</span> <span class="s2">"1407"</span><span class="p">,</span>
      <span class="s2">"city"</span><span class="p">:</span> <span class="s2">"Sofia"</span><span class="p">,</span>
      <span class="s2">"country"</span><span class="p">:</span> <span class="s2">"AU"</span><span class="p">,</span>
      <span class="s2">"state"</span><span class="p">:</span> <span class="s2">"AC"</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">).</span><span class="nx">send</span><span class="p">()</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">success</span><span class="p">)</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">failure</span><span class="p">);</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>curl https://username:password@gate.emerchantpay.net/process/TERMINAL-TOKEN <span class="se">\</span>
   -H <span class="s2">"Content-Type: text/xml"</span> <span class="se">\</span>
   -d <span class="s1">'
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;poli&lt;/transaction_type&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;usage&gt;40208 concert tickets&lt;/usage&gt;
  &lt;remote_ip&gt;245.253.2.12&lt;/remote_ip&gt;
  &lt;notification_url&gt;https://www.example.com/notification&lt;/notification_url&gt;
  &lt;return_success_url&gt;http://www.example.com/success&lt;/return_success_url&gt;
  &lt;return_failure_url&gt;http://www.example.com/failure&lt;/return_failure_url&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;AUD&lt;/currency&gt;
  &lt;billing_address&gt;
    &lt;first_name&gt;Barney&lt;/first_name&gt;
    &lt;last_name&gt;Rubble&lt;/last_name&gt;
    &lt;address1&gt;14, Nerazdelni str&lt;/address1&gt;
    &lt;zip_code&gt;1407&lt;/zip_code&gt;
    &lt;city&gt;Sofia&lt;/city&gt;
    &lt;country&gt;AU&lt;/country&gt;
    &lt;state&gt;AC&lt;/state&gt;
  &lt;/billing_address&gt;
&lt;/payment_transaction&gt;'</span>
</code></pre>

<p><strong>Request Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>required</td>
<td>string(255)</td>
<td>The transaction type: <strong>poli</strong></td>
</tr>
<tr>
<td>transaction_id</td>
<td>required</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>usage</td>
<td>optional</td>
<td>string(255)</td>
<td>Description of the transaction for later use</td>
</tr>
<tr>
<td>remote_ip</td>
<td>required</td>
<td>IPv4 address</td>
<td>IPv4 address of customer</td>
</tr>
<tr>
<td>return_success_url</td>
<td>required</td>
<td>url</td>
<td>URL where customer is sent to after successful payment</td>
</tr>
<tr>
<td>return_failure_url</td>
<td>required</td>
<td>url</td>
<td>URL where customer is sent to after unsuccessful payment</td>
</tr>
<tr>
<td>amount</td>
<td>required</td>
<td>integer &gt; 0</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>required</td>
<td>string(3)</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>customer_email</td>
<td>required</td>
<td>e-mail address</td>
<td>Must contain valid e-mail of customer</td>
</tr>
<tr>
<td>customer_phone</td>
<td>required*</td>
<td>string(32)</td>
<td>Must contain valid phone number of customer</td>
</tr>
<tr>
<td><strong>billing_address</strong></td>
<td>required</td>
<td></td>
<td>See <a href="#required-vs-optional-api-params">Required vs Optional API params</a> for details</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;first_name</td>
<td>required*</td>
<td>string(255)</td>
<td>Customer first name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;last_name</td>
<td>required*</td>
<td>string(255)</td>
<td>Customer last name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address1</td>
<td>required*</td>
<td>string(255)</td>
<td>Primary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address2</td>
<td>required*</td>
<td>string(255)</td>
<td>Secondary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;zip_code</td>
<td>required*</td>
<td>string</td>
<td>ZIP code</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;city</td>
<td>required*</td>
<td>string(255)</td>
<td>City</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;state</td>
<td>required*</td>
<td>string(2)</td>
<td>State code in <a href="https://en.wikipedia.org/wiki/ISO_3166-2">ISO 3166-2</a>, required for USA and Canada</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;country</td>
<td>required</td>
<td>string(2)</td>
<td>Country code in <a href="https://www.iso.org/iso-3166-country-codes.html">ISO 3166</a></td>
</tr>
<tr>
<td><strong>shipping_address</strong></td>
<td>optional</td>
<td></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;first_name</td>
<td>optional</td>
<td>string(255)</td>
<td>Customer first name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;last_name</td>
<td>optional</td>
<td>string(255)</td>
<td>Customer last name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address1</td>
<td>optional</td>
<td>string(255)</td>
<td>Primary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address2</td>
<td>optional</td>
<td>string(255)</td>
<td>Secondary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;zip_code</td>
<td>optional</td>
<td>string</td>
<td>ZIP code</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;city</td>
<td>optional</td>
<td>string(255)</td>
<td>City</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;state</td>
<td>optional</td>
<td>string(2)</td>
<td>State code in <a href="https://en.wikipedia.org/wiki/ISO_3166-2">ISO 3166-2</a>, required for USA and Canada</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;country</td>
<td>optional</td>
<td>string(2)</td>
<td>Country code in <a href="https://www.iso.org/iso-3166-country-codes.html">ISO 3166</a></td>
</tr>
</tbody></table>

<p><code>required* = conditionally required</code></p>

<p><strong>Supported bank countries:</strong></p>

<table><thead>
<tr>
<th>Country name</th>
<th>Country code</th>
</tr>
</thead><tbody>
<tr>
<td>Australia</td>
<td>AU</td>
</tr>
<tr>
<td>New Zealand</td>
<td>NZ</td>
</tr>
</tbody></table>

<p><strong>Supported currencies:</strong></p>

<table><thead>
<tr>
<th>Currency name</th>
<th>Currency code</th>
</tr>
</thead><tbody>
<tr>
<td>Australian dollar</td>
<td>AUD</td>
</tr>
<tr>
<td>New Zealand dollar</td>
<td>NZD</td>
</tr>
</tbody></table>

<blockquote>
<p>Successful Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>stdClass Object
(
    [transaction_type] =&gt; poli
    [status] =&gt; pending_async
    [mode] =&gt; live
    [transaction_id] =&gt; 43671
    [unique_id] =&gt; 44177a21403427eb96664a6d7e5d5d48
    [technical_message] =&gt; Transaction successful!
    [message] =&gt; Transaction successful!
    [redirect_url] =&gt; https://gate.emerchantpay.net/redirect/to_acquirer/649e1ff35c61
    [timestamp] =&gt; DateTime Object
        (
            [date] =&gt; 2019-03-14 12:05:59.000000
            [timezone_type] =&gt; 2
            [timezone] =&gt; Z
        )
    [descriptor] =&gt; Descriptor one
    [amount] =&gt; 100
    [currency] =&gt; AUD
    [sent_to_acquirer] =&gt; true
)
</code></pre>

<pre class="highlight java tab-java"><code><span class="o">&lt;</span><span class="n">payment_response</span> <span class="n">content</span><span class="o">=[</span>
    <span class="o">&lt;</span><span class="n">transaction_type</span> <span class="n">content</span><span class="o">=[</span><span class="n">poli</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">status</span> <span class="n">content</span><span class="o">=[</span><span class="n">pending_async</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">mode</span> <span class="n">content</span><span class="o">=[</span><span class="n">live</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">transaction_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">43671</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">unique_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">44177</span><span class="n">a21403427eb96664a6d7e5d5d48</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">technical_message</span> <span class="n">content</span><span class="o">=[</span><span class="n">Transaction</span> <span class="n">successful</span><span class="o">!]&gt;</span>
    <span class="o">&lt;</span><span class="n">message</span> <span class="n">content</span><span class="o">=[</span><span class="n">Transaction</span> <span class="n">successful</span><span class="o">!]&gt;</span>
    <span class="o">&lt;</span><span class="n">redirect_url</span> <span class="n">content</span><span class="o">=[</span><span class="nl">https:</span><span class="c1">//gate.emerchantpay.net/redirect/to_acquirer/649e1ff35c61]&gt;</span>
    <span class="o">&lt;</span><span class="n">timestamp</span> <span class="n">content</span><span class="o">=[</span><span class="mi">2019</span><span class="o">-</span><span class="mo">03</span><span class="o">-</span><span class="mi">14</span><span class="nl">T12:</span><span class="mo">05</span><span class="o">:</span><span class="mi">59</span><span class="n">Z</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">descriptor</span> <span class="n">content</span><span class="o">=[</span><span class="n">Descriptor</span> <span class="n">one</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">amount</span> <span class="n">content</span><span class="o">=[</span><span class="mi">100</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">currency</span> <span class="n">content</span><span class="o">=[</span><span class="n">AUD</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">sent_to_acquirer</span> <span class="n">content</span><span class="o">=[</span><span class="kc">true</span><span class="o">]&gt;</span>
<span class="o">]&gt;</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="p">{</span>
    <span class="nl">transaction_type</span><span class="p">:</span> <span class="s2">"poli"</span><span class="p">,</span>
    <span class="nx">status</span><span class="p">:</span> <span class="s2">"pending_async"</span><span class="p">,</span>
    <span class="nx">mode</span><span class="p">:</span> <span class="s2">"live"</span><span class="p">,</span>
    <span class="nx">transaction_id</span><span class="p">:</span> <span class="s2">"43671"</span><span class="p">,</span>
    <span class="nx">unique_id</span><span class="p">:</span> <span class="s2">"44177a21403427eb96664a6d7e5d5d48"</span><span class="p">,</span>
    <span class="nx">technical_message</span><span class="p">:</span> <span class="s2">"Transaction successful!"</span><span class="p">,</span>
    <span class="nx">message</span><span class="p">:</span> <span class="s2">"Transaction successful!"</span><span class="p">,</span>
    <span class="nx">redirect_url</span><span class="p">:</span> <span class="s2">"https://gate.emerchantpay.net/redirect/to_acquirer/649e1ff35c61"</span><span class="p">,</span>
    <span class="nx">timestamp</span><span class="p">:</span> <span class="s2">"2019-03-14T12:05:59Z"</span><span class="p">,</span>
    <span class="nx">descriptor</span><span class="p">:</span> <span class="s2">"Descriptor one"</span><span class="p">,</span>
    <span class="nx">amount</span><span class="p">:</span> <span class="s2">"100"</span><span class="p">,</span>
    <span class="nx">currency</span><span class="p">:</span> <span class="s2">"AUD"</span><span class="p">,</span>
    <span class="nx">sent_to_acquirer</span><span class="p">:</span> <span class="s2">"true"</span><span class="p">,</span>
<span class="p">}</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;poli&lt;/transaction_type&gt;
  &lt;status&gt;pending_async&lt;/status&gt;
  &lt;mode&gt;live&lt;/mode&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;technical_message&gt;Transaction successful!&lt;/technical_message&gt;
  &lt;message&gt;Transaction successful!&lt;/message&gt;
  &lt;redirect_url&gt;https://gate.emerchantpay.net/redirect/to_acquirer/649e1ff35c61&lt;/redirect_url&gt;
  &lt;timestamp&gt;2019-03-14T12:05:59Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;AUD&lt;/currency&gt;
  &lt;sent_to_acquirer&gt;true&lt;/sent_to_acquirer&gt;
&lt;/payment_transaction&gt;
</code></pre>

<p><strong>Successful Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>The transaction type</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>transaction_id</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>unique_id</td>
<td>string(32)</td>
<td>Unique id defined by gate (must later be used if capturing, voiding or refunding a transaction)</td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
<tr>
<td>message</td>
<td>string(255)</td>
<td>Human readable error message which can be displayed to users.</td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>redirect_url</td>
<td>url</td>
<td>URL where user has to be redirected to complete payment process. It is available for asynchronous mode</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when the transaction was processed in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Combined date and time</a> e.g. 2007-08- 30T17:46:11Z</td>
</tr>
<tr>
<td>descriptor</td>
<td>string</td>
<td>Static descriptor MID info as configured on the gateway</td>
</tr>
<tr>
<td>amount</td>
<td>integer</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>sent_to_acquirer</td>
<td>string</td>
<td>&quot;true&quot; or &quot;false&quot;</td>
</tr>
</tbody></table>

<blockquote>
<p>Error Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>stdClass Object
(
    [transaction_type] =&gt; poli
    [status] =&gt; error
    [mode] =&gt; live
    [transaction_id] =&gt; 43671
    [unique_id] =&gt; 44177a21403427eb96664a6d7e5d5d48
    [code] =&gt; 110
    [message] =&gt; Something went wrong, please contact support!
    [timestamp] =&gt; DateTime Object
        (
            [date] =&gt; 2019-03-14 12:05:59.000000
            [timezone_type] =&gt; 2
            [timezone] =&gt; Z
        )
    [descriptor] =&gt; Descriptor one
    [amount] =&gt; 100
    [currency] =&gt; AUD
    [sent_to_acquirer] =&gt; true
)
</code></pre>

<pre class="highlight java tab-java"><code><span class="o">&lt;</span><span class="n">payment_response</span> <span class="n">content</span><span class="o">=[</span>
    <span class="o">&lt;</span><span class="n">transaction_type</span> <span class="n">content</span><span class="o">=[</span><span class="n">poli</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">status</span> <span class="n">content</span><span class="o">=[</span><span class="n">error</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">mode</span> <span class="n">content</span><span class="o">=[</span><span class="n">live</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">transaction_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">43671</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">unique_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">44177</span><span class="n">a21403427eb96664a6d7e5d5d48</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">code</span> <span class="n">content</span><span class="o">=[</span><span class="mi">110</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">message</span> <span class="n">content</span><span class="o">=[</span><span class="n">Something</span> <span class="n">went</span> <span class="n">wrong</span><span class="o">,</span> <span class="n">please</span> <span class="n">contact</span> <span class="n">support</span><span class="o">!]&gt;</span>
    <span class="o">&lt;</span><span class="n">timestamp</span> <span class="n">content</span><span class="o">=[</span><span class="mi">2019</span><span class="o">-</span><span class="mo">03</span><span class="o">-</span><span class="mi">14</span><span class="nl">T12:</span><span class="mo">05</span><span class="o">:</span><span class="mi">59</span><span class="n">Z</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">descriptor</span> <span class="n">content</span><span class="o">=[</span><span class="n">Descriptor</span> <span class="n">one</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">amount</span> <span class="n">content</span><span class="o">=[</span><span class="mi">100</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">currency</span> <span class="n">content</span><span class="o">=[</span><span class="n">AUD</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">sent_to_acquirer</span> <span class="n">content</span><span class="o">=[</span><span class="kc">true</span><span class="o">]&gt;</span>
<span class="o">]&gt;</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="p">{</span>
    <span class="nl">transaction_type</span><span class="p">:</span> <span class="s2">"poli"</span><span class="p">,</span>
    <span class="nx">status</span><span class="p">:</span> <span class="s2">"error"</span><span class="p">,</span>
    <span class="nx">mode</span><span class="p">:</span> <span class="s2">"live"</span><span class="p">,</span>
    <span class="nx">transaction_id</span><span class="p">:</span> <span class="s2">"43671"</span><span class="p">,</span>
    <span class="nx">unique_id</span><span class="p">:</span> <span class="s2">"44177a21403427eb96664a6d7e5d5d48"</span><span class="p">,</span>
    <span class="nx">code</span><span class="p">:</span> <span class="s2">"110"</span><span class="p">,</span>
    <span class="nx">message</span><span class="p">:</span> <span class="s2">"Something went wrong, please contact support!"</span><span class="p">,</span>
    <span class="nx">timestamp</span><span class="p">:</span> <span class="s2">"2019-03-14T12:05:59Z"</span><span class="p">,</span>
    <span class="nx">descriptor</span><span class="p">:</span> <span class="s2">"Descriptor one"</span><span class="p">,</span>
    <span class="nx">amount</span><span class="p">:</span> <span class="s2">"100"</span><span class="p">,</span>
    <span class="nx">currency</span><span class="p">:</span> <span class="s2">"AUD"</span><span class="p">,</span>
    <span class="nx">sent_to_acquirer</span><span class="p">:</span> <span class="s2">"true"</span><span class="p">,</span>
<span class="p">}</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;poli&lt;/transaction_type&gt;
  &lt;status&gt;error&lt;/status&gt;
  &lt;mode&gt;live&lt;/mode&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;code&gt;110&lt;/code&gt;
  &lt;message&gt;Something went wrong, please contact support!&lt;/message&gt;
  &lt;timestamp&gt;2019-03-14T12:05:59Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;AUD&lt;/currency&gt;
  &lt;sent_to_acquirer&gt;true&lt;/sent_to_acquirer&gt;
&lt;/payment_transaction&gt;
</code></pre>

<p><strong>Error Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>The transaction type</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>transaction_id</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>unique_id</td>
<td>string(32)</td>
<td>Unique id defined by gate (must later be used if capturing, voiding or refunding a transaction)</td>
</tr>
<tr>
<td>code</td>
<td>integer</td>
<td>Error code according to <a href="#error-code-table">Error code table</a></td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
<tr>
<td>message</td>
<td>string(255)</td>
<td>Human readable error message which can be displayed to users.</td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when the transaction was processed in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Combined date and time</a> e.g. 2007-08- 30T17:46:11Z</td>
</tr>
<tr>
<td>descriptor</td>
<td>string</td>
<td>Static descriptor MID info as configured on the gateway</td>
</tr>
<tr>
<td>amount</td>
<td>integer</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>sent_to_acquirer</td>
<td>string</td>
<td>&quot;true&quot; or &quot;false&quot;</td>
</tr>
</tbody></table>
<h3 id='pse-pagos-seguros-en-linea'>PSE (Pagos Seguros en Linea)</h3>
<aside class="notice">
PSE (Pagos Seguros en Linea) is the preferred alternative payment solution in Colombia.The solution consists of an interface that offers the client the option to pay for their online purchases in cash, directing it to their online banking.
</aside>

<blockquote>
<p>Request</p>
</blockquote>

<pre class="highlight php tab-php"><code>This request is not implemented yet
</code></pre>

<pre class="highlight java tab-java"><code><span class="n">This</span> <span class="n">request</span> <span class="n">is</span> <span class="n">not</span> <span class="n">implemented</span> <span class="n">yet</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>curl https://username:password@gate.emerchantpay.net/process/TERMINAL-TOKEN <span class="se">\</span>
   -H <span class="s2">"Content-Type: text/xml"</span> <span class="se">\</span>
   -d <span class="s1">'
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;pse&lt;/transaction_type&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;usage&gt;40208 concert tickets&lt;/usage&gt;
  &lt;remote_ip&gt;245.253.2.12&lt;/remote_ip&gt;
  &lt;return_success_url&gt;http://www.example.com/success&lt;/return_success_url&gt;
  &lt;return_failure_url&gt;http://www.example.com/failure&lt;/return_failure_url&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
  &lt;consumer_reference&gt;barney_rumble&lt;/consumer_reference&gt;
  &lt;national_id&gt;8812128812&lt;/national_id&gt;
  &lt;birth_date&gt;30-12-1992&lt;/birth_date&gt;
  &lt;billing_address&gt;
    &lt;first_name&gt;Barney&lt;/first_name&gt;
    &lt;last_name&gt;Rubble&lt;/last_name&gt;
    &lt;address1&gt;14, Nerazdelni str&lt;/address1&gt;
    &lt;zip_code&gt;1407&lt;/zip_code&gt;
    &lt;city&gt;Bogota&lt;/city&gt;
    &lt;country&gt;CO&lt;/country&gt;
  &lt;/billing_address&gt;
  &lt;risk_params&gt;
    &lt;user_id&gt;123456&lt;/user_id&gt;
  &lt;/risk_params&gt;
&lt;/payment_transaction&gt;'</span>
</code></pre>

<p><strong>Request Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>required</td>
<td>string(255)</td>
<td>The transaction type: <strong>pse</strong></td>
</tr>
<tr>
<td>transaction_id</td>
<td>required</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>usage</td>
<td>optional</td>
<td>string(255)</td>
<td>Description of the transaction for later use</td>
</tr>
<tr>
<td>remote_ip</td>
<td>required*</td>
<td>IPv4 address</td>
<td>IPv4 address of customer</td>
</tr>
<tr>
<td>return_success_url</td>
<td>required</td>
<td>url</td>
<td>URL where customer is sent to after successful payment</td>
</tr>
<tr>
<td>return_failure_url</td>
<td>required</td>
<td>url</td>
<td>URL where customer is sent to after unsuccessful payment</td>
</tr>
<tr>
<td>amount</td>
<td>required</td>
<td>integer &gt; 0</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>required</td>
<td>string(3)</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>consumer_reference</td>
<td>required</td>
<td>string(20)</td>
<td>Consumer reference is a unique consumer identifier</td>
</tr>
<tr>
<td>national_id</td>
<td>required</td>
<td>string(20)</td>
<td>National Identifier number of the customer</td>
</tr>
<tr>
<td>birth_date</td>
<td>optional</td>
<td>dd-mm-yyyy</td>
<td>Required for Visa only when MCC is a Financial Services one (e.g. MCC 6012)</td>
</tr>
<tr>
<td><strong>billing_address</strong></td>
<td>required</td>
<td></td>
<td>See <a href="#required-vs-optional-api-params">Required vs Optional API params</a> for details</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;first_name</td>
<td>required*</td>
<td>string(255)</td>
<td>Customer first name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;last_name</td>
<td>required*</td>
<td>string(255)</td>
<td>Customer last name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address1</td>
<td>required*</td>
<td>string(255)</td>
<td>Primary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address2</td>
<td>required*</td>
<td>string(255)</td>
<td>Secondary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;zip_code</td>
<td>required*</td>
<td>string</td>
<td>ZIP code</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;city</td>
<td>required*</td>
<td>string(255)</td>
<td>City</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;state</td>
<td>required*</td>
<td>string(2)</td>
<td>State code in <a href="https://en.wikipedia.org/wiki/ISO_3166-2">ISO 3166-2</a>, required for USA and Canada</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;country</td>
<td>required</td>
<td>string(2)</td>
<td>Country code in <a href="https://www.iso.org/iso-3166-country-codes.html">ISO 3166</a></td>
</tr>
<tr>
<td><strong>shipping_address</strong></td>
<td>optional</td>
<td></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;first_name</td>
<td>optional</td>
<td>string(255)</td>
<td>Customer first name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;last_name</td>
<td>optional</td>
<td>string(255)</td>
<td>Customer last name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address1</td>
<td>optional</td>
<td>string(255)</td>
<td>Primary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address2</td>
<td>optional</td>
<td>string(255)</td>
<td>Secondary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;zip_code</td>
<td>optional</td>
<td>string</td>
<td>ZIP code</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;city</td>
<td>optional</td>
<td>string(255)</td>
<td>City</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;state</td>
<td>optional</td>
<td>string(2)</td>
<td>State code in <a href="https://en.wikipedia.org/wiki/ISO_3166-2">ISO 3166-2</a>, required for USA and Canada</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;country</td>
<td>optional</td>
<td>string(2)</td>
<td>Country code in <a href="https://www.iso.org/iso-3166-country-codes.html">ISO 3166</a></td>
</tr>
</tbody></table>

<p><code>required* = conditionally required</code></p>

<p><strong>Supported countries:</strong></p>

<table><thead>
<tr>
<th>Country</th>
</tr>
</thead><tbody>
<tr>
<td>CO</td>
</tr>
</tbody></table>

<blockquote>
<p>Successful Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>This request is not implemented yet
</code></pre>

<pre class="highlight java tab-java"><code><span class="n">This</span> <span class="n">request</span> <span class="n">is</span> <span class="n">not</span> <span class="n">implemented</span> <span class="n">yet</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;pse&lt;/transaction_type&gt;
  &lt;status&gt;pending_async&lt;/status&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;redirect_url&gt;https://gate.emerchantpay.net/redirect/to_acquirer/649e1ff35c61&lt;/redirect_url&gt;
  &lt;technical_message&gt;Transaction successful!&lt;/technical_message&gt;
  &lt;message&gt;Transaction successful!&lt;/message&gt;
  &lt;timestamp&gt;2019-03-14T12:05:59Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
  &lt;sent_to_acquirer&gt;true&lt;/sent_to_acquirer&gt;
&lt;/payment_transaction&gt;
</code></pre>

<p><strong>Successful Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>The transaction type</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>transaction_id</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>unique_id</td>
<td>string(32)</td>
<td>Unique id defined by gate (must later be used if capturing, voiding or refunding a transaction)</td>
</tr>
<tr>
<td>redirect_url</td>
<td>url</td>
<td>URL where user has to be redirected to complete payment process. It is available for asynchronous mode</td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
<tr>
<td>message</td>
<td>string(255)</td>
<td>Human readable error message which can be displayed to users.</td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when the transaction was processed in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Combined date and time</a> e.g. 2007-08- 30T17:46:11Z</td>
</tr>
<tr>
<td>descriptor</td>
<td>string</td>
<td>Static descriptor MID info as configured on the gateway</td>
</tr>
<tr>
<td>amount</td>
<td>integer</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>sent_to_acquirer</td>
<td>string</td>
<td>&quot;true&quot; or &quot;false&quot;</td>
</tr>
</tbody></table>

<blockquote>
<p>Error Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>This request is not implemented yet
</code></pre>

<pre class="highlight java tab-java"><code><span class="n">This</span> <span class="n">request</span> <span class="n">is</span> <span class="n">not</span> <span class="n">implemented</span> <span class="n">yet</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;pse&lt;/transaction_type&gt;
  &lt;status&gt;error&lt;/status&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;code&gt;110&lt;/code&gt;
  &lt;message&gt;Something went wrong, please contact support!&lt;/message&gt;
  &lt;timestamp&gt;2019-03-14T12:05:59Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
  &lt;sent_to_acquirer&gt;true&lt;/sent_to_acquirer&gt;
&lt;/payment_transaction&gt;
</code></pre>

<p><strong>Error Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>The transaction type</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>transaction_id</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>unique_id</td>
<td>string(32)</td>
<td>Unique id defined by gate (must later be used if capturing, voiding or refunding a transaction)</td>
</tr>
<tr>
<td>code</td>
<td>integer</td>
<td>Error code according to <a href="#error-code-table">Error code table</a></td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
<tr>
<td>message</td>
<td>string(255)</td>
<td>Human readable error message which can be displayed to users.</td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when the transaction was processed in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Combined date and time</a> e.g. 2007-08- 30T17:46:11Z</td>
</tr>
<tr>
<td>descriptor</td>
<td>string</td>
<td>Static descriptor MID info as configured on the gateway</td>
</tr>
<tr>
<td>amount</td>
<td>integer</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>sent_to_acquirer</td>
<td>string</td>
<td>&quot;true&quot; or &quot;false&quot;</td>
</tr>
</tbody></table>
<h3 id='qqpay'>QQPay</h3>
<aside class="notice">
QQPay is a payment method provider across China.
</aside>

<blockquote>
<p>Request</p>
</blockquote>

<pre class="highlight php tab-php"><code>This request is not implemented yet
</code></pre>

<pre class="highlight java tab-java"><code><span class="n">This</span> <span class="n">request</span> <span class="n">is</span> <span class="n">not</span> <span class="n">implemented</span> <span class="n">yet</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>curl https://username:password@gate.emerchantpay.net/process/TERMINAL-TOKEN <span class="se">\</span>
   -H <span class="s2">"Content-Type: text/xml"</span> <span class="se">\</span>
   -d <span class="s1">'
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;qqpay&lt;/transaction_type&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;usage&gt;40208 concert tickets&lt;/usage&gt;
  &lt;remote_ip&gt;245.253.2.12&lt;/remote_ip&gt;
  &lt;return_success_url&gt;http://www.example.com/success&lt;/return_success_url&gt;
  &lt;return_failure_url&gt;http://www.example.com/failure&lt;/return_failure_url&gt;
  &lt;amount&gt;1000&lt;/amount&gt;
  &lt;currency&gt;CNY&lt;/currency&gt;
  &lt;billing_address&gt;
    &lt;first_name&gt;Barney&lt;/first_name&gt;
    &lt;last_name&gt;Rubble&lt;/last_name&gt;
    &lt;address1&gt;14, Nerazdelni str&lt;/address1&gt;
    &lt;zip_code&gt;1407&lt;/zip_code&gt;
    &lt;city&gt;Buenos Aires&lt;/city&gt;
    &lt;country&gt;AR&lt;/country&gt;
  &lt;/billing_address&gt;
  &lt;risk_params&gt;
    &lt;user_id&gt;123456&lt;/user_id&gt;
  &lt;/risk_params&gt;
&lt;/payment_transaction&gt;'</span>
</code></pre>

<p><strong>Request Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>required</td>
<td>string(255)</td>
<td>The transaction type: <strong>qqpay</strong></td>
</tr>
<tr>
<td>transaction_id</td>
<td>required</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>usage</td>
<td>optional</td>
<td>string(255)</td>
<td>Description of the transaction for later use</td>
</tr>
<tr>
<td>remote_ip</td>
<td>required*</td>
<td>IPv4 address</td>
<td>IPv4 address of customer</td>
</tr>
<tr>
<td>return_success_url</td>
<td>required</td>
<td>url</td>
<td>URL where customer is sent to after successful payment</td>
</tr>
<tr>
<td>return_failure_url</td>
<td>required</td>
<td>url</td>
<td>URL where customer is sent to after unsuccessful payment</td>
</tr>
<tr>
<td>amount</td>
<td>required</td>
<td>integer &gt; 0</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>required</td>
<td>string(3)</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>customer_email</td>
<td>optional</td>
<td>e-mail address</td>
<td>Must contain valid e-mail of customer</td>
</tr>
<tr>
<td><strong>billing_address</strong></td>
<td>required</td>
<td></td>
<td>See <a href="#required-vs-optional-api-params">Required vs Optional API params</a> for details</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;first_name</td>
<td>required*</td>
<td>string(255)</td>
<td>Customer first name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;last_name</td>
<td>required*</td>
<td>string(255)</td>
<td>Customer last name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address1</td>
<td>required*</td>
<td>string(255)</td>
<td>Primary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address2</td>
<td>required*</td>
<td>string(255)</td>
<td>Secondary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;zip_code</td>
<td>required*</td>
<td>string</td>
<td>ZIP code</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;city</td>
<td>required*</td>
<td>string(255)</td>
<td>City</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;state</td>
<td>required*</td>
<td>string(2)</td>
<td>State code in <a href="https://en.wikipedia.org/wiki/ISO_3166-2">ISO 3166-2</a>, required for USA and Canada</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;country</td>
<td>required*</td>
<td>string(2)</td>
<td>Country code in <a href="https://www.iso.org/iso-3166-country-codes.html">ISO 3166</a></td>
</tr>
<tr>
<td><strong>shipping_address</strong></td>
<td>optional</td>
<td></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;first_name</td>
<td>optional</td>
<td>string(255)</td>
<td>Customer first name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;last_name</td>
<td>optional</td>
<td>string(255)</td>
<td>Customer last name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address1</td>
<td>optional</td>
<td>string(255)</td>
<td>Primary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address2</td>
<td>optional</td>
<td>string(255)</td>
<td>Secondary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;zip_code</td>
<td>optional</td>
<td>string</td>
<td>ZIP code</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;city</td>
<td>optional</td>
<td>string(255)</td>
<td>City</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;state</td>
<td>optional</td>
<td>string(2)</td>
<td>State code in <a href="https://en.wikipedia.org/wiki/ISO_3166-2">ISO 3166-2</a>, required for USA and Canada</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;country</td>
<td>optional</td>
<td>string(2)</td>
<td>Country code in <a href="https://www.iso.org/iso-3166-country-codes.html">ISO 3166</a></td>
</tr>
</tbody></table>

<p><code>required* = conditionally required</code></p>

<blockquote>
<p>Successful Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>This request is not implemented yet
</code></pre>

<pre class="highlight java tab-java"><code><span class="n">This</span> <span class="n">request</span> <span class="n">is</span> <span class="n">not</span> <span class="n">implemented</span> <span class="n">yet</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;qqpay&lt;/transaction_type&gt;
  &lt;status&gt;pending_async&lt;/status&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;redirect_url&gt;https://gate.emerchantpay.net/redirect/to_acquirer/649e1ff35c61&lt;/redirect_url&gt;
  &lt;technical_message&gt;Transaction successful!&lt;/technical_message&gt;
  &lt;message&gt;Transaction successful!&lt;/message&gt;
  &lt;timestamp&gt;2019-03-14T12:05:59Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;amount&gt;1000&lt;/amount&gt;
  &lt;currency&gt;CNY&lt;/currency&gt;
  &lt;sent_to_acquirer&gt;true&lt;/sent_to_acquirer&gt;
&lt;/payment_transaction&gt;
</code></pre>

<p><strong>Successful Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>The transaction type</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>transaction_id</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>unique_id</td>
<td>string(32)</td>
<td>Unique id defined by gate (must later be used if capturing, voiding or refunding a transaction)</td>
</tr>
<tr>
<td>redirect_url</td>
<td>url</td>
<td>URL where user has to be redirected to complete payment process. It is available for asynchronous mode</td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
<tr>
<td>message</td>
<td>string(255)</td>
<td>Human readable error message which can be displayed to users.</td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when the transaction was processed in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Combined date and time</a> e.g. 2007-08- 30T17:46:11Z</td>
</tr>
<tr>
<td>descriptor</td>
<td>string</td>
<td>Static descriptor MID info as configured on the gateway</td>
</tr>
<tr>
<td>amount</td>
<td>integer</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>sent_to_acquirer</td>
<td>string</td>
<td>&quot;true&quot; or &quot;false&quot;</td>
</tr>
</tbody></table>

<blockquote>
<p>Error Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>This request is not implemented yet
</code></pre>

<pre class="highlight java tab-java"><code><span class="n">This</span> <span class="n">request</span> <span class="n">is</span> <span class="n">not</span> <span class="n">implemented</span> <span class="n">yet</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;qqpay&lt;/transaction_type&gt;
  &lt;status&gt;error&lt;/status&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;code&gt;110&lt;/code&gt;
  &lt;message&gt;Something went wrong, please contact support!&lt;/message&gt;
  &lt;timestamp&gt;2019-03-14T12:05:59Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;amount&gt;1000&lt;/amount&gt;
  &lt;currency&gt;CNY&lt;/currency&gt;
  &lt;sent_to_acquirer&gt;true&lt;/sent_to_acquirer&gt;
&lt;/payment_transaction&gt;
</code></pre>

<p><strong>Error Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>The transaction type</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>transaction_id</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>unique_id</td>
<td>string(32)</td>
<td>Unique id defined by gate (must later be used if capturing, voiding or refunding a transaction)</td>
</tr>
<tr>
<td>code</td>
<td>integer</td>
<td>Error code according to <a href="#error-code-table">Error code table</a></td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
<tr>
<td>message</td>
<td>string(255)</td>
<td>Human readable error message which can be displayed to users.</td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when the transaction was processed in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Combined date and time</a> e.g. 2007-08- 30T17:46:11Z</td>
</tr>
<tr>
<td>descriptor</td>
<td>string</td>
<td>Static descriptor MID info as configured on the gateway</td>
</tr>
<tr>
<td>amount</td>
<td>integer</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>sent_to_acquirer</td>
<td>string</td>
<td>&quot;true&quot; or &quot;false&quot;</td>
</tr>
</tbody></table>
<h3 id='rapipago'>Rapipago</h3>
<aside class="notice">
Rapipago from Argentina is an offline payment method used for online purchases. Shoppers buy their goods and services online and pay offline at one of the 6,000+ Rapipago payment locations.
</aside>

<blockquote>
<p>Request</p>
</blockquote>

<pre class="highlight php tab-php"><code>This request is not implemented yet
</code></pre>

<pre class="highlight java tab-java"><code><span class="n">This</span> <span class="n">request</span> <span class="n">is</span> <span class="n">not</span> <span class="n">implemented</span> <span class="n">yet</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>curl https://username:password@gate.emerchantpay.net/process/TERMINAL-TOKEN <span class="se">\</span>
   -H <span class="s2">"Content-Type: text/xml"</span> <span class="se">\</span>
   -d <span class="s1">'
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;rapipago&lt;/transaction_type&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;usage&gt;40208 concert tickets&lt;/usage&gt;
  &lt;remote_ip&gt;245.253.2.12&lt;/remote_ip&gt;
  &lt;return_success_url&gt;http://www.example.com/success&lt;/return_success_url&gt;
  &lt;return_failure_url&gt;http://www.example.com/failure&lt;/return_failure_url&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
  &lt;consumer_reference&gt;barney_rumble&lt;/consumer_reference&gt;
  &lt;national_id&gt;8812128812&lt;/national_id&gt;
  &lt;birth_date&gt;30-12-1992&lt;/birth_date&gt;
  &lt;billing_address&gt;
    &lt;first_name&gt;Barney&lt;/first_name&gt;
    &lt;last_name&gt;Rubble&lt;/last_name&gt;
    &lt;address1&gt;14, Nerazdelni str&lt;/address1&gt;
    &lt;zip_code&gt;1407&lt;/zip_code&gt;
    &lt;city&gt;Buenos Aires&lt;/city&gt;
    &lt;country&gt;AR&lt;/country&gt;
  &lt;/billing_address&gt;
  &lt;risk_params&gt;
    &lt;user_id&gt;123456&lt;/user_id&gt;
  &lt;/risk_params&gt;
&lt;/payment_transaction&gt;'</span>
</code></pre>

<p><strong>Request Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>required</td>
<td>string(255)</td>
<td>The transaction type: <strong>rapipago</strong></td>
</tr>
<tr>
<td>transaction_id</td>
<td>required</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>usage</td>
<td>optional</td>
<td>string(255)</td>
<td>Description of the transaction for later use</td>
</tr>
<tr>
<td>remote_ip</td>
<td>required*</td>
<td>IPv4 address</td>
<td>IPv4 address of customer</td>
</tr>
<tr>
<td>return_success_url</td>
<td>required</td>
<td>url</td>
<td>URL where customer is sent to after successful payment</td>
</tr>
<tr>
<td>return_failure_url</td>
<td>required</td>
<td>url</td>
<td>URL where customer is sent to after unsuccessful payment</td>
</tr>
<tr>
<td>amount</td>
<td>required</td>
<td>integer &gt; 0</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>required</td>
<td>string(3)</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>consumer_reference</td>
<td>required</td>
<td>string(20)</td>
<td>Consumer reference is a unique consumer identifier</td>
</tr>
<tr>
<td>national_id</td>
<td>required</td>
<td>string(20)</td>
<td>National Identifier number of the customer</td>
</tr>
<tr>
<td>birth_date</td>
<td>optional</td>
<td>dd-mm-yyyy</td>
<td>Required for Visa only when MCC is a Financial Services one (e.g. MCC 6012)</td>
</tr>
<tr>
<td><strong>billing_address</strong></td>
<td>required</td>
<td></td>
<td>See <a href="#required-vs-optional-api-params">Required vs Optional API params</a> for details</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;first_name</td>
<td>required*</td>
<td>string(255)</td>
<td>Customer first name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;last_name</td>
<td>required*</td>
<td>string(255)</td>
<td>Customer last name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address1</td>
<td>required*</td>
<td>string(255)</td>
<td>Primary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address2</td>
<td>required*</td>
<td>string(255)</td>
<td>Secondary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;zip_code</td>
<td>required*</td>
<td>string</td>
<td>ZIP code</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;city</td>
<td>required*</td>
<td>string(255)</td>
<td>City</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;state</td>
<td>required*</td>
<td>string(2)</td>
<td>State code in <a href="https://en.wikipedia.org/wiki/ISO_3166-2">ISO 3166-2</a>, required for USA and Canada</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;country</td>
<td>required</td>
<td>string(2)</td>
<td>Country code in <a href="https://www.iso.org/iso-3166-country-codes.html">ISO 3166</a></td>
</tr>
<tr>
<td><strong>shipping_address</strong></td>
<td>optional</td>
<td></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;first_name</td>
<td>optional</td>
<td>string(255)</td>
<td>Customer first name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;last_name</td>
<td>optional</td>
<td>string(255)</td>
<td>Customer last name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address1</td>
<td>optional</td>
<td>string(255)</td>
<td>Primary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address2</td>
<td>optional</td>
<td>string(255)</td>
<td>Secondary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;zip_code</td>
<td>optional</td>
<td>string</td>
<td>ZIP code</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;city</td>
<td>optional</td>
<td>string(255)</td>
<td>City</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;state</td>
<td>optional</td>
<td>string(2)</td>
<td>State code in <a href="https://en.wikipedia.org/wiki/ISO_3166-2">ISO 3166-2</a>, required for USA and Canada</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;country</td>
<td>optional</td>
<td>string(2)</td>
<td>Country code in <a href="https://www.iso.org/iso-3166-country-codes.html">ISO 3166</a></td>
</tr>
</tbody></table>

<p><code>required* = conditionally required</code></p>

<p><strong>Supported countries:</strong></p>

<table><thead>
<tr>
<th>Country</th>
</tr>
</thead><tbody>
<tr>
<td>AR</td>
</tr>
</tbody></table>

<blockquote>
<p>Successful Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>This request is not implemented yet
</code></pre>

<pre class="highlight java tab-java"><code><span class="n">This</span> <span class="n">request</span> <span class="n">is</span> <span class="n">not</span> <span class="n">implemented</span> <span class="n">yet</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;rapipago&lt;/transaction_type&gt;
  &lt;status&gt;pending_async&lt;/status&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;redirect_url&gt;https://gate.emerchantpay.net/redirect/to_acquirer/649e1ff35c61&lt;/redirect_url&gt;
  &lt;technical_message&gt;Transaction successful!&lt;/technical_message&gt;
  &lt;message&gt;Transaction successful!&lt;/message&gt;
  &lt;timestamp&gt;2019-03-14T12:05:59Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
  &lt;sent_to_acquirer&gt;true&lt;/sent_to_acquirer&gt;
&lt;/payment_transaction&gt;
</code></pre>

<p><strong>Successful Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>The transaction type</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>transaction_id</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>unique_id</td>
<td>string(32)</td>
<td>Unique id defined by gate (must later be used if capturing, voiding or refunding a transaction)</td>
</tr>
<tr>
<td>redirect_url</td>
<td>url</td>
<td>URL where user has to be redirected to complete payment process. It is available for asynchronous mode</td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
<tr>
<td>message</td>
<td>string(255)</td>
<td>Human readable error message which can be displayed to users.</td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when the transaction was processed in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Combined date and time</a> e.g. 2007-08- 30T17:46:11Z</td>
</tr>
<tr>
<td>descriptor</td>
<td>string</td>
<td>Static descriptor MID info as configured on the gateway</td>
</tr>
<tr>
<td>amount</td>
<td>integer</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>sent_to_acquirer</td>
<td>string</td>
<td>&quot;true&quot; or &quot;false&quot;</td>
</tr>
</tbody></table>

<blockquote>
<p>Error Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>This request is not implemented yet
</code></pre>

<pre class="highlight java tab-java"><code><span class="n">This</span> <span class="n">request</span> <span class="n">is</span> <span class="n">not</span> <span class="n">implemented</span> <span class="n">yet</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;rapipago&lt;/transaction_type&gt;
  &lt;status&gt;error&lt;/status&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;code&gt;110&lt;/code&gt;
  &lt;message&gt;Something went wrong, please contact support!&lt;/message&gt;
  &lt;timestamp&gt;2019-03-14T12:05:59Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
  &lt;sent_to_acquirer&gt;true&lt;/sent_to_acquirer&gt;
&lt;/payment_transaction&gt;
</code></pre>

<p><strong>Error Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>The transaction type</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>transaction_id</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>unique_id</td>
<td>string(32)</td>
<td>Unique id defined by gate (must later be used if capturing, voiding or refunding a transaction)</td>
</tr>
<tr>
<td>code</td>
<td>integer</td>
<td>Error code according to <a href="#error-code-table">Error code table</a></td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
<tr>
<td>message</td>
<td>string(255)</td>
<td>Human readable error message which can be displayed to users.</td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when the transaction was processed in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Combined date and time</a> e.g. 2007-08- 30T17:46:11Z</td>
</tr>
<tr>
<td>descriptor</td>
<td>string</td>
<td>Static descriptor MID info as configured on the gateway</td>
</tr>
<tr>
<td>amount</td>
<td>integer</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>sent_to_acquirer</td>
<td>string</td>
<td>&quot;true&quot; or &quot;false&quot;</td>
</tr>
</tbody></table>
<h3 id='safetypay'>SafetyPay</h3>
<aside class="notice" >
Safetypay is a real-time bank transfer system that operates in more than 10 different countries. Their main market is in Latin America.
</aside>

<blockquote>
<p>Request</p>
</blockquote>

<pre class="highlight php tab-php"><code>This request is not implemented yet
</code></pre>

<pre class="highlight java tab-java"><code><span class="n">This</span> <span class="n">request</span> <span class="n">is</span> <span class="n">not</span> <span class="n">implemented</span> <span class="n">yet</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>curl https://username:password@gate.emerchantpay.net/process/TERMINAL-TOKEN <span class="se">\</span>
   -H <span class="s2">"Content-Type: text/xml"</span> <span class="se">\</span>
   -d <span class="s1">'
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;safetypay&lt;/transaction_type&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;payment_type&gt;safetypay&lt;/payment_type&gt;
  &lt;usage&gt;40208 concert tickets&lt;/usage&gt;
  &lt;remote_ip&gt;245.253.2.12&lt;/remote_ip&gt;
  &lt;return_success_url&gt;http://www.example.com/success&lt;/return_success_url&gt;
  &lt;return_failure_url&gt;http://www.example.com/failure&lt;/return_failure_url&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
  &lt;consumer_reference&gt;&lt;/consumer_reference&gt;
  &lt;national_id&gt;&lt;/national_id&gt;
  &lt;birth_date&gt;&lt;/birth_date&gt;
  &lt;customer_email&gt;travis@example.com&lt;/customer_email&gt;
  &lt;billing_address&gt;
    &lt;first_name&gt;Barney&lt;/first_name&gt;
    &lt;last_name&gt;Rubble&lt;/last_name&gt;
    &lt;address1&gt;14, Nerazdelni str&lt;/address1&gt;
    &lt;zip_code&gt;1407&lt;/zip_code&gt;
    &lt;city&gt;Tampico&lt;/city&gt;
    &lt;country&gt;MX&lt;/country&gt;
  &lt;/billing_address&gt;
  &lt;risk_params&gt;
    &lt;user_id&gt;123456&lt;/user_id&gt;
  &lt;/risk_params&gt;
&lt;/payment_transaction&gt;'</span>
</code></pre>

<blockquote>
<p>Request</p>
</blockquote>

<pre class="highlight php tab-php"><code><span class="cp">&lt;?php</span>

<span class="c1">// Load the pre-configured ini file...
</span><span class="nx">\Genesis\Config</span><span class="o">::</span><span class="na">loadSettings</span><span class="p">(</span><span class="s1">'/path/to/config.ini'</span><span class="p">);</span>

<span class="nv">$genesis</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Genesis</span><span class="p">(</span><span class="s1">'Financial\Alternatives\PPRO'</span><span class="p">);</span>
<span class="nv">$request</span> <span class="o">=</span> <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">request</span><span class="p">();</span>

<span class="nv">$request</span>
  <span class="o">-&gt;</span><span class="na">setTransactionId</span><span class="p">(</span><span class="s1">'43671'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setPaymentType</span><span class="p">(</span><span class="s1">'safetypay'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setUsage</span><span class="p">(</span><span class="s1">'40208 concert tickets'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setRemoteIp</span><span class="p">(</span><span class="s1">'245.253.2.12'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setReturnSuccessUrl</span><span class="p">(</span><span class="s1">'http://www.example.com/success'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setReturnFailureUrl</span><span class="p">(</span><span class="s1">'http://www.example.com/failure'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setAmount</span><span class="p">(</span><span class="s1">'100'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCurrency</span><span class="p">(</span><span class="s1">'USD'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setConsumerReference</span><span class="p">(</span><span class="s1">''</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setNationalId</span><span class="p">(</span><span class="s1">''</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBirthDate</span><span class="p">(</span><span class="s1">''</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCustomerEmail</span><span class="p">(</span><span class="s1">'travis@example.com'</span><span class="p">)</span>


  <span class="c1">// Billing Address
</span>  <span class="o">-&gt;</span><span class="na">setBillingFirstName</span><span class="p">(</span><span class="s1">'Barney'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingLastName</span><span class="p">(</span><span class="s1">'Rubble'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingAddress1</span><span class="p">(</span><span class="s1">'14, Nerazdelni str'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingZipCode</span><span class="p">(</span><span class="s1">'1407'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingCity</span><span class="p">(</span><span class="s1">'Tampico'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingCountry</span><span class="p">(</span><span class="s1">'MX'</span><span class="p">)</span>


  <span class="c1">// Risk Params
</span>  <span class="o">-&gt;</span><span class="na">setRiskUserId</span><span class="p">(</span><span class="s1">'123456'</span><span class="p">);</span>

<span class="k">try</span> <span class="p">{</span>
    <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">execute</span><span class="p">();</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">response</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">getResponseObject</span><span class="p">();</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">\Exception</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$e</span><span class="o">-&gt;</span><span class="na">getMessage</span><span class="p">();</span>
<span class="p">}</span>
</code></pre>

<pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.GenesisClient</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.TransactionResult</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.constants.Endpoints</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.constants.Environments</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.requests.financial.apm.PProRequest</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.model.Transaction</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Configuration</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Country</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Currency</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.math.BigDecimal</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.MalformedURLException</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.URL</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">GenesisExample</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">MalformedURLException</span> <span class="o">{</span>

    <span class="c1">// Create configuration</span>
    <span class="n">Configuration</span> <span class="n">configuration</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Configuration</span><span class="o">(</span><span class="n">Environments</span><span class="o">.</span><span class="na">STAGING</span><span class="o">,</span> <span class="n">Endpoints</span><span class="o">.</span><span class="na">EMERCHANTPAY</span><span class="o">);</span>

    <span class="n">configuration</span><span class="o">.</span><span class="na">setUsername</span><span class="o">(</span><span class="s">"SET_YOUR_USERNAME"</span><span class="o">);</span>
    <span class="n">configuration</span><span class="o">.</span><span class="na">setPassword</span><span class="o">(</span><span class="s">"SET_YOUR_PASSWORD"</span><span class="o">);</span>
    <span class="n">configuration</span><span class="o">.</span><span class="na">setToken</span><span class="o">(</span><span class="s">"SET_YOUR_TOKEN"</span><span class="o">);</span>

    <span class="n">PProRequest</span> <span class="n">request</span> <span class="o">=</span> <span class="k">new</span> <span class="n">PProRequest</span><span class="o">();</span>

    <span class="n">request</span><span class="o">.</span><span class="na">setTransactionId</span><span class="o">(</span><span class="s">"43671"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setPaymentType</span><span class="o">(</span><span class="s">"safetypay"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setUsage</span><span class="o">(</span><span class="s">"40208 concert tickets"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setRemoteIp</span><span class="o">(</span><span class="s">"245.253.2.12"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setReturnSuccessUrl</span><span class="o">(</span><span class="k">new</span> <span class="n">URL</span><span class="o">(</span><span class="s">"http://www.example.com/success"</span><span class="o">));</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setReturnFailureUrl</span><span class="o">(</span><span class="k">new</span> <span class="n">URL</span><span class="o">(</span><span class="s">"http://www.example.com/failure"</span><span class="o">));</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setAmount</span><span class="o">(</span><span class="k">new</span> <span class="n">BigDecimal</span><span class="o">(</span><span class="mi">100</span><span class="o">));</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCurrency</span><span class="o">(</span><span class="s">"USD"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setConsumerReference</span><span class="o">(</span><span class="s">""</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setNationalId</span><span class="o">(</span><span class="s">""</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBirthDate</span><span class="o">(</span><span class="s">""</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCustomerEmail</span><span class="o">(</span><span class="s">"travis@example.com"</span><span class="o">);</span>


    <span class="c1">// Billing Address</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingFirstname</span><span class="o">(</span><span class="s">"Barney"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingLastname</span><span class="o">(</span><span class="s">"Rubble"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingPrimaryAddress</span><span class="o">(</span><span class="s">"14, Nerazdelni str"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingZipCode</span><span class="o">(</span><span class="s">"1407"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingCity</span><span class="o">(</span><span class="s">"Tampico"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingCountry</span><span class="o">(</span><span class="s">"MX"</span><span class="o">);</span>


    <span class="c1">// Risk Params</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setRiskUserId</span><span class="o">(</span><span class="s">"123456"</span><span class="o">);</span>

    <span class="n">GenesisClient</span> <span class="n">client</span> <span class="o">=</span> <span class="k">new</span> <span class="n">GenesisClient</span><span class="o">(</span><span class="n">configuration</span><span class="o">,</span> <span class="n">request</span><span class="o">);</span>
    <span class="n">client</span><span class="o">.</span><span class="na">execute</span><span class="o">();</span>

    <span class="c1">// Parse Payment result</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">client</span><span class="o">.</span><span class="na">getResponse</span><span class="o">());</span>

  <span class="o">}</span>
<span class="o">}</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="kd">var</span> <span class="nx">genesis</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'genesis.js/lib/genesis.js'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">transaction</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">genesis</span><span class="p">.</span><span class="nx">transaction</span><span class="p">();</span>

<span class="kd">var</span> <span class="nx">failure</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">reason</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">reason</span><span class="p">);</span>
<span class="p">};</span>

<span class="kd">var</span> <span class="nx">success</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>

<span class="nx">transaction</span><span class="p">.</span><span class="nx">ppro</span><span class="p">(</span>
  <span class="p">{</span>
    <span class="s2">"transaction_id"</span><span class="p">:</span> <span class="s2">"43671"</span><span class="p">,</span>
    <span class="s2">"payment_type"</span><span class="p">:</span> <span class="s2">"safetypay"</span><span class="p">,</span>
    <span class="s2">"usage"</span><span class="p">:</span> <span class="s2">"40208 concert tickets"</span><span class="p">,</span>
    <span class="s2">"remote_ip"</span><span class="p">:</span> <span class="s2">"245.253.2.12"</span><span class="p">,</span>
    <span class="s2">"return_success_url"</span><span class="p">:</span> <span class="s2">"http://www.example.com/success"</span><span class="p">,</span>
    <span class="s2">"return_failure_url"</span><span class="p">:</span> <span class="s2">"http://www.example.com/failure"</span><span class="p">,</span>
    <span class="s2">"amount"</span><span class="p">:</span> <span class="s2">"100"</span><span class="p">,</span>
    <span class="s2">"currency"</span><span class="p">:</span> <span class="s2">"USD"</span><span class="p">,</span>
    <span class="s2">"consumer_reference"</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
    <span class="s2">"national_id"</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
    <span class="s2">"birth_date"</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
    <span class="s2">"customer_email"</span><span class="p">:</span> <span class="s2">"travis@example.com"</span><span class="p">,</span>
    <span class="s2">"billing_address"</span><span class="p">:</span> <span class="p">{</span>
      <span class="s2">"first_name"</span><span class="p">:</span> <span class="s2">"Barney"</span><span class="p">,</span>
      <span class="s2">"last_name"</span><span class="p">:</span> <span class="s2">"Rubble"</span><span class="p">,</span>
      <span class="s2">"address1"</span><span class="p">:</span> <span class="s2">"14, Nerazdelni str"</span><span class="p">,</span>
      <span class="s2">"zip_code"</span><span class="p">:</span> <span class="s2">"1407"</span><span class="p">,</span>
      <span class="s2">"city"</span><span class="p">:</span> <span class="s2">"Tampico"</span><span class="p">,</span>
      <span class="s2">"country"</span><span class="p">:</span> <span class="s2">"MX"</span>
    <span class="p">},</span>
    <span class="s2">"risk_params"</span><span class="p">:</span> <span class="p">{</span>
      <span class="s2">"user_id"</span><span class="p">:</span> <span class="s2">"123456"</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">).</span><span class="nx">send</span><span class="p">()</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">success</span><span class="p">)</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">failure</span><span class="p">);</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>curl https://username:password@gate.emerchantpay.net/process/TERMINAL-TOKEN <span class="se">\</span>
   -H <span class="s2">"Content-Type: text/xml"</span> <span class="se">\</span>
   -d <span class="s1">'
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;ppro&lt;/transaction_type&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;payment_type&gt;safetypay&lt;/payment_type&gt;
  &lt;usage&gt;40208 concert tickets&lt;/usage&gt;
  &lt;remote_ip&gt;245.253.2.12&lt;/remote_ip&gt;
  &lt;return_success_url&gt;http://www.example.com/success&lt;/return_success_url&gt;
  &lt;return_failure_url&gt;http://www.example.com/failure&lt;/return_failure_url&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
  &lt;consumer_reference&gt;&lt;/consumer_reference&gt;
  &lt;national_id&gt;&lt;/national_id&gt;
  &lt;birth_date&gt;&lt;/birth_date&gt;
  &lt;customer_email&gt;travis@example.com&lt;/customer_email&gt;
  &lt;billing_address&gt;
    &lt;first_name&gt;Barney&lt;/first_name&gt;
    &lt;last_name&gt;Rubble&lt;/last_name&gt;
    &lt;address1&gt;14, Nerazdelni str&lt;/address1&gt;
    &lt;zip_code&gt;1407&lt;/zip_code&gt;
    &lt;city&gt;Tampico&lt;/city&gt;
    &lt;country&gt;MX&lt;/country&gt;
  &lt;/billing_address&gt;
  &lt;risk_params&gt;
    &lt;user_id&gt;123456&lt;/user_id&gt;
  &lt;/risk_params&gt;
&lt;/payment_transaction&gt;'</span>
</code></pre>

<p><strong>Request Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>required</td>
<td>string(255)</td>
<td>Two types are supported - <strong>safetypay</strong> transaction type without <strong>payment_type</strong> and <strong>ppro</strong> transaction type with <strong>payment_type</strong>. Contact tech support at <a href="mailto:tech-support@emerchantpay.net">tech-support@emerchantpay.net</a> for more details.</td>
</tr>
<tr>
<td>transaction_id</td>
<td>required</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>payment_type</td>
<td>required<sup>1</sup></td>
<td>safetypay</td>
<td>SafetyPay. Contact tech support for more details</td>
</tr>
<tr>
<td>usage</td>
<td>optional</td>
<td>string(255)</td>
<td>Description of the transaction for later use</td>
</tr>
<tr>
<td>remote_ip</td>
<td>required*</td>
<td>IPv4 address</td>
<td>IPv4 address of customer</td>
</tr>
<tr>
<td>return_success_url</td>
<td>required</td>
<td>url</td>
<td>URL where customer is sent to after successful payment</td>
</tr>
<tr>
<td>return_failure_url</td>
<td>required</td>
<td>url</td>
<td>URL where customer is sent to after unsuccessful payment</td>
</tr>
<tr>
<td>amount</td>
<td>required</td>
<td>integer &gt; 0</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>required</td>
<td>string(3)</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>customer_email</td>
<td>required</td>
<td>e-mail address</td>
<td>Must contain valid e-mail of customer</td>
</tr>
<tr>
<td><strong>billing_address</strong></td>
<td>required</td>
<td></td>
<td>See <a href="#required-vs-optional-api-params">Required vs Optional API params</a> for details</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;first_name</td>
<td>required*</td>
<td>string(255)</td>
<td>Customer first name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;last_name</td>
<td>required*</td>
<td>string(255)</td>
<td>Customer last name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address1</td>
<td>required*</td>
<td>string(255)</td>
<td>Primary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address2</td>
<td>required*</td>
<td>string(255)</td>
<td>Secondary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;zip_code</td>
<td>required*</td>
<td>string</td>
<td>ZIP code</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;city</td>
<td>required*</td>
<td>string(255)</td>
<td>City</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;state</td>
<td>required*</td>
<td>string(2)</td>
<td>State code in <a href="https://en.wikipedia.org/wiki/ISO_3166-2">ISO 3166-2</a>, required for USA and Canada</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;country</td>
<td>required</td>
<td>string(2)</td>
<td>Country code in <a href="https://www.iso.org/iso-3166-country-codes.html">ISO 3166</a></td>
</tr>
<tr>
<td><strong>shipping_address</strong></td>
<td>optional</td>
<td></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;first_name</td>
<td>optional</td>
<td>string(255)</td>
<td>Customer first name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;last_name</td>
<td>optional</td>
<td>string(255)</td>
<td>Customer last name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address1</td>
<td>optional</td>
<td>string(255)</td>
<td>Primary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address2</td>
<td>optional</td>
<td>string(255)</td>
<td>Secondary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;zip_code</td>
<td>optional</td>
<td>string</td>
<td>ZIP code</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;city</td>
<td>optional</td>
<td>string(255)</td>
<td>City</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;state</td>
<td>optional</td>
<td>string(2)</td>
<td>State code in <a href="https://en.wikipedia.org/wiki/ISO_3166-2">ISO 3166-2</a>, required for USA and Canada</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;country</td>
<td>optional</td>
<td>string(2)</td>
<td>Country code in <a href="https://www.iso.org/iso-3166-country-codes.html">ISO 3166</a></td>
</tr>
</tbody></table>

<p><code>required* = conditionally required</code></p>

<p><code>1 - payment_type must be submitted only when the transaction type is set to ppro</code></p>

<p><strong>Supported countries:</strong></p>

<table><thead>
<tr>
<th>Country</th>
</tr>
</thead><tbody>
<tr>
<td>AT</td>
</tr>
<tr>
<td>BE</td>
</tr>
<tr>
<td>BR</td>
</tr>
<tr>
<td>CL</td>
</tr>
<tr>
<td>CO</td>
</tr>
<tr>
<td>CR</td>
</tr>
<tr>
<td>DE</td>
</tr>
<tr>
<td>EC</td>
</tr>
<tr>
<td>ES</td>
</tr>
<tr>
<td>MX</td>
</tr>
<tr>
<td>NL</td>
</tr>
<tr>
<td>PE</td>
</tr>
<tr>
<td>PR</td>
</tr>
</tbody></table>

<p><strong>Supported currencies:</strong></p>

<table><thead>
<tr>
<th>Currency Code</th>
</tr>
</thead><tbody>
<tr>
<td>EUR</td>
</tr>
<tr>
<td>USD</td>
</tr>
</tbody></table>

<blockquote>
<p>Successful Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>This request is not implemented yet
</code></pre>

<pre class="highlight java tab-java"><code><span class="n">This</span> <span class="n">request</span> <span class="n">is</span> <span class="n">not</span> <span class="n">implemented</span> <span class="n">yet</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;safetypay&lt;/transaction_type&gt;
  &lt;status&gt;pending_async&lt;/status&gt;
  &lt;mode&gt;live&lt;/mode&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;technical_message&gt;Transaction successful!&lt;/technical_message&gt;
  &lt;message&gt;Transaction successful!&lt;/message&gt;
  &lt;redirect_url&gt;https://gate.emerchantpay.net/redirect/to_acquirer/649e1ff35c61&lt;/redirect_url&gt;
  &lt;timestamp&gt;2019-03-14T12:05:59Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
  &lt;sent_to_acquirer&gt;true&lt;/sent_to_acquirer&gt;
&lt;/payment_transaction&gt;
</code></pre>

<blockquote>
<p>Successful Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>stdClass Object
(
    [transaction_type] =&gt; ppro
    [status] =&gt; pending_async
    [mode] =&gt; live
    [transaction_id] =&gt; 43671
    [unique_id] =&gt; 44177a21403427eb96664a6d7e5d5d48
    [technical_message] =&gt; Transaction successful!
    [message] =&gt; Transaction successful!
    [redirect_url] =&gt; https://gate.emerchantpay.net/redirect/to_acquirer/649e1ff35c61
    [timestamp] =&gt; DateTime Object
        (
            [date] =&gt; 2019-03-14 12:05:59.000000
            [timezone_type] =&gt; 2
            [timezone] =&gt; Z
        )
    [descriptor] =&gt; Descriptor one
    [amount] =&gt; 100
    [currency] =&gt; USD
    [sent_to_acquirer] =&gt; true
)
</code></pre>

<pre class="highlight java tab-java"><code><span class="o">&lt;</span><span class="n">payment_response</span> <span class="n">content</span><span class="o">=[</span>
    <span class="o">&lt;</span><span class="n">transaction_type</span> <span class="n">content</span><span class="o">=[</span><span class="n">ppro</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">status</span> <span class="n">content</span><span class="o">=[</span><span class="n">pending_async</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">mode</span> <span class="n">content</span><span class="o">=[</span><span class="n">live</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">transaction_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">43671</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">unique_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">44177</span><span class="n">a21403427eb96664a6d7e5d5d48</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">technical_message</span> <span class="n">content</span><span class="o">=[</span><span class="n">Transaction</span> <span class="n">successful</span><span class="o">!]&gt;</span>
    <span class="o">&lt;</span><span class="n">message</span> <span class="n">content</span><span class="o">=[</span><span class="n">Transaction</span> <span class="n">successful</span><span class="o">!]&gt;</span>
    <span class="o">&lt;</span><span class="n">redirect_url</span> <span class="n">content</span><span class="o">=[</span><span class="nl">https:</span><span class="c1">//gate.emerchantpay.net/redirect/to_acquirer/649e1ff35c61]&gt;</span>
    <span class="o">&lt;</span><span class="n">timestamp</span> <span class="n">content</span><span class="o">=[</span><span class="mi">2019</span><span class="o">-</span><span class="mo">03</span><span class="o">-</span><span class="mi">14</span><span class="nl">T12:</span><span class="mo">05</span><span class="o">:</span><span class="mi">59</span><span class="n">Z</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">descriptor</span> <span class="n">content</span><span class="o">=[</span><span class="n">Descriptor</span> <span class="n">one</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">amount</span> <span class="n">content</span><span class="o">=[</span><span class="mi">100</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">currency</span> <span class="n">content</span><span class="o">=[</span><span class="n">USD</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">sent_to_acquirer</span> <span class="n">content</span><span class="o">=[</span><span class="kc">true</span><span class="o">]&gt;</span>
<span class="o">]&gt;</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="p">{</span>
    <span class="nl">transaction_type</span><span class="p">:</span> <span class="s2">"ppro"</span><span class="p">,</span>
    <span class="nx">status</span><span class="p">:</span> <span class="s2">"pending_async"</span><span class="p">,</span>
    <span class="nx">mode</span><span class="p">:</span> <span class="s2">"live"</span><span class="p">,</span>
    <span class="nx">transaction_id</span><span class="p">:</span> <span class="s2">"43671"</span><span class="p">,</span>
    <span class="nx">unique_id</span><span class="p">:</span> <span class="s2">"44177a21403427eb96664a6d7e5d5d48"</span><span class="p">,</span>
    <span class="nx">technical_message</span><span class="p">:</span> <span class="s2">"Transaction successful!"</span><span class="p">,</span>
    <span class="nx">message</span><span class="p">:</span> <span class="s2">"Transaction successful!"</span><span class="p">,</span>
    <span class="nx">redirect_url</span><span class="p">:</span> <span class="s2">"https://gate.emerchantpay.net/redirect/to_acquirer/649e1ff35c61"</span><span class="p">,</span>
    <span class="nx">timestamp</span><span class="p">:</span> <span class="s2">"2019-03-14T12:05:59Z"</span><span class="p">,</span>
    <span class="nx">descriptor</span><span class="p">:</span> <span class="s2">"Descriptor one"</span><span class="p">,</span>
    <span class="nx">amount</span><span class="p">:</span> <span class="s2">"100"</span><span class="p">,</span>
    <span class="nx">currency</span><span class="p">:</span> <span class="s2">"USD"</span><span class="p">,</span>
    <span class="nx">sent_to_acquirer</span><span class="p">:</span> <span class="s2">"true"</span><span class="p">,</span>
<span class="p">}</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;ppro&lt;/transaction_type&gt;
  &lt;status&gt;pending_async&lt;/status&gt;
  &lt;mode&gt;live&lt;/mode&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;technical_message&gt;Transaction successful!&lt;/technical_message&gt;
  &lt;message&gt;Transaction successful!&lt;/message&gt;
  &lt;redirect_url&gt;https://gate.emerchantpay.net/redirect/to_acquirer/649e1ff35c61&lt;/redirect_url&gt;
  &lt;timestamp&gt;2019-03-14T12:05:59Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
  &lt;sent_to_acquirer&gt;true&lt;/sent_to_acquirer&gt;
&lt;/payment_transaction&gt;
</code></pre>

<p><strong>Successful Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>The transaction type</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>transaction_id</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>unique_id</td>
<td>string(32)</td>
<td>Unique id defined by gate (must later be used if capturing, voiding or refunding a transaction)</td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
<tr>
<td>message</td>
<td>string(255)</td>
<td>Human readable error message which can be displayed to users.</td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>redirect_url</td>
<td>url</td>
<td>URL where user has to be redirected to complete payment process. It is available for asynchronous mode</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when the transaction was processed in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Combined date and time</a> e.g. 2007-08- 30T17:46:11Z</td>
</tr>
<tr>
<td>descriptor</td>
<td>string</td>
<td>Static descriptor MID info as configured on the gateway</td>
</tr>
<tr>
<td>amount</td>
<td>integer</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>sent_to_acquirer</td>
<td>string</td>
<td>&quot;true&quot; or &quot;false&quot;</td>
</tr>
</tbody></table>

<blockquote>
<p>Error Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>This request is not implemented yet
</code></pre>

<pre class="highlight java tab-java"><code><span class="n">This</span> <span class="n">request</span> <span class="n">is</span> <span class="n">not</span> <span class="n">implemented</span> <span class="n">yet</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;ppro/safetypay&lt;/transaction_type&gt;
  &lt;status&gt;error&lt;/status&gt;
  &lt;mode&gt;live&lt;/mode&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;code&gt;110&lt;/code&gt;
  &lt;message&gt;Something went wrong, please contact support!&lt;/message&gt;
  &lt;timestamp&gt;2019-03-14T12:05:59Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
  &lt;sent_to_acquirer&gt;true&lt;/sent_to_acquirer&gt;
&lt;/payment_transaction&gt;
</code></pre>

<p><strong>Error Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>The transaction type</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>transaction_id</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>unique_id</td>
<td>string(32)</td>
<td>Unique id defined by gate (must later be used if capturing, voiding or refunding a transaction)</td>
</tr>
<tr>
<td>code</td>
<td>integer</td>
<td>Error code according to <a href="#error-code-table">Error code table</a></td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
<tr>
<td>message</td>
<td>string(255)</td>
<td>Human readable error message which can be displayed to users.</td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when the transaction was processed in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Combined date and time</a> e.g. 2007-08- 30T17:46:11Z</td>
</tr>
<tr>
<td>descriptor</td>
<td>string</td>
<td>Static descriptor MID info as configured on the gateway</td>
</tr>
<tr>
<td>amount</td>
<td>integer</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>sent_to_acquirer</td>
<td>string</td>
<td>&quot;true&quot; or &quot;false&quot;</td>
</tr>
</tbody></table>
<h3 id='santander'>Santander</h3>
<aside class="notice" >
  Santander is an online bank transfer for ecommerce purchases. Consumers use their trusted home banking environment, merchants benefit from payment guarantee and swift settlement.
</aside>

<blockquote>
<p>Request</p>
</blockquote>

<pre class="highlight php tab-php"><code>This request is not implemented yet
</code></pre>

<pre class="highlight java tab-java"><code><span class="n">This</span> <span class="n">request</span> <span class="n">is</span> <span class="n">not</span> <span class="n">implemented</span> <span class="n">yet</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>curl https://username:password@gate.emerchantpay.net/process/TERMINAL-TOKEN <span class="se">\</span>
   -H <span class="s2">"Content-Type: text/xml"</span> <span class="se">\</span>
   -d <span class="s1">'
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;santander&lt;/transaction_type&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;usage&gt;40208 concert tickets&lt;/usage&gt;
  &lt;remote_ip&gt;245.253.2.12&lt;/remote_ip&gt;
  &lt;return_success_url&gt;http://www.example.com/success&lt;/return_success_url&gt;
  &lt;return_failure_url&gt;http://www.example.com/failure&lt;/return_failure_url&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
  &lt;consumer_reference&gt;barney_rubble&lt;/consumer_reference&gt;
  &lt;national_id&gt;8812128812&lt;/national_id&gt;
  &lt;birth_date&gt;30-12-1992&lt;/birth_date&gt;
  &lt;customer_email&gt;travis@example.com&lt;/customer_email&gt;
  &lt;billing_address&gt;
    &lt;first_name&gt;Barney&lt;/first_name&gt;
    &lt;last_name&gt;Rubble&lt;/last_name&gt;
    &lt;address1&gt;14, Nerazdelni str&lt;/address1&gt;
    &lt;zip_code&gt;1407&lt;/zip_code&gt;
    &lt;city&gt;Rio de Janeiro&lt;/city&gt;
    &lt;country&gt;BR&lt;/country&gt;
  &lt;/billing_address&gt;
  &lt;risk_params&gt;
    &lt;user_id&gt;123456&lt;/user_id&gt;
  &lt;/risk_params&gt;
&lt;/payment_transaction&gt;'</span>
</code></pre>

<p><strong>Request Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>required</td>
<td>string(255)</td>
<td>The transaction type: <strong>santander</strong></td>
</tr>
<tr>
<td>transaction_id</td>
<td>required</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>usage</td>
<td>optional</td>
<td>string(255)</td>
<td>Description of the transaction for later use</td>
</tr>
<tr>
<td>remote_ip</td>
<td>required*</td>
<td>IPv4 address</td>
<td>IPv4 address of customer</td>
</tr>
<tr>
<td>return_success_url</td>
<td>required</td>
<td>url</td>
<td>URL where customer is sent to after successful payment</td>
</tr>
<tr>
<td>return_failure_url</td>
<td>required</td>
<td>url</td>
<td>URL where customer is sent to after unsuccessful payment</td>
</tr>
<tr>
<td>amount</td>
<td>required</td>
<td>integer &gt; 0</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>required</td>
<td>string(3)</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>consumer_reference</td>
<td>required</td>
<td>string(20)</td>
<td>Consumer reference is a unique consumer identifier</td>
</tr>
<tr>
<td>national_id</td>
<td>required</td>
<td>string(20)</td>
<td>National Identifier number of the customer</td>
</tr>
<tr>
<td>birth_date</td>
<td>optional</td>
<td>string(20)</td>
<td>Birth date of the customer</td>
</tr>
<tr>
<td>customer_email</td>
<td>required</td>
<td>e-mail address</td>
<td>Must contain valid e-mail of customer</td>
</tr>
<tr>
<td><strong>billing_address</strong></td>
<td>required</td>
<td></td>
<td>See <a href="#required-vs-optional-api-params">Required vs Optional API params</a> for details</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;first_name</td>
<td>required*</td>
<td>string(255)</td>
<td>Customer first name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;last_name</td>
<td>required*</td>
<td>string(255)</td>
<td>Customer last name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address1</td>
<td>required*</td>
<td>string(255)</td>
<td>Primary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address2</td>
<td>required*</td>
<td>string(255)</td>
<td>Secondary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;zip_code</td>
<td>required*</td>
<td>string</td>
<td>ZIP code</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;city</td>
<td>required*</td>
<td>string(255)</td>
<td>City</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;state</td>
<td>required*</td>
<td>string(2)</td>
<td>State code in <a href="https://en.wikipedia.org/wiki/ISO_3166-2">ISO 3166-2</a>, required for USA and Canada</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;country</td>
<td>required</td>
<td>string(2)</td>
<td>Country code in <a href="https://www.iso.org/iso-3166-country-codes.html">ISO 3166</a></td>
</tr>
<tr>
<td><strong>shipping_address</strong></td>
<td>optional</td>
<td></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;first_name</td>
<td>optional</td>
<td>string(255)</td>
<td>Customer first name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;last_name</td>
<td>optional</td>
<td>string(255)</td>
<td>Customer last name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address1</td>
<td>optional</td>
<td>string(255)</td>
<td>Primary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address2</td>
<td>optional</td>
<td>string(255)</td>
<td>Secondary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;zip_code</td>
<td>optional</td>
<td>string</td>
<td>ZIP code</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;city</td>
<td>optional</td>
<td>string(255)</td>
<td>City</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;state</td>
<td>optional</td>
<td>string(2)</td>
<td>State code in <a href="https://en.wikipedia.org/wiki/ISO_3166-2">ISO 3166-2</a>, required for USA and Canada</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;country</td>
<td>optional</td>
<td>string(2)</td>
<td>Country code in <a href="https://www.iso.org/iso-3166-country-codes.html">ISO 3166</a></td>
</tr>
</tbody></table>

<p><code>required* = conditionally required</code></p>

<p><strong>Supported countries:</strong></p>

<table><thead>
<tr>
<th>Country</th>
</tr>
</thead><tbody>
<tr>
<td>AR</td>
</tr>
<tr>
<td>BR</td>
</tr>
</tbody></table>

<blockquote>
<p>Successful Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>This request is not implemented yet
</code></pre>

<pre class="highlight java tab-java"><code><span class="n">This</span> <span class="n">request</span> <span class="n">is</span> <span class="n">not</span> <span class="n">implemented</span> <span class="n">yet</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;santander&lt;/transaction_type&gt;
  &lt;status&gt;pending_async&lt;/status&gt;
  &lt;mode&gt;live&lt;/mode&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;technical_message&gt;Transaction successful!&lt;/technical_message&gt;
  &lt;message&gt;Transaction successful!&lt;/message&gt;
  &lt;redirect_url&gt;https://gate.emerchantpay.net/redirect/to_acquirer/649e1ff35c61&lt;/redirect_url&gt;
  &lt;timestamp&gt;2019-03-14T12:05:59Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
  &lt;sent_to_acquirer&gt;true&lt;/sent_to_acquirer&gt;
&lt;/payment_transaction&gt;
</code></pre>

<p><strong>Successful Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>The transaction type</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>transaction_id</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>unique_id</td>
<td>string(32)</td>
<td>Unique id defined by gate (must later be used if capturing, voiding or refunding a transaction)</td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
<tr>
<td>message</td>
<td>string(255)</td>
<td>Human readable error message which can be displayed to users.</td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>redirect_url</td>
<td>url</td>
<td>URL where user has to be redirected to complete payment process. It is available for asynchronous mode</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when the transaction was processed in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Combined date and time</a> e.g. 2007-08- 30T17:46:11Z</td>
</tr>
<tr>
<td>descriptor</td>
<td>string</td>
<td>Static descriptor MID info as configured on the gateway</td>
</tr>
<tr>
<td>amount</td>
<td>integer</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>sent_to_acquirer</td>
<td>string</td>
<td>&quot;true&quot; or &quot;false&quot;</td>
</tr>
</tbody></table>

<blockquote>
<p>Error Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>This request is not implemented yet
</code></pre>

<pre class="highlight java tab-java"><code><span class="n">This</span> <span class="n">request</span> <span class="n">is</span> <span class="n">not</span> <span class="n">implemented</span> <span class="n">yet</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;santander&lt;/transaction_type&gt;
  &lt;status&gt;error&lt;/status&gt;
  &lt;mode&gt;live&lt;/mode&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;code&gt;110&lt;/code&gt;
  &lt;message&gt;Something went wrong, please contact support!&lt;/message&gt;
  &lt;timestamp&gt;2019-03-14T12:05:59Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
  &lt;sent_to_acquirer&gt;true&lt;/sent_to_acquirer&gt;
&lt;/payment_transaction&gt;
</code></pre>

<p><strong>Error Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>The transaction type</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>transaction_id</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>unique_id</td>
<td>string(32)</td>
<td>Unique id defined by gate (must later be used if capturing, voiding or refunding a transaction)</td>
</tr>
<tr>
<td>code</td>
<td>integer</td>
<td>Error code according to <a href="#error-code-table">Error code table</a></td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
<tr>
<td>message</td>
<td>string(255)</td>
<td>Human readable error message which can be displayed to users.</td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when the transaction was processed in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Combined date and time</a> e.g. 2007-08- 30T17:46:11Z</td>
</tr>
<tr>
<td>descriptor</td>
<td>string</td>
<td>Static descriptor MID info as configured on the gateway</td>
</tr>
<tr>
<td>amount</td>
<td>integer</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>sent_to_acquirer</td>
<td>string</td>
<td>&quot;true&quot; or &quot;false&quot;</td>
</tr>
</tbody></table>
<h3 id='sdd-init-recurring-sale'>SDD Init Recurring Sale</h3>
<p>An SddInitRecurringSale transaction initializes a recurring payment and is equal to a normal <a href="#sdd-sale">SddSaleTransaction</a> except that it can be referenced as ”initial” transaction in a SddRecurringSale transaction.</p>

<p>Note that if an SddInitRecurringSale is fully refunded, the recurring series is stopped and no more SddRecurringSales can be performed for that recurring series.</p>

<p>If a SddInitRecurringSale is partially refunded, the recurring series can continue with more SddRecurringSales.</p>

<aside class="notice">
Authorize transactions are also available as 3dsecure transactions
</aside>

<blockquote>
<p>Request</p>
</blockquote>

<pre class="highlight php tab-php"><code><span class="cp">&lt;?php</span>

<span class="c1">// Load the pre-configured ini file...
</span><span class="nx">\Genesis\Config</span><span class="o">::</span><span class="na">loadSettings</span><span class="p">(</span><span class="s1">'/path/to/config.ini'</span><span class="p">);</span>

<span class="nv">$genesis</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Genesis</span><span class="p">(</span><span class="s1">'Financial\SDD\Recurring\InitRecurringSale'</span><span class="p">);</span>
<span class="nv">$request</span> <span class="o">=</span> <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">request</span><span class="p">();</span>

<span class="nv">$request</span>
  <span class="o">-&gt;</span><span class="na">setTransactionId</span><span class="p">(</span><span class="s1">'43671'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setUsage</span><span class="p">(</span><span class="s1">'40208 concert tickets'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setRemoteIp</span><span class="p">(</span><span class="s1">'245.253.2.12'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setAmount</span><span class="p">(</span><span class="s1">'100'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCurrency</span><span class="p">(</span><span class="s1">'EUR'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setIban</span><span class="p">(</span><span class="s1">'DE09100100101234567891'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBic</span><span class="p">(</span><span class="s1">'PBNKDEFFXXX'</span><span class="p">)</span>


  <span class="c1">// Billing Address
</span>  <span class="o">-&gt;</span><span class="na">setBillingFirstName</span><span class="p">(</span><span class="s1">'Travis'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingLastName</span><span class="p">(</span><span class="s1">'Pastrana'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingCountry</span><span class="p">(</span><span class="s1">'DE'</span><span class="p">);</span>

<span class="k">try</span> <span class="p">{</span>
    <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">execute</span><span class="p">();</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">response</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">getResponseObject</span><span class="p">();</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">\Exception</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$e</span><span class="o">-&gt;</span><span class="na">getMessage</span><span class="p">();</span>
<span class="p">}</span>
</code></pre>

<pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.GenesisClient</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.TransactionResult</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.constants.Endpoints</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.constants.Environments</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.requests.financial.sdd.SDDInitRecurringSaleRequest</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.model.Transaction</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Configuration</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Country</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Currency</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.math.BigDecimal</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">GenesisExample</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">()</span>  <span class="o">{</span>

    <span class="c1">// Create configuration</span>
    <span class="n">Configuration</span> <span class="n">configuration</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Configuration</span><span class="o">(</span><span class="n">Environments</span><span class="o">.</span><span class="na">STAGING</span><span class="o">,</span> <span class="n">Endpoints</span><span class="o">.</span><span class="na">EMERCHANTPAY</span><span class="o">);</span>

    <span class="n">configuration</span><span class="o">.</span><span class="na">setUsername</span><span class="o">(</span><span class="s">"SET_YOUR_USERNAME"</span><span class="o">);</span>
    <span class="n">configuration</span><span class="o">.</span><span class="na">setPassword</span><span class="o">(</span><span class="s">"SET_YOUR_PASSWORD"</span><span class="o">);</span>
    <span class="n">configuration</span><span class="o">.</span><span class="na">setToken</span><span class="o">(</span><span class="s">"SET_YOUR_TOKEN"</span><span class="o">);</span>

    <span class="n">SDDInitRecurringSaleRequest</span> <span class="n">request</span> <span class="o">=</span> <span class="k">new</span> <span class="n">SDDInitRecurringSaleRequest</span><span class="o">();</span>

    <span class="n">request</span><span class="o">.</span><span class="na">setTransactionId</span><span class="o">(</span><span class="s">"43671"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setUsage</span><span class="o">(</span><span class="s">"40208 concert tickets"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setRemoteIp</span><span class="o">(</span><span class="s">"245.253.2.12"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setAmount</span><span class="o">(</span><span class="k">new</span> <span class="n">BigDecimal</span><span class="o">(</span><span class="mi">100</span><span class="o">));</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCurrency</span><span class="o">(</span><span class="s">"EUR"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setIban</span><span class="o">(</span><span class="s">"DE09100100101234567891"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBic</span><span class="o">(</span><span class="s">"PBNKDEFFXXX"</span><span class="o">);</span>


    <span class="c1">// Billing Address</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingFirstname</span><span class="o">(</span><span class="s">"Travis"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingLastname</span><span class="o">(</span><span class="s">"Pastrana"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingCountry</span><span class="o">(</span><span class="s">"DE"</span><span class="o">);</span>

    <span class="n">GenesisClient</span> <span class="n">client</span> <span class="o">=</span> <span class="k">new</span> <span class="n">GenesisClient</span><span class="o">(</span><span class="n">configuration</span><span class="o">,</span> <span class="n">request</span><span class="o">);</span>
    <span class="n">client</span><span class="o">.</span><span class="na">execute</span><span class="o">();</span>

    <span class="c1">// Parse Payment result</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">client</span><span class="o">.</span><span class="na">getResponse</span><span class="o">());</span>

  <span class="o">}</span>
<span class="o">}</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="kd">var</span> <span class="nx">genesis</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'genesis.js/lib/genesis.js'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">transaction</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">genesis</span><span class="p">.</span><span class="nx">transaction</span><span class="p">();</span>

<span class="kd">var</span> <span class="nx">failure</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">reason</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">reason</span><span class="p">);</span>
<span class="p">};</span>

<span class="kd">var</span> <span class="nx">success</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>

<span class="nx">transaction</span><span class="p">.</span><span class="nx">sdd_init_recurring_sale</span><span class="p">(</span>
  <span class="p">{</span>
    <span class="s2">"transaction_id"</span><span class="p">:</span> <span class="s2">"43671"</span><span class="p">,</span>
    <span class="s2">"usage"</span><span class="p">:</span> <span class="s2">"40208 concert tickets"</span><span class="p">,</span>
    <span class="s2">"remote_ip"</span><span class="p">:</span> <span class="s2">"245.253.2.12"</span><span class="p">,</span>
    <span class="s2">"amount"</span><span class="p">:</span> <span class="s2">"100"</span><span class="p">,</span>
    <span class="s2">"currency"</span><span class="p">:</span> <span class="s2">"EUR"</span><span class="p">,</span>
    <span class="s2">"iban"</span><span class="p">:</span> <span class="s2">"DE09100100101234567891"</span><span class="p">,</span>
    <span class="s2">"bic"</span><span class="p">:</span> <span class="s2">"PBNKDEFFXXX"</span><span class="p">,</span>
    <span class="s2">"billing_address"</span><span class="p">:</span> <span class="p">{</span>
      <span class="s2">"first_name"</span><span class="p">:</span> <span class="s2">"Travis"</span><span class="p">,</span>
      <span class="s2">"last_name"</span><span class="p">:</span> <span class="s2">"Pastrana"</span><span class="p">,</span>
      <span class="s2">"country"</span><span class="p">:</span> <span class="s2">"DE"</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">).</span><span class="nx">send</span><span class="p">()</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">success</span><span class="p">)</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">failure</span><span class="p">);</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>curl https://username:password@gate.emerchantpay.net/process/TERMINAL-TOKEN <span class="se">\</span>
   -H <span class="s2">"Content-Type: text/xml"</span> <span class="se">\</span>
   -d <span class="s1">'
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;sdd_init_recurring_sale&lt;/transaction_type&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;usage&gt;40208 concert tickets&lt;/usage&gt;
  &lt;remote_ip&gt;245.253.2.12&lt;/remote_ip&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;EUR&lt;/currency&gt;
  &lt;iban&gt;DE09100100101234567891&lt;/iban&gt;
  &lt;bic&gt;PBNKDEFFXXX&lt;/bic&gt;
  &lt;billing_address&gt;
    &lt;first_name&gt;Travis&lt;/first_name&gt;
    &lt;last_name&gt;Pastrana&lt;/last_name&gt;
    &lt;country&gt;DE&lt;/country&gt;
  &lt;/billing_address&gt;
&lt;/payment_transaction&gt;'</span>
</code></pre>

<p><strong>Request Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>required</td>
<td>string(255)</td>
<td>The transaction type: <strong>sdd_init_recurring_sale</strong></td>
</tr>
<tr>
<td>transaction_id</td>
<td>required</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>usage</td>
<td>required</td>
<td>string(255)</td>
<td>Description of the transaction for later use</td>
</tr>
<tr>
<td>remote_ip</td>
<td>required*</td>
<td>IPv4 address</td>
<td>IPv4 address of customer</td>
</tr>
<tr>
<td>amount</td>
<td>required</td>
<td>integer &gt; 0</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>required</td>
<td>string(3)</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>iban</td>
<td>required</td>
<td>string(34)</td>
<td>Customer’s IBAN number</td>
</tr>
<tr>
<td>bic</td>
<td>required</td>
<td>string(11)</td>
<td>SWIFT/BIC code of the customer’s bank</td>
</tr>
<tr>
<td>customer_email</td>
<td>required*</td>
<td>e-mail address</td>
<td>Must contain valid e-mail of customer</td>
</tr>
<tr>
<td>customer_phone</td>
<td>required*</td>
<td>string(32)</td>
<td>Must contain valid phone number of customer</td>
</tr>
<tr>
<td><strong>billing_address</strong></td>
<td>required</td>
<td></td>
<td>See <a href="#required-vs-optional-api-params">Required vs Optional API params</a> for details</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;first_name</td>
<td>required</td>
<td>string(255)</td>
<td>Customer first name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;last_name</td>
<td>required</td>
<td>string(255)</td>
<td>Customer last name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address1</td>
<td>required*</td>
<td>string(255)</td>
<td>Primary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address2</td>
<td>required*</td>
<td>string(255)</td>
<td>Secondary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;zip_code</td>
<td>required*</td>
<td>string</td>
<td>ZIP code</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;city</td>
<td>required*</td>
<td>string(255)</td>
<td>City</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;state</td>
<td>required*</td>
<td>string(2)</td>
<td>State code in <a href="https://en.wikipedia.org/wiki/ISO_3166-2">ISO 3166-2</a>, required for USA and Canada</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;country</td>
<td>required</td>
<td>string(2)</td>
<td>Country code in <a href="https://www.iso.org/iso-3166-country-codes.html">ISO 3166</a></td>
</tr>
<tr>
<td><strong>shipping_address</strong></td>
<td>optional</td>
<td></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;first_name</td>
<td>optional</td>
<td>string(255)</td>
<td>Customer first name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;last_name</td>
<td>optional</td>
<td>string(255)</td>
<td>Customer last name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address1</td>
<td>optional</td>
<td>string(255)</td>
<td>Primary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address2</td>
<td>optional</td>
<td>string(255)</td>
<td>Secondary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;zip_code</td>
<td>optional</td>
<td>string</td>
<td>ZIP code</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;city</td>
<td>optional</td>
<td>string(255)</td>
<td>City</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;state</td>
<td>optional</td>
<td>string(2)</td>
<td>State code in <a href="https://en.wikipedia.org/wiki/ISO_3166-2">ISO 3166-2</a>, required for USA and Canada</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;country</td>
<td>optional</td>
<td>string(2)</td>
<td>Country code in <a href="https://www.iso.org/iso-3166-country-codes.html">ISO 3166</a></td>
</tr>
</tbody></table>

<p><code>required* = conditionally required</code></p>

<p><strong>Supported countries:</strong></p>

<table><thead>
<tr>
<th>Country Name</th>
<th>Country Code</th>
</tr>
</thead><tbody>
<tr>
<td>Austria</td>
<td>AT</td>
</tr>
<tr>
<td>Belgium</td>
<td>BE</td>
</tr>
<tr>
<td>Cyprus</td>
<td>CY</td>
</tr>
<tr>
<td>Estonia</td>
<td>EE</td>
</tr>
<tr>
<td>Finland</td>
<td>FI</td>
</tr>
<tr>
<td>France</td>
<td>FR</td>
</tr>
<tr>
<td>Germany</td>
<td>DE</td>
</tr>
<tr>
<td>Greece</td>
<td>GR</td>
</tr>
<tr>
<td>Ireland</td>
<td>IE</td>
</tr>
<tr>
<td>Italy</td>
<td>IT</td>
</tr>
<tr>
<td>Latvia</td>
<td>LV</td>
</tr>
<tr>
<td>Lithuania</td>
<td>LT</td>
</tr>
<tr>
<td>Luxembourg</td>
<td>LU</td>
</tr>
<tr>
<td>Malta</td>
<td>MT</td>
</tr>
<tr>
<td>Monaco</td>
<td>MC</td>
</tr>
<tr>
<td>Netherlands</td>
<td>NL</td>
</tr>
<tr>
<td>Portugal</td>
<td>PT</td>
</tr>
<tr>
<td>Slovakia</td>
<td>SK</td>
</tr>
<tr>
<td>San Marino</td>
<td>SM</td>
</tr>
<tr>
<td>Slovenia</td>
<td>SI</td>
</tr>
<tr>
<td>Spain</td>
<td>ES</td>
</tr>
</tbody></table>

<blockquote>
<p>Successful Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>stdClass Object
(
    [transaction_type] =&gt; sdd_init_recurring_sale
    [status] =&gt; pending_async
    [mode] =&gt; live
    [transaction_id] =&gt; 43671
    [unique_id] =&gt; 44177a21403427eb96664a6d7e5d5d48
    [technical_message] =&gt; Transaction successful!
    [message] =&gt; Transaction successful!
    [timestamp] =&gt; DateTime Object
        (
            [date] =&gt; 2019-03-14 12:05:59.000000
            [timezone_type] =&gt; 2
            [timezone] =&gt; Z
        )
    [descriptor] =&gt; Descriptor one
    [amount] =&gt; 100
    [currency] =&gt; EUR
    [sent_to_acquirer] =&gt; true
)
</code></pre>

<pre class="highlight java tab-java"><code><span class="o">&lt;</span><span class="n">payment_response</span> <span class="n">content</span><span class="o">=[</span>
    <span class="o">&lt;</span><span class="n">transaction_type</span> <span class="n">content</span><span class="o">=[</span><span class="n">sdd_init_recurring_sale</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">status</span> <span class="n">content</span><span class="o">=[</span><span class="n">pending_async</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">mode</span> <span class="n">content</span><span class="o">=[</span><span class="n">live</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">transaction_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">43671</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">unique_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">44177</span><span class="n">a21403427eb96664a6d7e5d5d48</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">technical_message</span> <span class="n">content</span><span class="o">=[</span><span class="n">Transaction</span> <span class="n">successful</span><span class="o">!]&gt;</span>
    <span class="o">&lt;</span><span class="n">message</span> <span class="n">content</span><span class="o">=[</span><span class="n">Transaction</span> <span class="n">successful</span><span class="o">!]&gt;</span>
    <span class="o">&lt;</span><span class="n">timestamp</span> <span class="n">content</span><span class="o">=[</span><span class="mi">2019</span><span class="o">-</span><span class="mo">03</span><span class="o">-</span><span class="mi">14</span><span class="nl">T12:</span><span class="mo">05</span><span class="o">:</span><span class="mi">59</span><span class="n">Z</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">descriptor</span> <span class="n">content</span><span class="o">=[</span><span class="n">Descriptor</span> <span class="n">one</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">amount</span> <span class="n">content</span><span class="o">=[</span><span class="mi">100</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">currency</span> <span class="n">content</span><span class="o">=[</span><span class="n">EUR</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">sent_to_acquirer</span> <span class="n">content</span><span class="o">=[</span><span class="kc">true</span><span class="o">]&gt;</span>
<span class="o">]&gt;</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="p">{</span>
    <span class="nl">transaction_type</span><span class="p">:</span> <span class="s2">"sdd_init_recurring_sale"</span><span class="p">,</span>
    <span class="nx">status</span><span class="p">:</span> <span class="s2">"pending_async"</span><span class="p">,</span>
    <span class="nx">mode</span><span class="p">:</span> <span class="s2">"live"</span><span class="p">,</span>
    <span class="nx">transaction_id</span><span class="p">:</span> <span class="s2">"43671"</span><span class="p">,</span>
    <span class="nx">unique_id</span><span class="p">:</span> <span class="s2">"44177a21403427eb96664a6d7e5d5d48"</span><span class="p">,</span>
    <span class="nx">technical_message</span><span class="p">:</span> <span class="s2">"Transaction successful!"</span><span class="p">,</span>
    <span class="nx">message</span><span class="p">:</span> <span class="s2">"Transaction successful!"</span><span class="p">,</span>
    <span class="nx">timestamp</span><span class="p">:</span> <span class="s2">"2019-03-14T12:05:59Z"</span><span class="p">,</span>
    <span class="nx">descriptor</span><span class="p">:</span> <span class="s2">"Descriptor one"</span><span class="p">,</span>
    <span class="nx">amount</span><span class="p">:</span> <span class="s2">"100"</span><span class="p">,</span>
    <span class="nx">currency</span><span class="p">:</span> <span class="s2">"EUR"</span><span class="p">,</span>
    <span class="nx">sent_to_acquirer</span><span class="p">:</span> <span class="s2">"true"</span><span class="p">,</span>
<span class="p">}</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;sdd_init_recurring_sale&lt;/transaction_type&gt;
  &lt;status&gt;pending_async&lt;/status&gt;
  &lt;mode&gt;live&lt;/mode&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;technical_message&gt;Transaction successful!&lt;/technical_message&gt;
  &lt;message&gt;Transaction successful!&lt;/message&gt;
  &lt;timestamp&gt;2019-03-14T12:05:59Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;EUR&lt;/currency&gt;
  &lt;sent_to_acquirer&gt;true&lt;/sent_to_acquirer&gt;
&lt;/payment_transaction&gt;
</code></pre>

<p><strong>Successful Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>The transaction type</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>transaction_id</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>unique_id</td>
<td>string(32)</td>
<td>Unique id defined by gate (must later be used if capturing, voiding or refunding a transaction)</td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
<tr>
<td>message</td>
<td>string(255)</td>
<td>Human readable error message which can be displayed to users.</td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when the transaction was processed in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Combined date and time</a> e.g. 2007-08- 30T17:46:11Z</td>
</tr>
<tr>
<td>descriptor</td>
<td>string</td>
<td>Static descriptor MID info as configured on the gateway</td>
</tr>
<tr>
<td>amount</td>
<td>integer</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>sent_to_acquirer</td>
<td>string</td>
<td>&quot;true&quot; or &quot;false&quot;</td>
</tr>
</tbody></table>

<blockquote>
<p>Error Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>stdClass Object
(
    [transaction_type] =&gt; sdd_init_recurring_sale
    [status] =&gt; error
    [mode] =&gt; live
    [transaction_id] =&gt; 43671
    [unique_id] =&gt; 44177a21403427eb96664a6d7e5d5d48
    [code] =&gt; 110
    [message] =&gt; Please check input data for errors!
    [timestamp] =&gt; DateTime Object
        (
            [date] =&gt; 2019-03-14 12:05:59.000000
            [timezone_type] =&gt; 2
            [timezone] =&gt; Z
        )
    [descriptor] =&gt; Descriptor one
    [amount] =&gt; 100
    [currency] =&gt; EUR
    [sent_to_acquirer] =&gt; false
)
</code></pre>

<pre class="highlight java tab-java"><code><span class="o">&lt;</span><span class="n">payment_response</span> <span class="n">content</span><span class="o">=[</span>
    <span class="o">&lt;</span><span class="n">transaction_type</span> <span class="n">content</span><span class="o">=[</span><span class="n">sdd_init_recurring_sale</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">status</span> <span class="n">content</span><span class="o">=[</span><span class="n">error</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">mode</span> <span class="n">content</span><span class="o">=[</span><span class="n">live</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">transaction_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">43671</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">unique_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">44177</span><span class="n">a21403427eb96664a6d7e5d5d48</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">code</span> <span class="n">content</span><span class="o">=[</span><span class="mi">110</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">message</span> <span class="n">content</span><span class="o">=[</span><span class="n">Please</span> <span class="n">check</span> <span class="n">input</span> <span class="n">data</span> <span class="k">for</span> <span class="n">errors</span><span class="o">!]&gt;</span>
    <span class="o">&lt;</span><span class="n">timestamp</span> <span class="n">content</span><span class="o">=[</span><span class="mi">2019</span><span class="o">-</span><span class="mo">03</span><span class="o">-</span><span class="mi">14</span><span class="nl">T12:</span><span class="mo">05</span><span class="o">:</span><span class="mi">59</span><span class="n">Z</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">descriptor</span> <span class="n">content</span><span class="o">=[</span><span class="n">Descriptor</span> <span class="n">one</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">amount</span> <span class="n">content</span><span class="o">=[</span><span class="mi">100</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">currency</span> <span class="n">content</span><span class="o">=[</span><span class="n">EUR</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">sent_to_acquirer</span> <span class="n">content</span><span class="o">=[</span><span class="kc">false</span><span class="o">]&gt;</span>
<span class="o">]&gt;</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="p">{</span>
    <span class="nl">transaction_type</span><span class="p">:</span> <span class="s2">"sdd_init_recurring_sale"</span><span class="p">,</span>
    <span class="nx">status</span><span class="p">:</span> <span class="s2">"error"</span><span class="p">,</span>
    <span class="nx">mode</span><span class="p">:</span> <span class="s2">"live"</span><span class="p">,</span>
    <span class="nx">transaction_id</span><span class="p">:</span> <span class="s2">"43671"</span><span class="p">,</span>
    <span class="nx">unique_id</span><span class="p">:</span> <span class="s2">"44177a21403427eb96664a6d7e5d5d48"</span><span class="p">,</span>
    <span class="nx">code</span><span class="p">:</span> <span class="s2">"110"</span><span class="p">,</span>
    <span class="nx">message</span><span class="p">:</span> <span class="s2">"Please check input data for errors!"</span><span class="p">,</span>
    <span class="nx">timestamp</span><span class="p">:</span> <span class="s2">"2019-03-14T12:05:59Z"</span><span class="p">,</span>
    <span class="nx">descriptor</span><span class="p">:</span> <span class="s2">"Descriptor one"</span><span class="p">,</span>
    <span class="nx">amount</span><span class="p">:</span> <span class="s2">"100"</span><span class="p">,</span>
    <span class="nx">currency</span><span class="p">:</span> <span class="s2">"EUR"</span><span class="p">,</span>
    <span class="nx">sent_to_acquirer</span><span class="p">:</span> <span class="s2">"false"</span><span class="p">,</span>
<span class="p">}</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;sdd_init_recurring_sale&lt;/transaction_type&gt;
  &lt;status&gt;error&lt;/status&gt;
  &lt;mode&gt;live&lt;/mode&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;code&gt;110&lt;/code&gt;
  &lt;message&gt;Please check input data <span class="k">for </span>errors!&lt;/message&gt;
  &lt;timestamp&gt;2019-03-14T12:05:59Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;EUR&lt;/currency&gt;
  &lt;sent_to_acquirer&gt;false&lt;/sent_to_acquirer&gt;
&lt;/payment_transaction&gt;
</code></pre>

<p><strong>Error Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>The transaction type</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>transaction_id</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>unique_id</td>
<td>string(32)</td>
<td>Unique id defined by gate (must later be used if capturing, voiding or refunding a transaction)</td>
</tr>
<tr>
<td>code</td>
<td>integer</td>
<td>Error code according to <a href="#error-code-table">Error code table</a></td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
<tr>
<td>message</td>
<td>string(255)</td>
<td>Human readable error message which can be displayed to users.</td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when the transaction was processed in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Combined date and time</a> e.g. 2007-08- 30T17:46:11Z</td>
</tr>
<tr>
<td>descriptor</td>
<td>string</td>
<td>Static descriptor MID info as configured on the gateway</td>
</tr>
<tr>
<td>amount</td>
<td>integer</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>sent_to_acquirer</td>
<td>string</td>
<td>&quot;true&quot; or &quot;false&quot;</td>
</tr>
</tbody></table>
<h3 id='sdd-recurring-sale'>SDD Recurring Sale</h3>
<p>A SddRecurringSale transaction is a ”repeated” transaction which follows and references a <a href="#sdd-init-recurring-sale">SddInitRecurringSale</a> transaction.</p>

<p>The bank account data is omitted.</p>

<p>Note that SddRecurringSales can be partially or fully refunded if configuration allows it, and this will not stop the sdd recurring series.</p>

<blockquote>
<p>Request</p>
</blockquote>

<pre class="highlight php tab-php"><code><span class="cp">&lt;?php</span>

<span class="c1">// Load the pre-configured ini file...
</span><span class="nx">\Genesis\Config</span><span class="o">::</span><span class="na">loadSettings</span><span class="p">(</span><span class="s1">'/path/to/config.ini'</span><span class="p">);</span>

<span class="nv">$genesis</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Genesis</span><span class="p">(</span><span class="s1">'Financial\SDD\Recurring\RecurringSale'</span><span class="p">);</span>
<span class="nv">$request</span> <span class="o">=</span> <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">request</span><span class="p">();</span>

<span class="nv">$request</span>
  <span class="o">-&gt;</span><span class="na">setTransactionId</span><span class="p">(</span><span class="s1">'43671'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setUsage</span><span class="p">(</span><span class="s1">'40208 concert tickets'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setRemoteIp</span><span class="p">(</span><span class="s1">'245.253.2.12'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setAmount</span><span class="p">(</span><span class="s1">'100'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCurrency</span><span class="p">(</span><span class="s1">'EUR'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setReferenceId</span><span class="p">(</span><span class="s1">'2ee4287e67971380ef7f97d5743bb523'</span><span class="p">);</span>

<span class="k">try</span> <span class="p">{</span>
    <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">execute</span><span class="p">();</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">response</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">getResponseObject</span><span class="p">();</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">\Exception</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$e</span><span class="o">-&gt;</span><span class="na">getMessage</span><span class="p">();</span>
<span class="p">}</span>
</code></pre>

<pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.GenesisClient</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.TransactionResult</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.constants.Endpoints</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.constants.Environments</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.requests.financial.sdd.SDDRecurringSaleRequest</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.model.Transaction</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Configuration</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Country</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Currency</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.math.BigDecimal</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">GenesisExample</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">()</span>  <span class="o">{</span>

    <span class="c1">// Create configuration</span>
    <span class="n">Configuration</span> <span class="n">configuration</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Configuration</span><span class="o">(</span><span class="n">Environments</span><span class="o">.</span><span class="na">STAGING</span><span class="o">,</span> <span class="n">Endpoints</span><span class="o">.</span><span class="na">EMERCHANTPAY</span><span class="o">);</span>

    <span class="n">configuration</span><span class="o">.</span><span class="na">setUsername</span><span class="o">(</span><span class="s">"SET_YOUR_USERNAME"</span><span class="o">);</span>
    <span class="n">configuration</span><span class="o">.</span><span class="na">setPassword</span><span class="o">(</span><span class="s">"SET_YOUR_PASSWORD"</span><span class="o">);</span>
    <span class="n">configuration</span><span class="o">.</span><span class="na">setToken</span><span class="o">(</span><span class="s">"SET_YOUR_TOKEN"</span><span class="o">);</span>

    <span class="n">SDDRecurringSaleRequest</span> <span class="n">request</span> <span class="o">=</span> <span class="k">new</span> <span class="n">SDDRecurringSaleRequest</span><span class="o">();</span>

    <span class="n">request</span><span class="o">.</span><span class="na">setTransactionId</span><span class="o">(</span><span class="s">"43671"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setUsage</span><span class="o">(</span><span class="s">"40208 concert tickets"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setRemoteIp</span><span class="o">(</span><span class="s">"245.253.2.12"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setAmount</span><span class="o">(</span><span class="k">new</span> <span class="n">BigDecimal</span><span class="o">(</span><span class="mi">100</span><span class="o">));</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCurrency</span><span class="o">(</span><span class="s">"EUR"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setReferenceId</span><span class="o">(</span><span class="s">"2ee4287e67971380ef7f97d5743bb523"</span><span class="o">);</span>

    <span class="n">GenesisClient</span> <span class="n">client</span> <span class="o">=</span> <span class="k">new</span> <span class="n">GenesisClient</span><span class="o">(</span><span class="n">configuration</span><span class="o">,</span> <span class="n">request</span><span class="o">);</span>
    <span class="n">client</span><span class="o">.</span><span class="na">execute</span><span class="o">();</span>

    <span class="c1">// Parse Payment result</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">client</span><span class="o">.</span><span class="na">getResponse</span><span class="o">());</span>

  <span class="o">}</span>
<span class="o">}</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="kd">var</span> <span class="nx">genesis</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'genesis.js/lib/genesis.js'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">transaction</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">genesis</span><span class="p">.</span><span class="nx">transaction</span><span class="p">();</span>

<span class="kd">var</span> <span class="nx">failure</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">reason</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">reason</span><span class="p">);</span>
<span class="p">};</span>

<span class="kd">var</span> <span class="nx">success</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>

<span class="nx">transaction</span><span class="p">.</span><span class="nx">sdd_recurring_sale</span><span class="p">(</span>
  <span class="p">{</span>
    <span class="s2">"transaction_id"</span><span class="p">:</span> <span class="s2">"43671"</span><span class="p">,</span>
    <span class="s2">"usage"</span><span class="p">:</span> <span class="s2">"40208 concert tickets"</span><span class="p">,</span>
    <span class="s2">"remote_ip"</span><span class="p">:</span> <span class="s2">"245.253.2.12"</span><span class="p">,</span>
    <span class="s2">"amount"</span><span class="p">:</span> <span class="s2">"100"</span><span class="p">,</span>
    <span class="s2">"currency"</span><span class="p">:</span> <span class="s2">"EUR"</span><span class="p">,</span>
    <span class="s2">"reference_id"</span><span class="p">:</span> <span class="s2">"2ee4287e67971380ef7f97d5743bb523"</span>
  <span class="p">}</span>
<span class="p">).</span><span class="nx">send</span><span class="p">()</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">success</span><span class="p">)</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">failure</span><span class="p">);</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>curl https://username:password@gate.emerchantpay.net/process/TERMINAL-TOKEN <span class="se">\</span>
   -H <span class="s2">"Content-Type: text/xml"</span> <span class="se">\</span>
   -d <span class="s1">'
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;sdd_recurring_sale&lt;/transaction_type&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;usage&gt;40208 concert tickets&lt;/usage&gt;
  &lt;remote_ip&gt;245.253.2.12&lt;/remote_ip&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;EUR&lt;/currency&gt;
  &lt;reference_id&gt;2ee4287e67971380ef7f97d5743bb523&lt;/reference_id&gt;
&lt;/payment_transaction&gt;'</span>
</code></pre>

<p><strong>Request Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>required</td>
<td>string(255)</td>
<td>The transaction type: <strong>sdd_recurring_sale</strong></td>
</tr>
<tr>
<td>transaction_id</td>
<td>required</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>usage</td>
<td>required</td>
<td>string(255)</td>
<td>Description of the transaction for later use</td>
</tr>
<tr>
<td>remote_ip</td>
<td>required*</td>
<td>IPv4 address</td>
<td>IPv4 address of customer</td>
</tr>
<tr>
<td>reference_id</td>
<td>required</td>
<td>string(32)</td>
<td>Unique id returned by corresponding transaction</td>
</tr>
<tr>
<td>amount</td>
<td>required</td>
<td>integer &gt; 0</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>required</td>
<td>string(3)</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
</tbody></table>

<p><code>required* = conditionally required</code></p>

<blockquote>
<p>Successful Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>stdClass Object
(
    [transaction_type] =&gt; sdd_recurring_sale
    [status] =&gt; pending_async
    [mode] =&gt; live
    [transaction_id] =&gt; 43671
    [unique_id] =&gt; 44177a21403427eb96664a6d7e5d5d48
    [technical_message] =&gt; Transaction successful!
    [message] =&gt; Transaction successful!
    [timestamp] =&gt; DateTime Object
        (
            [date] =&gt; 2019-03-14 12:05:59.000000
            [timezone_type] =&gt; 2
            [timezone] =&gt; Z
        )
    [descriptor] =&gt; Descriptor one
    [amount] =&gt; 100
    [currency] =&gt; EUR
    [sent_to_acquirer] =&gt; true
)
</code></pre>

<pre class="highlight java tab-java"><code><span class="o">&lt;</span><span class="n">payment_response</span> <span class="n">content</span><span class="o">=[</span>
    <span class="o">&lt;</span><span class="n">transaction_type</span> <span class="n">content</span><span class="o">=[</span><span class="n">sdd_recurring_sale</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">status</span> <span class="n">content</span><span class="o">=[</span><span class="n">pending_async</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">mode</span> <span class="n">content</span><span class="o">=[</span><span class="n">live</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">transaction_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">43671</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">unique_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">44177</span><span class="n">a21403427eb96664a6d7e5d5d48</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">technical_message</span> <span class="n">content</span><span class="o">=[</span><span class="n">Transaction</span> <span class="n">successful</span><span class="o">!]&gt;</span>
    <span class="o">&lt;</span><span class="n">message</span> <span class="n">content</span><span class="o">=[</span><span class="n">Transaction</span> <span class="n">successful</span><span class="o">!]&gt;</span>
    <span class="o">&lt;</span><span class="n">timestamp</span> <span class="n">content</span><span class="o">=[</span><span class="mi">2019</span><span class="o">-</span><span class="mo">03</span><span class="o">-</span><span class="mi">14</span><span class="nl">T12:</span><span class="mo">05</span><span class="o">:</span><span class="mi">59</span><span class="n">Z</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">descriptor</span> <span class="n">content</span><span class="o">=[</span><span class="n">Descriptor</span> <span class="n">one</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">amount</span> <span class="n">content</span><span class="o">=[</span><span class="mi">100</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">currency</span> <span class="n">content</span><span class="o">=[</span><span class="n">EUR</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">sent_to_acquirer</span> <span class="n">content</span><span class="o">=[</span><span class="kc">true</span><span class="o">]&gt;</span>
<span class="o">]&gt;</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="p">{</span>
    <span class="nl">transaction_type</span><span class="p">:</span> <span class="s2">"sdd_recurring_sale"</span><span class="p">,</span>
    <span class="nx">status</span><span class="p">:</span> <span class="s2">"pending_async"</span><span class="p">,</span>
    <span class="nx">mode</span><span class="p">:</span> <span class="s2">"live"</span><span class="p">,</span>
    <span class="nx">transaction_id</span><span class="p">:</span> <span class="s2">"43671"</span><span class="p">,</span>
    <span class="nx">unique_id</span><span class="p">:</span> <span class="s2">"44177a21403427eb96664a6d7e5d5d48"</span><span class="p">,</span>
    <span class="nx">technical_message</span><span class="p">:</span> <span class="s2">"Transaction successful!"</span><span class="p">,</span>
    <span class="nx">message</span><span class="p">:</span> <span class="s2">"Transaction successful!"</span><span class="p">,</span>
    <span class="nx">timestamp</span><span class="p">:</span> <span class="s2">"2019-03-14T12:05:59Z"</span><span class="p">,</span>
    <span class="nx">descriptor</span><span class="p">:</span> <span class="s2">"Descriptor one"</span><span class="p">,</span>
    <span class="nx">amount</span><span class="p">:</span> <span class="s2">"100"</span><span class="p">,</span>
    <span class="nx">currency</span><span class="p">:</span> <span class="s2">"EUR"</span><span class="p">,</span>
    <span class="nx">sent_to_acquirer</span><span class="p">:</span> <span class="s2">"true"</span><span class="p">,</span>
<span class="p">}</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;sdd_recurring_sale&lt;/transaction_type&gt;
  &lt;status&gt;pending_async&lt;/status&gt;
  &lt;mode&gt;live&lt;/mode&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;technical_message&gt;Transaction successful!&lt;/technical_message&gt;
  &lt;message&gt;Transaction successful!&lt;/message&gt;
  &lt;timestamp&gt;2019-03-14T12:05:59Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;EUR&lt;/currency&gt;
  &lt;sent_to_acquirer&gt;true&lt;/sent_to_acquirer&gt;
&lt;/payment_transaction&gt;
</code></pre>

<p><strong>Successful Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>The transaction type</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>transaction_id</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>unique_id</td>
<td>string(32)</td>
<td>Unique id defined by gate (must later be used if capturing, voiding or refunding a transaction)</td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
<tr>
<td>message</td>
<td>string(255)</td>
<td>Human readable error message which can be displayed to users.</td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when the transaction was processed in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Combined date and time</a> e.g. 2007-08- 30T17:46:11Z</td>
</tr>
<tr>
<td>descriptor</td>
<td>string</td>
<td>Static descriptor MID info as configured on the gateway</td>
</tr>
<tr>
<td>amount</td>
<td>integer</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>sent_to_acquirer</td>
<td>string</td>
<td>&quot;true&quot; or &quot;false&quot;</td>
</tr>
</tbody></table>

<blockquote>
<p>Error Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>stdClass Object
(
    [transaction_type] =&gt; sdd_recurring_sale
    [status] =&gt; error
    [mode] =&gt; live
    [transaction_id] =&gt; 43671
    [unique_id] =&gt; 44177a21403427eb96664a6d7e5d5d48
    [code] =&gt; 320
    [technical_message] =&gt; amount is missing!
    [message] =&gt; Please check input data for errors!
    [timestamp] =&gt; DateTime Object
        (
            [date] =&gt; 2019-03-14 12:05:59.000000
            [timezone_type] =&gt; 2
            [timezone] =&gt; Z
        )
    [descriptor] =&gt; Descriptor one
    [amount] =&gt; 100
    [currency] =&gt; EUR
)
</code></pre>

<pre class="highlight java tab-java"><code><span class="o">&lt;</span><span class="n">payment_response</span> <span class="n">content</span><span class="o">=[</span>
    <span class="o">&lt;</span><span class="n">transaction_type</span> <span class="n">content</span><span class="o">=[</span><span class="n">sdd_recurring_sale</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">status</span> <span class="n">content</span><span class="o">=[</span><span class="n">error</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">mode</span> <span class="n">content</span><span class="o">=[</span><span class="n">live</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">transaction_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">43671</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">unique_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">44177</span><span class="n">a21403427eb96664a6d7e5d5d48</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">code</span> <span class="n">content</span><span class="o">=[</span><span class="mi">320</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">technical_message</span> <span class="n">content</span><span class="o">=[</span><span class="n">amount</span> <span class="n">is</span> <span class="n">missing</span><span class="o">!]&gt;</span>
    <span class="o">&lt;</span><span class="n">message</span> <span class="n">content</span><span class="o">=[</span><span class="n">Please</span> <span class="n">check</span> <span class="n">input</span> <span class="n">data</span> <span class="k">for</span> <span class="n">errors</span><span class="o">!]&gt;</span>
    <span class="o">&lt;</span><span class="n">timestamp</span> <span class="n">content</span><span class="o">=[</span><span class="mi">2019</span><span class="o">-</span><span class="mo">03</span><span class="o">-</span><span class="mi">14</span><span class="nl">T12:</span><span class="mo">05</span><span class="o">:</span><span class="mi">59</span><span class="n">Z</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">descriptor</span> <span class="n">content</span><span class="o">=[</span><span class="n">Descriptor</span> <span class="n">one</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">amount</span> <span class="n">content</span><span class="o">=[</span><span class="mi">100</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">currency</span> <span class="n">content</span><span class="o">=[</span><span class="n">EUR</span><span class="o">]&gt;</span>
<span class="o">]&gt;</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="p">{</span>
    <span class="nl">transaction_type</span><span class="p">:</span> <span class="s2">"sdd_recurring_sale"</span><span class="p">,</span>
    <span class="nx">status</span><span class="p">:</span> <span class="s2">"error"</span><span class="p">,</span>
    <span class="nx">mode</span><span class="p">:</span> <span class="s2">"live"</span><span class="p">,</span>
    <span class="nx">transaction_id</span><span class="p">:</span> <span class="s2">"43671"</span><span class="p">,</span>
    <span class="nx">unique_id</span><span class="p">:</span> <span class="s2">"44177a21403427eb96664a6d7e5d5d48"</span><span class="p">,</span>
    <span class="nx">code</span><span class="p">:</span> <span class="s2">"320"</span><span class="p">,</span>
    <span class="nx">technical_message</span><span class="p">:</span> <span class="s2">"amount is missing!"</span><span class="p">,</span>
    <span class="nx">message</span><span class="p">:</span> <span class="s2">"Please check input data for errors!"</span><span class="p">,</span>
    <span class="nx">timestamp</span><span class="p">:</span> <span class="s2">"2019-03-14T12:05:59Z"</span><span class="p">,</span>
    <span class="nx">descriptor</span><span class="p">:</span> <span class="s2">"Descriptor one"</span><span class="p">,</span>
    <span class="nx">amount</span><span class="p">:</span> <span class="s2">"100"</span><span class="p">,</span>
    <span class="nx">currency</span><span class="p">:</span> <span class="s2">"EUR"</span><span class="p">,</span>
<span class="p">}</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;sdd_recurring_sale&lt;/transaction_type&gt;
  &lt;status&gt;error&lt;/status&gt;
  &lt;mode&gt;live&lt;/mode&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;code&gt;320&lt;/code&gt;
  &lt;technical_message&gt;amount is missing!&lt;/technical_message&gt;
  &lt;message&gt;Please check input data <span class="k">for </span>errors!&lt;/message&gt;
  &lt;timestamp&gt;2019-03-14T12:05:59Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;EUR&lt;/currency&gt;
&lt;/payment_transaction&gt;
</code></pre>

<p><strong>Error Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>The transaction type</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>transaction_id</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>unique_id</td>
<td>string(32)</td>
<td>Unique id defined by gate (must later be used if capturing, voiding or refunding a transaction)</td>
</tr>
<tr>
<td>code</td>
<td>integer</td>
<td>Error code according to <a href="#error-code-table">Error code table</a></td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when the transaction was processed in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Combined date and time</a> e.g. 2007-08- 30T17:46:11Z</td>
</tr>
<tr>
<td>descriptor</td>
<td>string</td>
<td>Static descriptor MID info as configured on the gateway</td>
</tr>
<tr>
<td>amount</td>
<td>integer</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>sent_to_acquirer</td>
<td>string</td>
<td>&quot;true&quot; or &quot;false&quot;</td>
</tr>
</tbody></table>
<h3 id='sdd-refund'>SDD Refund</h3>
<p><strong>SddRefunds allow to return already billed amounts to customers.</strong></p>

<p>The amount can be fully refunded only, no partial refunds are allowed. Note that SDD refunds can only be done on former approved SDD transactions</p>

<p>Therefore, the reference_id for the corresponding transaction is mandatory.</p>

<blockquote>
<p>Request</p>
</blockquote>

<pre class="highlight php tab-php"><code><span class="cp">&lt;?php</span>

<span class="c1">// Load the pre-configured ini file...
</span><span class="nx">\Genesis\Config</span><span class="o">::</span><span class="na">loadSettings</span><span class="p">(</span><span class="s1">'/path/to/config.ini'</span><span class="p">);</span>

<span class="nv">$genesis</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Genesis</span><span class="p">(</span><span class="s1">'Financial\SDD\Refund'</span><span class="p">);</span>
<span class="nv">$request</span> <span class="o">=</span> <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">request</span><span class="p">();</span>

<span class="nv">$request</span>
  <span class="o">-&gt;</span><span class="na">setTransactionId</span><span class="p">(</span><span class="s1">'43671'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setUsage</span><span class="p">(</span><span class="s1">'40208 concert tickets'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setAmount</span><span class="p">(</span><span class="s1">'100'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCurrency</span><span class="p">(</span><span class="s1">'EUR'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setReferenceId</span><span class="p">(</span><span class="s1">'2ee4287e67971380ef7f97d5743bb523'</span><span class="p">);</span>

<span class="k">try</span> <span class="p">{</span>
    <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">execute</span><span class="p">();</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">response</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">getResponseObject</span><span class="p">();</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">\Exception</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$e</span><span class="o">-&gt;</span><span class="na">getMessage</span><span class="p">();</span>
<span class="p">}</span>
</code></pre>

<pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.GenesisClient</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.TransactionResult</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.constants.Endpoints</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.constants.Environments</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.requests.financial.sdd.SDDRefundRequest</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.model.Transaction</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Configuration</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Country</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Currency</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.math.BigDecimal</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">GenesisExample</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">()</span>  <span class="o">{</span>

    <span class="c1">// Create configuration</span>
    <span class="n">Configuration</span> <span class="n">configuration</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Configuration</span><span class="o">(</span><span class="n">Environments</span><span class="o">.</span><span class="na">STAGING</span><span class="o">,</span> <span class="n">Endpoints</span><span class="o">.</span><span class="na">EMERCHANTPAY</span><span class="o">);</span>

    <span class="n">configuration</span><span class="o">.</span><span class="na">setUsername</span><span class="o">(</span><span class="s">"SET_YOUR_USERNAME"</span><span class="o">);</span>
    <span class="n">configuration</span><span class="o">.</span><span class="na">setPassword</span><span class="o">(</span><span class="s">"SET_YOUR_PASSWORD"</span><span class="o">);</span>
    <span class="n">configuration</span><span class="o">.</span><span class="na">setToken</span><span class="o">(</span><span class="s">"SET_YOUR_TOKEN"</span><span class="o">);</span>

    <span class="n">SDDRefundRequest</span> <span class="n">request</span> <span class="o">=</span> <span class="k">new</span> <span class="n">SDDRefundRequest</span><span class="o">();</span>

    <span class="n">request</span><span class="o">.</span><span class="na">setTransactionId</span><span class="o">(</span><span class="s">"43671"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setUsage</span><span class="o">(</span><span class="s">"40208 concert tickets"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setAmount</span><span class="o">(</span><span class="k">new</span> <span class="n">BigDecimal</span><span class="o">(</span><span class="mi">100</span><span class="o">));</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCurrency</span><span class="o">(</span><span class="s">"EUR"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setReferenceId</span><span class="o">(</span><span class="s">"2ee4287e67971380ef7f97d5743bb523"</span><span class="o">);</span>

    <span class="n">GenesisClient</span> <span class="n">client</span> <span class="o">=</span> <span class="k">new</span> <span class="n">GenesisClient</span><span class="o">(</span><span class="n">configuration</span><span class="o">,</span> <span class="n">request</span><span class="o">);</span>
    <span class="n">client</span><span class="o">.</span><span class="na">execute</span><span class="o">();</span>

    <span class="c1">// Parse Payment result</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">client</span><span class="o">.</span><span class="na">getResponse</span><span class="o">());</span>

  <span class="o">}</span>
<span class="o">}</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="kd">var</span> <span class="nx">genesis</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'genesis.js/lib/genesis.js'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">transaction</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">genesis</span><span class="p">.</span><span class="nx">transaction</span><span class="p">();</span>

<span class="kd">var</span> <span class="nx">failure</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">reason</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">reason</span><span class="p">);</span>
<span class="p">};</span>

<span class="kd">var</span> <span class="nx">success</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>

<span class="nx">transaction</span><span class="p">.</span><span class="nx">sdd_refund</span><span class="p">(</span>
  <span class="p">{</span>
    <span class="s2">"transaction_id"</span><span class="p">:</span> <span class="s2">"43671"</span><span class="p">,</span>
    <span class="s2">"usage"</span><span class="p">:</span> <span class="s2">"40208 concert tickets"</span><span class="p">,</span>
    <span class="s2">"amount"</span><span class="p">:</span> <span class="s2">"100"</span><span class="p">,</span>
    <span class="s2">"currency"</span><span class="p">:</span> <span class="s2">"EUR"</span><span class="p">,</span>
    <span class="s2">"reference_id"</span><span class="p">:</span> <span class="s2">"2ee4287e67971380ef7f97d5743bb523"</span>
  <span class="p">}</span>
<span class="p">).</span><span class="nx">send</span><span class="p">()</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">success</span><span class="p">)</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">failure</span><span class="p">);</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>curl https://username:password@gate.emerchantpay.net/process/TERMINAL-TOKEN <span class="se">\</span>
   -H <span class="s2">"Content-Type: text/xml"</span> <span class="se">\</span>
   -d <span class="s1">'
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;sdd_refund&lt;/transaction_type&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;usage&gt;40208 concert tickets&lt;/usage&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;EUR&lt;/currency&gt;
  &lt;reference_id&gt;2ee4287e67971380ef7f97d5743bb523&lt;/reference_id&gt;
&lt;/payment_transaction&gt;'</span>
</code></pre>

<p><strong>Request Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>required</td>
<td>string(255)</td>
<td>The transaction type: <strong>sdd_refund</strong></td>
</tr>
<tr>
<td>transaction_id</td>
<td>required</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>usage</td>
<td>required</td>
<td>string(255)</td>
<td>Description of the transaction for later use</td>
</tr>
<tr>
<td>amount</td>
<td>required</td>
<td>integer &gt; 0</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>required</td>
<td>string(3)</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>reference_id</td>
<td>required</td>
<td>string(32)</td>
<td>Unique id returned by corresponding transaction</td>
</tr>
</tbody></table>

<p><code>required* = conditionally required</code></p>

<blockquote>
<p>Successful Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>stdClass Object
(
    [transaction_type] =&gt; sdd_refund
    [status] =&gt; pending_async
    [mode] =&gt; live
    [transaction_id] =&gt; 43671
    [unique_id] =&gt; 44177a21403427eb96664a6d7e5d5d48
    [technical_message] =&gt; Transaction successful!
    [message] =&gt; Transaction successful!
    [timestamp] =&gt; DateTime Object
        (
            [date] =&gt; 2019-03-14 12:05:59.000000
            [timezone_type] =&gt; 2
            [timezone] =&gt; Z
        )
    [descriptor] =&gt; Descriptor one
    [amount] =&gt; 100
    [currency] =&gt; EUR
    [sent_to_acquirer] =&gt; true
)
</code></pre>

<pre class="highlight java tab-java"><code><span class="o">&lt;</span><span class="n">payment_response</span> <span class="n">content</span><span class="o">=[</span>
    <span class="o">&lt;</span><span class="n">transaction_type</span> <span class="n">content</span><span class="o">=[</span><span class="n">sdd_refund</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">status</span> <span class="n">content</span><span class="o">=[</span><span class="n">pending_async</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">mode</span> <span class="n">content</span><span class="o">=[</span><span class="n">live</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">transaction_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">43671</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">unique_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">44177</span><span class="n">a21403427eb96664a6d7e5d5d48</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">technical_message</span> <span class="n">content</span><span class="o">=[</span><span class="n">Transaction</span> <span class="n">successful</span><span class="o">!]&gt;</span>
    <span class="o">&lt;</span><span class="n">message</span> <span class="n">content</span><span class="o">=[</span><span class="n">Transaction</span> <span class="n">successful</span><span class="o">!]&gt;</span>
    <span class="o">&lt;</span><span class="n">timestamp</span> <span class="n">content</span><span class="o">=[</span><span class="mi">2019</span><span class="o">-</span><span class="mo">03</span><span class="o">-</span><span class="mi">14</span><span class="nl">T12:</span><span class="mo">05</span><span class="o">:</span><span class="mi">59</span><span class="n">Z</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">descriptor</span> <span class="n">content</span><span class="o">=[</span><span class="n">Descriptor</span> <span class="n">one</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">amount</span> <span class="n">content</span><span class="o">=[</span><span class="mi">100</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">currency</span> <span class="n">content</span><span class="o">=[</span><span class="n">EUR</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">sent_to_acquirer</span> <span class="n">content</span><span class="o">=[</span><span class="kc">true</span><span class="o">]&gt;</span>
<span class="o">]&gt;</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="p">{</span>
    <span class="nl">transaction_type</span><span class="p">:</span> <span class="s2">"sdd_refund"</span><span class="p">,</span>
    <span class="nx">status</span><span class="p">:</span> <span class="s2">"pending_async"</span><span class="p">,</span>
    <span class="nx">mode</span><span class="p">:</span> <span class="s2">"live"</span><span class="p">,</span>
    <span class="nx">transaction_id</span><span class="p">:</span> <span class="s2">"43671"</span><span class="p">,</span>
    <span class="nx">unique_id</span><span class="p">:</span> <span class="s2">"44177a21403427eb96664a6d7e5d5d48"</span><span class="p">,</span>
    <span class="nx">technical_message</span><span class="p">:</span> <span class="s2">"Transaction successful!"</span><span class="p">,</span>
    <span class="nx">message</span><span class="p">:</span> <span class="s2">"Transaction successful!"</span><span class="p">,</span>
    <span class="nx">timestamp</span><span class="p">:</span> <span class="s2">"2019-03-14T12:05:59Z"</span><span class="p">,</span>
    <span class="nx">descriptor</span><span class="p">:</span> <span class="s2">"Descriptor one"</span><span class="p">,</span>
    <span class="nx">amount</span><span class="p">:</span> <span class="s2">"100"</span><span class="p">,</span>
    <span class="nx">currency</span><span class="p">:</span> <span class="s2">"EUR"</span><span class="p">,</span>
    <span class="nx">sent_to_acquirer</span><span class="p">:</span> <span class="s2">"true"</span><span class="p">,</span>
<span class="p">}</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;sdd_refund&lt;/transaction_type&gt;
  &lt;status&gt;pending_async&lt;/status&gt;
  &lt;mode&gt;live&lt;/mode&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;technical_message&gt;Transaction successful!&lt;/technical_message&gt;
  &lt;message&gt;Transaction successful!&lt;/message&gt;
  &lt;timestamp&gt;2019-03-14T12:05:59Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;EUR&lt;/currency&gt;
  &lt;sent_to_acquirer&gt;true&lt;/sent_to_acquirer&gt;
&lt;/payment_transaction&gt;
</code></pre>

<p><strong>Successful Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>The transaction type</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>transaction_id</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>unique_id</td>
<td>string(32)</td>
<td>Unique id defined by gate (must later be used if capturing, voiding or refunding a transaction)</td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
<tr>
<td>message</td>
<td>string(255)</td>
<td>Human readable error message which can be displayed to users.</td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when the transaction was processed in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Combined date and time</a> e.g. 2007-08- 30T17:46:11Z</td>
</tr>
<tr>
<td>descriptor</td>
<td>string</td>
<td>Static descriptor MID info as configured on the gateway</td>
</tr>
<tr>
<td>amount</td>
<td>integer</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>sent_to_acquirer</td>
<td>string</td>
<td>&quot;true&quot; or &quot;false&quot;</td>
</tr>
</tbody></table>

<blockquote>
<p>Error Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>stdClass Object
(
    [transaction_type] =&gt; sdd_refund
    [status] =&gt; error
    [mode] =&gt; live
    [transaction_id] =&gt; 43671
    [unique_id] =&gt; 44177a21403427eb96664a6d7e5d5d48
    [code] =&gt; 320
    [technical_message] =&gt; amount is missing!
    [message] =&gt; Please check input data for errors!
    [timestamp] =&gt; DateTime Object
        (
            [date] =&gt; 2019-03-14 12:05:59.000000
            [timezone_type] =&gt; 2
            [timezone] =&gt; Z
        )
    [descriptor] =&gt; Descriptor one
    [amount] =&gt; 100
    [currency] =&gt; EUR
    [sent_to_acquirer] =&gt; false
)
</code></pre>

<pre class="highlight java tab-java"><code><span class="o">&lt;</span><span class="n">payment_response</span> <span class="n">content</span><span class="o">=[</span>
    <span class="o">&lt;</span><span class="n">transaction_type</span> <span class="n">content</span><span class="o">=[</span><span class="n">sdd_refund</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">status</span> <span class="n">content</span><span class="o">=[</span><span class="n">error</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">mode</span> <span class="n">content</span><span class="o">=[</span><span class="n">live</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">transaction_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">43671</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">unique_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">44177</span><span class="n">a21403427eb96664a6d7e5d5d48</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">code</span> <span class="n">content</span><span class="o">=[</span><span class="mi">320</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">technical_message</span> <span class="n">content</span><span class="o">=[</span><span class="n">amount</span> <span class="n">is</span> <span class="n">missing</span><span class="o">!]&gt;</span>
    <span class="o">&lt;</span><span class="n">message</span> <span class="n">content</span><span class="o">=[</span><span class="n">Please</span> <span class="n">check</span> <span class="n">input</span> <span class="n">data</span> <span class="k">for</span> <span class="n">errors</span><span class="o">!]&gt;</span>
    <span class="o">&lt;</span><span class="n">timestamp</span> <span class="n">content</span><span class="o">=[</span><span class="mi">2019</span><span class="o">-</span><span class="mo">03</span><span class="o">-</span><span class="mi">14</span><span class="nl">T12:</span><span class="mo">05</span><span class="o">:</span><span class="mi">59</span><span class="n">Z</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">descriptor</span> <span class="n">content</span><span class="o">=[</span><span class="n">Descriptor</span> <span class="n">one</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">amount</span> <span class="n">content</span><span class="o">=[</span><span class="mi">100</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">currency</span> <span class="n">content</span><span class="o">=[</span><span class="n">EUR</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">sent_to_acquirer</span> <span class="n">content</span><span class="o">=[</span><span class="kc">false</span><span class="o">]&gt;</span>
<span class="o">]&gt;</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="p">{</span>
    <span class="nl">transaction_type</span><span class="p">:</span> <span class="s2">"sdd_refund"</span><span class="p">,</span>
    <span class="nx">status</span><span class="p">:</span> <span class="s2">"error"</span><span class="p">,</span>
    <span class="nx">mode</span><span class="p">:</span> <span class="s2">"live"</span><span class="p">,</span>
    <span class="nx">transaction_id</span><span class="p">:</span> <span class="s2">"43671"</span><span class="p">,</span>
    <span class="nx">unique_id</span><span class="p">:</span> <span class="s2">"44177a21403427eb96664a6d7e5d5d48"</span><span class="p">,</span>
    <span class="nx">code</span><span class="p">:</span> <span class="s2">"320"</span><span class="p">,</span>
    <span class="nx">technical_message</span><span class="p">:</span> <span class="s2">"amount is missing!"</span><span class="p">,</span>
    <span class="nx">message</span><span class="p">:</span> <span class="s2">"Please check input data for errors!"</span><span class="p">,</span>
    <span class="nx">timestamp</span><span class="p">:</span> <span class="s2">"2019-03-14T12:05:59Z"</span><span class="p">,</span>
    <span class="nx">descriptor</span><span class="p">:</span> <span class="s2">"Descriptor one"</span><span class="p">,</span>
    <span class="nx">amount</span><span class="p">:</span> <span class="s2">"100"</span><span class="p">,</span>
    <span class="nx">currency</span><span class="p">:</span> <span class="s2">"EUR"</span><span class="p">,</span>
    <span class="nx">sent_to_acquirer</span><span class="p">:</span> <span class="s2">"false"</span><span class="p">,</span>
<span class="p">}</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;sdd_refund&lt;/transaction_type&gt;
  &lt;status&gt;error&lt;/status&gt;
  &lt;mode&gt;live&lt;/mode&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;code&gt;320&lt;/code&gt;
  &lt;technical_message&gt;amount is missing!&lt;/technical_message&gt;
  &lt;message&gt;Please check input data <span class="k">for </span>errors!&lt;/message&gt;
  &lt;timestamp&gt;2019-03-14T12:05:59Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;EUR&lt;/currency&gt;
  &lt;sent_to_acquirer&gt;false&lt;/sent_to_acquirer&gt;
&lt;/payment_transaction&gt;
</code></pre>

<p><strong>Error Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>The transaction type</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>transaction_id</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>unique_id</td>
<td>string(32)</td>
<td>Unique id defined by gate (must later be used if capturing, voiding or refunding a transaction)</td>
</tr>
<tr>
<td>code</td>
<td>integer</td>
<td>Error code according to <a href="#error-code-table">Error code table</a></td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
<tr>
<td>message</td>
<td>string(255)</td>
<td>Human readable error message which can be displayed to users.</td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when the transaction was processed in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Combined date and time</a> e.g. 2007-08- 30T17:46:11Z</td>
</tr>
<tr>
<td>descriptor</td>
<td>string</td>
<td>Static descriptor MID info as configured on the gateway</td>
</tr>
<tr>
<td>amount</td>
<td>integer</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>sent_to_acquirer</td>
<td>string</td>
<td>&quot;true&quot; or &quot;false&quot;</td>
</tr>
</tbody></table>
<h3 id='sdd-sale'>SDD Sale</h3>
<p>The status of Sepa Direct Debit transactions is not available right after a transaction is made. Merchants receive the status of SDD transaction at 8:30 am (CET), 10:30 am (CET), 3:30 pm (CET) and 7:30 pm (CET). The merchant should have enabled notifications</p>

<blockquote>
<p>Request</p>
</blockquote>

<pre class="highlight php tab-php"><code><span class="cp">&lt;?php</span>

<span class="c1">// Load the pre-configured ini file...
</span><span class="nx">\Genesis\Config</span><span class="o">::</span><span class="na">loadSettings</span><span class="p">(</span><span class="s1">'/path/to/config.ini'</span><span class="p">);</span>

<span class="nv">$genesis</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Genesis</span><span class="p">(</span><span class="s1">'Financial\SDD\Sale'</span><span class="p">);</span>
<span class="nv">$request</span> <span class="o">=</span> <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">request</span><span class="p">();</span>

<span class="nv">$request</span>
  <span class="o">-&gt;</span><span class="na">setTransactionId</span><span class="p">(</span><span class="s1">'43671'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setUsage</span><span class="p">(</span><span class="s1">'40208 concert tickets'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setRemoteIp</span><span class="p">(</span><span class="s1">'245.253.2.12'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setAmount</span><span class="p">(</span><span class="s1">'100'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCurrency</span><span class="p">(</span><span class="s1">'EUR'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setIban</span><span class="p">(</span><span class="s1">'DE09100100101234567891'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBic</span><span class="p">(</span><span class="s1">'PBNKDEFFXXX'</span><span class="p">)</span>


  <span class="c1">// Billing Address
</span>  <span class="o">-&gt;</span><span class="na">setBillingFirstName</span><span class="p">(</span><span class="s1">'Travis'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingLastName</span><span class="p">(</span><span class="s1">'Pastrana'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingCountry</span><span class="p">(</span><span class="s1">'DE'</span><span class="p">);</span>

<span class="k">try</span> <span class="p">{</span>
    <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">execute</span><span class="p">();</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">response</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">getResponseObject</span><span class="p">();</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">\Exception</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$e</span><span class="o">-&gt;</span><span class="na">getMessage</span><span class="p">();</span>
<span class="p">}</span>
</code></pre>

<pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.GenesisClient</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.TransactionResult</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.constants.Endpoints</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.constants.Environments</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.requests.financial.sdd.SDDSaleRequest</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.model.Transaction</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Configuration</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Country</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Currency</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.math.BigDecimal</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">GenesisExample</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">()</span>  <span class="o">{</span>

    <span class="c1">// Create configuration</span>
    <span class="n">Configuration</span> <span class="n">configuration</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Configuration</span><span class="o">(</span><span class="n">Environments</span><span class="o">.</span><span class="na">STAGING</span><span class="o">,</span> <span class="n">Endpoints</span><span class="o">.</span><span class="na">EMERCHANTPAY</span><span class="o">);</span>

    <span class="n">configuration</span><span class="o">.</span><span class="na">setUsername</span><span class="o">(</span><span class="s">"SET_YOUR_USERNAME"</span><span class="o">);</span>
    <span class="n">configuration</span><span class="o">.</span><span class="na">setPassword</span><span class="o">(</span><span class="s">"SET_YOUR_PASSWORD"</span><span class="o">);</span>
    <span class="n">configuration</span><span class="o">.</span><span class="na">setToken</span><span class="o">(</span><span class="s">"SET_YOUR_TOKEN"</span><span class="o">);</span>

    <span class="n">SDDSaleRequest</span> <span class="n">request</span> <span class="o">=</span> <span class="k">new</span> <span class="n">SDDSaleRequest</span><span class="o">();</span>

    <span class="n">request</span><span class="o">.</span><span class="na">setTransactionId</span><span class="o">(</span><span class="s">"43671"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setUsage</span><span class="o">(</span><span class="s">"40208 concert tickets"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setRemoteIp</span><span class="o">(</span><span class="s">"245.253.2.12"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setAmount</span><span class="o">(</span><span class="k">new</span> <span class="n">BigDecimal</span><span class="o">(</span><span class="mi">100</span><span class="o">));</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCurrency</span><span class="o">(</span><span class="s">"EUR"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setIban</span><span class="o">(</span><span class="s">"DE09100100101234567891"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBic</span><span class="o">(</span><span class="s">"PBNKDEFFXXX"</span><span class="o">);</span>


    <span class="c1">// Billing Address</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingFirstname</span><span class="o">(</span><span class="s">"Travis"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingLastname</span><span class="o">(</span><span class="s">"Pastrana"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingCountry</span><span class="o">(</span><span class="s">"DE"</span><span class="o">);</span>

    <span class="n">GenesisClient</span> <span class="n">client</span> <span class="o">=</span> <span class="k">new</span> <span class="n">GenesisClient</span><span class="o">(</span><span class="n">configuration</span><span class="o">,</span> <span class="n">request</span><span class="o">);</span>
    <span class="n">client</span><span class="o">.</span><span class="na">execute</span><span class="o">();</span>

    <span class="c1">// Parse Payment result</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">client</span><span class="o">.</span><span class="na">getResponse</span><span class="o">());</span>

  <span class="o">}</span>
<span class="o">}</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="kd">var</span> <span class="nx">genesis</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'genesis.js/lib/genesis.js'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">transaction</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">genesis</span><span class="p">.</span><span class="nx">transaction</span><span class="p">();</span>

<span class="kd">var</span> <span class="nx">failure</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">reason</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">reason</span><span class="p">);</span>
<span class="p">};</span>

<span class="kd">var</span> <span class="nx">success</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>

<span class="nx">transaction</span><span class="p">.</span><span class="nx">sdd_sale</span><span class="p">(</span>
  <span class="p">{</span>
    <span class="s2">"transaction_id"</span><span class="p">:</span> <span class="s2">"43671"</span><span class="p">,</span>
    <span class="s2">"usage"</span><span class="p">:</span> <span class="s2">"40208 concert tickets"</span><span class="p">,</span>
    <span class="s2">"remote_ip"</span><span class="p">:</span> <span class="s2">"245.253.2.12"</span><span class="p">,</span>
    <span class="s2">"amount"</span><span class="p">:</span> <span class="s2">"100"</span><span class="p">,</span>
    <span class="s2">"currency"</span><span class="p">:</span> <span class="s2">"EUR"</span><span class="p">,</span>
    <span class="s2">"iban"</span><span class="p">:</span> <span class="s2">"DE09100100101234567891"</span><span class="p">,</span>
    <span class="s2">"bic"</span><span class="p">:</span> <span class="s2">"PBNKDEFFXXX"</span><span class="p">,</span>
    <span class="s2">"billing_address"</span><span class="p">:</span> <span class="p">{</span>
      <span class="s2">"first_name"</span><span class="p">:</span> <span class="s2">"Travis"</span><span class="p">,</span>
      <span class="s2">"last_name"</span><span class="p">:</span> <span class="s2">"Pastrana"</span><span class="p">,</span>
      <span class="s2">"country"</span><span class="p">:</span> <span class="s2">"DE"</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">).</span><span class="nx">send</span><span class="p">()</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">success</span><span class="p">)</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">failure</span><span class="p">);</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>curl https://username:password@gate.emerchantpay.net/process/TERMINAL-TOKEN <span class="se">\</span>
   -H <span class="s2">"Content-Type: text/xml"</span> <span class="se">\</span>
   -d <span class="s1">'
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;sdd_sale&lt;/transaction_type&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;usage&gt;40208 concert tickets&lt;/usage&gt;
  &lt;remote_ip&gt;245.253.2.12&lt;/remote_ip&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;EUR&lt;/currency&gt;
  &lt;iban&gt;DE09100100101234567891&lt;/iban&gt;
  &lt;bic&gt;PBNKDEFFXXX&lt;/bic&gt;
  &lt;billing_address&gt;
    &lt;first_name&gt;Travis&lt;/first_name&gt;
    &lt;last_name&gt;Pastrana&lt;/last_name&gt;
    &lt;country&gt;DE&lt;/country&gt;
  &lt;/billing_address&gt;
&lt;/payment_transaction&gt;'</span>
</code></pre>

<p><strong>Request Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>required</td>
<td>string(255)</td>
<td>The transaction type: <strong>sdd_sale</strong></td>
</tr>
<tr>
<td>transaction_id</td>
<td>required</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>usage</td>
<td>optional</td>
<td>string(255)</td>
<td>Description of the transaction for later use</td>
</tr>
<tr>
<td>remote_ip</td>
<td>required*</td>
<td>IPv4 address</td>
<td>IPv4 address of customer</td>
</tr>
<tr>
<td>amount</td>
<td>required</td>
<td>integer &gt; 0</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>required</td>
<td>string(3)</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>iban</td>
<td>required</td>
<td>string(34)</td>
<td>Customer’s IBAN number</td>
</tr>
<tr>
<td>bic</td>
<td>required</td>
<td>string(11)</td>
<td>SWIFT/BIC code of the customer’s bank</td>
</tr>
<tr>
<td><strong>billing_address</strong></td>
<td>required</td>
<td></td>
<td>See <a href="#required-vs-optional-api-params">Required vs Optional API params</a> for details</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;first_name</td>
<td>required</td>
<td>string(255)</td>
<td>Customer first name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;last_name</td>
<td>required</td>
<td>string(255)</td>
<td>Customer last name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address1</td>
<td>required*</td>
<td>string(255)</td>
<td>Primary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address2</td>
<td>required*</td>
<td>string(255)</td>
<td>Secondary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;zip_code</td>
<td>required*</td>
<td>string</td>
<td>ZIP code</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;city</td>
<td>required*</td>
<td>string(255)</td>
<td>City</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;state</td>
<td>required*</td>
<td>string(2)</td>
<td>State code in <a href="https://en.wikipedia.org/wiki/ISO_3166-2">ISO 3166-2</a>, required for USA and Canada</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;country</td>
<td>required</td>
<td>string(2)</td>
<td>Country code in <a href="https://www.iso.org/iso-3166-country-codes.html">ISO 3166</a></td>
</tr>
<tr>
<td><strong>shipping_address</strong></td>
<td>optional</td>
<td></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;first_name</td>
<td>optional</td>
<td>string(255)</td>
<td>Customer first name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;last_name</td>
<td>optional</td>
<td>string(255)</td>
<td>Customer last name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address1</td>
<td>optional</td>
<td>string(255)</td>
<td>Primary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address2</td>
<td>optional</td>
<td>string(255)</td>
<td>Secondary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;zip_code</td>
<td>optional</td>
<td>string</td>
<td>ZIP code</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;city</td>
<td>optional</td>
<td>string(255)</td>
<td>City</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;state</td>
<td>optional</td>
<td>string(2)</td>
<td>State code in <a href="https://en.wikipedia.org/wiki/ISO_3166-2">ISO 3166-2</a>, required for USA and Canada</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;country</td>
<td>optional</td>
<td>string(2)</td>
<td>Country code in <a href="https://www.iso.org/iso-3166-country-codes.html">ISO 3166</a></td>
</tr>
</tbody></table>

<p><code>required* = conditionally required</code></p>

<p>*<em>Supported countries: *</em></p>

<p>The supported countries are the same as <a href="#sdd-init-recurring-sale">SDD Init Recurring Sale</a>.</p>

<blockquote>
<p>Successful Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>stdClass Object
(
    [transaction_type] =&gt; sdd_sale
    [status] =&gt; approved
    [mode] =&gt; live
    [transaction_id] =&gt; 43671
    [unique_id] =&gt; 44177a21403427eb96664a6d7e5d5d48
    [technical_message] =&gt; Transaction successful!
    [message] =&gt; Transaction successful!
    [timestamp] =&gt; DateTime Object
        (
            [date] =&gt; 2019-03-14 12:06:00.000000
            [timezone_type] =&gt; 2
            [timezone] =&gt; Z
        )
    [descriptor] =&gt; Descriptor one
    [amount] =&gt; 100
    [currency] =&gt; EUR
    [sent_to_acquirer] =&gt; true
)
</code></pre>

<pre class="highlight java tab-java"><code><span class="o">&lt;</span><span class="n">payment_response</span> <span class="n">content</span><span class="o">=[</span>
    <span class="o">&lt;</span><span class="n">transaction_type</span> <span class="n">content</span><span class="o">=[</span><span class="n">sdd_sale</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">status</span> <span class="n">content</span><span class="o">=[</span><span class="n">approved</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">mode</span> <span class="n">content</span><span class="o">=[</span><span class="n">live</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">transaction_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">43671</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">unique_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">44177</span><span class="n">a21403427eb96664a6d7e5d5d48</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">technical_message</span> <span class="n">content</span><span class="o">=[</span><span class="n">Transaction</span> <span class="n">successful</span><span class="o">!]&gt;</span>
    <span class="o">&lt;</span><span class="n">message</span> <span class="n">content</span><span class="o">=[</span><span class="n">Transaction</span> <span class="n">successful</span><span class="o">!]&gt;</span>
    <span class="o">&lt;</span><span class="n">timestamp</span> <span class="n">content</span><span class="o">=[</span><span class="mi">2019</span><span class="o">-</span><span class="mo">03</span><span class="o">-</span><span class="mi">14</span><span class="nl">T12:</span><span class="mo">06</span><span class="o">:</span><span class="mo">00</span><span class="n">Z</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">descriptor</span> <span class="n">content</span><span class="o">=[</span><span class="n">Descriptor</span> <span class="n">one</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">amount</span> <span class="n">content</span><span class="o">=[</span><span class="mi">100</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">currency</span> <span class="n">content</span><span class="o">=[</span><span class="n">EUR</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">sent_to_acquirer</span> <span class="n">content</span><span class="o">=[</span><span class="kc">true</span><span class="o">]&gt;</span>
<span class="o">]&gt;</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="p">{</span>
    <span class="nl">transaction_type</span><span class="p">:</span> <span class="s2">"sdd_sale"</span><span class="p">,</span>
    <span class="nx">status</span><span class="p">:</span> <span class="s2">"approved"</span><span class="p">,</span>
    <span class="nx">mode</span><span class="p">:</span> <span class="s2">"live"</span><span class="p">,</span>
    <span class="nx">transaction_id</span><span class="p">:</span> <span class="s2">"43671"</span><span class="p">,</span>
    <span class="nx">unique_id</span><span class="p">:</span> <span class="s2">"44177a21403427eb96664a6d7e5d5d48"</span><span class="p">,</span>
    <span class="nx">technical_message</span><span class="p">:</span> <span class="s2">"Transaction successful!"</span><span class="p">,</span>
    <span class="nx">message</span><span class="p">:</span> <span class="s2">"Transaction successful!"</span><span class="p">,</span>
    <span class="nx">timestamp</span><span class="p">:</span> <span class="s2">"2019-03-14T12:06:00Z"</span><span class="p">,</span>
    <span class="nx">descriptor</span><span class="p">:</span> <span class="s2">"Descriptor one"</span><span class="p">,</span>
    <span class="nx">amount</span><span class="p">:</span> <span class="s2">"100"</span><span class="p">,</span>
    <span class="nx">currency</span><span class="p">:</span> <span class="s2">"EUR"</span><span class="p">,</span>
    <span class="nx">sent_to_acquirer</span><span class="p">:</span> <span class="s2">"true"</span><span class="p">,</span>
<span class="p">}</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;sdd_sale&lt;/transaction_type&gt;
  &lt;status&gt;approved&lt;/status&gt;
  &lt;mode&gt;live&lt;/mode&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;technical_message&gt;Transaction successful!&lt;/technical_message&gt;
  &lt;message&gt;Transaction successful!&lt;/message&gt;
  &lt;timestamp&gt;2019-03-14T12:06:00Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;EUR&lt;/currency&gt;
  &lt;sent_to_acquirer&gt;true&lt;/sent_to_acquirer&gt;
&lt;/payment_transaction&gt;
</code></pre>

<p><strong>Successful Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>The transaction type</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>transaction_id</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>unique_id</td>
<td>string(32)</td>
<td>Unique id defined by gate (must later be used if capturing, voiding or refunding a transaction)</td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
<tr>
<td>message</td>
<td>string(255)</td>
<td>Human readable error message which can be displayed to users.</td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when the transaction was processed in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Combined date and time</a> e.g. 2007-08- 30T17:46:11Z</td>
</tr>
<tr>
<td>descriptor</td>
<td>string</td>
<td>Static descriptor MID info as configured on the gateway</td>
</tr>
<tr>
<td>amount</td>
<td>integer</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>sent_to_acquirer</td>
<td>string</td>
<td>&quot;true&quot; or &quot;false&quot;</td>
</tr>
</tbody></table>

<blockquote>
<p>Error Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>stdClass Object
(
    [transaction_type] =&gt; sdd_sale
    [status] =&gt; error
    [mode] =&gt; live
    [transaction_id] =&gt; 43671
    [unique_id] =&gt; 44177a21403427eb96664a6d7e5d5d48
    [code] =&gt; 340
    [message] =&gt; expiration_year is invalid
    [timestamp] =&gt; DateTime Object
        (
            [date] =&gt; 2019-03-14 12:06:00.000000
            [timezone_type] =&gt; 2
            [timezone] =&gt; Z
        )
    [descriptor] =&gt; Descriptor one
    [amount] =&gt; 100
    [currency] =&gt; EUR
    [sent_to_acquirer] =&gt; false
)
</code></pre>

<pre class="highlight java tab-java"><code><span class="o">&lt;</span><span class="n">payment_response</span> <span class="n">content</span><span class="o">=[</span>
    <span class="o">&lt;</span><span class="n">transaction_type</span> <span class="n">content</span><span class="o">=[</span><span class="n">sdd_sale</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">status</span> <span class="n">content</span><span class="o">=[</span><span class="n">error</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">mode</span> <span class="n">content</span><span class="o">=[</span><span class="n">live</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">transaction_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">43671</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">unique_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">44177</span><span class="n">a21403427eb96664a6d7e5d5d48</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">code</span> <span class="n">content</span><span class="o">=[</span><span class="mi">340</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">message</span> <span class="n">content</span><span class="o">=[</span><span class="n">expiration_year</span> <span class="n">is</span> <span class="n">invalid</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">timestamp</span> <span class="n">content</span><span class="o">=[</span><span class="mi">2019</span><span class="o">-</span><span class="mo">03</span><span class="o">-</span><span class="mi">14</span><span class="nl">T12:</span><span class="mo">06</span><span class="o">:</span><span class="mo">00</span><span class="n">Z</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">descriptor</span> <span class="n">content</span><span class="o">=[</span><span class="n">Descriptor</span> <span class="n">one</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">amount</span> <span class="n">content</span><span class="o">=[</span><span class="mi">100</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">currency</span> <span class="n">content</span><span class="o">=[</span><span class="n">EUR</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">sent_to_acquirer</span> <span class="n">content</span><span class="o">=[</span><span class="kc">false</span><span class="o">]&gt;</span>
<span class="o">]&gt;</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="p">{</span>
    <span class="nl">transaction_type</span><span class="p">:</span> <span class="s2">"sdd_sale"</span><span class="p">,</span>
    <span class="nx">status</span><span class="p">:</span> <span class="s2">"error"</span><span class="p">,</span>
    <span class="nx">mode</span><span class="p">:</span> <span class="s2">"live"</span><span class="p">,</span>
    <span class="nx">transaction_id</span><span class="p">:</span> <span class="s2">"43671"</span><span class="p">,</span>
    <span class="nx">unique_id</span><span class="p">:</span> <span class="s2">"44177a21403427eb96664a6d7e5d5d48"</span><span class="p">,</span>
    <span class="nx">code</span><span class="p">:</span> <span class="s2">"340"</span><span class="p">,</span>
    <span class="nx">message</span><span class="p">:</span> <span class="s2">"expiration_year is invalid"</span><span class="p">,</span>
    <span class="nx">timestamp</span><span class="p">:</span> <span class="s2">"2019-03-14T12:06:00Z"</span><span class="p">,</span>
    <span class="nx">descriptor</span><span class="p">:</span> <span class="s2">"Descriptor one"</span><span class="p">,</span>
    <span class="nx">amount</span><span class="p">:</span> <span class="s2">"100"</span><span class="p">,</span>
    <span class="nx">currency</span><span class="p">:</span> <span class="s2">"EUR"</span><span class="p">,</span>
    <span class="nx">sent_to_acquirer</span><span class="p">:</span> <span class="s2">"false"</span><span class="p">,</span>
<span class="p">}</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;sdd_sale&lt;/transaction_type&gt;
  &lt;status&gt;error&lt;/status&gt;
  &lt;mode&gt;live&lt;/mode&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;code&gt;340&lt;/code&gt;
  &lt;message&gt;expiration_year is invalid&lt;/message&gt;
  &lt;timestamp&gt;2019-03-14T12:06:00Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;EUR&lt;/currency&gt;
  &lt;sent_to_acquirer&gt;false&lt;/sent_to_acquirer&gt;
&lt;/payment_transaction&gt;
</code></pre>

<p><strong>Error Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>The transaction type</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>transaction_id</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>unique_id</td>
<td>string(32)</td>
<td>Unique id defined by gate (must later be used if capturing, voiding or refunding a transaction)</td>
</tr>
<tr>
<td>code</td>
<td>integer</td>
<td>Error code according to <a href="#error-code-table">Error code table</a></td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
<tr>
<td>message</td>
<td>string(255)</td>
<td>Human readable error message which can be displayed to users.</td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when the transaction was processed in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Combined date and time</a> e.g. 2007-08- 30T17:46:11Z</td>
</tr>
<tr>
<td>descriptor</td>
<td>string</td>
<td>Static descriptor MID info as configured on the gateway</td>
</tr>
<tr>
<td>amount</td>
<td>integer</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>sent_to_acquirer</td>
<td>string</td>
<td>&quot;true&quot; or &quot;false&quot;</td>
</tr>
<tr>
<td>dynamic_descriptor_params</td>
<td>section</td>
<td>Optional, returned only if dynamic desc params are submitted on the API. Note here that the formatted dyn desc params are returned - as they would be submitted to the schemes for settlement.</td>
</tr>
</tbody></table>
<h3 id='sofort'>Sofort</h3>
<aside class="notice" >
Sofort transactions are only asynchronous. After a successful validation of transaction parameters transaction status is set to pending async the user is redirected to Sofort authentication page where he enters additional information to finish the payment. When the payment reached a final state Genesis gateway sends notification to merchant on the configured url into its account.
</aside>

<blockquote>
<p>Request</p>
</blockquote>

<pre class="highlight php tab-php"><code><span class="cp">&lt;?php</span>

<span class="c1">// Load the pre-configured ini file...
</span><span class="nx">\Genesis\Config</span><span class="o">::</span><span class="na">loadSettings</span><span class="p">(</span><span class="s1">'/path/to/config.ini'</span><span class="p">);</span>

<span class="nv">$genesis</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Genesis</span><span class="p">(</span><span class="s1">'Financial\Alternatives\Sofort'</span><span class="p">);</span>
<span class="nv">$request</span> <span class="o">=</span> <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">request</span><span class="p">();</span>

<span class="nv">$request</span>
  <span class="o">-&gt;</span><span class="na">setTransactionId</span><span class="p">(</span><span class="s1">'43671'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setUsage</span><span class="p">(</span><span class="s1">'40208 concert tickets'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setRemoteIp</span><span class="p">(</span><span class="s1">'245.253.2.12'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setReturnSuccessUrl</span><span class="p">(</span><span class="s1">'http://www.example.com/success'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setReturnFailureUrl</span><span class="p">(</span><span class="s1">'http://www.example.com/failure'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setAmount</span><span class="p">(</span><span class="s1">'100'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCurrency</span><span class="p">(</span><span class="s1">'EUR'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCustomerEmail</span><span class="p">(</span><span class="s1">'travis@example.com'</span><span class="p">)</span>


  <span class="c1">// Billing Address
</span>  <span class="o">-&gt;</span><span class="na">setBillingFirstName</span><span class="p">(</span><span class="s1">'Travis'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingLastName</span><span class="p">(</span><span class="s1">'Pastrana'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingAddress1</span><span class="p">(</span><span class="s1">'Muster Str. 12'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingZipCode</span><span class="p">(</span><span class="s1">'10178'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingCity</span><span class="p">(</span><span class="s1">'Berlin'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingCountry</span><span class="p">(</span><span class="s1">'DE'</span><span class="p">);</span>

<span class="k">try</span> <span class="p">{</span>
    <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">execute</span><span class="p">();</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">response</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">getResponseObject</span><span class="p">();</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">\Exception</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$e</span><span class="o">-&gt;</span><span class="na">getMessage</span><span class="p">();</span>
<span class="p">}</span>
</code></pre>

<pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.GenesisClient</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.TransactionResult</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.constants.Endpoints</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.constants.Environments</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.requests.financial.apm.SofortRequest</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.model.Transaction</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Configuration</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Country</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Currency</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.math.BigDecimal</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.MalformedURLException</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.URL</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">GenesisExample</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">MalformedURLException</span> <span class="o">{</span>

    <span class="c1">// Create configuration</span>
    <span class="n">Configuration</span> <span class="n">configuration</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Configuration</span><span class="o">(</span><span class="n">Environments</span><span class="o">.</span><span class="na">STAGING</span><span class="o">,</span> <span class="n">Endpoints</span><span class="o">.</span><span class="na">EMERCHANTPAY</span><span class="o">);</span>

    <span class="n">configuration</span><span class="o">.</span><span class="na">setUsername</span><span class="o">(</span><span class="s">"SET_YOUR_USERNAME"</span><span class="o">);</span>
    <span class="n">configuration</span><span class="o">.</span><span class="na">setPassword</span><span class="o">(</span><span class="s">"SET_YOUR_PASSWORD"</span><span class="o">);</span>
    <span class="n">configuration</span><span class="o">.</span><span class="na">setToken</span><span class="o">(</span><span class="s">"SET_YOUR_TOKEN"</span><span class="o">);</span>

    <span class="n">SofortRequest</span> <span class="n">request</span> <span class="o">=</span> <span class="k">new</span> <span class="n">SofortRequest</span><span class="o">();</span>

    <span class="n">request</span><span class="o">.</span><span class="na">setTransactionId</span><span class="o">(</span><span class="s">"43671"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setUsage</span><span class="o">(</span><span class="s">"40208 concert tickets"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setRemoteIp</span><span class="o">(</span><span class="s">"245.253.2.12"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setReturnSuccessUrl</span><span class="o">(</span><span class="k">new</span> <span class="n">URL</span><span class="o">(</span><span class="s">"http://www.example.com/success"</span><span class="o">));</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setReturnFailureUrl</span><span class="o">(</span><span class="k">new</span> <span class="n">URL</span><span class="o">(</span><span class="s">"http://www.example.com/failure"</span><span class="o">));</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setAmount</span><span class="o">(</span><span class="k">new</span> <span class="n">BigDecimal</span><span class="o">(</span><span class="mi">100</span><span class="o">));</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCurrency</span><span class="o">(</span><span class="s">"EUR"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCustomerEmail</span><span class="o">(</span><span class="s">"travis@example.com"</span><span class="o">);</span>


    <span class="c1">// Billing Address</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingFirstname</span><span class="o">(</span><span class="s">"Travis"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingLastname</span><span class="o">(</span><span class="s">"Pastrana"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingPrimaryAddress</span><span class="o">(</span><span class="s">"Muster Str. 12"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingZipCode</span><span class="o">(</span><span class="s">"10178"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingCity</span><span class="o">(</span><span class="s">"Berlin"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingCountry</span><span class="o">(</span><span class="s">"DE"</span><span class="o">);</span>

    <span class="n">GenesisClient</span> <span class="n">client</span> <span class="o">=</span> <span class="k">new</span> <span class="n">GenesisClient</span><span class="o">(</span><span class="n">configuration</span><span class="o">,</span> <span class="n">request</span><span class="o">);</span>
    <span class="n">client</span><span class="o">.</span><span class="na">execute</span><span class="o">();</span>

    <span class="c1">// Parse Payment result</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">client</span><span class="o">.</span><span class="na">getResponse</span><span class="o">());</span>

  <span class="o">}</span>
<span class="o">}</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="kd">var</span> <span class="nx">genesis</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'genesis.js/lib/genesis.js'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">transaction</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">genesis</span><span class="p">.</span><span class="nx">transaction</span><span class="p">();</span>

<span class="kd">var</span> <span class="nx">failure</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">reason</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">reason</span><span class="p">);</span>
<span class="p">};</span>

<span class="kd">var</span> <span class="nx">success</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>

<span class="nx">transaction</span><span class="p">.</span><span class="nx">sofort</span><span class="p">(</span>
  <span class="p">{</span>
    <span class="s2">"transaction_id"</span><span class="p">:</span> <span class="s2">"43671"</span><span class="p">,</span>
    <span class="s2">"usage"</span><span class="p">:</span> <span class="s2">"40208 concert tickets"</span><span class="p">,</span>
    <span class="s2">"remote_ip"</span><span class="p">:</span> <span class="s2">"245.253.2.12"</span><span class="p">,</span>
    <span class="s2">"return_success_url"</span><span class="p">:</span> <span class="s2">"http://www.example.com/success"</span><span class="p">,</span>
    <span class="s2">"return_failure_url"</span><span class="p">:</span> <span class="s2">"http://www.example.com/failure"</span><span class="p">,</span>
    <span class="s2">"amount"</span><span class="p">:</span> <span class="s2">"100"</span><span class="p">,</span>
    <span class="s2">"currency"</span><span class="p">:</span> <span class="s2">"EUR"</span><span class="p">,</span>
    <span class="s2">"customer_email"</span><span class="p">:</span> <span class="s2">"travis@example.com"</span><span class="p">,</span>
    <span class="s2">"billing_address"</span><span class="p">:</span> <span class="p">{</span>
      <span class="s2">"first_name"</span><span class="p">:</span> <span class="s2">"Travis"</span><span class="p">,</span>
      <span class="s2">"last_name"</span><span class="p">:</span> <span class="s2">"Pastrana"</span><span class="p">,</span>
      <span class="s2">"address1"</span><span class="p">:</span> <span class="s2">"Muster Str. 12"</span><span class="p">,</span>
      <span class="s2">"zip_code"</span><span class="p">:</span> <span class="s2">"10178"</span><span class="p">,</span>
      <span class="s2">"city"</span><span class="p">:</span> <span class="s2">"Berlin"</span><span class="p">,</span>
      <span class="s2">"country"</span><span class="p">:</span> <span class="s2">"DE"</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">).</span><span class="nx">send</span><span class="p">()</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">success</span><span class="p">)</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">failure</span><span class="p">);</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>curl https://username:password@gate.emerchantpay.net/process/TERMINAL-TOKEN <span class="se">\</span>
   -H <span class="s2">"Content-Type: text/xml"</span> <span class="se">\</span>
   -d <span class="s1">'
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;sofort&lt;/transaction_type&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;usage&gt;40208 concert tickets&lt;/usage&gt;
  &lt;remote_ip&gt;245.253.2.12&lt;/remote_ip&gt;
  &lt;return_success_url&gt;http://www.example.com/success&lt;/return_success_url&gt;
  &lt;return_failure_url&gt;http://www.example.com/failure&lt;/return_failure_url&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;EUR&lt;/currency&gt;
  &lt;customer_email&gt;travis@example.com&lt;/customer_email&gt;
  &lt;billing_address&gt;
    &lt;first_name&gt;Travis&lt;/first_name&gt;
    &lt;last_name&gt;Pastrana&lt;/last_name&gt;
    &lt;address1&gt;Muster Str. 12&lt;/address1&gt;
    &lt;zip_code&gt;10178&lt;/zip_code&gt;
    &lt;city&gt;Berlin&lt;/city&gt;
    &lt;country&gt;DE&lt;/country&gt;
  &lt;/billing_address&gt;
&lt;/payment_transaction&gt;'</span>
</code></pre>

<p><strong>Request Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>required</td>
<td>string(255)</td>
<td>The transaction type: <strong>sofort</strong></td>
</tr>
<tr>
<td>transaction_id</td>
<td>required</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>usage</td>
<td>optional</td>
<td>string(255)</td>
<td>Description of the transaction for later use</td>
</tr>
<tr>
<td>remote_ip</td>
<td>required</td>
<td>IPv4 address</td>
<td>IPv4 address of customer</td>
</tr>
<tr>
<td>return_success_url</td>
<td>required</td>
<td>url</td>
<td>URL where customer is sent to after successful payment</td>
</tr>
<tr>
<td>return_failure_url</td>
<td>required</td>
<td>url</td>
<td>URL where customer is sent to after unsuccessful payment</td>
</tr>
<tr>
<td>amount</td>
<td>required</td>
<td>integer &gt; 0</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>required</td>
<td>string(3)</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>customer_email</td>
<td>required</td>
<td>e-mail address</td>
<td>Must contain valid e-mail of customer</td>
</tr>
<tr>
<td>customer_phone</td>
<td>required*</td>
<td>string(32)</td>
<td>Must contain valid phone number of customer</td>
</tr>
<tr>
<td>customer_bank_id</td>
<td>optional</td>
<td>string(12)</td>
<td>The bank id of the bank where the cutomer resides</td>
</tr>
<tr>
<td>bank_account_number</td>
<td>optional</td>
<td>string(24)</td>
<td>Bank identification number of the customer</td>
</tr>
<tr>
<td><strong>billing_address</strong></td>
<td>required</td>
<td></td>
<td>See <a href="#required-vs-optional-api-params">Required vs Optional API params</a> for details</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;first_name</td>
<td>required*</td>
<td>string(255)</td>
<td>Customer first name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;last_name</td>
<td>required*</td>
<td>string(255)</td>
<td>Customer last name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address1</td>
<td>required*</td>
<td>string(255)</td>
<td>Primary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address2</td>
<td>required*</td>
<td>string(255)</td>
<td>Secondary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;zip_code</td>
<td>required*</td>
<td>string</td>
<td>ZIP code</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;city</td>
<td>required*</td>
<td>string(255)</td>
<td>City</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;state</td>
<td>required*</td>
<td>string(2)</td>
<td>State code in <a href="https://en.wikipedia.org/wiki/ISO_3166-2">ISO 3166-2</a>, required for USA and Canada</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;country</td>
<td>required</td>
<td>string(2)</td>
<td>Country code in <a href="https://www.iso.org/iso-3166-country-codes.html">ISO 3166</a></td>
</tr>
<tr>
<td><strong>shipping_address</strong></td>
<td>optional</td>
<td></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;first_name</td>
<td>optional</td>
<td>string(255)</td>
<td>Customer first name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;last_name</td>
<td>optional</td>
<td>string(255)</td>
<td>Customer last name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address1</td>
<td>optional</td>
<td>string(255)</td>
<td>Primary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address2</td>
<td>optional</td>
<td>string(255)</td>
<td>Secondary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;zip_code</td>
<td>optional</td>
<td>string</td>
<td>ZIP code</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;city</td>
<td>optional</td>
<td>string(255)</td>
<td>City</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;state</td>
<td>optional</td>
<td>string(2)</td>
<td>State code in <a href="https://en.wikipedia.org/wiki/ISO_3166-2">ISO 3166-2</a>, required for USA and Canada</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;country</td>
<td>optional</td>
<td>string(2)</td>
<td>Country code in <a href="https://www.iso.org/iso-3166-country-codes.html">ISO 3166</a></td>
</tr>
</tbody></table>

<p><code>required* = conditionally required</code></p>

<p><strong>Supported countries:</strong></p>

<table><thead>
<tr>
<th>Country name</th>
<th>Country code</th>
</tr>
</thead><tbody>
<tr>
<td>Austria</td>
<td>AT</td>
</tr>
<tr>
<td>Belgium</td>
<td>BE</td>
</tr>
<tr>
<td>France</td>
<td>FR</td>
</tr>
<tr>
<td>Germany</td>
<td>DE</td>
</tr>
<tr>
<td>Italy</td>
<td>IT</td>
</tr>
<tr>
<td>Netherlands</td>
<td>NL</td>
</tr>
<tr>
<td>Poland</td>
<td>PL</td>
</tr>
<tr>
<td>Spain</td>
<td>ES</td>
</tr>
<tr>
<td>Switzerland</td>
<td>CH</td>
</tr>
<tr>
<td>United Kingdom</td>
<td>GB</td>
</tr>
</tbody></table>

<blockquote>
<p>Successful Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>stdClass Object
(
    [transaction_type] =&gt; sofort
    [status] =&gt; approved
    [mode] =&gt; live
    [transaction_id] =&gt; 43671
    [unique_id] =&gt; 44177a21403427eb96664a6d7e5d5d48
    [technical_message] =&gt; Transaction successful!
    [message] =&gt; Transaction successful!
    [redirect_url] =&gt; https://gate.emerchantpay.net/redirect/to_acquirer/649e1ff35c61
    [timestamp] =&gt; DateTime Object
        (
            [date] =&gt; 2019-03-14 12:06:00.000000
            [timezone_type] =&gt; 2
            [timezone] =&gt; Z
        )
    [descriptor] =&gt; Descriptor one
    [amount] =&gt; 100
    [currency] =&gt; EUR
    [sent_to_acquirer] =&gt; true
)
</code></pre>

<pre class="highlight java tab-java"><code><span class="o">&lt;</span><span class="n">payment_response</span> <span class="n">content</span><span class="o">=[</span>
    <span class="o">&lt;</span><span class="n">transaction_type</span> <span class="n">content</span><span class="o">=[</span><span class="n">sofort</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">status</span> <span class="n">content</span><span class="o">=[</span><span class="n">approved</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">mode</span> <span class="n">content</span><span class="o">=[</span><span class="n">live</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">transaction_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">43671</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">unique_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">44177</span><span class="n">a21403427eb96664a6d7e5d5d48</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">technical_message</span> <span class="n">content</span><span class="o">=[</span><span class="n">Transaction</span> <span class="n">successful</span><span class="o">!]&gt;</span>
    <span class="o">&lt;</span><span class="n">message</span> <span class="n">content</span><span class="o">=[</span><span class="n">Transaction</span> <span class="n">successful</span><span class="o">!]&gt;</span>
    <span class="o">&lt;</span><span class="n">redirect_url</span> <span class="n">content</span><span class="o">=[</span><span class="nl">https:</span><span class="c1">//gate.emerchantpay.net/redirect/to_acquirer/649e1ff35c61]&gt;</span>
    <span class="o">&lt;</span><span class="n">timestamp</span> <span class="n">content</span><span class="o">=[</span><span class="mi">2019</span><span class="o">-</span><span class="mo">03</span><span class="o">-</span><span class="mi">14</span><span class="nl">T12:</span><span class="mo">06</span><span class="o">:</span><span class="mo">00</span><span class="n">Z</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">descriptor</span> <span class="n">content</span><span class="o">=[</span><span class="n">Descriptor</span> <span class="n">one</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">amount</span> <span class="n">content</span><span class="o">=[</span><span class="mi">100</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">currency</span> <span class="n">content</span><span class="o">=[</span><span class="n">EUR</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">sent_to_acquirer</span> <span class="n">content</span><span class="o">=[</span><span class="kc">true</span><span class="o">]&gt;</span>
<span class="o">]&gt;</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="p">{</span>
    <span class="nl">transaction_type</span><span class="p">:</span> <span class="s2">"sofort"</span><span class="p">,</span>
    <span class="nx">status</span><span class="p">:</span> <span class="s2">"approved"</span><span class="p">,</span>
    <span class="nx">mode</span><span class="p">:</span> <span class="s2">"live"</span><span class="p">,</span>
    <span class="nx">transaction_id</span><span class="p">:</span> <span class="s2">"43671"</span><span class="p">,</span>
    <span class="nx">unique_id</span><span class="p">:</span> <span class="s2">"44177a21403427eb96664a6d7e5d5d48"</span><span class="p">,</span>
    <span class="nx">technical_message</span><span class="p">:</span> <span class="s2">"Transaction successful!"</span><span class="p">,</span>
    <span class="nx">message</span><span class="p">:</span> <span class="s2">"Transaction successful!"</span><span class="p">,</span>
    <span class="nx">redirect_url</span><span class="p">:</span> <span class="s2">"https://gate.emerchantpay.net/redirect/to_acquirer/649e1ff35c61"</span><span class="p">,</span>
    <span class="nx">timestamp</span><span class="p">:</span> <span class="s2">"2019-03-14T12:06:00Z"</span><span class="p">,</span>
    <span class="nx">descriptor</span><span class="p">:</span> <span class="s2">"Descriptor one"</span><span class="p">,</span>
    <span class="nx">amount</span><span class="p">:</span> <span class="s2">"100"</span><span class="p">,</span>
    <span class="nx">currency</span><span class="p">:</span> <span class="s2">"EUR"</span><span class="p">,</span>
    <span class="nx">sent_to_acquirer</span><span class="p">:</span> <span class="s2">"true"</span><span class="p">,</span>
<span class="p">}</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;sofort&lt;/transaction_type&gt;
  &lt;status&gt;approved&lt;/status&gt;
  &lt;mode&gt;live&lt;/mode&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;technical_message&gt;Transaction successful!&lt;/technical_message&gt;
  &lt;message&gt;Transaction successful!&lt;/message&gt;
  &lt;redirect_url&gt;https://gate.emerchantpay.net/redirect/to_acquirer/649e1ff35c61&lt;/redirect_url&gt;
  &lt;timestamp&gt;2019-03-14T12:06:00Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;EUR&lt;/currency&gt;
  &lt;sent_to_acquirer&gt;true&lt;/sent_to_acquirer&gt;
&lt;/payment_transaction&gt;
</code></pre>

<p><strong>Successful Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>The transaction type</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>transaction_id</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>unique_id</td>
<td>string(32)</td>
<td>Unique id defined by gate (must later be used if capturing, voiding or refunding a transaction)</td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
<tr>
<td>message</td>
<td>string(255)</td>
<td>Human readable error message which can be displayed to users.</td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>redirect_url</td>
<td>url</td>
<td>URL where user has to be redirected to complete payment process. It is available for asynchronous mode</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when the transaction was processed in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Combined date and time</a> e.g. 2007-08- 30T17:46:11Z</td>
</tr>
<tr>
<td>descriptor</td>
<td>string</td>
<td>Static descriptor MID info as configured on the gateway</td>
</tr>
<tr>
<td>amount</td>
<td>integer</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>sent_to_acquirer</td>
<td>string</td>
<td>&quot;true&quot; or &quot;false&quot;</td>
</tr>
</tbody></table>

<blockquote>
<p>Error Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>stdClass Object
(
    [transaction_type] =&gt; sofort
    [status] =&gt; error
    [mode] =&gt; live
    [transaction_id] =&gt; 43671
    [unique_id] =&gt; 44177a21403427eb96664a6d7e5d5d48
    [code] =&gt; 110
    [message] =&gt; Something went wrong, please contact support!
    [timestamp] =&gt; DateTime Object
        (
            [date] =&gt; 2019-03-14 12:06:00.000000
            [timezone_type] =&gt; 2
            [timezone] =&gt; Z
        )
    [descriptor] =&gt; Descriptor one
    [amount] =&gt; 100
    [currency] =&gt; EUR
    [sent_to_acquirer] =&gt; true
)
</code></pre>

<pre class="highlight java tab-java"><code><span class="o">&lt;</span><span class="n">payment_response</span> <span class="n">content</span><span class="o">=[</span>
    <span class="o">&lt;</span><span class="n">transaction_type</span> <span class="n">content</span><span class="o">=[</span><span class="n">sofort</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">status</span> <span class="n">content</span><span class="o">=[</span><span class="n">error</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">mode</span> <span class="n">content</span><span class="o">=[</span><span class="n">live</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">transaction_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">43671</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">unique_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">44177</span><span class="n">a21403427eb96664a6d7e5d5d48</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">code</span> <span class="n">content</span><span class="o">=[</span><span class="mi">110</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">message</span> <span class="n">content</span><span class="o">=[</span><span class="n">Something</span> <span class="n">went</span> <span class="n">wrong</span><span class="o">,</span> <span class="n">please</span> <span class="n">contact</span> <span class="n">support</span><span class="o">!]&gt;</span>
    <span class="o">&lt;</span><span class="n">timestamp</span> <span class="n">content</span><span class="o">=[</span><span class="mi">2019</span><span class="o">-</span><span class="mo">03</span><span class="o">-</span><span class="mi">14</span><span class="nl">T12:</span><span class="mo">06</span><span class="o">:</span><span class="mo">00</span><span class="n">Z</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">descriptor</span> <span class="n">content</span><span class="o">=[</span><span class="n">Descriptor</span> <span class="n">one</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">amount</span> <span class="n">content</span><span class="o">=[</span><span class="mi">100</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">currency</span> <span class="n">content</span><span class="o">=[</span><span class="n">EUR</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">sent_to_acquirer</span> <span class="n">content</span><span class="o">=[</span><span class="kc">true</span><span class="o">]&gt;</span>
<span class="o">]&gt;</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="p">{</span>
    <span class="nl">transaction_type</span><span class="p">:</span> <span class="s2">"sofort"</span><span class="p">,</span>
    <span class="nx">status</span><span class="p">:</span> <span class="s2">"error"</span><span class="p">,</span>
    <span class="nx">mode</span><span class="p">:</span> <span class="s2">"live"</span><span class="p">,</span>
    <span class="nx">transaction_id</span><span class="p">:</span> <span class="s2">"43671"</span><span class="p">,</span>
    <span class="nx">unique_id</span><span class="p">:</span> <span class="s2">"44177a21403427eb96664a6d7e5d5d48"</span><span class="p">,</span>
    <span class="nx">code</span><span class="p">:</span> <span class="s2">"110"</span><span class="p">,</span>
    <span class="nx">message</span><span class="p">:</span> <span class="s2">"Something went wrong, please contact support!"</span><span class="p">,</span>
    <span class="nx">timestamp</span><span class="p">:</span> <span class="s2">"2019-03-14T12:06:00Z"</span><span class="p">,</span>
    <span class="nx">descriptor</span><span class="p">:</span> <span class="s2">"Descriptor one"</span><span class="p">,</span>
    <span class="nx">amount</span><span class="p">:</span> <span class="s2">"100"</span><span class="p">,</span>
    <span class="nx">currency</span><span class="p">:</span> <span class="s2">"EUR"</span><span class="p">,</span>
    <span class="nx">sent_to_acquirer</span><span class="p">:</span> <span class="s2">"true"</span><span class="p">,</span>
<span class="p">}</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;sofort&lt;/transaction_type&gt;
  &lt;status&gt;error&lt;/status&gt;
  &lt;mode&gt;live&lt;/mode&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;code&gt;110&lt;/code&gt;
  &lt;message&gt;Something went wrong, please contact support!&lt;/message&gt;
  &lt;timestamp&gt;2019-03-14T12:06:00Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;EUR&lt;/currency&gt;
  &lt;sent_to_acquirer&gt;true&lt;/sent_to_acquirer&gt;
&lt;/payment_transaction&gt;
</code></pre>

<p><strong>Error Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>The transaction type</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>transaction_id</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>unique_id</td>
<td>string(32)</td>
<td>Unique id defined by gate (must later be used if capturing, voiding or refunding a transaction)</td>
</tr>
<tr>
<td>code</td>
<td>integer</td>
<td>Error code according to <a href="#error-code-table">Error code table</a></td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
<tr>
<td>message</td>
<td>string(255)</td>
<td>Human readable error message which can be displayed to users.</td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when the transaction was processed in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Combined date and time</a> e.g. 2007-08- 30T17:46:11Z</td>
</tr>
<tr>
<td>descriptor</td>
<td>string</td>
<td>Static descriptor MID info as configured on the gateway</td>
</tr>
<tr>
<td>amount</td>
<td>integer</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>sent_to_acquirer</td>
<td>string</td>
<td>&quot;true&quot; or &quot;false&quot;</td>
</tr>
</tbody></table>
<h3 id='trustly-sale'>Trustly Sale</h3>
<p>Trustly is an oBeP-style alternative payment method that allows you to pay directly with your ebank account.</p>

<p>It has two transaction types sale and withdrawal. After initiating a transaction Trustly will redirect you to their page.</p>

<p>There you have to select your bank and log in with your regular access codes. Choose the account from which you wish to pay (for example, your savings account or current account).</p>

<blockquote>
<p>Request</p>
</blockquote>

<pre class="highlight php tab-php"><code><span class="cp">&lt;?php</span>

<span class="c1">// Load the pre-configured ini file...
</span><span class="nx">\Genesis\Config</span><span class="o">::</span><span class="na">loadSettings</span><span class="p">(</span><span class="s1">'/path/to/config.ini'</span><span class="p">);</span>

<span class="nv">$genesis</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Genesis</span><span class="p">(</span><span class="s1">'Financial\Alternatives\Trustly\Sale'</span><span class="p">);</span>
<span class="nv">$request</span> <span class="o">=</span> <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">request</span><span class="p">();</span>

<span class="nv">$request</span>
  <span class="o">-&gt;</span><span class="na">setTransactionId</span><span class="p">(</span><span class="s1">'43671'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setPaymentType</span><span class="p">(</span><span class="s1">''</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setUsage</span><span class="p">(</span><span class="s1">'40208 concert tickets'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setRemoteIp</span><span class="p">(</span><span class="s1">'245.253.2.12'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setNotificationUrl</span><span class="p">(</span><span class="s1">'https://www.example.com/notification'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setReturnSuccessUrl</span><span class="p">(</span><span class="s1">'http://www.example.com/success'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setReturnFailureUrl</span><span class="p">(</span><span class="s1">'http://www.example.com/failure'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setAmount</span><span class="p">(</span><span class="s1">'100'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCurrency</span><span class="p">(</span><span class="s1">'EUR'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCustomerEmail</span><span class="p">(</span><span class="s1">'travis@example.com'</span><span class="p">)</span>


  <span class="c1">// Billing Address
</span>  <span class="o">-&gt;</span><span class="na">setBillingFirstName</span><span class="p">(</span><span class="s1">'Max'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingLastName</span><span class="p">(</span><span class="s1">'Mustermann'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingAddress1</span><span class="p">(</span><span class="s1">'Muster Str. 12'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingZipCode</span><span class="p">(</span><span class="s1">'10178'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingCity</span><span class="p">(</span><span class="s1">'Berlin'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingCountry</span><span class="p">(</span><span class="s1">'DE'</span><span class="p">);</span>

<span class="k">try</span> <span class="p">{</span>
    <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">execute</span><span class="p">();</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">response</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">getResponseObject</span><span class="p">();</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">\Exception</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$e</span><span class="o">-&gt;</span><span class="na">getMessage</span><span class="p">();</span>
<span class="p">}</span>
</code></pre>

<pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.GenesisClient</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.TransactionResult</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.constants.Endpoints</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.constants.Environments</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.requests.financial.apm.TrustlySaleRequest</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.model.Transaction</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Configuration</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Country</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Currency</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.math.BigDecimal</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.MalformedURLException</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.URL</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">GenesisExample</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">MalformedURLException</span> <span class="o">{</span>

    <span class="c1">// Create configuration</span>
    <span class="n">Configuration</span> <span class="n">configuration</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Configuration</span><span class="o">(</span><span class="n">Environments</span><span class="o">.</span><span class="na">STAGING</span><span class="o">,</span> <span class="n">Endpoints</span><span class="o">.</span><span class="na">EMERCHANTPAY</span><span class="o">);</span>

    <span class="n">configuration</span><span class="o">.</span><span class="na">setUsername</span><span class="o">(</span><span class="s">"SET_YOUR_USERNAME"</span><span class="o">);</span>
    <span class="n">configuration</span><span class="o">.</span><span class="na">setPassword</span><span class="o">(</span><span class="s">"SET_YOUR_PASSWORD"</span><span class="o">);</span>
    <span class="n">configuration</span><span class="o">.</span><span class="na">setToken</span><span class="o">(</span><span class="s">"SET_YOUR_TOKEN"</span><span class="o">);</span>

    <span class="n">TrustlySaleRequest</span> <span class="n">request</span> <span class="o">=</span> <span class="k">new</span> <span class="n">TrustlySaleRequest</span><span class="o">();</span>

    <span class="n">request</span><span class="o">.</span><span class="na">setTransactionId</span><span class="o">(</span><span class="s">"43671"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setPaymentType</span><span class="o">(</span><span class="s">""</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setUsage</span><span class="o">(</span><span class="s">"40208 concert tickets"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setRemoteIp</span><span class="o">(</span><span class="s">"245.253.2.12"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setNotificationUrl</span><span class="o">(</span><span class="k">new</span> <span class="n">URL</span><span class="o">(</span><span class="s">"https://www.example.com/notification"</span><span class="o">));</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setReturnSuccessUrl</span><span class="o">(</span><span class="k">new</span> <span class="n">URL</span><span class="o">(</span><span class="s">"http://www.example.com/success"</span><span class="o">));</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setReturnFailureUrl</span><span class="o">(</span><span class="k">new</span> <span class="n">URL</span><span class="o">(</span><span class="s">"http://www.example.com/failure"</span><span class="o">));</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setAmount</span><span class="o">(</span><span class="k">new</span> <span class="n">BigDecimal</span><span class="o">(</span><span class="mi">100</span><span class="o">));</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCurrency</span><span class="o">(</span><span class="s">"EUR"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCustomerEmail</span><span class="o">(</span><span class="s">"travis@example.com"</span><span class="o">);</span>


    <span class="c1">// Billing Address</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingFirstname</span><span class="o">(</span><span class="s">"Max"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingLastname</span><span class="o">(</span><span class="s">"Mustermann"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingPrimaryAddress</span><span class="o">(</span><span class="s">"Muster Str. 12"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingZipCode</span><span class="o">(</span><span class="s">"10178"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingCity</span><span class="o">(</span><span class="s">"Berlin"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingCountry</span><span class="o">(</span><span class="s">"DE"</span><span class="o">);</span>

    <span class="n">GenesisClient</span> <span class="n">client</span> <span class="o">=</span> <span class="k">new</span> <span class="n">GenesisClient</span><span class="o">(</span><span class="n">configuration</span><span class="o">,</span> <span class="n">request</span><span class="o">);</span>
    <span class="n">client</span><span class="o">.</span><span class="na">execute</span><span class="o">();</span>

    <span class="c1">// Parse Payment result</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">client</span><span class="o">.</span><span class="na">getResponse</span><span class="o">());</span>

  <span class="o">}</span>
<span class="o">}</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="kd">var</span> <span class="nx">genesis</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'genesis.js/lib/genesis.js'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">transaction</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">genesis</span><span class="p">.</span><span class="nx">transaction</span><span class="p">();</span>

<span class="kd">var</span> <span class="nx">failure</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">reason</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">reason</span><span class="p">);</span>
<span class="p">};</span>

<span class="kd">var</span> <span class="nx">success</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>

<span class="nx">transaction</span><span class="p">.</span><span class="nx">trustly_sale</span><span class="p">(</span>
  <span class="p">{</span>
    <span class="s2">"transaction_id"</span><span class="p">:</span> <span class="s2">"43671"</span><span class="p">,</span>
    <span class="s2">"payment_type"</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
    <span class="s2">"usage"</span><span class="p">:</span> <span class="s2">"40208 concert tickets"</span><span class="p">,</span>
    <span class="s2">"remote_ip"</span><span class="p">:</span> <span class="s2">"245.253.2.12"</span><span class="p">,</span>
    <span class="s2">"notification_url"</span><span class="p">:</span> <span class="s2">"https://www.example.com/notification"</span><span class="p">,</span>
    <span class="s2">"return_success_url"</span><span class="p">:</span> <span class="s2">"http://www.example.com/success"</span><span class="p">,</span>
    <span class="s2">"return_failure_url"</span><span class="p">:</span> <span class="s2">"http://www.example.com/failure"</span><span class="p">,</span>
    <span class="s2">"amount"</span><span class="p">:</span> <span class="s2">"100"</span><span class="p">,</span>
    <span class="s2">"currency"</span><span class="p">:</span> <span class="s2">"EUR"</span><span class="p">,</span>
    <span class="s2">"customer_email"</span><span class="p">:</span> <span class="s2">"travis@example.com"</span><span class="p">,</span>
    <span class="s2">"billing_address"</span><span class="p">:</span> <span class="p">{</span>
      <span class="s2">"first_name"</span><span class="p">:</span> <span class="s2">"Max"</span><span class="p">,</span>
      <span class="s2">"last_name"</span><span class="p">:</span> <span class="s2">"Mustermann"</span><span class="p">,</span>
      <span class="s2">"address1"</span><span class="p">:</span> <span class="s2">"Muster Str. 12"</span><span class="p">,</span>
      <span class="s2">"zip_code"</span><span class="p">:</span> <span class="s2">"10178"</span><span class="p">,</span>
      <span class="s2">"city"</span><span class="p">:</span> <span class="s2">"Berlin"</span><span class="p">,</span>
      <span class="s2">"country"</span><span class="p">:</span> <span class="s2">"DE"</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">).</span><span class="nx">send</span><span class="p">()</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">success</span><span class="p">)</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">failure</span><span class="p">);</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>curl https://username:password@gate.emerchantpay.net/process/TERMINAL-TOKEN <span class="se">\</span>
   -H <span class="s2">"Content-Type: text/xml"</span> <span class="se">\</span>
   -d <span class="s1">'
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;trustly_sale&lt;/transaction_type&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;payment_type&gt;&lt;/payment_type&gt;
  &lt;usage&gt;40208 concert tickets&lt;/usage&gt;
  &lt;remote_ip&gt;245.253.2.12&lt;/remote_ip&gt;
  &lt;notification_url&gt;https://www.example.com/notification&lt;/notification_url&gt;
  &lt;return_success_url&gt;http://www.example.com/success&lt;/return_success_url&gt;
  &lt;return_failure_url&gt;http://www.example.com/failure&lt;/return_failure_url&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;EUR&lt;/currency&gt;
  &lt;customer_email&gt;travis@example.com&lt;/customer_email&gt;
  &lt;billing_address&gt;
    &lt;first_name&gt;Max&lt;/first_name&gt;
    &lt;last_name&gt;Mustermann&lt;/last_name&gt;
    &lt;address1&gt;Muster Str. 12&lt;/address1&gt;
    &lt;zip_code&gt;10178&lt;/zip_code&gt;
    &lt;city&gt;Berlin&lt;/city&gt;
    &lt;country&gt;DE&lt;/country&gt;
  &lt;/billing_address&gt;
&lt;/payment_transaction&gt;'</span>
</code></pre>

<p><strong>Request Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>required</td>
<td>string(255)</td>
<td>The transaction type: <strong>trustly_sale</strong></td>
</tr>
<tr>
<td>transaction_id</td>
<td>required</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>usage</td>
<td>optional</td>
<td>string(255)</td>
<td>Description of the transaction for later use</td>
</tr>
<tr>
<td>remote_ip</td>
<td>required</td>
<td>IPv4 address</td>
<td>IPv4 address of customer</td>
</tr>
<tr>
<td>return_success_url</td>
<td>required</td>
<td>url</td>
<td>URL where customer is sent to after successful payment</td>
</tr>
<tr>
<td>return_failure_url</td>
<td>required</td>
<td>url</td>
<td>URL where customer is sent to after unsuccessful payment</td>
</tr>
<tr>
<td>amount</td>
<td>required</td>
<td>integer &gt; 0</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>required</td>
<td>string(3)</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>customer_email</td>
<td>required</td>
<td>e-mail address</td>
<td>Must contain valid e-mail of customer</td>
</tr>
<tr>
<td>customer_phone</td>
<td>required*</td>
<td>string(32)</td>
<td>Must contain valid phone number of customer</td>
</tr>
<tr>
<td><strong>billing_address</strong></td>
<td>required</td>
<td></td>
<td>See <a href="#required-vs-optional-api-params">Required vs Optional API params</a> for details</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;first_name</td>
<td>required*</td>
<td>string(255)</td>
<td>Customer first name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;last_name</td>
<td>required*</td>
<td>string(255)</td>
<td>Customer last name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address1</td>
<td>required*</td>
<td>string(255)</td>
<td>Primary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address2</td>
<td>required*</td>
<td>string(255)</td>
<td>Secondary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;zip_code</td>
<td>required*</td>
<td>string</td>
<td>ZIP code</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;city</td>
<td>required*</td>
<td>string(255)</td>
<td>City</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;state</td>
<td>required*</td>
<td>string(2)</td>
<td>State code in <a href="https://en.wikipedia.org/wiki/ISO_3166-2">ISO 3166-2</a>, required for USA and Canada</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;country</td>
<td>required</td>
<td>string(2)</td>
<td>Country code in <a href="https://www.iso.org/iso-3166-country-codes.html">ISO 3166</a></td>
</tr>
</tbody></table>

<p><code>required* = conditionally required</code></p>

<p><strong>Supported countries:</strong></p>

<table><thead>
<tr>
<th>Country name</th>
<th>Country code</th>
</tr>
</thead><tbody>
<tr>
<td>Austria</td>
<td>AT</td>
</tr>
<tr>
<td>Belgium</td>
<td>BE</td>
</tr>
<tr>
<td>Bulgaria</td>
<td>BG</td>
</tr>
<tr>
<td>Croatia</td>
<td>HR</td>
</tr>
<tr>
<td>Czech Republic</td>
<td>CZ</td>
</tr>
<tr>
<td>Denmark</td>
<td>DK</td>
</tr>
<tr>
<td>Estonia</td>
<td>EE</td>
</tr>
<tr>
<td>Finland</td>
<td>FI</td>
</tr>
<tr>
<td>Germany</td>
<td>DE</td>
</tr>
<tr>
<td>Greece</td>
<td>GR</td>
</tr>
<tr>
<td>Hungary</td>
<td>HU</td>
</tr>
<tr>
<td>Ireland</td>
<td>IE</td>
</tr>
<tr>
<td>Italy</td>
<td>IT</td>
</tr>
<tr>
<td>Latvia</td>
<td>LV</td>
</tr>
<tr>
<td>Lithuania</td>
<td>LT</td>
</tr>
<tr>
<td>Netherlands</td>
<td>NL</td>
</tr>
<tr>
<td>Norway</td>
<td>NO</td>
</tr>
<tr>
<td>Poland</td>
<td>PL</td>
</tr>
<tr>
<td>Portugal</td>
<td>PT</td>
</tr>
<tr>
<td>Romania</td>
<td>RO</td>
</tr>
<tr>
<td>Slovakia</td>
<td>SK</td>
</tr>
<tr>
<td>Slovenia</td>
<td>SI</td>
</tr>
<tr>
<td>Spain</td>
<td>ES</td>
</tr>
<tr>
<td>Sweden</td>
<td>SE</td>
</tr>
<tr>
<td>United Kingdom</td>
<td>GB</td>
</tr>
</tbody></table>

<blockquote>
<p>Successful Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>stdClass Object
(
    [transaction_type] =&gt; trustly_sale
    [status] =&gt; pending_async
    [mode] =&gt; live
    [transaction_id] =&gt; 43671
    [unique_id] =&gt; 44177a21403427eb96664a6d7e5d5d48
    [technical_message] =&gt; Transaction successful!
    [message] =&gt; Transaction successful!
    [redirect_url] =&gt; https://gate.emerchantpay.net/redirect/to_acquirer/649e1ff35c61
    [timestamp] =&gt; DateTime Object
        (
            [date] =&gt; 2019-03-14 12:06:00.000000
            [timezone_type] =&gt; 2
            [timezone] =&gt; Z
        )
    [descriptor] =&gt; Descriptor one
    [amount] =&gt; 100
    [currency] =&gt; EUR
    [sent_to_acquirer] =&gt; true
)
</code></pre>

<pre class="highlight java tab-java"><code><span class="o">&lt;</span><span class="n">payment_response</span> <span class="n">content</span><span class="o">=[</span>
    <span class="o">&lt;</span><span class="n">transaction_type</span> <span class="n">content</span><span class="o">=[</span><span class="n">trustly_sale</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">status</span> <span class="n">content</span><span class="o">=[</span><span class="n">pending_async</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">mode</span> <span class="n">content</span><span class="o">=[</span><span class="n">live</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">transaction_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">43671</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">unique_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">44177</span><span class="n">a21403427eb96664a6d7e5d5d48</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">technical_message</span> <span class="n">content</span><span class="o">=[</span><span class="n">Transaction</span> <span class="n">successful</span><span class="o">!]&gt;</span>
    <span class="o">&lt;</span><span class="n">message</span> <span class="n">content</span><span class="o">=[</span><span class="n">Transaction</span> <span class="n">successful</span><span class="o">!]&gt;</span>
    <span class="o">&lt;</span><span class="n">redirect_url</span> <span class="n">content</span><span class="o">=[</span><span class="nl">https:</span><span class="c1">//gate.emerchantpay.net/redirect/to_acquirer/649e1ff35c61]&gt;</span>
    <span class="o">&lt;</span><span class="n">timestamp</span> <span class="n">content</span><span class="o">=[</span><span class="mi">2019</span><span class="o">-</span><span class="mo">03</span><span class="o">-</span><span class="mi">14</span><span class="nl">T12:</span><span class="mo">06</span><span class="o">:</span><span class="mo">00</span><span class="n">Z</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">descriptor</span> <span class="n">content</span><span class="o">=[</span><span class="n">Descriptor</span> <span class="n">one</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">amount</span> <span class="n">content</span><span class="o">=[</span><span class="mi">100</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">currency</span> <span class="n">content</span><span class="o">=[</span><span class="n">EUR</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">sent_to_acquirer</span> <span class="n">content</span><span class="o">=[</span><span class="kc">true</span><span class="o">]&gt;</span>
<span class="o">]&gt;</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="p">{</span>
    <span class="nl">transaction_type</span><span class="p">:</span> <span class="s2">"trustly_sale"</span><span class="p">,</span>
    <span class="nx">status</span><span class="p">:</span> <span class="s2">"pending_async"</span><span class="p">,</span>
    <span class="nx">mode</span><span class="p">:</span> <span class="s2">"live"</span><span class="p">,</span>
    <span class="nx">transaction_id</span><span class="p">:</span> <span class="s2">"43671"</span><span class="p">,</span>
    <span class="nx">unique_id</span><span class="p">:</span> <span class="s2">"44177a21403427eb96664a6d7e5d5d48"</span><span class="p">,</span>
    <span class="nx">technical_message</span><span class="p">:</span> <span class="s2">"Transaction successful!"</span><span class="p">,</span>
    <span class="nx">message</span><span class="p">:</span> <span class="s2">"Transaction successful!"</span><span class="p">,</span>
    <span class="nx">redirect_url</span><span class="p">:</span> <span class="s2">"https://gate.emerchantpay.net/redirect/to_acquirer/649e1ff35c61"</span><span class="p">,</span>
    <span class="nx">timestamp</span><span class="p">:</span> <span class="s2">"2019-03-14T12:06:00Z"</span><span class="p">,</span>
    <span class="nx">descriptor</span><span class="p">:</span> <span class="s2">"Descriptor one"</span><span class="p">,</span>
    <span class="nx">amount</span><span class="p">:</span> <span class="s2">"100"</span><span class="p">,</span>
    <span class="nx">currency</span><span class="p">:</span> <span class="s2">"EUR"</span><span class="p">,</span>
    <span class="nx">sent_to_acquirer</span><span class="p">:</span> <span class="s2">"true"</span><span class="p">,</span>
<span class="p">}</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;trustly_sale&lt;/transaction_type&gt;
  &lt;status&gt;pending_async&lt;/status&gt;
  &lt;mode&gt;live&lt;/mode&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;technical_message&gt;Transaction successful!&lt;/technical_message&gt;
  &lt;message&gt;Transaction successful!&lt;/message&gt;
  &lt;redirect_url&gt;https://gate.emerchantpay.net/redirect/to_acquirer/649e1ff35c61&lt;/redirect_url&gt;
  &lt;timestamp&gt;2019-03-14T12:06:00Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;EUR&lt;/currency&gt;
  &lt;sent_to_acquirer&gt;true&lt;/sent_to_acquirer&gt;
&lt;/payment_transaction&gt;
</code></pre>

<p><strong>Successful Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>The transaction type</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>transaction_id</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>unique_id</td>
<td>string(32)</td>
<td>Unique id defined by gate (must later be used if capturing, voiding or refunding a transaction)</td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
<tr>
<td>message</td>
<td>string(255)</td>
<td>Human readable error message which can be displayed to users.</td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>redirect_url</td>
<td>url</td>
<td>URL where user has to be redirected to complete payment process. It is available for asynchronous mode</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when the transaction was processed in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Combined date and time</a> e.g. 2007-08- 30T17:46:11Z</td>
</tr>
<tr>
<td>descriptor</td>
<td>string</td>
<td>Static descriptor MID info as configured on the gateway</td>
</tr>
<tr>
<td>amount</td>
<td>integer</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>sent_to_acquirer</td>
<td>string</td>
<td>&quot;true&quot; or &quot;false&quot;</td>
</tr>
</tbody></table>

<blockquote>
<p>Error Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>stdClass Object
(
    [transaction_type] =&gt; trustly_sale
    [status] =&gt; error
    [mode] =&gt; live
    [transaction_id] =&gt; 43671
    [unique_id] =&gt; 44177a21403427eb96664a6d7e5d5d48
    [code] =&gt; 110
    [message] =&gt; Something went wrong, please contact support!
    [timestamp] =&gt; DateTime Object
        (
            [date] =&gt; 2019-03-14 12:06:00.000000
            [timezone_type] =&gt; 2
            [timezone] =&gt; Z
        )
    [descriptor] =&gt; Descriptor one
    [amount] =&gt; 100
    [currency] =&gt; EUR
    [sent_to_acquirer] =&gt; true
)
</code></pre>

<pre class="highlight java tab-java"><code><span class="o">&lt;</span><span class="n">payment_response</span> <span class="n">content</span><span class="o">=[</span>
    <span class="o">&lt;</span><span class="n">transaction_type</span> <span class="n">content</span><span class="o">=[</span><span class="n">trustly_sale</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">status</span> <span class="n">content</span><span class="o">=[</span><span class="n">error</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">mode</span> <span class="n">content</span><span class="o">=[</span><span class="n">live</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">transaction_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">43671</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">unique_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">44177</span><span class="n">a21403427eb96664a6d7e5d5d48</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">code</span> <span class="n">content</span><span class="o">=[</span><span class="mi">110</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">message</span> <span class="n">content</span><span class="o">=[</span><span class="n">Something</span> <span class="n">went</span> <span class="n">wrong</span><span class="o">,</span> <span class="n">please</span> <span class="n">contact</span> <span class="n">support</span><span class="o">!]&gt;</span>
    <span class="o">&lt;</span><span class="n">timestamp</span> <span class="n">content</span><span class="o">=[</span><span class="mi">2019</span><span class="o">-</span><span class="mo">03</span><span class="o">-</span><span class="mi">14</span><span class="nl">T12:</span><span class="mo">06</span><span class="o">:</span><span class="mo">00</span><span class="n">Z</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">descriptor</span> <span class="n">content</span><span class="o">=[</span><span class="n">Descriptor</span> <span class="n">one</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">amount</span> <span class="n">content</span><span class="o">=[</span><span class="mi">100</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">currency</span> <span class="n">content</span><span class="o">=[</span><span class="n">EUR</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">sent_to_acquirer</span> <span class="n">content</span><span class="o">=[</span><span class="kc">true</span><span class="o">]&gt;</span>
<span class="o">]&gt;</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="p">{</span>
    <span class="nl">transaction_type</span><span class="p">:</span> <span class="s2">"trustly_sale"</span><span class="p">,</span>
    <span class="nx">status</span><span class="p">:</span> <span class="s2">"error"</span><span class="p">,</span>
    <span class="nx">mode</span><span class="p">:</span> <span class="s2">"live"</span><span class="p">,</span>
    <span class="nx">transaction_id</span><span class="p">:</span> <span class="s2">"43671"</span><span class="p">,</span>
    <span class="nx">unique_id</span><span class="p">:</span> <span class="s2">"44177a21403427eb96664a6d7e5d5d48"</span><span class="p">,</span>
    <span class="nx">code</span><span class="p">:</span> <span class="s2">"110"</span><span class="p">,</span>
    <span class="nx">message</span><span class="p">:</span> <span class="s2">"Something went wrong, please contact support!"</span><span class="p">,</span>
    <span class="nx">timestamp</span><span class="p">:</span> <span class="s2">"2019-03-14T12:06:00Z"</span><span class="p">,</span>
    <span class="nx">descriptor</span><span class="p">:</span> <span class="s2">"Descriptor one"</span><span class="p">,</span>
    <span class="nx">amount</span><span class="p">:</span> <span class="s2">"100"</span><span class="p">,</span>
    <span class="nx">currency</span><span class="p">:</span> <span class="s2">"EUR"</span><span class="p">,</span>
    <span class="nx">sent_to_acquirer</span><span class="p">:</span> <span class="s2">"true"</span><span class="p">,</span>
<span class="p">}</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;trustly_sale&lt;/transaction_type&gt;
  &lt;status&gt;error&lt;/status&gt;
  &lt;mode&gt;live&lt;/mode&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;code&gt;110&lt;/code&gt;
  &lt;message&gt;Something went wrong, please contact support!&lt;/message&gt;
  &lt;timestamp&gt;2019-03-14T12:06:00Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;EUR&lt;/currency&gt;
  &lt;sent_to_acquirer&gt;true&lt;/sent_to_acquirer&gt;
&lt;/payment_transaction&gt;
</code></pre>

<p><strong>Error Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>The transaction type</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>transaction_id</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>unique_id</td>
<td>string(32)</td>
<td>Unique id defined by gate (must later be used if capturing, voiding or refunding a transaction)</td>
</tr>
<tr>
<td>code</td>
<td>integer</td>
<td>Error code according to <a href="#error-code-table">Error code table</a></td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
<tr>
<td>message</td>
<td>string(255)</td>
<td>Human readable error message which can be displayed to users.</td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when the transaction was processed in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Combined date and time</a> e.g. 2007-08- 30T17:46:11Z</td>
</tr>
<tr>
<td>descriptor</td>
<td>string</td>
<td>Static descriptor MID info as configured on the gateway</td>
</tr>
<tr>
<td>amount</td>
<td>integer</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>sent_to_acquirer</td>
<td>string</td>
<td>&quot;true&quot; or &quot;false&quot;</td>
</tr>
</tbody></table>
<h3 id='trustpay'>TrustPay</h3>
<p>TrustPay is a real-time bank transfer payment service, which is widely used in the Czech Republic and Slovakia.</p>

<blockquote>
<p>Request</p>
</blockquote>

<pre class="highlight php tab-php"><code><span class="cp">&lt;?php</span>

<span class="c1">// Load the pre-configured ini file...
</span><span class="nx">\Genesis\Config</span><span class="o">::</span><span class="na">loadSettings</span><span class="p">(</span><span class="s1">'/path/to/config.ini'</span><span class="p">);</span>

<span class="nv">$genesis</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Genesis</span><span class="p">(</span><span class="s1">'Financial\Alternatives\PPRO'</span><span class="p">);</span>
<span class="nv">$request</span> <span class="o">=</span> <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">request</span><span class="p">();</span>

<span class="nv">$request</span>
  <span class="o">-&gt;</span><span class="na">setTransactionId</span><span class="p">(</span><span class="s1">'43671'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setPaymentType</span><span class="p">(</span><span class="s1">'trustpay'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setUsage</span><span class="p">(</span><span class="s1">'40208 concert tickets'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setRemoteIp</span><span class="p">(</span><span class="s1">'245.253.2.12'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setReturnSuccessUrl</span><span class="p">(</span><span class="s1">'http://www.example.com/success'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setReturnFailureUrl</span><span class="p">(</span><span class="s1">'http://www.example.com/failure'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setAmount</span><span class="p">(</span><span class="s1">'100'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCurrency</span><span class="p">(</span><span class="s1">'EUR'</span><span class="p">)</span>


  <span class="c1">// Billing Address
</span>  <span class="o">-&gt;</span><span class="na">setBillingFirstName</span><span class="p">(</span><span class="s1">'Barney'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingLastName</span><span class="p">(</span><span class="s1">'Rubble'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingAddress1</span><span class="p">(</span><span class="s1">'14, Nerazdelni str'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingZipCode</span><span class="p">(</span><span class="s1">'1407'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingCity</span><span class="p">(</span><span class="s1">'Prague'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingCountry</span><span class="p">(</span><span class="s1">'CZ'</span><span class="p">);</span>

<span class="k">try</span> <span class="p">{</span>
    <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">execute</span><span class="p">();</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">response</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">getResponseObject</span><span class="p">();</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">\Exception</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$e</span><span class="o">-&gt;</span><span class="na">getMessage</span><span class="p">();</span>
<span class="p">}</span>
</code></pre>

<pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.GenesisClient</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.TransactionResult</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.constants.Endpoints</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.constants.Environments</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.requests.financial.apm.PProRequest</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.model.Transaction</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Configuration</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Country</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Currency</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.math.BigDecimal</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.MalformedURLException</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.URL</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">GenesisExample</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">MalformedURLException</span> <span class="o">{</span>

    <span class="c1">// Create configuration</span>
    <span class="n">Configuration</span> <span class="n">configuration</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Configuration</span><span class="o">(</span><span class="n">Environments</span><span class="o">.</span><span class="na">STAGING</span><span class="o">,</span> <span class="n">Endpoints</span><span class="o">.</span><span class="na">EMERCHANTPAY</span><span class="o">);</span>

    <span class="n">configuration</span><span class="o">.</span><span class="na">setUsername</span><span class="o">(</span><span class="s">"SET_YOUR_USERNAME"</span><span class="o">);</span>
    <span class="n">configuration</span><span class="o">.</span><span class="na">setPassword</span><span class="o">(</span><span class="s">"SET_YOUR_PASSWORD"</span><span class="o">);</span>
    <span class="n">configuration</span><span class="o">.</span><span class="na">setToken</span><span class="o">(</span><span class="s">"SET_YOUR_TOKEN"</span><span class="o">);</span>

    <span class="n">PProRequest</span> <span class="n">request</span> <span class="o">=</span> <span class="k">new</span> <span class="n">PProRequest</span><span class="o">();</span>

    <span class="n">request</span><span class="o">.</span><span class="na">setTransactionId</span><span class="o">(</span><span class="s">"43671"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setPaymentType</span><span class="o">(</span><span class="s">"trustpay"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setUsage</span><span class="o">(</span><span class="s">"40208 concert tickets"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setRemoteIp</span><span class="o">(</span><span class="s">"245.253.2.12"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setReturnSuccessUrl</span><span class="o">(</span><span class="k">new</span> <span class="n">URL</span><span class="o">(</span><span class="s">"http://www.example.com/success"</span><span class="o">));</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setReturnFailureUrl</span><span class="o">(</span><span class="k">new</span> <span class="n">URL</span><span class="o">(</span><span class="s">"http://www.example.com/failure"</span><span class="o">));</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setAmount</span><span class="o">(</span><span class="k">new</span> <span class="n">BigDecimal</span><span class="o">(</span><span class="mi">100</span><span class="o">));</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCurrency</span><span class="o">(</span><span class="s">"EUR"</span><span class="o">);</span>


    <span class="c1">// Billing Address</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingFirstname</span><span class="o">(</span><span class="s">"Barney"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingLastname</span><span class="o">(</span><span class="s">"Rubble"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingPrimaryAddress</span><span class="o">(</span><span class="s">"14, Nerazdelni str"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingZipCode</span><span class="o">(</span><span class="s">"1407"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingCity</span><span class="o">(</span><span class="s">"Prague"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingCountry</span><span class="o">(</span><span class="s">"CZ"</span><span class="o">);</span>

    <span class="n">GenesisClient</span> <span class="n">client</span> <span class="o">=</span> <span class="k">new</span> <span class="n">GenesisClient</span><span class="o">(</span><span class="n">configuration</span><span class="o">,</span> <span class="n">request</span><span class="o">);</span>
    <span class="n">client</span><span class="o">.</span><span class="na">execute</span><span class="o">();</span>

    <span class="c1">// Parse Payment result</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">client</span><span class="o">.</span><span class="na">getResponse</span><span class="o">());</span>

  <span class="o">}</span>
<span class="o">}</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="kd">var</span> <span class="nx">genesis</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'genesis.js/lib/genesis.js'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">transaction</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">genesis</span><span class="p">.</span><span class="nx">transaction</span><span class="p">();</span>

<span class="kd">var</span> <span class="nx">failure</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">reason</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">reason</span><span class="p">);</span>
<span class="p">};</span>

<span class="kd">var</span> <span class="nx">success</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>

<span class="nx">transaction</span><span class="p">.</span><span class="nx">ppro</span><span class="p">(</span>
  <span class="p">{</span>
    <span class="s2">"transaction_id"</span><span class="p">:</span> <span class="s2">"43671"</span><span class="p">,</span>
    <span class="s2">"payment_type"</span><span class="p">:</span> <span class="s2">"trustpay"</span><span class="p">,</span>
    <span class="s2">"usage"</span><span class="p">:</span> <span class="s2">"40208 concert tickets"</span><span class="p">,</span>
    <span class="s2">"remote_ip"</span><span class="p">:</span> <span class="s2">"245.253.2.12"</span><span class="p">,</span>
    <span class="s2">"return_success_url"</span><span class="p">:</span> <span class="s2">"http://www.example.com/success"</span><span class="p">,</span>
    <span class="s2">"return_failure_url"</span><span class="p">:</span> <span class="s2">"http://www.example.com/failure"</span><span class="p">,</span>
    <span class="s2">"amount"</span><span class="p">:</span> <span class="s2">"100"</span><span class="p">,</span>
    <span class="s2">"currency"</span><span class="p">:</span> <span class="s2">"EUR"</span><span class="p">,</span>
    <span class="s2">"billing_address"</span><span class="p">:</span> <span class="p">{</span>
      <span class="s2">"first_name"</span><span class="p">:</span> <span class="s2">"Barney"</span><span class="p">,</span>
      <span class="s2">"last_name"</span><span class="p">:</span> <span class="s2">"Rubble"</span><span class="p">,</span>
      <span class="s2">"address1"</span><span class="p">:</span> <span class="s2">"14, Nerazdelni str"</span><span class="p">,</span>
      <span class="s2">"zip_code"</span><span class="p">:</span> <span class="s2">"1407"</span><span class="p">,</span>
      <span class="s2">"city"</span><span class="p">:</span> <span class="s2">"Prague"</span><span class="p">,</span>
      <span class="s2">"country"</span><span class="p">:</span> <span class="s2">"CZ"</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">).</span><span class="nx">send</span><span class="p">()</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">success</span><span class="p">)</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">failure</span><span class="p">);</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>curl https://username:password@gate.emerchantpay.net/process/TERMINAL-TOKEN <span class="se">\</span>
   -H <span class="s2">"Content-Type: text/xml"</span> <span class="se">\</span>
   -d <span class="s1">'
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;ppro&lt;/transaction_type&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;payment_type&gt;trustpay&lt;/payment_type&gt;
  &lt;usage&gt;40208 concert tickets&lt;/usage&gt;
  &lt;remote_ip&gt;245.253.2.12&lt;/remote_ip&gt;
  &lt;return_success_url&gt;http://www.example.com/success&lt;/return_success_url&gt;
  &lt;return_failure_url&gt;http://www.example.com/failure&lt;/return_failure_url&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;EUR&lt;/currency&gt;
  &lt;billing_address&gt;
    &lt;first_name&gt;Barney&lt;/first_name&gt;
    &lt;last_name&gt;Rubble&lt;/last_name&gt;
    &lt;address1&gt;14, Nerazdelni str&lt;/address1&gt;
    &lt;zip_code&gt;1407&lt;/zip_code&gt;
    &lt;city&gt;Prague&lt;/city&gt;
    &lt;country&gt;CZ&lt;/country&gt;
  &lt;/billing_address&gt;
&lt;/payment_transaction&gt;'</span>
</code></pre>

<p><strong>Request Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>required</td>
<td>string(255)</td>
<td><strong>ppro</strong> or <strong>trustpay</strong>. Contact tech support at <a href="mailto:tech-support@emerchantpay.net">tech-support@emerchantpay.net</a> for more details.</td>
</tr>
<tr>
<td>transaction_id</td>
<td>required</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>payment_type</td>
<td>required<sup>1</sup></td>
<td>ppro</td>
<td>TrustPay. Contact tech support at <a href="mailto:tech-support@emerchantpay.net">tech-support@emerchantpay.net</a> for more details.</td>
</tr>
<tr>
<td>usage</td>
<td>optional</td>
<td>string(255)</td>
<td>Description of the transaction for later use</td>
</tr>
<tr>
<td>remote_ip</td>
<td>required*</td>
<td>IPv4 address</td>
<td>IPv4 address of customer</td>
</tr>
<tr>
<td>return_success_url</td>
<td>required</td>
<td>url</td>
<td>URL where customer is sent to after successful payment</td>
</tr>
<tr>
<td>return_failure_url</td>
<td>required</td>
<td>url</td>
<td>URL where customer is sent to after unsuccessful payment</td>
</tr>
<tr>
<td>amount</td>
<td>required</td>
<td>integer &gt; 0</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>required</td>
<td>string(3)</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td><strong>billing_address</strong></td>
<td>required</td>
<td></td>
<td>See <a href="#required-vs-optional-api-params">Required vs Optional API params</a> for details</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;first_name</td>
<td>required*</td>
<td>string(255)</td>
<td>Customer first name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;last_name</td>
<td>required*</td>
<td>string(255)</td>
<td>Customer last name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address1</td>
<td>required*</td>
<td>string(255)</td>
<td>Primary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address2</td>
<td>required*</td>
<td>string(255)</td>
<td>Secondary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;zip_code</td>
<td>required*</td>
<td>string</td>
<td>ZIP code</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;city</td>
<td>required*</td>
<td>string(255)</td>
<td>City</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;state</td>
<td>required*</td>
<td>string(2)</td>
<td>State code in <a href="https://en.wikipedia.org/wiki/ISO_3166-2">ISO 3166-2</a>, required for USA and Canada</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;country</td>
<td>required</td>
<td>string(2)</td>
<td>Country code in <a href="https://www.iso.org/iso-3166-country-codes.html">ISO 3166</a></td>
</tr>
<tr>
<td><strong>shipping_address</strong></td>
<td>optional</td>
<td></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;first_name</td>
<td>optional</td>
<td>string(255)</td>
<td>Customer first name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;last_name</td>
<td>optional</td>
<td>string(255)</td>
<td>Customer last name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address1</td>
<td>optional</td>
<td>string(255)</td>
<td>Primary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address2</td>
<td>optional</td>
<td>string(255)</td>
<td>Secondary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;zip_code</td>
<td>optional</td>
<td>string</td>
<td>ZIP code</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;city</td>
<td>optional</td>
<td>string(255)</td>
<td>City</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;state</td>
<td>optional</td>
<td>string(2)</td>
<td>State code in <a href="https://en.wikipedia.org/wiki/ISO_3166-2">ISO 3166-2</a>, required for USA and Canada</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;country</td>
<td>optional</td>
<td>string(2)</td>
<td>Country code in <a href="https://www.iso.org/iso-3166-country-codes.html">ISO 3166</a></td>
</tr>
</tbody></table>

<p><code>required* = conditionally required</code></p>

<p><code>1 - payment_type must be submitted only when the transaction type is set to ppro</code></p>

<p><strong>Supported countries</strong></p>

<table><thead>
<tr>
<th>Country code</th>
</tr>
</thead><tbody>
<tr>
<td>CZ</td>
</tr>
<tr>
<td>SK</td>
</tr>
</tbody></table>

<p><strong>Supported currencies</strong></p>

<table><thead>
<tr>
<th>Currency code</th>
</tr>
</thead><tbody>
<tr>
<td>CZK</td>
</tr>
<tr>
<td>EUR</td>
</tr>
</tbody></table>

<blockquote>
<p>Successful Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>stdClass Object
(
    [transaction_type] =&gt; ppro
    [status] =&gt; pending_async
    [mode] =&gt; live
    [transaction_id] =&gt; 43671
    [unique_id] =&gt; 44177a21403427eb96664a6d7e5d5d48
    [technical_message] =&gt; Transaction successful!
    [message] =&gt; Transaction successful!
    [redirect_url] =&gt; https://gate.emerchantpay.net/redirect/to_acquirer/649e1ff35c61
    [timestamp] =&gt; DateTime Object
        (
            [date] =&gt; 2019-03-14 12:06:00.000000
            [timezone_type] =&gt; 2
            [timezone] =&gt; Z
        )
    [descriptor] =&gt; Descriptor one
    [amount] =&gt; 100
    [currency] =&gt; EUR
    [sent_to_acquirer] =&gt; true
)
</code></pre>

<pre class="highlight java tab-java"><code><span class="o">&lt;</span><span class="n">payment_response</span> <span class="n">content</span><span class="o">=[</span>
    <span class="o">&lt;</span><span class="n">transaction_type</span> <span class="n">content</span><span class="o">=[</span><span class="n">ppro</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">status</span> <span class="n">content</span><span class="o">=[</span><span class="n">pending_async</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">mode</span> <span class="n">content</span><span class="o">=[</span><span class="n">live</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">transaction_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">43671</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">unique_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">44177</span><span class="n">a21403427eb96664a6d7e5d5d48</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">technical_message</span> <span class="n">content</span><span class="o">=[</span><span class="n">Transaction</span> <span class="n">successful</span><span class="o">!]&gt;</span>
    <span class="o">&lt;</span><span class="n">message</span> <span class="n">content</span><span class="o">=[</span><span class="n">Transaction</span> <span class="n">successful</span><span class="o">!]&gt;</span>
    <span class="o">&lt;</span><span class="n">redirect_url</span> <span class="n">content</span><span class="o">=[</span><span class="nl">https:</span><span class="c1">//gate.emerchantpay.net/redirect/to_acquirer/649e1ff35c61]&gt;</span>
    <span class="o">&lt;</span><span class="n">timestamp</span> <span class="n">content</span><span class="o">=[</span><span class="mi">2019</span><span class="o">-</span><span class="mo">03</span><span class="o">-</span><span class="mi">14</span><span class="nl">T12:</span><span class="mo">06</span><span class="o">:</span><span class="mo">00</span><span class="n">Z</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">descriptor</span> <span class="n">content</span><span class="o">=[</span><span class="n">Descriptor</span> <span class="n">one</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">amount</span> <span class="n">content</span><span class="o">=[</span><span class="mi">100</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">currency</span> <span class="n">content</span><span class="o">=[</span><span class="n">EUR</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">sent_to_acquirer</span> <span class="n">content</span><span class="o">=[</span><span class="kc">true</span><span class="o">]&gt;</span>
<span class="o">]&gt;</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="p">{</span>
    <span class="nl">transaction_type</span><span class="p">:</span> <span class="s2">"ppro"</span><span class="p">,</span>
    <span class="nx">status</span><span class="p">:</span> <span class="s2">"pending_async"</span><span class="p">,</span>
    <span class="nx">mode</span><span class="p">:</span> <span class="s2">"live"</span><span class="p">,</span>
    <span class="nx">transaction_id</span><span class="p">:</span> <span class="s2">"43671"</span><span class="p">,</span>
    <span class="nx">unique_id</span><span class="p">:</span> <span class="s2">"44177a21403427eb96664a6d7e5d5d48"</span><span class="p">,</span>
    <span class="nx">technical_message</span><span class="p">:</span> <span class="s2">"Transaction successful!"</span><span class="p">,</span>
    <span class="nx">message</span><span class="p">:</span> <span class="s2">"Transaction successful!"</span><span class="p">,</span>
    <span class="nx">redirect_url</span><span class="p">:</span> <span class="s2">"https://gate.emerchantpay.net/redirect/to_acquirer/649e1ff35c61"</span><span class="p">,</span>
    <span class="nx">timestamp</span><span class="p">:</span> <span class="s2">"2019-03-14T12:06:00Z"</span><span class="p">,</span>
    <span class="nx">descriptor</span><span class="p">:</span> <span class="s2">"Descriptor one"</span><span class="p">,</span>
    <span class="nx">amount</span><span class="p">:</span> <span class="s2">"100"</span><span class="p">,</span>
    <span class="nx">currency</span><span class="p">:</span> <span class="s2">"EUR"</span><span class="p">,</span>
    <span class="nx">sent_to_acquirer</span><span class="p">:</span> <span class="s2">"true"</span><span class="p">,</span>
<span class="p">}</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;ppro&lt;/transaction_type&gt;
  &lt;status&gt;pending_async&lt;/status&gt;
  &lt;mode&gt;live&lt;/mode&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;technical_message&gt;Transaction successful!&lt;/technical_message&gt;
  &lt;message&gt;Transaction successful!&lt;/message&gt;
  &lt;redirect_url&gt;https://gate.emerchantpay.net/redirect/to_acquirer/649e1ff35c61&lt;/redirect_url&gt;
  &lt;timestamp&gt;2019-03-14T12:06:00Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;EUR&lt;/currency&gt;
  &lt;sent_to_acquirer&gt;true&lt;/sent_to_acquirer&gt;
&lt;/payment_transaction&gt;
</code></pre>

<p><strong>Successful Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>The transaction type</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>transaction_id</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>unique_id</td>
<td>string(32)</td>
<td>Unique id defined by gate (must later be used if capturing, voiding or refunding a transaction)</td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
<tr>
<td>message</td>
<td>string(255)</td>
<td>Human readable error message which can be displayed to users.</td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>redirect_url</td>
<td>url</td>
<td>URL where user has to be redirected to complete payment process. It is available for asynchronous mode</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when the transaction was processed in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Combined date and time</a> e.g. 2007-08- 30T17:46:11Z</td>
</tr>
<tr>
<td>descriptor</td>
<td>string</td>
<td>Static descriptor MID info as configured on the gateway</td>
</tr>
<tr>
<td>amount</td>
<td>integer</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>sent_to_acquirer</td>
<td>string</td>
<td>&quot;true&quot; or &quot;false&quot;</td>
</tr>
</tbody></table>

<blockquote>
<p>Error Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>stdClass Object
(
    [transaction_type] =&gt; ppro
    [status] =&gt; error
    [mode] =&gt; live
    [transaction_id] =&gt; 43671
    [unique_id] =&gt; 44177a21403427eb96664a6d7e5d5d48
    [code] =&gt; 110
    [message] =&gt; Something went wrong, please contact support!
    [timestamp] =&gt; DateTime Object
        (
            [date] =&gt; 2019-03-14 12:06:00.000000
            [timezone_type] =&gt; 2
            [timezone] =&gt; Z
        )
    [descriptor] =&gt; Descriptor one
    [amount] =&gt; 100
    [currency] =&gt; EUR
    [sent_to_acquirer] =&gt; true
)
</code></pre>

<pre class="highlight java tab-java"><code><span class="o">&lt;</span><span class="n">payment_response</span> <span class="n">content</span><span class="o">=[</span>
    <span class="o">&lt;</span><span class="n">transaction_type</span> <span class="n">content</span><span class="o">=[</span><span class="n">ppro</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">status</span> <span class="n">content</span><span class="o">=[</span><span class="n">error</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">mode</span> <span class="n">content</span><span class="o">=[</span><span class="n">live</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">transaction_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">43671</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">unique_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">44177</span><span class="n">a21403427eb96664a6d7e5d5d48</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">code</span> <span class="n">content</span><span class="o">=[</span><span class="mi">110</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">message</span> <span class="n">content</span><span class="o">=[</span><span class="n">Something</span> <span class="n">went</span> <span class="n">wrong</span><span class="o">,</span> <span class="n">please</span> <span class="n">contact</span> <span class="n">support</span><span class="o">!]&gt;</span>
    <span class="o">&lt;</span><span class="n">timestamp</span> <span class="n">content</span><span class="o">=[</span><span class="mi">2019</span><span class="o">-</span><span class="mo">03</span><span class="o">-</span><span class="mi">14</span><span class="nl">T12:</span><span class="mo">06</span><span class="o">:</span><span class="mo">00</span><span class="n">Z</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">descriptor</span> <span class="n">content</span><span class="o">=[</span><span class="n">Descriptor</span> <span class="n">one</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">amount</span> <span class="n">content</span><span class="o">=[</span><span class="mi">100</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">currency</span> <span class="n">content</span><span class="o">=[</span><span class="n">EUR</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">sent_to_acquirer</span> <span class="n">content</span><span class="o">=[</span><span class="kc">true</span><span class="o">]&gt;</span>
<span class="o">]&gt;</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="p">{</span>
    <span class="nl">transaction_type</span><span class="p">:</span> <span class="s2">"ppro"</span><span class="p">,</span>
    <span class="nx">status</span><span class="p">:</span> <span class="s2">"error"</span><span class="p">,</span>
    <span class="nx">mode</span><span class="p">:</span> <span class="s2">"live"</span><span class="p">,</span>
    <span class="nx">transaction_id</span><span class="p">:</span> <span class="s2">"43671"</span><span class="p">,</span>
    <span class="nx">unique_id</span><span class="p">:</span> <span class="s2">"44177a21403427eb96664a6d7e5d5d48"</span><span class="p">,</span>
    <span class="nx">code</span><span class="p">:</span> <span class="s2">"110"</span><span class="p">,</span>
    <span class="nx">message</span><span class="p">:</span> <span class="s2">"Something went wrong, please contact support!"</span><span class="p">,</span>
    <span class="nx">timestamp</span><span class="p">:</span> <span class="s2">"2019-03-14T12:06:00Z"</span><span class="p">,</span>
    <span class="nx">descriptor</span><span class="p">:</span> <span class="s2">"Descriptor one"</span><span class="p">,</span>
    <span class="nx">amount</span><span class="p">:</span> <span class="s2">"100"</span><span class="p">,</span>
    <span class="nx">currency</span><span class="p">:</span> <span class="s2">"EUR"</span><span class="p">,</span>
    <span class="nx">sent_to_acquirer</span><span class="p">:</span> <span class="s2">"true"</span><span class="p">,</span>
<span class="p">}</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;ppro&lt;/transaction_type&gt;
  &lt;status&gt;error&lt;/status&gt;
  &lt;mode&gt;live&lt;/mode&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;code&gt;110&lt;/code&gt;
  &lt;message&gt;Something went wrong, please contact support!&lt;/message&gt;
  &lt;timestamp&gt;2019-03-14T12:06:00Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;EUR&lt;/currency&gt;
  &lt;sent_to_acquirer&gt;true&lt;/sent_to_acquirer&gt;
&lt;/payment_transaction&gt;
</code></pre>

<p><strong>Error Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>The transaction type</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>transaction_id</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>unique_id</td>
<td>string(32)</td>
<td>Unique id defined by gate (must later be used if capturing, voiding or refunding a transaction)</td>
</tr>
<tr>
<td>code</td>
<td>integer</td>
<td>Error code according to <a href="#error-code-table">Error code table</a></td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
<tr>
<td>message</td>
<td>string(255)</td>
<td>Human readable error message which can be displayed to users.</td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when the transaction was processed in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Combined date and time</a> e.g. 2007-08- 30T17:46:11Z</td>
</tr>
<tr>
<td>descriptor</td>
<td>string</td>
<td>Static descriptor MID info as configured on the gateway</td>
</tr>
<tr>
<td>amount</td>
<td>integer</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>sent_to_acquirer</td>
<td>string</td>
<td>&quot;true&quot; or &quot;false&quot;</td>
</tr>
</tbody></table>
<h3 id='webpay'>Webpay</h3>
<aside class="notice">
Webpay is a payment solution in Chile that allows shoppers to pay online with their credit card.
</aside>

<blockquote>
<p>Request</p>
</blockquote>

<pre class="highlight php tab-php"><code>This request is not implemented yet
</code></pre>

<pre class="highlight java tab-java"><code><span class="n">This</span> <span class="n">request</span> <span class="n">is</span> <span class="n">not</span> <span class="n">implemented</span> <span class="n">yet</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>curl https://username:password@gate.emerchantpay.net/process/TERMINAL-TOKEN <span class="se">\</span>
   -H <span class="s2">"Content-Type: text/xml"</span> <span class="se">\</span>
   -d <span class="s1">'
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;webpay&lt;/transaction_type&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;usage&gt;40208 concert tickets&lt;/usage&gt;
  &lt;remote_ip&gt;245.253.2.12&lt;/remote_ip&gt;
  &lt;return_success_url&gt;http://www.example.com/success&lt;/return_success_url&gt;
  &lt;return_failure_url&gt;http://www.example.com/failure&lt;/return_failure_url&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
  &lt;consumer_reference&gt;john_doe&lt;/consumer_reference&gt;
  &lt;national_id&gt;8812128812&lt;/national_id&gt;
  &lt;customer_email&gt;travis@example.com&lt;/customer_email&gt;
  &lt;customer_phone&gt;+1987987987987&lt;/customer_phone&gt;
  &lt;billing_address&gt;
    &lt;first_name&gt;Travis&lt;/first_name&gt;
    &lt;last_name&gt;Pastrana&lt;/last_name&gt;
    &lt;address1&gt;Muster Str. 12&lt;/address1&gt;
    &lt;zip_code&gt;10178&lt;/zip_code&gt;
    &lt;city&gt;Los Angeles&lt;/city&gt;
    &lt;state&gt;CA&lt;/state&gt;
    &lt;country&gt;US&lt;/country&gt;
  &lt;/billing_address&gt;
&lt;/payment_transaction&gt;'</span>
</code></pre>

<p><strong>Request Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>required</td>
<td>string(255)</td>
<td>The transaction type: <strong>webpay</strong></td>
</tr>
<tr>
<td>transaction_id</td>
<td>required</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>usage</td>
<td>optional</td>
<td>string(255)</td>
<td>Description of the transaction for later use</td>
</tr>
<tr>
<td>remote_ip</td>
<td>required*</td>
<td>IPv4 address</td>
<td>IPv4 address of customer</td>
</tr>
<tr>
<td>return_success_url</td>
<td>required</td>
<td>url</td>
<td>URL where customer is sent to after successful payment</td>
</tr>
<tr>
<td>return_failure_url</td>
<td>required</td>
<td>url</td>
<td>URL where customer is sent to after unsuccessful payment</td>
</tr>
<tr>
<td>amount</td>
<td>required</td>
<td>integer &gt; 0</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>required</td>
<td>string(3)</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>consumer_reference</td>
<td>required</td>
<td>string(20)</td>
<td>Consumer reference is a unique consumer identifier</td>
</tr>
<tr>
<td>national_id</td>
<td>required</td>
<td>string(20)</td>
<td>National Identifier number of the customer</td>
</tr>
<tr>
<td>birth_date</td>
<td>optional</td>
<td>dd-mm-yyyy</td>
<td>Required for Visa only when MCC is a Financial Services one (e.g. MCC 6012)</td>
</tr>
<tr>
<td>customer_email</td>
<td>required</td>
<td>e-mail address</td>
<td>Must contain valid e-mail of customer</td>
</tr>
<tr>
<td><strong>billing_address</strong></td>
<td>required</td>
<td></td>
<td>See <a href="#required-vs-optional-api-params">Required vs Optional API params</a> for details</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;first_name</td>
<td>required*</td>
<td>string(255)</td>
<td>Customer first name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;last_name</td>
<td>required*</td>
<td>string(255)</td>
<td>Customer last name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address1</td>
<td>required*</td>
<td>string(255)</td>
<td>Primary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address2</td>
<td>required*</td>
<td>string(255)</td>
<td>Secondary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;zip_code</td>
<td>required*</td>
<td>string</td>
<td>ZIP code</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;city</td>
<td>required*</td>
<td>string(255)</td>
<td>City</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;state</td>
<td>required*</td>
<td>string(2)</td>
<td>State code in <a href="https://en.wikipedia.org/wiki/ISO_3166-2">ISO 3166-2</a>, required for USA and Canada</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;country</td>
<td>required</td>
<td>string(2)</td>
<td>Country code in <a href="https://www.iso.org/iso-3166-country-codes.html">ISO 3166</a></td>
</tr>
<tr>
<td><strong>shipping_address</strong></td>
<td>optional</td>
<td></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;first_name</td>
<td>optional</td>
<td>string(255)</td>
<td>Customer first name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;last_name</td>
<td>optional</td>
<td>string(255)</td>
<td>Customer last name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address1</td>
<td>optional</td>
<td>string(255)</td>
<td>Primary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address2</td>
<td>optional</td>
<td>string(255)</td>
<td>Secondary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;zip_code</td>
<td>optional</td>
<td>string</td>
<td>ZIP code</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;city</td>
<td>optional</td>
<td>string(255)</td>
<td>City</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;state</td>
<td>optional</td>
<td>string(2)</td>
<td>State code in <a href="https://en.wikipedia.org/wiki/ISO_3166-2">ISO 3166-2</a>, required for USA and Canada</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;country</td>
<td>optional</td>
<td>string(2)</td>
<td>Country code in <a href="https://www.iso.org/iso-3166-country-codes.html">ISO 3166</a></td>
</tr>
</tbody></table>

<p><code>required* = conditionally required</code></p>

<p><strong>Supported countries</strong></p>

<table><thead>
<tr>
<th>Country Name</th>
<th>Country code</th>
</tr>
</thead><tbody>
<tr>
<td>Chile</td>
<td>CL</td>
</tr>
</tbody></table>

<blockquote>
<p>Successful Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>This request is not implemented yet
</code></pre>

<pre class="highlight java tab-java"><code><span class="n">This</span> <span class="n">request</span> <span class="n">is</span> <span class="n">not</span> <span class="n">implemented</span> <span class="n">yet</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;status&gt;pending_async&lt;/status&gt;
  &lt;mode&gt;live&lt;/mode&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;redirect_url&gt;https://gate.emerchantpay.net/redirect/to_acquirer/649e1ff35c61&lt;/redirect_url&gt;
  &lt;technical_message&gt;Transaction successful!&lt;/technical_message&gt;
  &lt;message&gt;Transaction successful!&lt;/message&gt;
  &lt;timestamp&gt;2019-03-14T12:06:00Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
  &lt;sent_to_acquirer&gt;true&lt;/sent_to_acquirer&gt;
&lt;/payment_transaction&gt;
</code></pre>

<p><strong>Successful Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>transaction_id</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>unique_id</td>
<td>string(32)</td>
<td>Unique id defined by gate (must later be used if capturing, voiding or refunding a transaction)</td>
</tr>
<tr>
<td>redirect_url</td>
<td>url</td>
<td>URL where user has to be redirected to complete payment process. It is available for asynchronous mode</td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
<tr>
<td>message</td>
<td>string(255)</td>
<td>Human readable error message which can be displayed to users.</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when the transaction was processed in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Combined date and time</a> e.g. 2007-08- 30T17:46:11Z</td>
</tr>
<tr>
<td>descriptor</td>
<td>string</td>
<td>Static descriptor MID info as configured on the gateway</td>
</tr>
<tr>
<td>amount</td>
<td>integer</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>sent_to_acquirer</td>
<td>string</td>
<td>&quot;true&quot; or &quot;false&quot;</td>
</tr>
</tbody></table>

<blockquote>
<p>Error Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>This request is not implemented yet
</code></pre>

<pre class="highlight java tab-java"><code><span class="n">This</span> <span class="n">request</span> <span class="n">is</span> <span class="n">not</span> <span class="n">implemented</span> <span class="n">yet</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;status&gt;error&lt;/status&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;code&gt;110&lt;/code&gt;
  &lt;message&gt;Something went wrong, please contact support!&lt;/message&gt;
  &lt;timestamp&gt;2019-03-14T12:06:00Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
  &lt;sent_to_acquirer&gt;false&lt;/sent_to_acquirer&gt;
&lt;/payment_transaction&gt;
</code></pre>

<p><strong>Error Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>transaction_id</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>unique_id</td>
<td>string(32)</td>
<td>Unique id defined by gate (must later be used if capturing, voiding or refunding a transaction)</td>
</tr>
<tr>
<td>code</td>
<td>integer</td>
<td>Error code according to <a href="#error-code-table">Error code table</a></td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
<tr>
<td>message</td>
<td>string(255)</td>
<td>Human readable error message which can be displayed to users.</td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when the transaction was processed in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Combined date and time</a> e.g. 2007-08- 30T17:46:11Z</td>
</tr>
<tr>
<td>descriptor</td>
<td>string</td>
<td>Static descriptor MID info as configured on the gateway</td>
</tr>
<tr>
<td>amount</td>
<td>integer</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>sent_to_acquirer</td>
<td>string</td>
<td>&quot;true&quot; or &quot;false&quot;</td>
</tr>
</tbody></table>
<h2 id='cash-payments'>Cash Payments</h2><h3 id='baloto'>Baloto</h3>
<aside class="notice" >
Baloto is a cash payment option in Colombia. It allows the customers to receive a voucher at check-out. The voucher can then be paid in any of the Via Boleto offices in cash.
</aside>

<blockquote>
<p>Request</p>
</blockquote>

<pre class="highlight php tab-php"><code>This request is not implemented yet
</code></pre>

<pre class="highlight java tab-java"><code><span class="n">This</span> <span class="n">request</span> <span class="n">is</span> <span class="n">not</span> <span class="n">implemented</span> <span class="n">yet</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>curl https://username:password@gate.emerchantpay.net/process/TERMINAL-TOKEN <span class="se">\</span>
   -H <span class="s2">"Content-Type: text/xml"</span> <span class="se">\</span>
   -d <span class="s1">'
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;baloto&lt;/transaction_type&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;usage&gt;40208 concert tickets&lt;/usage&gt;
  &lt;remote_ip&gt;245.253.2.12&lt;/remote_ip&gt;
  &lt;return_success_url&gt;http://www.example.com/success&lt;/return_success_url&gt;
  &lt;return_failure_url&gt;http://www.example.com/failure&lt;/return_failure_url&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
  &lt;consumer_reference&gt;barney_rubble&lt;/consumer_reference&gt;
  &lt;national_id&gt;8812128812&lt;/national_id&gt;
  &lt;birth_date&gt;30-12-1992&lt;/birth_date&gt;
  &lt;customer_email&gt;travis@example.com&lt;/customer_email&gt;
  &lt;billing_address&gt;
    &lt;first_name&gt;Barney&lt;/first_name&gt;
    &lt;last_name&gt;Rubble&lt;/last_name&gt;
    &lt;address1&gt;14, Nerazdelni str&lt;/address1&gt;
    &lt;zip_code&gt;1407&lt;/zip_code&gt;
    &lt;city&gt;Bogota&lt;/city&gt;
    &lt;country&gt;CO&lt;/country&gt;
  &lt;/billing_address&gt;
  &lt;risk_params&gt;
    &lt;user_id&gt;123456&lt;/user_id&gt;
  &lt;/risk_params&gt;
&lt;/payment_transaction&gt;'</span>
</code></pre>

<p><strong>Request Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>required</td>
<td>string(255)</td>
<td>The transaction type: <strong>baloto</strong></td>
</tr>
<tr>
<td>transaction_id</td>
<td>required</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>usage</td>
<td>optional</td>
<td>string(255)</td>
<td>Description of the transaction for later use</td>
</tr>
<tr>
<td>remote_ip</td>
<td>required*</td>
<td>IPv4 address</td>
<td>IPv4 address of customer</td>
</tr>
<tr>
<td>return_success_url</td>
<td>required</td>
<td>url</td>
<td>URL where customer is sent to after successful payment</td>
</tr>
<tr>
<td>return_failure_url</td>
<td>required</td>
<td>url</td>
<td>URL where customer is sent to after unsuccessful payment</td>
</tr>
<tr>
<td>amount</td>
<td>required</td>
<td>integer &gt; 0</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>required</td>
<td>string(3)</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>consumer_reference</td>
<td>required</td>
<td>string(20)</td>
<td>Consumer reference is a unique consumer identifier</td>
</tr>
<tr>
<td>national_id</td>
<td>required</td>
<td>string(20)</td>
<td>National Identifier number of the customer</td>
</tr>
<tr>
<td>birth_date</td>
<td>optional</td>
<td>string(20)</td>
<td>Birth date of the customer</td>
</tr>
<tr>
<td>customer_email</td>
<td>required</td>
<td>e-mail address</td>
<td>Must contain valid e-mail of customer</td>
</tr>
<tr>
<td><strong>billing_address</strong></td>
<td>required</td>
<td></td>
<td>See <a href="#required-vs-optional-api-params">Required vs Optional API params</a> for details</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;first_name</td>
<td>required*</td>
<td>string(255)</td>
<td>Customer first name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;last_name</td>
<td>required*</td>
<td>string(255)</td>
<td>Customer last name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address1</td>
<td>required*</td>
<td>string(255)</td>
<td>Primary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address2</td>
<td>required*</td>
<td>string(255)</td>
<td>Secondary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;zip_code</td>
<td>required*</td>
<td>string</td>
<td>ZIP code</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;city</td>
<td>required*</td>
<td>string(255)</td>
<td>City</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;state</td>
<td>required*</td>
<td>string(2)</td>
<td>State code in <a href="https://en.wikipedia.org/wiki/ISO_3166-2">ISO 3166-2</a>, required for USA and Canada</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;country</td>
<td>required</td>
<td>string(2)</td>
<td>Country code in <a href="https://www.iso.org/iso-3166-country-codes.html">ISO 3166</a></td>
</tr>
<tr>
<td><strong>shipping_address</strong></td>
<td>optional</td>
<td></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;first_name</td>
<td>optional</td>
<td>string(255)</td>
<td>Customer first name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;last_name</td>
<td>optional</td>
<td>string(255)</td>
<td>Customer last name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address1</td>
<td>optional</td>
<td>string(255)</td>
<td>Primary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address2</td>
<td>optional</td>
<td>string(255)</td>
<td>Secondary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;zip_code</td>
<td>optional</td>
<td>string</td>
<td>ZIP code</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;city</td>
<td>optional</td>
<td>string(255)</td>
<td>City</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;state</td>
<td>optional</td>
<td>string(2)</td>
<td>State code in <a href="https://en.wikipedia.org/wiki/ISO_3166-2">ISO 3166-2</a>, required for USA and Canada</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;country</td>
<td>optional</td>
<td>string(2)</td>
<td>Country code in <a href="https://www.iso.org/iso-3166-country-codes.html">ISO 3166</a></td>
</tr>
</tbody></table>

<p><code>required* = conditionally required</code></p>

<p><strong>Supported countries:</strong></p>

<table><thead>
<tr>
<th>Country</th>
</tr>
</thead><tbody>
<tr>
<td>CO</td>
</tr>
</tbody></table>

<blockquote>
<p>Successful Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>This request is not implemented yet
</code></pre>

<pre class="highlight java tab-java"><code><span class="n">This</span> <span class="n">request</span> <span class="n">is</span> <span class="n">not</span> <span class="n">implemented</span> <span class="n">yet</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;baloto&lt;/transaction_type&gt;
  &lt;status&gt;pending_async&lt;/status&gt;
  &lt;mode&gt;live&lt;/mode&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;technical_message&gt;Transaction successful!&lt;/technical_message&gt;
  &lt;message&gt;Transaction successful!&lt;/message&gt;
  &lt;redirect_url&gt;https://gate.emerchantpay.net/redirect/to_acquirer/649e1ff35c61&lt;/redirect_url&gt;
  &lt;timestamp&gt;2019-03-14T12:06:00Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
  &lt;sent_to_acquirer&gt;true&lt;/sent_to_acquirer&gt;
&lt;/payment_transaction&gt;
</code></pre>

<p><strong>Successful Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>The transaction type</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>transaction_id</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>unique_id</td>
<td>string(32)</td>
<td>Unique id defined by gate (must later be used if capturing, voiding or refunding a transaction)</td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
<tr>
<td>message</td>
<td>string(255)</td>
<td>Human readable error message which can be displayed to users.</td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>redirect_url</td>
<td>url</td>
<td>URL where user has to be redirected to complete payment process. It is available for asynchronous mode</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when the transaction was processed in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Combined date and time</a> e.g. 2007-08- 30T17:46:11Z</td>
</tr>
<tr>
<td>descriptor</td>
<td>string</td>
<td>Static descriptor MID info as configured on the gateway</td>
</tr>
<tr>
<td>amount</td>
<td>integer</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>sent_to_acquirer</td>
<td>string</td>
<td>&quot;true&quot; or &quot;false&quot;</td>
</tr>
</tbody></table>

<blockquote>
<p>Error Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>This request is not implemented yet
</code></pre>

<pre class="highlight java tab-java"><code><span class="n">This</span> <span class="n">request</span> <span class="n">is</span> <span class="n">not</span> <span class="n">implemented</span> <span class="n">yet</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;baloto&lt;/transaction_type&gt;
  &lt;status&gt;error&lt;/status&gt;
  &lt;mode&gt;live&lt;/mode&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;code&gt;110&lt;/code&gt;
  &lt;message&gt;Something went wrong, please contact support!&lt;/message&gt;
  &lt;timestamp&gt;2019-03-14T12:06:00Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
  &lt;sent_to_acquirer&gt;true&lt;/sent_to_acquirer&gt;
&lt;/payment_transaction&gt;
</code></pre>

<p><strong>Error Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>The transaction type</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>transaction_id</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>unique_id</td>
<td>string(32)</td>
<td>Unique id defined by gate (must later be used if capturing, voiding or refunding a transaction)</td>
</tr>
<tr>
<td>code</td>
<td>integer</td>
<td>Error code according to <a href="#error-code-table">Error code table</a></td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
<tr>
<td>message</td>
<td>string(255)</td>
<td>Human readable error message which can be displayed to users.</td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when the transaction was processed in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Combined date and time</a> e.g. 2007-08- 30T17:46:11Z</td>
</tr>
<tr>
<td>descriptor</td>
<td>string</td>
<td>Static descriptor MID info as configured on the gateway</td>
</tr>
<tr>
<td>amount</td>
<td>integer</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>sent_to_acquirer</td>
<td>string</td>
<td>&quot;true&quot; or &quot;false&quot;</td>
</tr>
</tbody></table>
<h3 id='banamex'>Banamex</h3>
<aside class="notice" >
  Banamex is local card payment in Mexico
</aside>

<blockquote>
<p>Request</p>
</blockquote>

<pre class="highlight php tab-php"><code>This request is not implemented yet
</code></pre>

<pre class="highlight java tab-java"><code><span class="n">This</span> <span class="n">request</span> <span class="n">is</span> <span class="n">not</span> <span class="n">implemented</span> <span class="n">yet</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>curl https://username:password@gate.emerchantpay.net/process/TERMINAL-TOKEN <span class="se">\</span>
   -H <span class="s2">"Content-Type: text/xml"</span> <span class="se">\</span>
   -d <span class="s1">'
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;banamex&lt;/transaction_type&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;usage&gt;40208 concert tickets&lt;/usage&gt;
  &lt;remote_ip&gt;245.253.2.12&lt;/remote_ip&gt;
  &lt;return_success_url&gt;http://www.example.com/success&lt;/return_success_url&gt;
  &lt;return_failure_url&gt;http://www.example.com/failure&lt;/return_failure_url&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
  &lt;consumer_reference&gt;barney_rubble&lt;/consumer_reference&gt;
  &lt;national_id&gt;8812128812&lt;/national_id&gt;
  &lt;birth_date&gt;30-12-1992&lt;/birth_date&gt;
  &lt;customer_email&gt;travis@example.com&lt;/customer_email&gt;
  &lt;billing_address&gt;
    &lt;first_name&gt;Barney&lt;/first_name&gt;
    &lt;last_name&gt;Rubble&lt;/last_name&gt;
    &lt;address1&gt;14, Nerazdelni str&lt;/address1&gt;
    &lt;zip_code&gt;1407&lt;/zip_code&gt;
    &lt;city&gt;Monterrey&lt;/city&gt;
    &lt;country&gt;MX&lt;/country&gt;
  &lt;/billing_address&gt;
  &lt;risk_params&gt;
    &lt;user_id&gt;123456&lt;/user_id&gt;
  &lt;/risk_params&gt;
&lt;/payment_transaction&gt;'</span>
</code></pre>

<p><strong>Request Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>required</td>
<td>string(255)</td>
<td>The transaction type: <strong>banamex</strong></td>
</tr>
<tr>
<td>transaction_id</td>
<td>required</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>usage</td>
<td>optional</td>
<td>string(255)</td>
<td>Description of the transaction for later use</td>
</tr>
<tr>
<td>remote_ip</td>
<td>required*</td>
<td>IPv4 address</td>
<td>IPv4 address of customer</td>
</tr>
<tr>
<td>return_success_url</td>
<td>required</td>
<td>url</td>
<td>URL where customer is sent to after successful payment</td>
</tr>
<tr>
<td>return_failure_url</td>
<td>required</td>
<td>url</td>
<td>URL where customer is sent to after unsuccessful payment</td>
</tr>
<tr>
<td>amount</td>
<td>required</td>
<td>integer &gt; 0</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>required</td>
<td>string(3)</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>consumer_reference</td>
<td>required</td>
<td>string(20)</td>
<td>Consumer reference is a unique consumer identifier</td>
</tr>
<tr>
<td>national_id</td>
<td>required</td>
<td>string(20)</td>
<td>National Identifier number of the customer</td>
</tr>
<tr>
<td>birth_date</td>
<td>optional</td>
<td>string(20)</td>
<td>Birth date of the customer</td>
</tr>
<tr>
<td>customer_email</td>
<td>required</td>
<td>e-mail address</td>
<td>Must contain valid e-mail of customer</td>
</tr>
<tr>
<td><strong>billing_address</strong></td>
<td>required</td>
<td></td>
<td>See <a href="#required-vs-optional-api-params">Required vs Optional API params</a> for details</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;first_name</td>
<td>required*</td>
<td>string(255)</td>
<td>Customer first name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;last_name</td>
<td>required*</td>
<td>string(255)</td>
<td>Customer last name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address1</td>
<td>required*</td>
<td>string(255)</td>
<td>Primary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address2</td>
<td>required*</td>
<td>string(255)</td>
<td>Secondary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;zip_code</td>
<td>required*</td>
<td>string</td>
<td>ZIP code</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;city</td>
<td>required*</td>
<td>string(255)</td>
<td>City</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;state</td>
<td>required*</td>
<td>string(2)</td>
<td>State code in <a href="https://en.wikipedia.org/wiki/ISO_3166-2">ISO 3166-2</a>, required for USA and Canada</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;country</td>
<td>required</td>
<td>string(2)</td>
<td>Country code in <a href="https://www.iso.org/iso-3166-country-codes.html">ISO 3166</a></td>
</tr>
<tr>
<td><strong>shipping_address</strong></td>
<td>optional</td>
<td></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;first_name</td>
<td>optional</td>
<td>string(255)</td>
<td>Customer first name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;last_name</td>
<td>optional</td>
<td>string(255)</td>
<td>Customer last name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address1</td>
<td>optional</td>
<td>string(255)</td>
<td>Primary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address2</td>
<td>optional</td>
<td>string(255)</td>
<td>Secondary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;zip_code</td>
<td>optional</td>
<td>string</td>
<td>ZIP code</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;city</td>
<td>optional</td>
<td>string(255)</td>
<td>City</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;state</td>
<td>optional</td>
<td>string(2)</td>
<td>State code in <a href="https://en.wikipedia.org/wiki/ISO_3166-2">ISO 3166-2</a>, required for USA and Canada</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;country</td>
<td>optional</td>
<td>string(2)</td>
<td>Country code in <a href="https://www.iso.org/iso-3166-country-codes.html">ISO 3166</a></td>
</tr>
</tbody></table>

<p><code>required* = conditionally required</code></p>

<p><strong>Supported countries:</strong></p>

<table><thead>
<tr>
<th>Country</th>
</tr>
</thead><tbody>
<tr>
<td>MX</td>
</tr>
</tbody></table>

<blockquote>
<p>Successful Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>This request is not implemented yet
</code></pre>

<pre class="highlight java tab-java"><code><span class="n">This</span> <span class="n">request</span> <span class="n">is</span> <span class="n">not</span> <span class="n">implemented</span> <span class="n">yet</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;banamex&lt;/transaction_type&gt;
  &lt;status&gt;pending_async&lt;/status&gt;
  &lt;mode&gt;live&lt;/mode&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;technical_message&gt;Transaction successful!&lt;/technical_message&gt;
  &lt;message&gt;Transaction successful!&lt;/message&gt;
  &lt;redirect_url&gt;https://gate.emerchantpay.net/redirect/to_acquirer/649e1ff35c61&lt;/redirect_url&gt;
  &lt;timestamp&gt;2019-03-14T12:06:00Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
  &lt;sent_to_acquirer&gt;true&lt;/sent_to_acquirer&gt;
&lt;/payment_transaction&gt;
</code></pre>

<p><strong>Successful Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>The transaction type</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>transaction_id</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>unique_id</td>
<td>string(32)</td>
<td>Unique id defined by gate (must later be used if capturing, voiding or refunding a transaction)</td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
<tr>
<td>message</td>
<td>string(255)</td>
<td>Human readable error message which can be displayed to users.</td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>redirect_url</td>
<td>url</td>
<td>URL where user has to be redirected to complete payment process. It is available for asynchronous mode</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when the transaction was processed in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Combined date and time</a> e.g. 2007-08- 30T17:46:11Z</td>
</tr>
<tr>
<td>descriptor</td>
<td>string</td>
<td>Static descriptor MID info as configured on the gateway</td>
</tr>
<tr>
<td>amount</td>
<td>integer</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>sent_to_acquirer</td>
<td>string</td>
<td>&quot;true&quot; or &quot;false&quot;</td>
</tr>
</tbody></table>

<blockquote>
<p>Error Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>This request is not implemented yet
</code></pre>

<pre class="highlight java tab-java"><code><span class="n">This</span> <span class="n">request</span> <span class="n">is</span> <span class="n">not</span> <span class="n">implemented</span> <span class="n">yet</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;banamex&lt;/transaction_type&gt;
  &lt;status&gt;error&lt;/status&gt;
  &lt;mode&gt;live&lt;/mode&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;code&gt;110&lt;/code&gt;
  &lt;message&gt;Something went wrong, please contact support!&lt;/message&gt;
  &lt;timestamp&gt;2019-03-14T12:06:00Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
  &lt;sent_to_acquirer&gt;true&lt;/sent_to_acquirer&gt;
&lt;/payment_transaction&gt;
</code></pre>

<p><strong>Error Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>The transaction type</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>transaction_id</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>unique_id</td>
<td>string(32)</td>
<td>Unique id defined by gate (must later be used if capturing, voiding or refunding a transaction)</td>
</tr>
<tr>
<td>code</td>
<td>integer</td>
<td>Error code according to <a href="#error-code-table">Error code table</a></td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
<tr>
<td>message</td>
<td>string(255)</td>
<td>Human readable error message which can be displayed to users.</td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when the transaction was processed in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Combined date and time</a> e.g. 2007-08- 30T17:46:11Z</td>
</tr>
<tr>
<td>descriptor</td>
<td>string</td>
<td>Static descriptor MID info as configured on the gateway</td>
</tr>
<tr>
<td>amount</td>
<td>integer</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>sent_to_acquirer</td>
<td>string</td>
<td>&quot;true&quot; or &quot;false&quot;</td>
</tr>
</tbody></table>
<h3 id='banco-de-occidente'>Banco de Occidente</h3>
<aside class="notice" >
Banco de Occidente is a cash payment method for Colombia
</aside>

<blockquote>
<p>Request</p>
</blockquote>

<pre class="highlight php tab-php"><code>This request is not implemented yet
</code></pre>

<pre class="highlight java tab-java"><code><span class="n">This</span> <span class="n">request</span> <span class="n">is</span> <span class="n">not</span> <span class="n">implemented</span> <span class="n">yet</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>curl https://username:password@gate.emerchantpay.net/process/TERMINAL-TOKEN <span class="se">\</span>
   -H <span class="s2">"Content-Type: text/xml"</span> <span class="se">\</span>
   -d <span class="s1">'
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;banco_de_occidente&lt;/transaction_type&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;usage&gt;40208 concert tickets&lt;/usage&gt;
  &lt;remote_ip&gt;245.253.2.12&lt;/remote_ip&gt;
  &lt;return_success_url&gt;http://www.example.com/success&lt;/return_success_url&gt;
  &lt;return_failure_url&gt;http://www.example.com/failure&lt;/return_failure_url&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
  &lt;consumer_reference&gt;barney_rubble&lt;/consumer_reference&gt;
  &lt;national_id&gt;8812128812&lt;/national_id&gt;
  &lt;birth_date&gt;30-12-1992&lt;/birth_date&gt;
  &lt;customer_email&gt;travis@example.com&lt;/customer_email&gt;
  &lt;billing_address&gt;
    &lt;first_name&gt;Barney&lt;/first_name&gt;
    &lt;last_name&gt;Rubble&lt;/last_name&gt;
    &lt;address1&gt;14, Nerazdelni str&lt;/address1&gt;
    &lt;zip_code&gt;1407&lt;/zip_code&gt;
    &lt;city&gt;Bogota&lt;/city&gt;
    &lt;country&gt;CO&lt;/country&gt;
  &lt;/billing_address&gt;
  &lt;risk_params&gt;
    &lt;user_id&gt;123456&lt;/user_id&gt;
  &lt;/risk_params&gt;
&lt;/payment_transaction&gt;'</span>
</code></pre>

<p><strong>Request Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>required</td>
<td>string(255)</td>
<td>The transaction type: <strong>banco_de_occidente</strong></td>
</tr>
<tr>
<td>transaction_id</td>
<td>required</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>usage</td>
<td>optional</td>
<td>string(255)</td>
<td>Description of the transaction for later use</td>
</tr>
<tr>
<td>remote_ip</td>
<td>required*</td>
<td>IPv4 address</td>
<td>IPv4 address of customer</td>
</tr>
<tr>
<td>return_success_url</td>
<td>required</td>
<td>url</td>
<td>URL where customer is sent to after successful payment</td>
</tr>
<tr>
<td>return_failure_url</td>
<td>required</td>
<td>url</td>
<td>URL where customer is sent to after unsuccessful payment</td>
</tr>
<tr>
<td>amount</td>
<td>required</td>
<td>integer &gt; 0</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>required</td>
<td>string(3)</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>consumer_reference</td>
<td>required</td>
<td>string(20)</td>
<td>Consumer reference is a unique consumer identifier</td>
</tr>
<tr>
<td>national_id</td>
<td>required</td>
<td>string(20)</td>
<td>National Identifier number of the customer</td>
</tr>
<tr>
<td>birth_date</td>
<td>optional</td>
<td>string(20)</td>
<td>Birth date of the customer</td>
</tr>
<tr>
<td>customer_email</td>
<td>required</td>
<td>e-mail address</td>
<td>Must contain valid e-mail of customer</td>
</tr>
<tr>
<td><strong>billing_address</strong></td>
<td>required</td>
<td></td>
<td>See <a href="#required-vs-optional-api-params">Required vs Optional API params</a> for details</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;first_name</td>
<td>required*</td>
<td>string(255)</td>
<td>Customer first name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;last_name</td>
<td>required*</td>
<td>string(255)</td>
<td>Customer last name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address1</td>
<td>required*</td>
<td>string(255)</td>
<td>Primary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address2</td>
<td>required*</td>
<td>string(255)</td>
<td>Secondary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;zip_code</td>
<td>required*</td>
<td>string</td>
<td>ZIP code</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;city</td>
<td>required*</td>
<td>string(255)</td>
<td>City</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;state</td>
<td>required*</td>
<td>string(2)</td>
<td>State code in <a href="https://en.wikipedia.org/wiki/ISO_3166-2">ISO 3166-2</a>, required for USA and Canada</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;country</td>
<td>required</td>
<td>string(2)</td>
<td>Country code in <a href="https://www.iso.org/iso-3166-country-codes.html">ISO 3166</a></td>
</tr>
<tr>
<td><strong>shipping_address</strong></td>
<td>optional</td>
<td></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;first_name</td>
<td>optional</td>
<td>string(255)</td>
<td>Customer first name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;last_name</td>
<td>optional</td>
<td>string(255)</td>
<td>Customer last name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address1</td>
<td>optional</td>
<td>string(255)</td>
<td>Primary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address2</td>
<td>optional</td>
<td>string(255)</td>
<td>Secondary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;zip_code</td>
<td>optional</td>
<td>string</td>
<td>ZIP code</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;city</td>
<td>optional</td>
<td>string(255)</td>
<td>City</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;state</td>
<td>optional</td>
<td>string(2)</td>
<td>State code in <a href="https://en.wikipedia.org/wiki/ISO_3166-2">ISO 3166-2</a>, required for USA and Canada</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;country</td>
<td>optional</td>
<td>string(2)</td>
<td>Country code in <a href="https://www.iso.org/iso-3166-country-codes.html">ISO 3166</a></td>
</tr>
</tbody></table>

<p><code>required* = conditionally required</code></p>

<p><strong>Supported countries:</strong></p>

<table><thead>
<tr>
<th>Country</th>
</tr>
</thead><tbody>
<tr>
<td>CO</td>
</tr>
</tbody></table>

<blockquote>
<p>Successful Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>This request is not implemented yet
</code></pre>

<pre class="highlight java tab-java"><code><span class="n">This</span> <span class="n">request</span> <span class="n">is</span> <span class="n">not</span> <span class="n">implemented</span> <span class="n">yet</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;banco_de_occidente&lt;/transaction_type&gt;
  &lt;status&gt;pending_async&lt;/status&gt;
  &lt;mode&gt;live&lt;/mode&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;technical_message&gt;Transaction successful!&lt;/technical_message&gt;
  &lt;message&gt;Transaction successful!&lt;/message&gt;
  &lt;redirect_url&gt;https://gate.emerchantpay.net/redirect/to_acquirer/649e1ff35c61&lt;/redirect_url&gt;
  &lt;timestamp&gt;2019-03-14T12:06:00Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
  &lt;sent_to_acquirer&gt;true&lt;/sent_to_acquirer&gt;
&lt;/payment_transaction&gt;
</code></pre>

<p><strong>Successful Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>The transaction type</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>transaction_id</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>unique_id</td>
<td>string(32)</td>
<td>Unique id defined by gate (must later be used if capturing, voiding or refunding a transaction)</td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
<tr>
<td>message</td>
<td>string(255)</td>
<td>Human readable error message which can be displayed to users.</td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>redirect_url</td>
<td>url</td>
<td>URL where user has to be redirected to complete payment process. It is available for asynchronous mode</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when the transaction was processed in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Combined date and time</a> e.g. 2007-08- 30T17:46:11Z</td>
</tr>
<tr>
<td>descriptor</td>
<td>string</td>
<td>Static descriptor MID info as configured on the gateway</td>
</tr>
<tr>
<td>amount</td>
<td>integer</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>sent_to_acquirer</td>
<td>string</td>
<td>&quot;true&quot; or &quot;false&quot;</td>
</tr>
</tbody></table>

<blockquote>
<p>Error Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>This request is not implemented yet
</code></pre>

<pre class="highlight java tab-java"><code><span class="n">This</span> <span class="n">request</span> <span class="n">is</span> <span class="n">not</span> <span class="n">implemented</span> <span class="n">yet</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;banco_de_occidente&lt;/transaction_type&gt;
  &lt;status&gt;error&lt;/status&gt;
  &lt;mode&gt;live&lt;/mode&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;code&gt;110&lt;/code&gt;
  &lt;message&gt;Something went wrong, please contact support!&lt;/message&gt;
  &lt;timestamp&gt;2019-03-14T12:06:00Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
  &lt;sent_to_acquirer&gt;true&lt;/sent_to_acquirer&gt;
&lt;/payment_transaction&gt;
</code></pre>

<p><strong>Error Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>The transaction type</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>transaction_id</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>unique_id</td>
<td>string(32)</td>
<td>Unique id defined by gate (must later be used if capturing, voiding or refunding a transaction)</td>
</tr>
<tr>
<td>code</td>
<td>integer</td>
<td>Error code according to <a href="#error-code-table">Error code table</a></td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
<tr>
<td>message</td>
<td>string(255)</td>
<td>Human readable error message which can be displayed to users.</td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when the transaction was processed in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Combined date and time</a> e.g. 2007-08- 30T17:46:11Z</td>
</tr>
<tr>
<td>descriptor</td>
<td>string</td>
<td>Static descriptor MID info as configured on the gateway</td>
</tr>
<tr>
<td>amount</td>
<td>integer</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>sent_to_acquirer</td>
<td>string</td>
<td>&quot;true&quot; or &quot;false&quot;</td>
</tr>
</tbody></table>
<h3 id='boleto'>Boleto</h3>
<aside class="notice" >
  Boleto is a payment service in Brazil
</aside>

<blockquote>
<p>Request</p>
</blockquote>

<pre class="highlight php tab-php"><code>This request is not implemented yet
</code></pre>

<pre class="highlight java tab-java"><code><span class="n">This</span> <span class="n">request</span> <span class="n">is</span> <span class="n">not</span> <span class="n">implemented</span> <span class="n">yet</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>curl https://username:password@gate.emerchantpay.net/process/TERMINAL-TOKEN <span class="se">\</span>
   -H <span class="s2">"Content-Type: text/xml"</span> <span class="se">\</span>
   -d <span class="s1">'
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;boleto&lt;/transaction_type&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;usage&gt;40208 concert tickets&lt;/usage&gt;
  &lt;remote_ip&gt;245.253.2.12&lt;/remote_ip&gt;
  &lt;return_success_url&gt;http://www.example.com/success&lt;/return_success_url&gt;
  &lt;return_failure_url&gt;http://www.example.com/failure&lt;/return_failure_url&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
  &lt;consumer_reference&gt;barney_rubble&lt;/consumer_reference&gt;
  &lt;national_id&gt;8812128812&lt;/national_id&gt;
  &lt;birth_date&gt;30-12-1992&lt;/birth_date&gt;
  &lt;customer_email&gt;travis@example.com&lt;/customer_email&gt;
  &lt;billing_address&gt;
    &lt;first_name&gt;Barney&lt;/first_name&gt;
    &lt;last_name&gt;Rubble&lt;/last_name&gt;
    &lt;address1&gt;14, Nerazdelni str&lt;/address1&gt;
    &lt;zip_code&gt;1407&lt;/zip_code&gt;
    &lt;city&gt;Rio de Janeiro&lt;/city&gt;
    &lt;country&gt;BR&lt;/country&gt;
  &lt;/billing_address&gt;
  &lt;risk_params&gt;
    &lt;user_id&gt;123456&lt;/user_id&gt;
  &lt;/risk_params&gt;
&lt;/payment_transaction&gt;'</span>
</code></pre>

<p><strong>Request Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>required</td>
<td>string(255)</td>
<td>The transaction type: <strong>boleto</strong></td>
</tr>
<tr>
<td>transaction_id</td>
<td>required</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>usage</td>
<td>optional</td>
<td>string(255)</td>
<td>Description of the transaction for later use</td>
</tr>
<tr>
<td>remote_ip</td>
<td>required*</td>
<td>IPv4 address</td>
<td>IPv4 address of customer</td>
</tr>
<tr>
<td>return_success_url</td>
<td>required</td>
<td>url</td>
<td>URL where customer is sent to after successful payment</td>
</tr>
<tr>
<td>return_failure_url</td>
<td>required</td>
<td>url</td>
<td>URL where customer is sent to after unsuccessful payment</td>
</tr>
<tr>
<td>amount</td>
<td>required</td>
<td>integer &gt; 0</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>required</td>
<td>string(3)</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>consumer_reference</td>
<td>required</td>
<td>string(20)</td>
<td>Consumer reference is a unique consumer identifier</td>
</tr>
<tr>
<td>national_id</td>
<td>required</td>
<td>string(20)</td>
<td>National Identifier number of the customer</td>
</tr>
<tr>
<td>birth_date</td>
<td>optional</td>
<td>string(20)</td>
<td>Birth date of the customer</td>
</tr>
<tr>
<td>customer_email</td>
<td>required</td>
<td>e-mail address</td>
<td>Must contain valid e-mail of customer</td>
</tr>
<tr>
<td><strong>billing_address</strong></td>
<td>required</td>
<td></td>
<td>See <a href="#required-vs-optional-api-params">Required vs Optional API params</a> for details</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;first_name</td>
<td>required*</td>
<td>string(255)</td>
<td>Customer first name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;last_name</td>
<td>required*</td>
<td>string(255)</td>
<td>Customer last name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address1</td>
<td>required*</td>
<td>string(255)</td>
<td>Primary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address2</td>
<td>required*</td>
<td>string(255)</td>
<td>Secondary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;zip_code</td>
<td>required*</td>
<td>string</td>
<td>ZIP code</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;city</td>
<td>required*</td>
<td>string(255)</td>
<td>City</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;state</td>
<td>required*</td>
<td>string(2)</td>
<td>State code in <a href="https://en.wikipedia.org/wiki/ISO_3166-2">ISO 3166-2</a>, required for USA and Canada</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;country</td>
<td>required</td>
<td>string(2)</td>
<td>Country code in <a href="https://www.iso.org/iso-3166-country-codes.html">ISO 3166</a></td>
</tr>
<tr>
<td><strong>shipping_address</strong></td>
<td>optional</td>
<td></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;first_name</td>
<td>optional</td>
<td>string(255)</td>
<td>Customer first name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;last_name</td>
<td>optional</td>
<td>string(255)</td>
<td>Customer last name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address1</td>
<td>optional</td>
<td>string(255)</td>
<td>Primary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address2</td>
<td>optional</td>
<td>string(255)</td>
<td>Secondary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;zip_code</td>
<td>optional</td>
<td>string</td>
<td>ZIP code</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;city</td>
<td>optional</td>
<td>string(255)</td>
<td>City</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;state</td>
<td>optional</td>
<td>string(2)</td>
<td>State code in <a href="https://en.wikipedia.org/wiki/ISO_3166-2">ISO 3166-2</a>, required for USA and Canada</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;country</td>
<td>optional</td>
<td>string(2)</td>
<td>Country code in <a href="https://www.iso.org/iso-3166-country-codes.html">ISO 3166</a></td>
</tr>
</tbody></table>

<p><code>required* = conditionally required</code></p>

<p><strong>Supported countries:</strong></p>

<table><thead>
<tr>
<th>Country</th>
</tr>
</thead><tbody>
<tr>
<td>BR</td>
</tr>
</tbody></table>

<blockquote>
<p>Successful Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>This request is not implemented yet
</code></pre>

<pre class="highlight java tab-java"><code><span class="n">This</span> <span class="n">request</span> <span class="n">is</span> <span class="n">not</span> <span class="n">implemented</span> <span class="n">yet</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;boleto&lt;/transaction_type&gt;
  &lt;status&gt;pending_async&lt;/status&gt;
  &lt;mode&gt;live&lt;/mode&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;technical_message&gt;Transaction successful!&lt;/technical_message&gt;
  &lt;message&gt;Transaction successful!&lt;/message&gt;
  &lt;redirect_url&gt;https://gate.emerchantpay.net/redirect/to_acquirer/649e1ff35c61&lt;/redirect_url&gt;
  &lt;timestamp&gt;2019-03-14T12:06:00Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
  &lt;sent_to_acquirer&gt;true&lt;/sent_to_acquirer&gt;
&lt;/payment_transaction&gt;
</code></pre>

<p><strong>Successful Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>The transaction type</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>transaction_id</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>unique_id</td>
<td>string(32)</td>
<td>Unique id defined by gate (must later be used if capturing, voiding or refunding a transaction)</td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
<tr>
<td>message</td>
<td>string(255)</td>
<td>Human readable error message which can be displayed to users.</td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>redirect_url</td>
<td>url</td>
<td>URL where user has to be redirected to complete payment process. It is available for asynchronous mode</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when the transaction was processed in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Combined date and time</a> e.g. 2007-08- 30T17:46:11Z</td>
</tr>
<tr>
<td>descriptor</td>
<td>string</td>
<td>Static descriptor MID info as configured on the gateway</td>
</tr>
<tr>
<td>amount</td>
<td>integer</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>sent_to_acquirer</td>
<td>string</td>
<td>&quot;true&quot; or &quot;false&quot;</td>
</tr>
</tbody></table>

<blockquote>
<p>Error Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>This request is not implemented yet
</code></pre>

<pre class="highlight java tab-java"><code><span class="n">This</span> <span class="n">request</span> <span class="n">is</span> <span class="n">not</span> <span class="n">implemented</span> <span class="n">yet</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;boleto&lt;/transaction_type&gt;
  &lt;status&gt;error&lt;/status&gt;
  &lt;mode&gt;live&lt;/mode&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;code&gt;110&lt;/code&gt;
  &lt;message&gt;Something went wrong, please contact support!&lt;/message&gt;
  &lt;timestamp&gt;2019-03-14T12:06:00Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
  &lt;sent_to_acquirer&gt;true&lt;/sent_to_acquirer&gt;
&lt;/payment_transaction&gt;
</code></pre>

<p><strong>Error Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>The transaction type</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>transaction_id</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>unique_id</td>
<td>string(32)</td>
<td>Unique id defined by gate (must later be used if capturing, voiding or refunding a transaction)</td>
</tr>
<tr>
<td>code</td>
<td>integer</td>
<td>Error code according to <a href="#error-code-table">Error code table</a></td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
<tr>
<td>message</td>
<td>string(255)</td>
<td>Human readable error message which can be displayed to users.</td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when the transaction was processed in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Combined date and time</a> e.g. 2007-08- 30T17:46:11Z</td>
</tr>
<tr>
<td>descriptor</td>
<td>string</td>
<td>Static descriptor MID info as configured on the gateway</td>
</tr>
<tr>
<td>amount</td>
<td>integer</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>sent_to_acquirer</td>
<td>string</td>
<td>&quot;true&quot; or &quot;false&quot;</td>
</tr>
</tbody></table>
<h3 id='carulla'>Carulla</h3>
<aside class="notice">
Carulla is a payment service in Columbia that allows its users to send money, top up their cell phone and payments.
</aside>

<blockquote>
<p>Request</p>
</blockquote>

<pre class="highlight php tab-php"><code>This request is not implemented yet
</code></pre>

<pre class="highlight java tab-java"><code><span class="n">This</span> <span class="n">request</span> <span class="n">is</span> <span class="n">not</span> <span class="n">implemented</span> <span class="n">yet</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>curl https://username:password@gate.emerchantpay.net/process/TERMINAL-TOKEN <span class="se">\</span>
   -H <span class="s2">"Content-Type: text/xml"</span> <span class="se">\</span>
   -d <span class="s1">'
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;carulla&lt;/transaction_type&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;usage&gt;40208 concert tickets&lt;/usage&gt;
  &lt;remote_ip&gt;245.253.2.12&lt;/remote_ip&gt;
  &lt;return_success_url&gt;http://www.example.com/success&lt;/return_success_url&gt;
  &lt;return_failure_url&gt;http://www.example.com/failure&lt;/return_failure_url&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
  &lt;consumer_reference&gt;barney_rumble&lt;/consumer_reference&gt;
  &lt;national_id&gt;8812128812&lt;/national_id&gt;
  &lt;birth_date&gt;30-12-1992&lt;/birth_date&gt;
  &lt;customer_email&gt;barney@example.com&lt;/customer_email&gt;
  &lt;billing_address&gt;
    &lt;first_name&gt;Barney&lt;/first_name&gt;
    &lt;last_name&gt;Rubble&lt;/last_name&gt;
    &lt;address1&gt;14, Nerazdelni str&lt;/address1&gt;
    &lt;zip_code&gt;1407&lt;/zip_code&gt;
    &lt;city&gt;Bogota&lt;/city&gt;
    &lt;country&gt;CO&lt;/country&gt;
  &lt;/billing_address&gt;
  &lt;risk_params&gt;
    &lt;user_id&gt;123456&lt;/user_id&gt;
  &lt;/risk_params&gt;
&lt;/payment_transaction&gt;'</span>
</code></pre>

<p><strong>Request Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>required</td>
<td>string(255)</td>
<td>The transaction type: <strong>carulla</strong></td>
</tr>
<tr>
<td>transaction_id</td>
<td>required</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>usage</td>
<td>optional</td>
<td>string(255)</td>
<td>Description of the transaction for later use</td>
</tr>
<tr>
<td>remote_ip</td>
<td>required*</td>
<td>IPv4 address</td>
<td>IPv4 address of customer</td>
</tr>
<tr>
<td>return_success_url</td>
<td>required</td>
<td>url</td>
<td>URL where customer is sent to after successful payment</td>
</tr>
<tr>
<td>return_failure_url</td>
<td>required</td>
<td>url</td>
<td>URL where customer is sent to after unsuccessful payment</td>
</tr>
<tr>
<td>amount</td>
<td>required</td>
<td>integer &gt; 0</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>required</td>
<td>string(3)</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>consumer_reference</td>
<td>required</td>
<td>string(20)</td>
<td>Consumer reference is a unique consumer identifier</td>
</tr>
<tr>
<td>national_id</td>
<td>required</td>
<td>string(20)</td>
<td>National Identifier number of the customer</td>
</tr>
<tr>
<td>birth_date</td>
<td>optional</td>
<td>dd-mm-yyyy</td>
<td>Required for Visa only when MCC is a Financial Services one (e.g. MCC 6012)</td>
</tr>
<tr>
<td>customer_email</td>
<td>required</td>
<td>e-mail address</td>
<td>Must contain valid e-mail of customer</td>
</tr>
<tr>
<td><strong>billing_address</strong></td>
<td>required</td>
<td></td>
<td>See <a href="#required-vs-optional-api-params">Required vs Optional API params</a> for details</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;first_name</td>
<td>required*</td>
<td>string(255)</td>
<td>Customer first name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;last_name</td>
<td>required*</td>
<td>string(255)</td>
<td>Customer last name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address1</td>
<td>required*</td>
<td>string(255)</td>
<td>Primary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address2</td>
<td>required*</td>
<td>string(255)</td>
<td>Secondary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;zip_code</td>
<td>required*</td>
<td>string</td>
<td>ZIP code</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;city</td>
<td>required*</td>
<td>string(255)</td>
<td>City</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;state</td>
<td>required*</td>
<td>string(2)</td>
<td>State code in <a href="https://en.wikipedia.org/wiki/ISO_3166-2">ISO 3166-2</a>, required for USA and Canada</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;country</td>
<td>required</td>
<td>string(2)</td>
<td>Country code in <a href="https://www.iso.org/iso-3166-country-codes.html">ISO 3166</a></td>
</tr>
<tr>
<td><strong>shipping_address</strong></td>
<td>optional</td>
<td></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;first_name</td>
<td>optional</td>
<td>string(255)</td>
<td>Customer first name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;last_name</td>
<td>optional</td>
<td>string(255)</td>
<td>Customer last name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address1</td>
<td>optional</td>
<td>string(255)</td>
<td>Primary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address2</td>
<td>optional</td>
<td>string(255)</td>
<td>Secondary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;zip_code</td>
<td>optional</td>
<td>string</td>
<td>ZIP code</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;city</td>
<td>optional</td>
<td>string(255)</td>
<td>City</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;state</td>
<td>optional</td>
<td>string(2)</td>
<td>State code in <a href="https://en.wikipedia.org/wiki/ISO_3166-2">ISO 3166-2</a>, required for USA and Canada</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;country</td>
<td>optional</td>
<td>string(2)</td>
<td>Country code in <a href="https://www.iso.org/iso-3166-country-codes.html">ISO 3166</a></td>
</tr>
</tbody></table>

<p><code>required* = conditionally required</code></p>

<p><strong>Supported countries:</strong></p>

<table><thead>
<tr>
<th>Country</th>
</tr>
</thead><tbody>
<tr>
<td>CO</td>
</tr>
</tbody></table>

<blockquote>
<p>Successful Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>This request is not implemented yet
</code></pre>

<pre class="highlight java tab-java"><code><span class="n">This</span> <span class="n">request</span> <span class="n">is</span> <span class="n">not</span> <span class="n">implemented</span> <span class="n">yet</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;carulla&lt;/transaction_type&gt;
  &lt;status&gt;pending_async&lt;/status&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;redirect_url&gt;https://gate.emerchantpay.net/redirect/to_acquirer/649e1ff35c61&lt;/redirect_url&gt;
  &lt;technical_message&gt;Transaction successful!&lt;/technical_message&gt;
  &lt;message&gt;Transaction successful!&lt;/message&gt;
  &lt;timestamp&gt;2019-03-14T12:06:00Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
  &lt;sent_to_acquirer&gt;true&lt;/sent_to_acquirer&gt;
&lt;/payment_transaction&gt;
</code></pre>

<p><strong>Successful Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>The transaction type</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>transaction_id</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>unique_id</td>
<td>string(32)</td>
<td>Unique id defined by gate (must later be used if capturing, voiding or refunding a transaction)</td>
</tr>
<tr>
<td>redirect_url</td>
<td>url</td>
<td>URL where user has to be redirected to complete payment process. It is available for asynchronous mode</td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
<tr>
<td>message</td>
<td>string(255)</td>
<td>Human readable error message which can be displayed to users.</td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when the transaction was processed in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Combined date and time</a> e.g. 2007-08- 30T17:46:11Z</td>
</tr>
<tr>
<td>descriptor</td>
<td>string</td>
<td>Static descriptor MID info as configured on the gateway</td>
</tr>
<tr>
<td>amount</td>
<td>integer</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>sent_to_acquirer</td>
<td>string</td>
<td>&quot;true&quot; or &quot;false&quot;</td>
</tr>
</tbody></table>

<blockquote>
<p>Error Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>This request is not implemented yet
</code></pre>

<pre class="highlight java tab-java"><code><span class="n">This</span> <span class="n">request</span> <span class="n">is</span> <span class="n">not</span> <span class="n">implemented</span> <span class="n">yet</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;carulla&lt;/transaction_type&gt;
  &lt;status&gt;error&lt;/status&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;code&gt;110&lt;/code&gt;
  &lt;message&gt;Something went wrong, please contact support!&lt;/message&gt;
  &lt;timestamp&gt;2019-03-14T12:06:00Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
  &lt;sent_to_acquirer&gt;true&lt;/sent_to_acquirer&gt;
&lt;/payment_transaction&gt;
</code></pre>

<p><strong>Error Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>The transaction type</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>transaction_id</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>unique_id</td>
<td>string(32)</td>
<td>Unique id defined by gate (must later be used if capturing, voiding or refunding a transaction)</td>
</tr>
<tr>
<td>code</td>
<td>integer</td>
<td>Error code according to <a href="#error-code-table">Error code table</a></td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
<tr>
<td>message</td>
<td>string(255)</td>
<td>Human readable error message which can be displayed to users.</td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when the transaction was processed in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Combined date and time</a> e.g. 2007-08- 30T17:46:11Z</td>
</tr>
<tr>
<td>descriptor</td>
<td>string</td>
<td>Static descriptor MID info as configured on the gateway</td>
</tr>
<tr>
<td>amount</td>
<td>integer</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>sent_to_acquirer</td>
<td>string</td>
<td>&quot;true&quot; or &quot;false&quot;</td>
</tr>
</tbody></table>
<h3 id='efecty'>Efecty</h3>
<aside class="notice">
Efecty is an offline cash payment voucher option in Colombia.
</aside>

<blockquote>
<p>Request</p>
</blockquote>

<pre class="highlight php tab-php"><code>This request is not implemented yet
</code></pre>

<pre class="highlight java tab-java"><code><span class="n">This</span> <span class="n">request</span> <span class="n">is</span> <span class="n">not</span> <span class="n">implemented</span> <span class="n">yet</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>curl https://username:password@gate.emerchantpay.net/process/TERMINAL-TOKEN <span class="se">\</span>
   -H <span class="s2">"Content-Type: text/xml"</span> <span class="se">\</span>
   -d <span class="s1">'
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;efecty&lt;/transaction_type&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;usage&gt;40208 concert tickets&lt;/usage&gt;
  &lt;remote_ip&gt;245.253.2.12&lt;/remote_ip&gt;
  &lt;return_success_url&gt;http://www.example.com/success&lt;/return_success_url&gt;
  &lt;return_failure_url&gt;http://www.example.com/failure&lt;/return_failure_url&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
  &lt;consumer_reference&gt;barney_rumble&lt;/consumer_reference&gt;
  &lt;national_id&gt;8812128812&lt;/national_id&gt;
  &lt;birth_date&gt;30-12-1992&lt;/birth_date&gt;
  &lt;customer_email&gt;barney@example.com&lt;/customer_email&gt;
  &lt;billing_address&gt;
    &lt;first_name&gt;Barney&lt;/first_name&gt;
    &lt;last_name&gt;Rubble&lt;/last_name&gt;
    &lt;address1&gt;14, Nerazdelni str&lt;/address1&gt;
    &lt;zip_code&gt;1407&lt;/zip_code&gt;
    &lt;city&gt;Bogota&lt;/city&gt;
    &lt;country&gt;CO&lt;/country&gt;
  &lt;/billing_address&gt;
  &lt;risk_params&gt;
    &lt;user_id&gt;123456&lt;/user_id&gt;
  &lt;/risk_params&gt;
&lt;/payment_transaction&gt;'</span>
</code></pre>

<p><strong>Request Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>required</td>
<td>string(255)</td>
<td>The transaction type: <strong>efecty</strong></td>
</tr>
<tr>
<td>transaction_id</td>
<td>required</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>usage</td>
<td>optional</td>
<td>string(255)</td>
<td>Description of the transaction for later use</td>
</tr>
<tr>
<td>remote_ip</td>
<td>required*</td>
<td>IPv4 address</td>
<td>IPv4 address of customer</td>
</tr>
<tr>
<td>return_success_url</td>
<td>required</td>
<td>url</td>
<td>URL where customer is sent to after successful payment</td>
</tr>
<tr>
<td>return_failure_url</td>
<td>required</td>
<td>url</td>
<td>URL where customer is sent to after unsuccessful payment</td>
</tr>
<tr>
<td>amount</td>
<td>required</td>
<td>integer &gt; 0</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>required</td>
<td>string(3)</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>consumer_reference</td>
<td>required</td>
<td>string(20)</td>
<td>Consumer reference is a unique consumer identifier</td>
</tr>
<tr>
<td>national_id</td>
<td>required</td>
<td>string(20)</td>
<td>National Identifier number of the customer</td>
</tr>
<tr>
<td>birth_date</td>
<td>optional</td>
<td>dd-mm-yyyy</td>
<td>Required for Visa only when MCC is a Financial Services one (e.g. MCC 6012)</td>
</tr>
<tr>
<td>customer_email</td>
<td>required</td>
<td>e-mail address</td>
<td>Must contain valid e-mail of customer</td>
</tr>
<tr>
<td><strong>billing_address</strong></td>
<td>required</td>
<td></td>
<td>See <a href="#required-vs-optional-api-params">Required vs Optional API params</a> for details</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;first_name</td>
<td>required*</td>
<td>string(255)</td>
<td>Customer first name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;last_name</td>
<td>required*</td>
<td>string(255)</td>
<td>Customer last name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address1</td>
<td>required*</td>
<td>string(255)</td>
<td>Primary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address2</td>
<td>required*</td>
<td>string(255)</td>
<td>Secondary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;zip_code</td>
<td>required*</td>
<td>string</td>
<td>ZIP code</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;city</td>
<td>required*</td>
<td>string(255)</td>
<td>City</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;state</td>
<td>required*</td>
<td>string(2)</td>
<td>State code in <a href="https://en.wikipedia.org/wiki/ISO_3166-2">ISO 3166-2</a>, required for USA and Canada</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;country</td>
<td>required</td>
<td>string(2)</td>
<td>Country code in <a href="https://www.iso.org/iso-3166-country-codes.html">ISO 3166</a></td>
</tr>
<tr>
<td><strong>shipping_address</strong></td>
<td>optional</td>
<td></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;first_name</td>
<td>optional</td>
<td>string(255)</td>
<td>Customer first name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;last_name</td>
<td>optional</td>
<td>string(255)</td>
<td>Customer last name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address1</td>
<td>optional</td>
<td>string(255)</td>
<td>Primary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address2</td>
<td>optional</td>
<td>string(255)</td>
<td>Secondary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;zip_code</td>
<td>optional</td>
<td>string</td>
<td>ZIP code</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;city</td>
<td>optional</td>
<td>string(255)</td>
<td>City</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;state</td>
<td>optional</td>
<td>string(2)</td>
<td>State code in <a href="https://en.wikipedia.org/wiki/ISO_3166-2">ISO 3166-2</a>, required for USA and Canada</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;country</td>
<td>optional</td>
<td>string(2)</td>
<td>Country code in <a href="https://www.iso.org/iso-3166-country-codes.html">ISO 3166</a></td>
</tr>
</tbody></table>

<p><code>required* = conditionally required</code></p>

<p><strong>Supported countries:</strong></p>

<table><thead>
<tr>
<th>Country</th>
</tr>
</thead><tbody>
<tr>
<td>CO</td>
</tr>
</tbody></table>

<blockquote>
<p>Successful Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>This request is not implemented yet
</code></pre>

<pre class="highlight java tab-java"><code><span class="n">This</span> <span class="n">request</span> <span class="n">is</span> <span class="n">not</span> <span class="n">implemented</span> <span class="n">yet</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;efecty&lt;/transaction_type&gt;
  &lt;status&gt;pending_async&lt;/status&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;redirect_url&gt;https://gate.emerchantpay.net/redirect/to_acquirer/649e1ff35c61&lt;/redirect_url&gt;
  &lt;technical_message&gt;Transaction successful!&lt;/technical_message&gt;
  &lt;message&gt;Transaction successful!&lt;/message&gt;
  &lt;timestamp&gt;2019-03-14T12:06:00Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
  &lt;sent_to_acquirer&gt;true&lt;/sent_to_acquirer&gt;
&lt;/payment_transaction&gt;
</code></pre>

<p><strong>Successful Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>The transaction type</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>transaction_id</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>unique_id</td>
<td>string(32)</td>
<td>Unique id defined by gate (must later be used if capturing, voiding or refunding a transaction)</td>
</tr>
<tr>
<td>redirect_url</td>
<td>url</td>
<td>URL where user has to be redirected to complete payment process. It is available for asynchronous mode</td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
<tr>
<td>message</td>
<td>string(255)</td>
<td>Human readable error message which can be displayed to users.</td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when the transaction was processed in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Combined date and time</a> e.g. 2007-08- 30T17:46:11Z</td>
</tr>
<tr>
<td>descriptor</td>
<td>string</td>
<td>Static descriptor MID info as configured on the gateway</td>
</tr>
<tr>
<td>amount</td>
<td>integer</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>sent_to_acquirer</td>
<td>string</td>
<td>&quot;true&quot; or &quot;false&quot;</td>
</tr>
</tbody></table>

<blockquote>
<p>Error Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>This request is not implemented yet
</code></pre>

<pre class="highlight java tab-java"><code><span class="n">This</span> <span class="n">request</span> <span class="n">is</span> <span class="n">not</span> <span class="n">implemented</span> <span class="n">yet</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;efecty&lt;/transaction_type&gt;
  &lt;status&gt;error&lt;/status&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;code&gt;110&lt;/code&gt;
  &lt;message&gt;Something went wrong, please contact support!&lt;/message&gt;
  &lt;timestamp&gt;2019-03-14T12:06:01Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
  &lt;sent_to_acquirer&gt;true&lt;/sent_to_acquirer&gt;
&lt;/payment_transaction&gt;
</code></pre>

<p><strong>Error Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>The transaction type</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>transaction_id</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>unique_id</td>
<td>string(32)</td>
<td>Unique id defined by gate (must later be used if capturing, voiding or refunding a transaction)</td>
</tr>
<tr>
<td>code</td>
<td>integer</td>
<td>Error code according to <a href="#error-code-table">Error code table</a></td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
<tr>
<td>message</td>
<td>string(255)</td>
<td>Human readable error message which can be displayed to users.</td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when the transaction was processed in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Combined date and time</a> e.g. 2007-08- 30T17:46:11Z</td>
</tr>
<tr>
<td>descriptor</td>
<td>string</td>
<td>Static descriptor MID info as configured on the gateway</td>
</tr>
<tr>
<td>amount</td>
<td>integer</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>sent_to_acquirer</td>
<td>string</td>
<td>&quot;true&quot; or &quot;false&quot;</td>
</tr>
</tbody></table>
<h3 id='emprese-de-energia'>Emprese De Energia</h3>
<aside class="notice" >
Emprese De Energia is a cash payment in Colombia
</aside>

<blockquote>
<p>Request</p>
</blockquote>

<pre class="highlight php tab-php"><code>This request is not implemented yet
</code></pre>

<pre class="highlight java tab-java"><code><span class="n">This</span> <span class="n">request</span> <span class="n">is</span> <span class="n">not</span> <span class="n">implemented</span> <span class="n">yet</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>curl https://username:password@gate.emerchantpay.net/process/TERMINAL-TOKEN <span class="se">\</span>
   -H <span class="s2">"Content-Type: text/xml"</span> <span class="se">\</span>
   -d <span class="s1">'
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;emprese_de_energia&lt;/transaction_type&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;usage&gt;40208 concert tickets&lt;/usage&gt;
  &lt;remote_ip&gt;245.253.2.12&lt;/remote_ip&gt;
  &lt;return_success_url&gt;http://www.example.com/success&lt;/return_success_url&gt;
  &lt;return_failure_url&gt;http://www.example.com/failure&lt;/return_failure_url&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
  &lt;consumer_reference&gt;barney_rubble&lt;/consumer_reference&gt;
  &lt;national_id&gt;8812128812&lt;/national_id&gt;
  &lt;birth_date&gt;30-12-1992&lt;/birth_date&gt;
  &lt;customer_email&gt;travis@example.com&lt;/customer_email&gt;
  &lt;billing_address&gt;
    &lt;first_name&gt;Barney&lt;/first_name&gt;
    &lt;last_name&gt;Rubble&lt;/last_name&gt;
    &lt;address1&gt;14, Nerazdelni str&lt;/address1&gt;
    &lt;zip_code&gt;1407&lt;/zip_code&gt;
    &lt;city&gt;Bogota&lt;/city&gt;
    &lt;country&gt;CO&lt;/country&gt;
  &lt;/billing_address&gt;
  &lt;risk_params&gt;
    &lt;user_id&gt;123456&lt;/user_id&gt;
  &lt;/risk_params&gt;
&lt;/payment_transaction&gt;'</span>
</code></pre>

<p><strong>Request Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>required</td>
<td>string(255)</td>
<td>The transaction type: <strong>emprese_de_energia</strong></td>
</tr>
<tr>
<td>transaction_id</td>
<td>required</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>usage</td>
<td>optional</td>
<td>string(255)</td>
<td>Description of the transaction for later use</td>
</tr>
<tr>
<td>remote_ip</td>
<td>required*</td>
<td>IPv4 address</td>
<td>IPv4 address of customer</td>
</tr>
<tr>
<td>return_success_url</td>
<td>required</td>
<td>url</td>
<td>URL where customer is sent to after successful payment</td>
</tr>
<tr>
<td>return_failure_url</td>
<td>required</td>
<td>url</td>
<td>URL where customer is sent to after unsuccessful payment</td>
</tr>
<tr>
<td>amount</td>
<td>required</td>
<td>integer &gt; 0</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>required</td>
<td>string(3)</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>consumer_reference</td>
<td>required</td>
<td>string(20)</td>
<td>Consumer reference is a unique consumer identifier</td>
</tr>
<tr>
<td>national_id</td>
<td>required</td>
<td>string(20)</td>
<td>National Identifier number of the customer</td>
</tr>
<tr>
<td>birth_date</td>
<td>optional</td>
<td>string(20)</td>
<td>Birth date of the customer</td>
</tr>
<tr>
<td>customer_email</td>
<td>required</td>
<td>e-mail address</td>
<td>Must contain valid e-mail of customer</td>
</tr>
<tr>
<td><strong>billing_address</strong></td>
<td>required</td>
<td></td>
<td>See <a href="#required-vs-optional-api-params">Required vs Optional API params</a> for details</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;first_name</td>
<td>required*</td>
<td>string(255)</td>
<td>Customer first name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;last_name</td>
<td>required*</td>
<td>string(255)</td>
<td>Customer last name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address1</td>
<td>required*</td>
<td>string(255)</td>
<td>Primary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address2</td>
<td>required*</td>
<td>string(255)</td>
<td>Secondary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;zip_code</td>
<td>required*</td>
<td>string</td>
<td>ZIP code</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;city</td>
<td>required*</td>
<td>string(255)</td>
<td>City</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;state</td>
<td>required*</td>
<td>string(2)</td>
<td>State code in <a href="https://en.wikipedia.org/wiki/ISO_3166-2">ISO 3166-2</a>, required for USA and Canada</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;country</td>
<td>required</td>
<td>string(2)</td>
<td>Country code in <a href="https://www.iso.org/iso-3166-country-codes.html">ISO 3166</a></td>
</tr>
<tr>
<td><strong>shipping_address</strong></td>
<td>optional</td>
<td></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;first_name</td>
<td>optional</td>
<td>string(255)</td>
<td>Customer first name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;last_name</td>
<td>optional</td>
<td>string(255)</td>
<td>Customer last name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address1</td>
<td>optional</td>
<td>string(255)</td>
<td>Primary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address2</td>
<td>optional</td>
<td>string(255)</td>
<td>Secondary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;zip_code</td>
<td>optional</td>
<td>string</td>
<td>ZIP code</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;city</td>
<td>optional</td>
<td>string(255)</td>
<td>City</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;state</td>
<td>optional</td>
<td>string(2)</td>
<td>State code in <a href="https://en.wikipedia.org/wiki/ISO_3166-2">ISO 3166-2</a>, required for USA and Canada</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;country</td>
<td>optional</td>
<td>string(2)</td>
<td>Country code in <a href="https://www.iso.org/iso-3166-country-codes.html">ISO 3166</a></td>
</tr>
</tbody></table>

<p><code>required* = conditionally required</code></p>

<p><strong>Supported countries:</strong></p>

<table><thead>
<tr>
<th>Country</th>
</tr>
</thead><tbody>
<tr>
<td>CO</td>
</tr>
</tbody></table>

<blockquote>
<p>Successful Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>This request is not implemented yet
</code></pre>

<pre class="highlight java tab-java"><code><span class="n">This</span> <span class="n">request</span> <span class="n">is</span> <span class="n">not</span> <span class="n">implemented</span> <span class="n">yet</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;emprese_de_energia&lt;/transaction_type&gt;
  &lt;status&gt;pending_async&lt;/status&gt;
  &lt;mode&gt;live&lt;/mode&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;technical_message&gt;Transaction successful!&lt;/technical_message&gt;
  &lt;message&gt;Transaction successful!&lt;/message&gt;
  &lt;redirect_url&gt;https://gate.emerchantpay.net/redirect/to_acquirer/649e1ff35c61&lt;/redirect_url&gt;
  &lt;timestamp&gt;2019-03-14T12:06:01Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
  &lt;sent_to_acquirer&gt;true&lt;/sent_to_acquirer&gt;
&lt;/payment_transaction&gt;
</code></pre>

<p><strong>Successful Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>The transaction type</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>transaction_id</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>unique_id</td>
<td>string(32)</td>
<td>Unique id defined by gate (must later be used if capturing, voiding or refunding a transaction)</td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
<tr>
<td>message</td>
<td>string(255)</td>
<td>Human readable error message which can be displayed to users.</td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>redirect_url</td>
<td>url</td>
<td>URL where user has to be redirected to complete payment process. It is available for asynchronous mode</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when the transaction was processed in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Combined date and time</a> e.g. 2007-08- 30T17:46:11Z</td>
</tr>
<tr>
<td>descriptor</td>
<td>string</td>
<td>Static descriptor MID info as configured on the gateway</td>
</tr>
<tr>
<td>amount</td>
<td>integer</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>sent_to_acquirer</td>
<td>string</td>
<td>&quot;true&quot; or &quot;false&quot;</td>
</tr>
</tbody></table>

<blockquote>
<p>Error Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>This request is not implemented yet
</code></pre>

<pre class="highlight java tab-java"><code><span class="n">This</span> <span class="n">request</span> <span class="n">is</span> <span class="n">not</span> <span class="n">implemented</span> <span class="n">yet</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;emprese_de_energia&lt;/transaction_type&gt;
  &lt;status&gt;error&lt;/status&gt;
  &lt;mode&gt;live&lt;/mode&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;code&gt;110&lt;/code&gt;
  &lt;message&gt;Something went wrong, please contact support!&lt;/message&gt;
  &lt;timestamp&gt;2019-03-14T12:06:01Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
  &lt;sent_to_acquirer&gt;true&lt;/sent_to_acquirer&gt;
&lt;/payment_transaction&gt;
</code></pre>

<p><strong>Error Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>The transaction type</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>transaction_id</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>unique_id</td>
<td>string(32)</td>
<td>Unique id defined by gate (must later be used if capturing, voiding or refunding a transaction)</td>
</tr>
<tr>
<td>code</td>
<td>integer</td>
<td>Error code according to <a href="#error-code-table">Error code table</a></td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
<tr>
<td>message</td>
<td>string(255)</td>
<td>Human readable error message which can be displayed to users.</td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when the transaction was processed in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Combined date and time</a> e.g. 2007-08- 30T17:46:11Z</td>
</tr>
<tr>
<td>descriptor</td>
<td>string</td>
<td>Static descriptor MID info as configured on the gateway</td>
</tr>
<tr>
<td>amount</td>
<td>integer</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>sent_to_acquirer</td>
<td>string</td>
<td>&quot;true&quot; or &quot;false&quot;</td>
</tr>
</tbody></table>
<h3 id='oxxo'>OXXO</h3>
<aside class="notice">
OXXO is the preferred payment method in Mexico. It is a cash payment via a barcode document thats accepted in more than 14,000 stores.
</aside>

<blockquote>
<p>Request</p>
</blockquote>

<pre class="highlight php tab-php"><code>This request is not implemented yet
</code></pre>

<pre class="highlight java tab-java"><code><span class="n">This</span> <span class="n">request</span> <span class="n">is</span> <span class="n">not</span> <span class="n">implemented</span> <span class="n">yet</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>curl https://username:password@gate.emerchantpay.net/process/TERMINAL-TOKEN <span class="se">\</span>
   -H <span class="s2">"Content-Type: text/xml"</span> <span class="se">\</span>
   -d <span class="s1">'
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;oxxo&lt;/transaction_type&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;usage&gt;40208 concert tickets&lt;/usage&gt;
  &lt;remote_ip&gt;245.253.2.12&lt;/remote_ip&gt;
  &lt;return_success_url&gt;http://www.example.com/success&lt;/return_success_url&gt;
  &lt;return_failure_url&gt;http://www.example.com/failure&lt;/return_failure_url&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
  &lt;consumer_reference&gt;barney_rumble&lt;/consumer_reference&gt;
  &lt;national_id&gt;8812128812&lt;/national_id&gt;
  &lt;birth_date&gt;30-12-1992&lt;/birth_date&gt;
  &lt;customer_email&gt;barney@example.com&lt;/customer_email&gt;
  &lt;billing_address&gt;
    &lt;first_name&gt;Barney&lt;/first_name&gt;
    &lt;last_name&gt;Rubble&lt;/last_name&gt;
    &lt;address1&gt;14, Nerazdelni str&lt;/address1&gt;
    &lt;zip_code&gt;1407&lt;/zip_code&gt;
    &lt;city&gt;Mexico City&lt;/city&gt;
    &lt;country&gt;MX&lt;/country&gt;
  &lt;/billing_address&gt;
  &lt;risk_params&gt;
    &lt;user_id&gt;123456&lt;/user_id&gt;
  &lt;/risk_params&gt;
&lt;/payment_transaction&gt;'</span>
</code></pre>

<p><strong>Request Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>required</td>
<td>string(255)</td>
<td>The transaction type: <strong>oxxo</strong></td>
</tr>
<tr>
<td>transaction_id</td>
<td>required</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>usage</td>
<td>optional</td>
<td>string(255)</td>
<td>Description of the transaction for later use</td>
</tr>
<tr>
<td>remote_ip</td>
<td>required*</td>
<td>IPv4 address</td>
<td>IPv4 address of customer</td>
</tr>
<tr>
<td>return_success_url</td>
<td>required</td>
<td>url</td>
<td>URL where customer is sent to after successful payment</td>
</tr>
<tr>
<td>return_failure_url</td>
<td>required</td>
<td>url</td>
<td>URL where customer is sent to after unsuccessful payment</td>
</tr>
<tr>
<td>amount</td>
<td>required</td>
<td>integer &gt; 0</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>required</td>
<td>string(3)</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>consumer_reference</td>
<td>required</td>
<td>string(20)</td>
<td>Consumer reference is a unique consumer identifier</td>
</tr>
<tr>
<td>national_id</td>
<td>required</td>
<td>string(20)</td>
<td>National Identifier number of the customer</td>
</tr>
<tr>
<td>birth_date</td>
<td>optional</td>
<td>dd-mm-yyyy</td>
<td>Required for Visa only when MCC is a Financial Services one (e.g. MCC 6012)</td>
</tr>
<tr>
<td>customer_email</td>
<td>required</td>
<td>e-mail address</td>
<td>Must contain valid e-mail of customer</td>
</tr>
<tr>
<td><strong>billing_address</strong></td>
<td>required</td>
<td></td>
<td>See <a href="#required-vs-optional-api-params">Required vs Optional API params</a> for details</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;first_name</td>
<td>required*</td>
<td>string(255)</td>
<td>Customer first name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;last_name</td>
<td>required*</td>
<td>string(255)</td>
<td>Customer last name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address1</td>
<td>required*</td>
<td>string(255)</td>
<td>Primary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address2</td>
<td>required*</td>
<td>string(255)</td>
<td>Secondary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;zip_code</td>
<td>required*</td>
<td>string</td>
<td>ZIP code</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;city</td>
<td>required*</td>
<td>string(255)</td>
<td>City</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;state</td>
<td>required*</td>
<td>string(2)</td>
<td>State code in <a href="https://en.wikipedia.org/wiki/ISO_3166-2">ISO 3166-2</a>, required for USA and Canada</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;country</td>
<td>required</td>
<td>string(2)</td>
<td>Country code in <a href="https://www.iso.org/iso-3166-country-codes.html">ISO 3166</a></td>
</tr>
<tr>
<td><strong>shipping_address</strong></td>
<td>optional</td>
<td></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;first_name</td>
<td>optional</td>
<td>string(255)</td>
<td>Customer first name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;last_name</td>
<td>optional</td>
<td>string(255)</td>
<td>Customer last name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address1</td>
<td>optional</td>
<td>string(255)</td>
<td>Primary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address2</td>
<td>optional</td>
<td>string(255)</td>
<td>Secondary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;zip_code</td>
<td>optional</td>
<td>string</td>
<td>ZIP code</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;city</td>
<td>optional</td>
<td>string(255)</td>
<td>City</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;state</td>
<td>optional</td>
<td>string(2)</td>
<td>State code in <a href="https://en.wikipedia.org/wiki/ISO_3166-2">ISO 3166-2</a>, required for USA and Canada</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;country</td>
<td>optional</td>
<td>string(2)</td>
<td>Country code in <a href="https://www.iso.org/iso-3166-country-codes.html">ISO 3166</a></td>
</tr>
</tbody></table>

<p><code>required* = conditionally required</code></p>

<p><strong>Supported countries:</strong></p>

<table><thead>
<tr>
<th>Country</th>
</tr>
</thead><tbody>
<tr>
<td>MX</td>
</tr>
</tbody></table>

<blockquote>
<p>Successful Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>This request is not implemented yet
</code></pre>

<pre class="highlight java tab-java"><code><span class="n">This</span> <span class="n">request</span> <span class="n">is</span> <span class="n">not</span> <span class="n">implemented</span> <span class="n">yet</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;oxxo&lt;/transaction_type&gt;
  &lt;status&gt;pending_async&lt;/status&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;redirect_url&gt;https://gate.emerchantpay.net/redirect/to_acquirer/649e1ff35c61&lt;/redirect_url&gt;
  &lt;technical_message&gt;Transaction successful!&lt;/technical_message&gt;
  &lt;message&gt;Transaction successful!&lt;/message&gt;
  &lt;timestamp&gt;2019-03-14T12:06:01Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
  &lt;sent_to_acquirer&gt;true&lt;/sent_to_acquirer&gt;
&lt;/payment_transaction&gt;
</code></pre>

<p><strong>Successful Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>The transaction type</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>transaction_id</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>unique_id</td>
<td>string(32)</td>
<td>Unique id defined by gate (must later be used if capturing, voiding or refunding a transaction)</td>
</tr>
<tr>
<td>redirect_url</td>
<td>url</td>
<td>URL where user has to be redirected to complete payment process. It is available for asynchronous mode</td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
<tr>
<td>message</td>
<td>string(255)</td>
<td>Human readable error message which can be displayed to users.</td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when the transaction was processed in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Combined date and time</a> e.g. 2007-08- 30T17:46:11Z</td>
</tr>
<tr>
<td>descriptor</td>
<td>string</td>
<td>Static descriptor MID info as configured on the gateway</td>
</tr>
<tr>
<td>amount</td>
<td>integer</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>sent_to_acquirer</td>
<td>string</td>
<td>&quot;true&quot; or &quot;false&quot;</td>
</tr>
</tbody></table>

<blockquote>
<p>Error Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>This request is not implemented yet
</code></pre>

<pre class="highlight java tab-java"><code><span class="n">This</span> <span class="n">request</span> <span class="n">is</span> <span class="n">not</span> <span class="n">implemented</span> <span class="n">yet</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;oxxo&lt;/transaction_type&gt;
  &lt;status&gt;error&lt;/status&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;code&gt;110&lt;/code&gt;
  &lt;message&gt;Something went wrong, please contact support!&lt;/message&gt;
  &lt;timestamp&gt;2019-03-14T12:06:01Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
  &lt;sent_to_acquirer&gt;true&lt;/sent_to_acquirer&gt;
&lt;/payment_transaction&gt;
</code></pre>

<p><strong>Error Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>The transaction type</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>transaction_id</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>unique_id</td>
<td>string(32)</td>
<td>Unique id defined by gate (must later be used if capturing, voiding or refunding a transaction)</td>
</tr>
<tr>
<td>code</td>
<td>integer</td>
<td>Error code according to <a href="#error-code-table">Error code table</a></td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
<tr>
<td>message</td>
<td>string(255)</td>
<td>Human readable error message which can be displayed to users.</td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when the transaction was processed in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Combined date and time</a> e.g. 2007-08- 30T17:46:11Z</td>
</tr>
<tr>
<td>descriptor</td>
<td>string</td>
<td>Static descriptor MID info as configured on the gateway</td>
</tr>
<tr>
<td>amount</td>
<td>integer</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>sent_to_acquirer</td>
<td>string</td>
<td>&quot;true&quot; or &quot;false&quot;</td>
</tr>
</tbody></table>
<h3 id='pago-facil'>Pago Facil</h3>
<aside class="notice">
Pago Facil is a payment service in Argentina that allows its users to send money, top up their cell phone and payments.
</aside>

<blockquote>
<p>Request</p>
</blockquote>

<pre class="highlight php tab-php"><code>This request is not implemented yet
</code></pre>

<pre class="highlight java tab-java"><code><span class="n">This</span> <span class="n">request</span> <span class="n">is</span> <span class="n">not</span> <span class="n">implemented</span> <span class="n">yet</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>curl https://username:password@gate.emerchantpay.net/process/TERMINAL-TOKEN <span class="se">\</span>
   -H <span class="s2">"Content-Type: text/xml"</span> <span class="se">\</span>
   -d <span class="s1">'
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;pago_facil&lt;/transaction_type&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;usage&gt;40208 concert tickets&lt;/usage&gt;
  &lt;remote_ip&gt;245.253.2.12&lt;/remote_ip&gt;
  &lt;return_success_url&gt;http://www.example.com/success&lt;/return_success_url&gt;
  &lt;return_failure_url&gt;http://www.example.com/failure&lt;/return_failure_url&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
  &lt;consumer_reference&gt;barney_rumble&lt;/consumer_reference&gt;
  &lt;national_id&gt;8812128812&lt;/national_id&gt;
  &lt;birth_date&gt;30-12-1992&lt;/birth_date&gt;
  &lt;customer_email&gt;barney@example.com&lt;/customer_email&gt;
  &lt;billing_address&gt;
    &lt;first_name&gt;Barney&lt;/first_name&gt;
    &lt;last_name&gt;Rubble&lt;/last_name&gt;
    &lt;address1&gt;14, Nerazdelni str&lt;/address1&gt;
    &lt;zip_code&gt;1407&lt;/zip_code&gt;
    &lt;city&gt;Buenos Aires&lt;/city&gt;
    &lt;country&gt;AR&lt;/country&gt;
  &lt;/billing_address&gt;
  &lt;risk_params&gt;
    &lt;user_id&gt;123456&lt;/user_id&gt;
  &lt;/risk_params&gt;
&lt;/payment_transaction&gt;'</span>
</code></pre>

<p><strong>Request Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>required</td>
<td>string(255)</td>
<td>The transaction type: <strong>pago_facil</strong></td>
</tr>
<tr>
<td>transaction_id</td>
<td>required</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>usage</td>
<td>optional</td>
<td>string(255)</td>
<td>Description of the transaction for later use</td>
</tr>
<tr>
<td>remote_ip</td>
<td>required*</td>
<td>IPv4 address</td>
<td>IPv4 address of customer</td>
</tr>
<tr>
<td>return_success_url</td>
<td>required</td>
<td>url</td>
<td>URL where customer is sent to after successful payment</td>
</tr>
<tr>
<td>return_failure_url</td>
<td>required</td>
<td>url</td>
<td>URL where customer is sent to after unsuccessful payment</td>
</tr>
<tr>
<td>amount</td>
<td>required</td>
<td>integer &gt; 0</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>required</td>
<td>string(3)</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>consumer_reference</td>
<td>required</td>
<td>string(20)</td>
<td>Consumer reference is a unique consumer identifier</td>
</tr>
<tr>
<td>national_id</td>
<td>required</td>
<td>string(20)</td>
<td>National Identifier number of the customer</td>
</tr>
<tr>
<td>birth_date</td>
<td>optional</td>
<td>dd-mm-yyyy</td>
<td>Required for Visa only when MCC is a Financial Services one (e.g. MCC 6012)</td>
</tr>
<tr>
<td>customer_email</td>
<td>required</td>
<td>e-mail address</td>
<td>Must contain valid e-mail of customer</td>
</tr>
<tr>
<td><strong>billing_address</strong></td>
<td>required</td>
<td></td>
<td>See <a href="#required-vs-optional-api-params">Required vs Optional API params</a> for details</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;first_name</td>
<td>required*</td>
<td>string(255)</td>
<td>Customer first name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;last_name</td>
<td>required*</td>
<td>string(255)</td>
<td>Customer last name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address1</td>
<td>required*</td>
<td>string(255)</td>
<td>Primary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address2</td>
<td>required*</td>
<td>string(255)</td>
<td>Secondary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;zip_code</td>
<td>required*</td>
<td>string</td>
<td>ZIP code</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;city</td>
<td>required*</td>
<td>string(255)</td>
<td>City</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;state</td>
<td>required*</td>
<td>string(2)</td>
<td>State code in <a href="https://en.wikipedia.org/wiki/ISO_3166-2">ISO 3166-2</a>, required for USA and Canada</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;country</td>
<td>required</td>
<td>string(2)</td>
<td>Country code in <a href="https://www.iso.org/iso-3166-country-codes.html">ISO 3166</a></td>
</tr>
<tr>
<td><strong>shipping_address</strong></td>
<td>optional</td>
<td></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;first_name</td>
<td>optional</td>
<td>string(255)</td>
<td>Customer first name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;last_name</td>
<td>optional</td>
<td>string(255)</td>
<td>Customer last name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address1</td>
<td>optional</td>
<td>string(255)</td>
<td>Primary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address2</td>
<td>optional</td>
<td>string(255)</td>
<td>Secondary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;zip_code</td>
<td>optional</td>
<td>string</td>
<td>ZIP code</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;city</td>
<td>optional</td>
<td>string(255)</td>
<td>City</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;state</td>
<td>optional</td>
<td>string(2)</td>
<td>State code in <a href="https://en.wikipedia.org/wiki/ISO_3166-2">ISO 3166-2</a>, required for USA and Canada</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;country</td>
<td>optional</td>
<td>string(2)</td>
<td>Country code in <a href="https://www.iso.org/iso-3166-country-codes.html">ISO 3166</a></td>
</tr>
</tbody></table>

<p><code>required* = conditionally required</code></p>

<p><strong>Supported countries:</strong></p>

<table><thead>
<tr>
<th>Country</th>
</tr>
</thead><tbody>
<tr>
<td>AR</td>
</tr>
</tbody></table>

<blockquote>
<p>Successful Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>This request is not implemented yet
</code></pre>

<pre class="highlight java tab-java"><code><span class="n">This</span> <span class="n">request</span> <span class="n">is</span> <span class="n">not</span> <span class="n">implemented</span> <span class="n">yet</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;pago_facil&lt;/transaction_type&gt;
  &lt;status&gt;pending_async&lt;/status&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;redirect_url&gt;https://gate.emerchantpay.net/redirect/to_acquirer/649e1ff35c61&lt;/redirect_url&gt;
  &lt;technical_message&gt;Transaction successful!&lt;/technical_message&gt;
  &lt;message&gt;Transaction successful!&lt;/message&gt;
  &lt;timestamp&gt;2019-03-14T12:06:01Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
  &lt;sent_to_acquirer&gt;true&lt;/sent_to_acquirer&gt;
&lt;/payment_transaction&gt;
</code></pre>

<p><strong>Successful Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>The transaction type</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>transaction_id</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>unique_id</td>
<td>string(32)</td>
<td>Unique id defined by gate (must later be used if capturing, voiding or refunding a transaction)</td>
</tr>
<tr>
<td>redirect_url</td>
<td>url</td>
<td>URL where user has to be redirected to complete payment process. It is available for asynchronous mode</td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
<tr>
<td>message</td>
<td>string(255)</td>
<td>Human readable error message which can be displayed to users.</td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when the transaction was processed in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Combined date and time</a> e.g. 2007-08- 30T17:46:11Z</td>
</tr>
<tr>
<td>descriptor</td>
<td>string</td>
<td>Static descriptor MID info as configured on the gateway</td>
</tr>
<tr>
<td>amount</td>
<td>integer</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>sent_to_acquirer</td>
<td>string</td>
<td>&quot;true&quot; or &quot;false&quot;</td>
</tr>
</tbody></table>

<blockquote>
<p>Error Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>This request is not implemented yet
</code></pre>

<pre class="highlight java tab-java"><code><span class="n">This</span> <span class="n">request</span> <span class="n">is</span> <span class="n">not</span> <span class="n">implemented</span> <span class="n">yet</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;pago_facil&lt;/transaction_type&gt;
  &lt;status&gt;error&lt;/status&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;code&gt;110&lt;/code&gt;
  &lt;message&gt;Something went wrong, please contact support!&lt;/message&gt;
  &lt;timestamp&gt;2019-03-14T12:06:01Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
  &lt;sent_to_acquirer&gt;true&lt;/sent_to_acquirer&gt;
&lt;/payment_transaction&gt;
</code></pre>

<p><strong>Error Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>The transaction type</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>transaction_id</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>unique_id</td>
<td>string(32)</td>
<td>Unique id defined by gate (must later be used if capturing, voiding or refunding a transaction)</td>
</tr>
<tr>
<td>code</td>
<td>integer</td>
<td>Error code according to <a href="#error-code-table">Error code table</a></td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
<tr>
<td>message</td>
<td>string(255)</td>
<td>Human readable error message which can be displayed to users.</td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when the transaction was processed in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Combined date and time</a> e.g. 2007-08- 30T17:46:11Z</td>
</tr>
<tr>
<td>descriptor</td>
<td>string</td>
<td>Static descriptor MID info as configured on the gateway</td>
</tr>
<tr>
<td>amount</td>
<td>integer</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>sent_to_acquirer</td>
<td>string</td>
<td>&quot;true&quot; or &quot;false&quot;</td>
</tr>
</tbody></table>
<h3 id='redpagos'>Redpagos</h3>
<aside class="notice" >
  Redpagos is a cash payment in Uruguay
</aside>

<blockquote>
<p>Request</p>
</blockquote>

<pre class="highlight php tab-php"><code>This request is not implemented yet
</code></pre>

<pre class="highlight java tab-java"><code><span class="n">This</span> <span class="n">request</span> <span class="n">is</span> <span class="n">not</span> <span class="n">implemented</span> <span class="n">yet</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>curl https://username:password@gate.emerchantpay.net/process/TERMINAL-TOKEN <span class="se">\</span>
   -H <span class="s2">"Content-Type: text/xml"</span> <span class="se">\</span>
   -d <span class="s1">'
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;redpagos&lt;/transaction_type&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;usage&gt;40208 concert tickets&lt;/usage&gt;
  &lt;remote_ip&gt;245.253.2.12&lt;/remote_ip&gt;
  &lt;return_success_url&gt;http://www.example.com/success&lt;/return_success_url&gt;
  &lt;return_failure_url&gt;http://www.example.com/failure&lt;/return_failure_url&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
  &lt;consumer_reference&gt;barney_rubble&lt;/consumer_reference&gt;
  &lt;national_id&gt;8812128812&lt;/national_id&gt;
  &lt;birth_date&gt;30-12-1992&lt;/birth_date&gt;
  &lt;customer_email&gt;travis@example.com&lt;/customer_email&gt;
  &lt;billing_address&gt;
    &lt;first_name&gt;Barney&lt;/first_name&gt;
    &lt;last_name&gt;Rubble&lt;/last_name&gt;
    &lt;address1&gt;14, Nerazdelni str&lt;/address1&gt;
    &lt;zip_code&gt;1407&lt;/zip_code&gt;
    &lt;city&gt;Montevideo&lt;/city&gt;
    &lt;country&gt;UY&lt;/country&gt;
  &lt;/billing_address&gt;
  &lt;risk_params&gt;
    &lt;user_id&gt;123456&lt;/user_id&gt;
  &lt;/risk_params&gt;
&lt;/payment_transaction&gt;'</span>
</code></pre>

<p><strong>Request Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>required</td>
<td>string(255)</td>
<td>The transaction type: <strong>redpagos</strong></td>
</tr>
<tr>
<td>transaction_id</td>
<td>required</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>usage</td>
<td>optional</td>
<td>string(255)</td>
<td>Description of the transaction for later use</td>
</tr>
<tr>
<td>remote_ip</td>
<td>required*</td>
<td>IPv4 address</td>
<td>IPv4 address of customer</td>
</tr>
<tr>
<td>return_success_url</td>
<td>required</td>
<td>url</td>
<td>URL where customer is sent to after successful payment</td>
</tr>
<tr>
<td>return_failure_url</td>
<td>required</td>
<td>url</td>
<td>URL where customer is sent to after unsuccessful payment</td>
</tr>
<tr>
<td>amount</td>
<td>required</td>
<td>integer &gt; 0</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>required</td>
<td>string(3)</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>consumer_reference</td>
<td>required</td>
<td>string(20)</td>
<td>Consumer reference is a unique consumer identifier</td>
</tr>
<tr>
<td>national_id</td>
<td>required</td>
<td>string(20)</td>
<td>National Identifier number of the customer</td>
</tr>
<tr>
<td>birth_date</td>
<td>optional</td>
<td>string(20)</td>
<td>Birth date of the customer</td>
</tr>
<tr>
<td>customer_email</td>
<td>required</td>
<td>e-mail address</td>
<td>Must contain valid e-mail of customer</td>
</tr>
<tr>
<td><strong>billing_address</strong></td>
<td>required</td>
<td></td>
<td>See <a href="#required-vs-optional-api-params">Required vs Optional API params</a> for details</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;first_name</td>
<td>required*</td>
<td>string(255)</td>
<td>Customer first name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;last_name</td>
<td>required*</td>
<td>string(255)</td>
<td>Customer last name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address1</td>
<td>required*</td>
<td>string(255)</td>
<td>Primary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address2</td>
<td>required*</td>
<td>string(255)</td>
<td>Secondary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;zip_code</td>
<td>required*</td>
<td>string</td>
<td>ZIP code</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;city</td>
<td>required*</td>
<td>string(255)</td>
<td>City</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;state</td>
<td>required*</td>
<td>string(2)</td>
<td>State code in <a href="https://en.wikipedia.org/wiki/ISO_3166-2">ISO 3166-2</a>, required for USA and Canada</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;country</td>
<td>required</td>
<td>string(2)</td>
<td>Country code in <a href="https://www.iso.org/iso-3166-country-codes.html">ISO 3166</a></td>
</tr>
<tr>
<td><strong>shipping_address</strong></td>
<td>optional</td>
<td></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;first_name</td>
<td>optional</td>
<td>string(255)</td>
<td>Customer first name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;last_name</td>
<td>optional</td>
<td>string(255)</td>
<td>Customer last name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address1</td>
<td>optional</td>
<td>string(255)</td>
<td>Primary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address2</td>
<td>optional</td>
<td>string(255)</td>
<td>Secondary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;zip_code</td>
<td>optional</td>
<td>string</td>
<td>ZIP code</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;city</td>
<td>optional</td>
<td>string(255)</td>
<td>City</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;state</td>
<td>optional</td>
<td>string(2)</td>
<td>State code in <a href="https://en.wikipedia.org/wiki/ISO_3166-2">ISO 3166-2</a>, required for USA and Canada</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;country</td>
<td>optional</td>
<td>string(2)</td>
<td>Country code in <a href="https://www.iso.org/iso-3166-country-codes.html">ISO 3166</a></td>
</tr>
</tbody></table>

<p><code>required* = conditionally required</code></p>

<p><strong>Supported countries:</strong></p>

<table><thead>
<tr>
<th>Country</th>
</tr>
</thead><tbody>
<tr>
<td>UY</td>
</tr>
</tbody></table>

<blockquote>
<p>Successful Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>This request is not implemented yet
</code></pre>

<pre class="highlight java tab-java"><code><span class="n">This</span> <span class="n">request</span> <span class="n">is</span> <span class="n">not</span> <span class="n">implemented</span> <span class="n">yet</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;redpagos&lt;/transaction_type&gt;
  &lt;status&gt;pending_async&lt;/status&gt;
  &lt;mode&gt;live&lt;/mode&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;technical_message&gt;Transaction successful!&lt;/technical_message&gt;
  &lt;message&gt;Transaction successful!&lt;/message&gt;
  &lt;redirect_url&gt;https://gate.emerchantpay.net/redirect/to_acquirer/649e1ff35c61&lt;/redirect_url&gt;
  &lt;timestamp&gt;2019-03-14T12:06:01Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
  &lt;sent_to_acquirer&gt;true&lt;/sent_to_acquirer&gt;
&lt;/payment_transaction&gt;
</code></pre>

<p><strong>Successful Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>The transaction type</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>transaction_id</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>unique_id</td>
<td>string(32)</td>
<td>Unique id defined by gate (must later be used if capturing, voiding or refunding a transaction)</td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
<tr>
<td>message</td>
<td>string(255)</td>
<td>Human readable error message which can be displayed to users.</td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>redirect_url</td>
<td>url</td>
<td>URL where user has to be redirected to complete payment process. It is available for asynchronous mode</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when the transaction was processed in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Combined date and time</a> e.g. 2007-08- 30T17:46:11Z</td>
</tr>
<tr>
<td>descriptor</td>
<td>string</td>
<td>Static descriptor MID info as configured on the gateway</td>
</tr>
<tr>
<td>amount</td>
<td>integer</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>sent_to_acquirer</td>
<td>string</td>
<td>&quot;true&quot; or &quot;false&quot;</td>
</tr>
</tbody></table>

<blockquote>
<p>Error Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>This request is not implemented yet
</code></pre>

<pre class="highlight java tab-java"><code><span class="n">This</span> <span class="n">request</span> <span class="n">is</span> <span class="n">not</span> <span class="n">implemented</span> <span class="n">yet</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;redpagos&lt;/transaction_type&gt;
  &lt;status&gt;error&lt;/status&gt;
  &lt;mode&gt;live&lt;/mode&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;code&gt;110&lt;/code&gt;
  &lt;message&gt;Something went wrong, please contact support!&lt;/message&gt;
  &lt;timestamp&gt;2019-03-14T12:06:01Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
  &lt;sent_to_acquirer&gt;true&lt;/sent_to_acquirer&gt;
&lt;/payment_transaction&gt;
</code></pre>

<p><strong>Error Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>The transaction type</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>transaction_id</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>unique_id</td>
<td>string(32)</td>
<td>Unique id defined by gate (must later be used if capturing, voiding or refunding a transaction)</td>
</tr>
<tr>
<td>code</td>
<td>integer</td>
<td>Error code according to <a href="#error-code-table">Error code table</a></td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
<tr>
<td>message</td>
<td>string(255)</td>
<td>Human readable error message which can be displayed to users.</td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when the transaction was processed in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Combined date and time</a> e.g. 2007-08- 30T17:46:11Z</td>
</tr>
<tr>
<td>descriptor</td>
<td>string</td>
<td>Static descriptor MID info as configured on the gateway</td>
</tr>
<tr>
<td>amount</td>
<td>integer</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>sent_to_acquirer</td>
<td>string</td>
<td>&quot;true&quot; or &quot;false&quot;</td>
</tr>
</tbody></table>
<h3 id='santander-cash'>Santander Cash</h3>
<aside class="notice" >
  Santander Cash is local card payment in Mexico
</aside>

<blockquote>
<p>Request</p>
</blockquote>

<pre class="highlight php tab-php"><code>This request is not implemented yet
</code></pre>

<pre class="highlight java tab-java"><code><span class="n">This</span> <span class="n">request</span> <span class="n">is</span> <span class="n">not</span> <span class="n">implemented</span> <span class="n">yet</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>curl https://username:password@gate.emerchantpay.net/process/TERMINAL-TOKEN <span class="se">\</span>
   -H <span class="s2">"Content-Type: text/xml"</span> <span class="se">\</span>
   -d <span class="s1">'
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;santander_cash&lt;/transaction_type&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;usage&gt;40208 concert tickets&lt;/usage&gt;
  &lt;remote_ip&gt;245.253.2.12&lt;/remote_ip&gt;
  &lt;return_success_url&gt;http://www.example.com/success&lt;/return_success_url&gt;
  &lt;return_failure_url&gt;http://www.example.com/failure&lt;/return_failure_url&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
  &lt;consumer_reference&gt;barney_rubble&lt;/consumer_reference&gt;
  &lt;national_id&gt;8812128812&lt;/national_id&gt;
  &lt;birth_date&gt;30-12-1992&lt;/birth_date&gt;
  &lt;customer_email&gt;travis@example.com&lt;/customer_email&gt;
  &lt;billing_address&gt;
    &lt;first_name&gt;Barney&lt;/first_name&gt;
    &lt;last_name&gt;Rubble&lt;/last_name&gt;
    &lt;address1&gt;14, Nerazdelni str&lt;/address1&gt;
    &lt;zip_code&gt;1407&lt;/zip_code&gt;
    &lt;city&gt;Tampico&lt;/city&gt;
    &lt;country&gt;MX&lt;/country&gt;
  &lt;/billing_address&gt;
  &lt;risk_params&gt;
    &lt;user_id&gt;123456&lt;/user_id&gt;
  &lt;/risk_params&gt;
&lt;/payment_transaction&gt;'</span>
</code></pre>

<p><strong>Request Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>required</td>
<td>string(255)</td>
<td>The transaction type: <strong>santander_cash</strong></td>
</tr>
<tr>
<td>transaction_id</td>
<td>required</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>usage</td>
<td>optional</td>
<td>string(255)</td>
<td>Description of the transaction for later use</td>
</tr>
<tr>
<td>remote_ip</td>
<td>required*</td>
<td>IPv4 address</td>
<td>IPv4 address of customer</td>
</tr>
<tr>
<td>return_success_url</td>
<td>required</td>
<td>url</td>
<td>URL where customer is sent to after successful payment</td>
</tr>
<tr>
<td>return_failure_url</td>
<td>required</td>
<td>url</td>
<td>URL where customer is sent to after unsuccessful payment</td>
</tr>
<tr>
<td>amount</td>
<td>required</td>
<td>integer &gt; 0</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>required</td>
<td>string(3)</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>consumer_reference</td>
<td>required</td>
<td>string(20)</td>
<td>Consumer reference is a unique consumer identifier</td>
</tr>
<tr>
<td>national_id</td>
<td>required</td>
<td>string(20)</td>
<td>National Identifier number of the customer</td>
</tr>
<tr>
<td>birth_date</td>
<td>optional</td>
<td>string(20)</td>
<td>Birth date of the customer</td>
</tr>
<tr>
<td>customer_email</td>
<td>required</td>
<td>e-mail address</td>
<td>Must contain valid e-mail of customer</td>
</tr>
<tr>
<td><strong>billing_address</strong></td>
<td>required</td>
<td></td>
<td>See <a href="#required-vs-optional-api-params">Required vs Optional API params</a> for details</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;first_name</td>
<td>required*</td>
<td>string(255)</td>
<td>Customer first name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;last_name</td>
<td>required*</td>
<td>string(255)</td>
<td>Customer last name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address1</td>
<td>required*</td>
<td>string(255)</td>
<td>Primary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address2</td>
<td>required*</td>
<td>string(255)</td>
<td>Secondary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;zip_code</td>
<td>required*</td>
<td>string</td>
<td>ZIP code</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;city</td>
<td>required*</td>
<td>string(255)</td>
<td>City</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;state</td>
<td>required*</td>
<td>string(2)</td>
<td>State code in <a href="https://en.wikipedia.org/wiki/ISO_3166-2">ISO 3166-2</a>, required for USA and Canada</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;country</td>
<td>required</td>
<td>string(2)</td>
<td>Country code in <a href="https://www.iso.org/iso-3166-country-codes.html">ISO 3166</a></td>
</tr>
<tr>
<td><strong>shipping_address</strong></td>
<td>optional</td>
<td></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;first_name</td>
<td>optional</td>
<td>string(255)</td>
<td>Customer first name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;last_name</td>
<td>optional</td>
<td>string(255)</td>
<td>Customer last name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address1</td>
<td>optional</td>
<td>string(255)</td>
<td>Primary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address2</td>
<td>optional</td>
<td>string(255)</td>
<td>Secondary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;zip_code</td>
<td>optional</td>
<td>string</td>
<td>ZIP code</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;city</td>
<td>optional</td>
<td>string(255)</td>
<td>City</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;state</td>
<td>optional</td>
<td>string(2)</td>
<td>State code in <a href="https://en.wikipedia.org/wiki/ISO_3166-2">ISO 3166-2</a>, required for USA and Canada</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;country</td>
<td>optional</td>
<td>string(2)</td>
<td>Country code in <a href="https://www.iso.org/iso-3166-country-codes.html">ISO 3166</a></td>
</tr>
</tbody></table>

<p><code>required* = conditionally required</code></p>

<p><strong>Supported countries:</strong></p>

<table><thead>
<tr>
<th>Country</th>
</tr>
</thead><tbody>
<tr>
<td>MX</td>
</tr>
</tbody></table>

<blockquote>
<p>Successful Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>This request is not implemented yet
</code></pre>

<pre class="highlight java tab-java"><code><span class="n">This</span> <span class="n">request</span> <span class="n">is</span> <span class="n">not</span> <span class="n">implemented</span> <span class="n">yet</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;santander_cash&lt;/transaction_type&gt;
  &lt;status&gt;pending_async&lt;/status&gt;
  &lt;mode&gt;live&lt;/mode&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;technical_message&gt;Transaction successful!&lt;/technical_message&gt;
  &lt;message&gt;Transaction successful!&lt;/message&gt;
  &lt;redirect_url&gt;https://gate.emerchantpay.net/redirect/to_acquirer/649e1ff35c61&lt;/redirect_url&gt;
  &lt;timestamp&gt;2019-03-14T12:06:01Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
  &lt;sent_to_acquirer&gt;true&lt;/sent_to_acquirer&gt;
&lt;/payment_transaction&gt;
</code></pre>

<p><strong>Successful Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>The transaction type</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>transaction_id</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>unique_id</td>
<td>string(32)</td>
<td>Unique id defined by gate (must later be used if capturing, voiding or refunding a transaction)</td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
<tr>
<td>message</td>
<td>string(255)</td>
<td>Human readable error message which can be displayed to users.</td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>redirect_url</td>
<td>url</td>
<td>URL where user has to be redirected to complete payment process. It is available for asynchronous mode</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when the transaction was processed in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Combined date and time</a> e.g. 2007-08- 30T17:46:11Z</td>
</tr>
<tr>
<td>descriptor</td>
<td>string</td>
<td>Static descriptor MID info as configured on the gateway</td>
</tr>
<tr>
<td>amount</td>
<td>integer</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>sent_to_acquirer</td>
<td>string</td>
<td>&quot;true&quot; or &quot;false&quot;</td>
</tr>
</tbody></table>

<blockquote>
<p>Error Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>This request is not implemented yet
</code></pre>

<pre class="highlight java tab-java"><code><span class="n">This</span> <span class="n">request</span> <span class="n">is</span> <span class="n">not</span> <span class="n">implemented</span> <span class="n">yet</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;santander_cash&lt;/transaction_type&gt;
  &lt;status&gt;error&lt;/status&gt;
  &lt;mode&gt;live&lt;/mode&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;code&gt;110&lt;/code&gt;
  &lt;message&gt;Something went wrong, please contact support!&lt;/message&gt;
  &lt;timestamp&gt;2019-03-14T12:06:01Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
  &lt;sent_to_acquirer&gt;true&lt;/sent_to_acquirer&gt;
&lt;/payment_transaction&gt;
</code></pre>

<p><strong>Error Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>The transaction type</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>transaction_id</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>unique_id</td>
<td>string(32)</td>
<td>Unique id defined by gate (must later be used if capturing, voiding or refunding a transaction)</td>
</tr>
<tr>
<td>code</td>
<td>integer</td>
<td>Error code according to <a href="#error-code-table">Error code table</a></td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
<tr>
<td>message</td>
<td>string(255)</td>
<td>Human readable error message which can be displayed to users.</td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when the transaction was processed in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Combined date and time</a> e.g. 2007-08- 30T17:46:11Z</td>
</tr>
<tr>
<td>descriptor</td>
<td>string</td>
<td>Static descriptor MID info as configured on the gateway</td>
</tr>
<tr>
<td>amount</td>
<td>integer</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>sent_to_acquirer</td>
<td>string</td>
<td>&quot;true&quot; or &quot;false&quot;</td>
</tr>
</tbody></table>
<h3 id='surtimax'>Surtimax</h3>
<aside class="notice">
Surtimax is a cash payment method in Columbia.
</aside>

<blockquote>
<p>Request</p>
</blockquote>

<pre class="highlight php tab-php"><code>This request is not implemented yet
</code></pre>

<pre class="highlight java tab-java"><code><span class="n">This</span> <span class="n">request</span> <span class="n">is</span> <span class="n">not</span> <span class="n">implemented</span> <span class="n">yet</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>curl https://username:password@gate.emerchantpay.net/process/TERMINAL-TOKEN <span class="se">\</span>
   -H <span class="s2">"Content-Type: text/xml"</span> <span class="se">\</span>
   -d <span class="s1">'
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;surtimax&lt;/transaction_type&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;usage&gt;40208 concert tickets&lt;/usage&gt;
  &lt;remote_ip&gt;245.253.2.12&lt;/remote_ip&gt;
  &lt;return_success_url&gt;http://www.example.com/success&lt;/return_success_url&gt;
  &lt;return_failure_url&gt;http://www.example.com/failure&lt;/return_failure_url&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
  &lt;consumer_reference&gt;barney_rumble&lt;/consumer_reference&gt;
  &lt;national_id&gt;8812128812&lt;/national_id&gt;
  &lt;birth_date&gt;30-12-1992&lt;/birth_date&gt;
  &lt;customer_email&gt;barney@example.com&lt;/customer_email&gt;
  &lt;billing_address&gt;
    &lt;first_name&gt;Barney&lt;/first_name&gt;
    &lt;last_name&gt;Rubble&lt;/last_name&gt;
    &lt;address1&gt;14, Nerazdelni str&lt;/address1&gt;
    &lt;zip_code&gt;1407&lt;/zip_code&gt;
    &lt;city&gt;Bogota&lt;/city&gt;
    &lt;country&gt;CO&lt;/country&gt;
  &lt;/billing_address&gt;
  &lt;risk_params&gt;
    &lt;user_id&gt;123456&lt;/user_id&gt;
  &lt;/risk_params&gt;
&lt;/payment_transaction&gt;'</span>
</code></pre>

<p><strong>Request Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>required</td>
<td>string(255)</td>
<td>The transaction type: <strong>surtimax</strong></td>
</tr>
<tr>
<td>transaction_id</td>
<td>required</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>usage</td>
<td>optional</td>
<td>string(255)</td>
<td>Description of the transaction for later use</td>
</tr>
<tr>
<td>remote_ip</td>
<td>required*</td>
<td>IPv4 address</td>
<td>IPv4 address of customer</td>
</tr>
<tr>
<td>return_success_url</td>
<td>required</td>
<td>url</td>
<td>URL where customer is sent to after successful payment</td>
</tr>
<tr>
<td>return_failure_url</td>
<td>required</td>
<td>url</td>
<td>URL where customer is sent to after unsuccessful payment</td>
</tr>
<tr>
<td>amount</td>
<td>required</td>
<td>integer &gt; 0</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>required</td>
<td>string(3)</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>consumer_reference</td>
<td>required</td>
<td>string(20)</td>
<td>Consumer reference is a unique consumer identifier</td>
</tr>
<tr>
<td>national_id</td>
<td>required</td>
<td>string(20)</td>
<td>National Identifier number of the customer</td>
</tr>
<tr>
<td>birth_date</td>
<td>optional</td>
<td>dd-mm-yyyy</td>
<td>Required for Visa only when MCC is a Financial Services one (e.g. MCC 6012)</td>
</tr>
<tr>
<td>customer_email</td>
<td>required</td>
<td>e-mail address</td>
<td>Must contain valid e-mail of customer</td>
</tr>
<tr>
<td><strong>billing_address</strong></td>
<td>required</td>
<td></td>
<td>See <a href="#required-vs-optional-api-params">Required vs Optional API params</a> for details</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;first_name</td>
<td>required*</td>
<td>string(255)</td>
<td>Customer first name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;last_name</td>
<td>required*</td>
<td>string(255)</td>
<td>Customer last name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address1</td>
<td>required*</td>
<td>string(255)</td>
<td>Primary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address2</td>
<td>required*</td>
<td>string(255)</td>
<td>Secondary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;zip_code</td>
<td>required*</td>
<td>string</td>
<td>ZIP code</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;city</td>
<td>required*</td>
<td>string(255)</td>
<td>City</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;state</td>
<td>required*</td>
<td>string(2)</td>
<td>State code in <a href="https://en.wikipedia.org/wiki/ISO_3166-2">ISO 3166-2</a>, required for USA and Canada</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;country</td>
<td>required</td>
<td>string(2)</td>
<td>Country code in <a href="https://www.iso.org/iso-3166-country-codes.html">ISO 3166</a></td>
</tr>
<tr>
<td><strong>shipping_address</strong></td>
<td>optional</td>
<td></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;first_name</td>
<td>optional</td>
<td>string(255)</td>
<td>Customer first name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;last_name</td>
<td>optional</td>
<td>string(255)</td>
<td>Customer last name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address1</td>
<td>optional</td>
<td>string(255)</td>
<td>Primary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address2</td>
<td>optional</td>
<td>string(255)</td>
<td>Secondary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;zip_code</td>
<td>optional</td>
<td>string</td>
<td>ZIP code</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;city</td>
<td>optional</td>
<td>string(255)</td>
<td>City</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;state</td>
<td>optional</td>
<td>string(2)</td>
<td>State code in <a href="https://en.wikipedia.org/wiki/ISO_3166-2">ISO 3166-2</a>, required for USA and Canada</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;country</td>
<td>optional</td>
<td>string(2)</td>
<td>Country code in <a href="https://www.iso.org/iso-3166-country-codes.html">ISO 3166</a></td>
</tr>
</tbody></table>

<p><code>required* = conditionally required</code></p>

<p><strong>Supported countries:</strong></p>

<table><thead>
<tr>
<th>Country</th>
</tr>
</thead><tbody>
<tr>
<td>CO</td>
</tr>
</tbody></table>

<blockquote>
<p>Successful Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>This request is not implemented yet
</code></pre>

<pre class="highlight java tab-java"><code><span class="n">This</span> <span class="n">request</span> <span class="n">is</span> <span class="n">not</span> <span class="n">implemented</span> <span class="n">yet</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;surtimax&lt;/transaction_type&gt;
  &lt;status&gt;pending_async&lt;/status&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;redirect_url&gt;https://gate.emerchantpay.net/redirect/to_acquirer/649e1ff35c61&lt;/redirect_url&gt;
  &lt;technical_message&gt;Transaction successful!&lt;/technical_message&gt;
  &lt;message&gt;Transaction successful!&lt;/message&gt;
  &lt;timestamp&gt;2019-03-14T12:06:01Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
  &lt;sent_to_acquirer&gt;true&lt;/sent_to_acquirer&gt;
&lt;/payment_transaction&gt;
</code></pre>

<p><strong>Successful Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>The transaction type</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>transaction_id</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>unique_id</td>
<td>string(32)</td>
<td>Unique id defined by gate (must later be used if capturing, voiding or refunding a transaction)</td>
</tr>
<tr>
<td>redirect_url</td>
<td>url</td>
<td>URL where user has to be redirected to complete payment process. It is available for asynchronous mode</td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
<tr>
<td>message</td>
<td>string(255)</td>
<td>Human readable error message which can be displayed to users.</td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when the transaction was processed in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Combined date and time</a> e.g. 2007-08- 30T17:46:11Z</td>
</tr>
<tr>
<td>descriptor</td>
<td>string</td>
<td>Static descriptor MID info as configured on the gateway</td>
</tr>
<tr>
<td>amount</td>
<td>integer</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>sent_to_acquirer</td>
<td>string</td>
<td>&quot;true&quot; or &quot;false&quot;</td>
</tr>
</tbody></table>

<blockquote>
<p>Error Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>This request is not implemented yet
</code></pre>

<pre class="highlight java tab-java"><code><span class="n">This</span> <span class="n">request</span> <span class="n">is</span> <span class="n">not</span> <span class="n">implemented</span> <span class="n">yet</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;surtimax&lt;/transaction_type&gt;
  &lt;status&gt;error&lt;/status&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;code&gt;110&lt;/code&gt;
  &lt;message&gt;Something went wrong, please contact support!&lt;/message&gt;
  &lt;timestamp&gt;2019-03-14T12:06:01Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
  &lt;sent_to_acquirer&gt;true&lt;/sent_to_acquirer&gt;
&lt;/payment_transaction&gt;
</code></pre>

<p><strong>Error Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>The transaction type</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>transaction_id</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>unique_id</td>
<td>string(32)</td>
<td>Unique id defined by gate (must later be used if capturing, voiding or refunding a transaction)</td>
</tr>
<tr>
<td>code</td>
<td>integer</td>
<td>Error code according to <a href="#error-code-table">Error code table</a></td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
<tr>
<td>message</td>
<td>string(255)</td>
<td>Human readable error message which can be displayed to users.</td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when the transaction was processed in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Combined date and time</a> e.g. 2007-08- 30T17:46:11Z</td>
</tr>
<tr>
<td>descriptor</td>
<td>string</td>
<td>Static descriptor MID info as configured on the gateway</td>
</tr>
<tr>
<td>amount</td>
<td>integer</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>sent_to_acquirer</td>
<td>string</td>
<td>&quot;true&quot; or &quot;false&quot;</td>
</tr>
</tbody></table>
<h2 id='gift-cards'>Gift Cards</h2><h3 id='intersolve'>Intersolve</h3>
<p>These transactions can be used for gift cards provided by Intersolve.</p>

<p>Using Intersolve transaction, the amount is immediately billed to the customer’s gift card.</p>

<p>It can be reversed using <a href="#void">void transaction</a>.</p>

<aside class="notice" >
This transaction type supports <a href="#tokenization" >Tokenization</a>.
</aside>

<blockquote>
<p>Request</p>
</blockquote>

<pre class="highlight php tab-php"><code><span class="cp">&lt;?php</span>

<span class="c1">// Load the pre-configured ini file...
</span><span class="nx">\Genesis\Config</span><span class="o">::</span><span class="na">loadSettings</span><span class="p">(</span><span class="s1">'/path/to/config.ini'</span><span class="p">);</span>

<span class="nv">$genesis</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Genesis</span><span class="p">(</span><span class="s1">'Financial\GiftCards\Intersolve'</span><span class="p">);</span>
<span class="nv">$request</span> <span class="o">=</span> <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">request</span><span class="p">();</span>

<span class="nv">$request</span>
  <span class="o">-&gt;</span><span class="na">setTransactionId</span><span class="p">(</span><span class="s1">'43671'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setUsage</span><span class="p">(</span><span class="s1">'40208 concert tickets'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setRemoteIp</span><span class="p">(</span><span class="s1">'245.253.2.12'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setAmount</span><span class="p">(</span><span class="s1">'100'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCurrency</span><span class="p">(</span><span class="s1">'USD'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCardNumber</span><span class="p">(</span><span class="s1">'7000001163991388834'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCvv</span><span class="p">(</span><span class="s1">'944062'</span><span class="p">)</span>


  <span class="c1">// Billing Address
</span>  <span class="o">-&gt;</span><span class="na">setBillingFirstName</span><span class="p">(</span><span class="s1">'Travis'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingLastName</span><span class="p">(</span><span class="s1">'Pastrana'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingAddress1</span><span class="p">(</span><span class="s1">'Muster Str. 12'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingZipCode</span><span class="p">(</span><span class="s1">'10178'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingCity</span><span class="p">(</span><span class="s1">'Los Angeles'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingState</span><span class="p">(</span><span class="s1">'CA'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingCountry</span><span class="p">(</span><span class="s1">'US'</span><span class="p">);</span>

<span class="k">try</span> <span class="p">{</span>
    <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">execute</span><span class="p">();</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">response</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">getResponseObject</span><span class="p">();</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">\Exception</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$e</span><span class="o">-&gt;</span><span class="na">getMessage</span><span class="p">();</span>
<span class="p">}</span>
</code></pre>

<pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.GenesisClient</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.TransactionResult</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.constants.Endpoints</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.constants.Environments</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.requests.financial.giftcards.IntersolveRequest</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.model.Transaction</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Configuration</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Country</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Currency</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.math.BigDecimal</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">GenesisExample</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">()</span>  <span class="o">{</span>

    <span class="c1">// Create configuration</span>
    <span class="n">Configuration</span> <span class="n">configuration</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Configuration</span><span class="o">(</span><span class="n">Environments</span><span class="o">.</span><span class="na">STAGING</span><span class="o">,</span> <span class="n">Endpoints</span><span class="o">.</span><span class="na">EMERCHANTPAY</span><span class="o">);</span>

    <span class="n">configuration</span><span class="o">.</span><span class="na">setUsername</span><span class="o">(</span><span class="s">"SET_YOUR_USERNAME"</span><span class="o">);</span>
    <span class="n">configuration</span><span class="o">.</span><span class="na">setPassword</span><span class="o">(</span><span class="s">"SET_YOUR_PASSWORD"</span><span class="o">);</span>
    <span class="n">configuration</span><span class="o">.</span><span class="na">setToken</span><span class="o">(</span><span class="s">"SET_YOUR_TOKEN"</span><span class="o">);</span>

    <span class="n">IntersolveRequest</span> <span class="n">request</span> <span class="o">=</span> <span class="k">new</span> <span class="n">IntersolveRequest</span><span class="o">();</span>

    <span class="n">request</span><span class="o">.</span><span class="na">setTransactionId</span><span class="o">(</span><span class="s">"43671"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setUsage</span><span class="o">(</span><span class="s">"40208 concert tickets"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setRemoteIp</span><span class="o">(</span><span class="s">"245.253.2.12"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setAmount</span><span class="o">(</span><span class="k">new</span> <span class="n">BigDecimal</span><span class="o">(</span><span class="mi">100</span><span class="o">));</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCurrency</span><span class="o">(</span><span class="s">"USD"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCardNumber</span><span class="o">(</span><span class="s">"7000001163991388834"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCvv</span><span class="o">(</span><span class="s">"944062"</span><span class="o">);</span>


    <span class="c1">// Billing Address</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingFirstname</span><span class="o">(</span><span class="s">"Travis"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingLastname</span><span class="o">(</span><span class="s">"Pastrana"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingPrimaryAddress</span><span class="o">(</span><span class="s">"Muster Str. 12"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingZipCode</span><span class="o">(</span><span class="s">"10178"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingCity</span><span class="o">(</span><span class="s">"Los Angeles"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingState</span><span class="o">(</span><span class="s">"CA"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingCountry</span><span class="o">(</span><span class="s">"US"</span><span class="o">);</span>

    <span class="n">GenesisClient</span> <span class="n">client</span> <span class="o">=</span> <span class="k">new</span> <span class="n">GenesisClient</span><span class="o">(</span><span class="n">configuration</span><span class="o">,</span> <span class="n">request</span><span class="o">);</span>
    <span class="n">client</span><span class="o">.</span><span class="na">execute</span><span class="o">();</span>

    <span class="c1">// Parse Payment result</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">client</span><span class="o">.</span><span class="na">getResponse</span><span class="o">());</span>

  <span class="o">}</span>
<span class="o">}</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>curl https://username:password@gate.emerchantpay.net/process/TERMINAL-TOKEN <span class="se">\</span>
   -H <span class="s2">"Content-Type: text/xml"</span> <span class="se">\</span>
   -d <span class="s1">'
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;intersolve&lt;/transaction_type&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;usage&gt;40208 concert tickets&lt;/usage&gt;
  &lt;remote_ip&gt;245.253.2.12&lt;/remote_ip&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
  &lt;card_number&gt;7000001163991388834&lt;/card_number&gt;
  &lt;cvv&gt;944062&lt;/cvv&gt;
  &lt;billing_address&gt;
    &lt;first_name&gt;Travis&lt;/first_name&gt;
    &lt;last_name&gt;Pastrana&lt;/last_name&gt;
    &lt;address1&gt;Muster Str. 12&lt;/address1&gt;
    &lt;zip_code&gt;10178&lt;/zip_code&gt;
    &lt;city&gt;Los Angeles&lt;/city&gt;
    &lt;state&gt;CA&lt;/state&gt;
    &lt;country&gt;US&lt;/country&gt;
  &lt;/billing_address&gt;
&lt;/payment_transaction&gt;'</span>
</code></pre>

<p><strong>Request Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>required</td>
<td>string(255)</td>
<td>The transaction type: <strong>intersolve</strong></td>
</tr>
<tr>
<td>transaction_id</td>
<td>required</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>usage</td>
<td>required*</td>
<td>string(255)</td>
<td>Description of the transaction for later use</td>
</tr>
<tr>
<td>remote_ip</td>
<td>required*</td>
<td>IPv4 address</td>
<td>IPv4 address of customer</td>
</tr>
<tr>
<td>amount</td>
<td>required</td>
<td>integer &gt; 0</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>required</td>
<td>string(3)</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>card_number</td>
<td>required</td>
<td>string(19..21)</td>
<td>Gift card number</td>
</tr>
<tr>
<td>cvv</td>
<td>required*</td>
<td>5 to 8 digits</td>
<td>Verification code of the gift card, requirement is based on terminal configuration</td>
</tr>
<tr>
<td>token</td>
<td>optional</td>
<td>string(36)</td>
<td>See <a href="#tokenization">Tokenization</a> for more details. If present, the cardholder parameters can be omitted. Cannot be set together with <code>remember_card</code></td>
</tr>
<tr>
<td>remember_card</td>
<td>optional</td>
<td>&quot;true&quot;</td>
<td>See <a href="#tokenize">Tokenize</a>. Tokenizes cardholder parameters. Cannot be set together with <code>token</code></td>
</tr>
<tr>
<td>consumer_id</td>
<td>optional</td>
<td>string(10)</td>
<td>See <a href="#consumers">Consumers</a> and <a href="#tokenization">Tokenization</a>. Combine with <code>remember_card</code> to tokenize or with <code>token</code> to use token</td>
</tr>
<tr>
<td><strong>billing_address</strong></td>
<td>required*</td>
<td></td>
<td>See <a href="#required-vs-optional-api-params">Required vs Optional API params</a> for details</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;first_name</td>
<td>required*</td>
<td>string(255)</td>
<td>Customer first name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;last_name</td>
<td>required*</td>
<td>string(255)</td>
<td>Customer last name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address1</td>
<td>required*</td>
<td>string(255)</td>
<td>Primary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address2</td>
<td>required*</td>
<td>string(255)</td>
<td>Secondary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;zip_code</td>
<td>required*</td>
<td>string</td>
<td>ZIP code</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;city</td>
<td>required*</td>
<td>string(255)</td>
<td>City</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;state</td>
<td>required*</td>
<td>string(2)</td>
<td>State code in <a href="https://en.wikipedia.org/wiki/ISO_3166-2">ISO 3166-2</a>, required for USA and Canada</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;country</td>
<td>required*</td>
<td>string(2)</td>
<td>Country code in <a href="https://www.iso.org/iso-3166-country-codes.html">ISO 3166</a></td>
</tr>
<tr>
<td><strong>shipping_address</strong></td>
<td>optional</td>
<td></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;first_name</td>
<td>optional</td>
<td>string(255)</td>
<td>Customer first name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;last_name</td>
<td>optional</td>
<td>string(255)</td>
<td>Customer last name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address1</td>
<td>optional</td>
<td>string(255)</td>
<td>Primary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address2</td>
<td>optional</td>
<td>string(255)</td>
<td>Secondary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;zip_code</td>
<td>optional</td>
<td>string</td>
<td>ZIP code</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;city</td>
<td>optional</td>
<td>string(255)</td>
<td>City</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;state</td>
<td>optional</td>
<td>string(2)</td>
<td>State code in <a href="https://en.wikipedia.org/wiki/ISO_3166-2">ISO 3166-2</a>, required for USA and Canada</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;country</td>
<td>optional</td>
<td>string(2)</td>
<td>Country code in <a href="https://www.iso.org/iso-3166-country-codes.html">ISO 3166</a></td>
</tr>
<tr>
<td><strong>dynamic_descriptor_params</strong></td>
<td>optional</td>
<td></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;merchant_name</td>
<td>optional</td>
<td>string(25)</td>
<td>Allows to dynamically override the charge descriptor</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;merchant_city</td>
<td>optional</td>
<td>string(13)</td>
<td>Allows to dynamically override the merchant phone number</td>
</tr>
</tbody></table>

<p><code>required* = conditionally required</code></p>

<blockquote>
<p>Successful Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>stdClass Object
(
    [transaction_type] =&gt; intersolve
    [status] =&gt; approved
    [mode] =&gt; live
    [transaction_id] =&gt; 43671
    [unique_id] =&gt; 44177a21403427eb96664a6d7e5d5d48
    [consumer_id] =&gt; 123456
    [token] =&gt; ee946db8-d7db-4bb7-b608-b65b153e127d
    [technical_message] =&gt; Transaction successful!
    [message] =&gt; Transaction successful!
    [timestamp] =&gt; DateTime Object
        (
            [date] =&gt; 2019-03-14 12:06:01.000000
            [timezone_type] =&gt; 2
            [timezone] =&gt; Z
        )
    [descriptor] =&gt; Descriptor one
    [amount] =&gt; 100
    [currency] =&gt; USD
    [sent_to_acquirer] =&gt; true
)
</code></pre>

<pre class="highlight java tab-java"><code><span class="o">&lt;</span><span class="n">payment_response</span> <span class="n">content</span><span class="o">=[</span>
    <span class="o">&lt;</span><span class="n">transaction_type</span> <span class="n">content</span><span class="o">=[</span><span class="n">intersolve</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">status</span> <span class="n">content</span><span class="o">=[</span><span class="n">approved</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">mode</span> <span class="n">content</span><span class="o">=[</span><span class="n">live</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">transaction_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">43671</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">unique_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">44177</span><span class="n">a21403427eb96664a6d7e5d5d48</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">consumer_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">123456</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">token</span> <span class="n">content</span><span class="o">=[</span><span class="n">ee946db8</span><span class="o">-</span><span class="n">d7db</span><span class="o">-</span><span class="mi">4</span><span class="n">bb7</span><span class="o">-</span><span class="n">b608</span><span class="o">-</span><span class="n">b65b153e127d</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">technical_message</span> <span class="n">content</span><span class="o">=[</span><span class="n">Transaction</span> <span class="n">successful</span><span class="o">!]&gt;</span>
    <span class="o">&lt;</span><span class="n">message</span> <span class="n">content</span><span class="o">=[</span><span class="n">Transaction</span> <span class="n">successful</span><span class="o">!]&gt;</span>
    <span class="o">&lt;</span><span class="n">timestamp</span> <span class="n">content</span><span class="o">=[</span><span class="mi">2019</span><span class="o">-</span><span class="mo">03</span><span class="o">-</span><span class="mi">14</span><span class="nl">T12:</span><span class="mo">06</span><span class="o">:</span><span class="mo">01</span><span class="n">Z</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">descriptor</span> <span class="n">content</span><span class="o">=[</span><span class="n">Descriptor</span> <span class="n">one</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">amount</span> <span class="n">content</span><span class="o">=[</span><span class="mi">100</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">currency</span> <span class="n">content</span><span class="o">=[</span><span class="n">USD</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">sent_to_acquirer</span> <span class="n">content</span><span class="o">=[</span><span class="kc">true</span><span class="o">]&gt;</span>
<span class="o">]&gt;</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;intersolve&lt;/transaction_type&gt;
  &lt;status&gt;approved&lt;/status&gt;
  &lt;mode&gt;live&lt;/mode&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;consumer_id&gt;123456&lt;/consumer_id&gt;
  &lt;token&gt;ee946db8-d7db-4bb7-b608-b65b153e127d&lt;/token&gt;
  &lt;technical_message&gt;Transaction successful!&lt;/technical_message&gt;
  &lt;message&gt;Transaction successful!&lt;/message&gt;
  &lt;timestamp&gt;2019-03-14T12:06:01Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
  &lt;sent_to_acquirer&gt;true&lt;/sent_to_acquirer&gt;
&lt;/payment_transaction&gt;
</code></pre>

<p><strong>Successful Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>The transaction type</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>transaction_id</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>unique_id</td>
<td>string(32)</td>
<td>Unique id defined by gate (must later be used if capturing, voiding or refunding a transaction)</td>
</tr>
<tr>
<td>consumer_id</td>
<td>string(10)</td>
<td>Consumer unique reference. See <a href="#consumers">Consumers</a></td>
</tr>
<tr>
<td>token</td>
<td>string(36)</td>
<td>Plain-text token value. See <a href="#tokenization">Tokenization</a></td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
<tr>
<td>message</td>
<td>string(255)</td>
<td>Human readable error message which can be displayed to users.</td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when the transaction was processed in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Combined date and time</a> e.g. 2007-08- 30T17:46:11Z</td>
</tr>
<tr>
<td>descriptor</td>
<td>string</td>
<td>Static descriptor MID info as configured on the gateway</td>
</tr>
<tr>
<td>amount</td>
<td>integer</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>sent_to_acquirer</td>
<td>string</td>
<td>&quot;true&quot; or &quot;false&quot;</td>
</tr>
<tr>
<td>dynamic_descriptor_params</td>
<td>section</td>
<td>Optional, returned only if dynamic desc params are submitted on the API. Note here that the formatted dyn desc params are returned - as they would be submitted to the schemes for settlement.</td>
</tr>
</tbody></table>

<blockquote>
<p>Error Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>stdClass Object
(
    [transaction_type] =&gt; intersolve
    [status] =&gt; error
    [mode] =&gt; live
    [transaction_id] =&gt; 43671
    [unique_id] =&gt; 44177a21403427eb96664a6d7e5d5d48
    [code] =&gt; 340
    [technical_message] =&gt; Transaction_id is invalid!
    [message] =&gt; Transaction_id is invalid!
    [timestamp] =&gt; DateTime Object
        (
            [date] =&gt; 2019-03-14 12:06:01.000000
            [timezone_type] =&gt; 2
            [timezone] =&gt; Z
        )
    [descriptor] =&gt; Descriptor one
    [amount] =&gt; 100
    [currency] =&gt; USD
    [sent_to_acquirer] =&gt; false
)
</code></pre>

<pre class="highlight java tab-java"><code><span class="o">&lt;</span><span class="n">payment_response</span> <span class="n">content</span><span class="o">=[</span>
    <span class="o">&lt;</span><span class="n">transaction_type</span> <span class="n">content</span><span class="o">=[</span><span class="n">intersolve</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">status</span> <span class="n">content</span><span class="o">=[</span><span class="n">error</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">mode</span> <span class="n">content</span><span class="o">=[</span><span class="n">live</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">transaction_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">43671</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">unique_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">44177</span><span class="n">a21403427eb96664a6d7e5d5d48</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">code</span> <span class="n">content</span><span class="o">=[</span><span class="mi">340</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">technical_message</span> <span class="n">content</span><span class="o">=[</span><span class="n">Transaction_id</span> <span class="n">is</span> <span class="n">invalid</span><span class="o">!]&gt;</span>
    <span class="o">&lt;</span><span class="n">message</span> <span class="n">content</span><span class="o">=[</span><span class="n">Transaction_id</span> <span class="n">is</span> <span class="n">invalid</span><span class="o">!]&gt;</span>
    <span class="o">&lt;</span><span class="n">timestamp</span> <span class="n">content</span><span class="o">=[</span><span class="mi">2019</span><span class="o">-</span><span class="mo">03</span><span class="o">-</span><span class="mi">14</span><span class="nl">T12:</span><span class="mo">06</span><span class="o">:</span><span class="mo">01</span><span class="n">Z</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">descriptor</span> <span class="n">content</span><span class="o">=[</span><span class="n">Descriptor</span> <span class="n">one</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">amount</span> <span class="n">content</span><span class="o">=[</span><span class="mi">100</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">currency</span> <span class="n">content</span><span class="o">=[</span><span class="n">USD</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">sent_to_acquirer</span> <span class="n">content</span><span class="o">=[</span><span class="kc">false</span><span class="o">]&gt;</span>
<span class="o">]&gt;</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;intersolve&lt;/transaction_type&gt;
  &lt;status&gt;error&lt;/status&gt;
  &lt;mode&gt;live&lt;/mode&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;code&gt;340&lt;/code&gt;
  &lt;technical_message&gt;Transaction_id is invalid!&lt;/technical_message&gt;
  &lt;message&gt;Transaction_id is invalid!&lt;/message&gt;
  &lt;timestamp&gt;2019-03-14T12:06:01Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
  &lt;sent_to_acquirer&gt;false&lt;/sent_to_acquirer&gt;
&lt;/payment_transaction&gt;
</code></pre>

<p><strong>Error Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>The transaction type</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>transaction_id</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>unique_id</td>
<td>string(32)</td>
<td>Unique id defined by gate (must later be used if capturing, voiding or refunding a transaction)</td>
</tr>
<tr>
<td>code</td>
<td>integer</td>
<td>Error code according to <a href="#error-code-table">Error code table</a></td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
<tr>
<td>message</td>
<td>string(255)</td>
<td>Human readable error message which can be displayed to users.</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when the transaction was processed in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Combined date and time</a> e.g. 2007-08- 30T17:46:11Z</td>
</tr>
<tr>
<td>descriptor</td>
<td>string</td>
<td>Static descriptor MID info as configured on the gateway</td>
</tr>
<tr>
<td>amount</td>
<td>integer</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>sent_to_acquirer</td>
<td>string</td>
<td>&quot;true&quot; or &quot;false&quot;</td>
</tr>
<tr>
<td>dynamic_descriptor_params</td>
<td>section</td>
<td>Optional, returned only if dynamic desc params are submitted on the API. Note here that the formatted dyn desc params are returned - as they would be submitted to the schemes for settlement.</td>
</tr>
</tbody></table>
<h3 id='fashioncheque'>Fashioncheque</h3>
<p><strong>Fashioncheque transactions are made using gift card provided by Fashioncheque</strong></p>

<p>Using a fashioncheque transaction, the amount is immediately billed to the customer’s gift card.</p>

<p>It can be reversed via a void transaction on the same day of the transaction. They can also be refunded.</p>

<p>Use fashioncheque transactions, if you are using gift cards provided by Fashioncheque.</p>

<aside class="notice" >
This transaction type supports <a href="#tokenization" >Tokenization</a>.
</aside>

<blockquote>
<p>Request</p>
</blockquote>

<pre class="highlight php tab-php"><code><span class="cp">&lt;?php</span>

<span class="c1">// Load the pre-configured ini file...
</span><span class="nx">\Genesis\Config</span><span class="o">::</span><span class="na">loadSettings</span><span class="p">(</span><span class="s1">'/path/to/config.ini'</span><span class="p">);</span>

<span class="nv">$genesis</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Genesis</span><span class="p">(</span><span class="s1">'Financial\GiftCards\Fashioncheque'</span><span class="p">);</span>
<span class="nv">$request</span> <span class="o">=</span> <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">request</span><span class="p">();</span>

<span class="nv">$request</span>
  <span class="o">-&gt;</span><span class="na">setTransactionId</span><span class="p">(</span><span class="s1">'43671'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setUsage</span><span class="p">(</span><span class="s1">'40208 concert tickets'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setRemoteIp</span><span class="p">(</span><span class="s1">'245.253.2.12'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setAmount</span><span class="p">(</span><span class="s1">'100'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCurrency</span><span class="p">(</span><span class="s1">'USD'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCardNumber</span><span class="p">(</span><span class="s1">'6046425117120757123'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCvv</span><span class="p">(</span><span class="s1">'121839'</span><span class="p">)</span>


  <span class="c1">// Billing Address
</span>  <span class="o">-&gt;</span><span class="na">setBillingFirstName</span><span class="p">(</span><span class="s1">'Travis'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingLastName</span><span class="p">(</span><span class="s1">'Pastrana'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingAddress1</span><span class="p">(</span><span class="s1">'Muster Str. 12'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingZipCode</span><span class="p">(</span><span class="s1">'10178'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingCity</span><span class="p">(</span><span class="s1">'Los Angeles'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingState</span><span class="p">(</span><span class="s1">'CA'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingCountry</span><span class="p">(</span><span class="s1">'US'</span><span class="p">);</span>

<span class="k">try</span> <span class="p">{</span>
    <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">execute</span><span class="p">();</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">response</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">getResponseObject</span><span class="p">();</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">\Exception</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$e</span><span class="o">-&gt;</span><span class="na">getMessage</span><span class="p">();</span>
<span class="p">}</span>
</code></pre>

<pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.GenesisClient</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.TransactionResult</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.constants.Endpoints</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.constants.Environments</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.requests.financial.giftcards.FashionchequeRequest</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.model.Transaction</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Configuration</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Country</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Currency</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.math.BigDecimal</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">GenesisExample</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">()</span>  <span class="o">{</span>

    <span class="c1">// Create configuration</span>
    <span class="n">Configuration</span> <span class="n">configuration</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Configuration</span><span class="o">(</span><span class="n">Environments</span><span class="o">.</span><span class="na">STAGING</span><span class="o">,</span> <span class="n">Endpoints</span><span class="o">.</span><span class="na">EMERCHANTPAY</span><span class="o">);</span>

    <span class="n">configuration</span><span class="o">.</span><span class="na">setUsername</span><span class="o">(</span><span class="s">"SET_YOUR_USERNAME"</span><span class="o">);</span>
    <span class="n">configuration</span><span class="o">.</span><span class="na">setPassword</span><span class="o">(</span><span class="s">"SET_YOUR_PASSWORD"</span><span class="o">);</span>
    <span class="n">configuration</span><span class="o">.</span><span class="na">setToken</span><span class="o">(</span><span class="s">"SET_YOUR_TOKEN"</span><span class="o">);</span>

    <span class="n">FashionchequeRequest</span> <span class="n">request</span> <span class="o">=</span> <span class="k">new</span> <span class="n">FashionchequeRequest</span><span class="o">();</span>

    <span class="n">request</span><span class="o">.</span><span class="na">setTransactionId</span><span class="o">(</span><span class="s">"43671"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setUsage</span><span class="o">(</span><span class="s">"40208 concert tickets"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setRemoteIp</span><span class="o">(</span><span class="s">"245.253.2.12"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setAmount</span><span class="o">(</span><span class="k">new</span> <span class="n">BigDecimal</span><span class="o">(</span><span class="mi">100</span><span class="o">));</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCurrency</span><span class="o">(</span><span class="s">"USD"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCardNumber</span><span class="o">(</span><span class="s">"6046425117120757123"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCvv</span><span class="o">(</span><span class="s">"121839"</span><span class="o">);</span>


    <span class="c1">// Billing Address</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingFirstname</span><span class="o">(</span><span class="s">"Travis"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingLastname</span><span class="o">(</span><span class="s">"Pastrana"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingPrimaryAddress</span><span class="o">(</span><span class="s">"Muster Str. 12"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingZipCode</span><span class="o">(</span><span class="s">"10178"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingCity</span><span class="o">(</span><span class="s">"Los Angeles"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingState</span><span class="o">(</span><span class="s">"CA"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingCountry</span><span class="o">(</span><span class="s">"US"</span><span class="o">);</span>

    <span class="n">GenesisClient</span> <span class="n">client</span> <span class="o">=</span> <span class="k">new</span> <span class="n">GenesisClient</span><span class="o">(</span><span class="n">configuration</span><span class="o">,</span> <span class="n">request</span><span class="o">);</span>
    <span class="n">client</span><span class="o">.</span><span class="na">execute</span><span class="o">();</span>

    <span class="c1">// Parse Payment result</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">client</span><span class="o">.</span><span class="na">getResponse</span><span class="o">());</span>

  <span class="o">}</span>
<span class="o">}</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>curl https://username:password@gate.emerchantpay.net/process/TERMINAL-TOKEN <span class="se">\</span>
   -H <span class="s2">"Content-Type: text/xml"</span> <span class="se">\</span>
   -d <span class="s1">'
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;fashioncheque&lt;/transaction_type&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;usage&gt;40208 concert tickets&lt;/usage&gt;
  &lt;remote_ip&gt;245.253.2.12&lt;/remote_ip&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
  &lt;card_number&gt;6046425117120757123&lt;/card_number&gt;
  &lt;cvv&gt;121839&lt;/cvv&gt;
  &lt;billing_address&gt;
    &lt;first_name&gt;Travis&lt;/first_name&gt;
    &lt;last_name&gt;Pastrana&lt;/last_name&gt;
    &lt;address1&gt;Muster Str. 12&lt;/address1&gt;
    &lt;zip_code&gt;10178&lt;/zip_code&gt;
    &lt;city&gt;Los Angeles&lt;/city&gt;
    &lt;state&gt;CA&lt;/state&gt;
    &lt;country&gt;US&lt;/country&gt;
  &lt;/billing_address&gt;
&lt;/payment_transaction&gt;'</span>
</code></pre>

<p><strong>Request Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>required</td>
<td>string(255)</td>
<td>The transaction type: <strong>fashioncheque</strong></td>
</tr>
<tr>
<td>transaction_id</td>
<td>required</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>usage</td>
<td>required*</td>
<td>string(255)</td>
<td>Description of the transaction for later use</td>
</tr>
<tr>
<td>remote_ip</td>
<td>required*</td>
<td>IPv4 address</td>
<td>IPv4 address of customer</td>
</tr>
<tr>
<td>amount</td>
<td>required</td>
<td>integer &gt; 0</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>required</td>
<td>string(3)</td>
<td>Only USD and EUR</td>
</tr>
<tr>
<td>card_number</td>
<td>required</td>
<td>string(19..21)</td>
<td>Gift card number</td>
</tr>
<tr>
<td>cvv</td>
<td>required*</td>
<td>5 to 8 digits</td>
<td>Verification code of the gift card, requirement is based on terminal configuration</td>
</tr>
<tr>
<td>token</td>
<td>optional</td>
<td>string(36)</td>
<td>See <a href="#tokenization">Tokenization</a> for more details. If present, the cardholder parameters can be omitted</td>
</tr>
<tr>
<td><strong>billing_address</strong></td>
<td>required*</td>
<td></td>
<td>See <a href="#required-vs-optional-api-params">Required vs Optional API params</a> for details</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;first_name</td>
<td>required*</td>
<td>string(255)</td>
<td>Customer first name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;last_name</td>
<td>required*</td>
<td>string(255)</td>
<td>Customer last name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address1</td>
<td>required*</td>
<td>string(255)</td>
<td>Primary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address2</td>
<td>required*</td>
<td>string(255)</td>
<td>Secondary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;zip_code</td>
<td>required*</td>
<td>string</td>
<td>ZIP code</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;city</td>
<td>required*</td>
<td>string(255)</td>
<td>City</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;state</td>
<td>required*</td>
<td>string(2)</td>
<td>State code in <a href="https://en.wikipedia.org/wiki/ISO_3166-2">ISO 3166-2</a>, required for USA and Canada</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;country</td>
<td>required*</td>
<td>string(2)</td>
<td>Country code in <a href="https://www.iso.org/iso-3166-country-codes.html">ISO 3166</a></td>
</tr>
<tr>
<td><strong>shipping_address</strong></td>
<td>optional</td>
<td></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;first_name</td>
<td>optional</td>
<td>string(255)</td>
<td>Customer first name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;last_name</td>
<td>optional</td>
<td>string(255)</td>
<td>Customer last name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address1</td>
<td>optional</td>
<td>string(255)</td>
<td>Primary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address2</td>
<td>optional</td>
<td>string(255)</td>
<td>Secondary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;zip_code</td>
<td>optional</td>
<td>string</td>
<td>ZIP code</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;city</td>
<td>optional</td>
<td>string(255)</td>
<td>City</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;state</td>
<td>optional</td>
<td>string(2)</td>
<td>State code in <a href="https://en.wikipedia.org/wiki/ISO_3166-2">ISO 3166-2</a>, required for USA and Canada</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;country</td>
<td>optional</td>
<td>string(2)</td>
<td>Country code in <a href="https://www.iso.org/iso-3166-country-codes.html">ISO 3166</a></td>
</tr>
<tr>
<td><strong>dynamic_descriptor_params</strong></td>
<td>optional</td>
<td></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;merchant_name</td>
<td>optional</td>
<td>string(25)</td>
<td>Allows to dynamically override the charge descriptor</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;merchant_city</td>
<td>optional</td>
<td>string(13)</td>
<td>Allows to dynamically override the merchant phone number</td>
</tr>
</tbody></table>

<p><code>required* = conditionally required</code></p>

<blockquote>
<p>Successful Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>stdClass Object
(
    [transaction_type] =&gt; fashioncheque
    [status] =&gt; approved
    [mode] =&gt; live
    [transaction_id] =&gt; 43671
    [unique_id] =&gt; 44177a21403427eb96664a6d7e5d5d48
    [technical_message] =&gt; Transaction successful!
    [message] =&gt; Transaction successful!
    [timestamp] =&gt; DateTime Object
        (
            [date] =&gt; 2019-03-14 12:06:01.000000
            [timezone_type] =&gt; 2
            [timezone] =&gt; Z
        )
    [descriptor] =&gt; Descriptor one
    [amount] =&gt; 100
    [currency] =&gt; USD
    [sent_to_acquirer] =&gt; true
)
</code></pre>

<pre class="highlight java tab-java"><code><span class="o">&lt;</span><span class="n">payment_response</span> <span class="n">content</span><span class="o">=[</span>
    <span class="o">&lt;</span><span class="n">transaction_type</span> <span class="n">content</span><span class="o">=[</span><span class="n">fashioncheque</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">status</span> <span class="n">content</span><span class="o">=[</span><span class="n">approved</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">mode</span> <span class="n">content</span><span class="o">=[</span><span class="n">live</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">transaction_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">43671</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">unique_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">44177</span><span class="n">a21403427eb96664a6d7e5d5d48</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">technical_message</span> <span class="n">content</span><span class="o">=[</span><span class="n">Transaction</span> <span class="n">successful</span><span class="o">!]&gt;</span>
    <span class="o">&lt;</span><span class="n">message</span> <span class="n">content</span><span class="o">=[</span><span class="n">Transaction</span> <span class="n">successful</span><span class="o">!]&gt;</span>
    <span class="o">&lt;</span><span class="n">timestamp</span> <span class="n">content</span><span class="o">=[</span><span class="mi">2019</span><span class="o">-</span><span class="mo">03</span><span class="o">-</span><span class="mi">14</span><span class="nl">T12:</span><span class="mo">06</span><span class="o">:</span><span class="mo">01</span><span class="n">Z</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">descriptor</span> <span class="n">content</span><span class="o">=[</span><span class="n">Descriptor</span> <span class="n">one</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">amount</span> <span class="n">content</span><span class="o">=[</span><span class="mi">100</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">currency</span> <span class="n">content</span><span class="o">=[</span><span class="n">USD</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">sent_to_acquirer</span> <span class="n">content</span><span class="o">=[</span><span class="kc">true</span><span class="o">]&gt;</span>
<span class="o">]&gt;</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;fashioncheque&lt;/transaction_type&gt;
  &lt;status&gt;approved&lt;/status&gt;
  &lt;mode&gt;live&lt;/mode&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;technical_message&gt;Transaction successful!&lt;/technical_message&gt;
  &lt;message&gt;Transaction successful!&lt;/message&gt;
  &lt;timestamp&gt;2019-03-14T12:06:01Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
  &lt;sent_to_acquirer&gt;true&lt;/sent_to_acquirer&gt;
&lt;/payment_transaction&gt;
</code></pre>

<p><strong>Successful Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>The transaction type</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>transaction_id</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>unique_id</td>
<td>string(32)</td>
<td>Unique id defined by gate (must later be used if capturing, voiding or refunding a transaction)</td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
<tr>
<td>message</td>
<td>string(255)</td>
<td>Human readable error message which can be displayed to users.</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when the transaction was processed in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Combined date and time</a> e.g. 2007-08- 30T17:46:11Z</td>
</tr>
<tr>
<td>descriptor</td>
<td>string</td>
<td>Static descriptor MID info as configured on the gateway</td>
</tr>
<tr>
<td>amount</td>
<td>integer</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>sent_to_acquirer</td>
<td>string</td>
<td>&quot;true&quot; or &quot;false&quot;</td>
</tr>
<tr>
<td>dynamic_descriptor_params</td>
<td>section</td>
<td>Optional, returned only if dynamic desc params are submitted on the API. Note here that the formatted dyn desc params are returned - as they would be submitted to the schemes for settlement.</td>
</tr>
</tbody></table>

<blockquote>
<p>Error Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>stdClass Object
(
    [transaction_type] =&gt; fashioncheque
    [status] =&gt; error
    [mode] =&gt; live
    [transaction_id] =&gt; 43671
    [unique_id] =&gt; 44177a21403427eb96664a6d7e5d5d48
    [code] =&gt; 340
    [technical_message] =&gt; Transaction_id is invalid!
    [message] =&gt; Transaction_id is invalid!
    [timestamp] =&gt; DateTime Object
        (
            [date] =&gt; 2019-03-14 12:06:01.000000
            [timezone_type] =&gt; 2
            [timezone] =&gt; Z
        )
    [descriptor] =&gt; Descriptor one
    [amount] =&gt; 100
    [currency] =&gt; USD
    [sent_to_acquirer] =&gt; false
)
</code></pre>

<pre class="highlight java tab-java"><code><span class="o">&lt;</span><span class="n">payment_response</span> <span class="n">content</span><span class="o">=[</span>
    <span class="o">&lt;</span><span class="n">transaction_type</span> <span class="n">content</span><span class="o">=[</span><span class="n">fashioncheque</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">status</span> <span class="n">content</span><span class="o">=[</span><span class="n">error</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">mode</span> <span class="n">content</span><span class="o">=[</span><span class="n">live</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">transaction_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">43671</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">unique_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">44177</span><span class="n">a21403427eb96664a6d7e5d5d48</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">code</span> <span class="n">content</span><span class="o">=[</span><span class="mi">340</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">technical_message</span> <span class="n">content</span><span class="o">=[</span><span class="n">Transaction_id</span> <span class="n">is</span> <span class="n">invalid</span><span class="o">!]&gt;</span>
    <span class="o">&lt;</span><span class="n">message</span> <span class="n">content</span><span class="o">=[</span><span class="n">Transaction_id</span> <span class="n">is</span> <span class="n">invalid</span><span class="o">!]&gt;</span>
    <span class="o">&lt;</span><span class="n">timestamp</span> <span class="n">content</span><span class="o">=[</span><span class="mi">2019</span><span class="o">-</span><span class="mo">03</span><span class="o">-</span><span class="mi">14</span><span class="nl">T12:</span><span class="mo">06</span><span class="o">:</span><span class="mo">01</span><span class="n">Z</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">descriptor</span> <span class="n">content</span><span class="o">=[</span><span class="n">Descriptor</span> <span class="n">one</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">amount</span> <span class="n">content</span><span class="o">=[</span><span class="mi">100</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">currency</span> <span class="n">content</span><span class="o">=[</span><span class="n">USD</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">sent_to_acquirer</span> <span class="n">content</span><span class="o">=[</span><span class="kc">false</span><span class="o">]&gt;</span>
<span class="o">]&gt;</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;fashioncheque&lt;/transaction_type&gt;
  &lt;status&gt;error&lt;/status&gt;
  &lt;mode&gt;live&lt;/mode&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;code&gt;340&lt;/code&gt;
  &lt;technical_message&gt;Transaction_id is invalid!&lt;/technical_message&gt;
  &lt;message&gt;Transaction_id is invalid!&lt;/message&gt;
  &lt;timestamp&gt;2019-03-14T12:06:01Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
  &lt;sent_to_acquirer&gt;false&lt;/sent_to_acquirer&gt;
&lt;/payment_transaction&gt;
</code></pre>

<p><strong>Error Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>The transaction type</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>transaction_id</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>unique_id</td>
<td>string(32)</td>
<td>Unique id defined by gate (must later be used if capturing, voiding or refunding a transaction)</td>
</tr>
<tr>
<td>code</td>
<td>integer</td>
<td>Error code according to <a href="#error-code-table">Error code table</a></td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
<tr>
<td>message</td>
<td>string(255)</td>
<td>Human readable error message which can be displayed to users.</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when the transaction was processed in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Combined date and time</a> e.g. 2007-08- 30T17:46:11Z</td>
</tr>
<tr>
<td>descriptor</td>
<td>string</td>
<td>Static descriptor MID info as configured on the gateway</td>
</tr>
<tr>
<td>amount</td>
<td>integer</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>sent_to_acquirer</td>
<td>string</td>
<td>&quot;true&quot; or &quot;false&quot;</td>
</tr>
<tr>
<td>dynamic_descriptor_params</td>
<td>section</td>
<td>Optional, returned only if dynamic desc params are submitted on the API. Note here that the formatted dyn desc params are returned - as they would be submitted to the schemes for settlement.</td>
</tr>
</tbody></table>
<h3 id='tcs'>TCS</h3>
<p>The container store <strong>transactions are made using gift cards provided by TCS</strong></p>

<p>The amount from a Container Store Transactions is immediately billed to the customer’s gift card.</p>

<p>It can be reversed via a <a href="#void">void</a> transaction.</p>

<blockquote>
<p>Request</p>
</blockquote>

<pre class="highlight php tab-php"><code><span class="cp">&lt;?php</span>

<span class="c1">// Load the pre-configured ini file...
</span><span class="nx">\Genesis\Config</span><span class="o">::</span><span class="na">loadSettings</span><span class="p">(</span><span class="s1">'/path/to/config.ini'</span><span class="p">);</span>

<span class="nv">$genesis</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Genesis</span><span class="p">(</span><span class="s1">'Financial\GiftCards\Tcs'</span><span class="p">);</span>
<span class="nv">$request</span> <span class="o">=</span> <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">request</span><span class="p">();</span>

<span class="nv">$request</span>
  <span class="o">-&gt;</span><span class="na">setTransactionId</span><span class="p">(</span><span class="s1">'43671'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setUsage</span><span class="p">(</span><span class="s1">'40208 concert tickets'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setRemoteIp</span><span class="p">(</span><span class="s1">'245.253.2.12'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setAmount</span><span class="p">(</span><span class="s1">'100'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCurrency</span><span class="p">(</span><span class="s1">'USD'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCardNumber</span><span class="p">(</span><span class="s1">'6046425117120757123'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCvv</span><span class="p">(</span><span class="s1">'121839'</span><span class="p">)</span>


  <span class="c1">// Billing Address
</span>  <span class="o">-&gt;</span><span class="na">setBillingFirstName</span><span class="p">(</span><span class="s1">'Travis'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingLastName</span><span class="p">(</span><span class="s1">'Pastrana'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingAddress1</span><span class="p">(</span><span class="s1">'Muster Str. 12'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingZipCode</span><span class="p">(</span><span class="s1">'10178'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingCity</span><span class="p">(</span><span class="s1">'Los Angeles'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingState</span><span class="p">(</span><span class="s1">'CA'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingCountry</span><span class="p">(</span><span class="s1">'US'</span><span class="p">);</span>

<span class="k">try</span> <span class="p">{</span>
    <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">execute</span><span class="p">();</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">response</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">getResponseObject</span><span class="p">();</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">\Exception</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$e</span><span class="o">-&gt;</span><span class="na">getMessage</span><span class="p">();</span>
<span class="p">}</span>
</code></pre>

<pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.GenesisClient</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.TransactionResult</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.constants.Endpoints</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.constants.Environments</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.requests.financial.giftcards.TCSRequest</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.model.Transaction</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Configuration</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Country</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Currency</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.math.BigDecimal</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">GenesisExample</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">()</span>  <span class="o">{</span>

    <span class="c1">// Create configuration</span>
    <span class="n">Configuration</span> <span class="n">configuration</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Configuration</span><span class="o">(</span><span class="n">Environments</span><span class="o">.</span><span class="na">STAGING</span><span class="o">,</span> <span class="n">Endpoints</span><span class="o">.</span><span class="na">EMERCHANTPAY</span><span class="o">);</span>

    <span class="n">configuration</span><span class="o">.</span><span class="na">setUsername</span><span class="o">(</span><span class="s">"SET_YOUR_USERNAME"</span><span class="o">);</span>
    <span class="n">configuration</span><span class="o">.</span><span class="na">setPassword</span><span class="o">(</span><span class="s">"SET_YOUR_PASSWORD"</span><span class="o">);</span>
    <span class="n">configuration</span><span class="o">.</span><span class="na">setToken</span><span class="o">(</span><span class="s">"SET_YOUR_TOKEN"</span><span class="o">);</span>

    <span class="n">TCSRequest</span> <span class="n">request</span> <span class="o">=</span> <span class="k">new</span> <span class="n">TCSRequest</span><span class="o">();</span>

    <span class="n">request</span><span class="o">.</span><span class="na">setTransactionId</span><span class="o">(</span><span class="s">"43671"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setUsage</span><span class="o">(</span><span class="s">"40208 concert tickets"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setRemoteIp</span><span class="o">(</span><span class="s">"245.253.2.12"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setAmount</span><span class="o">(</span><span class="k">new</span> <span class="n">BigDecimal</span><span class="o">(</span><span class="mi">100</span><span class="o">));</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCurrency</span><span class="o">(</span><span class="s">"USD"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCardNumber</span><span class="o">(</span><span class="s">"6046425117120757123"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCvv</span><span class="o">(</span><span class="s">"121839"</span><span class="o">);</span>


    <span class="c1">// Billing Address</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingFirstname</span><span class="o">(</span><span class="s">"Travis"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingLastname</span><span class="o">(</span><span class="s">"Pastrana"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingPrimaryAddress</span><span class="o">(</span><span class="s">"Muster Str. 12"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingZipCode</span><span class="o">(</span><span class="s">"10178"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingCity</span><span class="o">(</span><span class="s">"Los Angeles"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingState</span><span class="o">(</span><span class="s">"CA"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingCountry</span><span class="o">(</span><span class="s">"US"</span><span class="o">);</span>

    <span class="n">GenesisClient</span> <span class="n">client</span> <span class="o">=</span> <span class="k">new</span> <span class="n">GenesisClient</span><span class="o">(</span><span class="n">configuration</span><span class="o">,</span> <span class="n">request</span><span class="o">);</span>
    <span class="n">client</span><span class="o">.</span><span class="na">execute</span><span class="o">();</span>

    <span class="c1">// Parse Payment result</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">client</span><span class="o">.</span><span class="na">getResponse</span><span class="o">());</span>

  <span class="o">}</span>
<span class="o">}</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>curl https://username:password@gate.emerchantpay.net/process/TERMINAL-TOKEN <span class="se">\</span>
   -H <span class="s2">"Content-Type: text/xml"</span> <span class="se">\</span>
   -d <span class="s1">'
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;container_store&lt;/transaction_type&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;usage&gt;40208 concert tickets&lt;/usage&gt;
  &lt;remote_ip&gt;245.253.2.12&lt;/remote_ip&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
  &lt;card_number&gt;6046425117120757123&lt;/card_number&gt;
  &lt;cvv&gt;121839&lt;/cvv&gt;
  &lt;billing_address&gt;
    &lt;first_name&gt;Travis&lt;/first_name&gt;
    &lt;last_name&gt;Pastrana&lt;/last_name&gt;
    &lt;address1&gt;Muster Str. 12&lt;/address1&gt;
    &lt;zip_code&gt;10178&lt;/zip_code&gt;
    &lt;city&gt;Los Angeles&lt;/city&gt;
    &lt;state&gt;CA&lt;/state&gt;
    &lt;country&gt;US&lt;/country&gt;
  &lt;/billing_address&gt;
&lt;/payment_transaction&gt;'</span>
</code></pre>

<p><strong>Request Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>required</td>
<td>string(255)</td>
<td>The transaction type: <strong>container_store</strong></td>
</tr>
<tr>
<td>transaction_id</td>
<td>required</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>usage</td>
<td>required*</td>
<td>string(255)</td>
<td>Description of the transaction for later use</td>
</tr>
<tr>
<td>remote_ip</td>
<td>required*</td>
<td>IPv4 address</td>
<td>IPv4 address of customer</td>
</tr>
<tr>
<td>amount</td>
<td>required</td>
<td>integer &gt; 0</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>required</td>
<td>string(3)</td>
<td>Only USD and EUR</td>
</tr>
<tr>
<td>card_number</td>
<td>required</td>
<td>string(19..21)</td>
<td>Gift card number</td>
</tr>
<tr>
<td>cvv</td>
<td>required*</td>
<td>5 to 8 digits</td>
<td>Verification code of the gift card, requirement is based on terminal configuration</td>
</tr>
<tr>
<td>token</td>
<td>optional</td>
<td>string(36)</td>
<td>See <a href="#tokenization">Tokenization</a> for more details. If present, the cardholder parameters can be omitted</td>
</tr>
<tr>
<td><strong>billing_address</strong></td>
<td>required*</td>
<td></td>
<td>See <a href="#required-vs-optional-api-params">Required vs Optional API params</a> for details</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;first_name</td>
<td>required*</td>
<td>string(255)</td>
<td>Customer first name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;last_name</td>
<td>required*</td>
<td>string(255)</td>
<td>Customer last name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address1</td>
<td>required*</td>
<td>string(255)</td>
<td>Primary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address2</td>
<td>required*</td>
<td>string(255)</td>
<td>Secondary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;zip_code</td>
<td>required*</td>
<td>string</td>
<td>ZIP code</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;city</td>
<td>required*</td>
<td>string(255)</td>
<td>City</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;state</td>
<td>required*</td>
<td>string(2)</td>
<td>State code in <a href="https://en.wikipedia.org/wiki/ISO_3166-2">ISO 3166-2</a>, required for USA and Canada</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;country</td>
<td>required*</td>
<td>string(2)</td>
<td>Country code in <a href="https://www.iso.org/iso-3166-country-codes.html">ISO 3166</a></td>
</tr>
<tr>
<td><strong>shipping_address</strong></td>
<td>optional</td>
<td></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;first_name</td>
<td>optional</td>
<td>string(255)</td>
<td>Customer first name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;last_name</td>
<td>optional</td>
<td>string(255)</td>
<td>Customer last name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address1</td>
<td>optional</td>
<td>string(255)</td>
<td>Primary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address2</td>
<td>optional</td>
<td>string(255)</td>
<td>Secondary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;zip_code</td>
<td>optional</td>
<td>string</td>
<td>ZIP code</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;city</td>
<td>optional</td>
<td>string(255)</td>
<td>City</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;state</td>
<td>optional</td>
<td>string(2)</td>
<td>State code in <a href="https://en.wikipedia.org/wiki/ISO_3166-2">ISO 3166-2</a>, required for USA and Canada</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;country</td>
<td>optional</td>
<td>string(2)</td>
<td>Country code in <a href="https://www.iso.org/iso-3166-country-codes.html">ISO 3166</a></td>
</tr>
<tr>
<td><strong>dynamic_descriptor_params</strong></td>
<td>optional</td>
<td></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;merchant_name</td>
<td>optional</td>
<td>string(25)</td>
<td>Allows to dynamically override the charge descriptor</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;merchant_city</td>
<td>optional</td>
<td>string(13)</td>
<td>Allows to dynamically override the merchant phone number</td>
</tr>
</tbody></table>

<p><code>required* = conditionally required</code></p>

<blockquote>
<p>Successful Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>stdClass Object
(
    [transaction_type] =&gt; container_store
    [status] =&gt; approved
    [mode] =&gt; live
    [transaction_id] =&gt; 43671
    [unique_id] =&gt; 44177a21403427eb96664a6d7e5d5d48
    [technical_message] =&gt; Transaction successful!
    [message] =&gt; Transaction successful!
    [timestamp] =&gt; DateTime Object
        (
            [date] =&gt; 2019-03-14 12:06:01.000000
            [timezone_type] =&gt; 2
            [timezone] =&gt; Z
        )
    [descriptor] =&gt; Descriptor one
    [amount] =&gt; 100
    [currency] =&gt; USD
    [sent_to_acquirer] =&gt; true
)
</code></pre>

<pre class="highlight java tab-java"><code><span class="o">&lt;</span><span class="n">payment_response</span> <span class="n">content</span><span class="o">=[</span>
    <span class="o">&lt;</span><span class="n">transaction_type</span> <span class="n">content</span><span class="o">=[</span><span class="n">container_store</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">status</span> <span class="n">content</span><span class="o">=[</span><span class="n">approved</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">mode</span> <span class="n">content</span><span class="o">=[</span><span class="n">live</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">transaction_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">43671</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">unique_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">44177</span><span class="n">a21403427eb96664a6d7e5d5d48</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">technical_message</span> <span class="n">content</span><span class="o">=[</span><span class="n">Transaction</span> <span class="n">successful</span><span class="o">!]&gt;</span>
    <span class="o">&lt;</span><span class="n">message</span> <span class="n">content</span><span class="o">=[</span><span class="n">Transaction</span> <span class="n">successful</span><span class="o">!]&gt;</span>
    <span class="o">&lt;</span><span class="n">timestamp</span> <span class="n">content</span><span class="o">=[</span><span class="mi">2019</span><span class="o">-</span><span class="mo">03</span><span class="o">-</span><span class="mi">14</span><span class="nl">T12:</span><span class="mo">06</span><span class="o">:</span><span class="mo">01</span><span class="n">Z</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">descriptor</span> <span class="n">content</span><span class="o">=[</span><span class="n">Descriptor</span> <span class="n">one</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">amount</span> <span class="n">content</span><span class="o">=[</span><span class="mi">100</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">currency</span> <span class="n">content</span><span class="o">=[</span><span class="n">USD</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">sent_to_acquirer</span> <span class="n">content</span><span class="o">=[</span><span class="kc">true</span><span class="o">]&gt;</span>
<span class="o">]&gt;</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;container_store&lt;/transaction_type&gt;
  &lt;status&gt;approved&lt;/status&gt;
  &lt;mode&gt;live&lt;/mode&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;technical_message&gt;Transaction successful!&lt;/technical_message&gt;
  &lt;message&gt;Transaction successful!&lt;/message&gt;
  &lt;timestamp&gt;2019-03-14T12:06:01Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
  &lt;sent_to_acquirer&gt;true&lt;/sent_to_acquirer&gt;
&lt;/payment_transaction&gt;
</code></pre>

<p><strong>Successful Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>The transaction type</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>transaction_id</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>unique_id</td>
<td>string(32)</td>
<td>Unique id defined by gate (must later be used if capturing, voiding or refunding a transaction)</td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
<tr>
<td>message</td>
<td>string(255)</td>
<td>Human readable error message which can be displayed to users.</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when the transaction was processed in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Combined date and time</a> e.g. 2007-08- 30T17:46:11Z</td>
</tr>
<tr>
<td>descriptor</td>
<td>string</td>
<td>Static descriptor MID info as configured on the gateway</td>
</tr>
<tr>
<td>amount</td>
<td>integer</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>sent_to_acquirer</td>
<td>string</td>
<td>&quot;true&quot; or &quot;false&quot;</td>
</tr>
<tr>
<td>dynamic_descriptor_params</td>
<td>section</td>
<td>Optional, returned only if dynamic desc params are submitted on the API. Note here that the formatted dyn desc params are returned - as they would be submitted to the schemes for settlement.</td>
</tr>
</tbody></table>

<blockquote>
<p>Error Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>stdClass Object
(
    [transaction_type] =&gt; container_store
    [status] =&gt; error
    [mode] =&gt; live
    [transaction_id] =&gt; 43671
    [unique_id] =&gt; 44177a21403427eb96664a6d7e5d5d48
    [code] =&gt; 340
    [technical_message] =&gt; Transaction_id is invalid!
    [message] =&gt; Transaction_id is invalid!
    [timestamp] =&gt; DateTime Object
        (
            [date] =&gt; 2019-03-14 12:06:01.000000
            [timezone_type] =&gt; 2
            [timezone] =&gt; Z
        )
    [descriptor] =&gt; Descriptor one
    [amount] =&gt; 100
    [currency] =&gt; USD
    [sent_to_acquirer] =&gt; false
)
</code></pre>

<pre class="highlight java tab-java"><code><span class="o">&lt;</span><span class="n">payment_response</span> <span class="n">content</span><span class="o">=[</span>
    <span class="o">&lt;</span><span class="n">transaction_type</span> <span class="n">content</span><span class="o">=[</span><span class="n">container_store</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">status</span> <span class="n">content</span><span class="o">=[</span><span class="n">error</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">mode</span> <span class="n">content</span><span class="o">=[</span><span class="n">live</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">transaction_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">43671</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">unique_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">44177</span><span class="n">a21403427eb96664a6d7e5d5d48</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">code</span> <span class="n">content</span><span class="o">=[</span><span class="mi">340</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">technical_message</span> <span class="n">content</span><span class="o">=[</span><span class="n">Transaction_id</span> <span class="n">is</span> <span class="n">invalid</span><span class="o">!]&gt;</span>
    <span class="o">&lt;</span><span class="n">message</span> <span class="n">content</span><span class="o">=[</span><span class="n">Transaction_id</span> <span class="n">is</span> <span class="n">invalid</span><span class="o">!]&gt;</span>
    <span class="o">&lt;</span><span class="n">timestamp</span> <span class="n">content</span><span class="o">=[</span><span class="mi">2019</span><span class="o">-</span><span class="mo">03</span><span class="o">-</span><span class="mi">14</span><span class="nl">T12:</span><span class="mo">06</span><span class="o">:</span><span class="mo">01</span><span class="n">Z</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">descriptor</span> <span class="n">content</span><span class="o">=[</span><span class="n">Descriptor</span> <span class="n">one</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">amount</span> <span class="n">content</span><span class="o">=[</span><span class="mi">100</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">currency</span> <span class="n">content</span><span class="o">=[</span><span class="n">USD</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">sent_to_acquirer</span> <span class="n">content</span><span class="o">=[</span><span class="kc">false</span><span class="o">]&gt;</span>
<span class="o">]&gt;</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;container_store&lt;/transaction_type&gt;
  &lt;status&gt;error&lt;/status&gt;
  &lt;mode&gt;live&lt;/mode&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;code&gt;340&lt;/code&gt;
  &lt;technical_message&gt;Transaction_id is invalid!&lt;/technical_message&gt;
  &lt;message&gt;Transaction_id is invalid!&lt;/message&gt;
  &lt;timestamp&gt;2019-03-14T12:06:01Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
  &lt;sent_to_acquirer&gt;false&lt;/sent_to_acquirer&gt;
&lt;/payment_transaction&gt;
</code></pre>

<p><strong>Error Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>The transaction type</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>transaction_id</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>unique_id</td>
<td>string(32)</td>
<td>Unique id defined by gate (must later be used if capturing, voiding or refunding a transaction)</td>
</tr>
<tr>
<td>code</td>
<td>integer</td>
<td>Error code according to <a href="#error-code-table">Error code table</a></td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
<tr>
<td>message</td>
<td>string(255)</td>
<td>Human readable error message which can be displayed to users.</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when the transaction was processed in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Combined date and time</a> e.g. 2007-08- 30T17:46:11Z</td>
</tr>
<tr>
<td>descriptor</td>
<td>string</td>
<td>Static descriptor MID info as configured on the gateway</td>
</tr>
<tr>
<td>amount</td>
<td>integer</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>sent_to_acquirer</td>
<td>string</td>
<td>&quot;true&quot; or &quot;false&quot;</td>
</tr>
<tr>
<td>dynamic_descriptor_params</td>
<td>section</td>
<td>Optional, returned only if dynamic desc params are submitted on the API. Note here that the formatted dyn desc params are returned - as they would be submitted to the schemes for settlement.</td>
</tr>
</tbody></table>
<h3 id='split-payments'>Split Payments</h3>
<p>Split payments are performed on gift card transaction types when there isn’t enough balance in the gift card In order to use split payments you need to enable them on terminal. For more information please contact tech support.</p>

<p><strong>Split payments follow this workflow:</strong></p>

<ul>
<li>Split payment can be initiated only on gift card transaction.</li>
<li>You can have maximum three payment series including the initial transaction.</li>
<li>If the gift card does not have enough balance to perform the transaction, the whole available balance is taken from the gift card and new split payment is initiated.</li>
<li>You can continue the split payment with another gift card</li>
<li>You can finish the split payment with either gift card or credit card by submitting the ’unique id’ of the initial transaction as ’reference id’ in the request.</li>
<li>Any failure during split payment causes rollback of all split payment series transactions.</li>
</ul>

<aside class="notice" >
  Credit card transaction can be only last in split payment series and any series transaction must be submitted with the actual leftover amount.
</aside>

<p><strong>Example for initial split payment transaction:</strong></p>

<blockquote>
<p>Request</p>
</blockquote>

<pre class="highlight php tab-php"><code><span class="cp">&lt;?php</span>

<span class="c1">// Load the pre-configured ini file...
</span><span class="nx">\Genesis\Config</span><span class="o">::</span><span class="na">loadSettings</span><span class="p">(</span><span class="s1">'/path/to/config.ini'</span><span class="p">);</span>

<span class="nv">$genesis</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Genesis</span><span class="p">(</span><span class="s1">'Financial\GiftCards\Fashioncheque'</span><span class="p">);</span>
<span class="nv">$request</span> <span class="o">=</span> <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">request</span><span class="p">();</span>

<span class="nv">$request</span>
  <span class="o">-&gt;</span><span class="na">setTransactionId</span><span class="p">(</span><span class="s1">'43671'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setUsage</span><span class="p">(</span><span class="s1">'40208 concert tickets'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setRemoteIp</span><span class="p">(</span><span class="s1">'245.253.2.12'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setAmount</span><span class="p">(</span><span class="s1">'5000'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCurrency</span><span class="p">(</span><span class="s1">'EUR'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCardNumber</span><span class="p">(</span><span class="s1">'6046425117120757123'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCvv</span><span class="p">(</span><span class="s1">'121839'</span><span class="p">)</span>


  <span class="c1">// Billing Address
</span>  <span class="o">-&gt;</span><span class="na">setBillingFirstName</span><span class="p">(</span><span class="s1">'Travis'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingLastName</span><span class="p">(</span><span class="s1">'Pastrana'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingAddress1</span><span class="p">(</span><span class="s1">'Muster Str. 12'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingZipCode</span><span class="p">(</span><span class="s1">'10178'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingCity</span><span class="p">(</span><span class="s1">'Los Angeles'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingState</span><span class="p">(</span><span class="s1">'CA'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingCountry</span><span class="p">(</span><span class="s1">'US'</span><span class="p">);</span>

<span class="k">try</span> <span class="p">{</span>
    <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">execute</span><span class="p">();</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">response</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">getResponseObject</span><span class="p">();</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">\Exception</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$e</span><span class="o">-&gt;</span><span class="na">getMessage</span><span class="p">();</span>
<span class="p">}</span>
</code></pre>

<pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.GenesisClient</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.TransactionResult</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.constants.Endpoints</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.constants.Environments</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.requests.financial.giftcards.FashionchequeRequest</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.model.Transaction</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Configuration</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Country</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Currency</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.math.BigDecimal</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">GenesisExample</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">()</span>  <span class="o">{</span>

    <span class="c1">// Create configuration</span>
    <span class="n">Configuration</span> <span class="n">configuration</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Configuration</span><span class="o">(</span><span class="n">Environments</span><span class="o">.</span><span class="na">STAGING</span><span class="o">,</span> <span class="n">Endpoints</span><span class="o">.</span><span class="na">EMERCHANTPAY</span><span class="o">);</span>

    <span class="n">configuration</span><span class="o">.</span><span class="na">setUsername</span><span class="o">(</span><span class="s">"SET_YOUR_USERNAME"</span><span class="o">);</span>
    <span class="n">configuration</span><span class="o">.</span><span class="na">setPassword</span><span class="o">(</span><span class="s">"SET_YOUR_PASSWORD"</span><span class="o">);</span>
    <span class="n">configuration</span><span class="o">.</span><span class="na">setToken</span><span class="o">(</span><span class="s">"SET_YOUR_TOKEN"</span><span class="o">);</span>

    <span class="n">FashionchequeRequest</span> <span class="n">request</span> <span class="o">=</span> <span class="k">new</span> <span class="n">FashionchequeRequest</span><span class="o">();</span>

    <span class="n">request</span><span class="o">.</span><span class="na">setTransactionId</span><span class="o">(</span><span class="s">"43671"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setUsage</span><span class="o">(</span><span class="s">"40208 concert tickets"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setRemoteIp</span><span class="o">(</span><span class="s">"245.253.2.12"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setAmount</span><span class="o">(</span><span class="k">new</span> <span class="n">BigDecimal</span><span class="o">(</span><span class="mi">5000</span><span class="o">));</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCurrency</span><span class="o">(</span><span class="s">"EUR"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCardNumber</span><span class="o">(</span><span class="s">"6046425117120757123"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCvv</span><span class="o">(</span><span class="s">"121839"</span><span class="o">);</span>


    <span class="c1">// Billing Address</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingFirstname</span><span class="o">(</span><span class="s">"Travis"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingLastname</span><span class="o">(</span><span class="s">"Pastrana"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingPrimaryAddress</span><span class="o">(</span><span class="s">"Muster Str. 12"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingZipCode</span><span class="o">(</span><span class="s">"10178"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingCity</span><span class="o">(</span><span class="s">"Los Angeles"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingState</span><span class="o">(</span><span class="s">"CA"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingCountry</span><span class="o">(</span><span class="s">"US"</span><span class="o">);</span>

    <span class="n">GenesisClient</span> <span class="n">client</span> <span class="o">=</span> <span class="k">new</span> <span class="n">GenesisClient</span><span class="o">(</span><span class="n">configuration</span><span class="o">,</span> <span class="n">request</span><span class="o">);</span>
    <span class="n">client</span><span class="o">.</span><span class="na">execute</span><span class="o">();</span>

    <span class="c1">// Parse Payment result</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">client</span><span class="o">.</span><span class="na">getResponse</span><span class="o">());</span>

  <span class="o">}</span>
<span class="o">}</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>curl https://username:password@gate.emerchantpay.net/process/TERMINAL-TOKEN <span class="se">\</span>
   -H <span class="s2">"Content-Type: text/xml"</span> <span class="se">\</span>
   -d <span class="s1">'
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;fashioncheque&lt;/transaction_type&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;usage&gt;40208 concert tickets&lt;/usage&gt;
  &lt;remote_ip&gt;245.253.2.12&lt;/remote_ip&gt;
  &lt;amount&gt;5000&lt;/amount&gt;
  &lt;currency&gt;EUR&lt;/currency&gt;
  &lt;card_number&gt;6046425117120757123&lt;/card_number&gt;
  &lt;cvv&gt;121839&lt;/cvv&gt;
  &lt;billing_address&gt;
    &lt;first_name&gt;Travis&lt;/first_name&gt;
    &lt;last_name&gt;Pastrana&lt;/last_name&gt;
    &lt;address1&gt;Muster Str. 12&lt;/address1&gt;
    &lt;zip_code&gt;10178&lt;/zip_code&gt;
    &lt;city&gt;Los Angeles&lt;/city&gt;
    &lt;state&gt;CA&lt;/state&gt;
    &lt;country&gt;US&lt;/country&gt;
  &lt;/billing_address&gt;
&lt;/payment_transaction&gt;'</span>
</code></pre>

<p><strong>Request Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>required</td>
<td>string(255)</td>
<td>The transaction type: <strong>fashioncheque</strong></td>
</tr>
<tr>
<td>transaction_id</td>
<td>required</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>usage</td>
<td>required*</td>
<td>string(255)</td>
<td>Description of the transaction for later use</td>
</tr>
<tr>
<td>remote_ip</td>
<td>required*</td>
<td>IPv4 address</td>
<td>IPv4 address of customer</td>
</tr>
<tr>
<td>amount</td>
<td>required</td>
<td>integer &gt; 0</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>required</td>
<td>string(3)</td>
<td>Only USD and EUR</td>
</tr>
<tr>
<td>card_number</td>
<td>required</td>
<td>string(19..21)</td>
<td>Gift card number</td>
</tr>
<tr>
<td>cvv</td>
<td>required*</td>
<td>5 to 8 digits</td>
<td>Verification code of the gift card, requirement is based on terminal configuration</td>
</tr>
<tr>
<td>token</td>
<td>optional</td>
<td>string(36)</td>
<td>See <a href="#tokenization">Tokenization</a> for more details. If present, the cardholder parameters can be omitted</td>
</tr>
<tr>
<td><strong>billing_address</strong></td>
<td>required*</td>
<td></td>
<td>See <a href="#required-vs-optional-api-params">Required vs Optional API params</a> for details</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;first_name</td>
<td>required*</td>
<td>string(255)</td>
<td>Customer first name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;last_name</td>
<td>required*</td>
<td>string(255)</td>
<td>Customer last name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address1</td>
<td>required*</td>
<td>string(255)</td>
<td>Primary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address2</td>
<td>required*</td>
<td>string(255)</td>
<td>Secondary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;zip_code</td>
<td>required*</td>
<td>string</td>
<td>ZIP code</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;city</td>
<td>required*</td>
<td>string(255)</td>
<td>City</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;state</td>
<td>required*</td>
<td>string(2)</td>
<td>State code in <a href="https://en.wikipedia.org/wiki/ISO_3166-2">ISO 3166-2</a>, required for USA and Canada</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;country</td>
<td>required*</td>
<td>string(2)</td>
<td>Country code in <a href="https://www.iso.org/iso-3166-country-codes.html">ISO 3166</a></td>
</tr>
<tr>
<td><strong>shipping_address</strong></td>
<td>optional</td>
<td></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;first_name</td>
<td>optional</td>
<td>string(255)</td>
<td>Customer first name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;last_name</td>
<td>optional</td>
<td>string(255)</td>
<td>Customer last name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address1</td>
<td>optional</td>
<td>string(255)</td>
<td>Primary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address2</td>
<td>optional</td>
<td>string(255)</td>
<td>Secondary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;zip_code</td>
<td>optional</td>
<td>string</td>
<td>ZIP code</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;city</td>
<td>optional</td>
<td>string(255)</td>
<td>City</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;state</td>
<td>optional</td>
<td>string(2)</td>
<td>State code in <a href="https://en.wikipedia.org/wiki/ISO_3166-2">ISO 3166-2</a>, required for USA and Canada</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;country</td>
<td>optional</td>
<td>string(2)</td>
<td>Country code in <a href="https://www.iso.org/iso-3166-country-codes.html">ISO 3166</a></td>
</tr>
<tr>
<td><strong>dynamic_descriptor_params</strong></td>
<td>optional</td>
<td></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;merchant_name</td>
<td>optional</td>
<td>string(25)</td>
<td>Allows to dynamically override the charge descriptor</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;merchant_city</td>
<td>optional</td>
<td>string(13)</td>
<td>Allows to dynamically override the merchant phone number</td>
</tr>
</tbody></table>

<p><code>required* = conditionally required</code></p>

<blockquote>
<p>Successful Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>stdClass Object
(
    [transaction_type] =&gt; fashioncheque
    [status] =&gt; pending_async
    [mode] =&gt; live
    [transaction_id] =&gt; 43671
    [unique_id] =&gt; 406bc1b340472db4dbbba4b749850234
    [technical_message] =&gt; Transaction successful!
    [message] =&gt; Transaction successful!
    [timestamp] =&gt; DateTime Object
        (
            [date] =&gt; 2019-03-14 12:06:01.000000
            [timezone_type] =&gt; 2
            [timezone] =&gt; Z
        )
    [descriptor] =&gt; Descriptor one
    [amount] =&gt; 2000
    [currency] =&gt; EUR
    [split_payment] =&gt; initiated
    [leftover_amount] =&gt; 3000
    [sent_to_acquirer] =&gt; true
)
</code></pre>

<pre class="highlight java tab-java"><code><span class="o">&lt;</span><span class="n">payment_response</span> <span class="n">content</span><span class="o">=[</span>
    <span class="o">&lt;</span><span class="n">transaction_type</span> <span class="n">content</span><span class="o">=[</span><span class="n">fashioncheque</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">status</span> <span class="n">content</span><span class="o">=[</span><span class="n">pending_async</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">mode</span> <span class="n">content</span><span class="o">=[</span><span class="n">live</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">transaction_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">43671</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">unique_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">406</span><span class="n">bc1b340472db4dbbba4b749850234</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">technical_message</span> <span class="n">content</span><span class="o">=[</span><span class="n">Transaction</span> <span class="n">successful</span><span class="o">!]&gt;</span>
    <span class="o">&lt;</span><span class="n">message</span> <span class="n">content</span><span class="o">=[</span><span class="n">Transaction</span> <span class="n">successful</span><span class="o">!]&gt;</span>
    <span class="o">&lt;</span><span class="n">timestamp</span> <span class="n">content</span><span class="o">=[</span><span class="mi">2019</span><span class="o">-</span><span class="mo">03</span><span class="o">-</span><span class="mi">14</span><span class="nl">T12:</span><span class="mo">06</span><span class="o">:</span><span class="mo">01</span><span class="n">Z</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">descriptor</span> <span class="n">content</span><span class="o">=[</span><span class="n">Descriptor</span> <span class="n">one</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">amount</span> <span class="n">content</span><span class="o">=[</span><span class="mi">2000</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">currency</span> <span class="n">content</span><span class="o">=[</span><span class="n">EUR</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">split_payment</span> <span class="n">content</span><span class="o">=[</span><span class="n">initiated</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">leftover_amount</span> <span class="n">content</span><span class="o">=[</span><span class="mi">3000</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">sent_to_acquirer</span> <span class="n">content</span><span class="o">=[</span><span class="kc">true</span><span class="o">]&gt;</span>
<span class="o">]&gt;</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;fashioncheque&lt;/transaction_type&gt;
  &lt;status&gt;pending_async&lt;/status&gt;
  &lt;mode&gt;live&lt;/mode&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;unique_id&gt;406bc1b340472db4dbbba4b749850234&lt;/unique_id&gt;
  &lt;technical_message&gt;Transaction successful!&lt;/technical_message&gt;
  &lt;message&gt;Transaction successful!&lt;/message&gt;
  &lt;timestamp&gt;2019-03-14T12:06:01Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;amount&gt;2000&lt;/amount&gt;
  &lt;currency&gt;EUR&lt;/currency&gt;
  &lt;split_payment&gt;initiated&lt;/split_payment&gt;
  &lt;leftover_amount&gt;3000&lt;/leftover_amount&gt;
  &lt;sent_to_acquirer&gt;true&lt;/sent_to_acquirer&gt;
&lt;/payment_transaction&gt;
</code></pre>

<p><strong>Successful Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>The transaction type</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>transaction_id</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>unique_id</td>
<td>string(32)</td>
<td>Unique id defined by gate (must later be used if capturing, voiding or refunding a transaction)</td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
<tr>
<td>message</td>
<td>string(255)</td>
<td>Human readable error message which can be displayed to users.</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when the transaction was processed in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Combined date and time</a> e.g. 2007-08- 30T17:46:11Z</td>
</tr>
<tr>
<td>descriptor</td>
<td>string</td>
<td>Static descriptor MID info as configured on the gateway</td>
</tr>
<tr>
<td>amount</td>
<td>integer</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>split_payment</td>
<td>string</td>
<td>Split payment status for this transaction. Should be ’initiated’.</td>
</tr>
<tr>
<td>leftover_amount</td>
<td>integer</td>
<td>Leftover amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency Handling</a> for details</td>
</tr>
<tr>
<td>sent_to_acquirer</td>
<td>string</td>
<td>&quot;true&quot; or &quot;false&quot;</td>
</tr>
<tr>
<td>dynamic_descriptor_params</td>
<td>section</td>
<td>Optional, returned only if dynamic desc params are submitted on the API. Note here that the formatted dyn desc params are returned - as they would be submitted to the schemes for settlement.</td>
</tr>
</tbody></table>

<blockquote>
<p>Error Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>stdClass Object
(
    [transaction_type] =&gt; fashioncheque
    [status] =&gt; error
    [mode] =&gt; live
    [transaction_id] =&gt; 43671
    [unique_id] =&gt; 44177a21403427eb96664a6d7e5d5d48
    [code] =&gt; 340
    [technical_message] =&gt; Transaction_id is invalid!
    [message] =&gt; Transaction_id is invalid!
    [timestamp] =&gt; DateTime Object
        (
            [date] =&gt; 2019-03-14 12:06:01.000000
            [timezone_type] =&gt; 2
            [timezone] =&gt; Z
        )
    [descriptor] =&gt; Descriptor one
    [amount] =&gt; 5000
    [currency] =&gt; EUR
    [sent_to_acquirer] =&gt; false
)
</code></pre>

<pre class="highlight java tab-java"><code><span class="o">&lt;</span><span class="n">payment_response</span> <span class="n">content</span><span class="o">=[</span>
    <span class="o">&lt;</span><span class="n">transaction_type</span> <span class="n">content</span><span class="o">=[</span><span class="n">fashioncheque</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">status</span> <span class="n">content</span><span class="o">=[</span><span class="n">error</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">mode</span> <span class="n">content</span><span class="o">=[</span><span class="n">live</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">transaction_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">43671</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">unique_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">44177</span><span class="n">a21403427eb96664a6d7e5d5d48</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">code</span> <span class="n">content</span><span class="o">=[</span><span class="mi">340</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">technical_message</span> <span class="n">content</span><span class="o">=[</span><span class="n">Transaction_id</span> <span class="n">is</span> <span class="n">invalid</span><span class="o">!]&gt;</span>
    <span class="o">&lt;</span><span class="n">message</span> <span class="n">content</span><span class="o">=[</span><span class="n">Transaction_id</span> <span class="n">is</span> <span class="n">invalid</span><span class="o">!]&gt;</span>
    <span class="o">&lt;</span><span class="n">timestamp</span> <span class="n">content</span><span class="o">=[</span><span class="mi">2019</span><span class="o">-</span><span class="mo">03</span><span class="o">-</span><span class="mi">14</span><span class="nl">T12:</span><span class="mo">06</span><span class="o">:</span><span class="mo">01</span><span class="n">Z</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">descriptor</span> <span class="n">content</span><span class="o">=[</span><span class="n">Descriptor</span> <span class="n">one</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">amount</span> <span class="n">content</span><span class="o">=[</span><span class="mi">5000</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">currency</span> <span class="n">content</span><span class="o">=[</span><span class="n">EUR</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">sent_to_acquirer</span> <span class="n">content</span><span class="o">=[</span><span class="kc">false</span><span class="o">]&gt;</span>
<span class="o">]&gt;</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;fashioncheque&lt;/transaction_type&gt;
  &lt;status&gt;error&lt;/status&gt;
  &lt;mode&gt;live&lt;/mode&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;code&gt;340&lt;/code&gt;
  &lt;technical_message&gt;Transaction_id is invalid!&lt;/technical_message&gt;
  &lt;message&gt;Transaction_id is invalid!&lt;/message&gt;
  &lt;timestamp&gt;2019-03-14T12:06:01Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;amount&gt;5000&lt;/amount&gt;
  &lt;currency&gt;EUR&lt;/currency&gt;
  &lt;sent_to_acquirer&gt;false&lt;/sent_to_acquirer&gt;
&lt;/payment_transaction&gt;
</code></pre>

<p><strong>Error Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>The transaction type</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>transaction_id</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>unique_id</td>
<td>string(32)</td>
<td>Unique id defined by gate (must later be used if capturing, voiding or refunding a transaction)</td>
</tr>
<tr>
<td>code</td>
<td>integer</td>
<td>Error code according to <a href="#error-code-table">Error code table</a></td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
<tr>
<td>message</td>
<td>string(255)</td>
<td>Human readable error message which can be displayed to users.</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when the transaction was processed in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Combined date and time</a> e.g. 2007-08- 30T17:46:11Z</td>
</tr>
<tr>
<td>descriptor</td>
<td>string</td>
<td>Static descriptor MID info as configured on the gateway</td>
</tr>
<tr>
<td>amount</td>
<td>integer</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>sent_to_acquirer</td>
<td>string</td>
<td>&quot;true&quot; or &quot;false&quot;</td>
</tr>
<tr>
<td>dynamic_descriptor_params</td>
<td>section</td>
<td>Optional, returned only if dynamic desc params are submitted on the API. Note here that the formatted dyn desc params are returned - as they would be submitted to the schemes for settlement.</td>
</tr>
</tbody></table>

<p><strong>Example for continued split payment transaction:</strong></p>

<blockquote>
<p>Request</p>
</blockquote>

<pre class="highlight php tab-php"><code><span class="cp">&lt;?php</span>

<span class="c1">// Load the pre-configured ini file...
</span><span class="nx">\Genesis\Config</span><span class="o">::</span><span class="na">loadSettings</span><span class="p">(</span><span class="s1">'/path/to/config.ini'</span><span class="p">);</span>

<span class="nv">$genesis</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Genesis</span><span class="p">(</span><span class="s1">'Financial\GiftCards\Intersolve'</span><span class="p">);</span>
<span class="nv">$request</span> <span class="o">=</span> <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">request</span><span class="p">();</span>

<span class="nv">$request</span>
  <span class="o">-&gt;</span><span class="na">setTransactionId</span><span class="p">(</span><span class="s1">'43671'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setUsage</span><span class="p">(</span><span class="s1">'40208 concert tickets'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setRemoteIp</span><span class="p">(</span><span class="s1">'245.253.2.12'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setReferenceId</span><span class="p">(</span><span class="s1">'406bc1b340472db4dbbba4b749850234'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setAmount</span><span class="p">(</span><span class="s1">'3000'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCurrency</span><span class="p">(</span><span class="s1">'EUR'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCardNumber</span><span class="p">(</span><span class="s1">'7000001163991388834'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCvv</span><span class="p">(</span><span class="s1">'944062'</span><span class="p">)</span>


  <span class="c1">// Billing Address
</span>  <span class="o">-&gt;</span><span class="na">setBillingFirstName</span><span class="p">(</span><span class="s1">'Travis'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingLastName</span><span class="p">(</span><span class="s1">'Pastrana'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingAddress1</span><span class="p">(</span><span class="s1">'Muster Str. 12'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingZipCode</span><span class="p">(</span><span class="s1">'10178'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingCity</span><span class="p">(</span><span class="s1">'Los Angeles'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingState</span><span class="p">(</span><span class="s1">'CA'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingCountry</span><span class="p">(</span><span class="s1">'US'</span><span class="p">);</span>

<span class="k">try</span> <span class="p">{</span>
    <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">execute</span><span class="p">();</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">response</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">getResponseObject</span><span class="p">();</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">\Exception</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$e</span><span class="o">-&gt;</span><span class="na">getMessage</span><span class="p">();</span>
<span class="p">}</span>
</code></pre>

<pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.GenesisClient</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.TransactionResult</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.constants.Endpoints</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.constants.Environments</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.requests.financial.giftcards.IntersolveRequest</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.model.Transaction</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Configuration</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Country</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Currency</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.math.BigDecimal</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">GenesisExample</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">()</span>  <span class="o">{</span>

    <span class="c1">// Create configuration</span>
    <span class="n">Configuration</span> <span class="n">configuration</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Configuration</span><span class="o">(</span><span class="n">Environments</span><span class="o">.</span><span class="na">STAGING</span><span class="o">,</span> <span class="n">Endpoints</span><span class="o">.</span><span class="na">EMERCHANTPAY</span><span class="o">);</span>

    <span class="n">configuration</span><span class="o">.</span><span class="na">setUsername</span><span class="o">(</span><span class="s">"SET_YOUR_USERNAME"</span><span class="o">);</span>
    <span class="n">configuration</span><span class="o">.</span><span class="na">setPassword</span><span class="o">(</span><span class="s">"SET_YOUR_PASSWORD"</span><span class="o">);</span>
    <span class="n">configuration</span><span class="o">.</span><span class="na">setToken</span><span class="o">(</span><span class="s">"SET_YOUR_TOKEN"</span><span class="o">);</span>

    <span class="n">IntersolveRequest</span> <span class="n">request</span> <span class="o">=</span> <span class="k">new</span> <span class="n">IntersolveRequest</span><span class="o">();</span>

    <span class="n">request</span><span class="o">.</span><span class="na">setTransactionId</span><span class="o">(</span><span class="s">"43671"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setUsage</span><span class="o">(</span><span class="s">"40208 concert tickets"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setRemoteIp</span><span class="o">(</span><span class="s">"245.253.2.12"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setReferenceId</span><span class="o">(</span><span class="s">"406bc1b340472db4dbbba4b749850234"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setAmount</span><span class="o">(</span><span class="k">new</span> <span class="n">BigDecimal</span><span class="o">(</span><span class="mi">3000</span><span class="o">));</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCurrency</span><span class="o">(</span><span class="s">"EUR"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCardNumber</span><span class="o">(</span><span class="s">"7000001163991388834"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCvv</span><span class="o">(</span><span class="s">"944062"</span><span class="o">);</span>


    <span class="c1">// Billing Address</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingFirstname</span><span class="o">(</span><span class="s">"Travis"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingLastname</span><span class="o">(</span><span class="s">"Pastrana"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingPrimaryAddress</span><span class="o">(</span><span class="s">"Muster Str. 12"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingZipCode</span><span class="o">(</span><span class="s">"10178"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingCity</span><span class="o">(</span><span class="s">"Los Angeles"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingState</span><span class="o">(</span><span class="s">"CA"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingCountry</span><span class="o">(</span><span class="s">"US"</span><span class="o">);</span>

    <span class="n">GenesisClient</span> <span class="n">client</span> <span class="o">=</span> <span class="k">new</span> <span class="n">GenesisClient</span><span class="o">(</span><span class="n">configuration</span><span class="o">,</span> <span class="n">request</span><span class="o">);</span>
    <span class="n">client</span><span class="o">.</span><span class="na">execute</span><span class="o">();</span>

    <span class="c1">// Parse Payment result</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">client</span><span class="o">.</span><span class="na">getResponse</span><span class="o">());</span>

  <span class="o">}</span>
<span class="o">}</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>curl https://username:password@gate.emerchantpay.net/process/TERMINAL-TOKEN <span class="se">\</span>
   -H <span class="s2">"Content-Type: text/xml"</span> <span class="se">\</span>
   -d <span class="s1">'
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;intersolve&lt;/transaction_type&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;usage&gt;40208 concert tickets&lt;/usage&gt;
  &lt;remote_ip&gt;245.253.2.12&lt;/remote_ip&gt;
  &lt;reference_id&gt;406bc1b340472db4dbbba4b749850234&lt;/reference_id&gt;
  &lt;amount&gt;3000&lt;/amount&gt;
  &lt;currency&gt;EUR&lt;/currency&gt;
  &lt;card_number&gt;7000001163991388834&lt;/card_number&gt;
  &lt;cvv&gt;944062&lt;/cvv&gt;
  &lt;billing_address&gt;
    &lt;first_name&gt;Travis&lt;/first_name&gt;
    &lt;last_name&gt;Pastrana&lt;/last_name&gt;
    &lt;address1&gt;Muster Str. 12&lt;/address1&gt;
    &lt;zip_code&gt;10178&lt;/zip_code&gt;
    &lt;city&gt;Los Angeles&lt;/city&gt;
    &lt;state&gt;CA&lt;/state&gt;
    &lt;country&gt;US&lt;/country&gt;
  &lt;/billing_address&gt;
&lt;/payment_transaction&gt;'</span>
</code></pre>

<p><strong>Request Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>required</td>
<td>string(255)</td>
<td>The transaction type: <strong>intersolve</strong></td>
</tr>
<tr>
<td>transaction_id</td>
<td>required</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>usage</td>
<td>required*</td>
<td>string(255)</td>
<td>Description of the transaction for later use</td>
</tr>
<tr>
<td>remote_ip</td>
<td>required*</td>
<td>IPv4 address</td>
<td>IPv4 address of customer</td>
</tr>
<tr>
<td>reference_id</td>
<td>required</td>
<td>string(32)</td>
<td>The ’unique id’ of the initial split payment transaction.</td>
</tr>
<tr>
<td>amount</td>
<td>required</td>
<td>integer &gt; 0</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>required</td>
<td>string(3)</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>card_number</td>
<td>required</td>
<td>string(19..21)</td>
<td>Gift card number</td>
</tr>
<tr>
<td>cvv</td>
<td>required*</td>
<td>5 to 8 digits</td>
<td>Verification code of the gift card, requirement is based on terminal configuration</td>
</tr>
<tr>
<td>token</td>
<td>optional</td>
<td>string(36)</td>
<td>See <a href="#tokenization">Tokenization</a> for more details. If present, the cardholder parameters can be omitted</td>
</tr>
<tr>
<td><strong>billing_address</strong></td>
<td>required*</td>
<td></td>
<td>See <a href="#required-vs-optional-api-params">Required vs Optional API params</a> for details</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;first_name</td>
<td>required*</td>
<td>string(255)</td>
<td>Customer first name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;last_name</td>
<td>required*</td>
<td>string(255)</td>
<td>Customer last name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address1</td>
<td>required*</td>
<td>string(255)</td>
<td>Primary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address2</td>
<td>required*</td>
<td>string(255)</td>
<td>Secondary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;zip_code</td>
<td>required*</td>
<td>string</td>
<td>ZIP code</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;city</td>
<td>required*</td>
<td>string(255)</td>
<td>City</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;state</td>
<td>required*</td>
<td>string(2)</td>
<td>State code in <a href="https://en.wikipedia.org/wiki/ISO_3166-2">ISO 3166-2</a>, required for USA and Canada</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;country</td>
<td>required*</td>
<td>string(2)</td>
<td>Country code in <a href="https://www.iso.org/iso-3166-country-codes.html">ISO 3166</a></td>
</tr>
<tr>
<td><strong>shipping_address</strong></td>
<td>optional</td>
<td></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;first_name</td>
<td>optional</td>
<td>string(255)</td>
<td>Customer first name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;last_name</td>
<td>optional</td>
<td>string(255)</td>
<td>Customer last name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address1</td>
<td>optional</td>
<td>string(255)</td>
<td>Primary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address2</td>
<td>optional</td>
<td>string(255)</td>
<td>Secondary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;zip_code</td>
<td>optional</td>
<td>string</td>
<td>ZIP code</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;city</td>
<td>optional</td>
<td>string(255)</td>
<td>City</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;state</td>
<td>optional</td>
<td>string(2)</td>
<td>State code in <a href="https://en.wikipedia.org/wiki/ISO_3166-2">ISO 3166-2</a>, required for USA and Canada</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;country</td>
<td>optional</td>
<td>string(2)</td>
<td>Country code in <a href="https://www.iso.org/iso-3166-country-codes.html">ISO 3166</a></td>
</tr>
<tr>
<td><strong>dynamic_descriptor_params</strong></td>
<td>optional</td>
<td></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;merchant_name</td>
<td>optional</td>
<td>string(25)</td>
<td>Allows to dynamically override the charge descriptor</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;merchant_city</td>
<td>optional</td>
<td>string(13)</td>
<td>Allows to dynamically override the merchant phone number</td>
</tr>
</tbody></table>

<p><code>required* = conditionally required</code></p>

<blockquote>
<p>Successful Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>stdClass Object
(
    [transaction_type] =&gt; intersolve
    [status] =&gt; pending_async
    [mode] =&gt; live
    [transaction_id] =&gt; 43671
    [unique_id] =&gt; 44177a21403427eb96664a6d7e5d5d48
    [technical_message] =&gt; Transaction successful!
    [message] =&gt; Transaction successful!
    [timestamp] =&gt; DateTime Object
        (
            [date] =&gt; 2019-03-14 12:06:01.000000
            [timezone_type] =&gt; 2
            [timezone] =&gt; Z
        )
    [descriptor] =&gt; Descriptor one
    [amount] =&gt; 2500
    [currency] =&gt; EUR
    [split_payment] =&gt; continued
    [leftover_amount] =&gt; 500
    [sent_to_acquirer] =&gt; true
)
</code></pre>

<pre class="highlight java tab-java"><code><span class="o">&lt;</span><span class="n">payment_response</span> <span class="n">content</span><span class="o">=[</span>
    <span class="o">&lt;</span><span class="n">transaction_type</span> <span class="n">content</span><span class="o">=[</span><span class="n">intersolve</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">status</span> <span class="n">content</span><span class="o">=[</span><span class="n">pending_async</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">mode</span> <span class="n">content</span><span class="o">=[</span><span class="n">live</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">transaction_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">43671</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">unique_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">44177</span><span class="n">a21403427eb96664a6d7e5d5d48</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">technical_message</span> <span class="n">content</span><span class="o">=[</span><span class="n">Transaction</span> <span class="n">successful</span><span class="o">!]&gt;</span>
    <span class="o">&lt;</span><span class="n">message</span> <span class="n">content</span><span class="o">=[</span><span class="n">Transaction</span> <span class="n">successful</span><span class="o">!]&gt;</span>
    <span class="o">&lt;</span><span class="n">timestamp</span> <span class="n">content</span><span class="o">=[</span><span class="mi">2019</span><span class="o">-</span><span class="mo">03</span><span class="o">-</span><span class="mi">14</span><span class="nl">T12:</span><span class="mo">06</span><span class="o">:</span><span class="mo">01</span><span class="n">Z</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">descriptor</span> <span class="n">content</span><span class="o">=[</span><span class="n">Descriptor</span> <span class="n">one</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">amount</span> <span class="n">content</span><span class="o">=[</span><span class="mi">2500</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">currency</span> <span class="n">content</span><span class="o">=[</span><span class="n">EUR</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">split_payment</span> <span class="n">content</span><span class="o">=[</span><span class="n">continued</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">leftover_amount</span> <span class="n">content</span><span class="o">=[</span><span class="mi">500</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">sent_to_acquirer</span> <span class="n">content</span><span class="o">=[</span><span class="kc">true</span><span class="o">]&gt;</span>
<span class="o">]&gt;</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;intersolve&lt;/transaction_type&gt;
  &lt;status&gt;pending_async&lt;/status&gt;
  &lt;mode&gt;live&lt;/mode&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;technical_message&gt;Transaction successful!&lt;/technical_message&gt;
  &lt;message&gt;Transaction successful!&lt;/message&gt;
  &lt;timestamp&gt;2019-03-14T12:06:01Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;amount&gt;2500&lt;/amount&gt;
  &lt;currency&gt;EUR&lt;/currency&gt;
  &lt;split_payment&gt;continued&lt;/split_payment&gt;
  &lt;leftover_amount&gt;500&lt;/leftover_amount&gt;
  &lt;sent_to_acquirer&gt;true&lt;/sent_to_acquirer&gt;
&lt;/payment_transaction&gt;
</code></pre>

<p><strong>Successful Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>The transaction type</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>transaction_id</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>unique_id</td>
<td>string(32)</td>
<td>Unique id defined by gate (must later be used if capturing, voiding or refunding a transaction)</td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
<tr>
<td>message</td>
<td>string(255)</td>
<td>Human readable error message which can be displayed to users.</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when the transaction was processed in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Combined date and time</a> e.g. 2007-08- 30T17:46:11Z</td>
</tr>
<tr>
<td>descriptor</td>
<td>string</td>
<td>Static descriptor MID info as configured on the gateway</td>
</tr>
<tr>
<td>amount</td>
<td>integer</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>split_payment</td>
<td>string</td>
<td>Split payment status for this transaction. Should be ’continued’.</td>
</tr>
<tr>
<td>leftover_amount</td>
<td>integer</td>
<td>Leftover amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency Handling</a> for details</td>
</tr>
<tr>
<td>sent_to_acquirer</td>
<td>string</td>
<td>&quot;true&quot; or &quot;false&quot;</td>
</tr>
<tr>
<td>dynamic_descriptor_params</td>
<td>section</td>
<td>Optional, returned only if dynamic desc params are submitted on the API. Note here that the formatted dyn desc params are returned - as they would be submitted to the schemes for settlement.</td>
</tr>
</tbody></table>

<blockquote>
<p>Error Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>stdClass Object
(
    [transaction_type] =&gt; intersolve
    [status] =&gt; error
    [mode] =&gt; live
    [transaction_id] =&gt; 43671
    [unique_id] =&gt; 44177a21403427eb96664a6d7e5d5d48
    [code] =&gt; 340
    [technical_message] =&gt; Transaction_id is invalid!
    [message] =&gt; Transaction_id is invalid!
    [timestamp] =&gt; DateTime Object
        (
            [date] =&gt; 2019-03-14 12:06:01.000000
            [timezone_type] =&gt; 2
            [timezone] =&gt; Z
        )
    [descriptor] =&gt; Descriptor one
    [amount] =&gt; 3000
    [currency] =&gt; EUR
    [sent_to_acquirer] =&gt; false
)
</code></pre>

<pre class="highlight java tab-java"><code><span class="o">&lt;</span><span class="n">payment_response</span> <span class="n">content</span><span class="o">=[</span>
    <span class="o">&lt;</span><span class="n">transaction_type</span> <span class="n">content</span><span class="o">=[</span><span class="n">intersolve</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">status</span> <span class="n">content</span><span class="o">=[</span><span class="n">error</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">mode</span> <span class="n">content</span><span class="o">=[</span><span class="n">live</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">transaction_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">43671</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">unique_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">44177</span><span class="n">a21403427eb96664a6d7e5d5d48</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">code</span> <span class="n">content</span><span class="o">=[</span><span class="mi">340</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">technical_message</span> <span class="n">content</span><span class="o">=[</span><span class="n">Transaction_id</span> <span class="n">is</span> <span class="n">invalid</span><span class="o">!]&gt;</span>
    <span class="o">&lt;</span><span class="n">message</span> <span class="n">content</span><span class="o">=[</span><span class="n">Transaction_id</span> <span class="n">is</span> <span class="n">invalid</span><span class="o">!]&gt;</span>
    <span class="o">&lt;</span><span class="n">timestamp</span> <span class="n">content</span><span class="o">=[</span><span class="mi">2019</span><span class="o">-</span><span class="mo">03</span><span class="o">-</span><span class="mi">14</span><span class="nl">T12:</span><span class="mo">06</span><span class="o">:</span><span class="mo">01</span><span class="n">Z</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">descriptor</span> <span class="n">content</span><span class="o">=[</span><span class="n">Descriptor</span> <span class="n">one</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">amount</span> <span class="n">content</span><span class="o">=[</span><span class="mi">3000</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">currency</span> <span class="n">content</span><span class="o">=[</span><span class="n">EUR</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">sent_to_acquirer</span> <span class="n">content</span><span class="o">=[</span><span class="kc">false</span><span class="o">]&gt;</span>
<span class="o">]&gt;</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;intersolve&lt;/transaction_type&gt;
  &lt;status&gt;error&lt;/status&gt;
  &lt;mode&gt;live&lt;/mode&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;code&gt;340&lt;/code&gt;
  &lt;technical_message&gt;Transaction_id is invalid!&lt;/technical_message&gt;
  &lt;message&gt;Transaction_id is invalid!&lt;/message&gt;
  &lt;timestamp&gt;2019-03-14T12:06:01Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;amount&gt;3000&lt;/amount&gt;
  &lt;currency&gt;EUR&lt;/currency&gt;
  &lt;sent_to_acquirer&gt;false&lt;/sent_to_acquirer&gt;
&lt;/payment_transaction&gt;
</code></pre>

<p><strong>Error Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>The transaction type</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>transaction_id</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>unique_id</td>
<td>string(32)</td>
<td>Unique id defined by gate (must later be used if capturing, voiding or refunding a transaction)</td>
</tr>
<tr>
<td>code</td>
<td>integer</td>
<td>Error code according to <a href="#error-code-table">Error code table</a></td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
<tr>
<td>message</td>
<td>string(255)</td>
<td>Human readable error message which can be displayed to users.</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when the transaction was processed in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Combined date and time</a> e.g. 2007-08- 30T17:46:11Z</td>
</tr>
<tr>
<td>descriptor</td>
<td>string</td>
<td>Static descriptor MID info as configured on the gateway</td>
</tr>
<tr>
<td>amount</td>
<td>integer</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>sent_to_acquirer</td>
<td>string</td>
<td>&quot;true&quot; or &quot;false&quot;</td>
</tr>
<tr>
<td>dynamic_descriptor_params</td>
<td>section</td>
<td>Optional, returned only if dynamic desc params are submitted on the API. Note here that the formatted dyn desc params are returned - as they would be submitted to the schemes for settlement.</td>
</tr>
</tbody></table>

<p><strong>Example for finalized split payment transaction:</strong></p>

<blockquote>
<p>Request</p>
</blockquote>

<pre class="highlight php tab-php"><code><span class="cp">&lt;?php</span>

<span class="c1">// Load the pre-configured ini file...
</span><span class="nx">\Genesis\Config</span><span class="o">::</span><span class="na">loadSettings</span><span class="p">(</span><span class="s1">'/path/to/config.ini'</span><span class="p">);</span>

<span class="nv">$genesis</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Genesis</span><span class="p">(</span><span class="s1">'Financial\GiftCards\Intersolve'</span><span class="p">);</span>
<span class="nv">$request</span> <span class="o">=</span> <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">request</span><span class="p">();</span>

<span class="nv">$request</span>
  <span class="o">-&gt;</span><span class="na">setTransactionId</span><span class="p">(</span><span class="s1">'43671'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setUsage</span><span class="p">(</span><span class="s1">'40208 concert tickets'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setRemoteIp</span><span class="p">(</span><span class="s1">'245.253.2.12'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setReferenceId</span><span class="p">(</span><span class="s1">'406bc1b340472db4dbbba4b749850234'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setAmount</span><span class="p">(</span><span class="s1">'500'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCurrency</span><span class="p">(</span><span class="s1">'EUR'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCardNumber</span><span class="p">(</span><span class="s1">'7000001163991388834'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCvv</span><span class="p">(</span><span class="s1">'944062'</span><span class="p">)</span>


  <span class="c1">// Billing Address
</span>  <span class="o">-&gt;</span><span class="na">setBillingFirstName</span><span class="p">(</span><span class="s1">'Travis'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingLastName</span><span class="p">(</span><span class="s1">'Pastrana'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingAddress1</span><span class="p">(</span><span class="s1">'Muster Str. 12'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingZipCode</span><span class="p">(</span><span class="s1">'10178'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingCity</span><span class="p">(</span><span class="s1">'Los Angeles'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingState</span><span class="p">(</span><span class="s1">'CA'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingCountry</span><span class="p">(</span><span class="s1">'US'</span><span class="p">);</span>

<span class="k">try</span> <span class="p">{</span>
    <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">execute</span><span class="p">();</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">response</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">getResponseObject</span><span class="p">();</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">\Exception</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$e</span><span class="o">-&gt;</span><span class="na">getMessage</span><span class="p">();</span>
<span class="p">}</span>
</code></pre>

<pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.GenesisClient</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.TransactionResult</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.constants.Endpoints</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.constants.Environments</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.requests.financial.giftcards.IntersolveRequest</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.model.Transaction</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Configuration</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Country</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Currency</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.math.BigDecimal</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">GenesisExample</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">()</span>  <span class="o">{</span>

    <span class="c1">// Create configuration</span>
    <span class="n">Configuration</span> <span class="n">configuration</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Configuration</span><span class="o">(</span><span class="n">Environments</span><span class="o">.</span><span class="na">STAGING</span><span class="o">,</span> <span class="n">Endpoints</span><span class="o">.</span><span class="na">EMERCHANTPAY</span><span class="o">);</span>

    <span class="n">configuration</span><span class="o">.</span><span class="na">setUsername</span><span class="o">(</span><span class="s">"SET_YOUR_USERNAME"</span><span class="o">);</span>
    <span class="n">configuration</span><span class="o">.</span><span class="na">setPassword</span><span class="o">(</span><span class="s">"SET_YOUR_PASSWORD"</span><span class="o">);</span>
    <span class="n">configuration</span><span class="o">.</span><span class="na">setToken</span><span class="o">(</span><span class="s">"SET_YOUR_TOKEN"</span><span class="o">);</span>

    <span class="n">IntersolveRequest</span> <span class="n">request</span> <span class="o">=</span> <span class="k">new</span> <span class="n">IntersolveRequest</span><span class="o">();</span>

    <span class="n">request</span><span class="o">.</span><span class="na">setTransactionId</span><span class="o">(</span><span class="s">"43671"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setUsage</span><span class="o">(</span><span class="s">"40208 concert tickets"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setRemoteIp</span><span class="o">(</span><span class="s">"245.253.2.12"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setReferenceId</span><span class="o">(</span><span class="s">"406bc1b340472db4dbbba4b749850234"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setAmount</span><span class="o">(</span><span class="k">new</span> <span class="n">BigDecimal</span><span class="o">(</span><span class="mi">500</span><span class="o">));</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCurrency</span><span class="o">(</span><span class="s">"EUR"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCardNumber</span><span class="o">(</span><span class="s">"7000001163991388834"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCvv</span><span class="o">(</span><span class="s">"944062"</span><span class="o">);</span>


    <span class="c1">// Billing Address</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingFirstname</span><span class="o">(</span><span class="s">"Travis"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingLastname</span><span class="o">(</span><span class="s">"Pastrana"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingPrimaryAddress</span><span class="o">(</span><span class="s">"Muster Str. 12"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingZipCode</span><span class="o">(</span><span class="s">"10178"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingCity</span><span class="o">(</span><span class="s">"Los Angeles"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingState</span><span class="o">(</span><span class="s">"CA"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingCountry</span><span class="o">(</span><span class="s">"US"</span><span class="o">);</span>

    <span class="n">GenesisClient</span> <span class="n">client</span> <span class="o">=</span> <span class="k">new</span> <span class="n">GenesisClient</span><span class="o">(</span><span class="n">configuration</span><span class="o">,</span> <span class="n">request</span><span class="o">);</span>
    <span class="n">client</span><span class="o">.</span><span class="na">execute</span><span class="o">();</span>

    <span class="c1">// Parse Payment result</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">client</span><span class="o">.</span><span class="na">getResponse</span><span class="o">());</span>

  <span class="o">}</span>
<span class="o">}</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>curl https://username:password@gate.emerchantpay.net/process/TERMINAL-TOKEN <span class="se">\</span>
   -H <span class="s2">"Content-Type: text/xml"</span> <span class="se">\</span>
   -d <span class="s1">'
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;intersolve&lt;/transaction_type&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;usage&gt;40208 concert tickets&lt;/usage&gt;
  &lt;remote_ip&gt;245.253.2.12&lt;/remote_ip&gt;
  &lt;reference_id&gt;406bc1b340472db4dbbba4b749850234&lt;/reference_id&gt;
  &lt;amount&gt;500&lt;/amount&gt;
  &lt;currency&gt;EUR&lt;/currency&gt;
  &lt;card_number&gt;7000001163991388834&lt;/card_number&gt;
  &lt;cvv&gt;944062&lt;/cvv&gt;
  &lt;billing_address&gt;
    &lt;first_name&gt;Travis&lt;/first_name&gt;
    &lt;last_name&gt;Pastrana&lt;/last_name&gt;
    &lt;address1&gt;Muster Str. 12&lt;/address1&gt;
    &lt;zip_code&gt;10178&lt;/zip_code&gt;
    &lt;city&gt;Los Angeles&lt;/city&gt;
    &lt;state&gt;CA&lt;/state&gt;
    &lt;country&gt;US&lt;/country&gt;
  &lt;/billing_address&gt;
&lt;/payment_transaction&gt;'</span>
</code></pre>

<p><strong>Request Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>required</td>
<td>string(255)</td>
<td>The transaction type: <strong>intersolve</strong></td>
</tr>
<tr>
<td>transaction_id</td>
<td>required</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>usage</td>
<td>required*</td>
<td>string(255)</td>
<td>Description of the transaction for later use</td>
</tr>
<tr>
<td>remote_ip</td>
<td>required*</td>
<td>IPv4 address</td>
<td>IPv4 address of customer</td>
</tr>
<tr>
<td>reference_id</td>
<td>required</td>
<td>string(32)</td>
<td>The ’unique id’ of the initial split payment transaction.</td>
</tr>
<tr>
<td>amount</td>
<td>required</td>
<td>integer &gt; 0</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>required</td>
<td>string(3)</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>card_number</td>
<td>required</td>
<td>string(19..21)</td>
<td>Gift card number</td>
</tr>
<tr>
<td>cvv</td>
<td>required*</td>
<td>5 to 8 digits</td>
<td>Verification code of the gift card, requirement is based on terminal configuration</td>
</tr>
<tr>
<td>token</td>
<td>optional</td>
<td>string(36)</td>
<td>See <a href="#tokenization">Tokenization</a> for more details. If present, the cardholder parameters can be omitted</td>
</tr>
<tr>
<td><strong>billing_address</strong></td>
<td>required*</td>
<td></td>
<td>See <a href="#required-vs-optional-api-params">Required vs Optional API params</a> for details</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;first_name</td>
<td>required*</td>
<td>string(255)</td>
<td>Customer first name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;last_name</td>
<td>required*</td>
<td>string(255)</td>
<td>Customer last name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address1</td>
<td>required*</td>
<td>string(255)</td>
<td>Primary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address2</td>
<td>required*</td>
<td>string(255)</td>
<td>Secondary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;zip_code</td>
<td>required*</td>
<td>string</td>
<td>ZIP code</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;city</td>
<td>required*</td>
<td>string(255)</td>
<td>City</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;state</td>
<td>required*</td>
<td>string(2)</td>
<td>State code in <a href="https://en.wikipedia.org/wiki/ISO_3166-2">ISO 3166-2</a>, required for USA and Canada</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;country</td>
<td>required*</td>
<td>string(2)</td>
<td>Country code in <a href="https://www.iso.org/iso-3166-country-codes.html">ISO 3166</a></td>
</tr>
<tr>
<td><strong>shipping_address</strong></td>
<td>optional</td>
<td></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;first_name</td>
<td>optional</td>
<td>string(255)</td>
<td>Customer first name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;last_name</td>
<td>optional</td>
<td>string(255)</td>
<td>Customer last name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address1</td>
<td>optional</td>
<td>string(255)</td>
<td>Primary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address2</td>
<td>optional</td>
<td>string(255)</td>
<td>Secondary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;zip_code</td>
<td>optional</td>
<td>string</td>
<td>ZIP code</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;city</td>
<td>optional</td>
<td>string(255)</td>
<td>City</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;state</td>
<td>optional</td>
<td>string(2)</td>
<td>State code in <a href="https://en.wikipedia.org/wiki/ISO_3166-2">ISO 3166-2</a>, required for USA and Canada</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;country</td>
<td>optional</td>
<td>string(2)</td>
<td>Country code in <a href="https://www.iso.org/iso-3166-country-codes.html">ISO 3166</a></td>
</tr>
<tr>
<td><strong>dynamic_descriptor_params</strong></td>
<td>optional</td>
<td></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;merchant_name</td>
<td>optional</td>
<td>string(25)</td>
<td>Allows to dynamically override the charge descriptor</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;merchant_city</td>
<td>optional</td>
<td>string(13)</td>
<td>Allows to dynamically override the merchant phone number</td>
</tr>
</tbody></table>

<p><code>required* = conditionally required</code></p>

<blockquote>
<p>Successful Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>stdClass Object
(
    [transaction_type] =&gt; intersolve
    [status] =&gt; approved
    [mode] =&gt; live
    [transaction_id] =&gt; 43671
    [unique_id] =&gt; 44177a21403427eb96664a6d7e5d5d48
    [technical_message] =&gt; Transaction successful!
    [message] =&gt; Transaction successful!
    [timestamp] =&gt; DateTime Object
        (
            [date] =&gt; 2019-03-14 12:06:01.000000
            [timezone_type] =&gt; 2
            [timezone] =&gt; Z
        )
    [descriptor] =&gt; Descriptor one
    [amount] =&gt; 500
    [currency] =&gt; EUR
    [split_payment] =&gt; finalized
    [leftover_amount] =&gt; 0
    [sent_to_acquirer] =&gt; true
)
</code></pre>

<pre class="highlight java tab-java"><code><span class="o">&lt;</span><span class="n">payment_response</span> <span class="n">content</span><span class="o">=[</span>
    <span class="o">&lt;</span><span class="n">transaction_type</span> <span class="n">content</span><span class="o">=[</span><span class="n">intersolve</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">status</span> <span class="n">content</span><span class="o">=[</span><span class="n">approved</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">mode</span> <span class="n">content</span><span class="o">=[</span><span class="n">live</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">transaction_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">43671</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">unique_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">44177</span><span class="n">a21403427eb96664a6d7e5d5d48</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">technical_message</span> <span class="n">content</span><span class="o">=[</span><span class="n">Transaction</span> <span class="n">successful</span><span class="o">!]&gt;</span>
    <span class="o">&lt;</span><span class="n">message</span> <span class="n">content</span><span class="o">=[</span><span class="n">Transaction</span> <span class="n">successful</span><span class="o">!]&gt;</span>
    <span class="o">&lt;</span><span class="n">timestamp</span> <span class="n">content</span><span class="o">=[</span><span class="mi">2019</span><span class="o">-</span><span class="mo">03</span><span class="o">-</span><span class="mi">14</span><span class="nl">T12:</span><span class="mo">06</span><span class="o">:</span><span class="mo">01</span><span class="n">Z</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">descriptor</span> <span class="n">content</span><span class="o">=[</span><span class="n">Descriptor</span> <span class="n">one</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">amount</span> <span class="n">content</span><span class="o">=[</span><span class="mi">500</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">currency</span> <span class="n">content</span><span class="o">=[</span><span class="n">EUR</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">split_payment</span> <span class="n">content</span><span class="o">=[</span><span class="n">finalized</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">leftover_amount</span> <span class="n">content</span><span class="o">=[</span><span class="mi">0</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">sent_to_acquirer</span> <span class="n">content</span><span class="o">=[</span><span class="kc">true</span><span class="o">]&gt;</span>
<span class="o">]&gt;</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;intersolve&lt;/transaction_type&gt;
  &lt;status&gt;approved&lt;/status&gt;
  &lt;mode&gt;live&lt;/mode&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;technical_message&gt;Transaction successful!&lt;/technical_message&gt;
  &lt;message&gt;Transaction successful!&lt;/message&gt;
  &lt;timestamp&gt;2019-03-14T12:06:01Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;amount&gt;500&lt;/amount&gt;
  &lt;currency&gt;EUR&lt;/currency&gt;
  &lt;split_payment&gt;finalized&lt;/split_payment&gt;
  &lt;leftover_amount&gt;0&lt;/leftover_amount&gt;
  &lt;sent_to_acquirer&gt;true&lt;/sent_to_acquirer&gt;
&lt;/payment_transaction&gt;
</code></pre>

<p><strong>Successful Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>The transaction type</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>transaction_id</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>unique_id</td>
<td>string(32)</td>
<td>Unique id defined by gate (must later be used if capturing, voiding or refunding a transaction)</td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
<tr>
<td>message</td>
<td>string(255)</td>
<td>Human readable error message which can be displayed to users.</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when the transaction was processed in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Combined date and time</a> e.g. 2007-08- 30T17:46:11Z</td>
</tr>
<tr>
<td>descriptor</td>
<td>string</td>
<td>Static descriptor MID info as configured on the gateway</td>
</tr>
<tr>
<td>amount</td>
<td>integer</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>split_payment</td>
<td>string</td>
<td>Split payment status for this transaction. Should be ’finalized’.</td>
</tr>
<tr>
<td>leftover_amount</td>
<td>integer</td>
<td>Leftover amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency Handling</a> for details</td>
</tr>
<tr>
<td>sent_to_acquirer</td>
<td>string</td>
<td>&quot;true&quot; or &quot;false&quot;</td>
</tr>
<tr>
<td>dynamic_descriptor_params</td>
<td>section</td>
<td>Optional, returned only if dynamic desc params are submitted on the API. Note here that the formatted dyn desc params are returned - as they would be submitted to the schemes for settlement.</td>
</tr>
</tbody></table>

<blockquote>
<p>Error Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>stdClass Object
(
    [transaction_type] =&gt; intersolve
    [status] =&gt; error
    [mode] =&gt; live
    [transaction_id] =&gt; 43671
    [unique_id] =&gt; 44177a21403427eb96664a6d7e5d5d48
    [code] =&gt; 340
    [technical_message] =&gt; Transaction_id is invalid!
    [message] =&gt; Transaction_id is invalid!
    [timestamp] =&gt; DateTime Object
        (
            [date] =&gt; 2019-03-14 12:06:02.000000
            [timezone_type] =&gt; 2
            [timezone] =&gt; Z
        )
    [descriptor] =&gt; Descriptor one
    [amount] =&gt; 500
    [currency] =&gt; EUR
    [sent_to_acquirer] =&gt; false
)
</code></pre>

<pre class="highlight java tab-java"><code><span class="o">&lt;</span><span class="n">payment_response</span> <span class="n">content</span><span class="o">=[</span>
    <span class="o">&lt;</span><span class="n">transaction_type</span> <span class="n">content</span><span class="o">=[</span><span class="n">intersolve</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">status</span> <span class="n">content</span><span class="o">=[</span><span class="n">error</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">mode</span> <span class="n">content</span><span class="o">=[</span><span class="n">live</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">transaction_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">43671</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">unique_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">44177</span><span class="n">a21403427eb96664a6d7e5d5d48</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">code</span> <span class="n">content</span><span class="o">=[</span><span class="mi">340</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">technical_message</span> <span class="n">content</span><span class="o">=[</span><span class="n">Transaction_id</span> <span class="n">is</span> <span class="n">invalid</span><span class="o">!]&gt;</span>
    <span class="o">&lt;</span><span class="n">message</span> <span class="n">content</span><span class="o">=[</span><span class="n">Transaction_id</span> <span class="n">is</span> <span class="n">invalid</span><span class="o">!]&gt;</span>
    <span class="o">&lt;</span><span class="n">timestamp</span> <span class="n">content</span><span class="o">=[</span><span class="mi">2019</span><span class="o">-</span><span class="mo">03</span><span class="o">-</span><span class="mi">14</span><span class="nl">T12:</span><span class="mo">06</span><span class="o">:</span><span class="mo">02</span><span class="n">Z</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">descriptor</span> <span class="n">content</span><span class="o">=[</span><span class="n">Descriptor</span> <span class="n">one</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">amount</span> <span class="n">content</span><span class="o">=[</span><span class="mi">500</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">currency</span> <span class="n">content</span><span class="o">=[</span><span class="n">EUR</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">sent_to_acquirer</span> <span class="n">content</span><span class="o">=[</span><span class="kc">false</span><span class="o">]&gt;</span>
<span class="o">]&gt;</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;intersolve&lt;/transaction_type&gt;
  &lt;status&gt;error&lt;/status&gt;
  &lt;mode&gt;live&lt;/mode&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;code&gt;340&lt;/code&gt;
  &lt;technical_message&gt;Transaction_id is invalid!&lt;/technical_message&gt;
  &lt;message&gt;Transaction_id is invalid!&lt;/message&gt;
  &lt;timestamp&gt;2019-03-14T12:06:02Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;amount&gt;500&lt;/amount&gt;
  &lt;currency&gt;EUR&lt;/currency&gt;
  &lt;sent_to_acquirer&gt;false&lt;/sent_to_acquirer&gt;
&lt;/payment_transaction&gt;
</code></pre>

<p><strong>Error Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>The transaction type</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>transaction_id</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>unique_id</td>
<td>string(32)</td>
<td>Unique id defined by gate (must later be used if capturing, voiding or refunding a transaction)</td>
</tr>
<tr>
<td>code</td>
<td>integer</td>
<td>Error code according to <a href="#error-code-table">Error code table</a></td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
<tr>
<td>message</td>
<td>string(255)</td>
<td>Human readable error message which can be displayed to users.</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when the transaction was processed in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Combined date and time</a> e.g. 2007-08- 30T17:46:11Z</td>
</tr>
<tr>
<td>descriptor</td>
<td>string</td>
<td>Static descriptor MID info as configured on the gateway</td>
</tr>
<tr>
<td>amount</td>
<td>integer</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>sent_to_acquirer</td>
<td>string</td>
<td>&quot;true&quot; or &quot;false&quot;</td>
</tr>
<tr>
<td>dynamic_descriptor_params</td>
<td>section</td>
<td>Optional, returned only if dynamic desc params are submitted on the API. Note here that the formatted dyn desc params are returned - as they would be submitted to the schemes for settlement.</td>
</tr>
</tbody></table>

<aside class="notice" >
  Split Payment can also be finalized using <a href='#sale'>Sale</a> or <a href='#sale-3d'>Sale3D</a>
</aside>

<p><strong>Example for finalized <a href="#sale">Sale</a> split payment transaction:</strong></p>

<blockquote>
<p>Request</p>
</blockquote>

<pre class="highlight php tab-php"><code><span class="cp">&lt;?php</span>

<span class="c1">// Load the pre-configured ini file...
</span><span class="nx">\Genesis\Config</span><span class="o">::</span><span class="na">loadSettings</span><span class="p">(</span><span class="s1">'/path/to/config.ini'</span><span class="p">);</span>

<span class="nv">$genesis</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Genesis</span><span class="p">(</span><span class="s1">'Financial\Cards\Sale'</span><span class="p">);</span>
<span class="nv">$request</span> <span class="o">=</span> <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">request</span><span class="p">();</span>

<span class="nv">$request</span>
  <span class="o">-&gt;</span><span class="na">setTransactionId</span><span class="p">(</span><span class="s1">'43671'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setUsage</span><span class="p">(</span><span class="s1">'40208 concert tickets'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setRemoteIp</span><span class="p">(</span><span class="s1">'245.253.2.12'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setReferenceId</span><span class="p">(</span><span class="s1">'406bc1b340472db4dbbba4b749850234'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setAmount</span><span class="p">(</span><span class="s1">'500'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCurrency</span><span class="p">(</span><span class="s1">'EUR'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCardHolder</span><span class="p">(</span><span class="s1">'Travis Pastrana'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCardNumber</span><span class="p">(</span><span class="s1">'4200000000000000'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setExpirationMonth</span><span class="p">(</span><span class="s1">'12'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setExpirationYear</span><span class="p">(</span><span class="s1">'2020'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCvv</span><span class="p">(</span><span class="s1">'834'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCustomerEmail</span><span class="p">(</span><span class="s1">'travis@example.com'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCustomerPhone</span><span class="p">(</span><span class="s1">'+1987987987987'</span><span class="p">)</span>


  <span class="c1">// Billing Address
</span>  <span class="o">-&gt;</span><span class="na">setBillingFirstName</span><span class="p">(</span><span class="s1">'Travis'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingLastName</span><span class="p">(</span><span class="s1">'Pastrana'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingAddress1</span><span class="p">(</span><span class="s1">'Muster Str. 12'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingZipCode</span><span class="p">(</span><span class="s1">'10178'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingCity</span><span class="p">(</span><span class="s1">'Los Angeles'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingState</span><span class="p">(</span><span class="s1">'CA'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingCountry</span><span class="p">(</span><span class="s1">'US'</span><span class="p">);</span>

<span class="k">try</span> <span class="p">{</span>
    <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">execute</span><span class="p">();</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">response</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">getResponseObject</span><span class="p">();</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">\Exception</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$e</span><span class="o">-&gt;</span><span class="na">getMessage</span><span class="p">();</span>
<span class="p">}</span>
</code></pre>

<pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.GenesisClient</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.TransactionResult</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.constants.Endpoints</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.constants.Environments</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.requests.financial.card.SaleRequest</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.model.Transaction</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Configuration</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Country</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Currency</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.math.BigDecimal</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">GenesisExample</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">()</span>  <span class="o">{</span>

    <span class="c1">// Create configuration</span>
    <span class="n">Configuration</span> <span class="n">configuration</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Configuration</span><span class="o">(</span><span class="n">Environments</span><span class="o">.</span><span class="na">STAGING</span><span class="o">,</span> <span class="n">Endpoints</span><span class="o">.</span><span class="na">EMERCHANTPAY</span><span class="o">);</span>

    <span class="n">configuration</span><span class="o">.</span><span class="na">setUsername</span><span class="o">(</span><span class="s">"SET_YOUR_USERNAME"</span><span class="o">);</span>
    <span class="n">configuration</span><span class="o">.</span><span class="na">setPassword</span><span class="o">(</span><span class="s">"SET_YOUR_PASSWORD"</span><span class="o">);</span>
    <span class="n">configuration</span><span class="o">.</span><span class="na">setToken</span><span class="o">(</span><span class="s">"SET_YOUR_TOKEN"</span><span class="o">);</span>

    <span class="n">SaleRequest</span> <span class="n">request</span> <span class="o">=</span> <span class="k">new</span> <span class="n">SaleRequest</span><span class="o">();</span>

    <span class="n">request</span><span class="o">.</span><span class="na">setTransactionId</span><span class="o">(</span><span class="s">"43671"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setUsage</span><span class="o">(</span><span class="s">"40208 concert tickets"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setRemoteIp</span><span class="o">(</span><span class="s">"245.253.2.12"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setReferenceId</span><span class="o">(</span><span class="s">"406bc1b340472db4dbbba4b749850234"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setAmount</span><span class="o">(</span><span class="k">new</span> <span class="n">BigDecimal</span><span class="o">(</span><span class="mi">500</span><span class="o">));</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCurrency</span><span class="o">(</span><span class="s">"EUR"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCardHolder</span><span class="o">(</span><span class="s">"Travis Pastrana"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCardNumber</span><span class="o">(</span><span class="s">"4200000000000000"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setExpirationMonth</span><span class="o">(</span><span class="s">"12"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setExpirationYear</span><span class="o">(</span><span class="s">"2020"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCvv</span><span class="o">(</span><span class="s">"834"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCustomerEmail</span><span class="o">(</span><span class="s">"travis@example.com"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCustomerPhone</span><span class="o">(</span><span class="s">"+1987987987987"</span><span class="o">);</span>


    <span class="c1">// Billing Address</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingFirstname</span><span class="o">(</span><span class="s">"Travis"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingLastname</span><span class="o">(</span><span class="s">"Pastrana"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingPrimaryAddress</span><span class="o">(</span><span class="s">"Muster Str. 12"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingZipCode</span><span class="o">(</span><span class="s">"10178"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingCity</span><span class="o">(</span><span class="s">"Los Angeles"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingState</span><span class="o">(</span><span class="s">"CA"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingCountry</span><span class="o">(</span><span class="s">"US"</span><span class="o">);</span>

    <span class="n">GenesisClient</span> <span class="n">client</span> <span class="o">=</span> <span class="k">new</span> <span class="n">GenesisClient</span><span class="o">(</span><span class="n">configuration</span><span class="o">,</span> <span class="n">request</span><span class="o">);</span>
    <span class="n">client</span><span class="o">.</span><span class="na">execute</span><span class="o">();</span>

    <span class="c1">// Parse Payment result</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">client</span><span class="o">.</span><span class="na">getResponse</span><span class="o">());</span>

  <span class="o">}</span>
<span class="o">}</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="kd">var</span> <span class="nx">genesis</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'genesis.js/lib/genesis.js'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">transaction</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">genesis</span><span class="p">.</span><span class="nx">transaction</span><span class="p">();</span>

<span class="kd">var</span> <span class="nx">failure</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">reason</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">reason</span><span class="p">);</span>
<span class="p">};</span>

<span class="kd">var</span> <span class="nx">success</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>

<span class="nx">transaction</span><span class="p">.</span><span class="nx">sale</span><span class="p">(</span>
  <span class="p">{</span>
    <span class="s2">"transaction_id"</span><span class="p">:</span> <span class="s2">"43671"</span><span class="p">,</span>
    <span class="s2">"usage"</span><span class="p">:</span> <span class="s2">"40208 concert tickets"</span><span class="p">,</span>
    <span class="s2">"remote_ip"</span><span class="p">:</span> <span class="s2">"245.253.2.12"</span><span class="p">,</span>
    <span class="s2">"reference_id"</span><span class="p">:</span> <span class="s2">"406bc1b340472db4dbbba4b749850234"</span><span class="p">,</span>
    <span class="s2">"amount"</span><span class="p">:</span> <span class="s2">"500"</span><span class="p">,</span>
    <span class="s2">"currency"</span><span class="p">:</span> <span class="s2">"EUR"</span><span class="p">,</span>
    <span class="s2">"card_holder"</span><span class="p">:</span> <span class="s2">"Travis Pastrana"</span><span class="p">,</span>
    <span class="s2">"card_number"</span><span class="p">:</span> <span class="s2">"4200000000000000"</span><span class="p">,</span>
    <span class="s2">"expiration_month"</span><span class="p">:</span> <span class="s2">"12"</span><span class="p">,</span>
    <span class="s2">"expiration_year"</span><span class="p">:</span> <span class="mi">2020</span><span class="p">,</span>
    <span class="s2">"cvv"</span><span class="p">:</span> <span class="s2">"834"</span><span class="p">,</span>
    <span class="s2">"customer_email"</span><span class="p">:</span> <span class="s2">"travis@example.com"</span><span class="p">,</span>
    <span class="s2">"customer_phone"</span><span class="p">:</span> <span class="s2">"+1987987987987"</span><span class="p">,</span>
    <span class="s2">"billing_address"</span><span class="p">:</span> <span class="p">{</span>
      <span class="s2">"first_name"</span><span class="p">:</span> <span class="s2">"Travis"</span><span class="p">,</span>
      <span class="s2">"last_name"</span><span class="p">:</span> <span class="s2">"Pastrana"</span><span class="p">,</span>
      <span class="s2">"address1"</span><span class="p">:</span> <span class="s2">"Muster Str. 12"</span><span class="p">,</span>
      <span class="s2">"zip_code"</span><span class="p">:</span> <span class="s2">"10178"</span><span class="p">,</span>
      <span class="s2">"city"</span><span class="p">:</span> <span class="s2">"Los Angeles"</span><span class="p">,</span>
      <span class="s2">"state"</span><span class="p">:</span> <span class="s2">"CA"</span><span class="p">,</span>
      <span class="s2">"country"</span><span class="p">:</span> <span class="s2">"US"</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">).</span><span class="nx">send</span><span class="p">()</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">success</span><span class="p">)</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">failure</span><span class="p">);</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>curl https://username:password@gate.emerchantpay.net/process/TERMINAL-TOKEN <span class="se">\</span>
   -H <span class="s2">"Content-Type: text/xml"</span> <span class="se">\</span>
   -d <span class="s1">'
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;sale&lt;/transaction_type&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;usage&gt;40208 concert tickets&lt;/usage&gt;
  &lt;remote_ip&gt;245.253.2.12&lt;/remote_ip&gt;
  &lt;reference_id&gt;406bc1b340472db4dbbba4b749850234&lt;/reference_id&gt;
  &lt;amount&gt;500&lt;/amount&gt;
  &lt;currency&gt;EUR&lt;/currency&gt;
  &lt;card_holder&gt;Travis Pastrana&lt;/card_holder&gt;
  &lt;card_number&gt;4200000000000000&lt;/card_number&gt;
  &lt;expiration_month&gt;12&lt;/expiration_month&gt;
  &lt;expiration_year&gt;2020&lt;/expiration_year&gt;
  &lt;cvv&gt;834&lt;/cvv&gt;
  &lt;customer_email&gt;travis@example.com&lt;/customer_email&gt;
  &lt;customer_phone&gt;+1987987987987&lt;/customer_phone&gt;
  &lt;billing_address&gt;
    &lt;first_name&gt;Travis&lt;/first_name&gt;
    &lt;last_name&gt;Pastrana&lt;/last_name&gt;
    &lt;address1&gt;Muster Str. 12&lt;/address1&gt;
    &lt;zip_code&gt;10178&lt;/zip_code&gt;
    &lt;city&gt;Los Angeles&lt;/city&gt;
    &lt;state&gt;CA&lt;/state&gt;
    &lt;country&gt;US&lt;/country&gt;
  &lt;/billing_address&gt;
&lt;/payment_transaction&gt;'</span>
</code></pre>

<p><strong>Request Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>required</td>
<td>string(255)</td>
<td>The transaction type: <strong>sale</strong></td>
</tr>
<tr>
<td>transaction_id</td>
<td>required</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>usage</td>
<td>optional</td>
<td>string(255)</td>
<td>Description of the transaction for later use</td>
</tr>
<tr>
<td>gaming</td>
<td>optional</td>
<td>&quot;true&quot;</td>
<td>Signifies whether a gaming transaction is performed. Gaming transactions usually use MCC 7995, contact tech support for more details.</td>
</tr>
<tr>
<td>moto</td>
<td>optional</td>
<td>&quot;true&quot;</td>
<td>Signifies whether a MOTO (mail order telephone order) transaction is performed. Contact tech support for more details.</td>
</tr>
<tr>
<td>remote_ip</td>
<td>required*</td>
<td>IPv4 address</td>
<td>IPv4 address of customer</td>
</tr>
<tr>
<td>reference_id</td>
<td>required*</td>
<td>string(32)</td>
<td>The ’unique id’ of the initial split payment transaction</td>
</tr>
<tr>
<td>amount</td>
<td>required</td>
<td>integer &gt; 0</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>required</td>
<td>string(3)</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>card_holder</td>
<td>required</td>
<td>string(255)</td>
<td>Full name of customer as printed on credit card (first name and last name at least)</td>
</tr>
<tr>
<td>card_number</td>
<td>required</td>
<td>13 to 16 digits</td>
<td>Complete cc number of customer</td>
</tr>
<tr>
<td>cvv</td>
<td>required*</td>
<td>3 to 4 digits</td>
<td>cvv of cc, requirement is based on terminal configuration</td>
</tr>
<tr>
<td>expiration_month</td>
<td>required</td>
<td>MM</td>
<td>Expiration month as printed on credit card</td>
</tr>
<tr>
<td>expiration_year</td>
<td>required</td>
<td>YYYY</td>
<td>Expiration year as printed on credit card</td>
</tr>
<tr>
<td>customer_email</td>
<td>required*</td>
<td>e-mail address</td>
<td>Must contain valid e-mail of customer</td>
</tr>
<tr>
<td>customer_phone</td>
<td>required*</td>
<td>string(32)</td>
<td>Must contain valid phone number of customer</td>
</tr>
<tr>
<td>birth_date</td>
<td>required*</td>
<td>dd-mm-yyyy</td>
<td>Required for Visa only when MCC is a Financial Services one (e.g. MCC 6012)</td>
</tr>
<tr>
<td><strong>billing_address</strong></td>
<td>required</td>
<td></td>
<td>See <a href="#required-vs-optional-api-params">Required vs Optional API params</a> for details</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;first_name</td>
<td>required*</td>
<td>string(255)</td>
<td>Customer first name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;last_name</td>
<td>required*</td>
<td>string(255)</td>
<td>Customer last name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address1</td>
<td>required*</td>
<td>string(255)</td>
<td>Primary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address2</td>
<td>required*</td>
<td>string(255)</td>
<td>Secondary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;zip_code</td>
<td>required*</td>
<td>string</td>
<td>ZIP code</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;city</td>
<td>required*</td>
<td>string(255)</td>
<td>City</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;state</td>
<td>required*</td>
<td>string(2)</td>
<td>State code in <a href="https://en.wikipedia.org/wiki/ISO_3166-2">ISO 3166-2</a>, required for USA and Canada</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;country</td>
<td>required*</td>
<td>string(2)</td>
<td>Country code in <a href="https://www.iso.org/iso-3166-country-codes.html">ISO 3166</a></td>
</tr>
<tr>
<td><strong>shipping_address</strong></td>
<td>optional</td>
<td></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;first_name</td>
<td>optional</td>
<td>string(255)</td>
<td>Customer first name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;last_name</td>
<td>optional</td>
<td>string(255)</td>
<td>Customer last name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address1</td>
<td>optional</td>
<td>string(255)</td>
<td>Primary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address2</td>
<td>optional</td>
<td>string(255)</td>
<td>Secondary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;zip_code</td>
<td>optional</td>
<td>string</td>
<td>ZIP code</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;city</td>
<td>optional</td>
<td>string(255)</td>
<td>City</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;state</td>
<td>optional</td>
<td>string(2)</td>
<td>State code in <a href="https://en.wikipedia.org/wiki/ISO_3166-2">ISO 3166-2</a>, required for USA and Canada</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;country</td>
<td>optional</td>
<td>string(2)</td>
<td>Country code in <a href="https://www.iso.org/iso-3166-country-codes.html">ISO 3166</a></td>
</tr>
<tr>
<td><strong>dynamic_descriptor_params</strong></td>
<td>optional</td>
<td></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;merchant_name</td>
<td>optional</td>
<td>string(25)</td>
<td>Allows to dynamically override the charge descriptor</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;merchant_city</td>
<td>optional</td>
<td>string(13)</td>
<td>Allows to dynamically override the merchant phone number</td>
</tr>
</tbody></table>

<p><code>required* = conditionally required</code></p>

<blockquote>
<p>Successful Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>stdClass Object
(
    [transaction_type] =&gt; sale
    [status] =&gt; approved
    [mode] =&gt; live
    [transaction_id] =&gt; 43671
    [unique_id] =&gt; 44177a21403427eb96664a6d7e5d5d48
    [avs_response_code] =&gt; 5I
    [avs_response_text] =&gt; Response provided by issuer processor; Address information not verified
    [authorization_code] =&gt; 345678
    [response_code] =&gt; 00
    [technical_message] =&gt; Transaction successful!
    [message] =&gt; Transaction successful!
    [timestamp] =&gt; DateTime Object
        (
            [date] =&gt; 2019-03-14 12:06:02.000000
            [timezone_type] =&gt; 2
            [timezone] =&gt; Z
        )
    [descriptor] =&gt; Descriptor one
    [amount] =&gt; 500
    [currency] =&gt; EUR
    [split_payment] =&gt; finalized
    [leftover_amount] =&gt; 0
    [sent_to_acquirer] =&gt; true
)
</code></pre>

<pre class="highlight java tab-java"><code><span class="o">&lt;</span><span class="n">payment_response</span> <span class="n">content</span><span class="o">=[</span>
    <span class="o">&lt;</span><span class="n">transaction_type</span> <span class="n">content</span><span class="o">=[</span><span class="n">sale</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">status</span> <span class="n">content</span><span class="o">=[</span><span class="n">approved</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">mode</span> <span class="n">content</span><span class="o">=[</span><span class="n">live</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">transaction_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">43671</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">unique_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">44177</span><span class="n">a21403427eb96664a6d7e5d5d48</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">avs_response_code</span> <span class="n">content</span><span class="o">=[</span><span class="mi">5</span><span class="n">I</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">avs_response_text</span> <span class="n">content</span><span class="o">=[</span><span class="n">Response</span> <span class="n">provided</span> <span class="n">by</span> <span class="n">issuer</span> <span class="n">processor</span><span class="o">;</span> <span class="n">Address</span> <span class="n">information</span> <span class="n">not</span> <span class="n">verified</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">authorization_code</span> <span class="n">content</span><span class="o">=[</span><span class="mi">345678</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">response_code</span> <span class="n">content</span><span class="o">=[</span><span class="mo">00</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">technical_message</span> <span class="n">content</span><span class="o">=[</span><span class="n">Transaction</span> <span class="n">successful</span><span class="o">!]&gt;</span>
    <span class="o">&lt;</span><span class="n">message</span> <span class="n">content</span><span class="o">=[</span><span class="n">Transaction</span> <span class="n">successful</span><span class="o">!]&gt;</span>
    <span class="o">&lt;</span><span class="n">timestamp</span> <span class="n">content</span><span class="o">=[</span><span class="mi">2019</span><span class="o">-</span><span class="mo">03</span><span class="o">-</span><span class="mi">14</span><span class="nl">T12:</span><span class="mo">06</span><span class="o">:</span><span class="mo">02</span><span class="n">Z</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">descriptor</span> <span class="n">content</span><span class="o">=[</span><span class="n">Descriptor</span> <span class="n">one</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">amount</span> <span class="n">content</span><span class="o">=[</span><span class="mi">500</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">currency</span> <span class="n">content</span><span class="o">=[</span><span class="n">EUR</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">split_payment</span> <span class="n">content</span><span class="o">=[</span><span class="n">finalized</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">leftover_amount</span> <span class="n">content</span><span class="o">=[</span><span class="mi">0</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">sent_to_acquirer</span> <span class="n">content</span><span class="o">=[</span><span class="kc">true</span><span class="o">]&gt;</span>
<span class="o">]&gt;</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="p">{</span>
    <span class="nl">transaction_type</span><span class="p">:</span> <span class="s2">"sale"</span><span class="p">,</span>
    <span class="nx">status</span><span class="p">:</span> <span class="s2">"approved"</span><span class="p">,</span>
    <span class="nx">mode</span><span class="p">:</span> <span class="s2">"live"</span><span class="p">,</span>
    <span class="nx">transaction_id</span><span class="p">:</span> <span class="s2">"43671"</span><span class="p">,</span>
    <span class="nx">unique_id</span><span class="p">:</span> <span class="s2">"44177a21403427eb96664a6d7e5d5d48"</span><span class="p">,</span>
    <span class="nx">avs_response_code</span><span class="p">:</span> <span class="s2">"5I"</span><span class="p">,</span>
    <span class="nx">avs_response_text</span><span class="p">:</span> <span class="s2">"Response provided by issuer processor; Address information not verified"</span><span class="p">,</span>
    <span class="nx">authorization_code</span><span class="p">:</span> <span class="s2">"345678"</span><span class="p">,</span>
    <span class="nx">response_code</span><span class="p">:</span> <span class="s2">"00"</span><span class="p">,</span>
    <span class="nx">technical_message</span><span class="p">:</span> <span class="s2">"Transaction successful!"</span><span class="p">,</span>
    <span class="nx">message</span><span class="p">:</span> <span class="s2">"Transaction successful!"</span><span class="p">,</span>
    <span class="nx">timestamp</span><span class="p">:</span> <span class="s2">"2019-03-14T12:06:02Z"</span><span class="p">,</span>
    <span class="nx">descriptor</span><span class="p">:</span> <span class="s2">"Descriptor one"</span><span class="p">,</span>
    <span class="nx">amount</span><span class="p">:</span> <span class="s2">"500"</span><span class="p">,</span>
    <span class="nx">currency</span><span class="p">:</span> <span class="s2">"EUR"</span><span class="p">,</span>
    <span class="nx">split_payment</span><span class="p">:</span> <span class="s2">"finalized"</span><span class="p">,</span>
    <span class="nx">leftover_amount</span><span class="p">:</span> <span class="s2">"0"</span><span class="p">,</span>
    <span class="nx">sent_to_acquirer</span><span class="p">:</span> <span class="s2">"true"</span><span class="p">,</span>
<span class="p">}</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;sale&lt;/transaction_type&gt;
  &lt;status&gt;approved&lt;/status&gt;
  &lt;mode&gt;live&lt;/mode&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;avs_response_code&gt;5I&lt;/avs_response_code&gt;
  &lt;avs_response_text&gt;Response provided by issuer processor; Address information not verified&lt;/avs_response_text&gt;
  &lt;authorization_code&gt;345678&lt;/authorization_code&gt;
  &lt;response_code&gt;00&lt;/response_code&gt;
  &lt;technical_message&gt;Transaction successful!&lt;/technical_message&gt;
  &lt;message&gt;Transaction successful!&lt;/message&gt;
  &lt;timestamp&gt;2019-03-14T12:06:02Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;amount&gt;500&lt;/amount&gt;
  &lt;currency&gt;EUR&lt;/currency&gt;
  &lt;split_payment&gt;finalized&lt;/split_payment&gt;
  &lt;leftover_amount&gt;0&lt;/leftover_amount&gt;
  &lt;sent_to_acquirer&gt;true&lt;/sent_to_acquirer&gt;
&lt;/payment_transaction&gt;
</code></pre>

<p><strong>Successful Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>The transaction type</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>transaction_id</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>unique_id</td>
<td>string(32)</td>
<td>Unique id defined by gate (must later be used if capturing, voiding or refunding a transaction)</td>
</tr>
<tr>
<td>gaming</td>
<td>string</td>
<td>Signifies whether a gaming transaction is performed. Gaming transactions usually use MCC 7995, contact tech support for more details.</td>
</tr>
<tr>
<td>moto</td>
<td>string</td>
<td>Signifies whether a MOTO (mail order telephone order) transaction is performed. Contact tech support for more details.</td>
</tr>
<tr>
<td>avs_response_code</td>
<td>string</td>
<td>Generated by the card network on trying to match the billing address when performing the address verification. Optional, returned if config is enabled and acquirer supports it. Check <a href="#avs-status-codes">AVS Status Codes</a> for details.</td>
</tr>
<tr>
<td>avs_response_text</td>
<td>string</td>
<td>Gives the human response text for the AVS response code above. Optional, returned if config is enabled and acquirer supports it. Check [AVS Status Codes](#avs-status-codes for details.</td>
</tr>
<tr>
<td>authorization_code</td>
<td>string(6)</td>
<td>Generated by the card network when an authorisation has occurred, used to identify that auth. Consists of 6 alphanumeric chars</td>
</tr>
<tr>
<td>response_code</td>
<td>string(2)</td>
<td>Defines the issuer result of a transaction, the status of a message or some action taken or required. See <a href="#issuer-response-codes">issuer response codes</a> for details</td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
<tr>
<td>message</td>
<td>string(255)</td>
<td>Human readable error message which can be displayed to users.</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when the transaction was processed in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Combined date and time</a> e.g. 2007-08- 30T17:46:11Z</td>
</tr>
<tr>
<td>descriptor</td>
<td>string</td>
<td>Static descriptor MID info as configured on the gateway</td>
</tr>
<tr>
<td>amount</td>
<td>integer</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>split_payment</td>
<td>string</td>
<td>Split payment status for this transaction. Should be ’finalized’.</td>
</tr>
<tr>
<td>leftover_amount</td>
<td>integer</td>
<td>Leftover amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency Handling</a> for details</td>
</tr>
<tr>
<td>sent_to_acquirer</td>
<td>string</td>
<td>&quot;true&quot; or &quot;false&quot;</td>
</tr>
<tr>
<td>partial_approval</td>
<td>string(4)</td>
<td>Optional, set to ’true’ if partial approval happened. Partially approved amount is then in the amount field. Check <a href="#partial-approvals">Partial Approvals</a> for details</td>
</tr>
<tr>
<td>dynamic_descriptor_params</td>
<td>section</td>
<td>Optional, returned only if dynamic desc params are submitted on the API. Note here that the formatted dyn desc params are returned - as they would be submitted to the schemes for settlement.</td>
</tr>
</tbody></table>

<blockquote>
<p>Error Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>stdClass Object
(
    [response_code] =&gt; 57
    [unique_id] =&gt; 44177a21403427eb96664a6d7e5d5d48
    [code] =&gt; 340
    [technical_message] =&gt; billing_address[zip_code] is invalid!
    [message] =&gt; billing_address[zip_code] is invalid!
    [timestamp] =&gt; DateTime Object
        (
            [date] =&gt; 2019-03-14 12:06:02.000000
            [timezone_type] =&gt; 2
            [timezone] =&gt; Z
        )
    [descriptor] =&gt; Descriptor one
    [amount] =&gt; 500
    [currency] =&gt; EUR
    [sent_to_acquirer] =&gt; false
)
</code></pre>

<pre class="highlight java tab-java"><code><span class="o">&lt;</span><span class="n">payment_response</span> <span class="n">content</span><span class="o">=[</span>
    <span class="o">&lt;</span><span class="n">response_code</span> <span class="n">content</span><span class="o">=[</span><span class="mi">57</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">unique_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">44177</span><span class="n">a21403427eb96664a6d7e5d5d48</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">code</span> <span class="n">content</span><span class="o">=[</span><span class="mi">340</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">technical_message</span> <span class="n">content</span><span class="o">=[</span><span class="n">billing_address</span><span class="o">[</span><span class="n">zip_code</span><span class="o">]</span> <span class="n">is</span> <span class="n">invalid</span><span class="o">!]&gt;</span>
    <span class="o">&lt;</span><span class="n">message</span> <span class="n">content</span><span class="o">=[</span><span class="n">billing_address</span><span class="o">[</span><span class="n">zip_code</span><span class="o">]</span> <span class="n">is</span> <span class="n">invalid</span><span class="o">!]&gt;</span>
    <span class="o">&lt;</span><span class="n">timestamp</span> <span class="n">content</span><span class="o">=[</span><span class="mi">2019</span><span class="o">-</span><span class="mo">03</span><span class="o">-</span><span class="mi">14</span><span class="nl">T12:</span><span class="mo">06</span><span class="o">:</span><span class="mo">02</span><span class="n">Z</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">descriptor</span> <span class="n">content</span><span class="o">=[</span><span class="n">Descriptor</span> <span class="n">one</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">amount</span> <span class="n">content</span><span class="o">=[</span><span class="mi">500</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">currency</span> <span class="n">content</span><span class="o">=[</span><span class="n">EUR</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">sent_to_acquirer</span> <span class="n">content</span><span class="o">=[</span><span class="kc">false</span><span class="o">]&gt;</span>
<span class="o">]&gt;</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="p">{</span>
    <span class="nl">response_code</span><span class="p">:</span> <span class="s2">"57"</span><span class="p">,</span>
    <span class="nx">unique_id</span><span class="p">:</span> <span class="s2">"44177a21403427eb96664a6d7e5d5d48"</span><span class="p">,</span>
    <span class="nx">code</span><span class="p">:</span> <span class="s2">"340"</span><span class="p">,</span>
    <span class="nx">technical_message</span><span class="p">:</span> <span class="s2">"billing_address[zip_code] is invalid!"</span><span class="p">,</span>
    <span class="nx">message</span><span class="p">:</span> <span class="s2">"billing_address[zip_code] is invalid!"</span><span class="p">,</span>
    <span class="nx">timestamp</span><span class="p">:</span> <span class="s2">"2019-03-14T12:06:02Z"</span><span class="p">,</span>
    <span class="nx">descriptor</span><span class="p">:</span> <span class="s2">"Descriptor one"</span><span class="p">,</span>
    <span class="nx">amount</span><span class="p">:</span> <span class="s2">"500"</span><span class="p">,</span>
    <span class="nx">currency</span><span class="p">:</span> <span class="s2">"EUR"</span><span class="p">,</span>
    <span class="nx">sent_to_acquirer</span><span class="p">:</span> <span class="s2">"false"</span><span class="p">,</span>
<span class="p">}</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;response_code&gt;57&lt;/response_code&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;code&gt;340&lt;/code&gt;
  &lt;technical_message&gt;billing_address[zip_code] is invalid!&lt;/technical_message&gt;
  &lt;message&gt;billing_address[zip_code] is invalid!&lt;/message&gt;
  &lt;timestamp&gt;2019-03-14T12:06:02Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;amount&gt;500&lt;/amount&gt;
  &lt;currency&gt;EUR&lt;/currency&gt;
  &lt;sent_to_acquirer&gt;false&lt;/sent_to_acquirer&gt;
&lt;/payment_transaction&gt;
</code></pre>

<p><strong>Error Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>gaming</td>
<td>string</td>
<td>Signifies whether a gaming transaction is performed. Gaming transactions usually use MCC 7995, contact tech support for more details.</td>
</tr>
<tr>
<td>moto</td>
<td>string</td>
<td>Signifies whether a MOTO (mail order telephone order) transaction is performed. Contact tech support for more details.</td>
</tr>
<tr>
<td>response_code</td>
<td>string(2)</td>
<td>Defines the issuer result of a transaction, the status of a message or some action taken or required. See <a href="#issuer-response-codes">issuer response codes</a> for details</td>
</tr>
<tr>
<td>code</td>
<td>integer</td>
<td>Error code according to <a href="#error-code-table">Error code table</a></td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
<tr>
<td>message</td>
<td>string(255)</td>
<td>Human readable error message which can be displayed to users.</td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when the transaction was processed in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Combined date and time</a> e.g. 2007-08- 30T17:46:11Z</td>
</tr>
<tr>
<td>descriptor</td>
<td>string</td>
<td>Static descriptor MID info as configured on the gateway</td>
</tr>
<tr>
<td>amount</td>
<td>integer</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>sent_to_acquirer</td>
<td>string</td>
<td>&quot;true&quot; or &quot;false&quot;</td>
</tr>
<tr>
<td>dynamic_descriptor_params</td>
<td>section</td>
<td>Optional, returned only if dynamic desc params are submitted on the API. Note here that the formatted dyn desc params are returned - as they would be submitted to the schemes for settlement.</td>
</tr>
</tbody></table>

<p><strong>Example for finalized <a href="#sale-3d">Sale 3D</a> split payment transaction:</strong></p>

<blockquote>
<p>Asynchronous  Request</p>
</blockquote>

<pre class="highlight php tab-php"><code><span class="cp">&lt;?php</span>

<span class="c1">// Load the pre-configured ini file...
</span><span class="nx">\Genesis\Config</span><span class="o">::</span><span class="na">loadSettings</span><span class="p">(</span><span class="s1">'/path/to/config.ini'</span><span class="p">);</span>

<span class="nv">$genesis</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Genesis</span><span class="p">(</span><span class="s1">'Financial\Cards\Sale3D'</span><span class="p">);</span>
<span class="nv">$request</span> <span class="o">=</span> <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">request</span><span class="p">();</span>

<span class="nv">$request</span>
  <span class="o">-&gt;</span><span class="na">setTransactionId</span><span class="p">(</span><span class="s1">'43671'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setUsage</span><span class="p">(</span><span class="s1">'40208 concert tickets'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setRemoteIp</span><span class="p">(</span><span class="s1">'245.253.2.12'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setReferenceId</span><span class="p">(</span><span class="s1">'406bc1b340472db4dbbba4b749850234'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setAmount</span><span class="p">(</span><span class="s1">'500'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCurrency</span><span class="p">(</span><span class="s1">'EUR'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCardHolder</span><span class="p">(</span><span class="s1">'Travis Pastrana'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCardNumber</span><span class="p">(</span><span class="s1">'4711100000000000'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setExpirationMonth</span><span class="p">(</span><span class="s1">'12'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setExpirationYear</span><span class="p">(</span><span class="s1">'2020'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCvv</span><span class="p">(</span><span class="s1">'834'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCustomerEmail</span><span class="p">(</span><span class="s1">'travis@example.com'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCustomerPhone</span><span class="p">(</span><span class="s1">'+1987987987987'</span><span class="p">)</span>


  <span class="c1">// Billing Address
</span>  <span class="o">-&gt;</span><span class="na">setBillingFirstName</span><span class="p">(</span><span class="s1">'Travis'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingLastName</span><span class="p">(</span><span class="s1">'Pastrana'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingAddress1</span><span class="p">(</span><span class="s1">'Muster Str. 12'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingZipCode</span><span class="p">(</span><span class="s1">'10178'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingCity</span><span class="p">(</span><span class="s1">'Los Angeles'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingState</span><span class="p">(</span><span class="s1">'CA'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingCountry</span><span class="p">(</span><span class="s1">'US'</span><span class="p">)</span>


  <span class="c1">// MPI Asynchronous
</span>  <span class="o">-&gt;</span><span class="na">setNotificationUrl</span><span class="p">(</span><span class="s1">'https://www.example.com/notification'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setReturnSuccessUrl</span><span class="p">(</span><span class="s1">'http://www.example.com/success.html'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setReturnFailureUrl</span><span class="p">(</span><span class="s1">'http://www.example.com/failure.html'</span><span class="p">);</span>

<span class="k">try</span> <span class="p">{</span>
    <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">execute</span><span class="p">();</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">response</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">getResponseObject</span><span class="p">();</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">\Exception</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$e</span><span class="o">-&gt;</span><span class="na">getMessage</span><span class="p">();</span>
<span class="p">}</span>
</code></pre>

<pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.GenesisClient</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.TransactionResult</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.constants.Endpoints</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.constants.Environments</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.requests.financial.card.Sale3DRequest</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.model.Transaction</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Configuration</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Country</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Currency</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.math.BigDecimal</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">GenesisExample</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">()</span>  <span class="o">{</span>

    <span class="c1">// Create configuration</span>
    <span class="n">Configuration</span> <span class="n">configuration</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Configuration</span><span class="o">(</span><span class="n">Environments</span><span class="o">.</span><span class="na">STAGING</span><span class="o">,</span> <span class="n">Endpoints</span><span class="o">.</span><span class="na">EMERCHANTPAY</span><span class="o">);</span>

    <span class="n">configuration</span><span class="o">.</span><span class="na">setUsername</span><span class="o">(</span><span class="s">"SET_YOUR_USERNAME"</span><span class="o">);</span>
    <span class="n">configuration</span><span class="o">.</span><span class="na">setPassword</span><span class="o">(</span><span class="s">"SET_YOUR_PASSWORD"</span><span class="o">);</span>
    <span class="n">configuration</span><span class="o">.</span><span class="na">setToken</span><span class="o">(</span><span class="s">"SET_YOUR_TOKEN"</span><span class="o">);</span>

    <span class="n">Sale3DRequest</span> <span class="n">request</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Sale3DRequest</span><span class="o">();</span>

    <span class="n">request</span><span class="o">.</span><span class="na">setTransactionId</span><span class="o">(</span><span class="s">"43671"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setUsage</span><span class="o">(</span><span class="s">"40208 concert tickets"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setRemoteIp</span><span class="o">(</span><span class="s">"245.253.2.12"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setReferenceId</span><span class="o">(</span><span class="s">"406bc1b340472db4dbbba4b749850234"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setAmount</span><span class="o">(</span><span class="k">new</span> <span class="n">BigDecimal</span><span class="o">(</span><span class="mi">500</span><span class="o">));</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCurrency</span><span class="o">(</span><span class="s">"EUR"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCardHolder</span><span class="o">(</span><span class="s">"Travis Pastrana"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCardNumber</span><span class="o">(</span><span class="s">"4711100000000000"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setExpirationMonth</span><span class="o">(</span><span class="s">"12"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setExpirationYear</span><span class="o">(</span><span class="s">"2020"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCvv</span><span class="o">(</span><span class="s">"834"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCustomerEmail</span><span class="o">(</span><span class="s">"travis@example.com"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCustomerPhone</span><span class="o">(</span><span class="s">"+1987987987987"</span><span class="o">);</span>


    <span class="c1">// Billing Address</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingFirstname</span><span class="o">(</span><span class="s">"Travis"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingLastname</span><span class="o">(</span><span class="s">"Pastrana"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingPrimaryAddress</span><span class="o">(</span><span class="s">"Muster Str. 12"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingZipCode</span><span class="o">(</span><span class="s">"10178"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingCity</span><span class="o">(</span><span class="s">"Los Angeles"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingState</span><span class="o">(</span><span class="s">"CA"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingCountry</span><span class="o">(</span><span class="s">"US"</span><span class="o">);</span>


    <span class="c1">// MPI Asynchronous</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setNotificationUrl</span><span class="o">(</span><span class="s">"https://www.example.com/notification"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setReturnSuccessUrl</span><span class="o">(</span><span class="s">"http://www.example.com/success.html"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setReturnFailureUrl</span><span class="o">(</span><span class="s">"http://www.example.com/failure.html"</span><span class="o">);</span>

    <span class="n">GenesisClient</span> <span class="n">client</span> <span class="o">=</span> <span class="k">new</span> <span class="n">GenesisClient</span><span class="o">(</span><span class="n">configuration</span><span class="o">,</span> <span class="n">request</span><span class="o">);</span>
    <span class="n">client</span><span class="o">.</span><span class="na">execute</span><span class="o">();</span>

    <span class="c1">// Parse Payment result</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">client</span><span class="o">.</span><span class="na">getResponse</span><span class="o">());</span>

  <span class="o">}</span>
<span class="o">}</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="kd">var</span> <span class="nx">genesis</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'genesis.js/lib/genesis.js'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">transaction</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">genesis</span><span class="p">.</span><span class="nx">transaction</span><span class="p">();</span>

<span class="kd">var</span> <span class="nx">failure</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">reason</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">reason</span><span class="p">);</span>
<span class="p">};</span>

<span class="kd">var</span> <span class="nx">success</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>

<span class="nx">transaction</span><span class="p">.</span><span class="nx">sale3d</span><span class="p">(</span>
  <span class="p">{</span>
    <span class="s2">"transaction_id"</span><span class="p">:</span> <span class="s2">"43671"</span><span class="p">,</span>
    <span class="s2">"usage"</span><span class="p">:</span> <span class="s2">"40208 concert tickets"</span><span class="p">,</span>
    <span class="s2">"remote_ip"</span><span class="p">:</span> <span class="s2">"245.253.2.12"</span><span class="p">,</span>
    <span class="s2">"reference_id"</span><span class="p">:</span> <span class="s2">"406bc1b340472db4dbbba4b749850234"</span><span class="p">,</span>
    <span class="s2">"amount"</span><span class="p">:</span> <span class="s2">"500"</span><span class="p">,</span>
    <span class="s2">"currency"</span><span class="p">:</span> <span class="s2">"EUR"</span><span class="p">,</span>
    <span class="s2">"card_holder"</span><span class="p">:</span> <span class="s2">"Travis Pastrana"</span><span class="p">,</span>
    <span class="s2">"card_number"</span><span class="p">:</span> <span class="s2">"4711100000000000"</span><span class="p">,</span>
    <span class="s2">"expiration_month"</span><span class="p">:</span> <span class="s2">"12"</span><span class="p">,</span>
    <span class="s2">"expiration_year"</span><span class="p">:</span> <span class="mi">2020</span><span class="p">,</span>
    <span class="s2">"cvv"</span><span class="p">:</span> <span class="s2">"834"</span><span class="p">,</span>
    <span class="s2">"customer_email"</span><span class="p">:</span> <span class="s2">"travis@example.com"</span><span class="p">,</span>
    <span class="s2">"customer_phone"</span><span class="p">:</span> <span class="s2">"+1987987987987"</span><span class="p">,</span>
    <span class="s2">"billing_address"</span><span class="p">:</span> <span class="p">{</span>
      <span class="s2">"first_name"</span><span class="p">:</span> <span class="s2">"Travis"</span><span class="p">,</span>
      <span class="s2">"last_name"</span><span class="p">:</span> <span class="s2">"Pastrana"</span><span class="p">,</span>
      <span class="s2">"address1"</span><span class="p">:</span> <span class="s2">"Muster Str. 12"</span><span class="p">,</span>
      <span class="s2">"zip_code"</span><span class="p">:</span> <span class="s2">"10178"</span><span class="p">,</span>
      <span class="s2">"city"</span><span class="p">:</span> <span class="s2">"Los Angeles"</span><span class="p">,</span>
      <span class="s2">"state"</span><span class="p">:</span> <span class="s2">"CA"</span><span class="p">,</span>
      <span class="s2">"country"</span><span class="p">:</span> <span class="s2">"US"</span>
    <span class="p">},</span>
    <span class="s2">"notification_url"</span><span class="p">:</span> <span class="s2">"https://www.example.com/notification"</span><span class="p">,</span>
    <span class="s2">"return_success_url"</span><span class="p">:</span> <span class="s2">"http://www.example.com/success.html"</span><span class="p">,</span>
    <span class="s2">"return_failure_url"</span><span class="p">:</span> <span class="s2">"http://www.example.com/failure.html"</span>
  <span class="p">}</span>
<span class="p">).</span><span class="nx">send</span><span class="p">()</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">success</span><span class="p">)</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">failure</span><span class="p">);</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>curl https://username:password@gate.emerchantpay.net/process/TERMINAL-TOKEN <span class="se">\</span>
   -H <span class="s2">"Content-Type: text/xml"</span> <span class="se">\</span>
   -d <span class="s1">'
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;sale3d&lt;/transaction_type&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;usage&gt;40208 concert tickets&lt;/usage&gt;
  &lt;remote_ip&gt;245.253.2.12&lt;/remote_ip&gt;
  &lt;reference_id&gt;406bc1b340472db4dbbba4b749850234&lt;/reference_id&gt;
  &lt;amount&gt;500&lt;/amount&gt;
  &lt;currency&gt;EUR&lt;/currency&gt;
  &lt;card_holder&gt;Travis Pastrana&lt;/card_holder&gt;
  &lt;card_number&gt;4711100000000000&lt;/card_number&gt;
  &lt;expiration_month&gt;12&lt;/expiration_month&gt;
  &lt;expiration_year&gt;2020&lt;/expiration_year&gt;
  &lt;cvv&gt;834&lt;/cvv&gt;
  &lt;customer_email&gt;travis@example.com&lt;/customer_email&gt;
  &lt;customer_phone&gt;+1987987987987&lt;/customer_phone&gt;
  &lt;billing_address&gt;
    &lt;first_name&gt;Travis&lt;/first_name&gt;
    &lt;last_name&gt;Pastrana&lt;/last_name&gt;
    &lt;address1&gt;Muster Str. 12&lt;/address1&gt;
    &lt;zip_code&gt;10178&lt;/zip_code&gt;
    &lt;city&gt;Los Angeles&lt;/city&gt;
    &lt;state&gt;CA&lt;/state&gt;
    &lt;country&gt;US&lt;/country&gt;
  &lt;/billing_address&gt;
  &lt;notification_url&gt;https://www.example.com/notification&lt;/notification_url&gt;
  &lt;return_success_url&gt;http://www.example.com/success.html&lt;/return_success_url&gt;
  &lt;return_failure_url&gt;http://www.example.com/failure.html&lt;/return_failure_url&gt;
&lt;/payment_transaction&gt;'</span>
</code></pre>

<p><strong>Request Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>required</td>
<td>string(255)</td>
<td>The transaction type: <strong>sale3d</strong></td>
</tr>
<tr>
<td>transaction_id</td>
<td>required</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>usage</td>
<td>optional</td>
<td>string(255)</td>
<td>Description of the transaction for later use</td>
</tr>
<tr>
<td>gaming</td>
<td>optional</td>
<td>&quot;true&quot;</td>
<td>Signifies whether a gaming transaction is performed. Gaming transactions usually use MCC 7995, contact tech support for more details.</td>
</tr>
<tr>
<td>moto</td>
<td>optional</td>
<td>&quot;true&quot;</td>
<td>Signifies whether a MOTO (mail order telephone order) transaction is performed. Contact tech support for more details.</td>
</tr>
<tr>
<td>remote_ip</td>
<td>required*</td>
<td>IPv4 address</td>
<td>IPv4 address of customer</td>
</tr>
<tr>
<td>reference_id</td>
<td>required</td>
<td>string(32)</td>
<td>The ’unique id’ of the initial split payment transaction</td>
</tr>
<tr>
<td>notification_url</td>
<td>required<sup>1</sup></td>
<td>url</td>
<td>URL at merchant where gateway sends outcome of transaction.</td>
</tr>
<tr>
<td>return_success_url</td>
<td>required<sup>1</sup></td>
<td>url</td>
<td>URL where customer is sent to after successful payment</td>
</tr>
<tr>
<td>return_failure_url</td>
<td>required<sup>1</sup></td>
<td>url</td>
<td>URL where customer is sent to after unsuccessful payment</td>
</tr>
<tr>
<td>amount</td>
<td>required</td>
<td>integer &gt; 0</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>required</td>
<td>string(3)</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>card_holder</td>
<td>required</td>
<td>string(255)</td>
<td>Full name of customer as printed on credit card (first name and last name at least)</td>
</tr>
<tr>
<td>card_number</td>
<td>required</td>
<td>13 to 16 digits</td>
<td>Complete cc number of customer</td>
</tr>
<tr>
<td>cvv</td>
<td>required</td>
<td>3 to 4 digits</td>
<td>cvv of cc, requirement is based on terminal configuration</td>
</tr>
<tr>
<td>expiration_month</td>
<td>required</td>
<td>MM</td>
<td>Expiration month as printed on credit card</td>
</tr>
<tr>
<td>expiration_year</td>
<td>required</td>
<td>YYYY</td>
<td>Expiration year as printed on credit card</td>
</tr>
<tr>
<td>customer_email</td>
<td>required*</td>
<td>e-mail address</td>
<td>Must contain valid e-mail of customer</td>
</tr>
<tr>
<td>customer_phone</td>
<td>required*</td>
<td>string(32)</td>
<td>Must contain valid phone number of customer</td>
</tr>
<tr>
<td>birth_date</td>
<td>required*</td>
<td>dd-mm-yyyy</td>
<td>Required for Visa only when MCC is a Financial Services one (e.g. MCC 6012)</td>
</tr>
<tr>
<td><strong>billing_address</strong></td>
<td>required</td>
<td></td>
<td>See <a href="#required-vs-optional-api-params">Required vs Optional API params</a> for details</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;first_name</td>
<td>required*</td>
<td>string(255)</td>
<td>Customer first name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;last_name</td>
<td>required*</td>
<td>string(255)</td>
<td>Customer last name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address1</td>
<td>required*</td>
<td>string(255)</td>
<td>Primary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address2</td>
<td>required*</td>
<td>string(255)</td>
<td>Secondary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;zip_code</td>
<td>required*</td>
<td>string</td>
<td>ZIP code</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;city</td>
<td>required*</td>
<td>string(255)</td>
<td>City</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;state</td>
<td>required*</td>
<td>string(2)</td>
<td>State code in <a href="https://en.wikipedia.org/wiki/ISO_3166-2">ISO 3166-2</a>, required for USA and Canada</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;country</td>
<td>required*</td>
<td>string(2)</td>
<td>Country code in <a href="https://www.iso.org/iso-3166-country-codes.html">ISO 3166</a></td>
</tr>
<tr>
<td><strong>shipping_address</strong></td>
<td>optional</td>
<td></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;first_name</td>
<td>optional</td>
<td>string(255)</td>
<td>Customer first name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;last_name</td>
<td>optional</td>
<td>string(255)</td>
<td>Customer last name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address1</td>
<td>optional</td>
<td>string(255)</td>
<td>Primary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address2</td>
<td>optional</td>
<td>string(255)</td>
<td>Secondary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;zip_code</td>
<td>optional</td>
<td>string</td>
<td>ZIP code</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;city</td>
<td>optional</td>
<td>string(255)</td>
<td>City</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;state</td>
<td>optional</td>
<td>string(2)</td>
<td>State code in <a href="https://en.wikipedia.org/wiki/ISO_3166-2">ISO 3166-2</a>, required for USA and Canada</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;country</td>
<td>optional</td>
<td>string(2)</td>
<td>Country code in <a href="https://www.iso.org/iso-3166-country-codes.html">ISO 3166</a></td>
</tr>
<tr>
<td><strong>mpi_params</strong></td>
<td>required<sup>2</sup></td>
<td></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;cavv</td>
<td>required<sup>3</sup></td>
<td>string(255)</td>
<td>Verification Id of the authentication. Please note this can be the CAVV for Visa Card or UCAF to identify MasterCard.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;eci</td>
<td>required<sup>3</sup></td>
<td>string(255)</td>
<td>See <a href="#electronic-commerce-indicator">Electronic Commerce Indicator as returned from the MPI</a> for details</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;xid</td>
<td>required<sup>3</sup></td>
<td>string(255)</td>
<td>Transaction ID generated by the 3D Secure service that uniquely identifies a 3D Secure check request</td>
</tr>
<tr>
<td><strong>dynamic_descriptor_params</strong></td>
<td>optional</td>
<td></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;merchant_name</td>
<td>optional</td>
<td>string(25)</td>
<td>Allows to dynamically override the charge descriptor</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;merchant_city</td>
<td>optional</td>
<td>string(13)</td>
<td>Allows to dynamically override the merchant phone number</td>
</tr>
</tbody></table>

<p><code>required* = conditionally required</code></p>

<p><code>1 - required if mpi_params is not present, transaction will be handled asynchronous.</code></p>

<p><code>2 - required if transaction should be handled synchronous.</code></p>

<p><code>3 - eci is always required if mpi_params is present. xid and cavv are not required for the 3D attempted only workflow, where the merchant does not have the xid/cavv, only the eci.</code></p>

<blockquote>
<p>Successful Asynchronous Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>stdClass Object
(
    [transaction_type] =&gt; sale3d
    [status] =&gt; pending_async
    [mode] =&gt; live
    [transaction_id] =&gt; 43671
    [unique_id] =&gt; 44177a21403427eb96664a6d7e5d5d48
    [technical_message] =&gt; Transaction successful!
    [message] =&gt; Transaction successful!
    [redirect_url] =&gt; https://gate.emerchantpay.net/redirect/to_acquirer/649e1ff35c61
    [timestamp] =&gt; DateTime Object
        (
            [date] =&gt; 2019-03-14 12:06:02.000000
            [timezone_type] =&gt; 2
            [timezone] =&gt; Z
        )
    [descriptor] =&gt; Descriptor one
    [amount] =&gt; 500
    [currency] =&gt; EUR
    [split_payment] =&gt; finalized
    [leftover_amount] =&gt; 0
    [sent_to_acquirer] =&gt; true
)
</code></pre>

<pre class="highlight java tab-java"><code><span class="o">&lt;</span><span class="n">payment_response</span> <span class="n">content</span><span class="o">=[</span>
    <span class="o">&lt;</span><span class="n">transaction_type</span> <span class="n">content</span><span class="o">=[</span><span class="n">sale3d</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">status</span> <span class="n">content</span><span class="o">=[</span><span class="n">pending_async</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">mode</span> <span class="n">content</span><span class="o">=[</span><span class="n">live</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">transaction_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">43671</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">unique_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">44177</span><span class="n">a21403427eb96664a6d7e5d5d48</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">technical_message</span> <span class="n">content</span><span class="o">=[</span><span class="n">Transaction</span> <span class="n">successful</span><span class="o">!]&gt;</span>
    <span class="o">&lt;</span><span class="n">message</span> <span class="n">content</span><span class="o">=[</span><span class="n">Transaction</span> <span class="n">successful</span><span class="o">!]&gt;</span>
    <span class="o">&lt;</span><span class="n">redirect_url</span> <span class="n">content</span><span class="o">=[</span><span class="nl">https:</span><span class="c1">//gate.emerchantpay.net/redirect/to_acquirer/649e1ff35c61]&gt;</span>
    <span class="o">&lt;</span><span class="n">timestamp</span> <span class="n">content</span><span class="o">=[</span><span class="mi">2019</span><span class="o">-</span><span class="mo">03</span><span class="o">-</span><span class="mi">14</span><span class="nl">T12:</span><span class="mo">06</span><span class="o">:</span><span class="mo">02</span><span class="n">Z</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">descriptor</span> <span class="n">content</span><span class="o">=[</span><span class="n">Descriptor</span> <span class="n">one</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">amount</span> <span class="n">content</span><span class="o">=[</span><span class="mi">500</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">currency</span> <span class="n">content</span><span class="o">=[</span><span class="n">EUR</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">split_payment</span> <span class="n">content</span><span class="o">=[</span><span class="n">finalized</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">leftover_amount</span> <span class="n">content</span><span class="o">=[</span><span class="mi">0</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">sent_to_acquirer</span> <span class="n">content</span><span class="o">=[</span><span class="kc">true</span><span class="o">]&gt;</span>
<span class="o">]&gt;</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="p">{</span>
    <span class="nl">transaction_type</span><span class="p">:</span> <span class="s2">"sale3d"</span><span class="p">,</span>
    <span class="nx">status</span><span class="p">:</span> <span class="s2">"pending_async"</span><span class="p">,</span>
    <span class="nx">mode</span><span class="p">:</span> <span class="s2">"live"</span><span class="p">,</span>
    <span class="nx">transaction_id</span><span class="p">:</span> <span class="s2">"43671"</span><span class="p">,</span>
    <span class="nx">unique_id</span><span class="p">:</span> <span class="s2">"44177a21403427eb96664a6d7e5d5d48"</span><span class="p">,</span>
    <span class="nx">technical_message</span><span class="p">:</span> <span class="s2">"Transaction successful!"</span><span class="p">,</span>
    <span class="nx">message</span><span class="p">:</span> <span class="s2">"Transaction successful!"</span><span class="p">,</span>
    <span class="nx">redirect_url</span><span class="p">:</span> <span class="s2">"https://gate.emerchantpay.net/redirect/to_acquirer/649e1ff35c61"</span><span class="p">,</span>
    <span class="nx">timestamp</span><span class="p">:</span> <span class="s2">"2019-03-14T12:06:02Z"</span><span class="p">,</span>
    <span class="nx">descriptor</span><span class="p">:</span> <span class="s2">"Descriptor one"</span><span class="p">,</span>
    <span class="nx">amount</span><span class="p">:</span> <span class="s2">"500"</span><span class="p">,</span>
    <span class="nx">currency</span><span class="p">:</span> <span class="s2">"EUR"</span><span class="p">,</span>
    <span class="nx">split_payment</span><span class="p">:</span> <span class="s2">"finalized"</span><span class="p">,</span>
    <span class="nx">leftover_amount</span><span class="p">:</span> <span class="s2">"0"</span><span class="p">,</span>
    <span class="nx">sent_to_acquirer</span><span class="p">:</span> <span class="s2">"true"</span><span class="p">,</span>
<span class="p">}</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;sale3d&lt;/transaction_type&gt;
  &lt;status&gt;pending_async&lt;/status&gt;
  &lt;mode&gt;live&lt;/mode&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;technical_message&gt;Transaction successful!&lt;/technical_message&gt;
  &lt;message&gt;Transaction successful!&lt;/message&gt;
  &lt;redirect_url&gt;https://gate.emerchantpay.net/redirect/to_acquirer/649e1ff35c61&lt;/redirect_url&gt;
  &lt;timestamp&gt;2019-03-14T12:06:02Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;amount&gt;500&lt;/amount&gt;
  &lt;currency&gt;EUR&lt;/currency&gt;
  &lt;split_payment&gt;finalized&lt;/split_payment&gt;
  &lt;leftover_amount&gt;0&lt;/leftover_amount&gt;
  &lt;sent_to_acquirer&gt;true&lt;/sent_to_acquirer&gt;
&lt;/payment_transaction&gt;
</code></pre>

<p><strong>Successful Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>The transaction type</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>transaction_id</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>unique_id</td>
<td>string(32)</td>
<td>Unique id defined by gate (must later be used if capturing, voiding or refunding a transaction)</td>
</tr>
<tr>
<td>gaming</td>
<td>string</td>
<td>Signifies whether a gaming transaction is performed. Gaming transactions usually use MCC 7995, contact tech support for more details.</td>
</tr>
<tr>
<td>moto</td>
<td>string</td>
<td>Signifies whether a MOTO (mail order telephone order) transaction is performed. Contact tech support for more details.</td>
</tr>
<tr>
<td>avs_response_code</td>
<td>string</td>
<td>Generated by the card network on trying to match the billing address when performing the address verification. Optional, returned if config is enabled and acquirer supports it. Check <a href="#avs-status-codes">AVS Status Codes</a> for details.</td>
</tr>
<tr>
<td>avs_response_text</td>
<td>string</td>
<td>Gives the human response text for the AVS response code above. Optional, returned if config is enabled and acquirer supports it. Check [AVS Status Codes](#avs-status-codes for details.</td>
</tr>
<tr>
<td>authorization_code</td>
<td>string(6)</td>
<td>Generated by the card network when an authorisation has occurred, used to identify that auth. Consists of 6 alphanumeric chars</td>
</tr>
<tr>
<td>response_code</td>
<td>string(2)</td>
<td>Defines the issuer result of a transaction, the status of a message or some action taken or required. See <a href="#issuer-response-codes">issuer response codes</a> for details</td>
</tr>
<tr>
<td>redirect_url</td>
<td>url</td>
<td>URL where user has to be redirected to complete payment process. It is available for asynchronous mode</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when the transaction was processed in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Combined date and time</a> e.g. 2007-08- 30T17:46:11Z</td>
</tr>
<tr>
<td>descriptor</td>
<td>string</td>
<td>Static descriptor MID info as configured on the gateway</td>
</tr>
<tr>
<td>amount</td>
<td>integer</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>partial_approval</td>
<td>string(4)</td>
<td>Optional, set to ’true’ if partial approval happened. Partially approved amount is then in the amount field. Check <a href="#partial-approvals">Partial Approvals</a> for details</td>
</tr>
<tr>
<td>split_payment</td>
<td>string</td>
<td>Split payment status for this transaction. Should be ’finalized’.</td>
</tr>
<tr>
<td>leftover_amount</td>
<td>integer</td>
<td>Leftover amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency Handling</a> for details</td>
</tr>
<tr>
<td>sent_to_acquirer</td>
<td>string</td>
<td>&quot;true&quot; or &quot;false&quot;</td>
</tr>
<tr>
<td>dynamic_descriptor_params</td>
<td>section</td>
<td>Optional, returned only if dynamic desc params are submitted on the API. Note here that the formatted dyn desc params are returned - as they would be submitted to the schemes for settlement.</td>
</tr>
</tbody></table>

<blockquote>
<p>Error Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>stdClass Object
(
    [transaction_type] =&gt; sale3d
    [status] =&gt; error
    [mode] =&gt; live
    [transaction_id] =&gt; 43671
    [unique_id] =&gt; 44177a21403427eb96664a6d7e5d5d48
    [response_code] =&gt; 57
    [code] =&gt; 340
    [technical_message] =&gt; expiration_year is invalid
    [message] =&gt; expiration_year is invalid
    [timestamp] =&gt; DateTime Object
        (
            [date] =&gt; 2019-03-14 12:06:02.000000
            [timezone_type] =&gt; 2
            [timezone] =&gt; Z
        )
    [descriptor] =&gt; Descriptor one
    [amount] =&gt; 500
    [currency] =&gt; EUR
    [sent_to_acquirer] =&gt; false
)
</code></pre>

<pre class="highlight java tab-java"><code><span class="o">&lt;</span><span class="n">payment_response</span> <span class="n">content</span><span class="o">=[</span>
    <span class="o">&lt;</span><span class="n">transaction_type</span> <span class="n">content</span><span class="o">=[</span><span class="n">sale3d</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">status</span> <span class="n">content</span><span class="o">=[</span><span class="n">error</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">mode</span> <span class="n">content</span><span class="o">=[</span><span class="n">live</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">transaction_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">43671</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">unique_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">44177</span><span class="n">a21403427eb96664a6d7e5d5d48</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">response_code</span> <span class="n">content</span><span class="o">=[</span><span class="mi">57</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">code</span> <span class="n">content</span><span class="o">=[</span><span class="mi">340</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">technical_message</span> <span class="n">content</span><span class="o">=[</span><span class="n">expiration_year</span> <span class="n">is</span> <span class="n">invalid</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">message</span> <span class="n">content</span><span class="o">=[</span><span class="n">expiration_year</span> <span class="n">is</span> <span class="n">invalid</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">timestamp</span> <span class="n">content</span><span class="o">=[</span><span class="mi">2019</span><span class="o">-</span><span class="mo">03</span><span class="o">-</span><span class="mi">14</span><span class="nl">T12:</span><span class="mo">06</span><span class="o">:</span><span class="mo">02</span><span class="n">Z</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">descriptor</span> <span class="n">content</span><span class="o">=[</span><span class="n">Descriptor</span> <span class="n">one</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">amount</span> <span class="n">content</span><span class="o">=[</span><span class="mi">500</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">currency</span> <span class="n">content</span><span class="o">=[</span><span class="n">EUR</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">sent_to_acquirer</span> <span class="n">content</span><span class="o">=[</span><span class="kc">false</span><span class="o">]&gt;</span>
<span class="o">]&gt;</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="p">{</span>
    <span class="nl">transaction_type</span><span class="p">:</span> <span class="s2">"sale3d"</span><span class="p">,</span>
    <span class="nx">status</span><span class="p">:</span> <span class="s2">"error"</span><span class="p">,</span>
    <span class="nx">mode</span><span class="p">:</span> <span class="s2">"live"</span><span class="p">,</span>
    <span class="nx">transaction_id</span><span class="p">:</span> <span class="s2">"43671"</span><span class="p">,</span>
    <span class="nx">unique_id</span><span class="p">:</span> <span class="s2">"44177a21403427eb96664a6d7e5d5d48"</span><span class="p">,</span>
    <span class="nx">response_code</span><span class="p">:</span> <span class="s2">"57"</span><span class="p">,</span>
    <span class="nx">code</span><span class="p">:</span> <span class="s2">"340"</span><span class="p">,</span>
    <span class="nx">technical_message</span><span class="p">:</span> <span class="s2">"expiration_year is invalid"</span><span class="p">,</span>
    <span class="nx">message</span><span class="p">:</span> <span class="s2">"expiration_year is invalid"</span><span class="p">,</span>
    <span class="nx">timestamp</span><span class="p">:</span> <span class="s2">"2019-03-14T12:06:02Z"</span><span class="p">,</span>
    <span class="nx">descriptor</span><span class="p">:</span> <span class="s2">"Descriptor one"</span><span class="p">,</span>
    <span class="nx">amount</span><span class="p">:</span> <span class="s2">"500"</span><span class="p">,</span>
    <span class="nx">currency</span><span class="p">:</span> <span class="s2">"EUR"</span><span class="p">,</span>
    <span class="nx">sent_to_acquirer</span><span class="p">:</span> <span class="s2">"false"</span><span class="p">,</span>
<span class="p">}</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;sale3d&lt;/transaction_type&gt;
  &lt;status&gt;error&lt;/status&gt;
  &lt;mode&gt;live&lt;/mode&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;response_code&gt;57&lt;/response_code&gt;
  &lt;code&gt;340&lt;/code&gt;
  &lt;technical_message&gt;expiration_year is invalid&lt;/technical_message&gt;
  &lt;message&gt;expiration_year is invalid&lt;/message&gt;
  &lt;timestamp&gt;2019-03-14T12:06:02Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;amount&gt;500&lt;/amount&gt;
  &lt;currency&gt;EUR&lt;/currency&gt;
  &lt;sent_to_acquirer&gt;false&lt;/sent_to_acquirer&gt;
&lt;/payment_transaction&gt;
</code></pre>

<p><strong>Error Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>The transaction type</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>transaction_id</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>unique_id</td>
<td>string(32)</td>
<td>Unique id defined by gate (must later be used if capturing, voiding or refunding a transaction)</td>
</tr>
<tr>
<td>gaming</td>
<td>string</td>
<td>Signifies whether a gaming transaction is performed. Gaming transactions usually use MCC 7995, contact tech support for more details.</td>
</tr>
<tr>
<td>moto</td>
<td>string</td>
<td>Signifies whether a MOTO (mail order telephone order) transaction is performed. Contact tech support for more details.</td>
</tr>
<tr>
<td>response_code</td>
<td>string(2)</td>
<td>Defines the issuer result of a transaction, the status of a message or some action taken or required. See <a href="#issuer-response-codes">issuer response codes</a> for details</td>
</tr>
<tr>
<td>code</td>
<td>integer</td>
<td>Error code according to <a href="#error-code-table">Error code table</a></td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
<tr>
<td>message</td>
<td>string(255)</td>
<td>Human readable error message which can be displayed to users.</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when the transaction was processed in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Combined date and time</a> e.g. 2007-08- 30T17:46:11Z</td>
</tr>
<tr>
<td>descriptor</td>
<td>string</td>
<td>Static descriptor MID info as configured on the gateway</td>
</tr>
<tr>
<td>amount</td>
<td>integer</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>sent_to_acquirer</td>
<td>string</td>
<td>&quot;true&quot; or &quot;false&quot;</td>
</tr>
<tr>
<td>dynamic_descriptor_params</td>
<td>section</td>
<td>Optional, returned only if dynamic desc params are submitted on the API. Note here that the formatted dyn desc params are returned - as they would be submitted to the schemes for settlement.</td>
</tr>
</tbody></table>

<p><strong>Voiding of split payments:</strong></p>

<ul>
<li>Voiding of any transaction in unfinished split payment (while still pending async) will cause rollback of all other transactions in split payment series. The current transaction will appear as voided while the other transaction will become declined.</li>
<li>Voiding any transaction after the split payment has been completed will cause voiding only of the single transaction. In order to revert such split payment you need to manually void all transactions in it.</li>
<li>The above points are valid also for refunding the transactions if the gift card gateway supports refund.</li>
</ul>

<p><strong>Split Payment Timeouts:</strong></p>

<ul>
<li>All unfinished split payments will be automatically timed out after a period of time and all transactions in them will be rollbacked.</li>
<li>If the split payment is finished with async 3D credit card transaction the split payment will be timed out according to the mpi timeout of the final transaction.</li>
</ul>
<h2 id='invoice-payment-methods'>Invoice Payment Methods</h2>
<p>Alternative payments refers to payment methods that are used as an alternative to credit card payments.</p>

<p>Each alternative payment method has its own unique application, settlement process and currency support.</p>
<h3 id='klarna-authorize'>Klarna Authorize</h3>
<aside class="notice">
Klarna is a Swedish e-commerce company that provides payment services for online stores.
</aside>

<p><strong>With Klarna Authorize transactions, you can confirm that an order is successful.</strong></p>

<p>After settling the transaction (e.g. shipping the goods), you should use klarna capture transaction
type to capture the amount.</p>

<p>Klarna authorize transaction will automatically be cancelled after a certain time frame, most likely
two weeks.</p>

<p>For a typical e-commerce application it is recommended to authorize the amount on incoming orders
and capture it when shipping the goods.</p>

<p>If you choose not to serve the customer, consider to void the klarna authorize to cancel the initial
transaction.</p>

<blockquote>
<p>Request</p>
</blockquote>

<pre class="highlight php tab-php"><code><span class="cp">&lt;?php</span>

<span class="c1">// Load the pre-configured ini file...
</span><span class="nx">\Genesis\Config</span><span class="o">::</span><span class="na">loadSettings</span><span class="p">(</span><span class="s1">'/path/to/config.ini'</span><span class="p">);</span>

<span class="nv">$genesis</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Genesis</span><span class="p">(</span><span class="s1">'Financial\Alternatives\Klarna\Authorize'</span><span class="p">);</span>
<span class="nv">$request</span> <span class="o">=</span> <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">request</span><span class="p">();</span>

<span class="nv">$request</span>
  <span class="o">-&gt;</span><span class="na">setTransactionId</span><span class="p">(</span><span class="s1">'43671'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setNotificationUrl</span><span class="p">(</span><span class="s1">'https://www.example.com/notification'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setReturnSuccessUrl</span><span class="p">(</span><span class="s1">'http://www.example.com/success'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setReturnFailureUrl</span><span class="p">(</span><span class="s1">'http://www.example.com/failure'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setReturnCancelUrl</span><span class="p">(</span><span class="s1">'http://www.example.com/cancel'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setUsage</span><span class="p">(</span><span class="s1">'40208 concert tickets'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setRemoteIp</span><span class="p">(</span><span class="s1">'245.253.2.12'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setAmount</span><span class="p">(</span><span class="s1">'60'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCurrency</span><span class="p">(</span><span class="s1">'USD'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCustomerPhone</span><span class="p">(</span><span class="s1">'+1987987987987'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCustomerEmail</span><span class="p">(</span><span class="s1">'travis@example.com'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCustomerGender</span><span class="p">(</span><span class="s1">'male'</span><span class="p">)</span>


  <span class="c1">// Billing Address
</span>  <span class="o">-&gt;</span><span class="na">setBillingFirstName</span><span class="p">(</span><span class="s1">'Travis'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingLastName</span><span class="p">(</span><span class="s1">'Pastrana'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingAddress1</span><span class="p">(</span><span class="s1">'Muster Str. 12'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingZipCode</span><span class="p">(</span><span class="s1">'10178'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingCity</span><span class="p">(</span><span class="s1">'Los Angeles'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingState</span><span class="p">(</span><span class="s1">'CA'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingCountry</span><span class="p">(</span><span class="s1">'US'</span><span class="p">)</span>


  <span class="c1">// Shipping Address
</span>  <span class="o">-&gt;</span><span class="na">setShippingFirstName</span><span class="p">(</span><span class="s1">'Travis'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setShippingLastName</span><span class="p">(</span><span class="s1">'Pastrana'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setShippingAddress1</span><span class="p">(</span><span class="s1">'Muster Str. 12'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setShippingZipCode</span><span class="p">(</span><span class="s1">'10001'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setShippingCity</span><span class="p">(</span><span class="s1">'Los Angeles'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setShippingState</span><span class="p">(</span><span class="s1">'CA'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setShippingCountry</span><span class="p">(</span><span class="s1">'US'</span><span class="p">);</span>

<span class="c1">// Klarna Items
</span><span class="nv">$items</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">\Genesis\API\Request\Financial\Alternatives\Klarna\Items</span><span class="p">(</span><span class="s1">'USD'</span><span class="p">);</span>
<span class="nv">$item</span>  <span class="o">=</span> <span class="k">new</span> <span class="nx">\Genesis\API\Request\Financial\Alternatives\Klarna\Item</span><span class="p">();</span>
<span class="nv">$item</span>
  <span class="o">-&gt;</span><span class="na">setItemType</span><span class="p">(</span><span class="s1">'physical'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setReference</span><span class="p">(</span><span class="s1">'19-402-USA'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setName</span><span class="p">(</span><span class="s1">'BatteryPowerPack'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setQuantity</span><span class="p">(</span><span class="s1">'1'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setUnitPrice</span><span class="p">(</span><span class="s1">'60'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setTaxRate</span><span class="p">(</span><span class="s1">'0'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setTotalAmount</span><span class="p">(</span><span class="s1">'60'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setTotalDiscountAmount</span><span class="p">(</span><span class="s1">'0'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setTotalTaxAmount</span><span class="p">(</span><span class="s1">'0'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setImageUrl</span><span class="p">(</span><span class="s1">'https://example.com/image_url'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setProductUrl</span><span class="p">(</span><span class="s1">'https://example.com/product_url'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setQuantityUnit</span><span class="p">(</span><span class="s1">'pcs'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">addMerchantMarketplaceSellerInfo</span><span class="p">(</span><span class="s1">'Electronic gadgets'</span><span class="p">)</span>
<span class="nv">$items</span><span class="o">-&gt;</span><span class="na">addItem</span><span class="p">(</span><span class="nv">$item</span><span class="p">);</span>

<span class="nv">$request</span><span class="o">-&gt;</span><span class="na">setItems</span><span class="p">(</span><span class="nv">$items</span><span class="p">);</span>

<span class="k">try</span> <span class="p">{</span>
    <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">execute</span><span class="p">();</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">response</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">getResponseObject</span><span class="p">();</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">\Exception</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$e</span><span class="o">-&gt;</span><span class="na">getMessage</span><span class="p">();</span>
<span class="p">}</span>
</code></pre>

<pre class="highlight java tab-java"><code><span class="n">This</span> <span class="n">request</span> <span class="n">is</span> <span class="n">not</span> <span class="n">implemented</span> <span class="n">yet</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>curl https://username:password@gate.emerchantpay.net/process/TERMINAL-TOKEN <span class="se">\</span>
   -H <span class="s2">"Content-Type: text/xml"</span> <span class="se">\</span>
   -d <span class="s1">'
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;klarna_authorize&lt;/transaction_type&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;notification_url&gt;https://www.example.com/notification&lt;/notification_url&gt;
  &lt;return_success_url&gt;http://www.example.com/success&lt;/return_success_url&gt;
  &lt;return_failure_url&gt;http://www.example.com/failure&lt;/return_failure_url&gt;
  &lt;return_cancel_url&gt;http://www.example.com/cancel&lt;/return_cancel_url&gt;
  &lt;usage&gt;40208 concert tickets&lt;/usage&gt;
  &lt;remote_ip&gt;245.253.2.12&lt;/remote_ip&gt;
  &lt;amount&gt;60&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
  &lt;customer_phone&gt;+1987987987987&lt;/customer_phone&gt;
  &lt;customer_email&gt;travis@example.com&lt;/customer_email&gt;
  &lt;customer_gender&gt;male&lt;/customer_gender&gt;
  &lt;order_tax_amount&gt;0&lt;/order_tax_amount&gt;
  &lt;billing_address&gt;
    &lt;first_name&gt;Travis&lt;/first_name&gt;
    &lt;last_name&gt;Pastrana&lt;/last_name&gt;
    &lt;address1&gt;Muster Str. 12&lt;/address1&gt;
    &lt;zip_code&gt;10178&lt;/zip_code&gt;
    &lt;city&gt;Los Angeles&lt;/city&gt;
    &lt;state&gt;CA&lt;/state&gt;
    &lt;country&gt;US&lt;/country&gt;
  &lt;/billing_address&gt;
  &lt;shipping_address&gt;
    &lt;first_name&gt;Travis&lt;/first_name&gt;
    &lt;last_name&gt;Pastrana&lt;/last_name&gt;
    &lt;address1&gt;Muster Str. 12&lt;/address1&gt;
    &lt;zip_code&gt;10001&lt;/zip_code&gt;
    &lt;city&gt;Los Angeles&lt;/city&gt;
    &lt;state&gt;CA&lt;/state&gt;
    &lt;country&gt;US&lt;/country&gt;
  &lt;/shipping_address&gt;
  &lt;items&gt;
    &lt;item&gt;
      &lt;item_type&gt;physical&lt;/item_type&gt;
      &lt;reference&gt;19-402-USA&lt;/reference&gt;
      &lt;name&gt;BatteryPowerPack&lt;/name&gt;
      &lt;quantity&gt;1&lt;/quantity&gt;
      &lt;unit_price&gt;60&lt;/unit_price&gt;
      &lt;tax_rate&gt;0&lt;/tax_rate&gt;
      &lt;total_amount&gt;60&lt;/total_amount&gt;
      &lt;total_discount_amount&gt;0&lt;/total_discount_amount&gt;
      &lt;total_tax_amount&gt;0&lt;/total_tax_amount&gt;
      &lt;image_url&gt;https://example.com/image_url&lt;/image_url&gt;
      &lt;product_url&gt;https://example.com/product_url&lt;/product_url&gt;
      &lt;quantity_unit&gt;pcs&lt;/quantity_unit&gt;
      &lt;merchant_data&gt;
        &lt;marketplace_seller_info&gt;Electronic gadgets&lt;/marketplace_seller_info&gt;
      &lt;/merchant_data&gt;
    &lt;/item&gt;
  &lt;/items&gt;
&lt;/payment_transaction&gt;'</span>
</code></pre>

<p><strong>Request Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>required</td>
<td>string(255)</td>
<td>The transaction type: <strong>klarna_authorize</strong></td>
</tr>
<tr>
<td>transaction_id</td>
<td>required</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>usage</td>
<td>optional</td>
<td>string(255)</td>
<td>Description of the transaction for later use</td>
</tr>
<tr>
<td>remote_ip</td>
<td>required</td>
<td>IPv4 address</td>
<td>IPv4 address of customer</td>
</tr>
<tr>
<td>return_success_url</td>
<td>required</td>
<td>url</td>
<td>URL where customer is sent to after successful payment</td>
</tr>
<tr>
<td>return_failure_url</td>
<td>required</td>
<td>url</td>
<td>URL where customer is sent to after unsuccessful payment</td>
</tr>
<tr>
<td>amount</td>
<td>required</td>
<td>integer &gt; 0</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>required</td>
<td>string(3)</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td><strong>billing_address</strong></td>
<td>required</td>
<td></td>
<td>See <a href="#required-vs-optional-api-params">Required vs Optional API params</a> for details</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;first_name</td>
<td>required*</td>
<td>string(255)</td>
<td>Customer first name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;last_name</td>
<td>required*</td>
<td>string(255)</td>
<td>Customer last name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address1</td>
<td>required*</td>
<td>string(255)</td>
<td>Primary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address2</td>
<td>required*</td>
<td>string(255)</td>
<td>Secondary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;zip_code</td>
<td>required*</td>
<td>string</td>
<td>ZIP code</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;city</td>
<td>required*</td>
<td>string(255)</td>
<td>City</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;state</td>
<td>required*</td>
<td>string(2)</td>
<td>State code in <a href="https://en.wikipedia.org/wiki/ISO_3166-2">ISO 3166-2</a>, required for USA and Canada</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;country</td>
<td>required</td>
<td>string(2)</td>
<td>Country code in <a href="https://www.iso.org/iso-3166-country-codes.html">ISO 3166</a></td>
</tr>
<tr>
<td><strong>shipping_address</strong></td>
<td>optional</td>
<td></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;first_name</td>
<td>required*</td>
<td>string(255)</td>
<td>Customer first name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;last_name</td>
<td>required*</td>
<td>string(255)</td>
<td>Customer last name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address1</td>
<td>required*</td>
<td>string(255)</td>
<td>Primary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address2</td>
<td>required*</td>
<td>string(255)</td>
<td>Secondary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;zip_code</td>
<td>required*</td>
<td>string</td>
<td>ZIP code</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;city</td>
<td>required*</td>
<td>string(255)</td>
<td>City</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;state</td>
<td>required*</td>
<td>string(2)</td>
<td>State code in <a href="https://en.wikipedia.org/wiki/ISO_3166-2">ISO 3166-2</a>, required for USA and Canada</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;country</td>
<td>required</td>
<td>string(2)</td>
<td>Country code in <a href="https://www.iso.org/iso-3166-country-codes.html">ISO 3166</a></td>
</tr>
<tr>
<td>customer_gender</td>
<td>optional</td>
<td></td>
<td>Customer gender</td>
</tr>
<tr>
<td>order_tax_amount</td>
<td>required</td>
<td></td>
<td>Non-negative, minor units. The total tax amount of the order</td>
</tr>
<tr>
<td><strong>items</strong></td>
<td>required</td>
<td></td>
<td>List with items</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;item_type</td>
<td>required</td>
<td>string(255)</td>
<td>Order line type. Possible values: Supported item types</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;quantity</td>
<td>required</td>
<td>integer</td>
<td>Non-negative. The item quantity</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;unit_price</td>
<td>required</td>
<td>integer</td>
<td>Minor units. Includes tax, excludes discount(max value: 100000000)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;total_amount</td>
<td>required</td>
<td>integer</td>
<td>Includes tax and discount. Must match (quantity unit price) - total discount amount divided by quantity (max value: 100000000)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;reference</td>
<td>optional</td>
<td>string(255)</td>
<td>Article number, SKU or similar</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;name</td>
<td>optional</td>
<td>string(255)</td>
<td>Descriptive item name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;tax_rate</td>
<td>optional</td>
<td>integer</td>
<td>Non-negative. In percent, two implicit decimals. I.e 2500 = 25.00 percent</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;total_discount_amount</td>
<td>optional</td>
<td>integer</td>
<td>Non-negative minor units. Includes tax</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;total_tax_amount</td>
<td>optional</td>
<td>integer</td>
<td>Must be within 1 of total amount - total_amount * 10000 / (10000 + tax rate). Negative when type is discount</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;image_url</td>
<td>optional</td>
<td>url</td>
<td>URL to an image that can be later embedded in communications between Klarna and the customer. (max 1024 characters)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;product_url</td>
<td>optional</td>
<td>url</td>
<td>URL to an image that can be later embedded in communications between Klarna and the customer. (max 1024 characters)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;quantity_unit</td>
<td>optional</td>
<td>string(8)</td>
<td>Unit used to describe the quantity, e.g. kg, pcs... If defined has to be 1-8 characters</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;<strong>product_identifiers</strong></td>
<td>optional</td>
<td></td>
<td>List with product identifiers</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;brand</td>
<td>optional</td>
<td>string(255)</td>
<td>The product&#39;s brand name as generally recognized by consumers. If no brand is available for a product, do not supply any value</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;category_path</td>
<td>optional</td>
<td>string(255)</td>
<td>The product&#39;s category path as used in the merchant&#39;s webshop. Include the full and most detailed category and separate the segments with &#39; &gt; &#39;</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;global_trade_item_number</td>
<td>optional</td>
<td>string(255)</td>
<td>The product&#39;s Global Trade Item Number (GTIN). Common types of GTIN are EAN, ISBN or UPC. Exclude dashes and spaces, where possible</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;manufacturer_part_number</td>
<td>optional</td>
<td>string(255)</td>
<td>The product&#39;s Manufacturer Part Number (MPN), which - together with the brand - uniquely identifies a product. Only submit MPNs assigned by a manufacturer and use the most specific MPN possible</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;<strong>merchant_data</strong></td>
<td>optional</td>
<td></td>
<td>List with merchant data</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;marketplace_seller_info</td>
<td>optional</td>
<td>string(255)</td>
<td>Information for merchant marketplace</td>
</tr>
</tbody></table>

<p><code>required* = conditionally required</code></p>

<p>Supported countries:</p>

<table><thead>
<tr>
<th>Country</th>
<th>Country code</th>
</tr>
</thead><tbody>
<tr>
<td>Austria</td>
<td>AT</td>
</tr>
<tr>
<td>Denmark</td>
<td>DK</td>
</tr>
<tr>
<td>Finland</td>
<td>FI</td>
</tr>
<tr>
<td>Germany</td>
<td>DE</td>
</tr>
<tr>
<td>Netherlands</td>
<td>NL</td>
</tr>
<tr>
<td>Norway</td>
<td>NO</td>
</tr>
<tr>
<td>Sweden</td>
<td>SE</td>
</tr>
</tbody></table>

<p>Supported item types:</p>

<table><thead>
<tr>
<th>Item Types</th>
</tr>
</thead><tbody>
<tr>
<td>physical</td>
</tr>
<tr>
<td>discount</td>
</tr>
<tr>
<td>shipping fee</td>
</tr>
<tr>
<td>sales tax</td>
</tr>
<tr>
<td>digital</td>
</tr>
<tr>
<td>gift card</td>
</tr>
<tr>
<td>store credit</td>
</tr>
<tr>
<td>surcharge</td>
</tr>
</tbody></table>

<blockquote>
<p>Successful Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>stdClass Object
(
    [transaction_type] =&gt; klarna_authorize
    [status] =&gt; pending_async
    [mode] =&gt; live
    [transaction_id] =&gt; 43671
    [unique_id] =&gt; 44177a21403427eb96664a6d7e5d5d48
    [technical_message] =&gt; Transaction successful!
    [message] =&gt; Transaction successful!
    [redirect_url] =&gt; https://gate.emerchantpay.net/redirect/to_acquirer/649e1ff35c61
    [timestamp] =&gt; DateTime Object
        (
            [date] =&gt; 2019-03-14 12:06:02.000000
            [timezone_type] =&gt; 2
            [timezone] =&gt; Z
        )
    [descriptor] =&gt; Descriptor one
    [amount] =&gt; 60
    [currency] =&gt; USD
    [sent_to_acquirer] =&gt; true
)
</code></pre>

<pre class="highlight java tab-java"><code><span class="n">This</span> <span class="n">request</span> <span class="n">is</span> <span class="n">not</span> <span class="n">implemented</span> <span class="n">yet</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;klarna_authorize&lt;/transaction_type&gt;
  &lt;status&gt;pending_async&lt;/status&gt;
  &lt;mode&gt;live&lt;/mode&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;technical_message&gt;Transaction successful!&lt;/technical_message&gt;
  &lt;message&gt;Transaction successful!&lt;/message&gt;
  &lt;redirect_url&gt;https://gate.emerchantpay.net/redirect/to_acquirer/649e1ff35c61&lt;/redirect_url&gt;
  &lt;timestamp&gt;2019-03-14T12:06:02Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;amount&gt;60&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
  &lt;sent_to_acquirer&gt;true&lt;/sent_to_acquirer&gt;
&lt;/payment_transaction&gt;
</code></pre>

<p><strong>Successful Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>The transaction type</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>transaction_id</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>unique_id</td>
<td>string(32)</td>
<td>Unique id defined by gate (must later be used if capturing, voiding or refunding a transaction)</td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
<tr>
<td>message</td>
<td>string(255)</td>
<td>Human readable error message which can be displayed to users.</td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>redirect_url</td>
<td>url</td>
<td>URL where user has to be redirected to complete payment process. It is available for asynchronous mode</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when the transaction was processed in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Combined date and time</a> e.g. 2007-08- 30T17:46:11Z</td>
</tr>
<tr>
<td>descriptor</td>
<td>string</td>
<td>Static descriptor MID info as configured on the gateway</td>
</tr>
<tr>
<td>amount</td>
<td>integer</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>sent_to_acquirer</td>
<td>string</td>
<td>&quot;true&quot; or &quot;false&quot;</td>
</tr>
</tbody></table>

<blockquote>
<p>Error Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>stdClass Object
(
    [transaction_type] =&gt; klarna_authorize
    [status] =&gt; error
    [transaction_id] =&gt; 43671
    [unique_id] =&gt; 44177a21403427eb96664a6d7e5d5d48
    [code] =&gt; 340
    [message] =&gt; Something went wrong, please contact support!
    [timestamp] =&gt; DateTime Object
        (
            [date] =&gt; 2019-03-14 12:06:02.000000
            [timezone_type] =&gt; 2
            [timezone] =&gt; Z
        )
    [descriptor] =&gt; Descriptor one
    [amount] =&gt; 60
    [currency] =&gt; USD
    [sent_to_acquirer] =&gt; false
)
</code></pre>

<pre class="highlight java tab-java"><code><span class="n">This</span> <span class="n">request</span> <span class="n">is</span> <span class="n">not</span> <span class="n">implemented</span> <span class="n">yet</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;klarna_authorize&lt;/transaction_type&gt;
  &lt;status&gt;error&lt;/status&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;code&gt;340&lt;/code&gt;
  &lt;message&gt;Something went wrong, please contact support!&lt;/message&gt;
  &lt;timestamp&gt;2019-03-14T12:06:02Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;amount&gt;60&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
  &lt;sent_to_acquirer&gt;false&lt;/sent_to_acquirer&gt;
&lt;/payment_transaction&gt;
</code></pre>

<p><strong>Error Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>The transaction type</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>transaction_id</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>unique_id</td>
<td>string(32)</td>
<td>Unique id defined by gate (must later be used if capturing, voiding or refunding a transaction)</td>
</tr>
<tr>
<td>code</td>
<td>integer</td>
<td>Error code according to <a href="#error-code-table">Error code table</a></td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
<tr>
<td>message</td>
<td>string(255)</td>
<td>Human readable error message which can be displayed to users.</td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when the transaction was processed in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Combined date and time</a> e.g. 2007-08- 30T17:46:11Z</td>
</tr>
<tr>
<td>descriptor</td>
<td>string</td>
<td>Static descriptor MID info as configured on the gateway</td>
</tr>
<tr>
<td>amount</td>
<td>integer</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>sent_to_acquirer</td>
<td>string</td>
<td>&quot;true&quot; or &quot;false&quot;</td>
</tr>
</tbody></table>
<h3 id='klarna-capture'>Klarna Capture</h3>
<p><strong>Klarna capture settles a Klarna transaction.</strong></p>

<p>Do this when you are shipping goods, for example. A Klarna capture can only be used after an <a href="#klarna-authorize">klarna Authorize</a>
on the same transaction.</p>

<p>Therefore, the <code>reference_id</code> of the Klarna transaction is mandatory.</p>

<aside class="notice" >
You can also use klarna capture for partial amount of the initial klarna authorize amount but
klarna capture amount should be the same as the sum of items total amount. However, you cannot
capture a higher amount than initially authorized.
</aside>

<p><strong>Transaction workflow:</strong></p>

<ol>
<li>The merchant sends Klarna transaction to the gateway.</li>
<li>The gateway replies to it. One of returned values is the unique id of the transaction.</li>
<li>The merchant sends Klarna capture transaction. Its reference id is unique id of Klarna response.</li>
</ol>

<blockquote>
<p>Request</p>
</blockquote>

<pre class="highlight php tab-php"><code><span class="cp">&lt;?php</span>

<span class="c1">// Load the pre-configured ini file...
</span><span class="nx">\Genesis\Config</span><span class="o">::</span><span class="na">loadSettings</span><span class="p">(</span><span class="s1">'/path/to/config.ini'</span><span class="p">);</span>

<span class="nv">$genesis</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Genesis</span><span class="p">(</span><span class="s1">'Financial\Alternatives\Klarna\Capture'</span><span class="p">);</span>
<span class="nv">$request</span> <span class="o">=</span> <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">request</span><span class="p">();</span>

<span class="nv">$request</span>
  <span class="o">-&gt;</span><span class="na">setTransactionId</span><span class="p">(</span><span class="s1">'43671'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setUsage</span><span class="p">(</span><span class="s1">'40208 concert tickets'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setRemoteIp</span><span class="p">(</span><span class="s1">'245.253.2.12'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setReferenceId</span><span class="p">(</span><span class="s1">'43672'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setAmount</span><span class="p">(</span><span class="s1">'60'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCurrency</span><span class="p">(</span><span class="s1">'USD'</span><span class="p">);</span>

<span class="c1">// Klarna Items
</span><span class="nv">$items</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">\Genesis\API\Request\Financial\Alternatives\Klarna\Items</span><span class="p">(</span><span class="s1">'USD'</span><span class="p">);</span>
<span class="nv">$item</span>  <span class="o">=</span> <span class="k">new</span> <span class="nx">\Genesis\API\Request\Financial\Alternatives\Klarna\Item</span><span class="p">();</span>
<span class="nv">$item</span>
  <span class="o">-&gt;</span><span class="na">setItemType</span><span class="p">(</span><span class="s1">'physical'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setReference</span><span class="p">(</span><span class="s1">'19-402-USA'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setName</span><span class="p">(</span><span class="s1">'BatteryPowerPack'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setQuantity</span><span class="p">(</span><span class="s1">'1'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setUnitPrice</span><span class="p">(</span><span class="s1">'60'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setTaxRate</span><span class="p">(</span><span class="s1">'0'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setTotalAmount</span><span class="p">(</span><span class="s1">'60'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setTotalDiscountAmount</span><span class="p">(</span><span class="s1">'0'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setTotalTaxAmount</span><span class="p">(</span><span class="s1">'0'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setImageUrl</span><span class="p">(</span><span class="s1">'https://example.com/image_url'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setProductUrl</span><span class="p">(</span><span class="s1">'https://example.com/product_url'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setQuantityUnit</span><span class="p">(</span><span class="s1">'pcs'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">addMerchantMarketplaceSellerInfo</span><span class="p">(</span><span class="s1">'Electronic gadgets'</span><span class="p">)</span>
<span class="nv">$items</span><span class="o">-&gt;</span><span class="na">addItem</span><span class="p">(</span><span class="nv">$item</span><span class="p">);</span>

<span class="nv">$request</span><span class="o">-&gt;</span><span class="na">setItems</span><span class="p">(</span><span class="nv">$items</span><span class="p">);</span>

<span class="k">try</span> <span class="p">{</span>
    <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">execute</span><span class="p">();</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">response</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">getResponseObject</span><span class="p">();</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">\Exception</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$e</span><span class="o">-&gt;</span><span class="na">getMessage</span><span class="p">();</span>
<span class="p">}</span>
</code></pre>

<pre class="highlight java tab-java"><code><span class="n">This</span> <span class="n">request</span> <span class="n">is</span> <span class="n">not</span> <span class="n">implemented</span> <span class="n">yet</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>curl https://username:password@gate.emerchantpay.net/process/TERMINAL-TOKEN <span class="se">\</span>
   -H <span class="s2">"Content-Type: text/xml"</span> <span class="se">\</span>
   -d <span class="s1">'
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;klarna_capture&lt;/transaction_type&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;usage&gt;40208 concert tickets&lt;/usage&gt;
  &lt;remote_ip&gt;245.253.2.12&lt;/remote_ip&gt;
  &lt;reference_id&gt;43672&lt;/reference_id&gt;
  &lt;amount&gt;60&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
  &lt;items&gt;
    &lt;item&gt;
      &lt;item_type&gt;physical&lt;/item_type&gt;
      &lt;reference&gt;19-402-USA&lt;/reference&gt;
      &lt;name&gt;BatteryPowerPack&lt;/name&gt;
      &lt;quantity&gt;1&lt;/quantity&gt;
      &lt;unit_price&gt;60&lt;/unit_price&gt;
      &lt;tax_rate&gt;0&lt;/tax_rate&gt;
      &lt;total_amount&gt;60&lt;/total_amount&gt;
      &lt;total_discount_amount&gt;0&lt;/total_discount_amount&gt;
      &lt;total_tax_amount&gt;0&lt;/total_tax_amount&gt;
      &lt;image_url&gt;https://example.com/image_url&lt;/image_url&gt;
      &lt;product_url&gt;https://example.com/product_url&lt;/product_url&gt;
      &lt;quantity_unit&gt;pcs&lt;/quantity_unit&gt;
      &lt;merchant_data&gt;
        &lt;marketplace_seller_info&gt;Electronic gadgets&lt;/marketplace_seller_info&gt;
      &lt;/merchant_data&gt;
    &lt;/item&gt;
  &lt;/items&gt;
&lt;/payment_transaction&gt;'</span>
</code></pre>

<p><strong>Request Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>required</td>
<td>string(255)</td>
<td>The transaction type: <strong>klarna_capture</strong></td>
</tr>
<tr>
<td>transaction_id</td>
<td>required</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>usage</td>
<td>optional</td>
<td>string(255)</td>
<td>Description of the transaction for later use</td>
</tr>
<tr>
<td>remote_ip</td>
<td>required</td>
<td>IPv4 address</td>
<td>IPv4 address of customer</td>
</tr>
<tr>
<td>reference_id</td>
<td>required</td>
<td>string(32)</td>
<td>Unique id returned by corresponding transaction</td>
</tr>
<tr>
<td>amount</td>
<td>required</td>
<td>integer &gt; 0</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>required</td>
<td>string(3)</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td><strong>items</strong></td>
<td>required</td>
<td></td>
<td>List with items</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;item_type</td>
<td>required</td>
<td>string(255)</td>
<td>Order line type. Possible values: Supported item types</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;quantity</td>
<td>required</td>
<td>integer</td>
<td>Non-negative. The item quantity</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;unit_price</td>
<td>required</td>
<td>integer</td>
<td>Minor units. Includes tax, excludes discount(max value: 100000000)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;total_amount</td>
<td>required</td>
<td>integer</td>
<td>Includes tax and discount. Must match (quantity unit price) - total discount amount divided by quantity (max value: 100000000)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;reference</td>
<td>optional</td>
<td>string(255)</td>
<td>Article number, SKU or similar</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;name</td>
<td>optional</td>
<td>string(255)</td>
<td>Descriptive item name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;tax_rate</td>
<td>optional</td>
<td>integer</td>
<td>Non-negative. In percent, two implicit decimals. I.e 2500 = 25.00 percent</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;total_discount_amount</td>
<td>optional</td>
<td>integer</td>
<td>Non-negative minor units. Includes tax</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;total_tax_amount</td>
<td>optional</td>
<td>integer</td>
<td>Must be within 1 of total amount - total_amount * 10000 / (10000 + tax rate). Negative when type is discount</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;image_url</td>
<td>optional</td>
<td>url</td>
<td>URL to an image that can be later embedded in communications between Klarna and the customer. (max 1024 characters)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;product_url</td>
<td>optional</td>
<td>url</td>
<td>URL to an image that can be later embedded in communications between Klarna and the customer. (max 1024 characters)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;quantity_unit</td>
<td>optional</td>
<td>string(8)</td>
<td>Unit used to describe the quantity, e.g. kg, pcs... If defined has to be 1-8 characters</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;<strong>product_identifiers</strong></td>
<td>optional</td>
<td></td>
<td>List with product identifiers</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;brand</td>
<td>optional</td>
<td>string(255)</td>
<td>The product&#39;s brand name as generally recognized by consumers. If no brand is available for a product, do not supply any value</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;category_path</td>
<td>optional</td>
<td>string(255)</td>
<td>The product&#39;s category path as used in the merchant&#39;s webshop. Include the full and most detailed category and separate the segments with &#39; &gt; &#39;</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;global_trade_item_number</td>
<td>optional</td>
<td>string(255)</td>
<td>The product&#39;s Global Trade Item Number (GTIN). Common types of GTIN are EAN, ISBN or UPC. Exclude dashes and spaces, where possible</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;manufacturer_part_number</td>
<td>optional</td>
<td>string(255)</td>
<td>The product&#39;s Manufacturer Part Number (MPN), which - together with the brand - uniquely identifies a product. Only submit MPNs assigned by a manufacturer and use the most specific MPN possible</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;<strong>merchant_data</strong></td>
<td>optional</td>
<td></td>
<td>List with merchant data</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;marketplace_seller_info</td>
<td>optional</td>
<td>string(255)</td>
<td>Information for merchant marketplace</td>
</tr>
</tbody></table>

<p><code>required* = conditionally required</code></p>

<p>Supported countries:</p>

<table><thead>
<tr>
<th>Country</th>
<th>Country code</th>
</tr>
</thead><tbody>
<tr>
<td>Austria</td>
<td>AT</td>
</tr>
<tr>
<td>Denmark</td>
<td>DK</td>
</tr>
<tr>
<td>Finland</td>
<td>FI</td>
</tr>
<tr>
<td>Germany</td>
<td>DE</td>
</tr>
<tr>
<td>Netherlands</td>
<td>NL</td>
</tr>
<tr>
<td>Norway</td>
<td>NO</td>
</tr>
<tr>
<td>Sweden</td>
<td>SE</td>
</tr>
</tbody></table>

<p>Supported item types:</p>

<table><thead>
<tr>
<th>Item Types</th>
</tr>
</thead><tbody>
<tr>
<td>physical</td>
</tr>
<tr>
<td>discount</td>
</tr>
<tr>
<td>shipping_fee</td>
</tr>
<tr>
<td>sales_tax</td>
</tr>
<tr>
<td>digital</td>
</tr>
<tr>
<td>gift_card</td>
</tr>
<tr>
<td>store_credit</td>
</tr>
<tr>
<td>surcharge</td>
</tr>
</tbody></table>

<blockquote>
<p>Successful Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>stdClass Object
(
    [transaction_type] =&gt; klarna_capture
    [status] =&gt; pending_async
    [mode] =&gt; live
    [transaction_id] =&gt; 43671
    [unique_id] =&gt; 44177a21403427eb96664a6d7e5d5d48
    [technical_message] =&gt; Transaction successful!
    [message] =&gt; Transaction successful!
    [redirect_url] =&gt; https://gate.emerchantpay.net/redirect/to_acquirer/649e1ff35c61
    [timestamp] =&gt; DateTime Object
        (
            [date] =&gt; 2019-03-14 12:06:02.000000
            [timezone_type] =&gt; 2
            [timezone] =&gt; Z
        )
    [descriptor] =&gt; Descriptor one
    [amount] =&gt; 60
    [currency] =&gt; USD
    [sent_to_acquirer] =&gt; true
)
</code></pre>

<pre class="highlight java tab-java"><code><span class="n">This</span> <span class="n">request</span> <span class="n">is</span> <span class="n">not</span> <span class="n">implemented</span> <span class="n">yet</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;klarna_capture&lt;/transaction_type&gt;
  &lt;status&gt;pending_async&lt;/status&gt;
  &lt;mode&gt;live&lt;/mode&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;technical_message&gt;Transaction successful!&lt;/technical_message&gt;
  &lt;message&gt;Transaction successful!&lt;/message&gt;
  &lt;redirect_url&gt;https://gate.emerchantpay.net/redirect/to_acquirer/649e1ff35c61&lt;/redirect_url&gt;
  &lt;timestamp&gt;2019-03-14T12:06:02Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;amount&gt;60&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
  &lt;sent_to_acquirer&gt;true&lt;/sent_to_acquirer&gt;
&lt;/payment_transaction&gt;
</code></pre>

<p><strong>Successful Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>The transaction type</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>transaction_id</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>unique_id</td>
<td>string(32)</td>
<td>Unique id defined by gate (must later be used if capturing, voiding or refunding a transaction)</td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
<tr>
<td>message</td>
<td>string(255)</td>
<td>Human readable error message which can be displayed to users.</td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>redirect_url</td>
<td>url</td>
<td>URL where user has to be redirected to complete payment process. It is available for asynchronous mode</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when the transaction was processed in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Combined date and time</a> e.g. 2007-08- 30T17:46:11Z</td>
</tr>
<tr>
<td>descriptor</td>
<td>string</td>
<td>Static descriptor MID info as configured on the gateway</td>
</tr>
<tr>
<td>amount</td>
<td>integer</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>sent_to_acquirer</td>
<td>string</td>
<td>&quot;true&quot; or &quot;false&quot;</td>
</tr>
</tbody></table>

<blockquote>
<p>Error Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>stdClass Object
(
    [transaction_type] =&gt; klarna_capture
    [status] =&gt; error
    [transaction_id] =&gt; 43671
    [unique_id] =&gt; 44177a21403427eb96664a6d7e5d5d48
    [code] =&gt; 340
    [message] =&gt; Something went wrong, please contact support!
    [timestamp] =&gt; DateTime Object
        (
            [date] =&gt; 2019-03-14 12:06:02.000000
            [timezone_type] =&gt; 2
            [timezone] =&gt; Z
        )
    [descriptor] =&gt; Descriptor one
    [amount] =&gt; 60
    [currency] =&gt; USD
    [sent_to_acquirer] =&gt; false
)
</code></pre>

<pre class="highlight java tab-java"><code><span class="n">This</span> <span class="n">request</span> <span class="n">is</span> <span class="n">not</span> <span class="n">implemented</span> <span class="n">yet</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;klarna_capture&lt;/transaction_type&gt;
  &lt;status&gt;error&lt;/status&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;code&gt;340&lt;/code&gt;
  &lt;message&gt;Something went wrong, please contact support!&lt;/message&gt;
  &lt;timestamp&gt;2019-03-14T12:06:02Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;amount&gt;60&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
  &lt;sent_to_acquirer&gt;false&lt;/sent_to_acquirer&gt;
&lt;/payment_transaction&gt;
</code></pre>

<p><strong>Error Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>The transaction type</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>transaction_id</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>unique_id</td>
<td>string(32)</td>
<td>Unique id defined by gate (must later be used if capturing, voiding or refunding a transaction)</td>
</tr>
<tr>
<td>code</td>
<td>integer</td>
<td>Error code according to <a href="#error-code-table">Error code table</a></td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
<tr>
<td>message</td>
<td>string(255)</td>
<td>Human readable error message which can be displayed to users.</td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when the transaction was processed in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Combined date and time</a> e.g. 2007-08- 30T17:46:11Z</td>
</tr>
<tr>
<td>descriptor</td>
<td>string</td>
<td>Static descriptor MID info as configured on the gateway</td>
</tr>
<tr>
<td>amount</td>
<td>integer</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>sent_to_acquirer</td>
<td>string</td>
<td>&quot;true&quot; or &quot;false&quot;</td>
</tr>
</tbody></table>
<h2 id='crypto'>Crypto</h2>
<p>Alternative payment methods supporting digital cryptocurrencies.</p>
<h3 id='bitpay-sale'>BitPay Sale</h3>
<p>BitPay is a cryptocurrency payments provider supporting blockchain payments with Bitcoin (BTC) and BitcoinCash (BCH).</p>

<p>BitPay Sale is an asynchronous transaction type.</p>

<p>When this payment method is selected at checkout, the customer will be redirected to the BitPay system window including all the data for the payment: Bitcoin/BitcoinCash account, amount to be paid in cryptocurrency and the Fiat equivalent.</p>

<p>If the customer possesses a BitPay wallet or another BitPay compatible crypto wallet, the payment can be done from that window with one click, otherwise a QR CODE containing all the payment data can be scanned and used in any crypto wallet.</p>

<p>Then the customer has 15 minutes to fulfill the generated invoice.</p>

<p>If that timeframe is not met, the invoice will expire and the Merchant will be notified.</p>

<p>If the invoice is fulfilled in the timeframe, it needs to obtain 6 blockchain confirmations (1 hour) before it’s safe for the payment to be considered as completed.</p>

<p>At that point, the Merchant will be notified for the approved payment.</p>

<p>After the 6th confirmation, when the transaction is completed, the Merchant can process a refund if it’s needed.</p>

<aside class="notice">
  Each transaction has amount limits of minimum 1 USD and maximum of 950 000 USD or its equivalent in EUR
</aside>

<blockquote>
<p>Request</p>
</blockquote>

<pre class="highlight php tab-php"><code>This request is not implemented yet
</code></pre>

<pre class="highlight java tab-java"><code><span class="n">This</span> <span class="n">request</span> <span class="n">is</span> <span class="n">not</span> <span class="n">implemented</span> <span class="n">yet</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>curl https://username:password@gate.emerchantpay.net/process/TERMINAL-TOKEN <span class="se">\</span>
   -H <span class="s2">"Content-Type: text/xml"</span> <span class="se">\</span>
   -d <span class="s1">'
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;bitpay_sale&lt;/transaction_type&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;usage&gt;40208 concert tickets&lt;/usage&gt;
  &lt;remote_ip&gt;245.253.2.12&lt;/remote_ip&gt;
  &lt;return_url&gt;https://gate.emerchantpay.net/redirect/to_acquirer/a55ab44d242f&lt;/return_url&gt;
  &lt;amount&gt;3000&lt;/amount&gt;
  &lt;currency&gt;EUR&lt;/currency&gt;
  &lt;customer_email&gt;travis@example.com&lt;/customer_email&gt;
  &lt;billing_address&gt;
    &lt;first_name&gt;Travis&lt;/first_name&gt;
    &lt;last_name&gt;Pastrana&lt;/last_name&gt;
    &lt;address1&gt;Muster Str. 12&lt;/address1&gt;
    &lt;zip_code&gt;10178&lt;/zip_code&gt;
    &lt;city&gt;Berlin&lt;/city&gt;
    &lt;country&gt;DE&lt;/country&gt;
  &lt;/billing_address&gt;
&lt;/payment_transaction&gt;'</span>
</code></pre>

<p><strong>Request Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>required</td>
<td>string(255)</td>
<td>The transaction type: <strong>bitpay_sale</strong></td>
</tr>
<tr>
<td>transaction_id</td>
<td>required</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>usage</td>
<td>optional</td>
<td>string(255)</td>
<td>Description of the transaction for later use</td>
</tr>
<tr>
<td>remote_ip</td>
<td>optional</td>
<td>IPv4 address</td>
<td>IPv4 address of customer</td>
</tr>
<tr>
<td>return_url</td>
<td>required</td>
<td>url</td>
<td>URL where consumer is sent to after payment</td>
</tr>
<tr>
<td>amount</td>
<td>required</td>
<td>integer &gt; 0</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>required</td>
<td>string(3)</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>customer_email</td>
<td>required</td>
<td>e-mail address</td>
<td>Must contain valid e-mail of customer</td>
</tr>
<tr>
<td><strong>billing_address</strong></td>
<td>required*</td>
<td></td>
<td>See <a href="#required-vs-optional-api-params">Required vs Optional API params</a> for details</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;first_name</td>
<td>optional</td>
<td>string(255)</td>
<td>Customer first name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;last_name</td>
<td>optional</td>
<td>string(255)</td>
<td>Customer last name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address1</td>
<td>optional</td>
<td>string(255)</td>
<td>Primary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address2</td>
<td>optional</td>
<td>string(255)</td>
<td>Secondary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;zip_code</td>
<td>optional</td>
<td>string</td>
<td>ZIP code</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;city</td>
<td>optional</td>
<td>string(255)</td>
<td>City</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;state</td>
<td>optional</td>
<td>string(2)</td>
<td>State code in <a href="https://en.wikipedia.org/wiki/ISO_3166-2">ISO 3166-2</a>, required for USA and Canada</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;country</td>
<td>optional</td>
<td>string(2)</td>
<td>Country code in <a href="https://www.iso.org/iso-3166-country-codes.html">ISO 3166</a></td>
</tr>
<tr>
<td><strong>shipping_address</strong></td>
<td>optional</td>
<td></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;first_name</td>
<td>optional</td>
<td>string(255)</td>
<td>Customer first name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;last_name</td>
<td>optional</td>
<td>string(255)</td>
<td>Customer last name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address1</td>
<td>optional</td>
<td>string(255)</td>
<td>Primary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address2</td>
<td>optional</td>
<td>string(255)</td>
<td>Secondary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;zip_code</td>
<td>optional</td>
<td>string</td>
<td>ZIP code</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;city</td>
<td>optional</td>
<td>string(255)</td>
<td>City</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;state</td>
<td>optional</td>
<td>string(2)</td>
<td>State code in <a href="https://en.wikipedia.org/wiki/ISO_3166-2">ISO 3166-2</a>, required for USA and Canada</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;country</td>
<td>optional</td>
<td>string(2)</td>
<td>Country code in <a href="https://www.iso.org/iso-3166-country-codes.html">ISO 3166</a></td>
</tr>
</tbody></table>

<p><code>required* = conditionally required</code></p>

<blockquote>
<p>Successful Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>This request is not implemented yet
</code></pre>

<pre class="highlight java tab-java"><code><span class="n">This</span> <span class="n">request</span> <span class="n">is</span> <span class="n">not</span> <span class="n">implemented</span> <span class="n">yet</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;bitpay_sale&lt;/transaction_type&gt;
  &lt;status&gt;approved&lt;/status&gt;
  &lt;mode&gt;live&lt;/mode&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;technical_message&gt;Transaction successful!&lt;/technical_message&gt;
  &lt;message&gt;Transaction successful!&lt;/message&gt;
  &lt;redirect_url&gt;https://gate.emerchantpay.net/redirect/to_acquirer/649e1ff35c61&lt;/redirect_url&gt;
  &lt;timestamp&gt;2019-03-14T12:06:02Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;amount&gt;3000&lt;/amount&gt;
  &lt;currency&gt;EUR&lt;/currency&gt;
&lt;/payment_transaction&gt;
</code></pre>

<p><strong>Successful Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>The transaction type</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>transaction_id</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>unique_id</td>
<td>string(32)</td>
<td>Unique id defined by gate (must later be used if capturing, voiding or refunding a transaction)</td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
<tr>
<td>message</td>
<td>string(255)</td>
<td>Human readable error message which can be displayed to users.</td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>redirect_url</td>
<td>url</td>
<td>URL where user has to be redirected to complete payment process. It is available for asynchronous mode</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when the transaction was processed in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Combined date and time</a> e.g. 2007-08- 30T17:46:11Z</td>
</tr>
<tr>
<td>descriptor</td>
<td>string</td>
<td>Static descriptor MID info as configured on the gateway</td>
</tr>
<tr>
<td>amount</td>
<td>integer</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>sent_to_acquirer</td>
<td>string</td>
<td>&quot;true&quot; or &quot;false&quot;</td>
</tr>
</tbody></table>

<blockquote>
<p>Error Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>This request is not implemented yet
</code></pre>

<pre class="highlight java tab-java"><code><span class="n">This</span> <span class="n">request</span> <span class="n">is</span> <span class="n">not</span> <span class="n">implemented</span> <span class="n">yet</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;bitpay_sale&lt;/transaction_type&gt;
  &lt;status&gt;error&lt;/status&gt;
  &lt;mode&gt;live&lt;/mode&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;code&gt;110&lt;/code&gt;
  &lt;technical_message&gt;Something went wrong, please contact support!&lt;/technical_message&gt;
  &lt;message&gt;Something went wrong, please contact support!&lt;/message&gt;
  &lt;timestamp&gt;2019-03-14T12:06:02Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;amount&gt;3000&lt;/amount&gt;
  &lt;currency&gt;EUR&lt;/currency&gt;
  &lt;sent_to_acquirer&gt;true&lt;/sent_to_acquirer&gt;
&lt;/payment_transaction&gt;
</code></pre>

<p><strong>Error Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>The transaction type</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>transaction_id</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>unique_id</td>
<td>string(32)</td>
<td>Unique id defined by gate (must later be used if capturing, voiding or refunding a transaction)</td>
</tr>
<tr>
<td>code</td>
<td>integer</td>
<td>Error code according to <a href="#error-code-table">Error code table</a></td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
<tr>
<td>message</td>
<td>string(255)</td>
<td>Human readable error message which can be displayed to users.</td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when the transaction was processed in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Combined date and time</a> e.g. 2007-08- 30T17:46:11Z</td>
</tr>
<tr>
<td>descriptor</td>
<td>string</td>
<td>Static descriptor MID info as configured on the gateway</td>
</tr>
<tr>
<td>amount</td>
<td>integer</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>sent_to_acquirer</td>
<td>string</td>
<td>&quot;true&quot; or &quot;false&quot;</td>
</tr>
</tbody></table>
<h2 id='payouts'>Payouts</h2><h3 id='bank-pay-out'>Bank Pay-out</h3>
<p>Bank Pay-out is a bank pay-out method. It allows merchants to transfer funds directly to customers’ bank accounts.</p>

<blockquote>
<p>Request</p>
</blockquote>

<pre class="highlight php tab-php"><code>This request is not implemented yet
</code></pre>

<pre class="highlight java tab-java"><code><span class="n">This</span> <span class="n">request</span> <span class="n">is</span> <span class="n">not</span> <span class="n">implemented</span> <span class="n">yet</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>curl https://username:password@gate.emerchantpay.net/process/TERMINAL-TOKEN <span class="se">\</span>
   -H <span class="s2">"Content-Type: text/xml"</span> <span class="se">\</span>
   -d <span class="s1">'
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;bank_payout&lt;/transaction_type&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;usage&gt;40208 concert tickets&lt;/usage&gt;
  &lt;remote_ip&gt;245.253.2.12&lt;/remote_ip&gt;
  &lt;notification_url&gt;https://www.example.com/notification&lt;/notification_url&gt;
  &lt;return_success_url&gt;http://www.example.com/success&lt;/return_success_url&gt;
  &lt;return_failure_url&gt;http://www.example.com/failure&lt;/return_failure_url&gt;
  &lt;amount&gt;50000&lt;/amount&gt;
  &lt;currency&gt;TBH&lt;/currency&gt;
  &lt;customer_phone&gt;+1987987987987&lt;/customer_phone&gt;
  &lt;customer_email&gt;travis@example.com&lt;/customer_email&gt;
  &lt;bank_name&gt;Siam Commercial Bank&lt;/bank_name&gt;
  &lt;bank_branch&gt;BANGKOK&lt;/bank_branch&gt;
  &lt;bank_account_number&gt;1234123412341234&lt;/bank_account_number&gt;
  &lt;bank_account_name&gt;Anurak Nghuen&lt;/bank_account_name&gt;
  &lt;bank_province&gt;BANGKOK Center&lt;/bank_province&gt;
  &lt;billing_address&gt;
    &lt;first_name&gt;Anurak&lt;/first_name&gt;
    &lt;last_name&gt;Nghuen&lt;/last_name&gt;
    &lt;address1&gt;Muster Str. 12&lt;/address1&gt;
    &lt;zip_code&gt;10178&lt;/zip_code&gt;
    &lt;city&gt;Bangkock&lt;/city&gt;
    &lt;state&gt;Bangkock&lt;/state&gt;
    &lt;country&gt;TH&lt;/country&gt;
  &lt;/billing_address&gt;
&lt;/payment_transaction&gt;'</span>
</code></pre>

<p><strong>Request Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>required</td>
<td>string(255)</td>
<td>The transaction type: <strong>bank_payout</strong></td>
</tr>
<tr>
<td>transaction_id</td>
<td>required</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>usage</td>
<td>optional</td>
<td>string(255)</td>
<td>Description of the transaction for later use</td>
</tr>
<tr>
<td>remote_ip</td>
<td>required</td>
<td>IPv4 address</td>
<td>IPv4 address of customer</td>
</tr>
<tr>
<td>notification_url</td>
<td>required</td>
<td>url</td>
<td>URL at merchant where gateway sends outcome of transaction.</td>
</tr>
<tr>
<td>return_success_url</td>
<td>required</td>
<td>url</td>
<td>URL where customer is sent to after successful payment</td>
</tr>
<tr>
<td>return_failure_url</td>
<td>required</td>
<td>url</td>
<td>URL where customer is sent to after unsuccessful payment</td>
</tr>
<tr>
<td>amount</td>
<td>required</td>
<td>integer &gt; 0</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>required</td>
<td>string(3)</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>customer_email</td>
<td>required*</td>
<td>e-mail address</td>
<td>Must contain valid e-mail of customer</td>
</tr>
<tr>
<td>customer_phone</td>
<td>required*</td>
<td>string(32)</td>
<td>Must contain valid phone number of customer</td>
</tr>
<tr>
<td>bank_name</td>
<td>required</td>
<td>bank name</td>
<td>Must contain <a href="#bank-names" target="_self">Bank Names</a></td>
</tr>
<tr>
<td>bank_branch</td>
<td>required</td>
<td>bank branch</td>
<td>Name of the Bank branch</td>
</tr>
<tr>
<td>bank_account_name</td>
<td>required</td>
<td>bank account name</td>
<td>Bank account name is required, for CNY currency and should be in Simplified Chinese. For other currency, must be in English Language.</td>
</tr>
<tr>
<td>bank_account_number</td>
<td>required</td>
<td>bank account number</td>
<td>Bank account number of the customer.</td>
</tr>
<tr>
<td>bank_province</td>
<td>required</td>
<td>bank province</td>
<td>Name of the province that the bank is located.</td>
</tr>
<tr>
<td><strong>billing_address</strong></td>
<td>required</td>
<td></td>
<td>See <a href="#required-vs-optional-api-params">Required vs Optional API params</a> for details</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;first_name</td>
<td>required</td>
<td>string(255)</td>
<td>Customer first name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;last_name</td>
<td>required</td>
<td>string(255)</td>
<td>Customer last name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address1</td>
<td>required*</td>
<td>string(255)</td>
<td>Primary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address2</td>
<td>required*</td>
<td>string(255)</td>
<td>Secondary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;zip_code</td>
<td>required*</td>
<td>string</td>
<td>ZIP code</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;city</td>
<td>required*</td>
<td>string(255)</td>
<td>City</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;state</td>
<td>required</td>
<td>string(2)</td>
<td>State code in <a href="https://en.wikipedia.org/wiki/ISO_3166-2">ISO 3166-2</a>, required for USA and Canada</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;country</td>
<td>required</td>
<td>string(2)</td>
<td>Country code in <a href="https://www.iso.org/iso-3166-country-codes.html">ISO 3166</a></td>
</tr>
</tbody></table>

<p><code>required* = conditionally required</code></p>

<p><strong>Supported currencies</strong></p>

<table><thead>
<tr>
<th>Currency name</th>
<th>Currency code</th>
</tr>
</thead><tbody>
<tr>
<td>China yen</td>
<td>CNY</td>
</tr>
<tr>
<td>Indonesian rupiah</td>
<td>IDR</td>
</tr>
<tr>
<td>Malaysian ringgit</td>
<td>MYR</td>
</tr>
<tr>
<td>Thai baht</td>
<td>THB</td>
</tr>
</tbody></table>
<h4 id='bank-names'>Bank Names</h4>
<p><strong>For CNY currency:</strong></p>

<table><thead>
<tr>
<th>Bank Name</th>
</tr>
</thead><tbody>
<tr>
<td>中国银行</td>
</tr>
<tr>
<td>中国交通银行</td>
</tr>
<tr>
<td>中信银行</td>
</tr>
<tr>
<td>上海浦发银行</td>
</tr>
<tr>
<td>中国农业银行</td>
</tr>
<tr>
<td>中国渤海银行</td>
</tr>
<tr>
<td>上海银行</td>
</tr>
<tr>
<td>中国工商银行</td>
</tr>
<tr>
<td>东亚银行</td>
</tr>
<tr>
<td>上海农商银行</td>
</tr>
<tr>
<td>中国建设银行</td>
</tr>
<tr>
<td>中国兴业银行</td>
</tr>
<tr>
<td>平安银行</td>
</tr>
<tr>
<td>广发银行</td>
</tr>
<tr>
<td>北京农商银行</td>
</tr>
<tr>
<td>宁波银行</td>
</tr>
<tr>
<td>光大银行</td>
</tr>
<tr>
<td>北京银行</td>
</tr>
<tr>
<td>大连银行</td>
</tr>
<tr>
<td>尧都农商银行</td>
</tr>
<tr>
<td>徽商银行</td>
</tr>
<tr>
<td>华夏银行</td>
</tr>
<tr>
<td>南京银行</td>
</tr>
<tr>
<td>广州银行</td>
</tr>
<tr>
<td>浙商银行</td>
</tr>
<tr>
<td>招商银行</td>
</tr>
<tr>
<td>民生银行</td>
</tr>
<tr>
<td>汉口银行</td>
</tr>
<tr>
<td>晋商银行</td>
</tr>
<tr>
<td>杭州银行</td>
</tr>
<tr>
<td>深圳发展银行</td>
</tr>
<tr>
<td>江苏银行</td>
</tr>
<tr>
<td>成都银行</td>
</tr>
<tr>
<td>珠海农商银行</td>
</tr>
<tr>
<td>顺德农村商业银行</td>
</tr>
</tbody></table>

<p><strong>For MYR currency:</strong></p>

<table><thead>
<tr>
<th>Bank Name</th>
</tr>
</thead><tbody>
<tr>
<td>423</td>
</tr>
<tr>
<td>CIMB Clicks Bank</td>
</tr>
<tr>
<td>Hong Leong Bank</td>
</tr>
<tr>
<td>May Bank</td>
</tr>
<tr>
<td>Public Bank</td>
</tr>
<tr>
<td>RHB Bank</td>
</tr>
</tbody></table>

<p><strong>For THB currency:</strong></p>

<table><thead>
<tr>
<th>Bank Name</th>
</tr>
</thead><tbody>
<tr>
<td>Bangkok Bank</td>
</tr>
<tr>
<td>Kasikorn Bank</td>
</tr>
<tr>
<td>Krungsri (Bank of Ayudhya Public Company Limited)</td>
</tr>
<tr>
<td>Krung Thai Bank</td>
</tr>
<tr>
<td>Siam Commercial Bank</td>
</tr>
<tr>
<td>UOBT</td>
</tr>
</tbody></table>

<p><strong>For IDR currency:</strong></p>

<table><thead>
<tr>
<th>Bank Name</th>
</tr>
</thead><tbody>
<tr>
<td>Bank Central Asia</td>
</tr>
<tr>
<td>Bank Rakyat Indonesia</td>
</tr>
<tr>
<td>Bank Negara Indonesia</td>
</tr>
<tr>
<td>BTN Bank</td>
</tr>
<tr>
<td>CIMB Clicks Indonesia</td>
</tr>
<tr>
<td>Danamon Bank</td>
</tr>
<tr>
<td>Mandiri Bank</td>
</tr>
<tr>
<td>Permata Bank</td>
</tr>
</tbody></table>

<p><strong>For INR currency:</strong></p>

<table><thead>
<tr>
<th>Bank Name</th>
<th>Bank Code</th>
</tr>
</thead><tbody>
<tr>
<td>Netbanking</td>
<td>NB</td>
</tr>
<tr>
<td>UPI</td>
<td>UI</td>
</tr>
</tbody></table>

<blockquote>
<p>Successful Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>This request is not implemented yet
</code></pre>

<pre class="highlight java tab-java"><code><span class="n">This</span> <span class="n">request</span> <span class="n">is</span> <span class="n">not</span> <span class="n">implemented</span> <span class="n">yet</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;bank_payout&lt;/transaction_type&gt;
  &lt;status&gt;pending_async&lt;/status&gt;
  &lt;mode&gt;live&lt;/mode&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;technical_message&gt;Transaction successful!&lt;/technical_message&gt;
  &lt;message&gt;Transaction successful!&lt;/message&gt;
  &lt;timestamp&gt;2019-03-14T12:06:02Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;amount&gt;50000&lt;/amount&gt;
  &lt;currency&gt;TBH&lt;/currency&gt;
  &lt;sent_to_acquirer&gt;true&lt;/sent_to_acquirer&gt;
&lt;/payment_transaction&gt;
</code></pre>

<p><strong>Successful Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>The transaction type</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>transaction_id</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>unique_id</td>
<td>string(32)</td>
<td>Unique id defined by gate (must later be used if capturing, voiding or refunding a transaction)</td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
<tr>
<td>message</td>
<td>string(255)</td>
<td>Human readable error message which can be displayed to users.</td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when the transaction was processed in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Combined date and time</a> e.g. 2007-08- 30T17:46:11Z</td>
</tr>
<tr>
<td>descriptor</td>
<td>string</td>
<td>Static descriptor MID info as configured on the gateway</td>
</tr>
<tr>
<td>amount</td>
<td>integer</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>sent_to_acquirer</td>
<td>string</td>
<td>&quot;true&quot; or &quot;false&quot;</td>
</tr>
</tbody></table>

<blockquote>
<p>Error Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>This request is not implemented yet
</code></pre>

<pre class="highlight java tab-java"><code><span class="n">This</span> <span class="n">request</span> <span class="n">is</span> <span class="n">not</span> <span class="n">implemented</span> <span class="n">yet</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;bank_payout&lt;/transaction_type&gt;
  &lt;status&gt;error&lt;/status&gt;
  &lt;mode&gt;live&lt;/mode&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;code&gt;110&lt;/code&gt;
  &lt;message&gt;Something went wrong, please contact support!&lt;/message&gt;
  &lt;timestamp&gt;2019-03-14T12:06:02Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;amount&gt;50000&lt;/amount&gt;
  &lt;currency&gt;TBH&lt;/currency&gt;
  &lt;sent_to_acquirer&gt;true&lt;/sent_to_acquirer&gt;
&lt;/payment_transaction&gt;
</code></pre>

<p><strong>Error Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>The transaction type</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>transaction_id</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>unique_id</td>
<td>string(32)</td>
<td>Unique id defined by gate (must later be used if capturing, voiding or refunding a transaction)</td>
</tr>
<tr>
<td>code</td>
<td>integer</td>
<td>Error code according to <a href="#error-code-table">Error code table</a></td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
<tr>
<td>message</td>
<td>string(255)</td>
<td>Human readable error message which can be displayed to users.</td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when the transaction was processed in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Combined date and time</a> e.g. 2007-08- 30T17:46:11Z</td>
</tr>
<tr>
<td>descriptor</td>
<td>string</td>
<td>Static descriptor MID info as configured on the gateway</td>
</tr>
<tr>
<td>amount</td>
<td>integer</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>sent_to_acquirer</td>
<td>string</td>
<td>&quot;true&quot; or &quot;false&quot;</td>
</tr>
</tbody></table>
<h3 id='bitpay-payout'>BitPay Payout</h3>
<p>BitPay Payout is a crypto currency payout method where merchants are requesting payouts in FIAT currency and the funds are transfered in Bitcoin equivalent to a crypto wallet address.</p>

<p>BitPay Payout is an asynchronous transaction type supported through the Processing API, Virtual Terminal and Web Payment Form.</p>

<p>The payout requests are processed once a day at 11:00 GMT and the settlement usually takes 24 hours.</p>

<aside class="notice">
For amounts greater than 3000 USD or equivalent in other currency, additional KYC authentication might be required by BitPay
</aside>

<aside class="notice">
  Each transaction has amount limits of minimum 1 USD and maximum of 950 000 USD or its equivalent in EUR
</aside>

<blockquote>
<p>Request</p>
</blockquote>

<pre class="highlight php tab-php"><code>This request is not implemented yet
</code></pre>

<pre class="highlight java tab-java"><code><span class="n">This</span> <span class="n">request</span> <span class="n">is</span> <span class="n">not</span> <span class="n">implemented</span> <span class="n">yet</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>curl https://username:password@gate.emerchantpay.net/process/TERMINAL-TOKEN <span class="se">\</span>
   -H <span class="s2">"Content-Type: text/xml"</span> <span class="se">\</span>
   -d <span class="s1">'
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;bitpay_payout&lt;/transaction_type&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;usage&gt;40208 concert tickets&lt;/usage&gt;
  &lt;remote_ip&gt;245.253.2.12&lt;/remote_ip&gt;
  &lt;notification_url&gt;https://www.example.com/notification&lt;/notification_url&gt;
  &lt;return_success_url&gt;http://www.example.com/success&lt;/return_success_url&gt;
  &lt;return_failure_url&gt;http://www.example.com/failure&lt;/return_failure_url&gt;
  &lt;amount&gt;2000&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
  &lt;crypto_address&gt;n1jE32b88mtT7UETWvV6WgrV5AUVTPDxW8&lt;/crypto_address&gt;
  &lt;crypto_wallet_provider&gt;other&lt;/crypto_wallet_provider&gt;
  &lt;customer_email&gt;travis@example.com&lt;/customer_email&gt;
&lt;/payment_transaction&gt;'</span>
</code></pre>

<blockquote>
<p>Request</p>
</blockquote>

<pre class="highlight php tab-php"><code>This request is not implemented yet
</code></pre>

<pre class="highlight java tab-java"><code><span class="n">This</span> <span class="n">request</span> <span class="n">is</span> <span class="n">not</span> <span class="n">implemented</span> <span class="n">yet</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>curl https://username:password@gate.emerchantpay.net/process/TERMINAL-TOKEN <span class="se">\</span>
   -H <span class="s2">"Content-Type: text/xml"</span> <span class="se">\</span>
   -d <span class="s1">'
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;bitpay_payout&lt;/transaction_type&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;usage&gt;40208 concert tickets&lt;/usage&gt;
  &lt;remote_ip&gt;245.253.2.12&lt;/remote_ip&gt;
  &lt;notification_url&gt;https://www.example.com/notification&lt;/notification_url&gt;
  &lt;return_success_url&gt;http://www.example.com/success&lt;/return_success_url&gt;
  &lt;return_failure_url&gt;http://www.example.com/failure&lt;/return_failure_url&gt;
  &lt;amount&gt;500000&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
  &lt;crypto_address&gt;n1jE32b88mtT7UETWvV6WgrV5AUVTPDxW7&lt;/crypto_address&gt;
  &lt;crypto_wallet_provider&gt;kraken&lt;/crypto_wallet_provider&gt;
  &lt;billing_address&gt;
    &lt;first_name&gt;Travis&lt;/first_name&gt;
    &lt;last_name&gt;Pastrana&lt;/last_name&gt;
    &lt;address1&gt;Muster Str. 12&lt;/address1&gt;
    &lt;zip_code&gt;10178&lt;/zip_code&gt;
    &lt;city&gt;Los Angeles&lt;/city&gt;
    &lt;state&gt;CA&lt;/state&gt;
    &lt;country&gt;US&lt;/country&gt;
  &lt;/billing_address&gt;
&lt;/payment_transaction&gt;'</span>
</code></pre>

<p><strong>Request Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>required</td>
<td>string(255)</td>
<td>The transaction type: <strong>bitpay_payout</strong></td>
</tr>
<tr>
<td>transaction_id</td>
<td>required</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>usage</td>
<td>optional</td>
<td>string(255)</td>
<td>Description of the transaction for later use</td>
</tr>
<tr>
<td>remote_ip</td>
<td>required*</td>
<td>IPv4 address</td>
<td>IPv4 address of customer</td>
</tr>
<tr>
<td>notification_url</td>
<td>required</td>
<td>url</td>
<td>URL at merchant where gateway sends outcome of transaction.</td>
</tr>
<tr>
<td>return_success_url</td>
<td>required</td>
<td>url</td>
<td>URL where customer is sent to after successful payment</td>
</tr>
<tr>
<td>return_failure_url</td>
<td>required</td>
<td>url</td>
<td>URL where customer is sent to after unsuccessful payment</td>
</tr>
<tr>
<td>customer_email</td>
<td>required*</td>
<td>e-mail address</td>
<td>Must contain valid e-mail of customer</td>
</tr>
<tr>
<td>amount</td>
<td>required</td>
<td>integer &gt; 0</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>required</td>
<td>string(3)</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>crypto_address</td>
<td>required</td>
<td>string(255)</td>
<td>Valid crypto address where the funds will be received</td>
</tr>
<tr>
<td>crypto_wallet_provider</td>
<td>required</td>
<td>string(255)</td>
<td>If crypto wallet provider is not in the table below, you must send ’other’</td>
</tr>
<tr>
<td><strong>billing_address</strong></td>
<td>required*</td>
<td></td>
<td>See <a href="#required-vs-optional-api-params">Required vs Optional API params</a> for details</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;first_name</td>
<td>required*</td>
<td>string(255)</td>
<td>Customer first name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;last_name</td>
<td>required*</td>
<td>string(255)</td>
<td>Customer last name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address1</td>
<td>required*</td>
<td>string(255)</td>
<td>Primary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address2</td>
<td>required*</td>
<td>string(255)</td>
<td>Secondary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;zip_code</td>
<td>required*</td>
<td>string</td>
<td>ZIP code</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;city</td>
<td>required*</td>
<td>string(255)</td>
<td>City</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;state</td>
<td>required*</td>
<td>string(2)</td>
<td>State code in <a href="https://en.wikipedia.org/wiki/ISO_3166-2">ISO 3166-2</a>, required for USA and Canada</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;country</td>
<td>required*</td>
<td>string(2)</td>
<td>Country code in <a href="https://www.iso.org/iso-3166-country-codes.html">ISO 3166</a></td>
</tr>
<tr>
<td><strong>shipping_address</strong></td>
<td>optional</td>
<td></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;first_name</td>
<td>optional</td>
<td>string(255)</td>
<td>Customer first name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;last_name</td>
<td>optional</td>
<td>string(255)</td>
<td>Customer last name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address1</td>
<td>optional</td>
<td>string(255)</td>
<td>Primary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address2</td>
<td>optional</td>
<td>string(255)</td>
<td>Secondary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;zip_code</td>
<td>optional</td>
<td>string</td>
<td>ZIP code</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;city</td>
<td>optional</td>
<td>string(255)</td>
<td>City</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;state</td>
<td>optional</td>
<td>string(2)</td>
<td>State code in <a href="https://en.wikipedia.org/wiki/ISO_3166-2">ISO 3166-2</a>, required for USA and Canada</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;country</td>
<td>optional</td>
<td>string(2)</td>
<td>Country code in <a href="https://www.iso.org/iso-3166-country-codes.html">ISO 3166</a></td>
</tr>
</tbody></table>

<p><code>required* = conditionally required</code></p>

<p><strong>Crypto wallet providers with additional requirements</strong></p>

<table><thead>
<tr>
<th>crypto wallet provider</th>
<th>description</th>
<th>website</th>
</tr>
</thead><tbody>
<tr>
<td>BitGo</td>
<td>crypto wallet provider</td>
<td><a href="https://www.bitgo.com/" target="_blank">official website</a></td>
</tr>
<tr>
<td>Uphold</td>
<td>crypto wallet provider</td>
<td><a href="https://www.uphold.com/" target="_blank">official website</a></td>
</tr>
<tr>
<td>Circle</td>
<td>crypto exchange</td>
<td><a href="https://www.circle.com/" target="_blank">official website</a></td>
</tr>
<tr>
<td>Coinbase</td>
<td>crypto wallet provider</td>
<td><a href="https://www.coinbase.com/" target="_blank">official website</a></td>
</tr>
<tr>
<td>GDax</td>
<td>crypto exchange</td>
<td><a href="https://pro.coinbase.com/" target="_blank">official website</a></td>
</tr>
<tr>
<td>Gemini</td>
<td>crypto exchange</td>
<td><a href="https://gemini.com/" target="_blank">official website</a></td>
</tr>
<tr>
<td>ITBit</td>
<td>crypto exchange</td>
<td><a href="https://www.itbit.com/" target="_blank">official website</a></td>
</tr>
<tr>
<td>Kraken</td>
<td>crypto exchange</td>
<td><a href="https://www.kraken.com/" target="_blank">official website</a></td>
</tr>
</tbody></table>

<aside class="notice">
Address fields are required in case the crypto wallet provider is in the list above and the payout amount is greater than 3000 USD or the equivalent in other currency
</aside>

<blockquote>
<p>Successful Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>This request is not implemented yet
</code></pre>

<pre class="highlight java tab-java"><code><span class="n">This</span> <span class="n">request</span> <span class="n">is</span> <span class="n">not</span> <span class="n">implemented</span> <span class="n">yet</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;bitpay_payout&lt;/transaction_type&gt;
  &lt;status&gt;approved&lt;/status&gt;
  &lt;mode&gt;live&lt;/mode&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;timestamp&gt;2019-03-14T12:06:02Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;amount&gt;500000&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
&lt;/payment_transaction&gt;
</code></pre>

<p><strong>Successful Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>The transaction type</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>transaction_id</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>unique_id</td>
<td>string(32)</td>
<td>Unique id defined by gate (must later be used if capturing, voiding or refunding a transaction)</td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
<tr>
<td>message</td>
<td>string(255)</td>
<td>Human readable error message which can be displayed to users.</td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when the transaction was processed in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Combined date and time</a> e.g. 2007-08- 30T17:46:11Z</td>
</tr>
<tr>
<td>descriptor</td>
<td>string</td>
<td>Static descriptor MID info as configured on the gateway</td>
</tr>
<tr>
<td>amount</td>
<td>integer</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
</tbody></table>

<blockquote>
<p>Error Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>This request is not implemented yet
</code></pre>

<pre class="highlight java tab-java"><code><span class="n">This</span> <span class="n">request</span> <span class="n">is</span> <span class="n">not</span> <span class="n">implemented</span> <span class="n">yet</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;bitpay_payout&lt;/transaction_type&gt;
  &lt;status&gt;error&lt;/status&gt;
  &lt;mode&gt;live&lt;/mode&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;response_code&gt;&lt;/response_code&gt;
  &lt;code&gt;940&lt;/code&gt;
  &lt;technical_message&gt;Bitcoin address is invalid&lt;/technical_message&gt;
  &lt;message&gt;Something went wrong, please contact support!&lt;/message&gt;
  &lt;timestamp&gt;2019-03-14T12:06:02Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;amount&gt;2000&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
&lt;/payment_transaction&gt;
</code></pre>

<p><strong>Error Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>The transaction type</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>transaction_id</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>unique_id</td>
<td>string(32)</td>
<td>Unique id defined by gate (must later be used if capturing, voiding or refunding a transaction)</td>
</tr>
<tr>
<td>response_code</td>
<td>string(2)</td>
<td>Defines the issuer result of a transaction, the status of a message or some action taken or required. See <a href="#issuer-response-codes">issuer response codes</a> for details</td>
</tr>
<tr>
<td>code</td>
<td>integer</td>
<td>Error code according to <a href="#error-code-table">Error code table</a></td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
<tr>
<td>message</td>
<td>string(255)</td>
<td>Human readable error message which can be displayed to users.</td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when the transaction was processed in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Combined date and time</a> e.g. 2007-08- 30T17:46:11Z</td>
</tr>
<tr>
<td>descriptor</td>
<td>string</td>
<td>Static descriptor MID info as configured on the gateway</td>
</tr>
<tr>
<td>amount</td>
<td>integer</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
</tbody></table>
<h3 id='ezeecard-payout'>eZeeCard Payout</h3>
<p>eZeeCard Payout is a sync based payout method. It&#39;s merchant initiated and can only reference specific
transaction types:</p>

<ul>
<li><a href="#capture">Capture</a></li>
<li><a href="#sale">Sale</a></li>
<li><a href="#sale-3d">Sale3d</a></li>
<li><a href="#init-recurring-sale">InitRecurringSale</a></li>
<li><a href="#init-recurring-sale-3d">InitRecurringSale3d</a></li>
<li><a href="#recurring-sale">RecurringSale</a></li>
</ul>

<p>Those need to have been completed using a card issued by our Issuing API.</p>

<aside class="notice">
eZeeCard Payout is available through Processing API and VT only!
</aside>

<aside class="notice">
eZeeCard Payout has amount limits of minimum 10 EUR and maximum of 800 EUR per transaction
or its equivalent in other currencies
</aside>

<blockquote>
<p>Request</p>
</blockquote>

<pre class="highlight php tab-php"><code>This request is not implemented yet
</code></pre>

<pre class="highlight java tab-java"><code><span class="n">This</span> <span class="n">request</span> <span class="n">is</span> <span class="n">not</span> <span class="n">implemented</span> <span class="n">yet</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>curl https://username:password@gate.emerchantpay.net/process/TERMINAL-TOKEN <span class="se">\</span>
   -H <span class="s2">"Content-Type: text/xml"</span> <span class="se">\</span>
   -d <span class="s1">'
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;ezeecard_payout&lt;/transaction_type&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;usage&gt;40208 concert tickets&lt;/usage&gt;
  &lt;remote_ip&gt;245.253.2.12&lt;/remote_ip&gt;
  &lt;amount&gt;1000&lt;/amount&gt;
  &lt;currency&gt;EUR&lt;/currency&gt;
  &lt;reference_id&gt;43672&lt;/reference_id&gt;
&lt;/payment_transaction&gt;'</span>
</code></pre>

<p><strong>Request Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>required</td>
<td>string(255)</td>
<td>The transaction type: <strong>ezeecard_payout</strong></td>
</tr>
<tr>
<td>transaction_id</td>
<td>required</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>usage</td>
<td>optional</td>
<td>string(255)</td>
<td>Description of the transaction for later use</td>
</tr>
<tr>
<td>remote_ip</td>
<td>required*</td>
<td>IPv4 address</td>
<td>IPv4 address of customer</td>
</tr>
<tr>
<td>amount</td>
<td>required</td>
<td>integer &gt; 0</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>required</td>
<td>string(3)</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>reference_id</td>
<td>required</td>
<td>string(32)</td>
<td>Unique id returned by corresponding transaction</td>
</tr>
</tbody></table>

<p><code>required* = conditionally required</code></p>

<blockquote>
<p>Successful Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>This request is not implemented yet
</code></pre>

<pre class="highlight java tab-java"><code><span class="n">This</span> <span class="n">request</span> <span class="n">is</span> <span class="n">not</span> <span class="n">implemented</span> <span class="n">yet</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;ezeecard_payout&lt;/transaction_type&gt;
  &lt;status&gt;approved&lt;/status&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;mode&gt;live&lt;/mode&gt;
  &lt;timestamp&gt;2019-03-14T12:06:02Z&lt;/timestamp&gt;
  &lt;amount&gt;1000&lt;/amount&gt;
  &lt;currency&gt;EUR&lt;/currency&gt;
&lt;/payment_transaction&gt;
</code></pre>

<p><strong>Successful Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>The transaction type</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>unique_id</td>
<td>string(32)</td>
<td>Unique id defined by gate (must later be used if capturing, voiding or refunding a transaction)</td>
</tr>
<tr>
<td>transaction_id</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when the transaction was processed in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Combined date and time</a> e.g. 2007-08- 30T17:46:11Z</td>
</tr>
<tr>
<td>amount</td>
<td>integer</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
</tbody></table>

<blockquote>
<p>Error Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>This request is not implemented yet
</code></pre>

<pre class="highlight java tab-java"><code><span class="n">This</span> <span class="n">request</span> <span class="n">is</span> <span class="n">not</span> <span class="n">implemented</span> <span class="n">yet</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;ezeecard_payout&lt;/transaction_type&gt;
  &lt;status&gt;error&lt;/status&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;technical_message&gt;invalid deposit transaction&lt;/technical_message&gt;
  &lt;message&gt;&lt;/message&gt;
  &lt;mode&gt;live&lt;/mode&gt;
  &lt;timestamp&gt;2019-03-14T12:06:02Z&lt;/timestamp&gt;
  &lt;amount&gt;1000&lt;/amount&gt;
  &lt;currency&gt;EUR&lt;/currency&gt;
&lt;/payment_transaction&gt;
</code></pre>

<p><strong>Error Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>The transaction type</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>unique_id</td>
<td>string(32)</td>
<td>Unique id defined by gate (must later be used if capturing, voiding or refunding a transaction)</td>
</tr>
<tr>
<td>transaction_id</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
<tr>
<td>message</td>
<td>string(255)</td>
<td>Human readable error message which can be displayed to users.</td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when the transaction was processed in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Combined date and time</a> e.g. 2007-08- 30T17:46:11Z</td>
</tr>
<tr>
<td>amount</td>
<td>integer</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
</tbody></table>
<h3 id='payout-3'>Payout</h3>
<p>Payouts are credits without a reference transaction and as such are highly regulated and need specific gateway terminal configuration, so be sure to contact the IT Support team at <a href="mailto:tech-support@emerchantpay.net">tech-support@emerchantpay.net</a> in case you want Payouts to be enabled.</p>

<p>Using a payout, the amount is billed to the customer’s credit card. It can be reversed via a void transaction on the same day of the transaction.</p>

<p>Note that Visa payouts are not authorized through the schemes but batched for offline settlement on the same day, while Mastercard/Maestro Payouts are authorized real-time. This means that the authorization code and issuer response code are available only for non-Visa payouts.</p>

<aside class="notice">
This transaction type supports <a href="#tokenization" target="_self">Tokenization</a>.
</aside>

<blockquote>
<p>Request</p>
</blockquote>

<pre class="highlight php tab-php"><code><span class="cp">&lt;?php</span>

<span class="c1">// Load the pre-configured ini file...
</span><span class="nx">\Genesis\Config</span><span class="o">::</span><span class="na">loadSettings</span><span class="p">(</span><span class="s1">'/path/to/config.ini'</span><span class="p">);</span>

<span class="nv">$genesis</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Genesis</span><span class="p">(</span><span class="s1">'Financial\Cards\Payout'</span><span class="p">);</span>
<span class="nv">$request</span> <span class="o">=</span> <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">request</span><span class="p">();</span>

<span class="nv">$request</span>
  <span class="o">-&gt;</span><span class="na">setTransactionId</span><span class="p">(</span><span class="s1">'43671'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setUsage</span><span class="p">(</span><span class="s1">'40208 concert tickets'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setRemoteIp</span><span class="p">(</span><span class="s1">'245.253.2.12'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setAmount</span><span class="p">(</span><span class="s1">'100'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCurrency</span><span class="p">(</span><span class="s1">'USD'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCardHolder</span><span class="p">(</span><span class="s1">'Travis Pastrana'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCardNumber</span><span class="p">(</span><span class="s1">'4200000000000000'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setExpirationMonth</span><span class="p">(</span><span class="s1">'12'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setExpirationYear</span><span class="p">(</span><span class="s1">'2020'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCvv</span><span class="p">(</span><span class="s1">'834'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCustomerEmail</span><span class="p">(</span><span class="s1">'travis@example.com'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCustomerPhone</span><span class="p">(</span><span class="s1">'+1987987987987'</span><span class="p">)</span>


  <span class="c1">// Billing Address
</span>  <span class="o">-&gt;</span><span class="na">setBillingFirstName</span><span class="p">(</span><span class="s1">'Travis'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingLastName</span><span class="p">(</span><span class="s1">'Pastrana'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingAddress1</span><span class="p">(</span><span class="s1">'Muster Str. 12'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingZipCode</span><span class="p">(</span><span class="s1">'10178'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingCity</span><span class="p">(</span><span class="s1">'Los Angeles'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingState</span><span class="p">(</span><span class="s1">'CA'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingCountry</span><span class="p">(</span><span class="s1">'US'</span><span class="p">);</span>

<span class="k">try</span> <span class="p">{</span>
    <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">execute</span><span class="p">();</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">response</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">getResponseObject</span><span class="p">();</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">\Exception</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$e</span><span class="o">-&gt;</span><span class="na">getMessage</span><span class="p">();</span>
<span class="p">}</span>
</code></pre>

<pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.GenesisClient</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.TransactionResult</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.constants.Endpoints</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.constants.Environments</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.requests.financial.card.PayoutRequest</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.model.Transaction</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Configuration</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Country</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Currency</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.math.BigDecimal</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">GenesisExample</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">()</span>  <span class="o">{</span>

    <span class="c1">// Create configuration</span>
    <span class="n">Configuration</span> <span class="n">configuration</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Configuration</span><span class="o">(</span><span class="n">Environments</span><span class="o">.</span><span class="na">STAGING</span><span class="o">,</span> <span class="n">Endpoints</span><span class="o">.</span><span class="na">EMERCHANTPAY</span><span class="o">);</span>

    <span class="n">configuration</span><span class="o">.</span><span class="na">setUsername</span><span class="o">(</span><span class="s">"SET_YOUR_USERNAME"</span><span class="o">);</span>
    <span class="n">configuration</span><span class="o">.</span><span class="na">setPassword</span><span class="o">(</span><span class="s">"SET_YOUR_PASSWORD"</span><span class="o">);</span>
    <span class="n">configuration</span><span class="o">.</span><span class="na">setToken</span><span class="o">(</span><span class="s">"SET_YOUR_TOKEN"</span><span class="o">);</span>

    <span class="n">PayoutRequest</span> <span class="n">request</span> <span class="o">=</span> <span class="k">new</span> <span class="n">PayoutRequest</span><span class="o">();</span>

    <span class="n">request</span><span class="o">.</span><span class="na">setTransactionId</span><span class="o">(</span><span class="s">"43671"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setUsage</span><span class="o">(</span><span class="s">"40208 concert tickets"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setRemoteIp</span><span class="o">(</span><span class="s">"245.253.2.12"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setAmount</span><span class="o">(</span><span class="k">new</span> <span class="n">BigDecimal</span><span class="o">(</span><span class="mi">100</span><span class="o">));</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCurrency</span><span class="o">(</span><span class="s">"USD"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCardHolder</span><span class="o">(</span><span class="s">"Travis Pastrana"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCardNumber</span><span class="o">(</span><span class="s">"4200000000000000"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setExpirationMonth</span><span class="o">(</span><span class="s">"12"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setExpirationYear</span><span class="o">(</span><span class="s">"2020"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCvv</span><span class="o">(</span><span class="s">"834"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCustomerEmail</span><span class="o">(</span><span class="s">"travis@example.com"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCustomerPhone</span><span class="o">(</span><span class="s">"+1987987987987"</span><span class="o">);</span>


    <span class="c1">// Billing Address</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingFirstname</span><span class="o">(</span><span class="s">"Travis"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingLastname</span><span class="o">(</span><span class="s">"Pastrana"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingPrimaryAddress</span><span class="o">(</span><span class="s">"Muster Str. 12"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingZipCode</span><span class="o">(</span><span class="s">"10178"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingCity</span><span class="o">(</span><span class="s">"Los Angeles"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingState</span><span class="o">(</span><span class="s">"CA"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingCountry</span><span class="o">(</span><span class="s">"US"</span><span class="o">);</span>

    <span class="n">GenesisClient</span> <span class="n">client</span> <span class="o">=</span> <span class="k">new</span> <span class="n">GenesisClient</span><span class="o">(</span><span class="n">configuration</span><span class="o">,</span> <span class="n">request</span><span class="o">);</span>
    <span class="n">client</span><span class="o">.</span><span class="na">execute</span><span class="o">();</span>

    <span class="c1">// Parse Payment result</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">client</span><span class="o">.</span><span class="na">getResponse</span><span class="o">());</span>

  <span class="o">}</span>
<span class="o">}</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="kd">var</span> <span class="nx">genesis</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'genesis.js/lib/genesis.js'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">transaction</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">genesis</span><span class="p">.</span><span class="nx">transaction</span><span class="p">();</span>

<span class="kd">var</span> <span class="nx">failure</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">reason</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">reason</span><span class="p">);</span>
<span class="p">};</span>

<span class="kd">var</span> <span class="nx">success</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>

<span class="nx">transaction</span><span class="p">.</span><span class="nx">payout</span><span class="p">(</span>
  <span class="p">{</span>
    <span class="s2">"transaction_id"</span><span class="p">:</span> <span class="s2">"43671"</span><span class="p">,</span>
    <span class="s2">"usage"</span><span class="p">:</span> <span class="s2">"40208 concert tickets"</span><span class="p">,</span>
    <span class="s2">"remote_ip"</span><span class="p">:</span> <span class="s2">"245.253.2.12"</span><span class="p">,</span>
    <span class="s2">"amount"</span><span class="p">:</span> <span class="s2">"100"</span><span class="p">,</span>
    <span class="s2">"currency"</span><span class="p">:</span> <span class="s2">"USD"</span><span class="p">,</span>
    <span class="s2">"card_holder"</span><span class="p">:</span> <span class="s2">"Travis Pastrana"</span><span class="p">,</span>
    <span class="s2">"card_number"</span><span class="p">:</span> <span class="s2">"4200000000000000"</span><span class="p">,</span>
    <span class="s2">"expiration_month"</span><span class="p">:</span> <span class="s2">"12"</span><span class="p">,</span>
    <span class="s2">"expiration_year"</span><span class="p">:</span> <span class="mi">2020</span><span class="p">,</span>
    <span class="s2">"cvv"</span><span class="p">:</span> <span class="s2">"834"</span><span class="p">,</span>
    <span class="s2">"customer_email"</span><span class="p">:</span> <span class="s2">"travis@example.com"</span><span class="p">,</span>
    <span class="s2">"customer_phone"</span><span class="p">:</span> <span class="s2">"+1987987987987"</span><span class="p">,</span>
    <span class="s2">"billing_address"</span><span class="p">:</span> <span class="p">{</span>
      <span class="s2">"first_name"</span><span class="p">:</span> <span class="s2">"Travis"</span><span class="p">,</span>
      <span class="s2">"last_name"</span><span class="p">:</span> <span class="s2">"Pastrana"</span><span class="p">,</span>
      <span class="s2">"address1"</span><span class="p">:</span> <span class="s2">"Muster Str. 12"</span><span class="p">,</span>
      <span class="s2">"zip_code"</span><span class="p">:</span> <span class="s2">"10178"</span><span class="p">,</span>
      <span class="s2">"city"</span><span class="p">:</span> <span class="s2">"Los Angeles"</span><span class="p">,</span>
      <span class="s2">"state"</span><span class="p">:</span> <span class="s2">"CA"</span><span class="p">,</span>
      <span class="s2">"country"</span><span class="p">:</span> <span class="s2">"US"</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">).</span><span class="nx">send</span><span class="p">()</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">success</span><span class="p">)</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">failure</span><span class="p">);</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>curl https://username:password@gate.emerchantpay.net/process/TERMINAL-TOKEN <span class="se">\</span>
   -H <span class="s2">"Content-Type: text/xml"</span> <span class="se">\</span>
   -d <span class="s1">'
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;payout&lt;/transaction_type&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;usage&gt;40208 concert tickets&lt;/usage&gt;
  &lt;remote_ip&gt;245.253.2.12&lt;/remote_ip&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
  &lt;card_holder&gt;Travis Pastrana&lt;/card_holder&gt;
  &lt;card_number&gt;4200000000000000&lt;/card_number&gt;
  &lt;expiration_month&gt;12&lt;/expiration_month&gt;
  &lt;expiration_year&gt;2020&lt;/expiration_year&gt;
  &lt;cvv&gt;834&lt;/cvv&gt;
  &lt;customer_email&gt;travis@example.com&lt;/customer_email&gt;
  &lt;customer_phone&gt;+1987987987987&lt;/customer_phone&gt;
  &lt;billing_address&gt;
    &lt;first_name&gt;Travis&lt;/first_name&gt;
    &lt;last_name&gt;Pastrana&lt;/last_name&gt;
    &lt;address1&gt;Muster Str. 12&lt;/address1&gt;
    &lt;zip_code&gt;10178&lt;/zip_code&gt;
    &lt;city&gt;Los Angeles&lt;/city&gt;
    &lt;state&gt;CA&lt;/state&gt;
    &lt;country&gt;US&lt;/country&gt;
  &lt;/billing_address&gt;
&lt;/payment_transaction&gt;'</span>
</code></pre>

<p><strong>Request Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>required</td>
<td>string(255)</td>
<td>The transaction type: <strong>payout</strong></td>
</tr>
<tr>
<td>transaction_id</td>
<td>required</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>usage</td>
<td>optional</td>
<td>string(255)</td>
<td>Description of the transaction for later use</td>
</tr>
<tr>
<td>gaming</td>
<td>optional</td>
<td>&quot;true&quot;</td>
<td>Signifies whether a gaming transaction is performed. Gaming transactions usually use MCC 7995, contact tech support for more details.</td>
</tr>
<tr>
<td>moto</td>
<td>optional</td>
<td>&quot;true&quot;</td>
<td>Signifies whether a MOTO (mail order telephone order) transaction is performed. Contact tech support for more details.</td>
</tr>
<tr>
<td>remote_ip</td>
<td>required*</td>
<td>IPv4 address</td>
<td>IPv4 address of customer</td>
</tr>
<tr>
<td>amount</td>
<td>required</td>
<td>integer &gt; 0</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>required</td>
<td>string(3)</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>card_holder</td>
<td>required</td>
<td>string(255)</td>
<td>Full name of customer as printed on credit card (first name and last name at least)</td>
</tr>
<tr>
<td>card_number</td>
<td>required</td>
<td>13 to 16 digits</td>
<td>Complete cc number of customer</td>
</tr>
<tr>
<td>cvv</td>
<td>required*</td>
<td>3 to 4 digits</td>
<td>cvv of cc, requirement is based on terminal configuration</td>
</tr>
<tr>
<td>expiration_month</td>
<td>required</td>
<td>MM</td>
<td>Expiration month as printed on credit card</td>
</tr>
<tr>
<td>expiration_year</td>
<td>required</td>
<td>YYYY</td>
<td>Expiration year as printed on credit card</td>
</tr>
<tr>
<td>token</td>
<td>optional</td>
<td>string(36)</td>
<td>See <a href="#tokenization">Tokenization</a> for more details. If present, the cardholder parameters can be omitted. Cannot be set together with <code>remember_card</code></td>
</tr>
<tr>
<td>remember_card</td>
<td>optional</td>
<td>&quot;true&quot;</td>
<td>See <a href="#tokenize">Tokenize</a>. Tokenizes cardholder parameters. Cannot be set together with <code>token</code></td>
</tr>
<tr>
<td>consumer_id</td>
<td>optional</td>
<td>string(10)</td>
<td>See <a href="#consumers">Consumers</a> and <a href="#tokenization">Tokenization</a>. Combine with <code>remember_card</code> to tokenize or with <code>token</code> to use token</td>
</tr>
<tr>
<td><strong>credential_on_file</strong></td>
<td>required*</td>
<td></td>
<td>See <a href="#credential-on-file-cof" target="_self">Credential On File (COF)</a> for more details</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;initial_customer_initiated</td>
<td>required*</td>
<td>string(18)</td>
<td>Initial transaction initiated by customer. Required for external tokenization, and optional for gateway-based tokenization</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;subsequent_customer_initiated</td>
<td>required*</td>
<td>string(18)</td>
<td>Subsequent transaction initiated by customer. Required for external tokenization, and optional for gateway-based tokenization</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;merchant_unscheduled</td>
<td>optional</td>
<td>string(20)</td>
<td>Transaction is initiated by the merchant</td>
</tr>
<tr>
<td>customer_email</td>
<td>required*</td>
<td>e-mail address</td>
<td>Must contain valid e-mail of customer</td>
</tr>
<tr>
<td>customer_phone</td>
<td>required*</td>
<td>string(32)</td>
<td>Must contain valid phone number of customer</td>
</tr>
<tr>
<td>birth_date</td>
<td>required*</td>
<td>dd-mm-yyyy</td>
<td>Required when MCC is a Financial Services one (e.g. MCC 6012) and either card brand is Visa or Mastercard/Maestro with UK-based merchant, UK-based bin (domestic), and DEBIT card type</td>
</tr>
<tr>
<td>document_id</td>
<td>required*</td>
<td>sring(20)</td>
<td>Document ID of the consumer. See <a href="#document-id-parameter">Document ID Parameter</a> for more details.</td>
</tr>
<tr>
<td><strong>billing_address</strong></td>
<td>required</td>
<td></td>
<td>See <a href="#required-vs-optional-api-params">Required vs Optional API params</a> for details</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;first_name</td>
<td>required*</td>
<td>string(255)</td>
<td>Customer first name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;last_name</td>
<td>required*</td>
<td>string(255)</td>
<td>Customer last name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address1</td>
<td>required*</td>
<td>string(255)</td>
<td>Primary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address2</td>
<td>required*</td>
<td>string(255)</td>
<td>Secondary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;zip_code</td>
<td>required*</td>
<td>string</td>
<td>ZIP code</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;city</td>
<td>required*</td>
<td>string(255)</td>
<td>City</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;state</td>
<td>required*</td>
<td>string(2)</td>
<td>State code in <a href="https://en.wikipedia.org/wiki/ISO_3166-2">ISO 3166-2</a>, required for USA and Canada</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;country</td>
<td>required*</td>
<td>string(2)</td>
<td>Country code in <a href="https://www.iso.org/iso-3166-country-codes.html">ISO 3166</a></td>
</tr>
<tr>
<td><strong>shipping_address</strong></td>
<td>optional</td>
<td></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;first_name</td>
<td>optional</td>
<td>string(255)</td>
<td>Customer first name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;last_name</td>
<td>optional</td>
<td>string(255)</td>
<td>Customer last name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address1</td>
<td>optional</td>
<td>string(255)</td>
<td>Primary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address2</td>
<td>optional</td>
<td>string(255)</td>
<td>Secondary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;zip_code</td>
<td>optional</td>
<td>string</td>
<td>ZIP code</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;city</td>
<td>optional</td>
<td>string(255)</td>
<td>City</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;state</td>
<td>optional</td>
<td>string(2)</td>
<td>State code in <a href="https://en.wikipedia.org/wiki/ISO_3166-2">ISO 3166-2</a>, required for USA and Canada</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;country</td>
<td>optional</td>
<td>string(2)</td>
<td>Country code in <a href="https://www.iso.org/iso-3166-country-codes.html">ISO 3166</a></td>
</tr>
</tbody></table>

<p><code>required* = conditionally required</code></p>

<blockquote>
<p>Successful Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>stdClass Object
(
    [transaction_type] =&gt; payout
    [status] =&gt; approved
    [mode] =&gt; live
    [transaction_id] =&gt; 43671
    [unique_id] =&gt; 44177a21403427eb96664a6d7e5d5d48
    [consumer_id] =&gt; 123456
    [token] =&gt; ee946db8-d7db-4bb7-b608-b65b153e127d
    [avs_response_code] =&gt; 5I
    [avs_response_text] =&gt; Response provided by issuer processor; Address information not verified
    [authorization_code] =&gt; 345678
    [response_code] =&gt; 00
    [timestamp] =&gt; DateTime Object
        (
            [date] =&gt; 2019-03-14 12:06:02.000000
            [timezone_type] =&gt; 2
            [timezone] =&gt; Z
        )
    [descriptor] =&gt; Descriptor one
    [amount] =&gt; 100
    [currency] =&gt; USD
    [sent_to_acquirer] =&gt; true
)
</code></pre>

<pre class="highlight java tab-java"><code><span class="o">&lt;</span><span class="n">payment_response</span> <span class="n">content</span><span class="o">=[</span>
    <span class="o">&lt;</span><span class="n">transaction_type</span> <span class="n">content</span><span class="o">=[</span><span class="n">payout</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">status</span> <span class="n">content</span><span class="o">=[</span><span class="n">approved</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">mode</span> <span class="n">content</span><span class="o">=[</span><span class="n">live</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">transaction_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">43671</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">unique_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">44177</span><span class="n">a21403427eb96664a6d7e5d5d48</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">consumer_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">123456</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">token</span> <span class="n">content</span><span class="o">=[</span><span class="n">ee946db8</span><span class="o">-</span><span class="n">d7db</span><span class="o">-</span><span class="mi">4</span><span class="n">bb7</span><span class="o">-</span><span class="n">b608</span><span class="o">-</span><span class="n">b65b153e127d</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">avs_response_code</span> <span class="n">content</span><span class="o">=[</span><span class="mi">5</span><span class="n">I</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">avs_response_text</span> <span class="n">content</span><span class="o">=[</span><span class="n">Response</span> <span class="n">provided</span> <span class="n">by</span> <span class="n">issuer</span> <span class="n">processor</span><span class="o">;</span> <span class="n">Address</span> <span class="n">information</span> <span class="n">not</span> <span class="n">verified</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">authorization_code</span> <span class="n">content</span><span class="o">=[</span><span class="mi">345678</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">response_code</span> <span class="n">content</span><span class="o">=[</span><span class="mo">00</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">timestamp</span> <span class="n">content</span><span class="o">=[</span><span class="mi">2019</span><span class="o">-</span><span class="mo">03</span><span class="o">-</span><span class="mi">14</span><span class="nl">T12:</span><span class="mo">06</span><span class="o">:</span><span class="mo">02</span><span class="n">Z</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">descriptor</span> <span class="n">content</span><span class="o">=[</span><span class="n">Descriptor</span> <span class="n">one</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">amount</span> <span class="n">content</span><span class="o">=[</span><span class="mi">100</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">currency</span> <span class="n">content</span><span class="o">=[</span><span class="n">USD</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">sent_to_acquirer</span> <span class="n">content</span><span class="o">=[</span><span class="kc">true</span><span class="o">]&gt;</span>
<span class="o">]&gt;</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="p">{</span>
    <span class="nl">transaction_type</span><span class="p">:</span> <span class="s2">"payout"</span><span class="p">,</span>
    <span class="nx">status</span><span class="p">:</span> <span class="s2">"approved"</span><span class="p">,</span>
    <span class="nx">mode</span><span class="p">:</span> <span class="s2">"live"</span><span class="p">,</span>
    <span class="nx">transaction_id</span><span class="p">:</span> <span class="s2">"43671"</span><span class="p">,</span>
    <span class="nx">unique_id</span><span class="p">:</span> <span class="s2">"44177a21403427eb96664a6d7e5d5d48"</span><span class="p">,</span>
    <span class="nx">consumer_id</span><span class="p">:</span> <span class="s2">"123456"</span><span class="p">,</span>
    <span class="nx">token</span><span class="p">:</span> <span class="s2">"ee946db8-d7db-4bb7-b608-b65b153e127d"</span><span class="p">,</span>
    <span class="nx">avs_response_code</span><span class="p">:</span> <span class="s2">"5I"</span><span class="p">,</span>
    <span class="nx">avs_response_text</span><span class="p">:</span> <span class="s2">"Response provided by issuer processor; Address information not verified"</span><span class="p">,</span>
    <span class="nx">authorization_code</span><span class="p">:</span> <span class="s2">"345678"</span><span class="p">,</span>
    <span class="nx">response_code</span><span class="p">:</span> <span class="s2">"00"</span><span class="p">,</span>
    <span class="nx">timestamp</span><span class="p">:</span> <span class="s2">"2019-03-14T12:06:02Z"</span><span class="p">,</span>
    <span class="nx">descriptor</span><span class="p">:</span> <span class="s2">"Descriptor one"</span><span class="p">,</span>
    <span class="nx">amount</span><span class="p">:</span> <span class="s2">"100"</span><span class="p">,</span>
    <span class="nx">currency</span><span class="p">:</span> <span class="s2">"USD"</span><span class="p">,</span>
    <span class="nx">sent_to_acquirer</span><span class="p">:</span> <span class="s2">"true"</span><span class="p">,</span>
<span class="p">}</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;payout&lt;/transaction_type&gt;
  &lt;status&gt;approved&lt;/status&gt;
  &lt;mode&gt;live&lt;/mode&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;consumer_id&gt;123456&lt;/consumer_id&gt;
  &lt;token&gt;ee946db8-d7db-4bb7-b608-b65b153e127d&lt;/token&gt;
  &lt;avs_response_code&gt;5I&lt;/avs_response_code&gt;
  &lt;avs_response_text&gt;Response provided by issuer processor; Address information not verified&lt;/avs_response_text&gt;
  &lt;authorization_code&gt;345678&lt;/authorization_code&gt;
  &lt;response_code&gt;00&lt;/response_code&gt;
  &lt;timestamp&gt;2019-03-14T12:06:02Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
  &lt;sent_to_acquirer&gt;true&lt;/sent_to_acquirer&gt;
&lt;/payment_transaction&gt;
</code></pre>

<p><strong>Successful Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>The transaction type</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>transaction_id</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>unique_id</td>
<td>string(32)</td>
<td>Unique id defined by gate (must later be used if capturing, voiding or refunding a transaction)</td>
</tr>
<tr>
<td>consumer_id</td>
<td>string(10)</td>
<td>Consumer unique reference. See <a href="#consumers">Consumers</a></td>
</tr>
<tr>
<td>token</td>
<td>string(36)</td>
<td>Plain-text token value. See <a href="#tokenization">Tokenization</a></td>
</tr>
<tr>
<td>avs_response_code</td>
<td>string</td>
<td>Generated by the card network on trying to match the billing address when performing the address verification. Optional, returned if config is enabled and acquirer supports it. Check <a href="#avs-status-codes">AVS Status Codes</a> for details.</td>
</tr>
<tr>
<td>avs_response_text</td>
<td>string</td>
<td>Gives the human response text for the AVS response code above. Optional, returned if config is enabled and acquirer supports it. Check [AVS Status Codes](#avs-status-codes for details.</td>
</tr>
<tr>
<td>authorization_code</td>
<td>string(6)</td>
<td>Generated by the card network when an authorisation has occurred, used to identify that auth. Consists of 6 alphanumeric chars</td>
</tr>
<tr>
<td>response_code</td>
<td>string(2)</td>
<td>Defines the issuer result of a transaction, the status of a message or some action taken or required. See <a href="#issuer-response-codes">issuer response codes</a> for details</td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
<tr>
<td>message</td>
<td>string(255)</td>
<td>Human readable error message which can be displayed to users.</td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when the transaction was processed in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Combined date and time</a> e.g. 2007-08- 30T17:46:11Z</td>
</tr>
<tr>
<td>descriptor</td>
<td>string</td>
<td>Static descriptor MID info as configured on the gateway</td>
</tr>
<tr>
<td>amount</td>
<td>integer</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>sent_to_acquirer</td>
<td>string</td>
<td>&quot;true&quot; or &quot;false&quot;</td>
</tr>
</tbody></table>

<blockquote>
<p>Error Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>stdClass Object
(
    [transaction_type] =&gt; payout
    [status] =&gt; error
    [mode] =&gt; live
    [transaction_id] =&gt; 43671
    [unique_id] =&gt; 44177a21403427eb96664a6d7e5d5d48
    [response_code] =&gt; 57
    [code] =&gt; 340
    [technical_message] =&gt; billing_address[zip_code] is invalid!
    [message] =&gt; billing_address[zip_code] is invalid!
    [timestamp] =&gt; DateTime Object
        (
            [date] =&gt; 2019-03-14 12:06:02.000000
            [timezone_type] =&gt; 2
            [timezone] =&gt; Z
        )
    [descriptor] =&gt; Descriptor one
    [amount] =&gt; 100
    [currency] =&gt; USD
    [sent_to_acquirer] =&gt; false
)
</code></pre>

<pre class="highlight java tab-java"><code><span class="o">&lt;</span><span class="n">payment_response</span> <span class="n">content</span><span class="o">=[</span>
    <span class="o">&lt;</span><span class="n">transaction_type</span> <span class="n">content</span><span class="o">=[</span><span class="n">payout</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">status</span> <span class="n">content</span><span class="o">=[</span><span class="n">error</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">mode</span> <span class="n">content</span><span class="o">=[</span><span class="n">live</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">transaction_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">43671</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">unique_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">44177</span><span class="n">a21403427eb96664a6d7e5d5d48</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">response_code</span> <span class="n">content</span><span class="o">=[</span><span class="mi">57</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">code</span> <span class="n">content</span><span class="o">=[</span><span class="mi">340</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">technical_message</span> <span class="n">content</span><span class="o">=[</span><span class="n">billing_address</span><span class="o">[</span><span class="n">zip_code</span><span class="o">]</span> <span class="n">is</span> <span class="n">invalid</span><span class="o">!]&gt;</span>
    <span class="o">&lt;</span><span class="n">message</span> <span class="n">content</span><span class="o">=[</span><span class="n">billing_address</span><span class="o">[</span><span class="n">zip_code</span><span class="o">]</span> <span class="n">is</span> <span class="n">invalid</span><span class="o">!]&gt;</span>
    <span class="o">&lt;</span><span class="n">timestamp</span> <span class="n">content</span><span class="o">=[</span><span class="mi">2019</span><span class="o">-</span><span class="mo">03</span><span class="o">-</span><span class="mi">14</span><span class="nl">T12:</span><span class="mo">06</span><span class="o">:</span><span class="mo">02</span><span class="n">Z</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">descriptor</span> <span class="n">content</span><span class="o">=[</span><span class="n">Descriptor</span> <span class="n">one</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">amount</span> <span class="n">content</span><span class="o">=[</span><span class="mi">100</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">currency</span> <span class="n">content</span><span class="o">=[</span><span class="n">USD</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">sent_to_acquirer</span> <span class="n">content</span><span class="o">=[</span><span class="kc">false</span><span class="o">]&gt;</span>
<span class="o">]&gt;</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="p">{</span>
    <span class="nl">transaction_type</span><span class="p">:</span> <span class="s2">"payout"</span><span class="p">,</span>
    <span class="nx">status</span><span class="p">:</span> <span class="s2">"error"</span><span class="p">,</span>
    <span class="nx">mode</span><span class="p">:</span> <span class="s2">"live"</span><span class="p">,</span>
    <span class="nx">transaction_id</span><span class="p">:</span> <span class="s2">"43671"</span><span class="p">,</span>
    <span class="nx">unique_id</span><span class="p">:</span> <span class="s2">"44177a21403427eb96664a6d7e5d5d48"</span><span class="p">,</span>
    <span class="nx">response_code</span><span class="p">:</span> <span class="s2">"57"</span><span class="p">,</span>
    <span class="nx">code</span><span class="p">:</span> <span class="s2">"340"</span><span class="p">,</span>
    <span class="nx">technical_message</span><span class="p">:</span> <span class="s2">"billing_address[zip_code] is invalid!"</span><span class="p">,</span>
    <span class="nx">message</span><span class="p">:</span> <span class="s2">"billing_address[zip_code] is invalid!"</span><span class="p">,</span>
    <span class="nx">timestamp</span><span class="p">:</span> <span class="s2">"2019-03-14T12:06:02Z"</span><span class="p">,</span>
    <span class="nx">descriptor</span><span class="p">:</span> <span class="s2">"Descriptor one"</span><span class="p">,</span>
    <span class="nx">amount</span><span class="p">:</span> <span class="s2">"100"</span><span class="p">,</span>
    <span class="nx">currency</span><span class="p">:</span> <span class="s2">"USD"</span><span class="p">,</span>
    <span class="nx">sent_to_acquirer</span><span class="p">:</span> <span class="s2">"false"</span><span class="p">,</span>
<span class="p">}</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;payout&lt;/transaction_type&gt;
  &lt;status&gt;error&lt;/status&gt;
  &lt;mode&gt;live&lt;/mode&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;response_code&gt;57&lt;/response_code&gt;
  &lt;code&gt;340&lt;/code&gt;
  &lt;technical_message&gt;billing_address[zip_code] is invalid!&lt;/technical_message&gt;
  &lt;message&gt;billing_address[zip_code] is invalid!&lt;/message&gt;
  &lt;timestamp&gt;2019-03-14T12:06:02Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
  &lt;sent_to_acquirer&gt;false&lt;/sent_to_acquirer&gt;
&lt;/payment_transaction&gt;
</code></pre>

<p><strong>Error Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>The transaction type</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>transaction_id</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>unique_id</td>
<td>string(32)</td>
<td>Unique id defined by gate (must later be used if capturing, voiding or refunding a transaction)</td>
</tr>
<tr>
<td>response_code</td>
<td>string(2)</td>
<td>Defines the issuer result of a transaction, the status of a message or some action taken or required. See <a href="#issuer-response-codes">issuer response codes</a> for details</td>
</tr>
<tr>
<td>code</td>
<td>integer</td>
<td>Error code according to <a href="#error-code-table">Error code table</a></td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
<tr>
<td>message</td>
<td>string(255)</td>
<td>Human readable error message which can be displayed to users.</td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when the transaction was processed in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Combined date and time</a> e.g. 2007-08- 30T17:46:11Z</td>
</tr>
<tr>
<td>descriptor</td>
<td>string</td>
<td>Static descriptor MID info as configured on the gateway</td>
</tr>
<tr>
<td>amount</td>
<td>integer</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>sent_to_acquirer</td>
<td>string</td>
<td>&quot;true&quot; or &quot;false&quot;</td>
</tr>
</tbody></table>
<h3 id='sct-payout'>SCT Payout</h3>
<p>SCT payouts are Sepa-based payouts to consumers done without a reference transaction and as such are regulated and need specific gateway terminal configuration, so be sure to contact the IT Support team at <a href="mailto:%20tech-support@emerchantpay.net">tech-support@emerchantpay.net</a>) in case you want SCT payouts to be enabled.</p>

<blockquote>
<p>Request</p>
</blockquote>

<pre class="highlight php tab-php"><code><span class="cp">&lt;?php</span>

<span class="c1">// Load the pre-configured ini file...
</span><span class="nx">\Genesis\Config</span><span class="o">::</span><span class="na">loadSettings</span><span class="p">(</span><span class="s1">'/path/to/config.ini'</span><span class="p">);</span>

<span class="nv">$genesis</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Genesis</span><span class="p">(</span><span class="s1">'Financial\SDD\Payout'</span><span class="p">);</span>
<span class="nv">$request</span> <span class="o">=</span> <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">request</span><span class="p">();</span>

<span class="nv">$request</span>
  <span class="o">-&gt;</span><span class="na">setTransactionId</span><span class="p">(</span><span class="s1">'43671'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setUsage</span><span class="p">(</span><span class="s1">'40208 concert tickets'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setRemoteIp</span><span class="p">(</span><span class="s1">'245.253.2.12'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setAmount</span><span class="p">(</span><span class="s1">'100'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCurrency</span><span class="p">(</span><span class="s1">'EUR'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setIban</span><span class="p">(</span><span class="s1">'DE09100100101234567891'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBic</span><span class="p">(</span><span class="s1">'PBNKDEFFXXX'</span><span class="p">)</span>


  <span class="c1">// Billing Address
</span>  <span class="o">-&gt;</span><span class="na">setBillingFirstName</span><span class="p">(</span><span class="s1">'Travis'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingLastName</span><span class="p">(</span><span class="s1">'Pastrana'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingCountry</span><span class="p">(</span><span class="s1">'DE'</span><span class="p">);</span>

<span class="k">try</span> <span class="p">{</span>
    <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">execute</span><span class="p">();</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">response</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">getResponseObject</span><span class="p">();</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">\Exception</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$e</span><span class="o">-&gt;</span><span class="na">getMessage</span><span class="p">();</span>
<span class="p">}</span>
</code></pre>

<pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.GenesisClient</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.TransactionResult</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.constants.Endpoints</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.constants.Environments</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.requests.financial.sdd.SDDPayoutRequest</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.model.Transaction</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Configuration</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Country</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Currency</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.math.BigDecimal</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">GenesisExample</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">()</span>  <span class="o">{</span>

    <span class="c1">// Create configuration</span>
    <span class="n">Configuration</span> <span class="n">configuration</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Configuration</span><span class="o">(</span><span class="n">Environments</span><span class="o">.</span><span class="na">STAGING</span><span class="o">,</span> <span class="n">Endpoints</span><span class="o">.</span><span class="na">EMERCHANTPAY</span><span class="o">);</span>

    <span class="n">configuration</span><span class="o">.</span><span class="na">setUsername</span><span class="o">(</span><span class="s">"SET_YOUR_USERNAME"</span><span class="o">);</span>
    <span class="n">configuration</span><span class="o">.</span><span class="na">setPassword</span><span class="o">(</span><span class="s">"SET_YOUR_PASSWORD"</span><span class="o">);</span>
    <span class="n">configuration</span><span class="o">.</span><span class="na">setToken</span><span class="o">(</span><span class="s">"SET_YOUR_TOKEN"</span><span class="o">);</span>

    <span class="n">SDDPayoutRequest</span> <span class="n">request</span> <span class="o">=</span> <span class="k">new</span> <span class="n">SDDPayoutRequest</span><span class="o">();</span>

    <span class="n">request</span><span class="o">.</span><span class="na">setTransactionId</span><span class="o">(</span><span class="s">"43671"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setUsage</span><span class="o">(</span><span class="s">"40208 concert tickets"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setRemoteIp</span><span class="o">(</span><span class="s">"245.253.2.12"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setAmount</span><span class="o">(</span><span class="k">new</span> <span class="n">BigDecimal</span><span class="o">(</span><span class="mi">100</span><span class="o">));</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCurrency</span><span class="o">(</span><span class="s">"EUR"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setIban</span><span class="o">(</span><span class="s">"DE09100100101234567891"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBic</span><span class="o">(</span><span class="s">"PBNKDEFFXXX"</span><span class="o">);</span>


    <span class="c1">// Billing Address</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingFirstname</span><span class="o">(</span><span class="s">"Travis"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingLastname</span><span class="o">(</span><span class="s">"Pastrana"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingCountry</span><span class="o">(</span><span class="s">"DE"</span><span class="o">);</span>

    <span class="n">GenesisClient</span> <span class="n">client</span> <span class="o">=</span> <span class="k">new</span> <span class="n">GenesisClient</span><span class="o">(</span><span class="n">configuration</span><span class="o">,</span> <span class="n">request</span><span class="o">);</span>
    <span class="n">client</span><span class="o">.</span><span class="na">execute</span><span class="o">();</span>

    <span class="c1">// Parse Payment result</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">client</span><span class="o">.</span><span class="na">getResponse</span><span class="o">());</span>

  <span class="o">}</span>
<span class="o">}</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="kd">var</span> <span class="nx">genesis</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'genesis.js/lib/genesis.js'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">transaction</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">genesis</span><span class="p">.</span><span class="nx">transaction</span><span class="p">();</span>

<span class="kd">var</span> <span class="nx">failure</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">reason</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">reason</span><span class="p">);</span>
<span class="p">};</span>

<span class="kd">var</span> <span class="nx">success</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>

<span class="nx">transaction</span><span class="p">.</span><span class="nx">sct_payout</span><span class="p">(</span>
  <span class="p">{</span>
    <span class="s2">"transaction_id"</span><span class="p">:</span> <span class="s2">"43671"</span><span class="p">,</span>
    <span class="s2">"usage"</span><span class="p">:</span> <span class="s2">"40208 concert tickets"</span><span class="p">,</span>
    <span class="s2">"remote_ip"</span><span class="p">:</span> <span class="s2">"245.253.2.12"</span><span class="p">,</span>
    <span class="s2">"amount"</span><span class="p">:</span> <span class="s2">"100"</span><span class="p">,</span>
    <span class="s2">"currency"</span><span class="p">:</span> <span class="s2">"EUR"</span><span class="p">,</span>
    <span class="s2">"iban"</span><span class="p">:</span> <span class="s2">"DE09100100101234567891"</span><span class="p">,</span>
    <span class="s2">"bic"</span><span class="p">:</span> <span class="s2">"PBNKDEFFXXX"</span><span class="p">,</span>
    <span class="s2">"billing_address"</span><span class="p">:</span> <span class="p">{</span>
      <span class="s2">"first_name"</span><span class="p">:</span> <span class="s2">"Travis"</span><span class="p">,</span>
      <span class="s2">"last_name"</span><span class="p">:</span> <span class="s2">"Pastrana"</span><span class="p">,</span>
      <span class="s2">"country"</span><span class="p">:</span> <span class="s2">"DE"</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">).</span><span class="nx">send</span><span class="p">()</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">success</span><span class="p">)</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">failure</span><span class="p">);</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>curl https://username:password@gate.emerchantpay.net/process/TERMINAL-TOKEN <span class="se">\</span>
   -H <span class="s2">"Content-Type: text/xml"</span> <span class="se">\</span>
   -d <span class="s1">'
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;sct_payout&lt;/transaction_type&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;usage&gt;40208 concert tickets&lt;/usage&gt;
  &lt;remote_ip&gt;245.253.2.12&lt;/remote_ip&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;EUR&lt;/currency&gt;
  &lt;iban&gt;DE09100100101234567891&lt;/iban&gt;
  &lt;bic&gt;PBNKDEFFXXX&lt;/bic&gt;
  &lt;billing_address&gt;
    &lt;first_name&gt;Travis&lt;/first_name&gt;
    &lt;last_name&gt;Pastrana&lt;/last_name&gt;
    &lt;country&gt;DE&lt;/country&gt;
  &lt;/billing_address&gt;
&lt;/payment_transaction&gt;'</span>
</code></pre>

<p><strong>Request Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>usage</td>
<td>optional</td>
<td>string(255)</td>
<td>Description of the transaction for later use</td>
</tr>
<tr>
<td>remote_ip</td>
<td>required*</td>
<td>IPv4 address</td>
<td>IPv4 address of customer</td>
</tr>
<tr>
<td>amount</td>
<td>required</td>
<td>integer &gt; 0</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>required</td>
<td>string(3)</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>iban</td>
<td>required</td>
<td>string(34)</td>
<td>Customer’s IBAN number</td>
</tr>
<tr>
<td>bic</td>
<td>required</td>
<td>string(11)</td>
<td>SWIFT/BIC code of the customer’s bank</td>
</tr>
<tr>
<td><strong>billing_address</strong></td>
<td>required</td>
<td></td>
<td>See <a href="#required-vs-optional-api-params">Required vs Optional API params</a> for details</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;first_name</td>
<td>required</td>
<td>string(255)</td>
<td>Customer first name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;last_name</td>
<td>required</td>
<td>string(255)</td>
<td>Customer last name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address1</td>
<td>required*</td>
<td>string(255)</td>
<td>Primary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address2</td>
<td>required*</td>
<td>string(255)</td>
<td>Secondary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;zip_code</td>
<td>required*</td>
<td>string</td>
<td>ZIP code</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;city</td>
<td>required*</td>
<td>string(255)</td>
<td>City</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;state</td>
<td>required*</td>
<td>string(2)</td>
<td>State code in <a href="https://en.wikipedia.org/wiki/ISO_3166-2">ISO 3166-2</a>, required for USA and Canada</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;country</td>
<td>required</td>
<td>string(2)</td>
<td>Country code in <a href="https://www.iso.org/iso-3166-country-codes.html">ISO 3166</a></td>
</tr>
<tr>
<td><strong>shipping_address</strong></td>
<td>optional</td>
<td></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;first_name</td>
<td>optional</td>
<td>string(255)</td>
<td>Customer first name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;last_name</td>
<td>optional</td>
<td>string(255)</td>
<td>Customer last name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address1</td>
<td>optional</td>
<td>string(255)</td>
<td>Primary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address2</td>
<td>optional</td>
<td>string(255)</td>
<td>Secondary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;zip_code</td>
<td>optional</td>
<td>string</td>
<td>ZIP code</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;city</td>
<td>optional</td>
<td>string(255)</td>
<td>City</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;state</td>
<td>optional</td>
<td>string(2)</td>
<td>State code in <a href="https://en.wikipedia.org/wiki/ISO_3166-2">ISO 3166-2</a>, required for USA and Canada</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;country</td>
<td>optional</td>
<td>string(2)</td>
<td>Country code in <a href="https://www.iso.org/iso-3166-country-codes.html">ISO 3166</a></td>
</tr>
</tbody></table>

<p><code>required* = conditionally required</code></p>

<p><strong>Request Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>required</td>
<td>string(255)</td>
<td>The transaction type: <strong>sct_payout</strong></td>
</tr>
<tr>
<td>transaction_id</td>
<td>required</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>usage</td>
<td>optional</td>
<td>string(255)</td>
<td>Description of the transaction for later use</td>
</tr>
<tr>
<td>remote_ip</td>
<td>required*</td>
<td>IPv4 address</td>
<td>IPv4 address of customer</td>
</tr>
<tr>
<td>amount</td>
<td>required</td>
<td>integer &gt; 0</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>required</td>
<td>string(3)</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>iban</td>
<td>required</td>
<td>string(34)</td>
<td>Customer’s IBAN number</td>
</tr>
<tr>
<td>bic</td>
<td>required</td>
<td>string(11)</td>
<td>SWIFT/BIC code of the customer’s bank</td>
</tr>
<tr>
<td><strong>billing_address</strong></td>
<td>required</td>
<td></td>
<td>See <a href="#required-vs-optional-api-params">Required vs Optional API params</a> for details</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;first_name</td>
<td>required</td>
<td>string(255)</td>
<td>Customer first name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;last_name</td>
<td>required</td>
<td>string(255)</td>
<td>Customer last name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address1</td>
<td>required*</td>
<td>string(255)</td>
<td>Primary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address2</td>
<td>required*</td>
<td>string(255)</td>
<td>Secondary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;zip_code</td>
<td>required*</td>
<td>string</td>
<td>ZIP code</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;city</td>
<td>required*</td>
<td>string(255)</td>
<td>City</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;state</td>
<td>required*</td>
<td>string(2)</td>
<td>State code in <a href="https://en.wikipedia.org/wiki/ISO_3166-2">ISO 3166-2</a>, required for USA and Canada</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;country</td>
<td>required</td>
<td>string(2)</td>
<td>Country code in <a href="https://www.iso.org/iso-3166-country-codes.html">ISO 3166</a></td>
</tr>
<tr>
<td><strong>shipping_address</strong></td>
<td>optional</td>
<td></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;first_name</td>
<td>optional</td>
<td>string(255)</td>
<td>Customer first name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;last_name</td>
<td>optional</td>
<td>string(255)</td>
<td>Customer last name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address1</td>
<td>optional</td>
<td>string(255)</td>
<td>Primary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address2</td>
<td>optional</td>
<td>string(255)</td>
<td>Secondary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;zip_code</td>
<td>optional</td>
<td>string</td>
<td>ZIP code</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;city</td>
<td>optional</td>
<td>string(255)</td>
<td>City</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;state</td>
<td>optional</td>
<td>string(2)</td>
<td>State code in <a href="https://en.wikipedia.org/wiki/ISO_3166-2">ISO 3166-2</a>, required for USA and Canada</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;country</td>
<td>optional</td>
<td>string(2)</td>
<td>Country code in <a href="https://www.iso.org/iso-3166-country-codes.html">ISO 3166</a></td>
</tr>
</tbody></table>

<p><code>required* = conditionally required</code></p>

<p><strong>Supported countries:</strong></p>

<p>Allowed countries include supported countries for <a href="#sdd-init-recurring-sale">SDD Init Recurring Sale</a> and the list below:</p>

<table><thead>
<tr>
<th>Country Name</th>
<th>Country Code</th>
</tr>
</thead><tbody>
<tr>
<td>Bulgaria</td>
<td>BG</td>
</tr>
<tr>
<td>Croatia</td>
<td>HR</td>
</tr>
<tr>
<td>Czech Republics</td>
<td>CZ</td>
</tr>
<tr>
<td>Denmark</td>
<td>DK</td>
</tr>
<tr>
<td>United Kingdom</td>
<td>UK</td>
</tr>
<tr>
<td>Hungary</td>
<td>HU</td>
</tr>
<tr>
<td>Iceland</td>
<td>IS</td>
</tr>
<tr>
<td>Liechtenstein</td>
<td>LI</td>
</tr>
<tr>
<td>Norway</td>
<td>NO</td>
</tr>
<tr>
<td>Poland</td>
<td>PL</td>
</tr>
<tr>
<td>Romania</td>
<td>RO</td>
</tr>
<tr>
<td>Sweden</td>
<td>SE</td>
</tr>
<tr>
<td>Switzerland</td>
<td>CH</td>
</tr>
</tbody></table>

<blockquote>
<p>Successful Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>stdClass Object
(
    [transaction_type] =&gt; sct_payout
    [status] =&gt; approved
    [mode] =&gt; live
    [transaction_id] =&gt; 43671
    [unique_id] =&gt; 44177a21403427eb96664a6d7e5d5d48
    [technical_message] =&gt; Transaction successful!
    [message] =&gt; Transaction successful!
    [timestamp] =&gt; DateTime Object
        (
            [date] =&gt; 2019-03-14 12:06:02.000000
            [timezone_type] =&gt; 2
            [timezone] =&gt; Z
        )
    [descriptor] =&gt; Descriptor one
    [amount] =&gt; 100
    [currency] =&gt; EUR
    [sent_to_acquirer] =&gt; true
)
</code></pre>

<pre class="highlight java tab-java"><code><span class="o">&lt;</span><span class="n">payment_response</span> <span class="n">content</span><span class="o">=[</span>
    <span class="o">&lt;</span><span class="n">transaction_type</span> <span class="n">content</span><span class="o">=[</span><span class="n">sct_payout</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">status</span> <span class="n">content</span><span class="o">=[</span><span class="n">approved</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">mode</span> <span class="n">content</span><span class="o">=[</span><span class="n">live</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">transaction_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">43671</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">unique_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">44177</span><span class="n">a21403427eb96664a6d7e5d5d48</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">technical_message</span> <span class="n">content</span><span class="o">=[</span><span class="n">Transaction</span> <span class="n">successful</span><span class="o">!]&gt;</span>
    <span class="o">&lt;</span><span class="n">message</span> <span class="n">content</span><span class="o">=[</span><span class="n">Transaction</span> <span class="n">successful</span><span class="o">!]&gt;</span>
    <span class="o">&lt;</span><span class="n">timestamp</span> <span class="n">content</span><span class="o">=[</span><span class="mi">2019</span><span class="o">-</span><span class="mo">03</span><span class="o">-</span><span class="mi">14</span><span class="nl">T12:</span><span class="mo">06</span><span class="o">:</span><span class="mo">02</span><span class="n">Z</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">descriptor</span> <span class="n">content</span><span class="o">=[</span><span class="n">Descriptor</span> <span class="n">one</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">amount</span> <span class="n">content</span><span class="o">=[</span><span class="mi">100</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">currency</span> <span class="n">content</span><span class="o">=[</span><span class="n">EUR</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">sent_to_acquirer</span> <span class="n">content</span><span class="o">=[</span><span class="kc">true</span><span class="o">]&gt;</span>
<span class="o">]&gt;</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="p">{</span>
    <span class="nl">transaction_type</span><span class="p">:</span> <span class="s2">"sct_payout"</span><span class="p">,</span>
    <span class="nx">status</span><span class="p">:</span> <span class="s2">"approved"</span><span class="p">,</span>
    <span class="nx">mode</span><span class="p">:</span> <span class="s2">"live"</span><span class="p">,</span>
    <span class="nx">transaction_id</span><span class="p">:</span> <span class="s2">"43671"</span><span class="p">,</span>
    <span class="nx">unique_id</span><span class="p">:</span> <span class="s2">"44177a21403427eb96664a6d7e5d5d48"</span><span class="p">,</span>
    <span class="nx">technical_message</span><span class="p">:</span> <span class="s2">"Transaction successful!"</span><span class="p">,</span>
    <span class="nx">message</span><span class="p">:</span> <span class="s2">"Transaction successful!"</span><span class="p">,</span>
    <span class="nx">timestamp</span><span class="p">:</span> <span class="s2">"2019-03-14T12:06:02Z"</span><span class="p">,</span>
    <span class="nx">descriptor</span><span class="p">:</span> <span class="s2">"Descriptor one"</span><span class="p">,</span>
    <span class="nx">amount</span><span class="p">:</span> <span class="s2">"100"</span><span class="p">,</span>
    <span class="nx">currency</span><span class="p">:</span> <span class="s2">"EUR"</span><span class="p">,</span>
    <span class="nx">sent_to_acquirer</span><span class="p">:</span> <span class="s2">"true"</span><span class="p">,</span>
<span class="p">}</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;sct_payout&lt;/transaction_type&gt;
  &lt;status&gt;approved&lt;/status&gt;
  &lt;mode&gt;live&lt;/mode&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;technical_message&gt;Transaction successful!&lt;/technical_message&gt;
  &lt;message&gt;Transaction successful!&lt;/message&gt;
  &lt;timestamp&gt;2019-03-14T12:06:02Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;EUR&lt;/currency&gt;
  &lt;sent_to_acquirer&gt;true&lt;/sent_to_acquirer&gt;
&lt;/payment_transaction&gt;
</code></pre>

<p><strong>Successful Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>The transaction type</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>transaction_id</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>unique_id</td>
<td>string(32)</td>
<td>Unique id defined by gate (must later be used if capturing, voiding or refunding a transaction)</td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
<tr>
<td>message</td>
<td>string(255)</td>
<td>Human readable error message which can be displayed to users.</td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when the transaction was processed in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Combined date and time</a> e.g. 2007-08- 30T17:46:11Z</td>
</tr>
<tr>
<td>descriptor</td>
<td>string</td>
<td>Static descriptor MID info as configured on the gateway</td>
</tr>
<tr>
<td>amount</td>
<td>integer</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>sent_to_acquirer</td>
<td>string</td>
<td>&quot;true&quot; or &quot;false&quot;</td>
</tr>
</tbody></table>

<blockquote>
<p>Error Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>stdClass Object
(
    [transaction_type] =&gt; sct_payout
    [status] =&gt; error
    [mode] =&gt; live
    [transaction_id] =&gt; 43671
    [unique_id] =&gt; 44177a21403427eb96664a6d7e5d5d48
    [code] =&gt; 340
    [technical_message] =&gt; expiration_year is invalid
    [message] =&gt; expiration_year is invalid
    [timestamp] =&gt; DateTime Object
        (
            [date] =&gt; 2019-03-14 12:06:02.000000
            [timezone_type] =&gt; 2
            [timezone] =&gt; Z
        )
    [descriptor] =&gt; Descriptor one
    [amount] =&gt; 100
    [currency] =&gt; EUR
    [sent_to_acquirer] =&gt; false
)
</code></pre>

<pre class="highlight java tab-java"><code><span class="o">&lt;</span><span class="n">payment_response</span> <span class="n">content</span><span class="o">=[</span>
    <span class="o">&lt;</span><span class="n">transaction_type</span> <span class="n">content</span><span class="o">=[</span><span class="n">sct_payout</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">status</span> <span class="n">content</span><span class="o">=[</span><span class="n">error</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">mode</span> <span class="n">content</span><span class="o">=[</span><span class="n">live</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">transaction_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">43671</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">unique_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">44177</span><span class="n">a21403427eb96664a6d7e5d5d48</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">code</span> <span class="n">content</span><span class="o">=[</span><span class="mi">340</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">technical_message</span> <span class="n">content</span><span class="o">=[</span><span class="n">expiration_year</span> <span class="n">is</span> <span class="n">invalid</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">message</span> <span class="n">content</span><span class="o">=[</span><span class="n">expiration_year</span> <span class="n">is</span> <span class="n">invalid</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">timestamp</span> <span class="n">content</span><span class="o">=[</span><span class="mi">2019</span><span class="o">-</span><span class="mo">03</span><span class="o">-</span><span class="mi">14</span><span class="nl">T12:</span><span class="mo">06</span><span class="o">:</span><span class="mo">02</span><span class="n">Z</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">descriptor</span> <span class="n">content</span><span class="o">=[</span><span class="n">Descriptor</span> <span class="n">one</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">amount</span> <span class="n">content</span><span class="o">=[</span><span class="mi">100</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">currency</span> <span class="n">content</span><span class="o">=[</span><span class="n">EUR</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">sent_to_acquirer</span> <span class="n">content</span><span class="o">=[</span><span class="kc">false</span><span class="o">]&gt;</span>
<span class="o">]&gt;</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="p">{</span>
    <span class="nl">transaction_type</span><span class="p">:</span> <span class="s2">"sct_payout"</span><span class="p">,</span>
    <span class="nx">status</span><span class="p">:</span> <span class="s2">"error"</span><span class="p">,</span>
    <span class="nx">mode</span><span class="p">:</span> <span class="s2">"live"</span><span class="p">,</span>
    <span class="nx">transaction_id</span><span class="p">:</span> <span class="s2">"43671"</span><span class="p">,</span>
    <span class="nx">unique_id</span><span class="p">:</span> <span class="s2">"44177a21403427eb96664a6d7e5d5d48"</span><span class="p">,</span>
    <span class="nx">code</span><span class="p">:</span> <span class="s2">"340"</span><span class="p">,</span>
    <span class="nx">technical_message</span><span class="p">:</span> <span class="s2">"expiration_year is invalid"</span><span class="p">,</span>
    <span class="nx">message</span><span class="p">:</span> <span class="s2">"expiration_year is invalid"</span><span class="p">,</span>
    <span class="nx">timestamp</span><span class="p">:</span> <span class="s2">"2019-03-14T12:06:02Z"</span><span class="p">,</span>
    <span class="nx">descriptor</span><span class="p">:</span> <span class="s2">"Descriptor one"</span><span class="p">,</span>
    <span class="nx">amount</span><span class="p">:</span> <span class="s2">"100"</span><span class="p">,</span>
    <span class="nx">currency</span><span class="p">:</span> <span class="s2">"EUR"</span><span class="p">,</span>
    <span class="nx">sent_to_acquirer</span><span class="p">:</span> <span class="s2">"false"</span><span class="p">,</span>
<span class="p">}</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;sct_payout&lt;/transaction_type&gt;
  &lt;status&gt;error&lt;/status&gt;
  &lt;mode&gt;live&lt;/mode&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;code&gt;340&lt;/code&gt;
  &lt;technical_message&gt;expiration_year is invalid&lt;/technical_message&gt;
  &lt;message&gt;expiration_year is invalid&lt;/message&gt;
  &lt;timestamp&gt;2019-03-14T12:06:02Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;EUR&lt;/currency&gt;
  &lt;sent_to_acquirer&gt;false&lt;/sent_to_acquirer&gt;
&lt;/payment_transaction&gt;
</code></pre>

<p><strong>Error Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>The transaction type</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>transaction_id</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>unique_id</td>
<td>string(32)</td>
<td>Unique id defined by gate (must later be used if capturing, voiding or refunding a transaction)</td>
</tr>
<tr>
<td>code</td>
<td>integer</td>
<td>Error code according to <a href="#error-code-table">Error code table</a></td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
<tr>
<td>message</td>
<td>string(255)</td>
<td>Human readable error message which can be displayed to users.</td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when the transaction was processed in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Combined date and time</a> e.g. 2007-08- 30T17:46:11Z</td>
</tr>
<tr>
<td>descriptor</td>
<td>string</td>
<td>Static descriptor MID info as configured on the gateway</td>
</tr>
<tr>
<td>amount</td>
<td>integer</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>sent_to_acquirer</td>
<td>string</td>
<td>&quot;true&quot; or &quot;false&quot;</td>
</tr>
</tbody></table>
<h3 id='trustly-withdrawal'>Trustly Withdrawal</h3>
<p>Trustly Withdrawal is an oBeP-style alternative payment method that allows you to transfer money directly to your customers ebank account.</p>

<p>After initiating a transaction Trustly will redirect the customer to their page.</p>

<p>There they have to select their bank and log in with their regular access codes.</p>

<p>Then the customer has to choose the account where they wish to receive the payment (for example, their savings account or current account).</p>

<blockquote>
<p>Request</p>
</blockquote>

<pre class="highlight php tab-php"><code><span class="cp">&lt;?php</span>

<span class="c1">// Load the pre-configured ini file...
</span><span class="nx">\Genesis\Config</span><span class="o">::</span><span class="na">loadSettings</span><span class="p">(</span><span class="s1">'/path/to/config.ini'</span><span class="p">);</span>

<span class="nv">$genesis</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Genesis</span><span class="p">(</span><span class="s1">'Financial\Alternatives\Trustly\Withdrawal'</span><span class="p">);</span>
<span class="nv">$request</span> <span class="o">=</span> <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">request</span><span class="p">();</span>

<span class="nv">$request</span>
  <span class="o">-&gt;</span><span class="na">setTransactionId</span><span class="p">(</span><span class="s1">'43671'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setUsage</span><span class="p">(</span><span class="s1">'40208 concert tickets'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setRemoteIp</span><span class="p">(</span><span class="s1">'245.253.2.12'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setReturnSuccessUrl</span><span class="p">(</span><span class="s1">'http://www.example.com/success'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setReturnFailureUrl</span><span class="p">(</span><span class="s1">'http://www.example.com/failure'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setAmount</span><span class="p">(</span><span class="s1">'100'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCurrency</span><span class="p">(</span><span class="s1">'USD'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCustomerEmail</span><span class="p">(</span><span class="s1">'travis@example.com'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCustomerPhone</span><span class="p">(</span><span class="s1">'+1987987987987'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBirthDate</span><span class="p">(</span><span class="s1">'21-10-1980'</span><span class="p">)</span>


  <span class="c1">// Billing Address
</span>  <span class="o">-&gt;</span><span class="na">setBillingFirstName</span><span class="p">(</span><span class="s1">'Travis'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingLastName</span><span class="p">(</span><span class="s1">'Pastrana'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingAddress1</span><span class="p">(</span><span class="s1">'Muster Str. 12'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingZipCode</span><span class="p">(</span><span class="s1">'12114'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingCity</span><span class="p">(</span><span class="s1">'Berlin'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingCountry</span><span class="p">(</span><span class="s1">'DE'</span><span class="p">);</span>

<span class="k">try</span> <span class="p">{</span>
    <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">execute</span><span class="p">();</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">response</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">getResponseObject</span><span class="p">();</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">\Exception</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$e</span><span class="o">-&gt;</span><span class="na">getMessage</span><span class="p">();</span>
<span class="p">}</span>
</code></pre>

<pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.GenesisClient</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.TransactionResult</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.constants.Endpoints</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.constants.Environments</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.requests.financial.apm.TrustlyWithdrawalRequest</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.model.Transaction</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Configuration</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Country</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Currency</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.math.BigDecimal</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.MalformedURLException</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.URL</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">GenesisExample</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">MalformedURLException</span> <span class="o">{</span>

    <span class="c1">// Create configuration</span>
    <span class="n">Configuration</span> <span class="n">configuration</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Configuration</span><span class="o">(</span><span class="n">Environments</span><span class="o">.</span><span class="na">STAGING</span><span class="o">,</span> <span class="n">Endpoints</span><span class="o">.</span><span class="na">EMERCHANTPAY</span><span class="o">);</span>

    <span class="n">configuration</span><span class="o">.</span><span class="na">setUsername</span><span class="o">(</span><span class="s">"SET_YOUR_USERNAME"</span><span class="o">);</span>
    <span class="n">configuration</span><span class="o">.</span><span class="na">setPassword</span><span class="o">(</span><span class="s">"SET_YOUR_PASSWORD"</span><span class="o">);</span>
    <span class="n">configuration</span><span class="o">.</span><span class="na">setToken</span><span class="o">(</span><span class="s">"SET_YOUR_TOKEN"</span><span class="o">);</span>

    <span class="n">TrustlyWithdrawalRequest</span> <span class="n">request</span> <span class="o">=</span> <span class="k">new</span> <span class="n">TrustlyWithdrawalRequest</span><span class="o">();</span>

    <span class="n">request</span><span class="o">.</span><span class="na">setTransactionId</span><span class="o">(</span><span class="s">"43671"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setUsage</span><span class="o">(</span><span class="s">"40208 concert tickets"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setRemoteIp</span><span class="o">(</span><span class="s">"245.253.2.12"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setReturnSuccessUrl</span><span class="o">(</span><span class="k">new</span> <span class="n">URL</span><span class="o">(</span><span class="s">"http://www.example.com/success"</span><span class="o">));</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setReturnFailureUrl</span><span class="o">(</span><span class="k">new</span> <span class="n">URL</span><span class="o">(</span><span class="s">"http://www.example.com/failure"</span><span class="o">));</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setAmount</span><span class="o">(</span><span class="k">new</span> <span class="n">BigDecimal</span><span class="o">(</span><span class="mi">100</span><span class="o">));</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCurrency</span><span class="o">(</span><span class="s">"USD"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCustomerEmail</span><span class="o">(</span><span class="s">"travis@example.com"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCustomerPhone</span><span class="o">(</span><span class="s">"+1987987987987"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBirthDate</span><span class="o">(</span><span class="s">"21-10-1980"</span><span class="o">);</span>


    <span class="c1">// Billing Address</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingFirstname</span><span class="o">(</span><span class="s">"Travis"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingLastname</span><span class="o">(</span><span class="s">"Pastrana"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingPrimaryAddress</span><span class="o">(</span><span class="s">"Muster Str. 12"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingZipCode</span><span class="o">(</span><span class="s">"12114"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingCity</span><span class="o">(</span><span class="s">"Berlin"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingCountry</span><span class="o">(</span><span class="s">"DE"</span><span class="o">);</span>

    <span class="n">GenesisClient</span> <span class="n">client</span> <span class="o">=</span> <span class="k">new</span> <span class="n">GenesisClient</span><span class="o">(</span><span class="n">configuration</span><span class="o">,</span> <span class="n">request</span><span class="o">);</span>
    <span class="n">client</span><span class="o">.</span><span class="na">execute</span><span class="o">();</span>

    <span class="c1">// Parse Payment result</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">client</span><span class="o">.</span><span class="na">getResponse</span><span class="o">());</span>

  <span class="o">}</span>
<span class="o">}</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="kd">var</span> <span class="nx">genesis</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'genesis.js/lib/genesis.js'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">transaction</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">genesis</span><span class="p">.</span><span class="nx">transaction</span><span class="p">();</span>

<span class="kd">var</span> <span class="nx">failure</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">reason</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">reason</span><span class="p">);</span>
<span class="p">};</span>

<span class="kd">var</span> <span class="nx">success</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>

<span class="nx">transaction</span><span class="p">.</span><span class="nx">trustly_withdrawal</span><span class="p">(</span>
  <span class="p">{</span>
    <span class="s2">"transaction_id"</span><span class="p">:</span> <span class="s2">"43671"</span><span class="p">,</span>
    <span class="s2">"usage"</span><span class="p">:</span> <span class="s2">"40208 concert tickets"</span><span class="p">,</span>
    <span class="s2">"remote_ip"</span><span class="p">:</span> <span class="s2">"245.253.2.12"</span><span class="p">,</span>
    <span class="s2">"return_success_url"</span><span class="p">:</span> <span class="s2">"http://www.example.com/success"</span><span class="p">,</span>
    <span class="s2">"return_failure_url"</span><span class="p">:</span> <span class="s2">"http://www.example.com/failure"</span><span class="p">,</span>
    <span class="s2">"amount"</span><span class="p">:</span> <span class="s2">"100"</span><span class="p">,</span>
    <span class="s2">"currency"</span><span class="p">:</span> <span class="s2">"USD"</span><span class="p">,</span>
    <span class="s2">"customer_email"</span><span class="p">:</span> <span class="s2">"travis@example.com"</span><span class="p">,</span>
    <span class="s2">"customer_phone"</span><span class="p">:</span> <span class="s2">"+1987987987987"</span><span class="p">,</span>
    <span class="s2">"birth_date"</span><span class="p">:</span> <span class="s2">"21-10-1980"</span><span class="p">,</span>
    <span class="s2">"billing_address"</span><span class="p">:</span> <span class="p">{</span>
      <span class="s2">"first_name"</span><span class="p">:</span> <span class="s2">"Travis"</span><span class="p">,</span>
      <span class="s2">"last_name"</span><span class="p">:</span> <span class="s2">"Pastrana"</span><span class="p">,</span>
      <span class="s2">"address1"</span><span class="p">:</span> <span class="s2">"Muster Str. 12"</span><span class="p">,</span>
      <span class="s2">"zip_code"</span><span class="p">:</span> <span class="s2">"12114"</span><span class="p">,</span>
      <span class="s2">"city"</span><span class="p">:</span> <span class="s2">"Berlin"</span><span class="p">,</span>
      <span class="s2">"country"</span><span class="p">:</span> <span class="s2">"DE"</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">).</span><span class="nx">send</span><span class="p">()</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">success</span><span class="p">)</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">failure</span><span class="p">);</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>curl https://username:password@gate.emerchantpay.net/process/TERMINAL-TOKEN <span class="se">\</span>
   -H <span class="s2">"Content-Type: text/xml"</span> <span class="se">\</span>
   -d <span class="s1">'
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;trustly_withdrawal&lt;/transaction_type&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;usage&gt;40208 concert tickets&lt;/usage&gt;
  &lt;remote_ip&gt;245.253.2.12&lt;/remote_ip&gt;
  &lt;return_success_url&gt;http://www.example.com/success&lt;/return_success_url&gt;
  &lt;return_failure_url&gt;http://www.example.com/failure&lt;/return_failure_url&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
  &lt;customer_email&gt;travis@example.com&lt;/customer_email&gt;
  &lt;customer_phone&gt;+1987987987987&lt;/customer_phone&gt;
  &lt;birth_date&gt;21-10-1980&lt;/birth_date&gt;
  &lt;billing_address&gt;
    &lt;first_name&gt;Travis&lt;/first_name&gt;
    &lt;last_name&gt;Pastrana&lt;/last_name&gt;
    &lt;address1&gt;Muster Str. 12&lt;/address1&gt;
    &lt;zip_code&gt;12114&lt;/zip_code&gt;
    &lt;city&gt;Berlin&lt;/city&gt;
    &lt;country&gt;DE&lt;/country&gt;
  &lt;/billing_address&gt;
&lt;/payment_transaction&gt;'</span>
</code></pre>

<p><strong>Request Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>usage</td>
<td>optional</td>
<td>string(255)</td>
<td>Description of the transaction for later use</td>
</tr>
<tr>
<td>remote_ip</td>
<td>required</td>
<td>IPv4 address</td>
<td>IPv4 address of customer</td>
</tr>
<tr>
<td>return_success_url</td>
<td>required</td>
<td>url</td>
<td>URL where customer is sent to after successful payment</td>
</tr>
<tr>
<td>return_failure_url</td>
<td>required</td>
<td>url</td>
<td>URL where customer is sent to after unsuccessful payment</td>
</tr>
<tr>
<td>amount</td>
<td>required</td>
<td>integer &gt; 0</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>required</td>
<td>string(3)</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>customer_email</td>
<td>required</td>
<td>e-mail address</td>
<td>Must contain valid e-mail of customer</td>
</tr>
<tr>
<td>customer_phone</td>
<td>required*</td>
<td>string(32)</td>
<td>Must contain valid phone number of customer</td>
</tr>
<tr>
<td>birth_date</td>
<td>required</td>
<td>dd-mm-yyyy</td>
<td>Required for Visa only when MCC is a Financial Services one (e.g. MCC 6012)</td>
</tr>
<tr>
<td><strong>billing_address</strong></td>
<td>required</td>
<td></td>
<td>See <a href="#required-vs-optional-api-params">Required vs Optional API params</a> for details</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;first_name</td>
<td>required*</td>
<td>string(255)</td>
<td>Customer first name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;last_name</td>
<td>required*</td>
<td>string(255)</td>
<td>Customer last name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address1</td>
<td>required*</td>
<td>string(255)</td>
<td>Primary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address2</td>
<td>required*</td>
<td>string(255)</td>
<td>Secondary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;zip_code</td>
<td>required*</td>
<td>string</td>
<td>ZIP code</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;city</td>
<td>required*</td>
<td>string(255)</td>
<td>City</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;state</td>
<td>required*</td>
<td>string(2)</td>
<td>State code in <a href="https://en.wikipedia.org/wiki/ISO_3166-2">ISO 3166-2</a>, required for USA and Canada</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;country</td>
<td>required</td>
<td>string(2)</td>
<td>Country code in <a href="https://www.iso.org/iso-3166-country-codes.html">ISO 3166</a></td>
</tr>
</tbody></table>

<p><code>required* = conditionally required</code></p>

<p>Supported countries:</p>

<table><thead>
<tr>
<th>Country name</th>
<th>Country code</th>
</tr>
</thead><tbody>
<tr>
<td>Austria</td>
<td>AT</td>
</tr>
<tr>
<td>Bulgaria</td>
<td>BG</td>
</tr>
<tr>
<td>Belgium</td>
<td>BE</td>
</tr>
<tr>
<td>Croatia</td>
<td>HR</td>
</tr>
<tr>
<td>Czech Republic</td>
<td>CZ</td>
</tr>
<tr>
<td>Cyprus</td>
<td>CY</td>
</tr>
<tr>
<td>Denmark</td>
<td>DK</td>
</tr>
<tr>
<td>Estonia</td>
<td>EE</td>
</tr>
<tr>
<td>Finland</td>
<td>FI</td>
</tr>
<tr>
<td>France</td>
<td>FR</td>
</tr>
<tr>
<td>Germany</td>
<td>DE</td>
</tr>
<tr>
<td>Greece</td>
<td>GR</td>
</tr>
<tr>
<td>Hungary</td>
<td>HU</td>
</tr>
<tr>
<td>Italy</td>
<td>IT</td>
</tr>
<tr>
<td>Ireland</td>
<td>IE</td>
</tr>
<tr>
<td>Lithuania</td>
<td>LT</td>
</tr>
<tr>
<td>Latvia</td>
<td>LV</td>
</tr>
<tr>
<td>Luxembourg</td>
<td>LU</td>
</tr>
<tr>
<td>Malta</td>
<td>MT</td>
</tr>
<tr>
<td>Norway</td>
<td>NO</td>
</tr>
<tr>
<td>Netherlands</td>
<td>NL</td>
</tr>
<tr>
<td>Portugal</td>
<td>PT</td>
</tr>
<tr>
<td>Poland</td>
<td>PL</td>
</tr>
<tr>
<td>Romania</td>
<td>RO</td>
</tr>
<tr>
<td>Slovakia</td>
<td>SK</td>
</tr>
<tr>
<td>Slovenia</td>
<td>SI</td>
</tr>
<tr>
<td>Sweden</td>
<td>SE</td>
</tr>
<tr>
<td>Spain</td>
<td>ES</td>
</tr>
<tr>
<td>United Kingdom</td>
<td>GB</td>
</tr>
</tbody></table>

<blockquote>
<p>Successful Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>stdClass Object
(
    [transaction_type] =&gt; trustly_withdrawal
    [status] =&gt; pending_async
    [mode] =&gt; live
    [transaction_id] =&gt; 43671
    [unique_id] =&gt; 44177a21403427eb96664a6d7e5d5d48
    [redirect_url] =&gt; https://gate.emerchantpay.net/redirect/to_acquirer/649e1ff35c61
    [technical_message] =&gt; Transaction successful!
    [message] =&gt; Transaction successful!
    [timestamp] =&gt; DateTime Object
        (
            [date] =&gt; 2019-03-14 12:06:03.000000
            [timezone_type] =&gt; 2
            [timezone] =&gt; Z
        )
    [descriptor] =&gt; Descriptor one
    [amount] =&gt; 100
    [currency] =&gt; USD
    [sent_to_acquirer] =&gt; true
)
</code></pre>

<pre class="highlight java tab-java"><code><span class="o">&lt;</span><span class="n">payment_response</span> <span class="n">content</span><span class="o">=[</span>
    <span class="o">&lt;</span><span class="n">transaction_type</span> <span class="n">content</span><span class="o">=[</span><span class="n">trustly_withdrawal</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">status</span> <span class="n">content</span><span class="o">=[</span><span class="n">pending_async</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">mode</span> <span class="n">content</span><span class="o">=[</span><span class="n">live</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">transaction_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">43671</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">unique_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">44177</span><span class="n">a21403427eb96664a6d7e5d5d48</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">redirect_url</span> <span class="n">content</span><span class="o">=[</span><span class="nl">https:</span><span class="c1">//gate.emerchantpay.net/redirect/to_acquirer/649e1ff35c61]&gt;</span>
    <span class="o">&lt;</span><span class="n">technical_message</span> <span class="n">content</span><span class="o">=[</span><span class="n">Transaction</span> <span class="n">successful</span><span class="o">!]&gt;</span>
    <span class="o">&lt;</span><span class="n">message</span> <span class="n">content</span><span class="o">=[</span><span class="n">Transaction</span> <span class="n">successful</span><span class="o">!]&gt;</span>
    <span class="o">&lt;</span><span class="n">timestamp</span> <span class="n">content</span><span class="o">=[</span><span class="mi">2019</span><span class="o">-</span><span class="mo">03</span><span class="o">-</span><span class="mi">14</span><span class="nl">T12:</span><span class="mo">06</span><span class="o">:</span><span class="mo">03</span><span class="n">Z</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">descriptor</span> <span class="n">content</span><span class="o">=[</span><span class="n">Descriptor</span> <span class="n">one</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">amount</span> <span class="n">content</span><span class="o">=[</span><span class="mi">100</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">currency</span> <span class="n">content</span><span class="o">=[</span><span class="n">USD</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">sent_to_acquirer</span> <span class="n">content</span><span class="o">=[</span><span class="kc">true</span><span class="o">]&gt;</span>
<span class="o">]&gt;</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="p">{</span>
    <span class="nl">transaction_type</span><span class="p">:</span> <span class="s2">"trustly_withdrawal"</span><span class="p">,</span>
    <span class="nx">status</span><span class="p">:</span> <span class="s2">"pending_async"</span><span class="p">,</span>
    <span class="nx">mode</span><span class="p">:</span> <span class="s2">"live"</span><span class="p">,</span>
    <span class="nx">transaction_id</span><span class="p">:</span> <span class="s2">"43671"</span><span class="p">,</span>
    <span class="nx">unique_id</span><span class="p">:</span> <span class="s2">"44177a21403427eb96664a6d7e5d5d48"</span><span class="p">,</span>
    <span class="nx">redirect_url</span><span class="p">:</span> <span class="s2">"https://gate.emerchantpay.net/redirect/to_acquirer/649e1ff35c61"</span><span class="p">,</span>
    <span class="nx">technical_message</span><span class="p">:</span> <span class="s2">"Transaction successful!"</span><span class="p">,</span>
    <span class="nx">message</span><span class="p">:</span> <span class="s2">"Transaction successful!"</span><span class="p">,</span>
    <span class="nx">timestamp</span><span class="p">:</span> <span class="s2">"2019-03-14T12:06:03Z"</span><span class="p">,</span>
    <span class="nx">descriptor</span><span class="p">:</span> <span class="s2">"Descriptor one"</span><span class="p">,</span>
    <span class="nx">amount</span><span class="p">:</span> <span class="s2">"100"</span><span class="p">,</span>
    <span class="nx">currency</span><span class="p">:</span> <span class="s2">"USD"</span><span class="p">,</span>
    <span class="nx">sent_to_acquirer</span><span class="p">:</span> <span class="s2">"true"</span><span class="p">,</span>
<span class="p">}</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;trustly_withdrawal&lt;/transaction_type&gt;
  &lt;status&gt;pending_async&lt;/status&gt;
  &lt;mode&gt;live&lt;/mode&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;redirect_url&gt;https://gate.emerchantpay.net/redirect/to_acquirer/649e1ff35c61&lt;/redirect_url&gt;
  &lt;technical_message&gt;Transaction successful!&lt;/technical_message&gt;
  &lt;message&gt;Transaction successful!&lt;/message&gt;
  &lt;timestamp&gt;2019-03-14T12:06:03Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
  &lt;sent_to_acquirer&gt;true&lt;/sent_to_acquirer&gt;
&lt;/payment_transaction&gt;
</code></pre>

<p><strong>Successful Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>The transaction type</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>transaction_id</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>unique_id</td>
<td>string(32)</td>
<td>Unique id defined by gate (must later be used if capturing, voiding or refunding a transaction)</td>
</tr>
<tr>
<td>redirect_url</td>
<td>url</td>
<td>URL where user has to be redirected to complete payment process. It is available for asynchronous mode</td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
<tr>
<td>message</td>
<td>string(255)</td>
<td>Human readable error message which can be displayed to users.</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when the transaction was processed in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Combined date and time</a> e.g. 2007-08- 30T17:46:11Z</td>
</tr>
<tr>
<td>descriptor</td>
<td>string</td>
<td>Static descriptor MID info as configured on the gateway</td>
</tr>
<tr>
<td>amount</td>
<td>integer</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>sent_to_acquirer</td>
<td>string</td>
<td>&quot;true&quot; or &quot;false&quot;</td>
</tr>
</tbody></table>

<blockquote>
<p>Error Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>stdClass Object
(
    [transaction_type] =&gt; trustly_withdrawal
    [status] =&gt; error
    [mode] =&gt; live
    [transaction_id] =&gt; 43671
    [unique_id] =&gt; 44177a21403427eb96664a6d7e5d5d48
    [code] =&gt; 110
    [message] =&gt; Something went wrong, please contact support!
    [timestamp] =&gt; DateTime Object
        (
            [date] =&gt; 2019-03-14 12:06:03.000000
            [timezone_type] =&gt; 2
            [timezone] =&gt; Z
        )
    [descriptor] =&gt; Descriptor one
    [amount] =&gt; 100
    [currency] =&gt; USD
    [sent_to_acquirer] =&gt; false
)
</code></pre>

<pre class="highlight java tab-java"><code><span class="o">&lt;</span><span class="n">payment_response</span> <span class="n">content</span><span class="o">=[</span>
    <span class="o">&lt;</span><span class="n">transaction_type</span> <span class="n">content</span><span class="o">=[</span><span class="n">trustly_withdrawal</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">status</span> <span class="n">content</span><span class="o">=[</span><span class="n">error</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">mode</span> <span class="n">content</span><span class="o">=[</span><span class="n">live</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">transaction_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">43671</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">unique_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">44177</span><span class="n">a21403427eb96664a6d7e5d5d48</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">code</span> <span class="n">content</span><span class="o">=[</span><span class="mi">110</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">message</span> <span class="n">content</span><span class="o">=[</span><span class="n">Something</span> <span class="n">went</span> <span class="n">wrong</span><span class="o">,</span> <span class="n">please</span> <span class="n">contact</span> <span class="n">support</span><span class="o">!]&gt;</span>
    <span class="o">&lt;</span><span class="n">timestamp</span> <span class="n">content</span><span class="o">=[</span><span class="mi">2019</span><span class="o">-</span><span class="mo">03</span><span class="o">-</span><span class="mi">14</span><span class="nl">T12:</span><span class="mo">06</span><span class="o">:</span><span class="mo">03</span><span class="n">Z</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">descriptor</span> <span class="n">content</span><span class="o">=[</span><span class="n">Descriptor</span> <span class="n">one</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">amount</span> <span class="n">content</span><span class="o">=[</span><span class="mi">100</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">currency</span> <span class="n">content</span><span class="o">=[</span><span class="n">USD</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">sent_to_acquirer</span> <span class="n">content</span><span class="o">=[</span><span class="kc">false</span><span class="o">]&gt;</span>
<span class="o">]&gt;</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="p">{</span>
    <span class="nl">transaction_type</span><span class="p">:</span> <span class="s2">"trustly_withdrawal"</span><span class="p">,</span>
    <span class="nx">status</span><span class="p">:</span> <span class="s2">"error"</span><span class="p">,</span>
    <span class="nx">mode</span><span class="p">:</span> <span class="s2">"live"</span><span class="p">,</span>
    <span class="nx">transaction_id</span><span class="p">:</span> <span class="s2">"43671"</span><span class="p">,</span>
    <span class="nx">unique_id</span><span class="p">:</span> <span class="s2">"44177a21403427eb96664a6d7e5d5d48"</span><span class="p">,</span>
    <span class="nx">code</span><span class="p">:</span> <span class="s2">"110"</span><span class="p">,</span>
    <span class="nx">message</span><span class="p">:</span> <span class="s2">"Something went wrong, please contact support!"</span><span class="p">,</span>
    <span class="nx">timestamp</span><span class="p">:</span> <span class="s2">"2019-03-14T12:06:03Z"</span><span class="p">,</span>
    <span class="nx">descriptor</span><span class="p">:</span> <span class="s2">"Descriptor one"</span><span class="p">,</span>
    <span class="nx">amount</span><span class="p">:</span> <span class="s2">"100"</span><span class="p">,</span>
    <span class="nx">currency</span><span class="p">:</span> <span class="s2">"USD"</span><span class="p">,</span>
    <span class="nx">sent_to_acquirer</span><span class="p">:</span> <span class="s2">"false"</span><span class="p">,</span>
<span class="p">}</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;trustly_withdrawal&lt;/transaction_type&gt;
  &lt;status&gt;error&lt;/status&gt;
  &lt;mode&gt;live&lt;/mode&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;code&gt;110&lt;/code&gt;
  &lt;message&gt;Something went wrong, please contact support!&lt;/message&gt;
  &lt;timestamp&gt;2019-03-14T12:06:03Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
  &lt;sent_to_acquirer&gt;false&lt;/sent_to_acquirer&gt;
&lt;/payment_transaction&gt;
</code></pre>

<p><strong>Error Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>The transaction type</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>transaction_id</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>unique_id</td>
<td>string(32)</td>
<td>Unique id defined by gate (must later be used if capturing, voiding or refunding a transaction)</td>
</tr>
<tr>
<td>code</td>
<td>integer</td>
<td>Error code according to <a href="#error-code-table">Error code table</a></td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
<tr>
<td>message</td>
<td>string(255)</td>
<td>Human readable error message which can be displayed to users.</td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when the transaction was processed in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Combined date and time</a> e.g. 2007-08- 30T17:46:11Z</td>
</tr>
<tr>
<td>descriptor</td>
<td>string</td>
<td>Static descriptor MID info as configured on the gateway</td>
</tr>
<tr>
<td>amount</td>
<td>integer</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>sent_to_acquirer</td>
<td>string</td>
<td>&quot;true&quot; or &quot;false&quot;</td>
</tr>
</tbody></table>
<h3 id='tola-payout'>Tola Payout</h3>
<aside class="notice">
Tola Payout, or otherwise known as Disbursement, is an APM used to process Mobile network operator payments.
It is an async payment method and will be approved once Tola processes the payment with the Mobile network operator
</aside>

<blockquote>
<p>Request</p>
</blockquote>

<pre class="highlight php tab-php"><code>This request is not implemented yet
</code></pre>

<pre class="highlight java tab-java"><code><span class="n">This</span> <span class="n">request</span> <span class="n">is</span> <span class="n">not</span> <span class="n">implemented</span> <span class="n">yet</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>curl https://username:password@gate.emerchantpay.net/process/TERMINAL-TOKEN <span class="se">\</span>
   -H <span class="s2">"Content-Type: text/xml"</span> <span class="se">\</span>
   -d <span class="s1">'
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;tola_payout&lt;/transaction_type&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;usage&gt;40208 concert tickets&lt;/usage&gt;
  &lt;remote_ip&gt;245.253.2.12&lt;/remote_ip&gt;
  &lt;return_success_url&gt;http://www.example.com/success&lt;/return_success_url&gt;
  &lt;return_failure_url&gt;http://www.example.com/failure&lt;/return_failure_url&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;KES&lt;/currency&gt;
  &lt;customer_email&gt;barney.rubble@example.com&lt;/customer_email&gt;
  &lt;customer_phone&gt;254701123456&lt;/customer_phone&gt;
  &lt;operator&gt;SAFARICOM&lt;/operator&gt;
  &lt;target&gt;000010&lt;/target&gt;
  &lt;billing_address&gt;
    &lt;first_name&gt;Barney&lt;/first_name&gt;
    &lt;last_name&gt;Rubble&lt;/last_name&gt;
    &lt;address1&gt;14, Nerazdelni str&lt;/address1&gt;
    &lt;zip_code&gt;1407&lt;/zip_code&gt;
    &lt;city&gt;Nairobi&lt;/city&gt;
    &lt;country&gt;KE&lt;/country&gt;
  &lt;/billing_address&gt;
  &lt;risk_params&gt;
    &lt;user_id&gt;123456&lt;/user_id&gt;
  &lt;/risk_params&gt;
&lt;/payment_transaction&gt;'</span>
</code></pre>

<p><strong>Request Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>required</td>
<td>string(255)</td>
<td>The transaction type: <strong>tola_payout</strong></td>
</tr>
<tr>
<td>transaction_id</td>
<td>required</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>usage</td>
<td>required*</td>
<td>string(255)</td>
<td>Description of the transaction for later use</td>
</tr>
<tr>
<td>remote_ip</td>
<td>required*</td>
<td>IPv4 address</td>
<td>IPv4 address of customer</td>
</tr>
<tr>
<td>return_success_url</td>
<td>required</td>
<td>url</td>
<td>URL where customer is sent to after successful payment</td>
</tr>
<tr>
<td>return_failure_url</td>
<td>required</td>
<td>url</td>
<td>URL where customer is sent to after unsuccessful payment</td>
</tr>
<tr>
<td>amount</td>
<td>required</td>
<td>integer &gt; 0</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>required</td>
<td>string(3)</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>operator</td>
<td>required</td>
<td>string(20)</td>
<td>Name of the Mobile network operator (MNO) which should process the transaction</td>
</tr>
<tr>
<td>target</td>
<td>required</td>
<td>string(20)</td>
<td>Number of the Paybill for which the transaction is intended</td>
</tr>
<tr>
<td>customer_phone</td>
<td>required</td>
<td>string(32)</td>
<td>Must contain valid phone number of customer</td>
</tr>
<tr>
<td>customer_email</td>
<td>required*</td>
<td>e-mail address</td>
<td>Must contain valid e-mail of customer</td>
</tr>
<tr>
<td><strong>billing_address</strong></td>
<td>required</td>
<td></td>
<td>See <a href="#required-vs-optional-api-params">Required vs Optional API params</a> for details</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;first_name</td>
<td>required*</td>
<td>string(255)</td>
<td>Customer first name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;last_name</td>
<td>required*</td>
<td>string(255)</td>
<td>Customer last name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address1</td>
<td>required*</td>
<td>string(255)</td>
<td>Primary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address2</td>
<td>required*</td>
<td>string(255)</td>
<td>Secondary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;zip_code</td>
<td>required*</td>
<td>string</td>
<td>ZIP code</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;city</td>
<td>required*</td>
<td>string(255)</td>
<td>City</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;state</td>
<td>required*</td>
<td>string(2)</td>
<td>State code in <a href="https://en.wikipedia.org/wiki/ISO_3166-2">ISO 3166-2</a>, required for USA and Canada</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;country</td>
<td>required</td>
<td>string(2)</td>
<td>Country code in <a href="https://www.iso.org/iso-3166-country-codes.html">ISO 3166</a></td>
</tr>
<tr>
<td><strong>shipping_address</strong></td>
<td>optional</td>
<td></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;first_name</td>
<td>optional</td>
<td>string(255)</td>
<td>Customer first name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;last_name</td>
<td>optional</td>
<td>string(255)</td>
<td>Customer last name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address1</td>
<td>optional</td>
<td>string(255)</td>
<td>Primary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address2</td>
<td>optional</td>
<td>string(255)</td>
<td>Secondary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;zip_code</td>
<td>optional</td>
<td>string</td>
<td>ZIP code</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;city</td>
<td>optional</td>
<td>string(255)</td>
<td>City</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;state</td>
<td>optional</td>
<td>string(2)</td>
<td>State code in <a href="https://en.wikipedia.org/wiki/ISO_3166-2">ISO 3166-2</a>, required for USA and Canada</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;country</td>
<td>optional</td>
<td>string(2)</td>
<td>Country code in <a href="https://www.iso.org/iso-3166-country-codes.html">ISO 3166</a></td>
</tr>
</tbody></table>

<p><code>required* = conditionally required</code></p>

<p><strong>Supported countries, operators and currencies:</strong></p>

<table><thead>
<tr>
<th>Country code</th>
<th>Operator</th>
<th>Currency code</th>
</tr>
</thead><tbody>
<tr>
<td>GH</td>
<td>VODACOM, AIRTEL, MTN, TIGO</td>
<td>GHS</td>
</tr>
<tr>
<td>TZ</td>
<td>VODACOM, AIRTEL, TIGO</td>
<td>TZS</td>
</tr>
<tr>
<td>MZ</td>
<td>VODACOM, MOVITEL</td>
<td>MZN</td>
</tr>
<tr>
<td>RW</td>
<td>MTN, TIGO</td>
<td>RWF</td>
</tr>
<tr>
<td>KE</td>
<td>SAFARICOM, AIRTEL</td>
<td>KES</td>
</tr>
<tr>
<td>UG</td>
<td>AIRTEL, MTN</td>
<td>UGX</td>
</tr>
</tbody></table>

<blockquote>
<p>Successful Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>This request is not implemented yet
</code></pre>

<pre class="highlight java tab-java"><code><span class="n">This</span> <span class="n">request</span> <span class="n">is</span> <span class="n">not</span> <span class="n">implemented</span> <span class="n">yet</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;tola_payout&lt;/transaction_type&gt;
  &lt;status&gt;pending_async&lt;/status&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;technical_message&gt;Transaction successful!&lt;/technical_message&gt;
  &lt;message&gt;Transaction successful!&lt;/message&gt;
  &lt;timestamp&gt;2019-03-14T12:06:03Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;KES&lt;/currency&gt;
&lt;/payment_transaction&gt;
</code></pre>

<p><strong>Successful Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>The transaction type</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>transaction_id</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>unique_id</td>
<td>string(32)</td>
<td>Unique id defined by gate (must later be used if capturing, voiding or refunding a transaction)</td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
<tr>
<td>message</td>
<td>string(255)</td>
<td>Human readable error message which can be displayed to users.</td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when the transaction was processed in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Combined date and time</a> e.g. 2007-08- 30T17:46:11Z</td>
</tr>
<tr>
<td>descriptor</td>
<td>string</td>
<td>Static descriptor MID info as configured on the gateway</td>
</tr>
<tr>
<td>amount</td>
<td>integer</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
</tbody></table>

<blockquote>
<p>Error Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>This request is not implemented yet
</code></pre>

<pre class="highlight java tab-java"><code><span class="n">This</span> <span class="n">request</span> <span class="n">is</span> <span class="n">not</span> <span class="n">implemented</span> <span class="n">yet</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;tola_payout&lt;/transaction_type&gt;
  &lt;status&gt;error&lt;/status&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;message&gt;Something went wrong, please contact support!&lt;/message&gt;
  &lt;technical_message&gt;operator is not supported!&lt;/technical_message&gt;
  &lt;timestamp&gt;2019-03-14T12:06:03Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;KES&lt;/currency&gt;
&lt;/payment_transaction&gt;
</code></pre>

<p><strong>Error Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>The transaction type</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>transaction_id</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>unique_id</td>
<td>string(32)</td>
<td>Unique id defined by gate (must later be used if capturing, voiding or refunding a transaction)</td>
</tr>
<tr>
<td>message</td>
<td>string(255)</td>
<td>Human readable error message which can be displayed to users.</td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when the transaction was processed in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Combined date and time</a> e.g. 2007-08- 30T17:46:11Z</td>
</tr>
<tr>
<td>descriptor</td>
<td>string</td>
<td>Static descriptor MID info as configured on the gateway</td>
</tr>
<tr>
<td>amount</td>
<td>integer</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
</tbody></table>
<h2 id='mobile-payments'>Mobile Payments</h2><h3 id='tola-sale'>Tola Sale</h3>
<aside class="notice">
Tola Sale, otherwise known as Charge, is an APM used to process Mobile network operator payments.
It is an async payment method and will be approved once Tola processes the payment with the Mobile network operator
</aside>

<blockquote>
<p>Request</p>
</blockquote>

<pre class="highlight php tab-php"><code>This request is not implemented yet
</code></pre>

<pre class="highlight java tab-java"><code><span class="n">This</span> <span class="n">request</span> <span class="n">is</span> <span class="n">not</span> <span class="n">implemented</span> <span class="n">yet</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>curl https://username:password@gate.emerchantpay.net/process/TERMINAL-TOKEN <span class="se">\</span>
   -H <span class="s2">"Content-Type: text/xml"</span> <span class="se">\</span>
   -d <span class="s1">'
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;tola_sale&lt;/transaction_type&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;usage&gt;40208 concert tickets&lt;/usage&gt;
  &lt;remote_ip&gt;245.253.2.12&lt;/remote_ip&gt;
  &lt;return_success_url&gt;http://www.example.com/success&lt;/return_success_url&gt;
  &lt;return_failure_url&gt;http://www.example.com/failure&lt;/return_failure_url&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;KES&lt;/currency&gt;
  &lt;customer_email&gt;barney.rubble@example.com&lt;/customer_email&gt;
  &lt;customer_phone&gt;254701123456&lt;/customer_phone&gt;
  &lt;operator&gt;SAFARICOM&lt;/operator&gt;
  &lt;target&gt;000010&lt;/target&gt;
  &lt;billing_address&gt;
    &lt;first_name&gt;Barney&lt;/first_name&gt;
    &lt;last_name&gt;Rubble&lt;/last_name&gt;
    &lt;address1&gt;14, Nerazdelni str&lt;/address1&gt;
    &lt;zip_code&gt;1407&lt;/zip_code&gt;
    &lt;city&gt;Nairobi&lt;/city&gt;
    &lt;country&gt;KE&lt;/country&gt;
  &lt;/billing_address&gt;
  &lt;risk_params&gt;
    &lt;user_id&gt;123456&lt;/user_id&gt;
  &lt;/risk_params&gt;
&lt;/payment_transaction&gt;'</span>
</code></pre>

<p><strong>Request Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>required</td>
<td>string(255)</td>
<td>The transaction type: <strong>tola_sale</strong></td>
</tr>
<tr>
<td>transaction_id</td>
<td>required</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>usage</td>
<td>optional</td>
<td>string(255)</td>
<td>Description of the transaction for later use</td>
</tr>
<tr>
<td>remote_ip</td>
<td>required*</td>
<td>IPv4 address</td>
<td>IPv4 address of customer</td>
</tr>
<tr>
<td>return_success_url</td>
<td>required</td>
<td>url</td>
<td>URL where customer is sent to after successful payment</td>
</tr>
<tr>
<td>return_failure_url</td>
<td>required</td>
<td>url</td>
<td>URL where customer is sent to after unsuccessful payment</td>
</tr>
<tr>
<td>amount</td>
<td>required</td>
<td>integer &gt; 0</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>required</td>
<td>string(3)</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>operator</td>
<td>required</td>
<td>string(20)</td>
<td>Name of the Mobile network operator (MNO) which should process the transaction</td>
</tr>
<tr>
<td>target</td>
<td>required</td>
<td>string(20)</td>
<td>Number of the Paybill for which the transaction is intended</td>
</tr>
<tr>
<td>customer_email</td>
<td>required*</td>
<td>e-mail address</td>
<td>Must contain valid e-mail of customer</td>
</tr>
<tr>
<td>customer_phone</td>
<td>required</td>
<td>string(32)</td>
<td>Must contain valid phone number of customer</td>
</tr>
<tr>
<td><strong>billing_address</strong></td>
<td>required</td>
<td></td>
<td>See <a href="#required-vs-optional-api-params">Required vs Optional API params</a> for details</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;first_name</td>
<td>required*</td>
<td>string(255)</td>
<td>Customer first name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;last_name</td>
<td>required*</td>
<td>string(255)</td>
<td>Customer last name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address1</td>
<td>required*</td>
<td>string(255)</td>
<td>Primary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address2</td>
<td>required*</td>
<td>string(255)</td>
<td>Secondary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;zip_code</td>
<td>required*</td>
<td>string</td>
<td>ZIP code</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;city</td>
<td>required*</td>
<td>string(255)</td>
<td>City</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;state</td>
<td>required*</td>
<td>string(2)</td>
<td>State code in <a href="https://en.wikipedia.org/wiki/ISO_3166-2">ISO 3166-2</a>, required for USA and Canada</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;country</td>
<td>required</td>
<td>string(2)</td>
<td>Country code in <a href="https://www.iso.org/iso-3166-country-codes.html">ISO 3166</a></td>
</tr>
<tr>
<td><strong>shipping_address</strong></td>
<td>optional</td>
<td></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;first_name</td>
<td>optional</td>
<td>string(255)</td>
<td>Customer first name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;last_name</td>
<td>optional</td>
<td>string(255)</td>
<td>Customer last name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address1</td>
<td>optional</td>
<td>string(255)</td>
<td>Primary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address2</td>
<td>optional</td>
<td>string(255)</td>
<td>Secondary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;zip_code</td>
<td>optional</td>
<td>string</td>
<td>ZIP code</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;city</td>
<td>optional</td>
<td>string(255)</td>
<td>City</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;state</td>
<td>optional</td>
<td>string(2)</td>
<td>State code in <a href="https://en.wikipedia.org/wiki/ISO_3166-2">ISO 3166-2</a>, required for USA and Canada</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;country</td>
<td>optional</td>
<td>string(2)</td>
<td>Country code in <a href="https://www.iso.org/iso-3166-country-codes.html">ISO 3166</a></td>
</tr>
</tbody></table>

<p><code>required* = conditionally required</code></p>

<p><strong>Supported countries, operators and currencies:</strong></p>

<table><thead>
<tr>
<th>Country code</th>
<th>Operator</th>
<th>Currency code</th>
</tr>
</thead><tbody>
<tr>
<td>GH</td>
<td>VODACOM</td>
<td>GHS</td>
</tr>
<tr>
<td>KE</td>
<td>SAFARICOM</td>
<td>KES</td>
</tr>
<tr>
<td>UG</td>
<td>AIRTEL, MTN</td>
<td>UGX</td>
</tr>
</tbody></table>

<blockquote>
<p>Successful Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>This request is not implemented yet
</code></pre>

<pre class="highlight java tab-java"><code><span class="n">This</span> <span class="n">request</span> <span class="n">is</span> <span class="n">not</span> <span class="n">implemented</span> <span class="n">yet</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;tola_sale&lt;/transaction_type&gt;
  &lt;status&gt;pending_async&lt;/status&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;technical_message&gt;Transaction successful!&lt;/technical_message&gt;
  &lt;message&gt;Transaction successful!&lt;/message&gt;
  &lt;timestamp&gt;2019-03-14T12:06:03Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;KES&lt;/currency&gt;
&lt;/payment_transaction&gt;
</code></pre>

<p><strong>Successful Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>The transaction type</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>transaction_id</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>unique_id</td>
<td>string(32)</td>
<td>Unique id defined by gate (must later be used if capturing, voiding or refunding a transaction)</td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
<tr>
<td>message</td>
<td>string(255)</td>
<td>Human readable error message which can be displayed to users.</td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when the transaction was processed in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Combined date and time</a> e.g. 2007-08- 30T17:46:11Z</td>
</tr>
<tr>
<td>descriptor</td>
<td>string</td>
<td>Static descriptor MID info as configured on the gateway</td>
</tr>
<tr>
<td>amount</td>
<td>integer</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
</tbody></table>

<blockquote>
<p>Error Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>This request is not implemented yet
</code></pre>

<pre class="highlight java tab-java"><code><span class="n">This</span> <span class="n">request</span> <span class="n">is</span> <span class="n">not</span> <span class="n">implemented</span> <span class="n">yet</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;tola_sale&lt;/transaction_type&gt;
  &lt;status&gt;error&lt;/status&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;message&gt;Something went wrong, please contact support!&lt;/message&gt;
  &lt;technical_message&gt;operator is not supported&lt;/technical_message&gt;
  &lt;timestamp&gt;2019-03-14T12:06:03Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;KES&lt;/currency&gt;
&lt;/payment_transaction&gt;
</code></pre>

<p><strong>Error Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>The transaction type</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>transaction_id</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>unique_id</td>
<td>string(32)</td>
<td>Unique id defined by gate (must later be used if capturing, voiding or refunding a transaction)</td>
</tr>
<tr>
<td>message</td>
<td>string(255)</td>
<td>Human readable error message which can be displayed to users.</td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when the transaction was processed in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Combined date and time</a> e.g. 2007-08- 30T17:46:11Z</td>
</tr>
<tr>
<td>descriptor</td>
<td>string</td>
<td>Static descriptor MID info as configured on the gateway</td>
</tr>
<tr>
<td>amount</td>
<td>integer</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
</tbody></table>
<h2 id='reversals'>Reversals</h2>
<p>Reversal transactions serve to change the state of the original transaction and return money back to customer’s account. They can be used with Card, 3DS Card, and different APM transactions.</p>
<h3 id='refund'>Refund</h3>
<p>Refunds allow to return already billed amounts to customers.</p>

<p>The amount can be fully or partially refunded. Refunds can only be done on former <a href="#capture">capture(settled)</a> or <a href="#sale">sale</a> transactions.</p>

<p>Therefore, the reference id for the corresponding transaction is mandatory.</p>

<blockquote>
<p>Request</p>
</blockquote>

<pre class="highlight php tab-php"><code><span class="cp">&lt;?php</span>

<span class="c1">// Load the pre-configured ini file...
</span><span class="nx">\Genesis\Config</span><span class="o">::</span><span class="na">loadSettings</span><span class="p">(</span><span class="s1">'/path/to/config.ini'</span><span class="p">);</span>

<span class="nv">$genesis</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Genesis</span><span class="p">(</span><span class="s1">'Financial\Refund'</span><span class="p">);</span>
<span class="nv">$request</span> <span class="o">=</span> <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">request</span><span class="p">();</span>

<span class="nv">$request</span>
  <span class="o">-&gt;</span><span class="na">setTransactionId</span><span class="p">(</span><span class="s1">'43671'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setUsage</span><span class="p">(</span><span class="s1">'40208 concert tickets'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setRemoteIp</span><span class="p">(</span><span class="s1">'245.253.2.12'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setReferenceId</span><span class="p">(</span><span class="s1">'43672'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setAmount</span><span class="p">(</span><span class="s1">'100'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCurrency</span><span class="p">(</span><span class="s1">'USD'</span><span class="p">);</span>

<span class="k">try</span> <span class="p">{</span>
    <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">execute</span><span class="p">();</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">response</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">getResponseObject</span><span class="p">();</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">\Exception</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$e</span><span class="o">-&gt;</span><span class="na">getMessage</span><span class="p">();</span>
<span class="p">}</span>
</code></pre>

<pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.GenesisClient</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.TransactionResult</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.constants.Endpoints</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.constants.Environments</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.requests.financial.RefundRequest</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.model.Transaction</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Configuration</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Country</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Currency</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.math.BigDecimal</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">GenesisExample</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">()</span>  <span class="o">{</span>

    <span class="c1">// Create configuration</span>
    <span class="n">Configuration</span> <span class="n">configuration</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Configuration</span><span class="o">(</span><span class="n">Environments</span><span class="o">.</span><span class="na">STAGING</span><span class="o">,</span> <span class="n">Endpoints</span><span class="o">.</span><span class="na">EMERCHANTPAY</span><span class="o">);</span>

    <span class="n">configuration</span><span class="o">.</span><span class="na">setUsername</span><span class="o">(</span><span class="s">"SET_YOUR_USERNAME"</span><span class="o">);</span>
    <span class="n">configuration</span><span class="o">.</span><span class="na">setPassword</span><span class="o">(</span><span class="s">"SET_YOUR_PASSWORD"</span><span class="o">);</span>
    <span class="n">configuration</span><span class="o">.</span><span class="na">setToken</span><span class="o">(</span><span class="s">"SET_YOUR_TOKEN"</span><span class="o">);</span>

    <span class="n">RefundRequest</span> <span class="n">request</span> <span class="o">=</span> <span class="k">new</span> <span class="n">RefundRequest</span><span class="o">();</span>

    <span class="n">request</span><span class="o">.</span><span class="na">setTransactionId</span><span class="o">(</span><span class="s">"43671"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setUsage</span><span class="o">(</span><span class="s">"40208 concert tickets"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setRemoteIp</span><span class="o">(</span><span class="s">"245.253.2.12"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setReferenceId</span><span class="o">(</span><span class="s">"43672"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setAmount</span><span class="o">(</span><span class="k">new</span> <span class="n">BigDecimal</span><span class="o">(</span><span class="mi">100</span><span class="o">));</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCurrency</span><span class="o">(</span><span class="s">"USD"</span><span class="o">);</span>

    <span class="n">GenesisClient</span> <span class="n">client</span> <span class="o">=</span> <span class="k">new</span> <span class="n">GenesisClient</span><span class="o">(</span><span class="n">configuration</span><span class="o">,</span> <span class="n">request</span><span class="o">);</span>
    <span class="n">client</span><span class="o">.</span><span class="na">execute</span><span class="o">();</span>

    <span class="c1">// Parse Payment result</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">client</span><span class="o">.</span><span class="na">getResponse</span><span class="o">());</span>

  <span class="o">}</span>
<span class="o">}</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="kd">var</span> <span class="nx">genesis</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'genesis.js/lib/genesis.js'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">transaction</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">genesis</span><span class="p">.</span><span class="nx">transaction</span><span class="p">();</span>

<span class="kd">var</span> <span class="nx">failure</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">reason</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">reason</span><span class="p">);</span>
<span class="p">};</span>

<span class="kd">var</span> <span class="nx">success</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>

<span class="nx">transaction</span><span class="p">.</span><span class="nx">refund</span><span class="p">(</span>
  <span class="p">{</span>
    <span class="s2">"transaction_id"</span><span class="p">:</span> <span class="s2">"43671"</span><span class="p">,</span>
    <span class="s2">"usage"</span><span class="p">:</span> <span class="s2">"40208 concert tickets"</span><span class="p">,</span>
    <span class="s2">"remote_ip"</span><span class="p">:</span> <span class="s2">"245.253.2.12"</span><span class="p">,</span>
    <span class="s2">"reference_id"</span><span class="p">:</span> <span class="s2">"43672"</span><span class="p">,</span>
    <span class="s2">"amount"</span><span class="p">:</span> <span class="s2">"100"</span><span class="p">,</span>
    <span class="s2">"currency"</span><span class="p">:</span> <span class="s2">"USD"</span>
  <span class="p">}</span>
<span class="p">).</span><span class="nx">send</span><span class="p">()</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">success</span><span class="p">)</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">failure</span><span class="p">);</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>curl https://username:password@gate.emerchantpay.net/process/TERMINAL-TOKEN <span class="se">\</span>
   -H <span class="s2">"Content-Type: text/xml"</span> <span class="se">\</span>
   -d <span class="s1">'
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;refund&lt;/transaction_type&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;usage&gt;40208 concert tickets&lt;/usage&gt;
  &lt;remote_ip&gt;245.253.2.12&lt;/remote_ip&gt;
  &lt;reference_id&gt;43672&lt;/reference_id&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
&lt;/payment_transaction&gt;'</span>
</code></pre>

<p><strong>Request Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>required</td>
<td>string(255)</td>
<td>The transaction type: <strong>refund</strong></td>
</tr>
<tr>
<td>transaction_id</td>
<td>required</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>usage</td>
<td>optional</td>
<td>string(255)</td>
<td>Description of the transaction for later use</td>
</tr>
<tr>
<td>remote_ip</td>
<td>required*</td>
<td>IPv4 address</td>
<td>IPv4 address of customer</td>
</tr>
<tr>
<td>reference_id</td>
<td>required</td>
<td>string(32)</td>
<td>Unique id returned by corresponding transaction</td>
</tr>
<tr>
<td>amount</td>
<td>required</td>
<td>integer &gt; 0</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>required</td>
<td>string(3)</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
</tbody></table>

<p><code>required* = conditionally required</code></p>

<blockquote>
<p>Successful Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>stdClass Object
(
    [transaction_type] =&gt; refund
    [status] =&gt; approved
    [mode] =&gt; live
    [transaction_id] =&gt; 43671
    [unique_id] =&gt; 44177a21403427eb96664a6d7e5d5d48
    [authorization_code] =&gt; 345678
    [response_code] =&gt; 00
    [timestamp] =&gt; DateTime Object
        (
            [date] =&gt; 2019-03-14 12:06:03.000000
            [timezone_type] =&gt; 2
            [timezone] =&gt; Z
        )
    [descriptor] =&gt; Descriptor one
    [amount] =&gt; 100
    [currency] =&gt; USD
)
</code></pre>

<pre class="highlight java tab-java"><code><span class="o">&lt;</span><span class="n">payment_response</span> <span class="n">content</span><span class="o">=[</span>
    <span class="o">&lt;</span><span class="n">transaction_type</span> <span class="n">content</span><span class="o">=[</span><span class="n">refund</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">status</span> <span class="n">content</span><span class="o">=[</span><span class="n">approved</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">mode</span> <span class="n">content</span><span class="o">=[</span><span class="n">live</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">transaction_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">43671</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">unique_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">44177</span><span class="n">a21403427eb96664a6d7e5d5d48</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">authorization_code</span> <span class="n">content</span><span class="o">=[</span><span class="mi">345678</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">response_code</span> <span class="n">content</span><span class="o">=[</span><span class="mo">00</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">timestamp</span> <span class="n">content</span><span class="o">=[</span><span class="mi">2019</span><span class="o">-</span><span class="mo">03</span><span class="o">-</span><span class="mi">14</span><span class="nl">T12:</span><span class="mo">06</span><span class="o">:</span><span class="mo">03</span><span class="n">Z</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">descriptor</span> <span class="n">content</span><span class="o">=[</span><span class="n">Descriptor</span> <span class="n">one</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">amount</span> <span class="n">content</span><span class="o">=[</span><span class="mi">100</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">currency</span> <span class="n">content</span><span class="o">=[</span><span class="n">USD</span><span class="o">]&gt;</span>
<span class="o">]&gt;</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="p">{</span>
    <span class="nl">transaction_type</span><span class="p">:</span> <span class="s2">"refund"</span><span class="p">,</span>
    <span class="nx">status</span><span class="p">:</span> <span class="s2">"approved"</span><span class="p">,</span>
    <span class="nx">mode</span><span class="p">:</span> <span class="s2">"live"</span><span class="p">,</span>
    <span class="nx">transaction_id</span><span class="p">:</span> <span class="s2">"43671"</span><span class="p">,</span>
    <span class="nx">unique_id</span><span class="p">:</span> <span class="s2">"44177a21403427eb96664a6d7e5d5d48"</span><span class="p">,</span>
    <span class="nx">authorization_code</span><span class="p">:</span> <span class="s2">"345678"</span><span class="p">,</span>
    <span class="nx">response_code</span><span class="p">:</span> <span class="s2">"00"</span><span class="p">,</span>
    <span class="nx">timestamp</span><span class="p">:</span> <span class="s2">"2019-03-14T12:06:03Z"</span><span class="p">,</span>
    <span class="nx">descriptor</span><span class="p">:</span> <span class="s2">"Descriptor one"</span><span class="p">,</span>
    <span class="nx">amount</span><span class="p">:</span> <span class="s2">"100"</span><span class="p">,</span>
    <span class="nx">currency</span><span class="p">:</span> <span class="s2">"USD"</span><span class="p">,</span>
<span class="p">}</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;refund&lt;/transaction_type&gt;
  &lt;status&gt;approved&lt;/status&gt;
  &lt;mode&gt;live&lt;/mode&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;authorization_code&gt;345678&lt;/authorization_code&gt;
  &lt;response_code&gt;00&lt;/response_code&gt;
  &lt;timestamp&gt;2019-03-14T12:06:03Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
&lt;/payment_transaction&gt;
</code></pre>

<p><strong>Successful Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>The transaction type</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>transaction_id</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>unique_id</td>
<td>string(32)</td>
<td>Unique id defined by gate (must later be used if capturing, voiding or refunding a transaction)</td>
</tr>
<tr>
<td>authorization_code</td>
<td>string(6)</td>
<td>Generated by the card network when an authorisation has occurred, used to identify that auth. Consists of 6 alphanumeric chars</td>
</tr>
<tr>
<td>response_code</td>
<td>string(2)</td>
<td>Defines the issuer result of a transaction, the status of a message or some action taken or required. See <a href="#issuer-response-codes">issuer response codes</a> for details</td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when the transaction was processed in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Combined date and time</a> e.g. 2007-08- 30T17:46:11Z</td>
</tr>
<tr>
<td>descriptor</td>
<td>string</td>
<td>Static descriptor MID info as configured on the gateway</td>
</tr>
<tr>
<td>amount</td>
<td>integer</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
</tbody></table>

<blockquote>
<p>Error Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>stdClass Object
(
    [transaction_type] =&gt; refund
    [status] =&gt; error
    [mode] =&gt; live
    [transaction_id] =&gt; 43671
    [unique_id] =&gt; 44177a21403427eb96664a6d7e5d5d48
    [code] =&gt; 410
    [technical_message] =&gt; no approved reference transaction found
    [message] =&gt; no approved reference transaction found
    [timestamp] =&gt; DateTime Object
        (
            [date] =&gt; 2019-03-14 12:06:03.000000
            [timezone_type] =&gt; 2
            [timezone] =&gt; Z
        )
    [descriptor] =&gt; Descriptor one
    [amount] =&gt; 100
    [currency] =&gt; USD
)
</code></pre>

<pre class="highlight java tab-java"><code><span class="o">&lt;</span><span class="n">payment_response</span> <span class="n">content</span><span class="o">=[</span>
    <span class="o">&lt;</span><span class="n">transaction_type</span> <span class="n">content</span><span class="o">=[</span><span class="n">refund</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">status</span> <span class="n">content</span><span class="o">=[</span><span class="n">error</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">mode</span> <span class="n">content</span><span class="o">=[</span><span class="n">live</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">transaction_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">43671</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">unique_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">44177</span><span class="n">a21403427eb96664a6d7e5d5d48</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">code</span> <span class="n">content</span><span class="o">=[</span><span class="mi">410</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">technical_message</span> <span class="n">content</span><span class="o">=[</span><span class="n">no</span> <span class="n">approved</span> <span class="n">reference</span> <span class="n">transaction</span> <span class="n">found</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">message</span> <span class="n">content</span><span class="o">=[</span><span class="n">no</span> <span class="n">approved</span> <span class="n">reference</span> <span class="n">transaction</span> <span class="n">found</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">timestamp</span> <span class="n">content</span><span class="o">=[</span><span class="mi">2019</span><span class="o">-</span><span class="mo">03</span><span class="o">-</span><span class="mi">14</span><span class="nl">T12:</span><span class="mo">06</span><span class="o">:</span><span class="mo">03</span><span class="n">Z</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">descriptor</span> <span class="n">content</span><span class="o">=[</span><span class="n">Descriptor</span> <span class="n">one</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">amount</span> <span class="n">content</span><span class="o">=[</span><span class="mi">100</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">currency</span> <span class="n">content</span><span class="o">=[</span><span class="n">USD</span><span class="o">]&gt;</span>
<span class="o">]&gt;</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="p">{</span>
    <span class="nl">transaction_type</span><span class="p">:</span> <span class="s2">"refund"</span><span class="p">,</span>
    <span class="nx">status</span><span class="p">:</span> <span class="s2">"error"</span><span class="p">,</span>
    <span class="nx">mode</span><span class="p">:</span> <span class="s2">"live"</span><span class="p">,</span>
    <span class="nx">transaction_id</span><span class="p">:</span> <span class="s2">"43671"</span><span class="p">,</span>
    <span class="nx">unique_id</span><span class="p">:</span> <span class="s2">"44177a21403427eb96664a6d7e5d5d48"</span><span class="p">,</span>
    <span class="nx">code</span><span class="p">:</span> <span class="s2">"410"</span><span class="p">,</span>
    <span class="nx">technical_message</span><span class="p">:</span> <span class="s2">"no approved reference transaction found"</span><span class="p">,</span>
    <span class="nx">message</span><span class="p">:</span> <span class="s2">"no approved reference transaction found"</span><span class="p">,</span>
    <span class="nx">timestamp</span><span class="p">:</span> <span class="s2">"2019-03-14T12:06:03Z"</span><span class="p">,</span>
    <span class="nx">descriptor</span><span class="p">:</span> <span class="s2">"Descriptor one"</span><span class="p">,</span>
    <span class="nx">amount</span><span class="p">:</span> <span class="s2">"100"</span><span class="p">,</span>
    <span class="nx">currency</span><span class="p">:</span> <span class="s2">"USD"</span><span class="p">,</span>
<span class="p">}</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;refund&lt;/transaction_type&gt;
  &lt;status&gt;error&lt;/status&gt;
  &lt;mode&gt;live&lt;/mode&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;code&gt;410&lt;/code&gt;
  &lt;technical_message&gt;no approved reference transaction found&lt;/technical_message&gt;
  &lt;message&gt;no approved reference transaction found&lt;/message&gt;
  &lt;timestamp&gt;2019-03-14T12:06:03Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
&lt;/payment_transaction&gt;
</code></pre>

<p><strong>Error Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>The transaction type</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>transaction_id</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>unique_id</td>
<td>string(32)</td>
<td>Unique id defined by gate (must later be used if capturing, voiding or refunding a transaction)</td>
</tr>
<tr>
<td>response_code</td>
<td>string(2)</td>
<td>Defines the issuer result of a transaction, the status of a message or some action taken or required. See <a href="#issuer-response-codes">issuer response codes</a> for details</td>
</tr>
<tr>
<td>code</td>
<td>integer</td>
<td>Error code according to <a href="#error-code-table">Error code table</a></td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when the transaction was processed in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Combined date and time</a> e.g. 2007-08- 30T17:46:11Z</td>
</tr>
<tr>
<td>descriptor</td>
<td>string</td>
<td>Static descriptor MID info as configured on the gateway</td>
</tr>
<tr>
<td>amount</td>
<td>integer</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
</tbody></table>
<h3 id='void'>Void</h3>
<p>Void transactions undo other transactions.</p>

<p>Transactions of types authorize, capture, sale, refund, recurring sale, and init recurring sale along with their 3D variants can be reversed on the same day the transaction took place. The transaction will not show up on the customer’s credit card statement if voided on the same day.</p>

<aside class="notice" >
The same day is dependent of the timezone of the acquiring bank.
</aside>

<blockquote>
<p>Request</p>
</blockquote>

<pre class="highlight php tab-php"><code><span class="cp">&lt;?php</span>

<span class="c1">// Load the pre-configured ini file...
</span><span class="nx">\Genesis\Config</span><span class="o">::</span><span class="na">loadSettings</span><span class="p">(</span><span class="s1">'/path/to/config.ini'</span><span class="p">);</span>

<span class="nv">$genesis</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Genesis</span><span class="p">(</span><span class="s1">'Financial\Cancel'</span><span class="p">);</span>
<span class="nv">$request</span> <span class="o">=</span> <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">request</span><span class="p">();</span>

<span class="nv">$request</span>
  <span class="o">-&gt;</span><span class="na">setTransactionId</span><span class="p">(</span><span class="s1">'43671'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setUsage</span><span class="p">(</span><span class="s1">'40208 concert tickets'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setRemoteIp</span><span class="p">(</span><span class="s1">'245.253.2.12'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setReferenceId</span><span class="p">(</span><span class="s1">'43672'</span><span class="p">);</span>

<span class="k">try</span> <span class="p">{</span>
    <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">execute</span><span class="p">();</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">response</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">getResponseObject</span><span class="p">();</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">\Exception</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$e</span><span class="o">-&gt;</span><span class="na">getMessage</span><span class="p">();</span>
<span class="p">}</span>
</code></pre>

<pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.GenesisClient</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.TransactionResult</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.constants.Endpoints</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.constants.Environments</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.requests.financial.VoidRequest</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.model.Transaction</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Configuration</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Country</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Currency</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">GenesisExample</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">()</span>  <span class="o">{</span>

    <span class="c1">// Create configuration</span>
    <span class="n">Configuration</span> <span class="n">configuration</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Configuration</span><span class="o">(</span><span class="n">Environments</span><span class="o">.</span><span class="na">STAGING</span><span class="o">,</span> <span class="n">Endpoints</span><span class="o">.</span><span class="na">EMERCHANTPAY</span><span class="o">);</span>

    <span class="n">configuration</span><span class="o">.</span><span class="na">setUsername</span><span class="o">(</span><span class="s">"SET_YOUR_USERNAME"</span><span class="o">);</span>
    <span class="n">configuration</span><span class="o">.</span><span class="na">setPassword</span><span class="o">(</span><span class="s">"SET_YOUR_PASSWORD"</span><span class="o">);</span>
    <span class="n">configuration</span><span class="o">.</span><span class="na">setToken</span><span class="o">(</span><span class="s">"SET_YOUR_TOKEN"</span><span class="o">);</span>

    <span class="n">VoidRequest</span> <span class="n">request</span> <span class="o">=</span> <span class="k">new</span> <span class="n">VoidRequest</span><span class="o">();</span>

    <span class="n">request</span><span class="o">.</span><span class="na">setTransactionId</span><span class="o">(</span><span class="s">"43671"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setUsage</span><span class="o">(</span><span class="s">"40208 concert tickets"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setRemoteIp</span><span class="o">(</span><span class="s">"245.253.2.12"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setReferenceId</span><span class="o">(</span><span class="s">"43672"</span><span class="o">);</span>

    <span class="n">GenesisClient</span> <span class="n">client</span> <span class="o">=</span> <span class="k">new</span> <span class="n">GenesisClient</span><span class="o">(</span><span class="n">configuration</span><span class="o">,</span> <span class="n">request</span><span class="o">);</span>
    <span class="n">client</span><span class="o">.</span><span class="na">execute</span><span class="o">();</span>

    <span class="c1">// Parse Payment result</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">client</span><span class="o">.</span><span class="na">getResponse</span><span class="o">());</span>

  <span class="o">}</span>
<span class="o">}</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="kd">var</span> <span class="nx">genesis</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'genesis.js/lib/genesis.js'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">transaction</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">genesis</span><span class="p">.</span><span class="nx">transaction</span><span class="p">();</span>

<span class="kd">var</span> <span class="nx">failure</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">reason</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">reason</span><span class="p">);</span>
<span class="p">};</span>

<span class="kd">var</span> <span class="nx">success</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>

<span class="nx">transaction</span><span class="p">.</span><span class="nx">cancel</span><span class="p">(</span>
  <span class="p">{</span>
    <span class="s2">"transaction_id"</span><span class="p">:</span> <span class="s2">"43671"</span><span class="p">,</span>
    <span class="s2">"usage"</span><span class="p">:</span> <span class="s2">"40208 concert tickets"</span><span class="p">,</span>
    <span class="s2">"remote_ip"</span><span class="p">:</span> <span class="s2">"245.253.2.12"</span><span class="p">,</span>
    <span class="s2">"reference_id"</span><span class="p">:</span> <span class="s2">"43672"</span>
  <span class="p">}</span>
<span class="p">).</span><span class="nx">send</span><span class="p">()</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">success</span><span class="p">)</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">failure</span><span class="p">);</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>curl https://username:password@gate.emerchantpay.net/process/TERMINAL-TOKEN <span class="se">\</span>
   -H <span class="s2">"Content-Type: text/xml"</span> <span class="se">\</span>
   -d <span class="s1">'
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;void&lt;/transaction_type&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;usage&gt;40208 concert tickets&lt;/usage&gt;
  &lt;remote_ip&gt;245.253.2.12&lt;/remote_ip&gt;
  &lt;reference_id&gt;43672&lt;/reference_id&gt;
&lt;/payment_transaction&gt;'</span>
</code></pre>

<p><strong>Request Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>required</td>
<td>string(255)</td>
<td>The transaction type: <strong>void</strong></td>
</tr>
<tr>
<td>transaction_id</td>
<td>required</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>usage</td>
<td>optional</td>
<td>string(255)</td>
<td>Description of the transaction for later use</td>
</tr>
<tr>
<td>remote_ip</td>
<td>required*</td>
<td>IPv4 address</td>
<td>IPv4 address of customer</td>
</tr>
<tr>
<td>reference_id</td>
<td>required</td>
<td>string(32)</td>
<td>Unique id returned by corresponding transaction</td>
</tr>
</tbody></table>

<p><code>required* = conditionally required</code></p>

<blockquote>
<p>Successful Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>stdClass Object
(
    [transaction_type] =&gt; void
    [status] =&gt; approved
    [mode] =&gt; live
    [transaction_id] =&gt; 43671
    [unique_id] =&gt; 44177a21403427eb96664a6d7e5d5d48
    [authorization_code] =&gt; 345678
    [response_code] =&gt; 00
    [timestamp] =&gt; DateTime Object
        (
            [date] =&gt; 2019-03-14 12:06:03.000000
            [timezone_type] =&gt; 2
            [timezone] =&gt; Z
        )
    [descriptor] =&gt; Descriptor one
    [amount] =&gt; 100
    [currency] =&gt; USD
    [sent_to_acquirer] =&gt; true
)
</code></pre>

<pre class="highlight java tab-java"><code><span class="o">&lt;</span><span class="n">payment_response</span> <span class="n">content</span><span class="o">=[</span>
    <span class="o">&lt;</span><span class="n">transaction_type</span> <span class="n">content</span><span class="o">=[</span><span class="kt">void</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">status</span> <span class="n">content</span><span class="o">=[</span><span class="n">approved</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">mode</span> <span class="n">content</span><span class="o">=[</span><span class="n">live</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">transaction_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">43671</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">unique_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">44177</span><span class="n">a21403427eb96664a6d7e5d5d48</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">authorization_code</span> <span class="n">content</span><span class="o">=[</span><span class="mi">345678</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">response_code</span> <span class="n">content</span><span class="o">=[</span><span class="mo">00</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">timestamp</span> <span class="n">content</span><span class="o">=[</span><span class="mi">2019</span><span class="o">-</span><span class="mo">03</span><span class="o">-</span><span class="mi">14</span><span class="nl">T12:</span><span class="mo">06</span><span class="o">:</span><span class="mo">03</span><span class="n">Z</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">descriptor</span> <span class="n">content</span><span class="o">=[</span><span class="n">Descriptor</span> <span class="n">one</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">amount</span> <span class="n">content</span><span class="o">=[</span><span class="mi">100</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">currency</span> <span class="n">content</span><span class="o">=[</span><span class="n">USD</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">sent_to_acquirer</span> <span class="n">content</span><span class="o">=[</span><span class="kc">true</span><span class="o">]&gt;</span>
<span class="o">]&gt;</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="p">{</span>
    <span class="nl">transaction_type</span><span class="p">:</span> <span class="s2">"void"</span><span class="p">,</span>
    <span class="nx">status</span><span class="p">:</span> <span class="s2">"approved"</span><span class="p">,</span>
    <span class="nx">mode</span><span class="p">:</span> <span class="s2">"live"</span><span class="p">,</span>
    <span class="nx">transaction_id</span><span class="p">:</span> <span class="s2">"43671"</span><span class="p">,</span>
    <span class="nx">unique_id</span><span class="p">:</span> <span class="s2">"44177a21403427eb96664a6d7e5d5d48"</span><span class="p">,</span>
    <span class="nx">authorization_code</span><span class="p">:</span> <span class="s2">"345678"</span><span class="p">,</span>
    <span class="nx">response_code</span><span class="p">:</span> <span class="s2">"00"</span><span class="p">,</span>
    <span class="nx">timestamp</span><span class="p">:</span> <span class="s2">"2019-03-14T12:06:03Z"</span><span class="p">,</span>
    <span class="nx">descriptor</span><span class="p">:</span> <span class="s2">"Descriptor one"</span><span class="p">,</span>
    <span class="nx">amount</span><span class="p">:</span> <span class="s2">"100"</span><span class="p">,</span>
    <span class="nx">currency</span><span class="p">:</span> <span class="s2">"USD"</span><span class="p">,</span>
    <span class="nx">sent_to_acquirer</span><span class="p">:</span> <span class="s2">"true"</span><span class="p">,</span>
<span class="p">}</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;void&lt;/transaction_type&gt;
  &lt;status&gt;approved&lt;/status&gt;
  &lt;mode&gt;live&lt;/mode&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;authorization_code&gt;345678&lt;/authorization_code&gt;
  &lt;response_code&gt;00&lt;/response_code&gt;
  &lt;timestamp&gt;2019-03-14T12:06:03Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
  &lt;sent_to_acquirer&gt;true&lt;/sent_to_acquirer&gt;
&lt;/payment_transaction&gt;
</code></pre>

<p><strong>Successful Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>The transaction type</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>transaction_id</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>unique_id</td>
<td>string(32)</td>
<td>Unique id defined by gate (must later be used if capturing, voiding or refunding a transaction)</td>
</tr>
<tr>
<td>authorization_code</td>
<td>string(6)</td>
<td>Generated by the card network when an authorisation has occurred, used to identify that auth. Consists of 6 alphanumeric chars</td>
</tr>
<tr>
<td>response_code</td>
<td>string(2)</td>
<td>Defines the issuer result of a transaction, the status of a message or some action taken or required. See <a href="#issuer-response-codes">issuer response codes</a> for details</td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
<tr>
<td>message</td>
<td>string(255)</td>
<td>Human readable error message which can be displayed to users.</td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when the transaction was processed in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Combined date and time</a> e.g. 2007-08- 30T17:46:11Z</td>
</tr>
<tr>
<td>descriptor</td>
<td>string</td>
<td>Static descriptor MID info as configured on the gateway</td>
</tr>
<tr>
<td>amount</td>
<td>integer</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>sent_to_acquirer</td>
<td>string</td>
<td>&quot;true&quot; or &quot;false&quot;</td>
</tr>
</tbody></table>

<blockquote>
<p>Error Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>stdClass Object
(
    [transaction_type] =&gt; void
    [status] =&gt; error
    [mode] =&gt; live
    [transaction_id] =&gt; 43671
    [unique_id] =&gt; 44177a21403427eb96664a6d7e5d5d48
    [code] =&gt; 420
    [technical_message] =&gt; can not do void on void reference
    [message] =&gt; can not do void on void reference
    [timestamp] =&gt; DateTime Object
        (
            [date] =&gt; 2019-03-14 12:06:03.000000
            [timezone_type] =&gt; 2
            [timezone] =&gt; Z
        )
    [descriptor] =&gt; Descriptor one
    [amount] =&gt; 100
    [currency] =&gt; USD
    [sent_to_acquirer] =&gt; false
)
</code></pre>

<pre class="highlight java tab-java"><code><span class="o">&lt;</span><span class="n">payment_response</span> <span class="n">content</span><span class="o">=[</span>
    <span class="o">&lt;</span><span class="n">transaction_type</span> <span class="n">content</span><span class="o">=[</span><span class="kt">void</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">status</span> <span class="n">content</span><span class="o">=[</span><span class="n">error</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">mode</span> <span class="n">content</span><span class="o">=[</span><span class="n">live</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">transaction_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">43671</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">unique_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">44177</span><span class="n">a21403427eb96664a6d7e5d5d48</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">code</span> <span class="n">content</span><span class="o">=[</span><span class="mi">420</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">technical_message</span> <span class="n">content</span><span class="o">=[</span><span class="n">can</span> <span class="n">not</span> <span class="k">do</span> <span class="kt">void</span> <span class="n">on</span> <span class="kt">void</span> <span class="n">reference</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">message</span> <span class="n">content</span><span class="o">=[</span><span class="n">can</span> <span class="n">not</span> <span class="k">do</span> <span class="kt">void</span> <span class="n">on</span> <span class="kt">void</span> <span class="n">reference</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">timestamp</span> <span class="n">content</span><span class="o">=[</span><span class="mi">2019</span><span class="o">-</span><span class="mo">03</span><span class="o">-</span><span class="mi">14</span><span class="nl">T12:</span><span class="mo">06</span><span class="o">:</span><span class="mo">03</span><span class="n">Z</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">descriptor</span> <span class="n">content</span><span class="o">=[</span><span class="n">Descriptor</span> <span class="n">one</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">amount</span> <span class="n">content</span><span class="o">=[</span><span class="mi">100</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">currency</span> <span class="n">content</span><span class="o">=[</span><span class="n">USD</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">sent_to_acquirer</span> <span class="n">content</span><span class="o">=[</span><span class="kc">false</span><span class="o">]&gt;</span>
<span class="o">]&gt;</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="p">{</span>
    <span class="nl">transaction_type</span><span class="p">:</span> <span class="s2">"void"</span><span class="p">,</span>
    <span class="nx">status</span><span class="p">:</span> <span class="s2">"error"</span><span class="p">,</span>
    <span class="nx">mode</span><span class="p">:</span> <span class="s2">"live"</span><span class="p">,</span>
    <span class="nx">transaction_id</span><span class="p">:</span> <span class="s2">"43671"</span><span class="p">,</span>
    <span class="nx">unique_id</span><span class="p">:</span> <span class="s2">"44177a21403427eb96664a6d7e5d5d48"</span><span class="p">,</span>
    <span class="nx">code</span><span class="p">:</span> <span class="s2">"420"</span><span class="p">,</span>
    <span class="nx">technical_message</span><span class="p">:</span> <span class="s2">"can not do void on void reference"</span><span class="p">,</span>
    <span class="nx">message</span><span class="p">:</span> <span class="s2">"can not do void on void reference"</span><span class="p">,</span>
    <span class="nx">timestamp</span><span class="p">:</span> <span class="s2">"2019-03-14T12:06:03Z"</span><span class="p">,</span>
    <span class="nx">descriptor</span><span class="p">:</span> <span class="s2">"Descriptor one"</span><span class="p">,</span>
    <span class="nx">amount</span><span class="p">:</span> <span class="s2">"100"</span><span class="p">,</span>
    <span class="nx">currency</span><span class="p">:</span> <span class="s2">"USD"</span><span class="p">,</span>
    <span class="nx">sent_to_acquirer</span><span class="p">:</span> <span class="s2">"false"</span><span class="p">,</span>
<span class="p">}</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;void&lt;/transaction_type&gt;
  &lt;status&gt;error&lt;/status&gt;
  &lt;mode&gt;live&lt;/mode&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;code&gt;420&lt;/code&gt;
  &lt;technical_message&gt;can not <span class="k">do </span>void on void reference&lt;/technical_message&gt;
  &lt;message&gt;can not <span class="k">do </span>void on void reference&lt;/message&gt;
  &lt;timestamp&gt;2019-03-14T12:06:03Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
  &lt;sent_to_acquirer&gt;false&lt;/sent_to_acquirer&gt;
&lt;/payment_transaction&gt;
</code></pre>

<p><strong>Error Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>The transaction type</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>transaction_id</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>unique_id</td>
<td>string(32)</td>
<td>Unique id defined by gate (must later be used if capturing, voiding or refunding a transaction)</td>
</tr>
<tr>
<td>response_code</td>
<td>string(2)</td>
<td>Defines the issuer result of a transaction, the status of a message or some action taken or required. See <a href="#issuer-response-codes">issuer response codes</a> for details</td>
</tr>
<tr>
<td>code</td>
<td>integer</td>
<td>Error code according to <a href="#error-code-table">Error code table</a></td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when the transaction was processed in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Combined date and time</a> e.g. 2007-08- 30T17:46:11Z</td>
</tr>
<tr>
<td>descriptor</td>
<td>string</td>
<td>Static descriptor MID info as configured on the gateway</td>
</tr>
<tr>
<td>amount</td>
<td>integer</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>sent_to_acquirer</td>
<td>string</td>
<td>&quot;true&quot; or &quot;false&quot;</td>
</tr>
</tbody></table>
<h3 id='klarna-refund'>Klarna Refund</h3>
<p><strong>Klarna Refunds allow to return already billed amounts to customers.</strong></p>

<p>The amount can be fully or partially refunded. Klarna refunds can only be done on former <a href='#klarna-capture'>Klarna Capture</a> (settled) transactions.</p>

<p>Therefore, the <code>reference_id</code> for the corresponding transaction is mandatory.</p>

<blockquote>
<p>Request</p>
</blockquote>

<pre class="highlight php tab-php"><code>This request is not implemented yet
</code></pre>

<pre class="highlight java tab-java"><code><span class="n">This</span> <span class="n">request</span> <span class="n">is</span> <span class="n">not</span> <span class="n">implemented</span> <span class="n">yet</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>curl https://username:password@gate.emerchantpay.net/process/TERMINAL-TOKEN <span class="se">\</span>
   -H <span class="s2">"Content-Type: text/xml"</span> <span class="se">\</span>
   -d <span class="s1">'
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;klarna_refund&lt;/transaction_type&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;usage&gt;40208 concert tickets&lt;/usage&gt;
  &lt;remote_ip&gt;245.253.2.12&lt;/remote_ip&gt;
  &lt;reference_id&gt;43672&lt;/reference_id&gt;
  &lt;amount&gt;60&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
  &lt;items&gt;
    &lt;item&gt;
      &lt;item_type&gt;physical&lt;/item_type&gt;
      &lt;reference&gt;19-402-USA&lt;/reference&gt;
      &lt;name&gt;BatteryPowerPack&lt;/name&gt;
      &lt;quantity&gt;1&lt;/quantity&gt;
      &lt;unit_price&gt;60&lt;/unit_price&gt;
      &lt;tax_rate&gt;0&lt;/tax_rate&gt;
      &lt;total_amount&gt;60&lt;/total_amount&gt;
      &lt;total_discount_amount&gt;0&lt;/total_discount_amount&gt;
      &lt;total_tax_amount&gt;0&lt;/total_tax_amount&gt;
      &lt;image_url&gt;https://example.com/image_url&lt;/image_url&gt;
      &lt;product_url&gt;https://example.com/product_url&lt;/product_url&gt;
      &lt;quantity_unit&gt;pcs&lt;/quantity_unit&gt;
      &lt;merchant_data&gt;
        &lt;marketplace_seller_info&gt;Electronic gadgets&lt;/marketplace_seller_info&gt;
      &lt;/merchant_data&gt;
    &lt;/item&gt;
  &lt;/items&gt;
&lt;/payment_transaction&gt;'</span>
</code></pre>

<p><strong>Request Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>required</td>
<td>string(255)</td>
<td>The transaction type: <strong>klarna_refund</strong></td>
</tr>
<tr>
<td>transaction_id</td>
<td>required</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>usage</td>
<td>optional</td>
<td>string(255)</td>
<td>Description of the transaction for later use</td>
</tr>
<tr>
<td>remote_ip</td>
<td>required</td>
<td>IPv4 address</td>
<td>IPv4 address of customer</td>
</tr>
<tr>
<td>reference_id</td>
<td>required</td>
<td>string(32)</td>
<td>Unique id returned by corresponding transaction</td>
</tr>
<tr>
<td>amount</td>
<td>required</td>
<td>integer &gt; 0</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>required</td>
<td>string(3)</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td><strong>items</strong></td>
<td>required</td>
<td></td>
<td>List with items</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;item_type</td>
<td>required</td>
<td>string(255)</td>
<td>Order line type. Possible values: Supported item types</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;quantity</td>
<td>required</td>
<td>integer</td>
<td>Non-negative. The item quantity</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;unit_price</td>
<td>required</td>
<td>integer</td>
<td>Minor units. Includes tax, excludes discount(max value: 100000000)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;total_amount</td>
<td>required</td>
<td>integer</td>
<td>Includes tax and discount. Must match (quantity unit price) - total discount amount divided by quantity (max value: 100000000)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;reference</td>
<td>optional</td>
<td>string(255)</td>
<td>Article number, SKU or similar</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;name</td>
<td>optional</td>
<td>string(255)</td>
<td>Descriptive item name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;tax_rate</td>
<td>optional</td>
<td>integer</td>
<td>Non-negative. In percent, two implicit decimals. I.e 2500 = 25.00 percent</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;total_discount_amount</td>
<td>optional</td>
<td>integer</td>
<td>Non-negative minor units. Includes tax</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;total_tax_amount</td>
<td>optional</td>
<td>integer</td>
<td>Must be within 1 of total amount - total_amount * 10000 / (10000 + tax rate). Negative when type is discount</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;image_url</td>
<td>optional</td>
<td>url</td>
<td>URL to an image that can be later embedded in communications between Klarna and the customer. (max 1024 characters)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;product_url</td>
<td>optional</td>
<td>url</td>
<td>URL to an image that can be later embedded in communications between Klarna and the customer. (max 1024 characters)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;quantity_unit</td>
<td>optional</td>
<td>string(8)</td>
<td>Unit used to describe the quantity, e.g. kg, pcs... If defined has to be 1-8 characters</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;<strong>product_identifiers</strong></td>
<td>optional</td>
<td></td>
<td>List with product identifiers</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;brand</td>
<td>optional</td>
<td>string(255)</td>
<td>The product&#39;s brand name as generally recognized by consumers. If no brand is available for a product, do not supply any value</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;category_path</td>
<td>optional</td>
<td>string(255)</td>
<td>The product&#39;s category path as used in the merchant&#39;s webshop. Include the full and most detailed category and separate the segments with &#39; &gt; &#39;</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;global_trade_item_number</td>
<td>optional</td>
<td>string(255)</td>
<td>The product&#39;s Global Trade Item Number (GTIN). Common types of GTIN are EAN, ISBN or UPC. Exclude dashes and spaces, where possible</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;manufacturer_part_number</td>
<td>optional</td>
<td>string(255)</td>
<td>The product&#39;s Manufacturer Part Number (MPN), which - together with the brand - uniquely identifies a product. Only submit MPNs assigned by a manufacturer and use the most specific MPN possible</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;<strong>merchant_data</strong></td>
<td>optional</td>
<td></td>
<td>List with merchant data</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;marketplace_seller_info</td>
<td>optional</td>
<td>string(255)</td>
<td>Information for merchant marketplace</td>
</tr>
</tbody></table>

<p><code>required* = conditionally required</code></p>

<p>Supported item types:</p>

<table><thead>
<tr>
<th>Item Types</th>
</tr>
</thead><tbody>
<tr>
<td>physical</td>
</tr>
<tr>
<td>discount</td>
</tr>
<tr>
<td>shipping_fee</td>
</tr>
<tr>
<td>sales_tax</td>
</tr>
<tr>
<td>digital</td>
</tr>
<tr>
<td>gift_card</td>
</tr>
<tr>
<td>store_credit</td>
</tr>
<tr>
<td>surcharge</td>
</tr>
</tbody></table>

<blockquote>
<p>Successful Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>This request is not implemented yet
</code></pre>

<pre class="highlight java tab-java"><code><span class="n">This</span> <span class="n">request</span> <span class="n">is</span> <span class="n">not</span> <span class="n">implemented</span> <span class="n">yet</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;klarna_refund&lt;/transaction_type&gt;
  &lt;status&gt;approved&lt;/status&gt;
  &lt;mode&gt;live&lt;/mode&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;timestamp&gt;2019-03-14T12:06:03Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;amount&gt;60&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
  &lt;sent_to_acquirer&gt;true&lt;/sent_to_acquirer&gt;
&lt;/payment_transaction&gt;
</code></pre>

<p><strong>Successful Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>The transaction type</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>transaction_id</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>unique_id</td>
<td>string(32)</td>
<td>Unique id defined by gate (must later be used if capturing, voiding or refunding a transaction)</td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
<tr>
<td>message</td>
<td>string(255)</td>
<td>Human readable error message which can be displayed to users.</td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when the transaction was processed in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Combined date and time</a> e.g. 2007-08- 30T17:46:11Z</td>
</tr>
<tr>
<td>descriptor</td>
<td>string</td>
<td>Static descriptor MID info as configured on the gateway</td>
</tr>
<tr>
<td>amount</td>
<td>integer</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>sent_to_acquirer</td>
<td>string</td>
<td>&quot;true&quot; or &quot;false&quot;</td>
</tr>
</tbody></table>

<blockquote>
<p>Error Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>This request is not implemented yet
</code></pre>

<pre class="highlight java tab-java"><code><span class="n">This</span> <span class="n">request</span> <span class="n">is</span> <span class="n">not</span> <span class="n">implemented</span> <span class="n">yet</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;klarna_refund&lt;/transaction_type&gt;
  &lt;status&gt;error&lt;/status&gt;
  &lt;mode&gt;live&lt;/mode&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;code&gt;420&lt;/code&gt;
  &lt;technical_message&gt;can not <span class="k">do </span>void on void reference&lt;/technical_message&gt;
  &lt;message&gt;can not <span class="k">do </span>void on void reference&lt;/message&gt;
  &lt;timestamp&gt;2019-03-14T12:06:03Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;amount&gt;60&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
  &lt;sent_to_acquirer&gt;false&lt;/sent_to_acquirer&gt;
&lt;/payment_transaction&gt;
</code></pre>

<p><strong>Error Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>The transaction type</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>transaction_id</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>unique_id</td>
<td>string(32)</td>
<td>Unique id defined by gate (must later be used if capturing, voiding or refunding a transaction)</td>
</tr>
<tr>
<td>code</td>
<td>integer</td>
<td>Error code according to <a href="#error-code-table">Error code table</a></td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when the transaction was processed in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Combined date and time</a> e.g. 2007-08- 30T17:46:11Z</td>
</tr>
<tr>
<td>descriptor</td>
<td>string</td>
<td>Static descriptor MID info as configured on the gateway</td>
</tr>
<tr>
<td>amount</td>
<td>integer</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>sent_to_acquirer</td>
<td>string</td>
<td>&quot;true&quot; or &quot;false&quot;</td>
</tr>
</tbody></table>
<h3 id='bitpay-refund'>BitPay Refund</h3>
<p>BitPay Refund is a custom refund method which will handle the asynchronous BitPay refund workflow. BitPay refunds can only be done on former transactions. Therefore, the reference id for the corresponding BitPay Sale transaction is mandatory.</p>

<p>BitPay Refund is an asynchronous transaction type.</p>

<p>When a BitPay Refund is requested, BitPay will send an email to the consumer with a request to provide the refund crypto address. This request will be valid for 3 days and will expire afterwards. When the crypto address is provided, the refund will be processed (processing usually takes 24 hours).</p>

<p>A Notification will be sent to the Merchant when the Bitpay refund is completed.</p>

<aside class="notice">
Only full refunds are supported at the moment.
</aside>

<aside class="notice">
BitPay Refunds can be voided only in the 24-hour processing period.
</aside>

<blockquote>
<p>Request</p>
</blockquote>

<pre class="highlight php tab-php"><code>This request is not implemented yet
</code></pre>

<pre class="highlight java tab-java"><code><span class="n">This</span> <span class="n">request</span> <span class="n">is</span> <span class="n">not</span> <span class="n">implemented</span> <span class="n">yet</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>curl https://username:password@gate.emerchantpay.net/process/TERMINAL-TOKEN <span class="se">\</span>
   -H <span class="s2">"Content-Type: text/xml"</span> <span class="se">\</span>
   -d <span class="s1">'
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;bitpay_refund&lt;/transaction_type&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;usage&gt;40208 concert tickets&lt;/usage&gt;
  &lt;remote_ip&gt;245.253.2.12&lt;/remote_ip&gt;
  &lt;reference_id&gt;43672&lt;/reference_id&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
&lt;/payment_transaction&gt;'</span>
</code></pre>

<p><strong>Request Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>required</td>
<td>string(255)</td>
<td>The transaction type: <strong>bitpay_refund</strong></td>
</tr>
<tr>
<td>transaction_id</td>
<td>required</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>usage</td>
<td>optional</td>
<td>string(255)</td>
<td>Description of the transaction for later use</td>
</tr>
<tr>
<td>remote_ip</td>
<td>required*</td>
<td>IPv4 address</td>
<td>IPv4 address of customer</td>
</tr>
<tr>
<td>reference_id</td>
<td>required</td>
<td>string(32)</td>
<td>The reference_id must be a BitPay Sale transaction</td>
</tr>
<tr>
<td>amount</td>
<td>required</td>
<td>integer &gt; 0</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>required</td>
<td>string(3)</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
</tbody></table>

<p><code>required* = conditionally required</code></p>

<blockquote>
<p>Successful Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>This request is not implemented yet
</code></pre>

<pre class="highlight java tab-java"><code><span class="n">This</span> <span class="n">request</span> <span class="n">is</span> <span class="n">not</span> <span class="n">implemented</span> <span class="n">yet</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;bitpay_refund&lt;/transaction_type&gt;
  &lt;status&gt;approved&lt;/status&gt;
  &lt;mode&gt;live&lt;/mode&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;timestamp&gt;2019-03-14T12:06:03Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
&lt;/payment_transaction&gt;
</code></pre>

<p><strong>Successful Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>The transaction type</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>transaction_id</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>unique_id</td>
<td>string(32)</td>
<td>Unique id defined by gate (must later be used if capturing, voiding or refunding a transaction)</td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when the transaction was processed in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Combined date and time</a> e.g. 2007-08- 30T17:46:11Z</td>
</tr>
<tr>
<td>descriptor</td>
<td>string</td>
<td>Static descriptor MID info as configured on the gateway</td>
</tr>
<tr>
<td>amount</td>
<td>integer</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
</tbody></table>

<blockquote>
<p>Error Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>This request is not implemented yet
</code></pre>

<pre class="highlight java tab-java"><code><span class="n">This</span> <span class="n">request</span> <span class="n">is</span> <span class="n">not</span> <span class="n">implemented</span> <span class="n">yet</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;bitpay_refund&lt;/transaction_type&gt;
  &lt;status&gt;error&lt;/status&gt;
  &lt;mode&gt;live&lt;/mode&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;code&gt;410&lt;/code&gt;
  &lt;technical_message&gt;no approved reference transaction found&lt;/technical_message&gt;
  &lt;message&gt;no approved reference transaction found&lt;/message&gt;
  &lt;timestamp&gt;2019-03-14T12:06:03Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
&lt;/payment_transaction&gt;
</code></pre>

<p><strong>Error Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>The transaction type</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>transaction_id</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>unique_id</td>
<td>string(32)</td>
<td>Unique id defined by gate (must later be used if capturing, voiding or refunding a transaction)</td>
</tr>
<tr>
<td>response_code</td>
<td>string(2)</td>
<td>Defines the issuer result of a transaction, the status of a message or some action taken or required. See <a href="#issuer-response-codes">issuer response codes</a> for details</td>
</tr>
<tr>
<td>code</td>
<td>integer</td>
<td>Error code according to <a href="#error-code-table">Error code table</a></td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when the transaction was processed in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Combined date and time</a> e.g. 2007-08- 30T17:46:11Z</td>
</tr>
<tr>
<td>descriptor</td>
<td>string</td>
<td>Static descriptor MID info as configured on the gateway</td>
</tr>
<tr>
<td>amount</td>
<td>integer</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
</tbody></table>
<h2 id='alternative-payment-method-external-events'>Alternative Payment Method External Events</h2><h3 id='introduction-2'>Introduction</h3>
<p>For some alternative payment method (APM) transactions additional events may occur resulting from various actions from the part of the consumer or the merchant. Examples: returned/reversed bank transfers, funds not received, additional bank transfers made using the same transaction reference number etc.</p>

<p>In Genesis these are called external events and are handled in the following manner:</p>

<ol>
<li>A transaction note is created for the external event (visible under the ”Transaction Notes” section on the corresponding payment transaction page in the merchant console).</li>
<li>An API notification is sent to the merchant notification endpoint</li>
<li>An email notification is sent to the merchant admin email address</li>
<li>The original transaction status might be updated depending on the nature of the external event</li>
</ol>
<h3 id='list-of-external-events-per-alternative-payment-method'>List of external events per alternative payment method</h3>
<table><thead>
<tr>
<th>APM</th>
<th>External event</th>
<th>Description</th>
<th>Status change</th>
</tr>
</thead><tbody>
<tr>
<td>InstaDebit Payin</td>
<td>instadebit_payin_return</td>
<td>Payment has been returned to the consumer</td>
<td>voided</td>
</tr>
<tr>
<td>InstaDebit Payin</td>
<td>instadebit_payin_adjustment</td>
<td>Payment has been adjusted</td>
<td>none</td>
</tr>
<tr>
<td>InstaDebit Payout</td>
<td>instadebit_payout_return</td>
<td>Payment has been returned to the consumer</td>
<td>voided</td>
</tr>
<tr>
<td>InstaDebit Payout</td>
<td>instadebit_payout_adjustment</td>
<td>Payment has been adjusted</td>
<td>none</td>
</tr>
<tr>
<td>iDebit Payin</td>
<td>idebit_payin_return</td>
<td>Payment has been returned to the consumer</td>
<td>voided</td>
</tr>
<tr>
<td>iDebit Payin</td>
<td>idebit_payin_adjustment</td>
<td>Payment has been adjusted</td>
<td>none</td>
</tr>
<tr>
<td>iDebit Payout</td>
<td>idebit_payout_return</td>
<td>Payment has been returned to the consumer</td>
<td>voided</td>
</tr>
<tr>
<td>iDebit Payout</td>
<td>idebit_payout_adjustment</td>
<td>Payment has been adjusted</td>
<td>none</td>
</tr>
<tr>
<td>P24</td>
<td>p24_external_refund</td>
<td>Payment has been rescinded by the consumer or was never received</td>
<td>refunded</td>
</tr>
<tr>
<td>Argencard</td>
<td>chargeback_external_event</td>
<td>Payment has been considered fraudulent by the card issuer and was reversed</td>
<td>chargebacked</td>
</tr>
<tr>
<td>Aura</td>
<td>chargeback_external_event</td>
<td>Payment has been considered fraudulent by the card issuer and was reversed</td>
<td>chargebacked</td>
</tr>
<tr>
<td>Cabal</td>
<td>chargeback_external_event</td>
<td>Payment has been considered fraudulent by the card issuer and was reversed</td>
<td>chargebacked</td>
</tr>
<tr>
<td>Cencosud</td>
<td>chargeback_external_event</td>
<td>Payment has been considered fraudulent by the card issuer and was reversed</td>
<td>chargebacked</td>
</tr>
<tr>
<td>Elo</td>
<td>chargeback_external_event</td>
<td>Payment has been considered fraudulent by the card issuer and was reversed</td>
<td>chargebacked</td>
</tr>
<tr>
<td>Hipercard</td>
<td>chargeback_external_event</td>
<td>Payment has been considered fraudulent by the card issuer and was reversed</td>
<td>chargebacked</td>
</tr>
<tr>
<td>Naranja</td>
<td>chargeback_external_event</td>
<td>Payment has been considered fraudulent by the card issuer and was reversed</td>
<td>chargebacked</td>
</tr>
<tr>
<td>Nativa</td>
<td>chargeback_external_event</td>
<td>Payment has been considered fraudulent by the card issuer and was reversed</td>
<td>chargebacked</td>
</tr>
<tr>
<td>Tarjeta Shopping</td>
<td>chargeback_external_event</td>
<td>Payment has been considered fraudulent by the card issuer and was reversed</td>
<td>chargebacked</td>
</tr>
</tbody></table>
<h3 id='email-notification'>Email Notification</h3>
<p>An email is sent to the merchant admin’s email address detailing the external event type and any other relevant details together with a link to the original payment transaction.</p>
<h3 id='api-notification'>API Notification</h3>
<p>Merchants will receive API notifications every time Genesis obtains information about APM external events. Notifications are transmitted via HTTP POST (application/x-www-form-urlencoded) to the notification url endpoint provided in the XML request or to the Notification URL from the merchant account</p>

<blockquote>
<p>An example notification:</p>
</blockquote>
<pre class="highlight plaintext"><code>&amp;notification_type=apm_external_event
&amp;signature=8216b1b4929c0a41ed44bf51726c10872a78f181b26d1427e15410da56803fc0a2f
&amp;payment_transaction_unique_id=64216236bced683952325b6698b3954a
&amp;category=citadel_payin_chargeback
&amp;priority=info
&amp;code=SDR
&amp;info=Revoked+payment+due+to+instant+payment+funds+not+received
&amp;message=A+Citadel+Payin+transaction+has+been+reversed%2Frevoked.+Payment+has+been+rescinded+by+the+consumer+or+funds+were+never+received+for+the+payment. 
&amp;payload=...
</code></pre>
<p><strong>Parameters:</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>notification_type</td>
<td>string</td>
<td>constant value ”apm external event”</td>
</tr>
<tr>
<td>signature</td>
<td>string</td>
<td>the signature of the notification, should be used to verify the the notification was sent by Genesis</td>
</tr>
<tr>
<td>payment_transaction_unique_id</td>
<td>string</td>
<td>unique id of the original transaction, generated by Genesis</td>
</tr>
<tr>
<td>category</td>
<td>string</td>
<td>type of the external event</td>
</tr>
<tr>
<td>priority</td>
<td>string</td>
<td>can be one of ”info”, ”normal” or ”urgent”</td>
</tr>
<tr>
<td>code</td>
<td>string</td>
<td>code for the external event from the APM provider system</td>
</tr>
<tr>
<td>info</td>
<td>string</td>
<td>a short description of the external event</td>
</tr>
<tr>
<td>message</td>
<td>string</td>
<td>full short description of the external event</td>
</tr>
<tr>
<td>payload</td>
<td>string</td>
<td>the raw response for the external event as received from the APM provider</td>
</tr>
</tbody></table>

<p>The signature is a security measure meant to ensure that the gateway is really the sender of the notification. It is generated by concatenating the unique id of the payment with your API password and generating a SHA-512 Hash (Hex) of the string:</p>

<p><code>SHA-512 Hash Hex of [payment_transaction_unique_id][Your Merchant API password]</code></p>

<p><strong>Notification signature examples</strong></p>

<table><thead>
<tr>
<th>payment_transaction_unique_id</th>
<th>API password</th>
<th>signature</th>
</tr>
</thead><tbody>
<tr>
<td>26aa150ee68b1b2d6758a0e6c44fce4c</td>
<td>50fd87e65eb415f42fb5af4c9cf497662e00b785</td>
<td>c5219b3d385e74496b2b48a549</td>
</tr>
<tr>
<td>3f760162ef57a829011e5e2379b3fa17</td>
<td>50fd87e65eb415f42fb5af4c9cf497662e00b785</td>
<td>14519d0db2f7f8f407efccc9b09</td>
</tr>
</tbody></table>
<pre class="highlight xml tab-xml"><code><span class="cp">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="nt">&lt;notification_echo&gt;</span>
  <span class="nt">&lt;unique_id&gt;</span>3f760162ef57a829011e5e2379b3fa17<span class="nt">&lt;/unique_id&gt;</span>
<span class="nt">&lt;/notification_echo&gt;</span>
</code></pre>
<p>When receiving the notification, you are required to render an XML page containing the transaction’s payment transaction unique id so that the gateway knows that you have accepted the notification. If the XML is not delivered, the notification is sent periodically as per the rules for notifications delivery.</p>
<h2 id='advanced-risk-management-with-riskparams'>Advanced risk management with RiskParams</h2>
<p>The risk params section in the payment transaction xml allows you to pass user specific values along with the payment transaction. These values may be used by advanced risk management features and checked against a blacklist.</p>

<p>RiskParams can be used in any user triggered payment transaction. User triggered transactions types are <a href="#authorize">Authorize</a>, <a href="#authorize-3d">Authorize3d</a>, <a href="#sale">Sale</a>, <a href="#sale-3d">Sale3d</a>, <a href="#init-recurring-sale">InitRecurringSale</a>, <a href="#init-recurring-sale-3d">InitRecurringSale3d</a>, and <a href="#account-verification">AccountVerification</a>.</p>
<pre class="highlight xml tab-xml"><code><span class="cp">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="nt">&lt;payment_transaction&gt;</span>
  <span class="nt">&lt;transaction_type&gt;</span>sale<span class="nt">&lt;/transaction_type&gt;</span>
  <span class="nt">&lt;transaction_id&gt;</span>43671<span class="nt">&lt;/transaction_id&gt;</span>
  <span class="nt">&lt;usage&gt;</span>40208 concert tickets<span class="nt">&lt;/usage&gt;</span>
  <span class="nt">&lt;remote_ip&gt;</span>245.253.2.12<span class="nt">&lt;/remote_ip&gt;</span>
  <span class="nt">&lt;amount&gt;</span>5000<span class="nt">&lt;/amount&gt;</span>
  <span class="nt">&lt;currency&gt;</span>USD<span class="nt">&lt;/currency&gt;</span>
  <span class="nt">&lt;card_holder&gt;</span>Emil Example<span class="nt">&lt;/card_holder&gt;</span>
  <span class="nt">&lt;card_number&gt;</span>4200000000000000<span class="nt">&lt;/card_number&gt;</span>
  <span class="nt">&lt;cvv&gt;</span>123<span class="nt">&lt;/cvv&gt;</span>
  <span class="nt">&lt;expiration_month&gt;</span>2<span class="nt">&lt;/expiration_month&gt;</span>
  <span class="nt">&lt;expiration_year&gt;</span>2015<span class="nt">&lt;/expiration_year&gt;</span>
  <span class="nt">&lt;customer_email&gt;</span>emil@example.com<span class="nt">&lt;/customer_email&gt;</span>
  <span class="nt">&lt;customer_phone&gt;</span>+49301234567<span class="nt">&lt;/customer_phone&gt;</span>
  <span class="nt">&lt;billing_address&gt;</span>
    <span class="nt">&lt;first_name&gt;</span>Max<span class="nt">&lt;/first_name&gt;</span>
    <span class="nt">&lt;last_name&gt;</span>Mustermann<span class="nt">&lt;/last_name&gt;</span>
    <span class="nt">&lt;address1&gt;</span>Muster Str. 12<span class="nt">&lt;/address1&gt;</span>
    <span class="nt">&lt;zip_code&gt;</span>10178<span class="nt">&lt;/zip_code&gt;</span>
    <span class="nt">&lt;city&gt;</span>Berlin<span class="nt">&lt;/city&gt;</span>
    <span class="nt">&lt;state&gt;</span>DE1<span class="nt">&lt;/state&gt;</span>
    <span class="nt">&lt;country&gt;</span>DE<span class="nt">&lt;/country&gt;</span>
  <span class="nt">&lt;/billing_address&gt;</span>
  <span class="nt">&lt;risk_params&gt;</span>
    <span class="nt">&lt;ssn&gt;</span>987-65-4320<span class="nt">&lt;/ssn&gt;</span>
    <span class="nt">&lt;mac_address&gt;</span>12-34-56-78-9A-BC<span class="nt">&lt;/mac_address&gt;</span>
    <span class="nt">&lt;session_id&gt;</span>1DA53551-5C60-498C-9C18-8456BDBA74A9<span class="nt">&lt;/session_id&gt;</span>
    <span class="nt">&lt;user_id&gt;</span>1002547<span class="nt">&lt;/user_id&gt;</span>
    <span class="nt">&lt;user_level&gt;</span>vip<span class="nt">&lt;/user_level&gt;</span>
    <span class="nt">&lt;email&gt;</span>emil@example.com<span class="nt">&lt;/email&gt;</span>
    <span class="nt">&lt;phone&gt;</span>+49301234567<span class="nt">&lt;/phone&gt;</span>
    <span class="nt">&lt;remote_ip&gt;</span>245.253.2.12<span class="nt">&lt;/remote_ip&gt;</span>
  <span class="nt">&lt;/risk_params&gt;</span>
<span class="nt">&lt;/payment_transaction&gt;</span>
</code></pre>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>risk_params</td>
<td>optional</td>
<td></td>
<td></td>
</tr>
<tr>
<td>- ssn</td>
<td>optional</td>
<td>string(128)</td>
<td>Social Security number or equivalent value for non US customers.</td>
</tr>
<tr>
<td>- mac_address</td>
<td>optional</td>
<td>string(128)</td>
<td>the customers <a href="https://en.wikipedia.org/wiki/MAC_address">mac address</a>.</td>
</tr>
<tr>
<td>- session_id</td>
<td>optional</td>
<td>string(128)</td>
<td>the customers session_id.</td>
</tr>
<tr>
<td>- user_id</td>
<td>optional</td>
<td>string(128)</td>
<td>the customers user_id.</td>
</tr>
<tr>
<td>- user_level</td>
<td>optional</td>
<td>string(128)</td>
<td>a value describing the customers trust level, may be used by the risk manage- ment for configurable differentiated limits.</td>
</tr>
<tr>
<td>- email</td>
<td>optional</td>
<td>string(128)</td>
<td>the customers email.</td>
</tr>
<tr>
<td>- phone</td>
<td>optional</td>
<td>string(128)</td>
<td>the customers phone.</td>
</tr>
<tr>
<td>- remote_ip</td>
<td>optional</td>
<td>string(128)</td>
<td>the customers ip address.</td>
</tr>
<tr>
<td>- serial_number</td>
<td>optional</td>
<td>string(128)</td>
<td>custom serial number.</td>
</tr>
<tr>
<td>- pan_tail</td>
<td>optional</td>
<td>string(128)</td>
<td>The last 4 digits of the card number.</td>
</tr>
<tr>
<td>- bin</td>
<td>optional</td>
<td>string(128)</td>
<td>The first 6 digits of the card number.</td>
</tr>
<tr>
<td>- first_name</td>
<td>optional</td>
<td>string(128)</td>
<td>Customer first name.</td>
</tr>
<tr>
<td>- last_name</td>
<td>optional</td>
<td>string(128)</td>
<td>Customer last name.</td>
</tr>
<tr>
<td>- country</td>
<td>optional</td>
<td>string(128).</td>
<td>The country of the customer.</td>
</tr>
<tr>
<td>- pan.</td>
<td>optional</td>
<td>string(128)</td>
<td>The PAN hash of the customer card number.</td>
</tr>
<tr>
<td>- forwarded_ip</td>
<td>optional</td>
<td>string(128)</td>
<td>MaxMind specific risk param.</td>
</tr>
<tr>
<td>- username</td>
<td>optional</td>
<td>string(128)</td>
<td>MaxMind specific risk param.</td>
</tr>
<tr>
<td>- password</td>
<td>optional</td>
<td>string(128)</td>
<td>MaxMind specific risk param.</td>
</tr>
<tr>
<td>- bin_name</td>
<td>optional</td>
<td>string(128)</td>
<td>MaxMind specific risk param.</td>
</tr>
<tr>
<td>- bin_phone</td>
<td>optional</td>
<td>string(128)</td>
<td>MaxMind specific risk param.</td>
</tr>
</tbody></table>

<aside class="notice" >
The risk management needs to be configured to use these values, passing the values alone will not trigger any risk management features.
</aside>

<p>To use these values for risk management please contact <a href="mailto:risk@&lt;%=%20domain_name%20%">our Risk team</a>.</p>
<h2 id='credential-on-file-cof'>Credential On File (COF)</h2>
<p>As the payment ecosystem has evolved, instances in which a transaction is initiated with a stored credential based on cardholder consent for future use have significantly increased. Growth in digital commerce, together with the emergence of new business models, has increased the number of transactions where a merchant or its agent, a payment facilitator (PF), or a staged digital wallet operator (SDWO) uses cardholder payment credentials (i.e., account details) that they previously stored for future purchases.</p>

<p>In Genesis, the COF indicator can be used for the following transaction types: <a href="#account-verification" target="_self">Account Verification</a>, <a href="#authorize" target="_self">Authorize</a>, <a href="#authorize-3d" target="_self">Authorize3D</a>, <a href="#sale" target="_self">Sale</a>, <a href="#sale-3d" target="_self">Sale3D</a>, <a href="#init-recurring-sale" target="_self">InitRecurringSale</a>, <a href="#init-recurring-sale-3d" target="_self">InitRecurringSale3D</a>, <a href="#payout-3" target="_self">Payout</a> to mark a transaction as <strong>initial customer initiated, subsequent customer initiated or as unscheduled merchant initiated (UCOF)</strong>.</p>

<p>The UCOF transaction uses a previously stored credential for a fixed or variable amount and it does not occur on a scheduled or regularly occurring transaction date. With it, the cardholder has provided consent to the merchant to initiate one or more future transactions. An example of such a transaction is an account auto-top up.</p>

<p><strong>Supported options for Credential On File (COF) field:</strong></p>

<table><thead>
<tr>
<th>COF</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>initial_customer_initiated</td>
<td>Initial transaction used to store payment credentials for future customer initiated payments while processing. Required for external tokenization, and optional for gateway-based tokenization</td>
</tr>
<tr>
<td>subsequent_customer_initiated</td>
<td>Subsequent customer initiated transaction using previously stored payment credentials. Required for external tokenization, and optional for gateway-based tokenization</td>
</tr>
<tr>
<td>merchant_unscheduled</td>
<td>Merchant initiated transaction where the customer has given prior consent for the merchant to store and use payment credentials, UCOF transaction</td>
</tr>
</tbody></table>
<h2 id='currency-and-amount-handling'>Currency and Amount Handling</h2>
<p>The gateway handles all types of processing currencies, with exponents ranging from 0 (e.g. JPY), 2 (e.g. CNY, USD, EUR, GBP), to 3 (e.g. KWD). Processing currencies are configured on terminal level.</p>

<p>Transaction amounts on the API level should be submitted in the minor currency unit for the given currency, e.g.:</p>

<p><strong>Amount currencies:</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>USD</td>
<td>100.33</td>
<td>Should be submitted as 10033 in the amount API field (exponent 2)</td>
</tr>
<tr>
<td>EUR</td>
<td>3</td>
<td>Should be submitted as 300 in the amount API field (exponent 2)</td>
</tr>
<tr>
<td>JPY</td>
<td>150</td>
<td>Should be submitted as 150 in the amount API field (exponent 0)</td>
</tr>
<tr>
<td>KWD</td>
<td>100.333</td>
<td>Should be submitted as 100333 in the amount API field (exponent 3)</td>
</tr>
</tbody></table>

<p><strong>Amount limits:</strong> Amount has to be provided within limit for listed transaction types and currencies:</p>

<table><thead>
<tr>
<th>Transaction Type</th>
<th>Currency</th>
<th>minumum</th>
<th>maximum</th>
</tr>
</thead><tbody>
<tr>
<td>OnlineBankingTransaction</td>
<td>CNY*</td>
<td>10.00</td>
<td>50,000.00</td>
</tr>
<tr>
<td></td>
<td>CNY*</td>
<td>100.00</td>
<td>5,000.00</td>
</tr>
<tr>
<td></td>
<td>CNY*</td>
<td>100.00</td>
<td>20,000.00</td>
</tr>
<tr>
<td></td>
<td>CNY*</td>
<td>100.00</td>
<td>1,000.00</td>
</tr>
<tr>
<td></td>
<td>THB</td>
<td>10.00</td>
<td>500,000.00</td>
</tr>
<tr>
<td></td>
<td>IDR</td>
<td>10,000.00</td>
<td>50,000,000.00</td>
</tr>
<tr>
<td></td>
<td>MYR</td>
<td>10.00</td>
<td>20,000.00</td>
</tr>
<tr>
<td>BankPayoutTransaction</td>
<td>CNY</td>
<td>60.00</td>
<td>49,000.00</td>
</tr>
<tr>
<td></td>
<td>THB</td>
<td>350.00</td>
<td>175,000.00</td>
</tr>
<tr>
<td></td>
<td>IDR</td>
<td>50,000.00</td>
<td>25,000,000.00</td>
</tr>
<tr>
<td></td>
<td>MYR</td>
<td>50.00</td>
<td>20,000.00</td>
</tr>
<tr>
<td>WechatTransaction</td>
<td>All</td>
<td>10.00</td>
<td>3,000.00</td>
</tr>
</tbody></table>

<p><code>* = Depends on the setup</code></p>

<p>Check the <a href="http://www.xe.com/iso4217.php">ISO 4217 standard</a> for details on currencies and their exponents/minor currency units.</p>
<h2 id='dynamic-descriptor'>Dynamic Descriptor</h2>
<p>Dynamic descriptor functionality is available as part of the gateway. It is enabled on terminal level, so contact the IT Support team at <a href="mailto:tech-support@emerchantpay.net">tech-support@emerchantpay.net</a> if you wish to use it.</p>

<p>Currently, the transactions types that support dynamic descriptor parameters are <a href="#authorize">Authorize</a>, <a href="#authorize-3d">Authorize3d</a>, <a href="#sale">Sale</a>, <a href="#sale-3d">Sale3d</a>, <a href="#init-recurring-sale">InitRecurringSale</a>, <a href="#init-recurring-sale-3d">InitRecurringSale3d</a>, <a href="#payout">Payout</a>, and <a href="#paybyvoucher-sale">PaybyvoucherSale</a>.</p>

<p>WPF payments also support dynamic descriptor.</p>

<p>The currently supported dynamic descriptor parameters are:</p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>merchant_name</td>
<td>string(25)</td>
<td>Needed by merchants/PSPs to change the charge description. Any chars above 25 are truncated. If the merchant name is less than 25 chars, it is right padded with whitespace before sent to the schemes</td>
</tr>
<tr>
<td>merchant_city</td>
<td>string(13)</td>
<td>Contains the city of the merchant for card-present merchants and the merchant phone number for CNP merchants. Formatting rules applied as mentioned above</td>
</tr>
</tbody></table>

<p>If the terminal is configured with dynamic descriptor, but the merchant does not send the dynamic desccriptor parameter in question at all or sends whitespace, this defaults the given dynamic descriptor parameter to the static descriptor configured on MID level when submitted to the schemes.</p>

<p>Note also that the dynamic descriptor params section with the properly formatted individual dynamic descriptor params is returned in the payment transaction response on the API if those params have been submitted in the transaction API request beforehand.</p>

<p>Regarding reference-based transactions, since they do not accept any dynamic descriptor params in the request, there is no dynamic descrptor params section in the response as well. Reference-based transactions reuse the dynamic descriptor params of their original transaction.</p>
<h2 id='electronic-commerce-indicator'>Electronic Commerce Indicator</h2>
<p>Electronic Commerce Indicator (ECI) is a value that is returned from the Directory Server (Visa, MasterCard, etc.) to indicate the authentication results of your customer’s credit card payment on 3D Secure.</p>

<p>Visa</p>

<table><thead>
<tr>
<th>ECI Code</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>05</td>
<td>Both cardholder and card issuing bank are 3D enabled. 3D card authentication is successful</td>
</tr>
<tr>
<td>06</td>
<td>Either cardholder or card issuing bank is not 3D enrolled. 3D card authentication is unsuccessful, in sample situations as: 1. 3D cardholder not enrolled 2. Card issuing bank is not 3D Secure ready</td>
</tr>
<tr>
<td>07</td>
<td>Authentication is unsuccessful or not attempted. The credit card is either a non-3D card or card issuing bank does not handle it as a 3D transaction</td>
</tr>
</tbody></table>

<p>MasterCard/Maestro</p>

<table><thead>
<tr>
<th>ECI Code</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>02</td>
<td>Both cardholder and card issuing bank are 3D enabled. 3D card authentication is successful</td>
</tr>
<tr>
<td>01</td>
<td>Either cardholder or card issuing bank is not 3D enrolled. 3D card authentication is unsuccessful, in sample situations as: 1. 3D Cardholder not enrolled 2. Card issuing bank is not 3D Secure ready</td>
</tr>
<tr>
<td>00 (or empty)</td>
<td>Authentication is unsuccessful or not attempted. The credit card is either a non-3D card or card issuing bank does not handle it as a 3D transaction</td>
</tr>
</tbody></table>

<p>JCB</p>

<table><thead>
<tr>
<th>ECI Code</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>05</td>
<td>Both cardholder and card issuing bank are 3D enabled. 3D card authentication is successful</td>
</tr>
<tr>
<td>06</td>
<td>Either cardholder or card issuing bank is not 3D enrolled. 3D card authentication is unsuccessful, in sample situations as: 1. 3D Cardholder not enrolled 2. Card issuing bank is not 3D Secure ready</td>
</tr>
<tr>
<td>07</td>
<td>Authentication is unsuccessful or not attempted. The credit card is either a non-3D card or card issuing bank does not handle it as a 3D transaction</td>
</tr>
</tbody></table>

<p>Diners</p>

<table><thead>
<tr>
<th>ECI Code</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>05</td>
<td>Both cardholder and card issuing bank are 3D enabled. 3D card authentication is successful</td>
</tr>
<tr>
<td>06</td>
<td>Either cardholder or card issuing bank is not 3D enrolled. 3D card authentication is unsuccessful, in sample situations as: 1. 3D Cardholder not enrolled 2. Card issuing bank is not 3D Secure ready</td>
</tr>
<tr>
<td>07</td>
<td>Authentication is unsuccessful or not attempted. The credit card is either a non-3D card or card issuing bank does not handle it as a 3D transaction</td>
</tr>
</tbody></table>

<p>American Express</p>

<table><thead>
<tr>
<th>ECI Code</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>05</td>
<td>Both cardholder and card issuing bank are 3D enabled. 3D card authentication is successful</td>
</tr>
<tr>
<td>06</td>
<td>Either cardholder or card issuing bank is not 3D enrolled. 3D card authentication is unsuccessful, in sample situations as: 1. 3D Cardholder not enrolled 2. Card issuing bank is not 3D Secure ready</td>
</tr>
<tr>
<td>07</td>
<td>Authentication is unsuccessful or not attempted. The credit card is either a non-3D card or card issuing bank does not handle it as a 3D transaction</td>
</tr>
</tbody></table>
<h2 id='issuer-response-codes'>Issuer Response Codes</h2>
<p>See below a list of issuer response codes with the corresponding messages. Issuer response codes (response code element) are di↵erent than the regular gateway codes (code element) - the issuer response code maps to the issuer code while the code is the gateway internal code mapping and part of the API, as described in the Errors section. Transaction responses will return the relevant issuer response code (note that both issuer response code and authorization code are optional in the API responses and will be returned only if the transaction reached the issuer)</p>

<table><thead>
<tr>
<th>Issuer Response Code</th>
<th>Issuer Message</th>
</tr>
</thead><tbody>
<tr>
<td>00</td>
<td>Approved or completed successfully</td>
</tr>
<tr>
<td>02</td>
<td>Refer to card issuer</td>
</tr>
<tr>
<td>03</td>
<td>Invalid merchant</td>
</tr>
<tr>
<td>04</td>
<td>Do not honour</td>
</tr>
<tr>
<td>05</td>
<td>Do not honour</td>
</tr>
<tr>
<td>06</td>
<td>Invalid Transaction for Terminal</td>
</tr>
<tr>
<td>07</td>
<td>Honour with ID</td>
</tr>
<tr>
<td>08</td>
<td>Time-Out</td>
</tr>
<tr>
<td>09</td>
<td>No Original</td>
</tr>
<tr>
<td>10</td>
<td>Unable to Reverse</td>
</tr>
<tr>
<td>11</td>
<td>Partial Approval</td>
</tr>
<tr>
<td>12</td>
<td>Invalid transaction card / issuer / acquirer</td>
</tr>
<tr>
<td>13</td>
<td>Invalid amount</td>
</tr>
<tr>
<td>14</td>
<td>Invalid card number</td>
</tr>
<tr>
<td>17</td>
<td>Invalid Capture date, terminal business date</td>
</tr>
<tr>
<td>19</td>
<td>System Error, Re-enter transaction</td>
</tr>
<tr>
<td>20</td>
<td>No From Account</td>
</tr>
<tr>
<td>21</td>
<td>No To Account</td>
</tr>
<tr>
<td>22</td>
<td>No Checking Account</td>
</tr>
<tr>
<td>23</td>
<td>No Saving Account</td>
</tr>
<tr>
<td>24</td>
<td>No Credit Account</td>
</tr>
<tr>
<td>30</td>
<td>Format error</td>
</tr>
<tr>
<td>34</td>
<td>Implausible card data</td>
</tr>
<tr>
<td>39</td>
<td>Transaction Not Allowed</td>
</tr>
<tr>
<td>41</td>
<td>Pick-up card</td>
</tr>
<tr>
<td>42</td>
<td>Special Pickup</td>
</tr>
<tr>
<td>43</td>
<td>Hot Card, Pickup if possible</td>
</tr>
<tr>
<td>44</td>
<td>Pickup Card</td>
</tr>
<tr>
<td>45</td>
<td>Transaction Back O↵</td>
</tr>
<tr>
<td>51</td>
<td>Not su cient funds</td>
</tr>
<tr>
<td>54</td>
<td>Expired card</td>
</tr>
<tr>
<td>55</td>
<td>Incorrect PIN, Re-enter</td>
</tr>
<tr>
<td>57</td>
<td>Not permitted on card</td>
</tr>
<tr>
<td>58</td>
<td>Txn Not Permitted On Term</td>
</tr>
<tr>
<td>61</td>
<td>Exceeds amount limit</td>
</tr>
<tr>
<td>62</td>
<td>Restricted card</td>
</tr>
<tr>
<td>63</td>
<td>MAC Key Error</td>
</tr>
<tr>
<td>65</td>
<td>Exceeds frequency limit</td>
</tr>
<tr>
<td>66</td>
<td>Exceeds Acquirer Limit</td>
</tr>
<tr>
<td>67</td>
<td>Retain Card, no reason specified</td>
</tr>
<tr>
<td>68</td>
<td>Response received too late</td>
</tr>
<tr>
<td>75</td>
<td>Exceeds PIN Retry</td>
</tr>
<tr>
<td>76</td>
<td>Invalid Account</td>
</tr>
<tr>
<td>77</td>
<td>Issuer Does Not Participate In The Service</td>
</tr>
<tr>
<td>78</td>
<td>Function Not Available</td>
</tr>
<tr>
<td>79</td>
<td>Key Validation Error</td>
</tr>
<tr>
<td>80</td>
<td>Approval for Purchase Amount Only</td>
</tr>
<tr>
<td>81</td>
<td>Unable to Verify PIN</td>
</tr>
<tr>
<td>82</td>
<td>Invalid Card Verification Value</td>
</tr>
<tr>
<td>83</td>
<td>Not declined, AVS Only</td>
</tr>
<tr>
<td>84</td>
<td>Invalid Life Cycle of transaction</td>
</tr>
<tr>
<td>85</td>
<td>No Keys To Use</td>
</tr>
<tr>
<td>86</td>
<td>K M E Sync Error</td>
</tr>
<tr>
<td>87</td>
<td>PIN Key Error</td>
</tr>
<tr>
<td>88</td>
<td>MAC sync Error</td>
</tr>
<tr>
<td>89</td>
<td>Security Violation</td>
</tr>
<tr>
<td>91</td>
<td>Issuer not available</td>
</tr>
<tr>
<td>92</td>
<td>Invalid Issuer</td>
</tr>
<tr>
<td>93</td>
<td>Transaction cannot be completed</td>
</tr>
<tr>
<td>94</td>
<td>Invalid originator</td>
</tr>
<tr>
<td>96</td>
<td>System malfunction</td>
</tr>
<tr>
<td>97</td>
<td>No Funds Transfer</td>
</tr>
<tr>
<td>98</td>
<td>Duplicate Reversal</td>
</tr>
<tr>
<td>99</td>
<td>Duplicate Transaction</td>
</tr>
<tr>
<td>N3</td>
<td>Cash Service Not Available</td>
</tr>
<tr>
<td>N4</td>
<td>Cash Back Request Exceeds Issuer Limit</td>
</tr>
<tr>
<td>N7</td>
<td>CVV2 Failure</td>
</tr>
<tr>
<td>R0</td>
<td>Stop Payment Order</td>
</tr>
<tr>
<td>R1</td>
<td>Revocation of Authorisation Order</td>
</tr>
<tr>
<td>R3</td>
<td>Revocation of all Authorisations Order</td>
</tr>
</tbody></table>
<h2 id='manually-reviewed-transactions'>Manually Reviewed Transactions</h2>
<p>Under certain conditions, transactions can be stopped for manual review by the Risk team. This happens when the appropriate risk rules have been enabled for the merchant in question. Feel free to discuss enabling of manual reviews for transactions with our Risk team. Transactions that are stopped for manual review are returned with status status ’pending review’ in the API response, together with a detailed message specifying a manual review of this transaction follows. Note that transactions will be manually reviewed by the Risk team in the next 24 hours. In the process, each transaction will be manually approved or manually declined, and at this point the merchant will receive a notification with the status of the transaction, see Notifcations.</p>

<p>Special case for manual reviewing is when the transaction is 3D async, in this case the merchant receives one notification if the transaction is manually declined by the Risk team, and two notifications if the transaction is manually approved. On manual approval, the first notification is sent once the transaction is manually approved and is sent for enrollment check to the MPI provider - the notification will contain status pending asyc together with the redirect url where the consumer needs to be redirected to by the merchant. The second notification is the standard 3D notification, once a consumer has been redirected to the given redirect url, has enteres his/her MPI password, and contains the final status of the transaction be it approved by the issuer, or declined for invalid 3D password, and so on</p>

<blockquote>
<p>The format of the first notification for manual review and following approval is:</p>
</blockquote>
<pre class="highlight plaintext"><code>?transaction_id=82803B4C-70CC-43BD-8B21-FD0395285B40
&amp;unique_id=44177a21403427eb96664a6d7e5d5d48
&amp;transaction_type=sale3d
&amp;terminal_token=394f2ebc3646d3c017fa1e1cbc4a1e20
&amp;status=pending_async
&amp;amount=500
&amp;signature=088e16a1019277b15d58faf0541e11910eb756f6
&amp;eci=06
&amp;redirect_url=http://example.com/redirect_url
</code></pre>
<p>The second notification is the same as the typical 3D notifcations for final statuses after the consumer has performed the 3D workflow.</p>
<h2 id='partial-approvals'>Partial Approvals</h2>
<p>Credit cards that do not have sufficient funds in their account for the full purchase amount may be provided with a partial approval response from the issuer. When a partial approval happens, there will be a flag confirming the partial approval in the response (partial approval set to ’true’) and the amount field in the response will contain the actual partially approved amount instead of the requested one in the API request. The cardholder can then choose to use a supplemental payment method to pay the balance and complete the purchase, if so desired. Merchants that accept partial approvals should note that issuers may return a partial approval response on a pre-paid/debit card at any time, and issuers may also respond with a partial approval response amount that is equal to the requested amount.</p>

<p>Have in mind that full/partial refunds or captures need to reference the partially approved initial transaction, you will get a workflow error if trying to capture or refund more than the partially approved amount. So make sure you check for the partial approval flag in the API response for the relevant transaction types, and handle follow-up transaction amounts properly.</p>

<p>With 3-D secure transactions, if a partial approval happened, the partially approved amount will be returned in the async API notification to the merchant. This is because actual communication with the acquirers happen after 3D authentication by the cardholder, in the initial API response the merchant will get the requested amount with the status ’pending async’ for the transaction.</p>

<p>Note that partial approval support is disabled by default, feel free to contact our Risk team to enable it.</p>
<h2 id='required-vs-optional-api-params'>Required vs Optional API params</h2>
<p>There are some API params which can be configured as either optional or required on the terminal level. Contact the IT Support team at <a href="mailto:tech-support@emerchantpay.net">tech-support@emerchantpay.net</a> if you wish to disable or enable some API params based on your business model and integration type. Note also that if all the billing address params are configured as optional, then the whole billing address XML tag can be dismissed and not sent in the API requests.</p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>customer_email</td>
<td>email address</td>
<td>By default, customer email is a required API param</td>
</tr>
<tr>
<td>customer_phone</td>
<td>string(32)</td>
<td>By default, customer phone is an optional API param</td>
</tr>
<tr>
<td>remote_ip</td>
<td>string(40)</td>
<td>By default, customer IP is a required API param</td>
</tr>
<tr>
<td>first_name</td>
<td>string(255)</td>
<td>By default, customer first name is a required API param</td>
</tr>
<tr>
<td>last_name</td>
<td>string(255)</td>
<td>By default, customer last name is a required API param</td>
</tr>
<tr>
<td>address1</td>
<td>string(255)</td>
<td>By default, primary address is a required API param. Cannot be configured as optional for account verification transaction type</td>
</tr>
<tr>
<td>address2</td>
<td>string(255)</td>
<td>By default, secondary address is an optional API param</td>
</tr>
<tr>
<td>city</td>
<td>string(255)</td>
<td>By default, city is a required API param. Cannot be config- ured as optional for account verification transaction type</td>
</tr>
<tr>
<td>zip_code</td>
<td>string</td>
<td>By default, zip code is a required API param. Cannot be con- figured as optional for account verification transaction type</td>
</tr>
<tr>
<td>state</td>
<td>string(2)</td>
<td>By default, state is an optional API param (unless country is US or CA)</td>
</tr>
<tr>
<td>country</td>
<td>string(2)</td>
<td>By default, country code is a required API param</td>
</tr>
<tr>
<td>usage</td>
<td>string(255)</td>
<td>By default, usage will be configured as a required API param for SDD and P24, optional for the rest</td>
</tr>
</tbody></table>
<h2 id='transaction-states'>Transaction States</h2>
<p>Transactions will have one of the following states. These will be returned by transaction responses, reconcile responses and will be shown in the browser interface</p>

<table><thead>
<tr>
<th>Status</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>approved</td>
<td>Transaction was approved by the schemes and is successful.</td>
</tr>
<tr>
<td>declined</td>
<td>Transaction was declined by the schemes or risk management.</td>
</tr>
<tr>
<td>pending_async</td>
<td>An asynchronous transaction (3-D secure payment) has been initiated and is waiting for user input. Updates of this state will be sent to the notification url specified in request.</td>
</tr>
<tr>
<td>pending</td>
<td>The outcome of the transaction could not be determined, e.g. at a timeout situation. Transaction state will eventually change, so make a reconcile after a certain time frame.</td>
</tr>
<tr>
<td>error</td>
<td>An error has occurred while negotiating with the schemes.</td>
</tr>
<tr>
<td>refunded</td>
<td>Once an approved transaction is refunded the state changes to refunded.</td>
</tr>
<tr>
<td>chargebacked</td>
<td>Once an approved transaction is chargeback the state changes to change- backed. Chargeback is the state of rejecting an accepted transaction (with funds transferred) by the cardholder or the issuer</td>
</tr>
<tr>
<td>voided</td>
<td>Transaction was authorized, but later the merchant canceled it.</td>
</tr>
<tr>
<td>chargeback_reversed</td>
<td>Once a chargebacked transaction is charged, the state changes to chargeback reversed. Chargeback has been canceled.</td>
</tr>
<tr>
<td>second_chargebacked</td>
<td>Once a chargeback reversed transaction is chargebacked the state changes to second chargebacked.</td>
</tr>
<tr>
<td>pending_review</td>
<td>Transaction on hold, a manual review will be done</td>
</tr>
</tbody></table>
<h2 id='supported-card-brands'>Supported Card Brands</h2>
<p>Card Brands are specific per acquirer. If you want to use a specific card brand you can contact
<a href="mailto:tech-support@&lt;%=domain_name%">tech-support@&lt;%= domain_name %&gt;</a>.</p>

<table><thead>
<tr>
<th>Supported card brands</th>
</tr>
</thead><tbody>
<tr>
<td>Visa</td>
</tr>
<tr>
<td>Master</td>
</tr>
<tr>
<td>Intl Maestro</td>
</tr>
<tr>
<td>Discover</td>
</tr>
<tr>
<td>Diners</td>
</tr>
<tr>
<td>AMEX</td>
</tr>
<tr>
<td>JCB</td>
</tr>
</tbody></table>
<h2 id='document-id-parameter'>Document ID Parameter</h2>
<p>Document ID is consumer personal identification. It is different for every country and is described more specifically in the table below.
Document ID is required for some of the acquirers, please contact the IT Support team at <a href="mailto:tech-support@emerchantpay.net">tech-support@emerchantpay.net</a> for more information.</p>

<table><thead>
<tr>
<th>Country</th>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>India</td>
<td>document_id</td>
<td>string(10)</td>
<td>Consumer&#39;s Indian PAN. Must be string with 10 alphanumeric letters. 5 letters, followed by 4 numbers, followed by 1 letter or number. Example: ABCDE1234F</td>
</tr>
<tr>
<td>Turkey</td>
<td>document_id</td>
<td>string(10)</td>
<td>Consumer&#39;s Turkish Identification Number(T.C. Kimlik No.). Must be string between 5 and 20 digits.</td>
</tr>
</tbody></table>
<h1 id='reconcile'>Reconcile</h1>
<p>Reconcile can be used to retrieve data about a transaction. This can be useful if you want to retrieve information about a transaction whose status is timeout, which returned an error or has changed eg. has beed chargebacked.</p>

<p>Reconcile request are handled exactly like transaction requests via XML.</p>
<h2 id='single-transaction'>Single Transaction</h2>
<p>The URL for single transaction reconciling is similar to the processing url:</p>

<p><code>https://username:password@gate.emerchantpay.net/reconcile/TERMINAL-TOKEN</code></p>

<blockquote>
<p>Reconcile By Unique Id  Request</p>
</blockquote>

<pre class="highlight php tab-php"><code><span class="cp">&lt;?php</span>

<span class="c1">// Load the pre-configured ini file...
</span><span class="nx">\Genesis\Config</span><span class="o">::</span><span class="na">loadSettings</span><span class="p">(</span><span class="s1">'/path/to/config.ini'</span><span class="p">);</span>

<span class="nv">$genesis</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Genesis</span><span class="p">(</span><span class="s1">'NonFinancial\Reconcile\Transaction'</span><span class="p">);</span>
<span class="nv">$request</span> <span class="o">=</span> <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">request</span><span class="p">();</span>

<span class="nv">$request</span>
  <span class="o">-&gt;</span><span class="na">setUniqueId</span><span class="p">(</span><span class="s1">'44177a21403427eb96664a6d7e5d5d48'</span><span class="p">);</span>

<span class="k">try</span> <span class="p">{</span>
    <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">execute</span><span class="p">();</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">response</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">getResponseObject</span><span class="p">();</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">\Exception</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$e</span><span class="o">-&gt;</span><span class="na">getMessage</span><span class="p">();</span>
<span class="p">}</span>
</code></pre>

<pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.GenesisClient</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.TransactionResult</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.constants.Endpoints</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.constants.Environments</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.requests.nonfinancial.reconcile.ReconcileRequest</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.model.Transaction</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Configuration</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Country</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Currency</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">GenesisExample</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">()</span>  <span class="o">{</span>

    <span class="c1">// Create configuration</span>
    <span class="n">Configuration</span> <span class="n">configuration</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Configuration</span><span class="o">(</span><span class="n">Environments</span><span class="o">.</span><span class="na">STAGING</span><span class="o">,</span> <span class="n">Endpoints</span><span class="o">.</span><span class="na">EMERCHANTPAY</span><span class="o">);</span>

    <span class="n">configuration</span><span class="o">.</span><span class="na">setUsername</span><span class="o">(</span><span class="s">"SET_YOUR_USERNAME"</span><span class="o">);</span>
    <span class="n">configuration</span><span class="o">.</span><span class="na">setPassword</span><span class="o">(</span><span class="s">"SET_YOUR_PASSWORD"</span><span class="o">);</span>
    <span class="n">configuration</span><span class="o">.</span><span class="na">setToken</span><span class="o">(</span><span class="s">"SET_YOUR_TOKEN"</span><span class="o">);</span>

    <span class="n">ReconcileRequest</span> <span class="n">request</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ReconcileRequest</span><span class="o">();</span>

    <span class="n">request</span><span class="o">.</span><span class="na">setUniqueId</span><span class="o">(</span><span class="s">"44177a21403427eb96664a6d7e5d5d48"</span><span class="o">);</span>

    <span class="n">GenesisClient</span> <span class="n">client</span> <span class="o">=</span> <span class="k">new</span> <span class="n">GenesisClient</span><span class="o">(</span><span class="n">configuration</span><span class="o">,</span> <span class="n">request</span><span class="o">);</span>
    <span class="n">client</span><span class="o">.</span><span class="na">execute</span><span class="o">();</span>

    <span class="c1">// Parse Payment result</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">client</span><span class="o">.</span><span class="na">getResponse</span><span class="o">());</span>

  <span class="o">}</span>
<span class="o">}</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="kd">var</span> <span class="nx">genesis</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'genesis.js/lib/genesis.js'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">transaction</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">genesis</span><span class="p">.</span><span class="nx">transaction</span><span class="p">();</span>

<span class="kd">var</span> <span class="nx">failure</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">reason</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">reason</span><span class="p">);</span>
<span class="p">};</span>

<span class="kd">var</span> <span class="nx">success</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>

<span class="nx">transaction</span><span class="p">.</span><span class="nx">reconcile</span><span class="p">(</span>
  <span class="p">{</span>
    <span class="s2">"unique_id"</span><span class="p">:</span> <span class="s2">"44177a21403427eb96664a6d7e5d5d48"</span>
  <span class="p">}</span>
<span class="p">).</span><span class="nx">send</span><span class="p">()</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">success</span><span class="p">)</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">failure</span><span class="p">);</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>curl https://username:password@gate.emerchantpay.net/reconcile/TERMINAL-TOKEN <span class="se">\</span>
   -H <span class="s2">"Content-Type: text/xml"</span> <span class="se">\</span>
   -d <span class="s1">'
&lt;reconcile&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
&lt;/reconcile&gt;'</span>
</code></pre>

<blockquote>
<p>Reconcile By Transaction Id  Request</p>
</blockquote>

<pre class="highlight php tab-php"><code><span class="cp">&lt;?php</span>

<span class="c1">// Load the pre-configured ini file...
</span><span class="nx">\Genesis\Config</span><span class="o">::</span><span class="na">loadSettings</span><span class="p">(</span><span class="s1">'/path/to/config.ini'</span><span class="p">);</span>

<span class="nv">$genesis</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Genesis</span><span class="p">(</span><span class="s1">'NonFinancial\Reconcile\Transaction'</span><span class="p">);</span>
<span class="nv">$request</span> <span class="o">=</span> <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">request</span><span class="p">();</span>

<span class="nv">$request</span>
  <span class="o">-&gt;</span><span class="na">setTransactionId</span><span class="p">(</span><span class="s1">'merchant-transaction-id-here'</span><span class="p">);</span>

<span class="k">try</span> <span class="p">{</span>
    <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">execute</span><span class="p">();</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">response</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">getResponseObject</span><span class="p">();</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">\Exception</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$e</span><span class="o">-&gt;</span><span class="na">getMessage</span><span class="p">();</span>
<span class="p">}</span>
</code></pre>

<pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.GenesisClient</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.TransactionResult</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.constants.Endpoints</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.constants.Environments</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.requests.nonfinancial.reconcile.ReconcileRequest</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.model.Transaction</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Configuration</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Country</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Currency</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">GenesisExample</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">()</span>  <span class="o">{</span>

    <span class="c1">// Create configuration</span>
    <span class="n">Configuration</span> <span class="n">configuration</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Configuration</span><span class="o">(</span><span class="n">Environments</span><span class="o">.</span><span class="na">STAGING</span><span class="o">,</span> <span class="n">Endpoints</span><span class="o">.</span><span class="na">EMERCHANTPAY</span><span class="o">);</span>

    <span class="n">configuration</span><span class="o">.</span><span class="na">setUsername</span><span class="o">(</span><span class="s">"SET_YOUR_USERNAME"</span><span class="o">);</span>
    <span class="n">configuration</span><span class="o">.</span><span class="na">setPassword</span><span class="o">(</span><span class="s">"SET_YOUR_PASSWORD"</span><span class="o">);</span>
    <span class="n">configuration</span><span class="o">.</span><span class="na">setToken</span><span class="o">(</span><span class="s">"SET_YOUR_TOKEN"</span><span class="o">);</span>

    <span class="n">ReconcileRequest</span> <span class="n">request</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ReconcileRequest</span><span class="o">();</span>

    <span class="n">request</span><span class="o">.</span><span class="na">setTransactionId</span><span class="o">(</span><span class="s">"merchant-transaction-id-here"</span><span class="o">);</span>

    <span class="n">GenesisClient</span> <span class="n">client</span> <span class="o">=</span> <span class="k">new</span> <span class="n">GenesisClient</span><span class="o">(</span><span class="n">configuration</span><span class="o">,</span> <span class="n">request</span><span class="o">);</span>
    <span class="n">client</span><span class="o">.</span><span class="na">execute</span><span class="o">();</span>

    <span class="c1">// Parse Payment result</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">client</span><span class="o">.</span><span class="na">getResponse</span><span class="o">());</span>

  <span class="o">}</span>
<span class="o">}</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="kd">var</span> <span class="nx">genesis</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'genesis.js/lib/genesis.js'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">transaction</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">genesis</span><span class="p">.</span><span class="nx">transaction</span><span class="p">();</span>

<span class="kd">var</span> <span class="nx">failure</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">reason</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">reason</span><span class="p">);</span>
<span class="p">};</span>

<span class="kd">var</span> <span class="nx">success</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>

<span class="nx">transaction</span><span class="p">.</span><span class="nx">reconcile</span><span class="p">(</span>
  <span class="p">{</span>
    <span class="s2">"transaction_id"</span><span class="p">:</span> <span class="s2">"merchant-transaction-id-here"</span>
  <span class="p">}</span>
<span class="p">).</span><span class="nx">send</span><span class="p">()</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">success</span><span class="p">)</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">failure</span><span class="p">);</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>curl https://username:password@gate.emerchantpay.net/reconcile/TERMINAL-TOKEN <span class="se">\</span>
   -H <span class="s2">"Content-Type: text/xml"</span> <span class="se">\</span>
   -d <span class="s1">'
&lt;reconcile&gt;
  &lt;transaction_id&gt;merchant-transaction-id-here&lt;/transaction_id&gt;
&lt;/reconcile&gt;'</span>
</code></pre>

<p><strong>XML Request to reconcile:</strong></p>

<p>Note that reconcile can be done via either unique_id or transaction_id</p>

<p><strong>XML Response:</strong></p>

<p>Response is a standard payment response like it would be returned by any transaction. It can have either state as shown in the states section.</p>

<blockquote>
<p>Successful Sale Transaction Reconciliation Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>stdClass Object
(
    [transaction_type] =&gt; sale
    [status] =&gt; approved
    [authorization_code] =&gt; 005645
    [response_code] =&gt; 00
    [unique_id] =&gt; 44177a21403427eb96664a6d7e5d5d48
    [transaction_id] =&gt; 119643250547501c79d8295
    [mode] =&gt; live
    [timestamp] =&gt; 2019-03-14T12:06:03Z
    [descriptor] =&gt; Descriptor one
    [amount] =&gt; 9000
    [currency] =&gt; USD
    [card_brand] =&gt; visa
    [card_number] =&gt; 420000...0000
    [sent_to_acquirer] =&gt; true
)
</code></pre>

<pre class="highlight java tab-java"><code><span class="o">&lt;</span><span class="n">payment_response</span> <span class="n">content</span><span class="o">=[</span>
    <span class="o">&lt;</span><span class="n">transaction_type</span> <span class="n">content</span><span class="o">=[</span><span class="n">sale</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">status</span> <span class="n">content</span><span class="o">=[</span><span class="n">approved</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">authorization_code</span> <span class="n">content</span><span class="o">=[</span><span class="mo">005645</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">response_code</span> <span class="n">content</span><span class="o">=[</span><span class="mo">00</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">unique_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">44177</span><span class="n">a21403427eb96664a6d7e5d5d48</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">transaction_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">119643250547501</span><span class="n">c79d8295</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">mode</span> <span class="n">content</span><span class="o">=[</span><span class="n">live</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">timestamp</span> <span class="n">content</span><span class="o">=[</span><span class="mi">2019</span><span class="o">-</span><span class="mo">03</span><span class="o">-</span><span class="mi">14</span><span class="nl">T12:</span><span class="mo">06</span><span class="o">:</span><span class="mo">03</span><span class="n">Z</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">descriptor</span> <span class="n">content</span><span class="o">=[</span><span class="n">Descriptor</span> <span class="n">one</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">amount</span> <span class="n">content</span><span class="o">=[</span><span class="mi">9000</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">currency</span> <span class="n">content</span><span class="o">=[</span><span class="n">USD</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">card_brand</span> <span class="n">content</span><span class="o">=[</span><span class="n">visa</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">card_number</span> <span class="n">content</span><span class="o">=[</span><span class="mi">420000</span><span class="o">...</span><span class="mo">0000</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">sent_to_acquirer</span> <span class="n">content</span><span class="o">=[</span><span class="kc">true</span><span class="o">]&gt;</span>
<span class="o">]&gt;</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="p">{</span>
    <span class="nl">transaction_type</span><span class="p">:</span> <span class="s2">"sale"</span><span class="p">,</span>
    <span class="nx">status</span><span class="p">:</span> <span class="s2">"approved"</span><span class="p">,</span>
    <span class="nx">authorization_code</span><span class="p">:</span> <span class="s2">"005645"</span><span class="p">,</span>
    <span class="nx">response_code</span><span class="p">:</span> <span class="s2">"00"</span><span class="p">,</span>
    <span class="nx">unique_id</span><span class="p">:</span> <span class="s2">"44177a21403427eb96664a6d7e5d5d48"</span><span class="p">,</span>
    <span class="nx">transaction_id</span><span class="p">:</span> <span class="s2">"119643250547501c79d8295"</span><span class="p">,</span>
    <span class="nx">mode</span><span class="p">:</span> <span class="s2">"live"</span><span class="p">,</span>
    <span class="nx">timestamp</span><span class="p">:</span> <span class="s2">"2019-03-14T12:06:03Z"</span><span class="p">,</span>
    <span class="nx">descriptor</span><span class="p">:</span> <span class="s2">"Descriptor one"</span><span class="p">,</span>
    <span class="nx">amount</span><span class="p">:</span> <span class="s2">"9000"</span><span class="p">,</span>
    <span class="nx">currency</span><span class="p">:</span> <span class="s2">"USD"</span><span class="p">,</span>
    <span class="nx">card_brand</span><span class="p">:</span> <span class="s2">"visa"</span><span class="p">,</span>
    <span class="nx">card_number</span><span class="p">:</span> <span class="s2">"420000...0000"</span><span class="p">,</span>
    <span class="nx">sent_to_acquirer</span><span class="p">:</span> <span class="s2">"true"</span><span class="p">,</span>
<span class="p">}</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_response&gt;
  &lt;transaction_type&gt;sale&lt;/transaction_type&gt;
  &lt;status&gt;approved&lt;/status&gt;
  &lt;authorization_code&gt;005645&lt;/authorization_code&gt;
  &lt;response_code&gt;00&lt;/response_code&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;transaction_id&gt;119643250547501c79d8295&lt;/transaction_id&gt;
  &lt;mode&gt;live&lt;/mode&gt;
  &lt;timestamp&gt;2019-03-14T12:06:03Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;amount&gt;9000&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
  &lt;card_brand&gt;visa&lt;/card_brand&gt;
  &lt;card_number&gt;420000...0000&lt;/card_number&gt;
  &lt;sent_to_acquirer&gt;true&lt;/sent_to_acquirer&gt;
&lt;/payment_response&gt;
</code></pre>

<aside class="notice" >
Card brand and card number will be available in response only for card transaction types.
</aside>

<blockquote>
<p>Successful Refund Transaction Reconciliation Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>stdClass Object
(
    [transaction_type] =&gt; refund
    [status] =&gt; approved
    [authorization_code] =&gt; 005645
    [response_code] =&gt; 00
    [unique_id] =&gt; 5de39380bf7ac7e1fc31cbd7805dc0ec
    [transaction_id] =&gt; 119643250547501c79d8295
    [mode] =&gt; live
    [timestamp] =&gt; 2019-03-14T12:06:03Z
    [descriptor] =&gt; Descriptor one
    [amount] =&gt; 9000
    [currency] =&gt; USD
    [card_brand] =&gt; visa
    [card_number] =&gt; 420000...0000
    [sent_to_acquirer] =&gt; true
    [reference_transaction_unique_id] =&gt; 44177a21403427eb96664a6d7e5d5d48
)
</code></pre>

<pre class="highlight java tab-java"><code><span class="o">&lt;</span><span class="n">payment_response</span> <span class="n">content</span><span class="o">=[</span>
    <span class="o">&lt;</span><span class="n">transaction_type</span> <span class="n">content</span><span class="o">=[</span><span class="n">refund</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">status</span> <span class="n">content</span><span class="o">=[</span><span class="n">approved</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">authorization_code</span> <span class="n">content</span><span class="o">=[</span><span class="mo">005645</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">response_code</span> <span class="n">content</span><span class="o">=[</span><span class="mo">00</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">unique_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">5</span><span class="n">de39380bf7ac7e1fc31cbd7805dc0ec</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">transaction_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">119643250547501</span><span class="n">c79d8295</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">mode</span> <span class="n">content</span><span class="o">=[</span><span class="n">live</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">timestamp</span> <span class="n">content</span><span class="o">=[</span><span class="mi">2019</span><span class="o">-</span><span class="mo">03</span><span class="o">-</span><span class="mi">14</span><span class="nl">T12:</span><span class="mo">06</span><span class="o">:</span><span class="mo">03</span><span class="n">Z</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">descriptor</span> <span class="n">content</span><span class="o">=[</span><span class="n">Descriptor</span> <span class="n">one</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">amount</span> <span class="n">content</span><span class="o">=[</span><span class="mi">9000</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">currency</span> <span class="n">content</span><span class="o">=[</span><span class="n">USD</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">card_brand</span> <span class="n">content</span><span class="o">=[</span><span class="n">visa</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">card_number</span> <span class="n">content</span><span class="o">=[</span><span class="mi">420000</span><span class="o">...</span><span class="mo">0000</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">sent_to_acquirer</span> <span class="n">content</span><span class="o">=[</span><span class="kc">true</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">reference_transaction_unique_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">44177</span><span class="n">a21403427eb96664a6d7e5d5d48</span><span class="o">]&gt;</span>
<span class="o">]&gt;</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="p">{</span>
    <span class="nl">transaction_type</span><span class="p">:</span> <span class="s2">"refund"</span><span class="p">,</span>
    <span class="nx">status</span><span class="p">:</span> <span class="s2">"approved"</span><span class="p">,</span>
    <span class="nx">authorization_code</span><span class="p">:</span> <span class="s2">"005645"</span><span class="p">,</span>
    <span class="nx">response_code</span><span class="p">:</span> <span class="s2">"00"</span><span class="p">,</span>
    <span class="nx">unique_id</span><span class="p">:</span> <span class="s2">"5de39380bf7ac7e1fc31cbd7805dc0ec"</span><span class="p">,</span>
    <span class="nx">transaction_id</span><span class="p">:</span> <span class="s2">"119643250547501c79d8295"</span><span class="p">,</span>
    <span class="nx">mode</span><span class="p">:</span> <span class="s2">"live"</span><span class="p">,</span>
    <span class="nx">timestamp</span><span class="p">:</span> <span class="s2">"2019-03-14T12:06:03Z"</span><span class="p">,</span>
    <span class="nx">descriptor</span><span class="p">:</span> <span class="s2">"Descriptor one"</span><span class="p">,</span>
    <span class="nx">amount</span><span class="p">:</span> <span class="s2">"9000"</span><span class="p">,</span>
    <span class="nx">currency</span><span class="p">:</span> <span class="s2">"USD"</span><span class="p">,</span>
    <span class="nx">card_brand</span><span class="p">:</span> <span class="s2">"visa"</span><span class="p">,</span>
    <span class="nx">card_number</span><span class="p">:</span> <span class="s2">"420000...0000"</span><span class="p">,</span>
    <span class="nx">sent_to_acquirer</span><span class="p">:</span> <span class="s2">"true"</span><span class="p">,</span>
    <span class="nx">reference_transaction_unique_id</span><span class="p">:</span> <span class="s2">"44177a21403427eb96664a6d7e5d5d48"</span><span class="p">,</span>
<span class="p">}</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;payment_response&gt;
  &lt;transaction_type&gt;refund&lt;/transaction_type&gt;
  &lt;status&gt;approved&lt;/status&gt;
  &lt;authorization_code&gt;005645&lt;/authorization_code&gt;
  &lt;response_code&gt;00&lt;/response_code&gt;
  &lt;unique_id&gt;5de39380bf7ac7e1fc31cbd7805dc0ec&lt;/unique_id&gt;
  &lt;transaction_id&gt;119643250547501c79d8295&lt;/transaction_id&gt;
  &lt;mode&gt;live&lt;/mode&gt;
  &lt;timestamp&gt;2019-03-14T12:06:03Z&lt;/timestamp&gt;
  &lt;descriptor&gt;Descriptor one&lt;/descriptor&gt;
  &lt;amount&gt;9000&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
  &lt;card_brand&gt;visa&lt;/card_brand&gt;
  &lt;card_number&gt;420000...0000&lt;/card_number&gt;
  &lt;sent_to_acquirer&gt;true&lt;/sent_to_acquirer&gt;
  &lt;reference_transaction_unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/reference_transaction_unique_id&gt;
&lt;/payment_response&gt;
</code></pre>

<aside class="notice" >
The reference transaction unique id is also returned when a reference-based transaction has been queried via the Reconcile API.
</aside>
<h2 id='by-date-range'>By date range</h2>
<p>Date range based reconciliation allows you to fetch information for all payment transactions from a terminal within a given date range. The response is paginated, each request will return 100 entries max.</p>

<p>The URL for date range reconciling is:</p>

<p><code>https://username:password@gate.emerchantpay.net/reconcile/by_date/TERMINAL-TOKEN</code></p>

<blockquote>
<p>Reconcile By Date  Request</p>
</blockquote>

<pre class="highlight php tab-php"><code><span class="cp">&lt;?php</span>

<span class="c1">// Load the pre-configured ini file...
</span><span class="nx">\Genesis\Config</span><span class="o">::</span><span class="na">loadSettings</span><span class="p">(</span><span class="s1">'/path/to/config.ini'</span><span class="p">);</span>

<span class="nv">$genesis</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Genesis</span><span class="p">(</span><span class="s1">'NonFinancial\Reconcile\DateRange'</span><span class="p">);</span>
<span class="nv">$request</span> <span class="o">=</span> <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">request</span><span class="p">();</span>

<span class="nv">$request</span>
  <span class="o">-&gt;</span><span class="na">setStartDate</span><span class="p">(</span><span class="s1">'2014-01-01'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setEndDate</span><span class="p">(</span><span class="s1">'2014-01-31'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setPage</span><span class="p">(</span><span class="s1">'2'</span><span class="p">);</span>

<span class="k">try</span> <span class="p">{</span>
    <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">execute</span><span class="p">();</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">response</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">getResponseObject</span><span class="p">();</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">\Exception</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$e</span><span class="o">-&gt;</span><span class="na">getMessage</span><span class="p">();</span>
<span class="p">}</span>
</code></pre>

<pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.GenesisClient</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.TransactionResult</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.constants.Endpoints</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.constants.Environments</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.requests.nonfinancial.reconcile.ReconcileByDate</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.model.Transaction</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Configuration</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Country</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Currency</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">GenesisExample</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">()</span>  <span class="o">{</span>

    <span class="c1">// Create configuration</span>
    <span class="n">Configuration</span> <span class="n">configuration</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Configuration</span><span class="o">(</span><span class="n">Environments</span><span class="o">.</span><span class="na">STAGING</span><span class="o">,</span> <span class="n">Endpoints</span><span class="o">.</span><span class="na">EMERCHANTPAY</span><span class="o">);</span>

    <span class="n">configuration</span><span class="o">.</span><span class="na">setUsername</span><span class="o">(</span><span class="s">"SET_YOUR_USERNAME"</span><span class="o">);</span>
    <span class="n">configuration</span><span class="o">.</span><span class="na">setPassword</span><span class="o">(</span><span class="s">"SET_YOUR_PASSWORD"</span><span class="o">);</span>
    <span class="n">configuration</span><span class="o">.</span><span class="na">setToken</span><span class="o">(</span><span class="s">"SET_YOUR_TOKEN"</span><span class="o">);</span>

    <span class="n">ReconcileByDate</span> <span class="n">request</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ReconcileByDate</span><span class="o">();</span>

    <span class="n">request</span><span class="o">.</span><span class="na">setStartDate</span><span class="o">(</span><span class="s">"2014-01-01"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setEndDate</span><span class="o">(</span><span class="s">"2014-01-31"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setPage</span><span class="o">(</span><span class="s">"2"</span><span class="o">);</span>

    <span class="n">GenesisClient</span> <span class="n">client</span> <span class="o">=</span> <span class="k">new</span> <span class="n">GenesisClient</span><span class="o">(</span><span class="n">configuration</span><span class="o">,</span> <span class="n">request</span><span class="o">);</span>
    <span class="n">client</span><span class="o">.</span><span class="na">execute</span><span class="o">();</span>

    <span class="c1">// Parse Payment result</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">client</span><span class="o">.</span><span class="na">getResponse</span><span class="o">());</span>

  <span class="o">}</span>
<span class="o">}</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="kd">var</span> <span class="nx">genesis</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'genesis.js/lib/genesis.js'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">transaction</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">genesis</span><span class="p">.</span><span class="nx">transaction</span><span class="p">();</span>

<span class="kd">var</span> <span class="nx">failure</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">reason</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">reason</span><span class="p">);</span>
<span class="p">};</span>

<span class="kd">var</span> <span class="nx">success</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>

<span class="nx">transaction</span><span class="p">.</span><span class="nx">reconcile_by_date</span><span class="p">(</span>
  <span class="p">{</span>
    <span class="s2">"start_date"</span><span class="p">:</span> <span class="s2">"2014-01-01"</span><span class="p">,</span>
    <span class="s2">"end_date"</span><span class="p">:</span> <span class="s2">"2014-01-31"</span><span class="p">,</span>
    <span class="s2">"page"</span><span class="p">:</span> <span class="mi">2</span>
  <span class="p">}</span>
<span class="p">).</span><span class="nx">send</span><span class="p">()</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">success</span><span class="p">)</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">failure</span><span class="p">);</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>curl https://username:password@gate.emerchantpay.net/reconcile/by_date/TERMINAL-TOKEN <span class="se">\</span>
   -H <span class="s2">"Content-Type: text/xml"</span> <span class="se">\</span>
   -d <span class="s1">'
&lt;reconcile&gt;
  &lt;start_date&gt;2014-01-01&lt;/start_date&gt;
  &lt;end_date&gt;2014-01-31&lt;/end_date&gt;
  &lt;page&gt;2&lt;/page&gt;
&lt;/reconcile&gt;'</span>
</code></pre>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>start_date</td>
<td>required</td>
<td>yyyy-mm-dd</td>
<td>start of the requested date range</td>
</tr>
<tr>
<td>end_date</td>
<td>optional</td>
<td>yyyy-mm-dd</td>
<td>end of the requested date range</td>
</tr>
<tr>
<td>page</td>
<td>optional</td>
<td>integer the page within the paginated result, defaults to 1</td>
<td></td>
</tr>
</tbody></table>

<p><strong>Response:</strong></p>

<p>The attributes in the root node payment responses includes information about the pagination of the response.</p>
<pre class="highlight xml tab-xml"><code><span class="cp">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="nt">&lt;payment_responses</span> <span class="na">per_page=</span><span class="s">"100"</span> <span class="na">page=</span><span class="s">"2"</span> <span class="na">total_count=</span><span class="s">"19"</span> <span class="na">pages_count=</span><span class="s">"7"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;payment_response&gt;</span>
    <span class="nt">&lt;transaction_type&gt;</span>sale<span class="nt">&lt;/transaction_type&gt;</span>
    <span class="nt">&lt;status&gt;</span>approved<span class="nt">&lt;/status&gt;</span>
    <span class="nt">&lt;authorization_code&gt;</span>005645<span class="nt">&lt;/authorization_code&gt;</span>
    <span class="nt">&lt;response_code&gt;</span>00<span class="nt">&lt;/response_code&gt;</span>
    <span class="nt">&lt;unique_id&gt;</span>130319cfb3bf65ff3c4a4045487b174f<span class="nt">&lt;/unique_id&gt;</span>
    <span class="nt">&lt;transaction_id&gt;</span>EFBFBC7D-82CD-4375-9A69-15F19C88A134<span class="nt">&lt;/transaction_id&gt;</span>
    <span class="nt">&lt;technical_message&gt;</span>Transaction successful!<span class="nt">&lt;/technical_message&gt;</span>
    <span class="nt">&lt;message&gt;</span>Transaction successful!<span class="nt">&lt;/message&gt;</span>
    <span class="nt">&lt;mode&gt;</span>live<span class="nt">&lt;/mode&gt;</span>
    <span class="nt">&lt;timestamp&gt;</span>2014-01-03T15:04:00Z<span class="nt">&lt;/timestamp&gt;</span>
    <span class="nt">&lt;descriptor&gt;</span>descriptor one<span class="nt">&lt;/descriptor&gt;</span>
    <span class="nt">&lt;amount&gt;</span>500<span class="nt">&lt;/amount&gt;</span>
    <span class="nt">&lt;currency&gt;</span>USD<span class="nt">&lt;/currency&gt;</span>
    <span class="nt">&lt;card_brand&gt;</span>visa<span class="nt">&lt;/card_brand&gt;</span>
    <span class="nt">&lt;card_number&gt;</span>420000...0000<span class="nt">&lt;/card_number&gt;</span>
    <span class="nt">&lt;sent_to_acquirer&gt;</span>true<span class="nt">&lt;/sent_to_acquirer&gt;</span>
  <span class="nt">&lt;/payment_response&gt;</span>
  <span class="nt">&lt;payment_response&gt;</span>
    <span class="nt">&lt;transaction_type&gt;</span>sale<span class="nt">&lt;/transaction_type&gt;</span>
    <span class="nt">&lt;status&gt;</span>approved<span class="nt">&lt;/status&gt;</span>
    <span class="nt">&lt;authorization_code&gt;</span>638745<span class="nt">&lt;/authorization_code&gt;</span>
    <span class="nt">&lt;response_code&gt;</span>00<span class="nt">&lt;/response_code&gt;</span>
    <span class="nt">&lt;unique_id&gt;</span>130319cfb3bf65ff3c4a4045487b173f<span class="nt">&lt;/unique_id&gt;</span>
    <span class="nt">&lt;transaction_id&gt;</span>BBD7945B-BE57-4A14-A7FB-47F7AE928D95<span class="nt">&lt;/transaction_id&gt;</span>
    <span class="nt">&lt;technical_message&gt;</span>Transaction successful!<span class="nt">&lt;/technical_message&gt;</span>
    <span class="nt">&lt;message&gt;</span>Transaction successful!<span class="nt">&lt;/message&gt;</span>
    <span class="nt">&lt;mode&gt;</span>live<span class="nt">&lt;/mode&gt;</span>
    <span class="nt">&lt;timestamp&gt;</span>2014-01-05T15:04:00Z<span class="nt">&lt;/timestamp&gt;</span>
    <span class="nt">&lt;descriptor&gt;</span>descriptor one<span class="nt">&lt;/descriptor&gt;</span>
    <span class="nt">&lt;amount&gt;</span>500<span class="nt">&lt;/amount&gt;</span>
    <span class="nt">&lt;currency&gt;</span>USD<span class="nt">&lt;/currency&gt;</span>
    <span class="nt">&lt;card_brand&gt;</span>visa<span class="nt">&lt;/card_brand&gt;</span>
    <span class="nt">&lt;card_number&gt;</span>420000...0000<span class="nt">&lt;/card_number&gt;</span>
    <span class="nt">&lt;sent_to_acquirer&gt;</span>true<span class="nt">&lt;/sent_to_acquirer&gt;</span>
  <span class="nt">&lt;/payment_response&gt;</span>
  <span class="nt">&lt;payment_response&gt;</span>
    <span class="nt">&lt;transaction_type&gt;</span>sale<span class="nt">&lt;/transaction_type&gt;</span>
    <span class="nt">&lt;status&gt;</span>approved<span class="nt">&lt;/status&gt;</span>
    <span class="nt">&lt;authorization_code&gt;</span>226534<span class="nt">&lt;/authorization_code&gt;</span>
    <span class="nt">&lt;response_code&gt;</span>00<span class="nt">&lt;/response_code&gt;</span>
    <span class="nt">&lt;unique_id&gt;</span>1e8a6f09253eb8b4f8c84c0d8803713e<span class="nt">&lt;/unique_id&gt;</span>
    <span class="nt">&lt;transaction_id&gt;</span>_5041_2013041012_22_10_545<span class="nt">&lt;/transaction_id&gt;</span>
    <span class="nt">&lt;technical_message&gt;</span>Transaction successful!<span class="nt">&lt;/technical_message&gt;</span>
    <span class="nt">&lt;message&gt;</span>Transaction successful!<span class="nt">&lt;/message&gt;</span>
    <span class="nt">&lt;mode&gt;</span>live<span class="nt">&lt;/mode&gt;</span>
    <span class="nt">&lt;timestamp&gt;</span>2013-01-09T10:22:13Z<span class="nt">&lt;/timestamp&gt;</span>
    <span class="nt">&lt;descriptor&gt;</span>test_descriptor<span class="nt">&lt;/descriptor&gt;</span>
    <span class="nt">&lt;amount&gt;</span>50422<span class="nt">&lt;/amount&gt;</span>
    <span class="nt">&lt;currency&gt;</span>EUR<span class="nt">&lt;/currency&gt;</span>
    <span class="nt">&lt;card_brand&gt;</span>visa<span class="nt">&lt;/card_brand&gt;</span>
    <span class="nt">&lt;card_number&gt;</span>420000...0000<span class="nt">&lt;/card_number&gt;</span>
    <span class="nt">&lt;sent_to_acquirer&gt;</span>true<span class="nt">&lt;/sent_to_acquirer&gt;</span>
  <span class="nt">&lt;/payment_response&gt;</span>
  <span class="nt">&lt;payment_response&gt;</span>
    <span class="nt">&lt;transaction_type&gt;</span>sale3d<span class="nt">&lt;/transaction_type&gt;</span>
    <span class="nt">&lt;status&gt;</span>pending_async<span class="nt">&lt;/status&gt;</span>
    <span class="nt">&lt;unique_id&gt;</span>5dbdb4c677ee16b8fb1e43483164be2c<span class="nt">&lt;/unique_id&gt;</span>
    <span class="nt">&lt;transaction_id&gt;</span>_6547_2013041012_23_08_470<span class="nt">&lt;/transaction_id&gt;</span>
    <span class="nt">&lt;technical_message&gt;</span>Transaction successful!<span class="nt">&lt;/technical_message&gt;</span>
    <span class="nt">&lt;message&gt;</span>Transaction successful!<span class="nt">&lt;/message&gt;</span>
    <span class="nt">&lt;redirect_url&gt;</span>https://gate.emerchantpay.net/redirect/to_acquirer/5dbdb4c677<span class="nt">&lt;/redirect_url&gt;</span>
    <span class="nt">&lt;mode&gt;</span>live<span class="nt">&lt;/mode&gt;</span>
    <span class="nt">&lt;timestamp&gt;</span>2014-01-10T10:23:10Z<span class="nt">&lt;/timestamp&gt;</span>
    <span class="nt">&lt;descriptor&gt;</span>test_descriptor<span class="nt">&lt;/descriptor&gt;</span>
    <span class="nt">&lt;amount&gt;</span>100<span class="nt">&lt;/amount&gt;</span>
    <span class="nt">&lt;currency&gt;</span>EUR<span class="nt">&lt;/currency&gt;</span>
    <span class="nt">&lt;card_brand&gt;</span>visa<span class="nt">&lt;/card_brand&gt;</span>
    <span class="nt">&lt;card_number&gt;</span>471110...0000<span class="nt">&lt;/card_number&gt;</span>
    <span class="nt">&lt;sent_to_acquirer&gt;</span>true<span class="nt">&lt;/sent_to_acquirer&gt;</span>
  <span class="nt">&lt;/payment_response&gt;</span>
  <span class="nt">&lt;payment_response&gt;</span>
    <span class="nt">&lt;transaction_type&gt;</span>refund<span class="nt">&lt;/transaction_type&gt;</span>
    <span class="nt">&lt;status&gt;</span>approved<span class="nt">&lt;/status&gt;</span>
    <span class="nt">&lt;authorization_code&gt;</span>005645<span class="nt">&lt;/authorization_code&gt;</span>
    <span class="nt">&lt;response_code&gt;</span>00<span class="nt">&lt;/response_code&gt;</span>
    <span class="nt">&lt;unique_id&gt;</span>44177a21403427eb96664a6d7e5d5d49<span class="nt">&lt;/unique_id&gt;</span>
    <span class="nt">&lt;transaction_id&gt;</span>119643250547501c79d8296<span class="nt">&lt;/transaction_id&gt;</span>
    <span class="nt">&lt;technical_message&gt;</span>Transaction successful!<span class="nt">&lt;/technical_message&gt;</span>
    <span class="nt">&lt;message&gt;</span>Transaction successful!<span class="nt">&lt;/message&gt;</span>
    <span class="nt">&lt;mode&gt;</span>test<span class="nt">&lt;/mode&gt;</span>
    <span class="nt">&lt;timestamp&gt;</span>2014-01-30T14:21:48Z<span class="nt">&lt;/timestamp&gt;</span>
    <span class="nt">&lt;descriptor&gt;</span>descriptor one<span class="nt">&lt;/descriptor&gt;</span>
    <span class="nt">&lt;amount&gt;</span>9000<span class="nt">&lt;/amount&gt;</span>
    <span class="nt">&lt;currency&gt;</span>USD<span class="nt">&lt;/currency&gt;</span>
    <span class="nt">&lt;sent_to_acquirer&gt;</span>true<span class="nt">&lt;/sent_to_acquirer&gt;</span>
    <span class="nt">&lt;reference_transaction_unique_id&gt;</span>44177a21403427eb96664a6d7e5d5d48<span class="nt">&lt;/reference_transaction_unique_id&gt;</span>
   <span class="nt">&lt;/payment_response&gt;</span>
  ...
<span class="nt">&lt;/payment_responses&gt;</span>
</code></pre>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>@per_page</td>
<td>integer</td>
<td>number of entries per page</td>
</tr>
<tr>
<td>@page</td>
<td>integer</td>
<td>the current page</td>
</tr>
<tr>
<td>@total_count</td>
<td>integer</td>
<td>total number of all entries</td>
</tr>
<tr>
<td>@pages_count</td>
<td>integer</td>
<td>total number of pages</td>
</tr>
</tbody></table>
<h1 id='chargebacks'>Chargebacks</h1>
<p>Chargebacks are a special type of transactions as they cannot be triggered by the merchant. Charge- backs occur if a customer disputes to an item of his credit card bill at his issuing bank and the bank requests a chargeback. In this case, the amount is automatically refunded to the customers cc account and deducted from your merchant account.</p>

<p>Customers who initiate chargebacks will automatically be blocked for future transactions. For details, please contact our <a href="mailto:risk@emerchantpay.com">Risk team</a>.</p>

<p>You can see also see a chargeback overview in the merchant console under the Risk Management menu.</p>
<h3 id='chargeback-notifications'>Chargeback notifications</h3>
<p>You now have the option to receive API and/or email notifications for each chargeback event that occurs - e.g. for first chargebacks, second chargebacks, and representments. Enable this feature by emailing the IT Support team at <a href="mailto:tech-support@emerchantpay.net">tech-support@emerchantpay.net</a> with the chargeback notification URL if needed.</p>

<p>The email notifications are sent to the merchant user with role ’admin’ which is configured for managing the merchant entity on the gateway platform. The API notifications are equal to <a href="#notification-for-asynchronous-payments">Notifcation for asynchronous payments</a>, please refer to the section <a href="#notification-for-asynchronous-payments">Notifcation for asynchronous payments</a> to understand how notifications work.</p>

<blockquote>
<p>Chargeback Notification Example</p>
</blockquote>
<pre class="highlight plaintext"><code>?transaction_id=343d9040a671c45832ee5381860e2996
&amp;terminal_token=f4266042a6131b666060beb75691341d78ee5b4f
&amp;unique_id=57ff74d1ca8727f59f243de6d01ff027
&amp;transaction_type=sale
&amp;status=chargebacked
&amp;signature=ab4348afa9830834df90069646e4ce66c39a5358
&amp;amount=100
&amp;event=chargeback
</code></pre><h3 id='chargeback-api'>Chargeback API</h3>
<p>The Chargeback API can be used to retrieve data about chargebacks.</p>
<h3 id='single-chargeback'>Single Chargeback</h3>
<p>Single chargeback retrieval allows to get a certain chargeback by  passing the unique ID of the original transaction.</p>
<pre class="highlight xml tab-xml"><code><span class="cp">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="nt">&lt;chargeback_request&gt;</span>
  <span class="nt">&lt;original_transaction_unique_id&gt;</span>53b1f5eacc9e4d3a3afebb4e993fe962<span class="nt">&lt;/original_transaction_unique_id&gt;</span>
<span class="nt">&lt;/chargeback_request&gt;</span>
</code></pre>
<p>The URLs for the single chargeback API are:</p>

<p>Production:
<code>https://gate.emerchantpay.net/chargebacks</code></p>

<p>Staging (for integration):
<code>https://staging.gate.emerchantpay.net/chargebacks</code></p>

<p><br><br><br><br><br><br><br><br><br></p>
<pre class="highlight xml tab-xml"><code><span class="cp">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="nt">&lt;chargeback_response&gt;</span>
  <span class="nt">&lt;type&gt;</span>1st Chargeback <span class="nt">&lt;/type&gt;</span>
  <span class="nt">&lt;post_date&gt;</span>2014-01-24<span class="nt">&lt;/post_date&gt;</span>
  <span class="nt">&lt;reason_code&gt;</span>4855<span class="nt">&lt;/reason_code&gt;</span>
  <span class="nt">&lt;reason_description&gt;</span>Non-receipt of merchandise<span class="nt">&lt;/reason_description&gt;</span>
  <span class="nt">&lt;authorization_code&gt;</span>811714<span class="nt">&lt;/authorization_code&gt;</span>
  <span class="nt">&lt;amount&gt;</span>-14625<span class="nt">&lt;/amount&gt;</span>
  <span class="nt">&lt;currency&gt;</span>USD<span class="nt">&lt;/currency&gt;</span>
  <span class="nt">&lt;chargeback_amount&gt;</span>300.0<span class="nt">&lt;/chargeback_amount&gt;</span>
  <span class="nt">&lt;chargeback_currency&gt;</span>EUR<span class="nt">&lt;/chargeback_currency&gt;</span>
  <span class="nt">&lt;card_number&gt;</span>554960******5069<span class="nt">&lt;/card_number&gt;</span>
  <span class="nt">&lt;card_brand&gt;</span>master<span class="nt">&lt;/card_brand&gt;</span>
  <span class="nt">&lt;customer_email&gt;</span>jonh_doe@example.com<span class="nt">&lt;/customer_email&gt;</span>
  <span class="nt">&lt;customer_phone&gt;</span>3598851248512<span class="nt">&lt;/customer_phone&gt;</span>
  <span class="nt">&lt;transaction_type&gt;</span>sale3d<span class="nt">&lt;/transaction_type&gt;</span>
  <span class="nt">&lt;original_transaction_unique_id&gt;</span>f9634ec5e7dbe6ca3871974accb875cd<span class="nt">&lt;/original_transaction_unique_id&gt;</span>
<span class="nt">&lt;/chargeback_response&gt;</span>
</code></pre>
<p><strong>Response parameters:</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>type</td>
<td>string</td>
<td>The chargeback type. See chargeback types for details</td>
</tr>
<tr>
<td>post_date</td>
<td>string</td>
<td>The date of the chargeback</td>
</tr>
<tr>
<td>reason_code</td>
<td>string</td>
<td>Reason code of the chargeback</td>
</tr>
<tr>
<td>reason_description</td>
<td>string</td>
<td>Reason description of the chargeback</td>
</tr>
<tr>
<td>authorization_code</td>
<td>string</td>
<td>Authorization code of the chargeback’s transac- tion</td>
</tr>
<tr>
<td>amount</td>
<td>float</td>
<td>Amount in the cardholder account currency. Amount can be negative for: 1st chargeback, 2nd chargeback, transfer reversal and positive for all other types.</td>
</tr>
<tr>
<td>currency</td>
<td>string(3)</td>
<td>Currency of the cardholder account. See ISO 4217</td>
</tr>
<tr>
<td>chargeback_amount</td>
<td>float</td>
<td>The amount in the chargeback’s transaction currency.</td>
</tr>
<tr>
<td>chargeback_currency</td>
<td>string(3)</td>
<td>The currency of the chargeback’s transaction. See ISO 4217</td>
</tr>
<tr>
<td>card_number</td>
<td>string</td>
<td>Card number used for the chargeback’s transaction</td>
</tr>
<tr>
<td>card_brand</td>
<td>string</td>
<td>Card brand of the card number</td>
</tr>
<tr>
<td>customer_email</td>
<td>string</td>
<td>The email of the cardholder</td>
</tr>
<tr>
<td>customer_phone</td>
<td>integer</td>
<td>The phone of the cardholder</td>
</tr>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>The type of the chargeback’s transaction</td>
</tr>
<tr>
<td>original_transaction_unique_id</td>
<td>string</td>
<td>The unique id of the chargeback’s transaction</td>
</tr>
</tbody></table>
<pre class="highlight xml tab-xml"><code><span class="cp">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="nt">&lt;chargeback_response&gt;</span>
  <span class="nt">&lt;technical_message&gt;</span>Chargeback by the given criteria cannot be found!<span class="nt">&lt;/technical_message&gt;</span>
  <span class="nt">&lt;status&gt;</span>error<span class="nt">&lt;/status&gt;</span>
  <span class="nt">&lt;message&gt;</span>Chargeback not found!<span class="nt">&lt;/message&gt;</span>
  <span class="nt">&lt;code&gt;</span>470<span class="nt">&lt;/code&gt;</span>
<span class="nt">&lt;/chargeback_response&gt;</span>
</code></pre>
<p>In case no chargeback is found the given ARN or unique ID, a corresponding XML response is as follows:</p>
<h3 id='by-date-range-2'>By date range</h3>
<p>Date range based chargeback retrieval allows you to fetch information for all chargebacks for a given merchant within a given date range. Date range searches for chargebacks by their posting date. The response is paginated, each request will return 100 entries max.</p>

<p>The URLs for date range chargeback retrieval are:</p>

<p>Production:
<code>https://gate.emerchantpay.net/chargebacks/by_date</code></p>

<p>Staging (for integration):
<code>https://staging.gate.emerchantpay.net/chargebacks/by_date</code></p>

<p><strong>Request parameters:</strong></p>
<pre class="highlight xml tab-xml"><code><span class="cp">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="nt">&lt;chargeback_request&gt;</span>
  <span class="nt">&lt;start_date&gt;</span>2014-01-01<span class="nt">&lt;/start_date&gt;</span>
  <span class="nt">&lt;end_date&gt;</span>2014-01-31<span class="nt">&lt;/end_date&gt;</span>
  <span class="nt">&lt;page&gt;</span>2<span class="nt">&lt;/page&gt;</span>
<span class="nt">&lt;/chargeback_request&gt;</span>
</code></pre>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>start_date</td>
<td>required</td>
<td>yyyy-mm-dd</td>
<td>start of the requested date range</td>
</tr>
<tr>
<td>end_date</td>
<td>optional</td>
<td>yyyy-mm-dd</td>
<td>end of the requested date range</td>
</tr>
<tr>
<td>page</td>
<td>optional</td>
<td>integer</td>
<td>the page within the paginated result, defaults to 1</td>
</tr>
</tbody></table>

<p><strong>Response parameters:</strong></p>

<p>The attributes in the root node chargeback responses includes information about the pagination of the response.</p>
<pre class="highlight xml tab-xml"><code> <span class="cp">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="nt">&lt;chargeback_responses</span> <span class="na">per_page=</span><span class="s">"100"</span> <span class="na">page=</span><span class="s">"2"</span> <span class="na">total_count=</span><span class="s">"19"</span> <span class="na">pages_count=</span><span class="s">"7"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;chargeback_response&gt;</span>
    <span class="nt">&lt;type&gt;</span>1st Chargeback<span class="nt">&lt;/type&gt;</span>
    <span class="nt">&lt;post_date&gt;</span>2014-01-24<span class="nt">&lt;/post_date&gt;</span>
    <span class="nt">&lt;reason_code&gt;</span>4855<span class="nt">&lt;/reason_code&gt;</span>
    <span class="nt">&lt;reason_description&gt;</span>Non-receipt of merchandise<span class="nt">&lt;/reason_description&gt;</span>
    <span class="nt">&lt;authorization_code&gt;</span>811714<span class="nt">&lt;/authorization_code&gt;</span>
    <span class="nt">&lt;amount&gt;</span>-14625<span class="nt">&lt;/amount&gt;</span>
    <span class="nt">&lt;currency&gt;</span>USD<span class="nt">&lt;/currency&gt;</span>
    <span class="nt">&lt;chargeback_amount&gt;</span>300.0<span class="nt">&lt;/chargeback_amount&gt;</span>
    <span class="nt">&lt;chargeback_currency&gt;</span>EUR<span class="nt">&lt;/chargeback_currency&gt;</span>
    <span class="nt">&lt;card_number&gt;</span>554960******5069<span class="nt">&lt;/card_number&gt;</span>
    <span class="nt">&lt;card_brand&gt;</span>master<span class="nt">&lt;/card_brand&gt;</span>
    <span class="nt">&lt;customer_email&gt;</span>jonh_doe@example.com<span class="nt">&lt;/customer_email&gt;</span>
    <span class="nt">&lt;customer_phone&gt;</span>3598851248512<span class="nt">&lt;/customer_phone&gt;</span>
    <span class="nt">&lt;transaction_type&gt;</span>sale3d<span class="nt">&lt;/transaction_type&gt;</span>
    <span class="nt">&lt;original_transaction_unique_id&gt;</span>f9634ec5e7dbe6ca3871974accb875cd<span class="nt">&lt;/original_transaction_unique_id&gt;</span>
  <span class="nt">&lt;/chargeback_response&gt;</span>
  <span class="nt">&lt;chargeback_response&gt;</span>
    <span class="nt">&lt;type&gt;</span>2nd Chargeback <span class="nt">&lt;/type&gt;</span>
    <span class="nt">&lt;post_date&gt;</span>2014-01-27<span class="nt">&lt;/post_date&gt;</span>
    <span class="nt">&lt;reason_code&gt;</span>3456<span class="nt">&lt;/reason_code&gt;</span>
    <span class="nt">&lt;reason_description&gt;</span>Credit not processed<span class="nt">&lt;/reason_description&gt;</span>
    <span class="nt">&lt;authorization_code&gt;</span>123456<span class="nt">&lt;/authorization_code&gt;</span>
    <span class="nt">&lt;amount&gt;</span>3456<span class="nt">&lt;/amount&gt;</span>
    <span class="nt">&lt;currency&gt;</span>EUR<span class="nt">&lt;/currency&gt;</span>
    <span class="nt">&lt;chargeback_amount&gt;</span>300.0<span class="nt">&lt;/chargeback_amount&gt;</span>
    <span class="nt">&lt;chargeback_currency&gt;</span>EUR<span class="nt">&lt;/chargeback_currency&gt;</span>
    <span class="nt">&lt;card_number&gt;</span>454360******5008<span class="nt">&lt;/card_number&gt;</span>
    <span class="nt">&lt;card_brand&gt;</span>visa<span class="nt">&lt;/card_brand&gt;</span>
    <span class="nt">&lt;customer_email&gt;</span>jenny_doe@example.com<span class="nt">&lt;/customer_email&gt;</span>
    <span class="nt">&lt;customer_phone&gt;</span>3598851248123<span class="nt">&lt;/customer_phone&gt;</span>
    <span class="nt">&lt;transaction_type&gt;</span>sale<span class="nt">&lt;/transaction_type&gt;</span>
    <span class="nt">&lt;original_transaction_unique_id&gt;</span>67fbebc172b743a164a3f3af3d010457<span class="nt">&lt;/original_transaction_unique_id&gt;</span>
  <span class="nt">&lt;/chargeback_response&gt;</span>
  ...
<span class="nt">&lt;/chargeback_responses&gt;</span>
</code></pre>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>@per_page</td>
<td>integer</td>
<td>number of entries per page</td>
</tr>
<tr>
<td>@page</td>
<td>integer</td>
<td>the current page</td>
</tr>
<tr>
<td>@total_count</td>
<td>integer</td>
<td>total number of all entries</td>
</tr>
<tr>
<td>@pages_count</td>
<td>integer</td>
<td>total number of pages</td>
</tr>
</tbody></table>
<h3 id='chargeback-types'>Chargeback types</h3>
<p>Chargebacks will have one of the following type:</p>

<table><thead>
<tr>
<th>Status</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>1st Chargeback</td>
<td></td>
</tr>
<tr>
<td>2nd Chargeback</td>
<td></td>
</tr>
<tr>
<td>1st Chargeback Reversal</td>
<td></td>
</tr>
<tr>
<td>2nd Chargeback Reversal</td>
<td></td>
</tr>
<tr>
<td>Transfer Reversal</td>
<td></td>
</tr>
<tr>
<td>Re-presentment</td>
<td></td>
</tr>
<tr>
<td>Chargeback Transfer to Merchant Hold Acc</td>
<td></td>
</tr>
<tr>
<td>Chargeback Transfer to Writeoff Account Acq</td>
<td></td>
</tr>
<tr>
<td>Chargeback Transfer to Paymnt Acct Retail</td>
<td></td>
</tr>
<tr>
<td>Chargeback Transfer to Writeoff SP</td>
<td></td>
</tr>
</tbody></table>
<h1 id='retrieval-requests'>Retrieval Requests</h1>
<p>Retrieval requests are a special type of transactions as they cannot be triggered by the merchant. Retrieval requests occur if the issuer requests additional documentation for a transaction. Retrieval requests do not have financial implication, but they indicate the issuer doubts a given transaction and can initiate a chargeback.</p>

<p>For details, please contact our Risk team.</p>

<p>You can see also see a retrieval request overview in the merchant console under the Risk Management
menu.</p>
<h2 id='retrieval-request-notifications'>Retrieval Request notifications</h2>
<p>You now have the option to receive API and/or email notifications for each retrieval request event. Enable this feature by emailing the IT Support team at <a href="mailto:tech-support@emerchantpay.net">tech-support@emerchantpay.net</a> with the desired notification URL.</p>

<p>The email notifications are sent to the merchant user with role ’admin’ which is configured for managing the merchant entity on the gateway platform. The API notifications are equal to <a href="#notification-for-asynchronous-payments">Notifcation for asynchronous payments</a>, please refer to the section <a href="#notification-for-asynchronous-payments">Notifcation for asynchronous payments</a> to understand how notifications work.</p>

<blockquote>
<p>Retrieval Notification Example</p>
</blockquote>
<pre class="highlight plaintext"><code>?transaction_id=30450
&amp;terminal_token=cd577214de104fa0dd9c28486b3c817fd08c89a6
&amp;unique_id=5de39380bf7ac7e1fc31cbd7805dc0ec
&amp;transaction_type=sale
&amp;status=chargebacked
&amp;signature=98676c91391094b823d1f521d06cc129195952f9
&amp;amount=400
&amp;currency=USD
&amp;avs_response_code=5I
&amp;avs_response_text=Response+provided+by+issuer+processor%3B+Address+information+not+verified
&amp;reason_code=10
&amp;reason_description=Dispute+Transaction
&amp;post_date=2014-07-16
&amp;event=retrieval_request
</code></pre><h2 id='retrieval-request-api'>Retrieval Request API</h2>
<p>The retrieval request API can be used to get info for retrieval requests.</p>
<h2 id='single-retrieval-request'>Single Retrieval Request</h2>
<p>Single retrieval request retrieval allows to get a certain retrieval request by its ARN or by passing the unique ID of the original transaction.</p>
<pre class="highlight xml tab-xml"><code><span class="cp">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="nt">&lt;retrieval_request_request&gt;</span>
  <span class="nt">&lt;original_transaction_unique_id&gt;</span>53b1f5eacc9e4d3a3afebb4e993fe962<span class="nt">&lt;/original_transaction_unique_id&gt;</span>
<span class="nt">&lt;/retrieval_request_request&gt;</span>
</code></pre>
<p>The URLs for the single retrieval request API are:</p>

<p>Production:
<code>https://gate.emerchantpay.net/retrieval_equests</code></p>

<p>Staging (for integration)
<code>https://staging.gate.emerchantpay.net/retrieval_requests</code></p>

<p><br><br><br><br><br><br><br><br><br></p>
<pre class="highlight xml tab-xml"><code><span class="cp">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="nt">&lt;retrieval_request_response&gt;</span>
  <span class="nt">&lt;type&gt;</span>Retrieval request<span class="nt">&lt;/type&gt;</span>
  <span class="nt">&lt;post_date&gt;</span>2014-01-24<span class="nt">&lt;/post_date&gt;</span>
  <span class="nt">&lt;reason_code&gt;</span>42<span class="nt">&lt;/reason_code&gt;</span>
  <span class="nt">&lt;reason_description&gt;</span>Potential Chargeback<span class="nt">&lt;/reason_description&gt;</span>
  <span class="nt">&lt;authorization_code&gt;</span>811714<span class="nt">&lt;/authorization_code&gt;</span>
  <span class="nt">&lt;card_number&gt;</span>554960******5069<span class="nt">&lt;/card_number&gt;</span>
  <span class="nt">&lt;card_brand&gt;</span>master<span class="nt">&lt;/card_brand&gt;</span>
  <span class="nt">&lt;customer_email&gt;</span>jonh_doe@example.com<span class="nt">&lt;/customer_email&gt;</span>
  <span class="nt">&lt;customer_phone&gt;</span>3598851248512<span class="nt">&lt;/customer_phone&gt;</span>
  <span class="nt">&lt;transaction_type&gt;</span>sale3d<span class="nt">&lt;/customer_phone&gt;</span>
  <span class="nt">&lt;original_transaction_unique_id&gt;</span>f9634ec5e7dbe6ca3871974accb875cd<span class="nt">&lt;/original_transaction_unique_id&gt;</span>
<span class="nt">&lt;/retrieval_request_response&gt;</span>
</code></pre>
<p><strong>Response parameters:</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>type</td>
<td>string</td>
<td>The chargeback type. See chargeback types for details</td>
</tr>
<tr>
<td>post_date</td>
<td>string</td>
<td>The date of the chargeback</td>
</tr>
<tr>
<td>reason_code</td>
<td>string</td>
<td>Reason code of the chargeback</td>
</tr>
<tr>
<td>reason_description</td>
<td>string</td>
<td>Reason description of the chargeback</td>
</tr>
<tr>
<td>authorization_code</td>
<td>string</td>
<td>Authorization code of the chargeback’s transac- tion</td>
</tr>
<tr>
<td>card_number</td>
<td>string</td>
<td>Card number used for the chargeback’s transaction</td>
</tr>
<tr>
<td>card_brand</td>
<td>string</td>
<td>Card brand of the card number</td>
</tr>
<tr>
<td>customer_email</td>
<td>string</td>
<td>The email of the cardholder</td>
</tr>
<tr>
<td>customer_phone</td>
<td>integer</td>
<td>The phone of the cardholder</td>
</tr>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>The type of the chargeback’s transaction</td>
</tr>
<tr>
<td>original_transaction_unique_id</td>
<td>string</td>
<td>The unique id of the chargeback’s transaction</td>
</tr>
</tbody></table>
<pre class="highlight xml tab-xml"><code><span class="cp">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="nt">&lt;retrieval_request_response&gt;</span>
  <span class="nt">&lt;technical_message&gt;</span>Retrieval request by the given criteria cannot be found!<span class="nt">&lt;/technical_message&gt;</span>
  <span class="nt">&lt;status&gt;</span>error<span class="nt">&lt;/status&gt;</span>
  <span class="nt">&lt;message&gt;</span>Retrieval request not found!<span class="nt">&lt;/message&gt;</span>
  <span class="nt">&lt;code&gt;</span>480<span class="nt">&lt;/code&gt;</span>
<span class="nt">&lt;/retrieval_request_response&gt;</span>
</code></pre>
<p>In case no retrieval request is found with the given ARN or unique ID, a corresponding XML response is as follows:</p>
<h2 id='by-date-range-3'>By date range</h2>
<p>Date range based retrieval request retrieval allows you to fetch information for all retrieval requests for a given merchant within a given date range. Date range searches for chargebacks by their posting date. The response is paginated, each request will return 100 entries max.</p>

<p>The URLs for date range retrieval request retrieval are:</p>

<p>Production:
<code>https://gate.emerchantpay.net/retrieval_requests/by_date</code></p>

<p>Staging (for integration):
<code>https://staging.gate.emerchantpay.net/retrieval_requests/by_date</code></p>

<p><strong>Request parameters:</strong></p>
<pre class="highlight xml tab-xml"><code><span class="cp">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="nt">&lt;chargeback_request&gt;</span>
  <span class="nt">&lt;start_date&gt;</span>2014-01-01<span class="nt">&lt;/start_date&gt;</span>
  <span class="nt">&lt;end_date&gt;</span>2014-01-31<span class="nt">&lt;/end_date&gt;</span>
  <span class="nt">&lt;page&gt;</span>2<span class="nt">&lt;/page&gt;</span>
<span class="nt">&lt;/chargeback_request&gt;</span>
</code></pre>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>start_date</td>
<td>required</td>
<td>yyyy-mm-dd</td>
<td>start of the requested date range</td>
</tr>
<tr>
<td>end_date</td>
<td>optional</td>
<td>yyyy-mm-dd</td>
<td>end of the requested date range</td>
</tr>
<tr>
<td>page</td>
<td>optional</td>
<td>integer</td>
<td>the page within the paginated result, defaults to 1</td>
</tr>
</tbody></table>

<p><strong>Response parameters:</strong></p>

<p>The attributes in the root node <strong>retrieval_request_responses</strong> includes information about the pagination of the response.</p>
<pre class="highlight xml tab-xml"><code><span class="cp">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="nt">&lt;retrieval_request_responses</span> <span class="na">per_page=</span><span class="s">"100"</span> <span class="na">page=</span><span class="s">"2"</span> <span class="na">total_count=</span><span class="s">"19"</span> <span class="na">pages_count=</span><span class="s">"7"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;retrieval_request_response&gt;</span>
    <span class="nt">&lt;type&gt;</span>Retrieval request<span class="nt">&lt;/type&gt;</span>
    <span class="nt">&lt;post_date&gt;</span>2014-01-24<span class="nt">&lt;/post_date&gt;</span>
    <span class="nt">&lt;reason_code&gt;</span>42<span class="nt">&lt;/reason_code&gt;</span>
    <span class="nt">&lt;reason_description&gt;</span>Potential Chargeback<span class="nt">&lt;/reason_description&gt;</span>
    <span class="nt">&lt;authorization_code&gt;</span>811714<span class="nt">&lt;/authorization_code&gt;</span>
    <span class="nt">&lt;card_number&gt;</span>554960******5069<span class="nt">&lt;/card_number&gt;</span>
    <span class="nt">&lt;card_brand&gt;</span>master<span class="nt">&lt;/card_brand&gt;</span>
    <span class="nt">&lt;customer_email&gt;</span>emil@emerchantpay.net<span class="nt">&lt;/customer_email&gt;</span>
    <span class="nt">&lt;customer_phone&gt;</span>3598851248512<span class="nt">&lt;/customer_phone&gt;</span>
    <span class="nt">&lt;transaction_type&gt;</span>sale3d<span class="nt">&lt;/transaction_type&gt;</span>
    <span class="nt">&lt;original_transaction_unique_id&gt;</span>f9634ec5e7dbe6ca3871974accb875cd<span class="nt">&lt;/original_transaction_unique_id&gt;</span>
  <span class="nt">&lt;/retrieval_request_response&gt;</span>
  <span class="nt">&lt;retrieval_request_response&gt;</span>
    <span class="nt">&lt;type&gt;</span>Retrieval request<span class="nt">&lt;/type&gt;</span>
    <span class="nt">&lt;post_date&gt;</span>2014-01-27<span class="nt">&lt;/post_date&gt;</span>
    <span class="nt">&lt;reason_code&gt;</span>42<span class="nt">&lt;/reason_code&gt;</span>
    <span class="nt">&lt;reason_description&gt;</span>Potential Chargeback<span class="nt">&lt;/reason_description&gt;</span>
    <span class="nt">&lt;authorization_code&gt;</span>123456<span class="nt">&lt;/authorization_code&gt;</span>
    <span class="nt">&lt;card_number&gt;</span>454360******5008<span class="nt">&lt;/card_number&gt;</span>
    <span class="nt">&lt;card_brand&gt;</span>visa<span class="nt">&lt;/card_brand&gt;</span>
    <span class="nt">&lt;customer_email&gt;</span>ivan@emerchantpay.net<span class="nt">&lt;/customer_email&gt;</span>
    <span class="nt">&lt;customer_phone&gt;</span>3598851248123<span class="nt">&lt;/customer_phone&gt;</span>
    <span class="nt">&lt;transaction_type&gt;</span>sale<span class="nt">&lt;/transaction_type&gt;</span>
    <span class="nt">&lt;original_transaction_unique_id&gt;</span>67fbebc172b743a164a3f3af3d010457<span class="nt">&lt;/original_transaction_unique_id&gt;</span>
  <span class="nt">&lt;/retrieval_request_response&gt;</span>
  ...
<span class="nt">&lt;/retrieval_request_responses&gt;</span>
</code></pre>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>@per_page</td>
<td>integer</td>
<td>number of entries per page</td>
</tr>
<tr>
<td>@page</td>
<td>integer</td>
<td>the current page</td>
</tr>
<tr>
<td>@total_count</td>
<td>integer</td>
<td>total number of all entries</td>
</tr>
<tr>
<td>@pages_count</td>
<td>integer</td>
<td>total number of pages</td>
</tr>
</tbody></table>
<h1 id='fraud-reports'>Fraud reports</h1>
<p>SAFE/TC40 reports are information for transactions reported as fraud to MasterCard or VISA.</p>

<p>You can see a SAFE/TC40 reports overview in the merchant console under the Risk management menu.</p>
<h2 id='safe-tc40-api'>SAFE/TC40 API</h2>
<p>The SAFE/TC40 API can be used to retrieve data about SAFE/TC40 reports.</p>
<h2 id='single-safe-tc40-report'>Single SAFE/TC40 report</h2>
<p>Single SAFE/TC40 retrieval allows to get a certain SAFE/TC40 by its ARN or by passing the unique ID of the original transaction.</p>
<pre class="highlight xml tab-xml"><code><span class="cp">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="nt">&lt;fraud_report_request&gt;</span>
  <span class="nt">&lt;original_transaction_unique_id&gt;</span>53b1f5eacc9e4d3a3afebb4e993fe962<span class="nt">&lt;/original_transaction_unique_id&gt;</span>
<span class="nt">&lt;/fraud_report_request&gt;</span>
</code></pre>
<p>The URLs for the single SAFE/TC40 API are:</p>

<p>Production:
<code>https://gate.emerchantpay.net/fraud_reports</code></p>

<p>Staging (for integration):
<code>https://staging.gate.emerchantpay.net/fraud_reports</code></p>

<p><br><br><br><br><br><br><br><br><br></p>
<pre class="highlight xml tab-xml"><code><span class="cp">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="nt">&lt;fraud_report_response&gt;</span>
  <span class="nt">&lt;transaction_date&gt;</span>2014-01-24<span class="nt">&lt;/transaction_date&gt;</span>
  <span class="nt">&lt;fraud_type_code&gt;</span>6<span class="nt">&lt;/fraud_type_code&gt;</span>
  <span class="nt">&lt;amount&gt;</span>400<span class="nt">&lt;/amount&gt;</span>
  <span class="nt">&lt;currency&gt;</span>GBP<span class="nt">&lt;/currency&gt;</span>
  <span class="nt">&lt;card_number&gt;</span>554960******5069<span class="nt">&lt;/card_number&gt;</span>
  <span class="nt">&lt;card_brand&gt;</span>master<span class="nt">&lt;/card_brand&gt;</span>
  <span class="nt">&lt;customer_email&gt;</span>jonh_doe@example.com<span class="nt">&lt;/customer_email&gt;</span>
  <span class="nt">&lt;customer_phone&gt;</span>3598851248512<span class="nt">&lt;/customer_phone&gt;</span>
  <span class="nt">&lt;transaction_type&gt;</span>sale3d<span class="nt">&lt;/customer_phone&gt;</span>
  <span class="nt">&lt;original_transaction_unique_id&gt;</span>f9634ec5e7dbe6ca3871974accb875cd<span class="nt">&lt;/original_transaction_unique_id&gt;</span>
  <span class="nt">&lt;original_merchant_transaction_id&gt;</span>123294sss<span class="nt">&lt;/original_merchant_transaction_id&gt;</span>
<span class="nt">&lt;/fraud_report_response&gt;</span>
</code></pre>
<p><strong>Response parameters:</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_date</td>
<td>yyyy-mm-dd</td>
<td>The date transaction is made</td>
</tr>
<tr>
<td>amount</td>
<td>float</td>
<td>Amount in the cardholder account currency. Amount can be negative for: 1st chargeback, 2nd chargeback, transfer reversal and positive for all other types.</td>
</tr>
<tr>
<td>currency</td>
<td>string(3)</td>
<td>Currency of the cardholder account. See ISO 4217</td>
</tr>
<tr>
<td>card_number</td>
<td>string</td>
<td>Card number used for the chargeback’s transaction</td>
</tr>
<tr>
<td>card_brand</td>
<td>string</td>
<td>Card brand of the card number</td>
</tr>
<tr>
<td>customer_email</td>
<td>string</td>
<td>The email of the cardholder</td>
</tr>
<tr>
<td>customer_phone</td>
<td>integer</td>
<td>The phone of the cardholder</td>
</tr>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>The type of the chargeback’s transaction</td>
</tr>
<tr>
<td>original_transaction_unique_id</td>
<td>string</td>
<td>The unique id of the chargeback’s transaction</td>
</tr>
</tbody></table>
<pre class="highlight xml tab-xml"><code><span class="cp">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="nt">&lt;fraud_report_response&gt;</span>
  <span class="nt">&lt;technical_message&gt;</span>Mastercard fraud report by the given criteria cannot be found!<span class="nt">&lt;/technical_message&gt;</span>
  <span class="nt">&lt;status&gt;</span>error<span class="nt">&lt;/status&gt;</span>
  <span class="nt">&lt;message&gt;</span>Mastercard Fraud Report not found!<span class="nt">&lt;/message&gt;</span>
  <span class="nt">&lt;code&gt;</span>490<span class="nt">&lt;/code&gt;</span>
<span class="nt">&lt;/fraud_report_response&gt;</span>
</code></pre>
<p>In case no SAFE/TC40 is found the given ARN or unique ID, a corresponding XML response is as follows:</p>
<h2 id='by-date-range-4'>By date range</h2>
<p>Date range based SAFE/TC40 retrieval allows you to fetch information for all SAFE/TC40 reports for a given merchant within a given date range. Date range searches for SAFE/TC40 reports by their posting date. The response is paginated, each request will return 100 entries max.</p>

<p>The URLs for date range SAFE/TC40 retrieval are:</p>

<p>Production:
<code>https://gate.emerchantpay.net/fraud_reports/by date</code>
Staging (for integration):
<code>https://staging.gate.emerchantpay.net/fraud_reports/by_date</code></p>

<p><strong>Request parameters:</strong></p>
<pre class="highlight xml tab-xml"><code><span class="cp">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="nt">&lt;fraud_report_request&gt;</span>
  <span class="nt">&lt;start_date&gt;</span>2014-01-01<span class="nt">&lt;/start_date&gt;</span>
  <span class="nt">&lt;end_date&gt;</span>2014-01-31<span class="nt">&lt;/end_date&gt;</span>
  <span class="nt">&lt;page&gt;</span>2<span class="nt">&lt;/page&gt;</span>
<span class="nt">&lt;/fraud_report_request&gt;</span>
</code></pre>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>start_date</td>
<td>required</td>
<td>yyyy-mm-dd</td>
<td>start of the requested date range</td>
</tr>
<tr>
<td>end_date</td>
<td>optional</td>
<td>yyyy-mm-dd</td>
<td>end of the requested date range</td>
</tr>
<tr>
<td>page</td>
<td>optional</td>
<td>integer</td>
<td>the page within the paginated result, defaults to 1</td>
</tr>
</tbody></table>

<p><strong>Response parameters:</strong></p>

<p>The attributes in the root node mastercard fraud report responses includes information about the pagination of the response.</p>
<pre class="highlight xml tab-xml"><code><span class="cp">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="nt">&lt;fraud_report_responses</span> <span class="na">per_page=</span><span class="s">"100"</span> <span class="na">page=</span><span class="s">"2"</span> <span class="na">total_count=</span><span class="s">"19"</span> <span class="na">pages_count=</span><span class="s">"7"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;fraud_report_response&gt;</span>
    <span class="nt">&lt;transaction_date&gt;</span>2014-01-24<span class="nt">&lt;/transaction_date&gt;</span>
    <span class="nt">&lt;fraud_type_code&gt;</span>6<span class="nt">&lt;/fraud_type_code&gt;</span>
    <span class="nt">&lt;amount&gt;</span>14625<span class="nt">&lt;/amount&gt;</span>
    <span class="nt">&lt;currency&gt;</span>USD<span class="nt">&lt;/currency&gt;</span>
    <span class="nt">&lt;card_number&gt;</span>554960******5069<span class="nt">&lt;/card_number&gt;</span>
    <span class="nt">&lt;card_brand&gt;</span>master<span class="nt">&lt;/card_brand&gt;</span>
    <span class="nt">&lt;customer_email&gt;</span>jonh_doe@examle.com<span class="nt">&lt;/customer_email&gt;</span>
    <span class="nt">&lt;customer_phone&gt;</span>3598851248512<span class="nt">&lt;/customer_phone&gt;</span>
    <span class="nt">&lt;transaction_type&gt;</span>sale3d<span class="nt">&lt;/transaction_type&gt;</span>
    <span class="nt">&lt;original_transaction_unique_id&gt;</span>f9634ec5e7dbe6ca3871974accb875cd<span class="nt">&lt;/original_transaction_unique_id&gt;</span>
    <span class="nt">&lt;original_merchant_transaction_id&gt;</span>f9634ec5e7d5cd<span class="nt">&lt;/original_merchant_transaction_id&gt;</span>
  <span class="nt">&lt;/fraud_report_response&gt;</span>
  <span class="nt">&lt;fraud_report_response&gt;</span>
    <span class="nt">&lt;transaction_date&gt;</span>2014-01-27<span class="nt">&lt;/transaction_date&gt;</span>
    <span class="nt">&lt;fraud_type_code&gt;</span>4<span class="nt">&lt;/fraud_type_code&gt;</span>
    <span class="nt">&lt;amount&gt;</span>3456<span class="nt">&lt;/amount&gt;</span>
    <span class="nt">&lt;currency&gt;</span>EUR<span class="nt">&lt;/currency&gt;</span>
    <span class="nt">&lt;card_number&gt;</span>454360******5008<span class="nt">&lt;/card_number&gt;</span>
    <span class="nt">&lt;card_brand&gt;</span>visa<span class="nt">&lt;/card_brand&gt;</span>
    <span class="nt">&lt;customer_email&gt;</span>jenny_doe@example.com<span class="nt">&lt;/customer_email&gt;</span>
    <span class="nt">&lt;customer_phone&gt;</span>3598851248123<span class="nt">&lt;/customer_phone&gt;</span>
    <span class="nt">&lt;transaction_type&gt;</span>sale<span class="nt">&lt;/transaction_type&gt;</span>
    <span class="nt">&lt;original_transaction_unique_id&gt;</span>67fbebc172b743a164a3f3af3d010457<span class="nt">&lt;/original_transaction_unique_id&gt;</span>
    <span class="nt">&lt;original_merchant_transaction_id&gt;</span>67fbebc172b743a164a3f3af3d010457<span class="nt">&lt;/original_merchant_transaction_id&gt;</span>
  <span class="nt">&lt;/fraud_report_response&gt;</span>
...
<span class="nt">&lt;/fraud_report_responses&gt;</span>
</code></pre>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>@per_page</td>
<td>integer</td>
<td>number of entries per page</td>
</tr>
<tr>
<td>@page</td>
<td>integer</td>
<td>the current page</td>
</tr>
<tr>
<td>@total_count</td>
<td>integer</td>
<td>total number of all entries</td>
</tr>
<tr>
<td>@pages_count</td>
<td>integer</td>
<td>total number of pages</td>
</tr>
</tbody></table>
<h1 id='blacklists'>Blacklists</h1>
<p>With the Blacklist API you can check if a certain credit card is blacklisted within the gateway. If a terminal token is not passed, the merchant and global PAN blacklists will be checked for the given card number. If a terminal token is passed, the terminal, its merchant, and the global PAN blacklists will be checked for blacklist matches.</p>

<p>The URLs for the Blacklist API are:</p>

<p>Production:
<code>https://gate.emerchantpay.net/blacklists</code></p>

<p>Staging (for integration):
<code>https://staging.gate.emerchantpay.net/blacklists</code></p>
<h2 id='invoking-a-request'>Invoking a Request</h2>
<p>A transaction is invoked via HTTPS POST, parameters are passed as XML with UTF-8 encoding.</p>
<pre class="highlight xml tab-xml"><code><span class="cp">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="nt">&lt;blacklist_request&gt;</span>
  <span class="nt">&lt;card_number&gt;</span>4200000000000000<span class="nt">&lt;/card_number&gt;</span>
  <span class="nt">&lt;terminal_token&gt;</span>abd30ed00f88f838c5d233cbb62b6da0b69267b4<span class="nt">&lt;/terminal_token&gt;</span>
<span class="nt">&lt;/blacklist_request&gt;</span>
</code></pre>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>card_number</td>
<td>required</td>
<td>int(13..16)</td>
<td>the credit card number to be checked</td>
</tr>
<tr>
<td>terminal_token</td>
<td>optional</td>
<td>string(40)</td>
<td>the terminal token</td>
</tr>
</tbody></table>
<h2 id='response'>Response</h2>
<p><strong>Successful response:</strong></p>
<pre class="highlight xml tab-xml"><code><span class="cp">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="nt">&lt;blacklist_response&gt;</span>
  <span class="nt">&lt;blacklisted&gt;</span>true<span class="nt">&lt;/blacklisted&gt;</span>
<span class="nt">&lt;/blacklist_response&gt;</span>
</code></pre>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>blacklisted</td>
<td>boolean</td>
<td>credit card number is blacklisted or not</td>
</tr>
</tbody></table>

<p><strong>Error response:</strong></p>
<pre class="highlight xml tab-xml"><code><span class="cp">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="nt">&lt;blacklist_response&gt;</span>
  <span class="nt">&lt;code&gt;</span>350<span class="nt">&lt;/code&gt;</span>
  <span class="nt">&lt;message&gt;</span>Invalid XML: No close tag for /blacklist_request<span class="nt">&lt;/message&gt;</span>
<span class="nt">&lt;/blacklist_response&gt;</span>
</code></pre>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>code</td>
<td>integer</td>
<td>error code of the error that occured</td>
</tr>
<tr>
<td>message</td>
<td>string</td>
<td>info about the error</td>
</tr>
</tbody></table>
<h1 id='asynchronous-transactions-and-notifications'>Asynchronous Transactions and Notifications</h1><h2 id='asynchronous-transactions'>Asynchronous Transactions</h2>
<p>3-D secure transactions are always processed <strong>asynchronously</strong>, while the other transactions are processed <strong>synchronously</strong>.</p>

<p>This means that the final result of the transaction will not be available immediately and the status is pending async. Once the transaction has reached a final status, a <a href="#notifications">Notification</a> is sent to the merchant.</p>

<aside class="notice" >
Whenever the status is pending async the transaction gets processed asynchronously, and a [Notification](#notifications) is sent to the merchant once the transaction has reached a final status.
</aside>

<p><strong>Overview</strong></p>

<table><thead>
<tr>
<th>Transaction type</th>
<th>async?</th>
</tr>
</thead><tbody>
<tr>
<td><a href="#authorize">Authorize</a></td>
<td>never</td>
</tr>
<tr>
<td><a href="#authorize-3d">Authorize3d</a></td>
<td>always</td>
</tr>
<tr>
<td><a href="#sale">Sale</a></td>
<td>never</td>
</tr>
<tr>
<td><a href="#sale-3d">Sale3d</a></td>
<td>always</td>
</tr>
<tr>
<td><a href="#capture">Capture</a></td>
<td>never</td>
</tr>
<tr>
<td><a href="#refund">Refund</a></td>
<td>never</td>
</tr>
<tr>
<td><a href="#void">Void</a></td>
<td>never</td>
</tr>
<tr>
<td><a href="#init-recurring-sale">InitRecurringSale</a></td>
<td>never</td>
</tr>
<tr>
<td><a href="#init-recurring-sale-3d">InitRecurringSale3D</a></td>
<td>always</td>
</tr>
<tr>
<td><a href="#recurring-sale">RecurringSale</a></td>
<td>never</td>
</tr>
<tr>
<td><a href="#credit-cft">Credit</a></td>
<td>never</td>
</tr>
<tr>
<td><a href="#bitpay-sale">BitPay Sale</a></td>
<td>always</td>
</tr>
<tr>
<td><a href="#bitpay-refund">BitPay Refund</a></td>
<td>always</td>
</tr>
</tbody></table>
<h2 id='notifications'>Notifications</h2>
<p>For asynchronous payments a notification is always sent to the <strong>notification_url</strong> within the payment transaction.</p>

<p>The payment gateway can be configured to also send a notification after each synchronous payment transaction. The notification is sent to the <strong>notification_url</strong> which is configured per merchant.</p>

<p>Also see <a href="#3d-secure-transactions">3-D Secure Transactions</a> and <a href="#notification-for-asynchronous-payments">Notification for asynchronous payments</a>.</p>

<p>The format of the notification in both cases is the same.</p>

<blockquote>
<p>Notification Example</p>
</blockquote>
<pre class="highlight plaintext"><code>?transaction_id=82803B4C-70CC-43BD-8B21-FD0395285B40
&amp;unique_id=44177a21403427eb96664a6d7e5d5d48
&amp;transaction_type=sale3d
&amp;terminal_token=394f2ebc3646d3c017fa1e1cbc4a1e20
&amp;status=approved
&amp;amount=500
&amp;signature=088e16a1019277b15d58faf0541e11910eb756f6
&amp;eci=05
&amp;avs_response_code=5I
&amp;avs_response_text=Response+provided+by+issuer+processor%3B+Address+information+not+verified
</code></pre>
<p><strong>Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_id</td>
<td>string</td>
<td>merchant generated tranaction id</td>
</tr>
<tr>
<td>unique_id</td>
<td>string</td>
<td>unique id generated by Genesis</td>
</tr>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>transaction type for the transaction eg: sale3d</td>
</tr>
<tr>
<td>terminal_token</td>
<td>string</td>
<td>the terminal token as used in the processing url</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>status of the payment transaction</td>
</tr>
<tr>
<td>amount</td>
<td>string</td>
<td>amount of the payment transaction. If the transaction is partially approved, this is the partially approved amount. Check <a href="#partial-approvals">Partial Approvals</a> for details</td>
</tr>
<tr>
<td>partial_approval</td>
<td>string</td>
<td>If the transaction is partially approved, this is set to ’true’. Check <a href="#partial-approvals">Partial Approvals</a> for details</td>
</tr>
<tr>
<td>signature</td>
<td>string</td>
<td>the signature of the notification, should be used to verify the the notifcation was sent by Genesis</td>
</tr>
<tr>
<td>eci</td>
<td>string</td>
<td>See Electronic Commerce Indicator as returned from the MPI for details</td>
</tr>
<tr>
<td>event</td>
<td>string</td>
<td>The event that caused the notification</td>
</tr>
<tr>
<td>rc_code</td>
<td>string</td>
<td>The reason code for the event</td>
</tr>
<tr>
<td>rc_description</td>
<td>string</td>
<td>The reason description for the event</td>
</tr>
<tr>
<td>avs_response_code</td>
<td>string</td>
<td>Generated by the card network on trying to match the billing ad- dress when performing the address verification. Optional, returned if config is enabled and acquirer supports it. Check <a href="#avs-status-codes">AVS Status Codes</a> for details.</td>
</tr>
<tr>
<td>avs_response_text</td>
<td>string</td>
<td>Gives the human response text for the AVS response code above. Optional, returned if config is enabled and acquirer supports it. Check <a href="#avs-status-codes">AVS Status Codes</a> for details.</td>
</tr>
</tbody></table>

<p>Status will be either &quot;declined&quot;, &quot;approved&quot; or &quot;error&quot;, like shown in the states table.</p>

<p>The event parameter is added only for fraud transactions eg: chargeback, chargeback_reversal, second_chargeback or retrieval_request.</p>

<p>The signature is a mean of security to ensure that the gate is really the sender of the notification. It is generated by concatenating the unique id of the transaction with your API password and generating a SHA1 Hash (Hex) of the string:</p>

<p><code>SHA1 Hash Hex of &lt;unique_id&gt;&lt;Your API password&gt;</code></p>

<p><strong>Notification signature examples</strong></p>

<table><thead>
<tr>
<th>unique_id</th>
<th>API password</th>
<th>signature</th>
</tr>
</thead><tbody>
<tr>
<td>fc6c3c8c0219730c7a099eaa540f70dc</td>
<td>bogus</td>
<td>08d01ae1ebdc22b6a1a764257819bb26e9e94e8d</td>
</tr>
<tr>
<td>130319cfb3bf65ff3c4a4045487b173e</td>
<td>test123</td>
<td>1b34dabed996788efcc049567809484454ee8b17</td>
</tr>
</tbody></table>

<p>You can use the signature to verify the integrity of the notification, ensuring that it was really sent by the gate.</p>

<aside class="notice" >
    You must either use the signature to verify the notification’s integrity or make a reconcile to check the final transaction status.
</aside>
<pre class="highlight xml tab-xml"><code>    <span class="cp">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
    <span class="nt">&lt;notification_echo&gt;</span>
        <span class="nt">&lt;unique_id&gt;</span>44177a21403427eb96664a6d7e5d5d48<span class="nt">&lt;/unique_id&gt;</span>
    <span class="nt">&lt;/notification_echo&gt;</span>
</code></pre>
<p>When receiving the notification, you are required to render an xml page containing the transaction’s unique id so that the gateway knows that you have accepted the notification. If the XML is not delivered, the notification is sent periodically until the XML is received.</p>
<h1 id='wpf-2'>WPF</h1>
<p>The WPF (Web Payment Form) is a customizable component of the Genesis payment gateway.
It provides merchants with an intuitive user interface to easily process their customers’ payments.
Through a single point of integration, the merchant can offer his customers multiple payment methods instantly and since the WPF is hosted on the secure Genesis infrastructure, it is already PCI-DSS compliant.</p>

<h2 id='workflow'>Workflow</h2>

<p><img src="images/wpf-workflow.png" alt="WPF workflow diagram" ></p>

<p>In the example above the customer visits the merchant’s website and does a checkout.</p>

<p>(1), the merchant <a href="#">initiates</a> the payment on the Genesis payment gateway through a request to the <a href="#wpf-api">WPF API</a>, which carries the mandatory, inital payload (e.g. amount, currency, etc.). The response to this request (if successful) is a redirect URL, which the merchants hands over to the customer. Following this redirect URL</p>

<p>(2), the customer is then directed to the actual payment form (WPF), which gets served from the Genesis servers. Because the merchant has previously transmitted most of the relevant payment information, the form is prefilled with these values and the customer only needs to add personal data. The customer then selects one of the payment methods offered by the merchant and fills in his payment information</p>

<p>(3) (e.g. credit card data). Upon completion the customer is redirected back to the merchant</p>

<p>(4)<sup>1</sup>. After the payment has been processed and reached a final state the merchant is sent a notification</p>

<p>(5) to the notification url supplied in the initial create request (1). The merchant must either uses the notification’s signature to verify the payment’s integrity or make a reconcile</p>

<p>(6) to check the final payment status. However, we urge all merchants to always do a reconcile.</p>

<p><code>1 - Particularly to the return success url defined by the merchant in his initial request. If the customer has selected an asynchronous payment method, he is redirected to the MPI provider before this step</code></p>

<aside class="notice" >
3D secure WPF payments are always performed asynchronously. After submitting the web payment form, the customer is redirected to the MPI provider to enter his personal data. In the case when cardholder is not enrolled customer is redirected to the failure url.
<br><br>
As with all other asynchronous payment transactions, the return-, success- and cancel-URLs are only meant to display a useful page/message to the customer. A redirect of the customer to one of these URLs never gives any form of indication of the payment’s state. To find out whether the payment has gone through or not the merchant must always wait for the notification or (even better) do a <a href="#reconcile-2" >reconcile</a>.
<br><br>
Please also note that there is no specific order in which notification and redirect will occur (that means that the notification may also arrive before the customer’s redirect).
</aside>
<h2 id='wpf-api'>WPF API</h2><h3 id='urls-2'>URLs</h3>
<p><strong>Create:</strong></p>

<p>The URL for the WPF API create method is:</p>

<p><code>https://wpf.emerchantpay.net/&lt;locale&gt;/wpf</code></p>

<p>For the test system the URL is:</p>

<p><code>https://staging.wpf.emerchantpay.net/&lt;locale&gt;/wpf</code></p>

<p>Note that if you do not submit one of the available locales, defaults to &#39;en&#39; (English).</p>

<p>Check the <a href="#wpf-internationalization">WPF Internationalization (i18n)</a> for details.</p>

<p><strong>Reconcile:</strong></p>

<p>The URL for the WPF API reconcile method is:</p>

<p><code>https://wpf.emerchantpay.net/wpf/reconcile</code></p>

<p>For the test system the URL is:</p>

<p><code>https://staging.wpf.emerchantpay.net/wpf/reconcile</code></p>

<h3 id='create'>Create</h3>

<blockquote>
<p>Request</p>
</blockquote>

<pre class="highlight php tab-php"><code><span class="cp">&lt;?php</span>

<span class="c1">// Load the pre-configured ini file...
</span><span class="nx">\Genesis\Config</span><span class="o">::</span><span class="na">loadSettings</span><span class="p">(</span><span class="s1">'/path/to/config.ini'</span><span class="p">);</span>

<span class="nv">$genesis</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Genesis</span><span class="p">(</span><span class="s1">'WPF\Create'</span><span class="p">);</span>
<span class="nv">$request</span> <span class="o">=</span> <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">request</span><span class="p">();</span>

<span class="nv">$request</span>
  <span class="o">-&gt;</span><span class="na">setTransactionId</span><span class="p">(</span><span class="s1">'43671'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setUsage</span><span class="p">(</span><span class="s1">'40208 concert tickets'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setDescription</span><span class="p">(</span><span class="s1">'You are about to buy 3 shoes at www.shoes.com!'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setNotificationUrl</span><span class="p">(</span><span class="s1">'https://www.example.com/notification'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setReturnSuccessUrl</span><span class="p">(</span><span class="s1">'http://www.example.com/success'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setReturnFailureUrl</span><span class="p">(</span><span class="s1">'http://www.example.com/failure'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setReturnCancelUrl</span><span class="p">(</span><span class="s1">'http://www.example.com/cancel.html'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setAmount</span><span class="p">(</span><span class="s1">'100'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCurrency</span><span class="p">(</span><span class="s1">'USD'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setConsumerId</span><span class="p">(</span><span class="s1">'123456'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCustomerEmail</span><span class="p">(</span><span class="s1">'travis@example.com'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCustomerPhone</span><span class="p">(</span><span class="s1">'+1987987987987'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setRememberCard</span><span class="p">(</span><span class="s1">'true'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setLifetime</span><span class="p">(</span><span class="s1">'60'</span><span class="p">)</span>


  <span class="c1">// Billing Address
</span>  <span class="o">-&gt;</span><span class="na">setBillingFirstName</span><span class="p">(</span><span class="s1">'Travis'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingLastName</span><span class="p">(</span><span class="s1">'Pastrana'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingAddress1</span><span class="p">(</span><span class="s1">'Muster Str. 12'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingZipCode</span><span class="p">(</span><span class="s1">'10178'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingCity</span><span class="p">(</span><span class="s1">'Los Angeles'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingState</span><span class="p">(</span><span class="s1">'CA'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingCountry</span><span class="p">(</span><span class="s1">'US'</span><span class="p">)</span>


  <span class="c1">// Risk Params
</span>  <span class="o">-&gt;</span><span class="na">setRiskUserId</span><span class="p">(</span><span class="s1">'123456'</span><span class="p">)</span>


  <span class="c1">// Transaction Types
</span>  <span class="o">-&gt;</span><span class="na">addTransactionType</span><span class="p">(</span><span class="s1">'authorize'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">addTransactionType</span><span class="p">(</span><span class="s1">'sale'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setPayLater</span><span class="p">(</span><span class="s1">'true'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setReminders</span><span class="p">(</span><span class="s1">'{"reminder"=&gt;{"channel"=&gt;"email", "after"=&gt;40}}'</span><span class="p">);</span>

<span class="k">try</span> <span class="p">{</span>
    <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">execute</span><span class="p">();</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">response</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">getResponseObject</span><span class="p">();</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">\Exception</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$e</span><span class="o">-&gt;</span><span class="na">getMessage</span><span class="p">();</span>
<span class="p">}</span>
</code></pre>

<pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.GenesisClient</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.TransactionResult</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.constants.Endpoints</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.constants.Environments</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.requests.wpf.WPFCreateRequest</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.model.Transaction</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Configuration</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Country</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Currency</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.math.BigDecimal</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.MalformedURLException</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.URL</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">GenesisExample</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">MalformedURLException</span> <span class="o">{</span>

    <span class="c1">// Create configuration</span>
    <span class="n">Configuration</span> <span class="n">configuration</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Configuration</span><span class="o">(</span><span class="n">Environments</span><span class="o">.</span><span class="na">STAGING</span><span class="o">,</span> <span class="n">Endpoints</span><span class="o">.</span><span class="na">EMERCHANTPAY</span><span class="o">);</span>

    <span class="n">configuration</span><span class="o">.</span><span class="na">setUsername</span><span class="o">(</span><span class="s">"SET_YOUR_USERNAME"</span><span class="o">);</span>
    <span class="n">configuration</span><span class="o">.</span><span class="na">setPassword</span><span class="o">(</span><span class="s">"SET_YOUR_PASSWORD"</span><span class="o">);</span>
    <span class="n">configuration</span><span class="o">.</span><span class="na">setToken</span><span class="o">(</span><span class="s">"SET_YOUR_TOKEN"</span><span class="o">);</span>

    <span class="n">WPFCreateRequest</span> <span class="n">request</span> <span class="o">=</span> <span class="k">new</span> <span class="n">WPFCreateRequest</span><span class="o">();</span>

    <span class="n">request</span><span class="o">.</span><span class="na">setTransactionId</span><span class="o">(</span><span class="s">"43671"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setUsage</span><span class="o">(</span><span class="s">"40208 concert tickets"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setDescription</span><span class="o">(</span><span class="s">"You are about to buy 3 shoes at www.shoes.com!"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setNotificationUrl</span><span class="o">(</span><span class="k">new</span> <span class="n">URL</span><span class="o">(</span><span class="s">"https://www.example.com/notification"</span><span class="o">));</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setReturnSuccessUrl</span><span class="o">(</span><span class="k">new</span> <span class="n">URL</span><span class="o">(</span><span class="s">"http://www.example.com/success"</span><span class="o">));</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setReturnFailureUrl</span><span class="o">(</span><span class="k">new</span> <span class="n">URL</span><span class="o">(</span><span class="s">"http://www.example.com/failure"</span><span class="o">));</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setReturnCancelUrl</span><span class="o">(</span><span class="k">new</span> <span class="n">URL</span><span class="o">(</span><span class="s">"http://www.example.com/cancel.html"</span><span class="o">));</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setAmount</span><span class="o">(</span><span class="k">new</span> <span class="n">BigDecimal</span><span class="o">(</span><span class="mi">100</span><span class="o">));</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCurrency</span><span class="o">(</span><span class="s">"USD"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setConsumerId</span><span class="o">(</span><span class="s">"123456"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCustomerEmail</span><span class="o">(</span><span class="s">"travis@example.com"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCustomerPhone</span><span class="o">(</span><span class="s">"+1987987987987"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setRememberCard</span><span class="o">(</span><span class="s">"true"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setLifetime</span><span class="o">(</span><span class="mi">60</span><span class="o">);</span>


    <span class="c1">// Billing Address</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingFirstname</span><span class="o">(</span><span class="s">"Travis"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingLastname</span><span class="o">(</span><span class="s">"Pastrana"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingPrimaryAddress</span><span class="o">(</span><span class="s">"Muster Str. 12"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingZipCode</span><span class="o">(</span><span class="s">"10178"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingCity</span><span class="o">(</span><span class="s">"Los Angeles"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingState</span><span class="o">(</span><span class="s">"CA"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingCountry</span><span class="o">(</span><span class="s">"US"</span><span class="o">);</span>


    <span class="c1">// Risk Params</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setRiskUserId</span><span class="o">(</span><span class="s">"123456"</span><span class="o">);</span>


    <span class="c1">// Transaction Types</span>
    <span class="n">request</span><span class="o">.</span><span class="na">addTransactionType</span><span class="o">(</span><span class="s">"authorize"</span><span class="o">).</span><span class="na">done</span><span class="o">();</span>
    <span class="n">request</span><span class="o">.</span><span class="na">addTransactionType</span><span class="o">(</span><span class="s">"sale"</span><span class="o">).</span><span class="na">done</span><span class="o">();</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setPayLater</span><span class="o">(</span><span class="s">"true"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setReminders</span><span class="o">(</span><span class="s">"{"</span><span class="n">reminder</span><span class="s">"=&gt;{"</span><span class="n">channel</span><span class="s">"=&gt;"</span><span class="n">email</span><span class="s">", "</span><span class="n">after</span><span class="s">"=&gt;40}}"</span><span class="o">);</span>

    <span class="n">GenesisClient</span> <span class="n">client</span> <span class="o">=</span> <span class="k">new</span> <span class="n">GenesisClient</span><span class="o">(</span><span class="n">configuration</span><span class="o">,</span> <span class="n">request</span><span class="o">);</span>
    <span class="n">client</span><span class="o">.</span><span class="na">execute</span><span class="o">();</span>

    <span class="c1">// Parse Payment result</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">client</span><span class="o">.</span><span class="na">getResponse</span><span class="o">());</span>

  <span class="o">}</span>
<span class="o">}</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="kd">var</span> <span class="nx">genesis</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'genesis.js/lib/genesis.js'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">transaction</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">genesis</span><span class="p">.</span><span class="nx">transaction</span><span class="p">();</span>

<span class="kd">var</span> <span class="nx">failure</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">reason</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">reason</span><span class="p">);</span>
<span class="p">};</span>

<span class="kd">var</span> <span class="nx">success</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>

<span class="nx">transaction</span><span class="p">.</span><span class="nx">wpf_create</span><span class="p">(</span>
  <span class="p">{</span>
    <span class="s2">"transaction_id"</span><span class="p">:</span> <span class="s2">"43671"</span><span class="p">,</span>
    <span class="s2">"usage"</span><span class="p">:</span> <span class="s2">"40208 concert tickets"</span><span class="p">,</span>
    <span class="s2">"description"</span><span class="p">:</span> <span class="s2">"You are about to buy 3 shoes at www.shoes.com!"</span><span class="p">,</span>
    <span class="s2">"notification_url"</span><span class="p">:</span> <span class="s2">"https://www.example.com/notification"</span><span class="p">,</span>
    <span class="s2">"return_success_url"</span><span class="p">:</span> <span class="s2">"http://www.example.com/success"</span><span class="p">,</span>
    <span class="s2">"return_failure_url"</span><span class="p">:</span> <span class="s2">"http://www.example.com/failure"</span><span class="p">,</span>
    <span class="s2">"return_cancel_url"</span><span class="p">:</span> <span class="s2">"http://www.example.com/cancel.html"</span><span class="p">,</span>
    <span class="s2">"amount"</span><span class="p">:</span> <span class="s2">"100"</span><span class="p">,</span>
    <span class="s2">"currency"</span><span class="p">:</span> <span class="s2">"USD"</span><span class="p">,</span>
    <span class="s2">"consumer_id"</span><span class="p">:</span> <span class="s2">"123456"</span><span class="p">,</span>
    <span class="s2">"customer_email"</span><span class="p">:</span> <span class="s2">"travis@example.com"</span><span class="p">,</span>
    <span class="s2">"customer_phone"</span><span class="p">:</span> <span class="s2">"+1987987987987"</span><span class="p">,</span>
    <span class="s2">"remember_card"</span><span class="p">:</span> <span class="s2">"true"</span><span class="p">,</span>
    <span class="s2">"lifetime"</span><span class="p">:</span> <span class="mi">60</span><span class="p">,</span>
    <span class="s2">"billing_address"</span><span class="p">:</span> <span class="p">{</span>
      <span class="s2">"first_name"</span><span class="p">:</span> <span class="s2">"Travis"</span><span class="p">,</span>
      <span class="s2">"last_name"</span><span class="p">:</span> <span class="s2">"Pastrana"</span><span class="p">,</span>
      <span class="s2">"address1"</span><span class="p">:</span> <span class="s2">"Muster Str. 12"</span><span class="p">,</span>
      <span class="s2">"zip_code"</span><span class="p">:</span> <span class="s2">"10178"</span><span class="p">,</span>
      <span class="s2">"city"</span><span class="p">:</span> <span class="s2">"Los Angeles"</span><span class="p">,</span>
      <span class="s2">"state"</span><span class="p">:</span> <span class="s2">"CA"</span><span class="p">,</span>
      <span class="s2">"country"</span><span class="p">:</span> <span class="s2">"US"</span>
    <span class="p">},</span>
    <span class="s2">"risk_params"</span><span class="p">:</span> <span class="p">{</span>
      <span class="s2">"user_id"</span><span class="p">:</span> <span class="s2">"123456"</span>
    <span class="p">},</span>
    <span class="s2">"transaction_types"</span><span class="p">:</span> <span class="p">[</span>
      <span class="s2">"authorize"</span><span class="p">,</span>
      <span class="s2">"sale"</span>
    <span class="p">],</span>
    <span class="s2">"pay_later"</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="s2">"reminders"</span><span class="p">:</span> <span class="p">{</span>
      <span class="s2">"reminder"</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">"channel"</span><span class="p">:</span> <span class="s2">"email"</span><span class="p">,</span>
        <span class="s2">"after"</span><span class="p">:</span> <span class="mi">40</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">).</span><span class="nx">send</span><span class="p">()</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">success</span><span class="p">)</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">failure</span><span class="p">);</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>curl https://wpf.emerchantpay.net/wpf <span class="se">\</span>
   -H <span class="s2">"Content-Type: text/xml"</span> <span class="se">\</span>
   -d <span class="s1">'
&lt;wpf_payment&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;usage&gt;40208 concert tickets&lt;/usage&gt;
  &lt;description&gt;You are about to buy 3 shoes at www.shoes.com!&lt;/description&gt;
  &lt;notification_url&gt;https://www.example.com/notification&lt;/notification_url&gt;
  &lt;return_success_url&gt;http://www.example.com/success&lt;/return_success_url&gt;
  &lt;return_failure_url&gt;http://www.example.com/failure&lt;/return_failure_url&gt;
  &lt;return_cancel_url&gt;http://www.example.com/cancel.html&lt;/return_cancel_url&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
  &lt;consumer_id&gt;123456&lt;/consumer_id&gt;
  &lt;customer_email&gt;travis@example.com&lt;/customer_email&gt;
  &lt;customer_phone&gt;+1987987987987&lt;/customer_phone&gt;
  &lt;remember_card&gt;true&lt;/remember_card&gt;
  &lt;lifetime&gt;60&lt;/lifetime&gt;
  &lt;billing_address&gt;
    &lt;first_name&gt;Travis&lt;/first_name&gt;
    &lt;last_name&gt;Pastrana&lt;/last_name&gt;
    &lt;address1&gt;Muster Str. 12&lt;/address1&gt;
    &lt;zip_code&gt;10178&lt;/zip_code&gt;
    &lt;city&gt;Los Angeles&lt;/city&gt;
    &lt;state&gt;CA&lt;/state&gt;
    &lt;country&gt;US&lt;/country&gt;
  &lt;/billing_address&gt;
  &lt;risk_params&gt;
    &lt;user_id&gt;123456&lt;/user_id&gt;
  &lt;/risk_params&gt;
  &lt;transaction_types&gt;
    &lt;transaction_type name="authorize" /&gt;
    &lt;transaction_type name="sale" /&gt;
  &lt;/transaction_types&gt;
  &lt;pay_later&gt;true&lt;/pay_later&gt;
  &lt;reminders&gt;
    &lt;reminder&gt;
      &lt;channel&gt;email&lt;/channel&gt;
      &lt;after&gt;40&lt;/after&gt;
    &lt;/reminder&gt;
  &lt;/reminders&gt;
&lt;/wpf_payment&gt;'</span>
</code></pre>

<p><strong>Request Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_id</td>
<td>required</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>usage</td>
<td>optional</td>
<td>string(255)</td>
<td>Description of the transaction for later use</td>
</tr>
<tr>
<td>amount</td>
<td>required</td>
<td>integer &gt; 0</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>required</td>
<td>string(3)</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>description</td>
<td>optional</td>
<td>string</td>
<td>a text describing the reason of the payment (e.g. &quot;you’re buying concert tickets&quot;)</td>
</tr>
<tr>
<td>consumer_id</td>
<td>required*</td>
<td>string(10)</td>
<td>See <a href="#consumers">Consumers</a> and <a href="#tokenization">Tokenization</a>. Saved cards will be listed for user to select</td>
</tr>
<tr>
<td>customer_email</td>
<td>required*</td>
<td>e-mail address</td>
<td>Must contain valid e-mail of customer</td>
</tr>
<tr>
<td>customer_phone</td>
<td>required*</td>
<td>string(32)</td>
<td>Must contain valid phone number of customer</td>
</tr>
<tr>
<td>notification_url</td>
<td>required</td>
<td>url</td>
<td>URL at merchant where gateway sends outcome of transaction.</td>
</tr>
<tr>
<td>return_success_url</td>
<td>required</td>
<td>url</td>
<td>URL where customer is sent to after successful payment</td>
</tr>
<tr>
<td>return_failure_url</td>
<td>required</td>
<td>url</td>
<td>URL where customer is sent to after unsuccessful payment</td>
</tr>
<tr>
<td>return_cancel_url</td>
<td>required</td>
<td>string</td>
<td>URL where customer is sent to when the customer cancels the payment process within the WPF</td>
</tr>
<tr>
<td><strong>billing_address</strong></td>
<td>required</td>
<td></td>
<td>See <a href="#required-vs-optional-api-params">Required vs Optional API params</a> for details</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;first_name</td>
<td>required*</td>
<td>string(255)</td>
<td>Customer first name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;last_name</td>
<td>required*</td>
<td>string(255)</td>
<td>Customer last name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address1</td>
<td>required*</td>
<td>string(255)</td>
<td>Primary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address2</td>
<td>required*</td>
<td>string(255)</td>
<td>Secondary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;zip_code</td>
<td>required*</td>
<td>string</td>
<td>ZIP code</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;city</td>
<td>required*</td>
<td>string(255)</td>
<td>City</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;state</td>
<td>required*</td>
<td>string(2)</td>
<td>State code in <a href="https://en.wikipedia.org/wiki/ISO_3166-2">ISO 3166-2</a>, required for USA and Canada</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;country</td>
<td>required*</td>
<td>string(2)</td>
<td>Country code in <a href="https://www.iso.org/iso-3166-country-codes.html">ISO 3166</a></td>
</tr>
<tr>
<td><strong>shipping_address</strong></td>
<td>optional</td>
<td></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;first_name</td>
<td>optional</td>
<td>string(255)</td>
<td>Customer first name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;last_name</td>
<td>optional</td>
<td>string(255)</td>
<td>Customer last name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address1</td>
<td>optional</td>
<td>string(255)</td>
<td>Primary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address2</td>
<td>optional</td>
<td>string(255)</td>
<td>Secondary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;zip_code</td>
<td>optional</td>
<td>string</td>
<td>ZIP code</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;city</td>
<td>optional</td>
<td>string(255)</td>
<td>City</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;state</td>
<td>optional</td>
<td>string(2)</td>
<td>State code in <a href="https://en.wikipedia.org/wiki/ISO_3166-2">ISO 3166-2</a>, required for USA and Canada</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;country</td>
<td>optional</td>
<td>string(2)</td>
<td>Country code in <a href="https://www.iso.org/iso-3166-country-codes.html">ISO 3166</a></td>
</tr>
<tr>
<td><strong>transaction_types</strong></td>
<td>required</td>
<td></td>
<td>The transaction types that the merchant is willing to accept payments for</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;transaction_type</td>
<td>required</td>
<td>string</td>
<td>One of the available <a href="#wpf-transaction-types">WPF transaction types</a>. Multiple transaction type elements supported. Attribute ’name’ contains the transaction type name in question</td>
</tr>
<tr>
<td>remember_card</td>
<td>optional</td>
<td>&quot;true&quot;</td>
<td>See <a href="#tokenize">Tokenize</a>. Offer the user the option to save cardholder details for future use (tokenize).</td>
</tr>
<tr>
<td>lifetime</td>
<td>optional</td>
<td>integer</td>
<td>number of minutes determining how long the WPF will be valid. Will be set to 30 minutes by default. Valid value ranges between 1 minute and 31 days given in minutes</td>
</tr>
<tr>
<td><strong>risk_params</strong></td>
<td>optional</td>
<td></td>
<td>list of risk params as described in the <a href="#advanced-risk-management-with-riskparams">Advanced risk management with RiskParams</a> section</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;user_id (example)</td>
<td>optional</td>
<td>string</td>
<td>the customer’s ID within the merchant’s system (example)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;session_id (example)</td>
<td>optional</td>
<td>string</td>
<td>the customer’s session ID within the mer- chant’s system (example)</td>
</tr>
<tr>
<td><strong>dynamic_descriptor_params</strong></td>
<td>optional</td>
<td></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;merchant_name</td>
<td>optional</td>
<td>string(25)</td>
<td>Allows to dynamically override the charge descriptor</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;merchant_city</td>
<td>optional</td>
<td>string(13)</td>
<td>Allows to dynamically override the merchant phone number</td>
</tr>
<tr>
<td>pay_later</td>
<td>optional</td>
<td>&quot;true&quot;</td>
<td>Signifies whether the ’Pay Later’ feature would be enabled on the WPF</td>
</tr>
<tr>
<td><strong>reminders</strong></td>
<td>optional</td>
<td></td>
<td>Settings for reminders sending when using the ’Pay Later’ feature</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;<strong>reminder</strong></td>
<td>optional</td>
<td></td>
<td>Settings for a single reminder. Upto three reminders are allowed</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;channel</td>
<td>optional</td>
<td>string</td>
<td>Channel for sending WPF reminder. Valid values are ’email’ and ’sms’</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;after</td>
<td>optional</td>
<td>integer</td>
<td>Number of minutes after WPF creation when the reminder should be sent. Valid value ranges between 1 minute and 31 days given in minutes</td>
</tr>
</tbody></table>

<p><code>required* = conditionally required</code></p>

<blockquote>
<p>Successful Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>stdClass Object
(
    [transaction_type] =&gt; wpf_create
    [status] =&gt; new
    [mode] =&gt; live
    [transaction_id] =&gt; 43671
    [consumer_id] =&gt; 123456
    [unique_id] =&gt; 44177a21403427eb96664a6d7e5d5d48
    [technical_message] =&gt; Transaction successful!
    [message] =&gt; Transaction successful!
    [redirect_url] =&gt; https://wpf.emerchantpay.net/en/payment/c7e32c1e9d1
    [timestamp] =&gt; DateTime Object
        (
            [date] =&gt; 2019-03-14 12:06:03.000000
            [timezone_type] =&gt; 2
            [timezone] =&gt; Z
        )
    [amount] =&gt; 100
    [currency] =&gt; USD
)
</code></pre>

<pre class="highlight java tab-java"><code><span class="o">&lt;</span><span class="n">payment_response</span> <span class="n">content</span><span class="o">=[</span>
    <span class="o">&lt;</span><span class="n">transaction_type</span> <span class="n">content</span><span class="o">=[</span><span class="n">wpf_create</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">status</span> <span class="n">content</span><span class="o">=[</span><span class="k">new</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">mode</span> <span class="n">content</span><span class="o">=[</span><span class="n">live</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">transaction_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">43671</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">consumer_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">123456</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">unique_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">44177</span><span class="n">a21403427eb96664a6d7e5d5d48</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">technical_message</span> <span class="n">content</span><span class="o">=[</span><span class="n">Transaction</span> <span class="n">successful</span><span class="o">!]&gt;</span>
    <span class="o">&lt;</span><span class="n">message</span> <span class="n">content</span><span class="o">=[</span><span class="n">Transaction</span> <span class="n">successful</span><span class="o">!]&gt;</span>
    <span class="o">&lt;</span><span class="n">redirect_url</span> <span class="n">content</span><span class="o">=[</span><span class="nl">https:</span><span class="c1">//wpf.emerchantpay.net/en/payment/c7e32c1e9d1]&gt;</span>
    <span class="o">&lt;</span><span class="n">timestamp</span> <span class="n">content</span><span class="o">=[</span><span class="mi">2019</span><span class="o">-</span><span class="mo">03</span><span class="o">-</span><span class="mi">14</span><span class="nl">T12:</span><span class="mo">06</span><span class="o">:</span><span class="mo">03</span><span class="n">Z</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">amount</span> <span class="n">content</span><span class="o">=[</span><span class="mi">100</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">currency</span> <span class="n">content</span><span class="o">=[</span><span class="n">USD</span><span class="o">]&gt;</span>
<span class="o">]&gt;</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="p">{</span>
    <span class="nl">transaction_type</span><span class="p">:</span> <span class="s2">"wpf_create"</span><span class="p">,</span>
    <span class="nx">status</span><span class="p">:</span> <span class="s2">"new"</span><span class="p">,</span>
    <span class="nx">mode</span><span class="p">:</span> <span class="s2">"live"</span><span class="p">,</span>
    <span class="nx">transaction_id</span><span class="p">:</span> <span class="s2">"43671"</span><span class="p">,</span>
    <span class="nx">consumer_id</span><span class="p">:</span> <span class="s2">"123456"</span><span class="p">,</span>
    <span class="nx">unique_id</span><span class="p">:</span> <span class="s2">"44177a21403427eb96664a6d7e5d5d48"</span><span class="p">,</span>
    <span class="nx">technical_message</span><span class="p">:</span> <span class="s2">"Transaction successful!"</span><span class="p">,</span>
    <span class="nx">message</span><span class="p">:</span> <span class="s2">"Transaction successful!"</span><span class="p">,</span>
    <span class="nx">redirect_url</span><span class="p">:</span> <span class="s2">"https://wpf.emerchantpay.net/en/payment/c7e32c1e9d1"</span><span class="p">,</span>
    <span class="nx">timestamp</span><span class="p">:</span> <span class="s2">"2019-03-14T12:06:03Z"</span><span class="p">,</span>
    <span class="nx">amount</span><span class="p">:</span> <span class="s2">"100"</span><span class="p">,</span>
    <span class="nx">currency</span><span class="p">:</span> <span class="s2">"USD"</span><span class="p">,</span>
<span class="p">}</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;wpf_payment&gt;
  &lt;transaction_type&gt;wpf_create&lt;/transaction_type&gt;
  &lt;status&gt;new&lt;/status&gt;
  &lt;mode&gt;live&lt;/mode&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;consumer_id&gt;123456&lt;/consumer_id&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;technical_message&gt;Transaction successful!&lt;/technical_message&gt;
  &lt;message&gt;Transaction successful!&lt;/message&gt;
  &lt;redirect_url&gt;https://wpf.emerchantpay.net/en/payment/c7e32c1e9d1&lt;/redirect_url&gt;
  &lt;timestamp&gt;2019-03-14T12:06:03Z&lt;/timestamp&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
&lt;/wpf_payment&gt;
</code></pre>

<blockquote>
<p>Successful With Optional Invalid Transactions For Amount Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>stdClass Object
(
    [consumer_id] =&gt; 123456
    [timestamp] =&gt; DateTime Object
        (
            [date] =&gt; 2019-03-14 12:06:03.000000
            [timezone_type] =&gt; 2
            [timezone] =&gt; Z
        )
    [amount] =&gt; 100
    [currency] =&gt; USD
    [redirect_url] =&gt; https://wpf.emerchantpay.net/en/payment/c7e32c1e9d1
    [invalid_transactions_for_amount] =&gt; alipay
)
</code></pre>

<pre class="highlight java tab-java"><code><span class="o">&lt;</span><span class="n">payment_response</span> <span class="n">content</span><span class="o">=[</span>
    <span class="o">&lt;</span><span class="n">consumer_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">123456</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">timestamp</span> <span class="n">content</span><span class="o">=[</span><span class="mi">2019</span><span class="o">-</span><span class="mo">03</span><span class="o">-</span><span class="mi">14</span><span class="nl">T12:</span><span class="mo">06</span><span class="o">:</span><span class="mo">03</span><span class="n">Z</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">amount</span> <span class="n">content</span><span class="o">=[</span><span class="mi">100</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">currency</span> <span class="n">content</span><span class="o">=[</span><span class="n">USD</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">redirect_url</span> <span class="n">content</span><span class="o">=[</span><span class="nl">https:</span><span class="c1">//wpf.emerchantpay.net/en/payment/c7e32c1e9d1]&gt;</span>
    <span class="o">&lt;</span><span class="n">invalid_transactions_for_amount</span> <span class="n">content</span><span class="o">=[</span><span class="n">alipay</span><span class="o">]&gt;</span>
<span class="o">]&gt;</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="p">{</span>
    <span class="nl">consumer_id</span><span class="p">:</span> <span class="s2">"123456"</span><span class="p">,</span>
    <span class="nx">timestamp</span><span class="p">:</span> <span class="s2">"2019-03-14T12:06:03Z"</span><span class="p">,</span>
    <span class="nx">amount</span><span class="p">:</span> <span class="s2">"100"</span><span class="p">,</span>
    <span class="nx">currency</span><span class="p">:</span> <span class="s2">"USD"</span><span class="p">,</span>
    <span class="nx">redirect_url</span><span class="p">:</span> <span class="s2">"https://wpf.emerchantpay.net/en/payment/c7e32c1e9d1"</span><span class="p">,</span>
    <span class="nx">invalid_transactions_for_amount</span><span class="p">:</span> <span class="s2">"alipay"</span><span class="p">,</span>
<span class="p">}</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;wpf_payment&gt;
  &lt;consumer_id&gt;123456&lt;/consumer_id&gt;
  &lt;timestamp&gt;2019-03-14T12:06:03Z&lt;/timestamp&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
  &lt;redirect_url&gt;https://wpf.emerchantpay.net/en/payment/c7e32c1e9d1&lt;/redirect_url&gt;
  &lt;invalid_transactions_for_amount&gt;alipay&lt;/invalid_transactions_for_amount&gt;
&lt;/wpf_payment&gt;
</code></pre>

<p><strong>Successful Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>The transaction type</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>transaction_id</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>consumer_id</td>
<td>string(10)</td>
<td>Consumer unique reference. See <a href="#consumers">Consumers</a></td>
</tr>
<tr>
<td>unique_id</td>
<td>string(32)</td>
<td>Unique id defined by gate (must later be used if capturing, voiding or refunding a transaction)</td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
<tr>
<td>message</td>
<td>string(255)</td>
<td>Human readable error message which can be displayed to users.</td>
</tr>
<tr>
<td>redirect_url</td>
<td>url</td>
<td>URL where user has to be redirected to complete payment process. Contains the locale in which the web payment form will be rendered by default. See <a href="#wpf-internationalization-i18n">WPF Internationalization (i18n)</a></td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when the transaction was processed in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Combined date and time</a> e.g. 2007-08- 30T17:46:11Z</td>
</tr>
<tr>
<td>amount</td>
<td>integer</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Currency code in <a href="http://www.xe.com/iso4217.php">ISO 4217</a></td>
</tr>
<tr>
<td>invalid_transactions_for_amount</td>
<td>string*</td>
<td>list of comma separated transactions for which amount is not within the allowed limit *present only when at least for one transaction type an amount is invalid, check <a href="#currency-handling">Currency and Amount Handling</a> for details</td>
</tr>
</tbody></table>

<blockquote>
<p>Error Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>stdClass Object
(
    [transaction_type] =&gt; wpf_create
    [status] =&gt; error
    [mode] =&gt; live
    [transaction_id] =&gt; 43671
    [unique_id] =&gt; 44177a21403427eb96664a6d7e5d5d48
    [code] =&gt; 330
    [technical_message] =&gt; Unknown system error. Please contact support.
    [message] =&gt; Transaction failed, please contact support!
    [timestamp] =&gt; DateTime Object
        (
            [date] =&gt; 2019-03-14 12:06:03.000000
            [timezone_type] =&gt; 2
            [timezone] =&gt; Z
        )
    [amount] =&gt; 100
    [currency] =&gt; USD
)
</code></pre>

<pre class="highlight java tab-java"><code><span class="o">&lt;</span><span class="n">payment_response</span> <span class="n">content</span><span class="o">=[</span>
    <span class="o">&lt;</span><span class="n">transaction_type</span> <span class="n">content</span><span class="o">=[</span><span class="n">wpf_create</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">status</span> <span class="n">content</span><span class="o">=[</span><span class="n">error</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">mode</span> <span class="n">content</span><span class="o">=[</span><span class="n">live</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">transaction_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">43671</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">unique_id</span> <span class="n">content</span><span class="o">=[</span><span class="mi">44177</span><span class="n">a21403427eb96664a6d7e5d5d48</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">code</span> <span class="n">content</span><span class="o">=[</span><span class="mi">330</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">technical_message</span> <span class="n">content</span><span class="o">=[</span><span class="n">Unknown</span> <span class="n">system</span> <span class="n">error</span><span class="o">.</span> <span class="n">Please</span> <span class="n">contact</span> <span class="n">support</span><span class="o">.]&gt;</span>
    <span class="o">&lt;</span><span class="n">message</span> <span class="n">content</span><span class="o">=[</span><span class="n">Transaction</span> <span class="n">failed</span><span class="o">,</span> <span class="n">please</span> <span class="n">contact</span> <span class="n">support</span><span class="o">!]&gt;</span>
    <span class="o">&lt;</span><span class="n">timestamp</span> <span class="n">content</span><span class="o">=[</span><span class="mi">2019</span><span class="o">-</span><span class="mo">03</span><span class="o">-</span><span class="mi">14</span><span class="nl">T12:</span><span class="mo">06</span><span class="o">:</span><span class="mo">03</span><span class="n">Z</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">amount</span> <span class="n">content</span><span class="o">=[</span><span class="mi">100</span><span class="o">]&gt;</span>
    <span class="o">&lt;</span><span class="n">currency</span> <span class="n">content</span><span class="o">=[</span><span class="n">USD</span><span class="o">]&gt;</span>
<span class="o">]&gt;</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="p">{</span>
    <span class="nl">transaction_type</span><span class="p">:</span> <span class="s2">"wpf_create"</span><span class="p">,</span>
    <span class="nx">status</span><span class="p">:</span> <span class="s2">"error"</span><span class="p">,</span>
    <span class="nx">mode</span><span class="p">:</span> <span class="s2">"live"</span><span class="p">,</span>
    <span class="nx">transaction_id</span><span class="p">:</span> <span class="s2">"43671"</span><span class="p">,</span>
    <span class="nx">unique_id</span><span class="p">:</span> <span class="s2">"44177a21403427eb96664a6d7e5d5d48"</span><span class="p">,</span>
    <span class="nx">code</span><span class="p">:</span> <span class="s2">"330"</span><span class="p">,</span>
    <span class="nx">technical_message</span><span class="p">:</span> <span class="s2">"Unknown system error. Please contact support."</span><span class="p">,</span>
    <span class="nx">message</span><span class="p">:</span> <span class="s2">"Transaction failed, please contact support!"</span><span class="p">,</span>
    <span class="nx">timestamp</span><span class="p">:</span> <span class="s2">"2019-03-14T12:06:03Z"</span><span class="p">,</span>
    <span class="nx">amount</span><span class="p">:</span> <span class="s2">"100"</span><span class="p">,</span>
    <span class="nx">currency</span><span class="p">:</span> <span class="s2">"USD"</span><span class="p">,</span>
<span class="p">}</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;wpf_payment&gt;
  &lt;transaction_type&gt;wpf_create&lt;/transaction_type&gt;
  &lt;status&gt;error&lt;/status&gt;
  &lt;mode&gt;live&lt;/mode&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;unique_id&gt;44177a21403427eb96664a6d7e5d5d48&lt;/unique_id&gt;
  &lt;code&gt;330&lt;/code&gt;
  &lt;technical_message&gt;Unknown system error. Please contact support.&lt;/technical_message&gt;
  &lt;message&gt;Transaction failed, please contact support!&lt;/message&gt;
  &lt;timestamp&gt;2019-03-14T12:06:03Z&lt;/timestamp&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
&lt;/wpf_payment&gt;
</code></pre>

<p><strong>Error Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>The transaction type</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Mode of the transaction’s terminal, can be &quot;live&quot; or &quot;test&quot;</td>
</tr>
<tr>
<td>transaction_id</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>unique_id</td>
<td>string(32)</td>
<td>Unique id defined by gate (must later be used if capturing, voiding or refunding a transaction)</td>
</tr>
<tr>
<td>code</td>
<td>integer</td>
<td>Error code according to <a href="#error-code-table">Error code table</a></td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
<tr>
<td>message</td>
<td>string(255)</td>
<td>Human readable error message which can be displayed to users.</td>
</tr>
</tbody></table>

<h3 id='notification'>Notification</h3>

<p>WPF Notifications are sent once the WPF payment has reached a final state and are transmitted via HTTP POST (application/x-www-form-urlencoded) with the following parameters:</p>

<aside class="notice" >
  Apart from the workflow described above, the Genesis system will also use the notification url endpoint to send notifications to the merchant if a WPF payment is chargebacked.
</aside>

<pre class="highlight xml tab-xml"><code>signature=c5219b3d385e74496b2b48a5497b347e102849f10eacd25b062f823b
<span class="err">&amp;</span>payment_transaction_transaction_type=sale
<span class="err">&amp;</span>payment_transaction_terminal_token=e9fd7a957845450fb7ab9dccb498b6e1f6e1e3aa
<span class="err">&amp;</span>payment_transaction_unique_id=bad08183a9ec545daf0f24c48361aa10
<span class="err">&amp;</span>payment_transaction_amount=500
<span class="err">&amp;</span>wpf_transaction_id=mtid201104081447161135536962
<span class="err">&amp;</span>wpf_status=approved
<span class="err">&amp;</span>wpf_unique_id=26aa150ee68b1b2d6758a0e6c44fce4c
<span class="err">&amp;</span>consumer_id=123456
<span class="err">&amp;</span>token=ee946db8-d7db-4bb7-b608-b65b153e127d
<span class="err">&amp;</span>notification_type=wpf
<span class="err">&amp;</span>eci=05
<span class="err">&amp;</span>payment_transaction_avs_response_code=5I
<span class="err">&amp;</span>payment_transaction_avs_response_text=Response+provided+by+issuer+processor%3B+Address+information+not+verified
</code></pre>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>signature</td>
<td>string</td>
<td>the signature of the notification, should be used to verify the the notification was sent by Genesis</td>
</tr>
<tr>
<td>payment_transaction_transaction_type</td>
<td>string</td>
<td>transaction type for the transaction eg: sale3d</td>
</tr>
<tr>
<td>payment_transaction_terminal_token</td>
<td>string</td>
<td>the terminal token as used in the processing url</td>
</tr>
<tr>
<td>payment_transaction_unique_id</td>
<td>string</td>
<td>unique id generated by Genesis</td>
</tr>
<tr>
<td>payment_transaction_amount</td>
<td>string</td>
<td>Amount of the payment transaction. If the transaction is partially approved, this is the partially approved amount. Check <a href="#partial-approvals">Partial Approvals</a> for details</td>
</tr>
<tr>
<td>payment_transaction_partial_approval</td>
<td>string</td>
<td>If the transaction is partially approved, this is set to ’true’. Check <a href="#partial-approvals">Partial Approvals</a> for details</td>
</tr>
<tr>
<td>wpf_transaction_id</td>
<td>string</td>
<td>merchant generated tranaction id</td>
</tr>
<tr>
<td>wpf_status</td>
<td>string</td>
<td>status of the payment transaction</td>
</tr>
<tr>
<td>wpf_unique_id</td>
<td>string</td>
<td>unique id generated by Genesis, required for WPF payment reconciliation</td>
</tr>
<tr>
<td>consumer_id</td>
<td>string(10)</td>
<td>Consumer unique reference. See <a href="#consumers">Consumers</a></td>
</tr>
<tr>
<td>token</td>
<td>string(36)</td>
<td>Plain-text token value. See <a href="#tokenize">Tokenize</a></td>
</tr>
<tr>
<td>notification_type</td>
<td>string</td>
<td>constant value ”wpf”</td>
</tr>
<tr>
<td>eci</td>
<td>string</td>
<td>See <a href="#electronic-commerce-indicator">Electronic Commerce Indicator</a> as returned from the MPI for details</td>
</tr>
<tr>
<td>payment_transaction_avs_response_code</td>
<td>string</td>
<td>Generated by the card network on trying to match the billing address when performing the address verification. Optional, returned if config is enabled and acquirer supports it. Check <a href="#avs-status-codes">AVS Status Codes</a> for details.</td>
</tr>
<tr>
<td>payment_transaction_avs_response_text</td>
<td>string</td>
<td>Gives the human response text for the AVS response code above. Optional, returned if config is enabled and acquirer supports it. Check <a href="#avs-status-codes">AVS Status Codes</a> for details.</td>
</tr>
</tbody></table>

<p>Status will be one of the following: approved, declined, error, timeout, pending, refunded, voided, chargebacked, chargeback reversed, and second chargebacked.</p>

<p>The signature is a mean of security to ensure that the gate is really the sender of the notification. It is generated by concatenating the unique id of the payment with your API password and generating a SHA-512 Hash (Hex) of the string:</p>

<p><code>SHA-512 Hash Hex of &lt;wpf_unique_id&gt;&lt;Your Merchant API password&gt;</code></p>

<p><strong>Notification signature examples</strong></p>

<table><thead>
<tr>
<th>unique id</th>
<th>API password</th>
<th>signature</th>
</tr>
</thead><tbody>
<tr>
<td>26aa150ee68b1b2d6758a0e6c44fce4c</td>
<td>50fd87e65eb415f42fb5af4c9cf497662e00b785</td>
<td>c5219b3d385e74496b2b48a549</td>
</tr>
<tr>
<td>3f760162ef57a829011e5e2379b3fa17</td>
<td>50fd87e65eb415f42fb5af4c9cf497662e00b785</td>
<td>14519d0db2f7f8f407efccc9b099</td>
</tr>
</tbody></table>

<aside class="ntice" >
You must either use the signature to verify the notification’s integrity or make a reconcile to check the final transaction status.
</aside>

<pre class="highlight xml tab-xml"><code><span class="cp">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="nt">&lt;notification_echo&gt;</span>
  <span class="nt">&lt;wpf_unique_id&gt;</span>3f760162ef57a829011e5e2379b3fa17<span class="nt">&lt;/wpf_unique_id&gt;</span>
<span class="nt">&lt;/notification_echo&gt;</span>
</code></pre>

<p>When receiving the notification, you are required to render an xml page containing the transaction’s unique id so that the gateway knows that you have accepted the notification. If the XML is not delivered, the notification is sent periodically until the XML is received.</p>

<h3 id='reconcile-2'>Reconcile</h3>

<p>Reconcile can be used to retrieve data about a payment. This can be useful if you want to retrieve information about a payment whose status is timeout, which returned an error or has changed eg. has beed chargebacked.</p>

<p>Reconcile request are handled exactly like transaction requests via XML. To a large degree, the WPF Reconcile follows the notions of the standard processing Reconcile API.</p>

<pre class="highlight xml tab-xml"><code><span class="cp">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="nt">&lt;wpf_reconcile&gt;</span>
  <span class="nt">&lt;unique_id&gt;</span>26aa150ee68b1b2d6758a0e6c44fce4c<span class="nt">&lt;/unique_id&gt;</span>
<span class="nt">&lt;/wpf_reconcile&gt;</span>
</code></pre>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>unique_id</td>
<td>required</td>
<td>string(32)</td>
<td>unique id as returned by the create request</td>
</tr>
</tbody></table>

<aside class="notice" >
Please note that the response may include multiple payment transaction records, since a WPF payment is a container class for multiple payment transactions.
Card brand and card number will be available in response only for card transaction types.
</aside>

<blockquote>
<p>Example Reconcile Response XML for successful payment that is partially approved (check Partial Approvals for details):</p>
</blockquote>

<pre class="highlight xml tab-xml"><code><span class="cp">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="nt">&lt;wpf_payment&gt;</span>
  <span class="nt">&lt;status&gt;</span>approved<span class="nt">&lt;/status&gt;</span>
  <span class="nt">&lt;unique_id&gt;</span>26aa150ee68b1b2d6758a0e6c44fce4c<span class="nt">&lt;/unique_id&gt;</span>
  <span class="nt">&lt;transaction_id&gt;</span>mtid201104081447161135536962<span class="nt">&lt;/transaction_id&gt;</span>
  <span class="nt">&lt;consumer_id&gt;</span>123456<span class="nt">&lt;/consumer_id&gt;</span>
  <span class="nt">&lt;timestamp&gt;</span>2011-04-08T14:46:27Z<span class="nt">&lt;/timestamp&gt;</span>
  <span class="nt">&lt;amount&gt;</span>5000<span class="nt">&lt;/amount&gt;</span>
  <span class="nt">&lt;currency&gt;</span>USD<span class="nt">&lt;/currency&gt;</span>
  <span class="nt">&lt;card_brand&gt;</span>visa<span class="nt">&lt;/card_brand&gt;</span>
  <span class="nt">&lt;card_number&gt;</span>420000...0000<span class="nt">&lt;/card_number&gt;</span>
  <span class="nt">&lt;payment_transaction&gt;</span>
    <span class="nt">&lt;status&gt;</span>approved<span class="nt">&lt;/status&gt;</span>
    <span class="nt">&lt;authorization_code&gt;</span>345678<span class="nt">&lt;/authorization_code&gt;</span>
    <span class="nt">&lt;response_code&gt;</span>00<span class="nt">&lt;/response_code&gt;</span>
    <span class="nt">&lt;transaction_type&gt;</span>sale<span class="nt">&lt;/transaction_type&gt;</span>
    <span class="nt">&lt;unique_id&gt;</span>bad08183a9ec545daf0f24c48361aa10<span class="nt">&lt;/unique_id&gt;</span>
    <span class="nt">&lt;transaction_id&gt;</span>mtid201104081447161135536962<span class="nt">&lt;/transaction_id&gt;</span>
    <span class="nt">&lt;terminal_token&gt;</span>e9fd7a957845450fb7ab9dccb498b6e1f6e1e3aa<span class="nt">&lt;/terminal_token&gt;</span>
    <span class="nt">&lt;mode&gt;</span>test<span class="nt">&lt;/mode&gt;</span>
    <span class="nt">&lt;timestamp&gt;</span>2011-04-08T14:46:40Z<span class="nt">&lt;/timestamp&gt;</span>
    <span class="nt">&lt;descriptor&gt;</span>emerchantpay.net/bogus +49123456789<span class="nt">&lt;/descriptor&gt;</span>
    <span class="nt">&lt;amount&gt;</span>4900<span class="nt">&lt;/amount&gt;</span>
    <span class="nt">&lt;partial_approval&gt;</span>true<span class="nt">&lt;/partial_approval&gt;</span>
    <span class="nt">&lt;currency&gt;</span>USD<span class="nt">&lt;/currency&gt;</span>
    <span class="nt">&lt;customer_email&gt;</span>john.doe@example.com<span class="nt">&lt;/customer_email&gt;</span>
    <span class="nt">&lt;customer_phone&gt;</span>+11234567890<span class="nt">&lt;/customer_phone&gt;</span>
    <span class="nt">&lt;technical_message&gt;</span>TESTMODE: No real money will be transferred!<span class="nt">&lt;/technical_message&gt;</span>
    <span class="nt">&lt;message&gt;</span>TESTMODE: No real money will be transferred!<span class="nt">&lt;/message&gt;</span>
    <span class="nt">&lt;billing_address&gt;</span>
      <span class="nt">&lt;first_name&gt;</span>John<span class="nt">&lt;/first_name&gt;</span>
      <span class="nt">&lt;last_name&gt;</span>Doe<span class="nt">&lt;/last_name&gt;</span>
      <span class="nt">&lt;address1&gt;</span>32, Doestreet<span class="nt">&lt;/address1&gt;</span>
      <span class="nt">&lt;address2&gt;&lt;/address2&gt;</span>
      <span class="nt">&lt;zip_code&gt;</span>12345<span class="nt">&lt;/zip_code&gt;</span>
      <span class="nt">&lt;city&gt;</span>New York<span class="nt">&lt;/city&gt;</span>
      <span class="nt">&lt;state&gt;</span>NY<span class="nt">&lt;/state&gt;</span>
      <span class="nt">&lt;country&gt;</span>US<span class="nt">&lt;/country&gt;</span>
    <span class="nt">&lt;/billing_address&gt;</span>
  <span class="nt">&lt;/payment_transaction&gt;</span>
<span class="nt">&lt;/wpf_payment&gt;</span>
</code></pre>

<blockquote>
<p>Example Response XML for voided payment:</p>
</blockquote>

<pre class="highlight xml tab-xml"><code><span class="cp">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="nt">&lt;wpf_payment&gt;</span>
  <span class="nt">&lt;status&gt;</span>voided<span class="nt">&lt;/status&gt;</span>
  <span class="nt">&lt;unique_id&gt;</span>26aa150ee68b1b2d6758a0e6c44fce4c<span class="nt">&lt;/unique_id&gt;</span>
  <span class="nt">&lt;transaction_id&gt;</span>mtid201104081447161135536962<span class="nt">&lt;/transaction_id&gt;</span>
  <span class="nt">&lt;consumer_id&gt;</span>123456<span class="nt">&lt;/consumer_id&gt;</span>
  <span class="nt">&lt;timestamp&gt;</span>2011-04-08T14:46:27Z<span class="nt">&lt;/timestamp&gt;</span>
  <span class="nt">&lt;amount&gt;</span>5000<span class="nt">&lt;/amount&gt;</span>
  <span class="nt">&lt;currency&gt;</span>USD<span class="nt">&lt;/currency&gt;</span>
  <span class="nt">&lt;card_brand&gt;</span>visa<span class="nt">&lt;/card_brand&gt;</span>
  <span class="nt">&lt;card_number&gt;</span>420000...0000<span class="nt">&lt;/card_number&gt;</span>
  <span class="nt">&lt;payment_transaction&gt;</span>
    <span class="nt">&lt;status&gt;</span>voided<span class="nt">&lt;/status&gt;</span>
    <span class="nt">&lt;authorization_code&gt;</span>345678<span class="nt">&lt;/authorization_code&gt;</span>
    <span class="nt">&lt;response_code&gt;</span>00<span class="nt">&lt;/response_code&gt;</span>
    <span class="nt">&lt;transaction_type&gt;</span>sale<span class="nt">&lt;/transaction_type&gt;</span>
    <span class="nt">&lt;unique_id&gt;</span>bad08183a9ec545daf0f24c48361aa10<span class="nt">&lt;/unique_id&gt;</span>
    <span class="nt">&lt;transaction_id&gt;</span>mtid201104081447161135536962<span class="nt">&lt;/transaction_id&gt;</span>
    <span class="nt">&lt;terminal_token&gt;</span>e9fd7a957845450fb7ab9dccb498b6e1f6e1e3aa<span class="nt">&lt;/terminal_token&gt;</span>
    <span class="nt">&lt;mode&gt;</span>test<span class="nt">&lt;/mode&gt;</span>
    <span class="nt">&lt;timestamp&gt;</span>2011-04-08T14:46:40Z<span class="nt">&lt;/timestamp&gt;</span>
    <span class="nt">&lt;descriptor&gt;</span>emerchantpay.net/bogus +49123456789<span class="nt">&lt;/descriptor&gt;</span>
    <span class="nt">&lt;amount&gt;</span>5000<span class="nt">&lt;/amount&gt;</span>
    <span class="nt">&lt;currency&gt;</span>USD<span class="nt">&lt;/currency&gt;</span>
    <span class="nt">&lt;customer_email&gt;</span>john.doe@example.com<span class="nt">&lt;/customer_email&gt;</span>
    <span class="nt">&lt;customer_phone&gt;</span>+11234567890<span class="nt">&lt;/customer_phone&gt;</span>
    <span class="nt">&lt;billing_address&gt;</span>
     <span class="nt">&lt;first_name&gt;</span>John<span class="nt">&lt;/first_name&gt;</span>
     <span class="nt">&lt;last_name&gt;</span>Doe<span class="nt">&lt;/last_name&gt;</span>
     <span class="nt">&lt;address1&gt;</span>32, Doestreet<span class="nt">&lt;/address1&gt;</span>
     <span class="nt">&lt;address2&gt;&lt;/address2&gt;</span>
     <span class="nt">&lt;zip_code&gt;</span>12345<span class="nt">&lt;/zip_code&gt;</span>
     <span class="nt">&lt;city&gt;</span>New York<span class="nt">&lt;/city&gt;</span>
     <span class="nt">&lt;state&gt;</span>NY<span class="nt">&lt;/state&gt;</span>
     <span class="nt">&lt;country&gt;</span>US<span class="nt">&lt;/country&gt;</span>
    <span class="nt">&lt;/billing_address&gt;</span>
  <span class="nt">&lt;/payment_transaction&gt;</span>
  <span class="nt">&lt;payment_transaction&gt;</span>
    <span class="nt">&lt;status&gt;</span>approved<span class="nt">&lt;/status&gt;</span>
    <span class="nt">&lt;authorization_code&gt;</span>345678<span class="nt">&lt;/authorization_code&gt;</span>
    <span class="nt">&lt;response_code&gt;</span>00<span class="nt">&lt;/response_code&gt;</span>
    <span class="nt">&lt;transaction_type&gt;</span>void<span class="nt">&lt;/transaction_type&gt;</span>
    <span class="nt">&lt;unique_id&gt;</span>bad08183a9ec545daf0f24c48361aa10<span class="nt">&lt;/unique_id&gt;</span>
    <span class="nt">&lt;transaction_id&gt;</span>mtid201104081447161135536962<span class="nt">&lt;/transaction_id&gt;</span>
    <span class="nt">&lt;terminal_token&gt;</span>e9fd7a957845450fb7ab9dccb498b6e1f6e1e3aa<span class="nt">&lt;/terminal_token&gt;</span>
    <span class="nt">&lt;mode&gt;</span>test<span class="nt">&lt;/mode&gt;</span>
    <span class="nt">&lt;timestamp&gt;</span>2011-04-08T14:46:40Z<span class="nt">&lt;/timestamp&gt;</span>
    <span class="nt">&lt;descriptor&gt;</span>emerchantpay.net/bogus +49123456789<span class="nt">&lt;/descriptor&gt;</span>
    <span class="nt">&lt;amount&gt;</span>5000<span class="nt">&lt;/amount&gt;</span>
    <span class="nt">&lt;currency&gt;</span>USD<span class="nt">&lt;/currency&gt;</span>
  <span class="nt">&lt;/payment_transaction&gt;</span>
<span class="nt">&lt;/wpf_payment&gt;</span>
</code></pre>

<blockquote>
<p>Example Error Response XML:</p>
</blockquote>

<pre class="highlight xml tab-xml"><code><span class="cp">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="nt">&lt;wpf_payment&gt;</span>
  <span class="nt">&lt;status&gt;</span>error<span class="nt">&lt;/status&gt;</span>
  <span class="nt">&lt;code&gt;</span>100<span class="nt">&lt;/code&gt;</span>
  <span class="nt">&lt;technical_message&gt;</span>Unknown system error. Please contact support.<span class="nt">&lt;/technical_message&gt;</span>
  <span class="nt">&lt;message&gt;</span>Transaction failed, please contact support!<span class="nt">&lt;/message&gt;</span>
<span class="nt">&lt;/wpf_payment&gt;</span>
</code></pre>
<h3 id='errors'>Errors</h3>
<aside class="notice" >
WPF returns the same error codes/XML as the regular Server-to-Server API methods (e.g. sale). See the Error Section for more details.
</aside>

<h2 id='wpf-transaction-types'>WPF transaction types</h2>

<p>The web payment form supports the typical card-related transaction types such as authorizes, sales, and init recurring - with and without 3D (see below). If more than one card-based transaction type is passed, then if the cardholder decides to pay with a credit card, the first card-based transaction type with a valid configuration - terminals, MIDs, currencies, etc - is selected and used when cardholder decides to pay with a (credit) card.</p>

<p>In addition, the WPF API supports a host of alternative payment methods (APMs), bank transfer payments, wallets, and more. All of the alternative transaction types are offered to the cardholder for payment, so the cardholder can choose between credit cards and alternatives defined by the merchant. Only credit cards or only a single alternative method can also work, there is no need to always offer credit cards for example.</p>

<p>Merchant custom attributes for a number of the transaction types are required. The WPF API supports those merchant custom attributes - they are submitted as child elements to the transaction type they belong to(see WPF API example request above).</p>

<p>The web payment form has the concept of a default payment method. If a given transaction type has the ’default’ attribute set to ’true’, then this transaction type will be pre-selected as default when the cardholder is redirected to the web payment form. If more than one transaction type has the ’default’ attribute, the first one with this attribute will be pre-selected. In the case there is only one transaction type requested (with or without the ’default’=’true’), this transaction type is automatically set as default by design.</p>

<p>Note that for each transaction type requested by a merchant in the WPF API, a valid configuration should exist - valid terminal, currency, MID, web payment form enabled for the merchant, etc. - otherwise a configuration error will be raised. If this happens, contact the IT support team to resolve/configure your desired transaction types correctly.</p>

<blockquote>
<p>Example Request XML with custom attributes:</p>
</blockquote>

<pre class="highlight xml tab-xml"><code><span class="cp">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="nt">&lt;wpf_payment&gt;</span>
  <span class="nt">&lt;transaction_id&gt;</span>wev238f328nc<span class="nt">&lt;/transaction_id&gt;</span>
  <span class="nt">&lt;usage&gt;</span>Order ID 500, Shoes<span class="nt">&lt;/usage&gt;</span>
  <span class="nt">&lt;description&gt;</span>You are about to buy 3 shoes at www.shoes.com!<span class="nt">&lt;/description&gt;</span>
  <span class="nt">&lt;notification_url&gt;</span>https://example.com/notification<span class="nt">&lt;/notification_url&gt;</span>
  <span class="nt">&lt;return_success_url&gt;</span>https://example.com/return_success<span class="nt">&lt;/return_success_url&gt;</span>
  <span class="nt">&lt;return_failure_url&gt;</span>https://example.com/return_failure<span class="nt">&lt;/return_failure_url&gt;</span>
  <span class="nt">&lt;return_cancel_url&gt;</span>https://example.com/return_cancel<span class="nt">&lt;/return_cancel_url&gt;</span>
  <span class="nt">&lt;amount&gt;</span>5000<span class="nt">&lt;/amount&gt;</span>
  <span class="nt">&lt;currency&gt;</span>USD<span class="nt">&lt;/currency&gt;</span>
  <span class="nt">&lt;customer_email&gt;</span>john.doe@example.com<span class="nt">&lt;/customer_email&gt;</span>
  <span class="nt">&lt;customer_phone&gt;</span>+11234567890<span class="nt">&lt;/customer_phone&gt;</span>
  <span class="nt">&lt;card_holder&gt;</span>john doe<span class="nt">&lt;/card_holder&gt;</span>
  <span class="nt">&lt;billing_address&gt;</span>
    <span class="nt">&lt;first_name&gt;</span>John<span class="nt">&lt;/first_name&gt;</span>
    <span class="nt">&lt;last_name&gt;</span>Doe<span class="nt">&lt;/last_name&gt;</span>
    <span class="nt">&lt;address1&gt;</span>23, Doestreet<span class="nt">&lt;/address1&gt;</span>
    <span class="nt">&lt;zip_code&gt;</span>11923<span class="nt">&lt;/zip_code&gt;</span>
    <span class="nt">&lt;city&gt;</span>New York City<span class="nt">&lt;/city&gt;</span>
    <span class="nt">&lt;state&gt;</span>NY<span class="nt">&lt;/state&gt;</span>
    <span class="nt">&lt;country&gt;</span>US<span class="nt">&lt;/country&gt;</span>
  <span class="nt">&lt;/billing_address&gt;</span>
  <span class="nt">&lt;transaction_types&gt;</span>
    <span class="nt">&lt;transaction_type</span> <span class="na">name=</span><span class="s">"sale"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;bin&gt;</span>420000<span class="nt">&lt;/bin&gt;</span>
      <span class="nt">&lt;tail&gt;</span>0000<span class="nt">&lt;/tail&gt;</span>
      <span class="nt">&lt;expiration_date&gt;</span>2017-03<span class="nt">&lt;/expiration_date&gt;</span>
    <span class="nt">&lt;/transaction_type&gt;</span>
    <span class="nt">&lt;transaction_type</span> <span class="na">name=</span><span class="s">"sale3d"</span> <span class="na">default=</span><span class="s">"true"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;tail&gt;</span>1111<span class="nt">&lt;/tail&gt;</span>
      <span class="nt">&lt;expiration_date&gt;</span>2016-03<span class="nt">&lt;/expiration_date&gt;</span>
    <span class="nt">&lt;/transaction_type&gt;</span>
    <span class="nt">&lt;transaction_type</span> <span class="na">name=</span><span class="s">"cashu"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;transaction_type</span> <span class="na">name=</span><span class="s">"ezeewallet"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;source_wallet_id&gt;</span>john.doe@emerchantpay.net<span class="nt">&lt;/source_wallet_id&gt;</span>
    <span class="nt">&lt;/transaction_type&gt;</span>
    <span class="nt">&lt;transaction_type</span> <span class="na">name=</span><span class="s">"paybyvoucher_yeepay"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;product_name&gt;</span>Some Product Name<span class="nt">&lt;/product_name&gt;</span>
      <span class="nt">&lt;product_category&gt;</span>Some Product Category<span class="nt">&lt;/product_category&gt;</span>
      <span class="nt">&lt;card_type&gt;</span>virtual<span class="nt">&lt;/card_type&gt;</span>
      <span class="nt">&lt;redeem_type&gt;</span>stored<span class="nt">&lt;/redeem_type&gt;</span>
    <span class="nt">&lt;/transaction_type&gt;</span>
    <span class="nt">&lt;transaction_type</span> <span class="na">name=</span><span class="s">"paybyvoucher_sale"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;card_type&gt;</span>virtual<span class="nt">&lt;/card_type&gt;</span>
      <span class="nt">&lt;redeem_type&gt;</span>stored<span class="nt">&lt;/redeem_type&gt;</span>
    <span class="nt">&lt;/transaction_type&gt;</span>
    <span class="nt">&lt;transaction_type</span> <span class="na">name=</span><span class="s">"citadel_payin"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;merchant_customer_id&gt;</span>123456789<span class="nt">&lt;/merchant_customer_id&gt;</span>
    <span class="nt">&lt;/transaction_type&gt;</span>
  <span class="nt">&lt;/transaction_types&gt;</span>
  <span class="nt">&lt;risk_params&gt;</span>
    <span class="nt">&lt;user_id&gt;</span>123456<span class="nt">&lt;/user_id&gt;</span>
  <span class="nt">&lt;/risk_params&gt;</span>
<span class="nt">&lt;/wpf_payment&gt;</span>
</code></pre>

<table><thead>
<tr>
<th>Transaction Type</th>
<th>Custom Attribute</th>
<th>Requred</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>authorize</td>
<td></td>
<td></td>
<td>A standard authorization</td>
</tr>
<tr>
<td></td>
<td>bin</td>
<td>no</td>
<td>Card’s first 6 digits</td>
</tr>
<tr>
<td></td>
<td>tail</td>
<td>no</td>
<td>Card’s last 4 digits</td>
</tr>
<tr>
<td></td>
<td>default</td>
<td>no</td>
<td>Configure as default or not</td>
</tr>
<tr>
<td></td>
<td>expiration_date</td>
<td>no</td>
<td>Expiration month and year</td>
</tr>
<tr>
<td>authorize3d</td>
<td></td>
<td></td>
<td>A 3D-based authorization</td>
</tr>
<tr>
<td></td>
<td>bin</td>
<td>no</td>
<td>Card’s first 6 digits</td>
</tr>
<tr>
<td></td>
<td>tail</td>
<td>no</td>
<td>Card’s last 4 digits</td>
</tr>
<tr>
<td></td>
<td>default</td>
<td>no</td>
<td>Configure as default or not</td>
</tr>
<tr>
<td></td>
<td>expiration_date</td>
<td>no</td>
<td>Expiration month and year</td>
</tr>
<tr>
<td>sale</td>
<td></td>
<td></td>
<td>A standard sale</td>
</tr>
<tr>
<td></td>
<td>bin</td>
<td>no</td>
<td>Card’s first 6 digits</td>
</tr>
<tr>
<td></td>
<td>tail</td>
<td>no</td>
<td>Card’s last 4 digits</td>
</tr>
<tr>
<td></td>
<td>default</td>
<td>no</td>
<td>Configure as default or not</td>
</tr>
<tr>
<td></td>
<td>expiration_date</td>
<td>no</td>
<td>Expiration month and year</td>
</tr>
<tr>
<td>sale3d</td>
<td></td>
<td></td>
<td>A 3D-based sale</td>
</tr>
<tr>
<td></td>
<td>bin</td>
<td>no</td>
<td>Card’s first 6 digits</td>
</tr>
<tr>
<td></td>
<td>tail</td>
<td>no</td>
<td>Card’s last 4 digits</td>
</tr>
<tr>
<td></td>
<td>default</td>
<td>no</td>
<td>Configure as default or not</td>
</tr>
<tr>
<td></td>
<td>expiration_date</td>
<td>no</td>
<td>Expiration month and year</td>
</tr>
<tr>
<td>init_recurring_sale</td>
<td></td>
<td></td>
<td>A standard init recurring</td>
</tr>
<tr>
<td></td>
<td>bin</td>
<td>no</td>
<td>Card’s first 6 digits</td>
</tr>
<tr>
<td></td>
<td>tail</td>
<td>no</td>
<td>Card’s last 4 digits</td>
</tr>
<tr>
<td></td>
<td>default</td>
<td>no</td>
<td>Configure as default or not</td>
</tr>
<tr>
<td></td>
<td>expiration_date</td>
<td>no</td>
<td>Expiration month and year</td>
</tr>
<tr>
<td>init_recurring_sale3d</td>
<td></td>
<td></td>
<td>A 3D-based init recurring</td>
</tr>
<tr>
<td></td>
<td>bin</td>
<td>no</td>
<td>Card’s first 6 digits</td>
</tr>
<tr>
<td></td>
<td>tail</td>
<td>no</td>
<td>Card’s last 4 digits</td>
</tr>
<tr>
<td></td>
<td>default</td>
<td>no</td>
<td>Configure as default or not</td>
</tr>
<tr>
<td></td>
<td>expiration_date</td>
<td>no</td>
<td>Expiration month and year</td>
</tr>
<tr>
<td>ezeewallet</td>
<td></td>
<td></td>
<td>Wallet-based payment</td>
</tr>
<tr>
<td></td>
<td>source_wallet_id</td>
<td>no</td>
<td>Email address of consumer who owns the source wallet</td>
</tr>
<tr>
<td></td>
<td>default</td>
<td>no</td>
<td>Configure as default or not</td>
</tr>
<tr>
<td>sofort</td>
<td></td>
<td></td>
<td>Bank transfer payment, popular in Germany</td>
</tr>
<tr>
<td></td>
<td>default</td>
<td>no</td>
<td>Configure as default or not</td>
</tr>
<tr>
<td>cashu</td>
<td></td>
<td></td>
<td>Voucher-based payment</td>
</tr>
<tr>
<td></td>
<td>default</td>
<td>no</td>
<td>Configure as default or not</td>
</tr>
<tr>
<td>paysafecard</td>
<td></td>
<td></td>
<td>Voucher-based payment</td>
</tr>
<tr>
<td></td>
<td>default</td>
<td>no</td>
<td>Configure as default or not</td>
</tr>
<tr>
<td>ppro</td>
<td></td>
<td></td>
<td>Supports payments with EPS, TeleIngreso, SafetyPay, TrustPay, Przelewy24, iDEAL, QIWI, GiroPay, Mr. Cash and MyBank</td>
</tr>
<tr>
<td></td>
<td>default</td>
<td>no</td>
<td>Configure as default or not</td>
</tr>
<tr>
<td>paybyvoucher_yeepay</td>
<td></td>
<td></td>
<td>Buy a voucher via online bank transfer (oBeP), popular in China</td>
</tr>
<tr>
<td></td>
<td>product_name</td>
<td>yes</td>
<td>Apply to order product information in the process of payment, and the prod- uct description of purchase</td>
</tr>
<tr>
<td></td>
<td>product_category</td>
<td>yes</td>
<td>Type of commodity, includes 3C digits, clothing and shoes, bag and accessories, books and DVDS, tuition, reg- ister exam tuition, member fee, participation fee, logistic service, airline tickets, hotel catering, etc</td>
</tr>
<tr>
<td></td>
<td>card_type</td>
<td>yes</td>
<td>Card type for the voucher - can be ’virtual’ or ’physical’ only</td>
</tr>
<tr>
<td></td>
<td>redeem_type</td>
<td>yes</td>
<td>Redeem type for the voucher - can be ’stored’ or ’instant’ only</td>
</tr>
<tr>
<td></td>
<td>default</td>
<td>no</td>
<td>Configure as default or not</td>
</tr>
<tr>
<td>paybyvoucher_sale</td>
<td></td>
<td></td>
<td>Buy a voucher via Credit Card</td>
</tr>
<tr>
<td></td>
<td>card_type</td>
<td>yes</td>
<td>Card type for the voucher - can be ’virtual’ or ’physical’ only</td>
</tr>
<tr>
<td></td>
<td>redeem_type</td>
<td>yes</td>
<td>Redeem type for the voucher - can be ’stored’ or ’instant’ only</td>
</tr>
<tr>
<td></td>
<td>bin</td>
<td>no</td>
<td>Card’s first 6 digits</td>
</tr>
<tr>
<td></td>
<td>tail</td>
<td>no</td>
<td>Card’s last 4 digits</td>
</tr>
<tr>
<td></td>
<td>default</td>
<td>no</td>
<td>Configure as default or not</td>
</tr>
<tr>
<td></td>
<td>expiration_date</td>
<td>no</td>
<td>Expiration month and year</td>
</tr>
<tr>
<td>neteller</td>
<td></td>
<td></td>
<td>Wallet-based payment</td>
</tr>
<tr>
<td></td>
<td>default</td>
<td>no</td>
<td>Configure as default or not</td>
</tr>
<tr>
<td>poli</td>
<td></td>
<td></td>
<td>Payment by bank account for customers with an Australian or New Zealand bank account.</td>
</tr>
<tr>
<td></td>
<td>default</td>
<td>no</td>
<td>Configure as default or not</td>
</tr>
<tr>
<td>p24</td>
<td></td>
<td></td>
<td>Payment by bank account for customers with a Polish bank account.</td>
</tr>
<tr>
<td></td>
<td>default</td>
<td>no</td>
<td>Configure as default or not</td>
</tr>
<tr>
<td>citadel_payin</td>
<td></td>
<td></td>
<td>Online Banking ePayment method</td>
</tr>
<tr>
<td></td>
<td>default</td>
<td>no</td>
<td>Configure as default or not</td>
</tr>
<tr>
<td></td>
<td>merchant_customer_id</td>
<td>yes</td>
<td>Identifier provided by the merchant that uniquely identifies the customer in their system</td>
</tr>
<tr>
<td>idebit_payin</td>
<td></td>
<td></td>
<td>Online Banking ePayment method</td>
</tr>
<tr>
<td></td>
<td>default</td>
<td>no</td>
<td>Configure as default or not</td>
</tr>
<tr>
<td></td>
<td>customer_account_id</td>
<td>yes</td>
<td>Identifier provided by the merchant that uniquely identifies the consumer in their system</td>
</tr>
<tr>
<td>insta_debit_payin</td>
<td></td>
<td></td>
<td>Online Banking ePayment method</td>
</tr>
<tr>
<td></td>
<td>default</td>
<td>no</td>
<td>Configure as default or not</td>
</tr>
<tr>
<td></td>
<td>customer_account_id</td>
<td>yes</td>
<td>Identifier provided by the merchant that uniquely identifies the consumer in their system</td>
</tr>
<tr>
<td>paypal_express</td>
<td></td>
<td></td>
<td>Express payment by PayPal balance.</td>
</tr>
<tr>
<td></td>
<td>default</td>
<td>no</td>
<td>Configure as default or not</td>
</tr>
<tr>
<td>abn_ideal</td>
<td></td>
<td></td>
<td>Bank transfer payment, popular in Netherlands.</td>
</tr>
<tr>
<td>webmoney</td>
<td></td>
<td></td>
<td>Bank transfer payment, popular in Russian Federation.</td>
</tr>
<tr>
<td>inpay</td>
<td></td>
<td></td>
<td>Instant bank payment.</td>
</tr>
<tr>
<td>sdd_sale</td>
<td></td>
<td></td>
<td>SEPA Direct Debit Sale</td>
</tr>
<tr>
<td>sdd_init_recurring_sale</td>
<td></td>
<td></td>
<td>SEPA Direct Debit init recurring</td>
</tr>
<tr>
<td>trustly_sale</td>
<td></td>
<td></td>
<td>Solution for Online Banking ePayments.</td>
</tr>
<tr>
<td>trustly_withdrawal</td>
<td></td>
<td></td>
<td>Allows you to pay with your online bank.</td>
</tr>
<tr>
<td>wechat</td>
<td></td>
<td></td>
<td>Online Banking ePayment method</td>
</tr>
<tr>
<td></td>
<td>product_code</td>
<td>no</td>
<td>Product code</td>
</tr>
<tr>
<td></td>
<td>product_num</td>
<td>no</td>
<td>Product number</td>
</tr>
<tr>
<td></td>
<td>product_desc</td>
<td>no</td>
<td>Product description</td>
</tr>
</tbody></table>

<h2 id='wpf-internationalization-i18n'>WPF Internationalization (i18n)</h2>

<p>The web payment form is internationalized (i18n) and supports the following locales and corresponding languages:</p>

<table><thead>
<tr>
<th>Locale</th>
<th>Language</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>en</td>
<td>English</td>
<td>English locale and language settings (this is the default)</td>
</tr>
<tr>
<td>it</td>
<td>Italian</td>
<td>Italian locale and language settings</td>
</tr>
<tr>
<td>es</td>
<td>Spanish</td>
<td>Spanish locale and language settings</td>
</tr>
<tr>
<td>fr</td>
<td>French</td>
<td>French locale and language settings</td>
</tr>
<tr>
<td>de</td>
<td>German</td>
<td>German locale and language</td>
</tr>
<tr>
<td>ja</td>
<td>Japanese</td>
<td>Japanese locale and language</td>
</tr>
<tr>
<td>zh</td>
<td>Mandarin Chinese</td>
<td>Mandarin Chinese locale and language</td>
</tr>
<tr>
<td>ar</td>
<td>Arabic</td>
<td>Arabic locale and language</td>
</tr>
<tr>
<td>pt</td>
<td>Portuguese</td>
<td>Portuguese locale and language</td>
</tr>
<tr>
<td>tr</td>
<td>Turkish</td>
<td>Turkish locale and language</td>
</tr>
<tr>
<td>ru</td>
<td>Russian</td>
<td>Russian locale and language</td>
</tr>
<tr>
<td>hi</td>
<td>Hindu</td>
<td>Hindu locale and language</td>
</tr>
<tr>
<td>bg</td>
<td>Bulgarian</td>
<td>Bulgarian locale and language</td>
</tr>
<tr>
<td>id</td>
<td>Indonesian</td>
<td>Indonesian locale and language</td>
</tr>
<tr>
<td>ms</td>
<td>Malay</td>
<td>Malay locale and language</td>
</tr>
<tr>
<td>th</td>
<td>Thai</td>
<td>Thai locale and language</td>
</tr>
</tbody></table>

<p>Note that the English locale is the default, and if you don’t specify another locale in the <a href="#wpf-api">WPF API</a>, this is the locale and language that the web payment form will be translated into.</p>

<p>The customer has the option to change the language once he has been redirected to the WPF via the received <code>redirect_url</code>.</p>

<p>It is a good practice to submit the desired locale in the <a href="#wpf-api">WPF API</a> create call, so that a proper <code>redirect_url</code> is returned instead of manually parsing and generating a locale-specific <code>redirect_url</code>.</p>

<p>If a locale/language different than the current ones is needed or any translation errors/inconsistencies are spotted, feel free to contact the IT Support team at <a href="mailto:tech-support@emerchantpay.net">tech-support@emerchantpay.net</a> and contribute to the translation effort.</p>
<h1 id='authentication-services'>Authentication Services</h1><h2 id='introduction-3'>Introduction</h2>
<p>Authentication Services provide Strong Customer Authentication (SCA) which is a type of authentication relying on two or more independent elements. </p>

<p>SCA as defined by the European Central Bank (ECB) and in the context of the EU’s Payment Services Directive (PSD2) is:</p>

<p>”a procedure based on the use of two or more of the following elements categorised as knowledge, ownership and inherence:</p>

<ul>
<li><p>something only the user knows, e.g. static password, code, personal identification number;</p></li>
<li><p>something only the user possesses, e.g.token, smart card, mobile phone;</p></li>
<li><p>something the user is, e.g. biometric characteristic, such as a fingerprint.</p></li>
</ul>

<p>In addition, the elements selected must be mutually independent, i.e. the breach of one does not compromise the other(s).</p>

<p>At least one of the elements should be non-reusable and non-replicable (except for inherence), and not capable of being surreptitiously stolen via the Internet.</p>

<p>The strong authentication procedure should be designed in such a way as to protect the confidentiality of the authentication data.”</p>

<p>Using multiple solutions from the same category would not constitute SCA.</p>
<h3 id='sca-with-3dsecure'>SCA with 3DSecure</h3>
<p>Only the newest variant of 3DSecure involving one-time passwords (OTP) constitutes a form of SCA.</p>

<p>3DSecure however might be a weak SCA solution for several reasons:</p>

<ol>
<li><p>it relies on the cards being actively enrolled by the cardholder after issuing, i.e prior any transaction made with it and </p></li>
<li><p>it is not available on all card schemes. </p></li>
</ol>
<h3 id='alternative-services'>Alternative services</h3>
<p>A number of services exist that provide SCA in a compliant way. </p>

<p>They rely on different solutions like generating payment ”secrets”, one-time passwords etc. Key advantage of such services is that they allow cards to be enrolled ”on-the-fly”, i.e. during a transaction rather than having to be pre-enrolled after issuing. </p>

<p>Such services could potentially work with any card and are thus card scheme agnostic.</p>

<aside class="notice" >
Authentication services are not available by default, they need to be enabled on your account. Please contact Tech Support for further assistance.
</aside>
<h1 id='genesis-kyc-services'>Genesis KYC Services</h1><h2 id='general-info'>General Info</h2>
<p>Genesis KYC Services gives us the ability to perform particular checks on the integrity of the consumer data. Based on the returned consumer score we can decide whether we want to reject/approve a given transaction or perform another action for this consumer.</p>
<h2 id='create-consumer-registration'>Create Consumer Registration</h2>
<p>Review all aspects of the customer’s information, as it is received in the registration process, against local and external databases to increase accuracy and produce a risk score for that customer.</p>

<p><code>POST /kyc_service/create_consumer</code></p>

<pre class="highlight shell tab-shell"><code>curl https://username:password@gate.emerchantpay.net/kyc_service/create_consumer <span class="se">\</span>
   -H <span class="s2">"Content-Type: text/json"</span> <span class="se">\</span>
   -d <span class="s1">'
  {
    "customer_information": {
      "first_name": "John",
      "last_name": "Doe",
      "customer_email": "jdoe@example.com",
      "address1": "Sample Address",
      "address2": "4th floor",
      "city": "MyCity",
      "zip_code": "32132",
      "country": "BG",
      "province": "ProvinceName",
      "phone1": "0883113332",
      "phone2": "0883113334",
      "birth_date": "1987-03-03",
      "document_number": "f2345838972",
      "document_type": 3,
      "gender": "M"
    },
    "customer_unique_id": "21343253",
    "customer_registration_date": "2016-12-12",
    "customer_registration_ip_address": "255.255.255.255",
    "customer_username": "dimo16",
    "customer_registration_device_id": "12343242",
    "third_party_device_id": "3432424",
    "profile_action_type": 1,
    "device_fingerprint_type": 1,
    "current_profile_status": 1,
    "bonus_code": 1922,
    "bonus_amount": 100,
    "merchant_website": "dai.com",
    "how_did_you_hear": "friend",
    "affiliate_id": 1922
  }'</span>
</code></pre>

<p><strong>Request Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>session_id</td>
<td>optional</td>
<td>string</td>
<td>If this value is not provided the user email account should be complete and valid</td>
</tr>
<tr>
<td>customer_information</td>
<td>required</td>
<td>object</td>
<td>Customer information. See below for each of the nested required fields</td>
</tr>
<tr>
<td>customer_username</td>
<td>optional</td>
<td>string</td>
<td>Username of the customer on your system</td>
</tr>
<tr>
<td>customer_unique_id</td>
<td>required</td>
<td>string</td>
<td>Unique user identificator on your system</td>
</tr>
<tr>
<td>customer_registration_date</td>
<td>required</td>
<td>string</td>
<td>Date in which the customer was registered in the system OR the date in which the customer was created in the cashier Database yyyy-mm-dd</td>
</tr>
<tr>
<td>customer_registration_ip_address</td>
<td>required</td>
<td>string</td>
<td>IP address of customer used when the customer was registered in the system OR the current IP address</td>
</tr>
<tr>
<td>customer_registration_device_id</td>
<td>optional</td>
<td>string</td>
<td>Propietary DeviceId technology, refer to the DeviceId Instruction Manual (provided on request)</td>
</tr>
<tr>
<td>third_party_device_id</td>
<td>optional</td>
<td>string</td>
<td>Third Party DeviceId</td>
</tr>
<tr>
<td>device_fingerprint</td>
<td>optional</td>
<td>string</td>
<td>Open Source DeviceId technologies (Intepreted as a String)</td>
</tr>
<tr>
<td>device_fingerprint_type</td>
<td>optional</td>
<td>enum</td>
<td>1 - Custom; 2 - Open Source; 3 - Open Source 2;</td>
</tr>
<tr>
<td>profile_action_type</td>
<td>optional</td>
<td>enum</td>
<td>1 - Registration;2 - Profile Update;</td>
</tr>
<tr>
<td>profile_current_status</td>
<td>optional</td>
<td>enum</td>
<td>0 - Undefined;1 - Review;2 - Denied;3 - Approved;</td>
</tr>
<tr>
<td>bonus_code</td>
<td>optional</td>
<td>string</td>
<td>Open text variable. Represents the code entered by the customer</td>
</tr>
<tr>
<td>bonus_submission_date</td>
<td>optional</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>bonus_amount</td>
<td>optional</td>
<td>number</td>
<td></td>
</tr>
<tr>
<td>merchant_website</td>
<td>optional</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>industry_type</td>
<td>optional</td>
<td>string</td>
<td>1 - Finance; 2 - Gambling; 3 - Crypto; 4 - Travel; 5 - Retail; 6 - Risk Vendor; 7 - Adult; 8 - Remittance/Transfer; 9 - Other;</td>
</tr>
<tr>
<td>how_did_you_hear</td>
<td>optional</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>affiliate_id</td>
<td>optional</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>rule_context</td>
<td>optional</td>
<td>number</td>
<td>Number assigned to a given rule context. Please contact to get the available contexts</td>
</tr>
</tbody></table>

<p><code>required* = conditionally required</code></p>

<p><strong>Customer Information Fields</strong></p>

<p>The fields of the customer information object.</p>

<p><strong>Request Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>first_name</td>
<td>required</td>
<td>string</td>
<td>Customer first name</td>
</tr>
<tr>
<td>middle_name</td>
<td>optional</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>last_name</td>
<td>required</td>
<td>string</td>
<td>Customer last name</td>
</tr>
<tr>
<td>customer_email</td>
<td>required</td>
<td>string</td>
<td>Must contain valid e-mail of customer</td>
</tr>
<tr>
<td>address1</td>
<td>required</td>
<td>string</td>
<td>Primary address</td>
</tr>
<tr>
<td>address2</td>
<td>optional</td>
<td>string</td>
<td>Secondary address</td>
</tr>
<tr>
<td>city</td>
<td>required</td>
<td>string</td>
<td>City</td>
</tr>
<tr>
<td>province</td>
<td>required</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>zip_code</td>
<td>required</td>
<td>string</td>
<td>ZIP code</td>
</tr>
<tr>
<td>country</td>
<td>required</td>
<td>string</td>
<td>two-letter iso codes</td>
</tr>
<tr>
<td>phone1</td>
<td>optional</td>
<td>number</td>
<td></td>
</tr>
<tr>
<td>phone2</td>
<td>optional</td>
<td>number</td>
<td></td>
</tr>
<tr>
<td>birth_date</td>
<td>optional</td>
<td>string</td>
<td>Required for Visa only when MCC is a Financial Services one (e.g. MCC 6012)</td>
</tr>
<tr>
<td>document_type</td>
<td>optional</td>
<td>enum</td>
<td>0 - SSN; 1 - Passport Registry; 2 - Personal ID / National ID; 3 - Identity Card; 4 - Driver License; 8 - Travel Document; 12 - Residence Permit; 13 - Identity Certificate; 16 - Registro Federal de Contribuyentes; 17 - Credencial de Elector; 18 - CPF</td>
</tr>
<tr>
<td>document_number</td>
<td>optional</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>gender</td>
<td>optional</td>
<td>enum</td>
<td>F - female; M - male</td>
</tr>
</tbody></table>

<p><code>required* = conditionally required</code></p>

<pre class="highlight json tab-json"><code><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"code"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Successful Response"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"technical_message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Successful Response"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"details"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="s2">"reference_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"233"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"risk_score"</span><span class="p">:</span><span class="w"> </span><span class="mi">98</span><span class="p">,</span><span class="w">
        </span><span class="s2">"kyc_provider_recommendation"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Reject"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"rules_triggered"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="p">{</span><span class="w">
            </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Multi-Accounting : IP shared to Chargeback reason"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"risk_score"</span><span class="p">:</span><span class="w"> </span><span class="s2">"100.00"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"display_to_merchant"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">],</span><span class="w">
        </span><span class="s2">"scrubber_results"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="s2">"geo_check"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
          </span><span class="s2">"address_verification"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
          </span><span class="s2">"phone_verify"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
          </span><span class="s2">"idv_usa"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
          </span><span class="s2">"idv_global"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
          </span><span class="s2">"gav"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
          </span><span class="s2">"idv_br"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
          </span><span class="s2">"bav_usa"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
          </span><span class="s2">"bav_advanced"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
          </span><span class="s2">"cb_aml"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
          </span><span class="s2">"cb_bvs"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
          </span><span class="s2">"email_age"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
          </span><span class="s2">"compliance_watchlist"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
          </span><span class="s2">"iovation"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
          </span><span class="s2">"idv_advance"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="s2">"result_confidence_level"</span><span class="p">:</span><span class="w"> </span><span class="mf">91.5</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span></code></pre>

<p><strong>Successful Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>code</td>
<td>number</td>
<td>genesis success code - 0</td>
</tr>
<tr>
<td>message</td>
<td>string</td>
<td>const ’Successful Response’</td>
</tr>
<tr>
<td>technical_message</td>
<td>string</td>
<td>const ’Successful Response’</td>
</tr>
<tr>
<td><strong>details</strong></td>
<td></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;reference_id</td>
<td>string</td>
<td>KYC provider internal id</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;risk_score</td>
<td>number</td>
<td>risk score low is better</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;kyc_provider_recommendation</td>
<td>string</td>
<td>KYC service provider recommendation</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;result_confidence_level</td>
<td>number</td>
<td>Confidence level in percentages</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;...</td>
<td>string</td>
<td>additional response data</td>
</tr>
</tbody></table>
<h2 id='update-consumer-registration'>Update Consumer Registration</h2>
<p>Update the customer registration to be able to pass on the latest status required so we can continue
improving the data models and provide the best scores and recommendations possible.</p>

<p><code>POST /kyc_service/update_consumer</code></p>

<pre class="highlight shell tab-shell"><code>curl https://username:password@gate.emerchantpay.net/kyc_service/update_consumer <span class="se">\</span>
   -H <span class="s2">"Content-Type: text/json"</span> <span class="se">\</span>
   -d <span class="s1">'
  {
    "reference_id": "9999333344443",
    "profile_current_status": "21343253",
    "status_reason": "All good"
  }'</span>
</code></pre>

<p><strong>Request Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>reference_id</td>
<td>required</td>
<td>number</td>
<td>Unique id returned by corresponding transaction</td>
</tr>
<tr>
<td>profile_current_status</td>
<td>required</td>
<td>enum</td>
<td>0 - Undefined; 1 - Review; 2 - Denied; 3 - Approved;</td>
</tr>
<tr>
<td>status_reason</td>
<td>optional</td>
<td>string</td>
<td>Required only if status is Reject / Decline / Chargeback / Refund / Return / Void</td>
</tr>
</tbody></table>

<p><code>required* = conditionally required</code></p>

<p>Make sure that <code>reference_id</code> points to a preliminary created transaction (will describe transactions below).</p>

<pre class="highlight json tab-json"><code><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"code"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Successful Response"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"technical_message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Successful Response"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"details"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="s2">"reference_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"9999333344443"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span></code></pre>

<p><strong>Successful Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>code</td>
<td>number</td>
<td>genesis success code - 0</td>
</tr>
<tr>
<td>message</td>
<td>string</td>
<td>const ’Successful Response’</td>
</tr>
<tr>
<td>technical_message</td>
<td>string</td>
<td>const ’Successful Response’</td>
</tr>
<tr>
<td><strong>details</strong></td>
<td></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;reference_id</td>
<td>string</td>
<td>KYC provider internal id</td>
</tr>
</tbody></table>
<h2 id='create-transaction'>Create Transaction</h2>
<p>Implement this to scrub a new transaction. We will take the information specific to that transaction
and run various verification checks available, returning the recommendation, score, and third-party
verification scrubbing results.</p>

<p><code>POST /kyc_service/create_transaction</code></p>

<pre class="highlight shell tab-shell"><code>curl https://username:password@gate.emerchantpay.net/kyc_service/create_transaction <span class="se">\</span>
   -H <span class="s2">"Content-Type: text/json"</span> <span class="se">\</span>
   -d <span class="s1">'
  {
    "customer_information": {
      "first_name": "John",
      "last_name": "Doe",
      "customer_email": "jdoe@example.com",
      "address1": "Sample address",
      "city": "Paris",
      "zip_code": "666",
      "country": "FR",
      "province": "MyProvince"
    },
    "deposit_limits": {
      "payment_method": "CC"
    },
    "transaction_unique_id": "1332",
    "payment_details": {
      "bin": "411111",
      "last_digits": "1111"
    },
    "customer_ip_address": "255.255.255.255",
    "transaction_created_at": "2016-12-12 23:23:23",
    "currency": "USD",
    "amount": 99999
  }'</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>curl https://username:password@gate.emerchantpay.net/kyc_service/create_transaction <span class="se">\</span>
   -H <span class="s2">"Content-Type: text/json"</span> <span class="se">\</span>
   -d <span class="s1">'
  {
    "customer_information": {
      "first_name": "John",
      "last_name": "Doe",
      "customer_email": "jdoe@example.com",
      "address1": "Sample address",
      "city": "Paris",
      "zip_code": "666",
      "country": "FR",
      "province": "MyProvince"
    },
    "deposit_limits": {
      "payment_method": "EW"
    },
    "transaction_unique_id": "1332",
    "payment_details": {
      "ewallet_id": "411111"
    },
    "customer_ip_address": "255.255.255.255",
    "transaction_created_at": "2016-12-12 23:23:23",
    "currency": "USD",
    "amount": 99999
  }'</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>curl https://username:password@gate.emerchantpay.net/kyc_service/create_transaction <span class="se">\</span>
   -H <span class="s2">"Content-Type: text/json"</span> <span class="se">\</span>
   -d <span class="s1">'
  {
    "customer_information": {
      "first_name": "John",
      "last_name": "Doe",
      "customer_email": "jdoe@example.com",
      "address1": "Sample address",
      "city": "Paris",
      "zip_code": "666",
      "country": "FR",
      "province": "MyProvince"
    },
    "deposit_limits": {
      "payment_method": "CC"
    },
    "transaction_unique_id": "1332",
    "payment_details": {
      "bin": "411111",
      "tail": "1111"
    },
    "customer_ip_address": "255.255.255.255",
    "transaction_created_at": "2016-12-12 23:23:23",
    "currency": "USD",
    "amount": 99999
  }'</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>curl https://username:password@gate.emerchantpay.net/kyc_service/create_transaction <span class="se">\</span>
   -H <span class="s2">"Content-Type: text/json"</span> <span class="se">\</span>
   -d <span class="s1">'
  {
    "customer_information": {
      "first_name": "John",
      "last_name": "Doe",
      "customer_email": "jdoe@example.com",
      "address1": "Sample address",
      "city": "Paris",
      "zip_code": "666",
      "country": "FR",
      "province": "MyProvince"
    },
    "deposit_limits": {
      "payment_method": "EC"
    },
    "transaction_unique_id": "1332",
    "payment_details": {
      "bin": "411111",
      "tail": "4978784327847832784789"
    },
    "customer_ip_address": "255.255.255.255",
    "transaction_created_at": "2016-12-12 23:23:23",
    "currency": "USD",
    "amount": 99999
  }'</span>
</code></pre>

<p><strong>Request Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>session_id</td>
<td>optional</td>
<td>string</td>
<td>If this value is not provided the user email account should be complete and valid</td>
</tr>
<tr>
<td>customer_username</td>
<td>optional</td>
<td>string</td>
<td>Username of the customer on your system</td>
</tr>
<tr>
<td>customer_unique_id</td>
<td>optional</td>
<td>string</td>
<td>Unique user identificator on your system</td>
</tr>
<tr>
<td>customer_status</td>
<td>optional</td>
<td>string</td>
<td>Customer loyalty level; for example: VIP; Bronze; Platinum; Gold; etc. This is an open text variable</td>
</tr>
<tr>
<td>customer_loyalty_level</td>
<td>optional</td>
<td>string</td>
<td>Customer loyalty level; for example: VIP; Bronze; Platinum; Gold; etc. This is an open text variable</td>
</tr>
<tr>
<td>customer_registration_date</td>
<td>optional</td>
<td>string</td>
<td>Date in which the customer was registered in the system OR the date in which the customer was created in the cashier Database yyyy-mm-dd</td>
</tr>
<tr>
<td>customer_registration_ip_address</td>
<td>optional</td>
<td>string</td>
<td>IP address of customer used when the customer was registered in the system OR the current IP address</td>
</tr>
<tr>
<td>customer_registration_device_id</td>
<td>optional</td>
<td>string</td>
<td>Propietary DeviceId technology, refer to the DeviceId Instruction Manual (provided on request)</td>
</tr>
<tr>
<td>customer_information</td>
<td>required</td>
<td>object</td>
<td>Customer information. See below for each of the nested required fields</td>
</tr>
<tr>
<td>first_deposit_date</td>
<td>optional</td>
<td>string</td>
<td>Empty if first deposit yyyy-mm-dd</td>
</tr>
<tr>
<td>first_withdrawal_date</td>
<td>optional</td>
<td>string</td>
<td>Empty if 0 withdrawals yyyy-mm-dd</td>
</tr>
<tr>
<td>deposits_count</td>
<td>optional</td>
<td>number</td>
<td></td>
</tr>
<tr>
<td>withdrawals_count</td>
<td>optional</td>
<td>number</td>
<td></td>
</tr>
<tr>
<td>current_balance</td>
<td>optional</td>
<td>number</td>
<td></td>
</tr>
<tr>
<td>deposit_limits</td>
<td>required</td>
<td>object</td>
<td>See below</td>
</tr>
<tr>
<td>transaction_unique_id</td>
<td>required</td>
<td>string</td>
<td>Transaction id</td>
</tr>
<tr>
<td>billing_information</td>
<td>optional</td>
<td>object</td>
<td>See below</td>
</tr>
<tr>
<td>shipping_information</td>
<td>optional</td>
<td>object</td>
<td>See below</td>
</tr>
<tr>
<td>payment_details</td>
<td>required</td>
<td>object</td>
<td>See below</td>
</tr>
<tr>
<td>amount</td>
<td>optional</td>
<td>number</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td>currency</td>
<td>optional</td>
<td>string</td>
<td>ISO 4217 Three digits</td>
</tr>
<tr>
<td>transaction_created_at</td>
<td>required</td>
<td>string</td>
<td>Represents the time of the transaction on the Merchant server. Format: yyyy-mmdd hh:mm:ss</td>
</tr>
<tr>
<td>transaction_status</td>
<td>optional</td>
<td>enum</td>
<td>Transaction status; it is recommended to send 0 on the initial call. Afterwards call Update Transaction endpoint to update the status. 0 - numberUndefined; 1 - number- Approved; 2 - number- Pre-Auth; 3 - number- Settled; 4 - number- Void; 5 - number- Rejected internally by Negative Database or other scrubber decided to reject the transaction; 6 - number- Declined the bank / gateway / processor rejected the transaction; 7 - number- Chargeback; 8 - number- Return;9 - number- Pending; 10 - number- Pass Transaction validation;11 - number- Failed Transaction validation; 12 - number- efund; 13 - number- Approved Review; 14 - number- Abandon This status is used when the user just leaves the transaction;</td>
</tr>
<tr>
<td>customer_ip_address</td>
<td>required</td>
<td>string</td>
<td>Customers IP address</td>
</tr>
<tr>
<td>customer_device_id</td>
<td>optional</td>
<td>string</td>
<td>Propietary DeviceId technology; refer to the DeviceId Instruction Manual (provided on request)</td>
</tr>
<tr>
<td>third_party_device_id</td>
<td>optional</td>
<td>string</td>
<td>Third Party DeviceId</td>
</tr>
<tr>
<td>device_fingerprint</td>
<td>optional</td>
<td>string</td>
<td>Open Source DeviceId technologies (Intepreted as a String)</td>
</tr>
<tr>
<td>device_fingerprint_type</td>
<td>optional</td>
<td>enum</td>
<td>1 - Custom; 2 - Open Source; 3 - Open Source 2;</td>
</tr>
<tr>
<td>shopping_cart_items_count</td>
<td>optional</td>
<td>number</td>
<td>Represents the quantity of items in the shopping cart</td>
</tr>
<tr>
<td>local_time</td>
<td>optional</td>
<td>string</td>
<td>Represents the local time of the customer doing the transaction. Format: yyyy-mmdd hh:mm:ss</td>
</tr>
<tr>
<td>order_source</td>
<td>optional</td>
<td>enum</td>
<td>internet; mobile; inhouse</td>
</tr>
<tr>
<td>merchant_website</td>
<td>optional</td>
<td>string</td>
<td>Open text variable; it represents the website name or URL that submitted the transaction</td>
</tr>
<tr>
<td>industry_type</td>
<td>optional</td>
<td>enum</td>
<td>Definition of the industry type the transaction was performed on; 1-number - Finance; 2-number - Gambling; 3-number - Crypto; -number - Travel; 5-number - Retail; 6-number - Risk Vendor; 7-number - Adult; 8-number - Remittance/Transfer; 9-number - Other;</td>
</tr>
<tr>
<td>customer_password</td>
<td>optional</td>
<td>string</td>
<td>Open text variable; it represents the customers password in hashed format (using MD5) some companies share that information in order to look for patterns</td>
</tr>
<tr>
<td>rule_context</td>
<td>optional</td>
<td>number</td>
<td>Number assigned to a given rule context. Please contact to get the available contexts.</td>
</tr>
<tr>
<td>custom_variable</td>
<td>optional</td>
<td>string</td>
<td>Represents anything the merchant wants to store with this transaction</td>
</tr>
</tbody></table>

<p><code>required* = conditionally required</code></p>

<p><strong>Deposit Limits Fields</strong></p>

<p><strong>Request Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>payment_method</td>
<td>required</td>
<td>enum</td>
<td>CC; EC; EW - CreditCard; Echeck; EWallet</td>
</tr>
<tr>
<td>minimum</td>
<td>optional</td>
<td>number</td>
<td>Lowest valid amount for deposit in minor currency units; ex: 100 = $1</td>
</tr>
<tr>
<td>daily_maximum</td>
<td>optional</td>
<td>number</td>
<td>In minor currency units</td>
</tr>
<tr>
<td>weekly_maximum</td>
<td>optional</td>
<td>string</td>
<td>In minor currency units</td>
</tr>
<tr>
<td>monthly_maximum</td>
<td>optional</td>
<td>string</td>
<td>In minor currency units</td>
</tr>
</tbody></table>

<p><code>required* = conditionally required</code></p>

<p><strong>Billing Information Fields</strong></p>

<p><strong>Request Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>first_name</td>
<td>optional</td>
<td>string</td>
<td>Customer first name</td>
</tr>
<tr>
<td>last_name</td>
<td>optional</td>
<td>string</td>
<td>Customer last name</td>
</tr>
<tr>
<td>customer_email</td>
<td>optional</td>
<td>string</td>
<td>Must contain valid e-mail of customer</td>
</tr>
<tr>
<td>address1</td>
<td>optional</td>
<td>string</td>
<td>Primary address</td>
</tr>
<tr>
<td>address2</td>
<td>optional</td>
<td>string</td>
<td>Secondary address</td>
</tr>
<tr>
<td>city</td>
<td>optional</td>
<td>string</td>
<td>City</td>
</tr>
<tr>
<td>province</td>
<td>optional</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>zip_code</td>
<td>optional</td>
<td>string</td>
<td>ZIP code</td>
</tr>
<tr>
<td>country</td>
<td>optional</td>
<td>string</td>
<td>ISO 3166-1 Alpha-2. For example: USD</td>
</tr>
<tr>
<td>phone1</td>
<td>optional</td>
<td>number</td>
<td>Numbers only; no dash or any other separator. Please include area code if applicable. Country code is not required</td>
</tr>
<tr>
<td>birth_date</td>
<td>optional</td>
<td>string</td>
<td>yyyy-mm-dd</td>
</tr>
<tr>
<td>gender</td>
<td>optional</td>
<td>enum</td>
<td>M; F</td>
</tr>
</tbody></table>

<p><code>required* = conditionally required</code></p>

<p><strong>Shipping Information Fields</strong></p>

<p><strong>Request Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>first_name</td>
<td>optional</td>
<td>string</td>
<td>Customer first name</td>
</tr>
<tr>
<td>last_name</td>
<td>optional</td>
<td>string</td>
<td>Customer last name</td>
</tr>
<tr>
<td>customer_email</td>
<td>optional</td>
<td>string</td>
<td>Must contain valid e-mail of customer</td>
</tr>
<tr>
<td>address1</td>
<td>optional</td>
<td>string</td>
<td>Primary address</td>
</tr>
<tr>
<td>address2</td>
<td>optional</td>
<td>string</td>
<td>Secondary address</td>
</tr>
<tr>
<td>city</td>
<td>optional</td>
<td>string</td>
<td>City</td>
</tr>
<tr>
<td>province</td>
<td>optional</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>zip_code</td>
<td>optional</td>
<td>string</td>
<td>ZIP code</td>
</tr>
<tr>
<td>country</td>
<td>optional</td>
<td>string</td>
<td>ISO 3166-1 Alpha-2. For example: USD</td>
</tr>
<tr>
<td>phone1</td>
<td>optional</td>
<td>number</td>
<td>Numbers only; no dash or any other separator. Please include area code if applicable. Country code is not required</td>
</tr>
</tbody></table>

<p><code>required* = conditionally required</code></p>

<p><strong>Payment Details Fields</strong></p>

<p><strong>Request Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>bin</td>
<td>optional</td>
<td>string</td>
<td>First 6 digits of the card number; Only required if Payment Method Type is Credit Card;</td>
</tr>
<tr>
<td>tail</td>
<td>optional</td>
<td>string</td>
<td>Last 4 digits of the card number; Only required if Payment Method Type is Credit Card;</td>
</tr>
<tr>
<td>cvv_present</td>
<td>optional</td>
<td>string</td>
<td>Indicator if the CVV was received or not; The expected values in this field are Yes or No;</td>
</tr>
<tr>
<td>hashed_pan</td>
<td>optional</td>
<td>string</td>
<td>Only required if Payment Method Type is Credit Card; It should be hashed using SHA256; the string to be hashed is Card Numberand the MD5 hash of the Expiration Date; For example; if the card number is 1111-2222-3333-4444 with expiration date 01/22; The have should be done on the string without spaces nor dash nor other special chars; The MD5 of the Expiration Date 0122 is f0f4b6598f2cee45644673998b4f44be; That said; the string to be hashed is 1111222233334444f0f4b6598f2cee45644673998b4f44be which generates the following result fecd244b7d647b0db391e35910e0d42aaf88f7633a4f4f4883b109abad1d6d7</td>
</tr>
<tr>
<td>routing</td>
<td>optional</td>
<td>string</td>
<td>Routing number; Only required if Payment Method Type is eCheck;</td>
</tr>
<tr>
<td>account</td>
<td>optional</td>
<td>string</td>
<td>Only numbers up to 30 digits; Only required if Payment Method Type is eCheck;</td>
</tr>
<tr>
<td>ewallet_id</td>
<td>optional</td>
<td>string</td>
<td>Most of the times its an email; Only required if Payment Method Type is eWallet;</td>
</tr>
</tbody></table>

<p><code>required* = conditionally required</code></p>

<aside class="notice">Required attributes, depending on the Payment Method:</aside>

<ul>
<li>For payment method CC

<ul>
<li>bin</li>
<li>tail</li>
</ul></li>
<li>For payment method CC OPTIONAL

<ul>
<li>cvv_present</li>
<li>hashed_pan</li>
</ul></li>
<li>For payment method EC

<ul>
<li>routing</li>
<li>account</li>
</ul></li>
<li>For payment method EW

<ul>
<li>ewallet_id</li>
</ul></li>
</ul>

<pre class="highlight json tab-json"><code><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"code"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Successful Response"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"technical_message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Successful Response"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"details"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="s2">"reference_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"481119"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"kyc_provider_recommendation"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Approve"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"risk_score"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.39</span><span class="p">,</span><span class="w">
        </span><span class="s2">"third_party"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
        </span><span class="s2">"processors"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
        </span><span class="s2">"reason"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
        </span><span class="s2">"result_confidence_level"</span><span class="p">:</span><span class="w"> </span><span class="mf">91.5</span><span class="p">,</span><span class="w">
        </span><span class="s2">"rules_triggered"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="p">{</span><span class="w">
            </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Address Verification : Global 25"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"score"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"display_to_merchant"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">],</span><span class="w">
        </span><span class="s2">"bin_information"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="s2">"bank_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BANCO NACIONAL DE COSTA RICA"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"bank_location"</span><span class="p">:</span><span class="w"> </span><span class="s2">"COSTA RICA"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"card_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"STANDARD"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"card_level"</span><span class="p">:</span><span class="w"> </span><span class="s2">"DEBIT"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"iso_card_country"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CR"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"card_brand_db"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MASTERCARD"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"card_brand_script"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MASTERCARD"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="s2">"scrubber_results"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="s2">"geo_check"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
          </span><span class="s2">"address_verification"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
          </span><span class="s2">"phone_verify"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
          </span><span class="s2">"idv_usa"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
          </span><span class="s2">"idv_global"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
          </span><span class="s2">"gav"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
          </span><span class="s2">"idv_br"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
          </span><span class="s2">"bav_usa"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
          </span><span class="s2">"bav_advanced"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
          </span><span class="s2">"cb_aml"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
          </span><span class="s2">"cb_bvs"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
          </span><span class="s2">"email_age"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
          </span><span class="s2">"compliance_watchlist"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
          </span><span class="s2">"iovation"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
          </span><span class="s2">"idv_advance"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span></code></pre>

<p><strong>Successful Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>code</td>
<td>number</td>
<td>genesis success code - 0</td>
</tr>
<tr>
<td>message</td>
<td>string</td>
<td>const ’Successful Response’</td>
</tr>
<tr>
<td>technical_message</td>
<td>string</td>
<td>const ’Successful Response’</td>
</tr>
<tr>
<td><strong>details</strong></td>
<td></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;reference_id</td>
<td>string</td>
<td>KYC provider internal id</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;kyc_provider_recommendation</td>
<td>string</td>
<td>KYC provider recommendation</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;risk_score</td>
<td>number</td>
<td>risk score low is better</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;result_confidence_level</td>
<td>number</td>
<td>KYC service level of decision confidence</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;...</td>
<td>*</td>
<td>KYC provider additional data</td>
</tr>
</tbody></table>
<h2 id='update-transaction'>Update Transaction</h2>
<p>Utilize this method to update a particular transaction status so we can continue improving the data models and provide the best scores and recommendations.</p>

<p><code>POST /kyc_service/update_transaction</code></p>

<pre class="highlight shell tab-shell"><code>curl https://username:password@gate.emerchantpay.net/kyc_service/update_transaction <span class="se">\</span>
   -H <span class="s2">"Content-Type: text/json"</span> <span class="se">\</span>
   -d <span class="s1">'
  {
    "transaction_status": 1,
    "reference_id": "4454982",
    "reason": "a reason message",
    "transaction_unique_id": "1332",
    "cvv_check_result": "",
    "avs_check_result": "",
    "processor_identifier": ""
  }'</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>curl https://username:password@gate.emerchantpay.net/kyc_service/update_transaction <span class="se">\</span>
   -H <span class="s2">"Content-Type: text/json"</span> <span class="se">\</span>
   -d <span class="s1">'
  {
    "transaction_status": 2,
    "transaction_unique_id": "1332"
  }'</span>
</code></pre>

<p><strong>Request Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>session_id</td>
<td>optional</td>
<td>string</td>
<td>If this value is not provided the user email account should be complete and valid</td>
</tr>
<tr>
<td>transaction_unique_id</td>
<td>required</td>
<td>string</td>
<td>Transaction id</td>
</tr>
<tr>
<td>reference_id</td>
<td>optional</td>
<td>number</td>
<td>Required only if status is Reject / Decline / Chargeback / Refund / Return / Void</td>
</tr>
<tr>
<td>transaction_status</td>
<td>optional</td>
<td>enum (number)</td>
<td>1-Approved; 2-Pre-Auth; 3-Settled; 4-Void; 5-Rejected internally by Negative Database or other scrubber decided to reject thetransaction; 6-Declined the bank / gateway / processor rejected the transaction; 7-Chargeback; 8-Return; 9-Pending; 10-Pass Transaction validation; 11-Failed ransaction validation; 12-Refund; 13-Approved Review; 14-Abandon This status is used when the user just leaves the transaction;</td>
</tr>
<tr>
<td>reason</td>
<td>optional</td>
<td>string</td>
<td>Required only if status is Reject / Decline / Chargeback / Refund / Return / Void</td>
</tr>
<tr>
<td>cvv_check_result</td>
<td>optional</td>
<td>string</td>
<td>Response from processor regarding CVV check</td>
</tr>
<tr>
<td>avs_check_result</td>
<td>optional</td>
<td>string</td>
<td>Result from processor regarding AVS check</td>
</tr>
<tr>
<td>processor_identifier</td>
<td>optional</td>
<td>string</td>
<td>Unique identifier of the processor attempted</td>
</tr>
</tbody></table>

<p><code>required* = conditionally required</code></p>

<pre class="highlight json tab-json"><code><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"code"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Successful Response"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"technical_message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Successful Response"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"details"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="s2">"reference_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"481119"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span></code></pre>

<p><strong>Successful Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>code</td>
<td>number</td>
<td>genesis success code - 0</td>
</tr>
<tr>
<td>message</td>
<td>string</td>
<td>const ’Successful Response’</td>
</tr>
<tr>
<td>technical_message</td>
<td>string</td>
<td>const ’Successful Response’</td>
</tr>
<tr>
<td><strong>details</strong></td>
<td></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;reference_id</td>
<td>string</td>
<td>KYC provider internal id</td>
</tr>
</tbody></table>
<h2 id='identity-document-upload'>Identity Document Upload</h2>
<p>Used to verify documents provided by the customer.</p>

<p>When called this action returns the following:</p>

<ul>
<li>An instant response with a reference id and additional keys by which the particular query could be addressed.</li>
<li>Async responses with answers from the performed checks (OCR, manual, etc.). Usually, this responses arrive after 5-7 minutes. The notification url is agreed on environment basis. Create a new transaction for the particular user before making a call of this kind.</li>
</ul>

<p><code>POST /kyc_service/upload_document</code></p>

<pre class="highlight shell tab-shell"><code>curl https://username:password@gate.emerchantpay.net/kyc_service/upload_document <span class="se">\</span>
   -H <span class="s2">"Content-Type: text/json"</span> <span class="se">\</span>
   -d <span class="s1">'
  {
    "transaction_unique_id": "1332",
    "doc": {
      "mime_type": "image/jpeg",
      "base64_content": "{base_64_endcoded_content}"
    }
  }'</span>
</code></pre>

<p><strong>Request Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>customer_username</td>
<td>optional</td>
<td>string</td>
<td>Username of the customer on your system</td>
</tr>
<tr>
<td>customer_unique_id</td>
<td>optional</td>
<td>string</td>
<td>Unique user identificator on your system</td>
</tr>
<tr>
<td>transaction_unique_id</td>
<td>optional</td>
<td>string</td>
<td>Unique Transaction Id with info of the customer to be verified. Please note; if Transaction Id and Customer Registration Id are rovided the system will use the Transaction Id. Please provide the Transaction Id or the Customer Registration Id; one of them must be provided</td>
</tr>
<tr>
<td>reference_id</td>
<td>optional</td>
<td>string</td>
<td>Unique Customer Registration Id with info of the customer to be verified</td>
</tr>
<tr>
<td>method</td>
<td>optional</td>
<td>enum (number)</td>
<td>1 - Manual; 2 - OCR; 3 - Both;</td>
</tr>
<tr>
<td>doc</td>
<td>required</td>
<td>object</td>
<td>see below</td>
</tr>
<tr>
<td>doc2; doc3; doc4</td>
<td>optional</td>
<td>object</td>
<td>additional document images</td>
</tr>
</tbody></table>

<p><code>required* = conditionally required</code></p>

<p><strong>Document Fields</strong></p>

<p><strong>Request Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>base64_content</td>
<td>required</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>mime_type</td>
<td>required</td>
<td>string</td>
<td></td>
</tr>
</tbody></table>

<p><code>required* = conditionally required</code></p>

<pre class="highlight json tab-json"><code><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"code"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Successful Response"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"technical_message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Successful Response"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"details"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="s2">"kyc_source"</span><span class="p">:</span><span class="w"> </span><span class="s2">"OCR"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"reference_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"382"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="s2">"kyc_source"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Semi-manual"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"reference_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"129"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="s2">"doc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"51f7e411cd1202e040b21655738beb89"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"doc2"</span><span class="p">:</span><span class="w"> </span><span class="s2">"b0139d3fb1785c1e57ac5a6b054692eb"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"doc3"</span><span class="p">:</span><span class="w"> </span><span class="s2">"e0059153192876ce8ab36d8cd8ab1bca"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span></code></pre>

<p><strong>Successful Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>code</td>
<td>number</td>
<td>genesis success code - 0</td>
</tr>
<tr>
<td>message</td>
<td>string</td>
<td>const ’Successful Response’</td>
</tr>
<tr>
<td>technical_message</td>
<td>string</td>
<td>const ’Successful Response’</td>
</tr>
<tr>
<td><strong>details</strong></td>
<td></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;kyc_source</td>
<td>string</td>
<td>KYC service name triggered for verification</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;reference_id</td>
<td>string</td>
<td>id used for reference when verification result is received</td>
</tr>
</tbody></table>
<h2 id='identity-document-download'>Identity Document Download</h2>
<p>Uploaded documents will be stored by legal provisions and they can be requested for review. Just post a JSON body with the identity document id of the given document and a response with the filename and the base64 encoded content of that file would be returned.</p>

<p><code>POST /kyc_service/download_document</code></p>

<pre class="highlight shell tab-shell"><code>curl https://username:password@gate.emerchantpay.net/kyc_service/download_document <span class="se">\</span>
   -H <span class="s2">"Content-Type: text/json"</span> <span class="se">\</span>
   -d <span class="s1">'
  {
    "identity_document_id": "676a053b16781e43db7e75dcb1444ef8"
  }'</span>
</code></pre>

<p><strong>Request Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>identity_document_id</td>
<td>required</td>
<td>string</td>
<td>document id</td>
</tr>
</tbody></table>

<p><code>required* = conditionally required</code></p>

<pre class="highlight json tab-json"><code><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"code"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Successful Response"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"technical_message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Successful Response"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"details"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="s2">"document"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="s2">"file_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"430d595c22dbae26ef39ed91c3aabb49.jpg"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"base64_content"</span><span class="p">:</span><span class="w"> </span><span class="s2">"{base_64_endcoded_content}"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span></code></pre>

<p><strong>Successful Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>code</td>
<td>number</td>
<td>genesis success code - 0</td>
</tr>
<tr>
<td>message</td>
<td>string</td>
<td>const ’Successful Response’</td>
</tr>
<tr>
<td>technical_message</td>
<td>string</td>
<td>const ’Successful Response’</td>
</tr>
<tr>
<td><strong>details</strong></td>
<td></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;file_name</td>
<td>string</td>
<td>file name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;base64_content</td>
<td>string</td>
<td>base64 encoded document content</td>
</tr>
</tbody></table>
<h2 id='consumer-phone-verifications'>Consumer Phone verifications</h2>
<p>Scrub detailed phone characteristics from phone type down to owner name and billing address and more. This method will return all the information we receive from various data sources.</p>

<p><code>POST /kyc_service/verify_phone</code></p>

<pre class="highlight shell tab-shell"><code>curl https://username:password@gate.emerchantpay.net/kyc_service/verify_phone <span class="se">\</span>
   -H <span class="s2">"Content-Type: text/json"</span> <span class="se">\</span>
   -d <span class="s1">'
  {
    "trans_id": "1332",
    "phone": "123123123123"
  }'</span>
</code></pre>

<p><strong>Request Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>trans_id</td>
<td>required</td>
<td>string</td>
<td>Transaction id</td>
</tr>
<tr>
<td>user_name</td>
<td>optional</td>
<td>string</td>
<td>Username of the customer on your system</td>
</tr>
<tr>
<td>user_number</td>
<td>optional</td>
<td>string</td>
<td>Unique user identificator on your system</td>
</tr>
<tr>
<td>phone</td>
<td>required</td>
<td>string</td>
<td>Numbers only; no dash or any other separator. Please include area code if applicable. Country code is not required</td>
</tr>
</tbody></table>

<p><code>required* = conditionally required</code></p>

<pre class="highlight json tab-json"><code><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"code"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Successful Response"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"technical_message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Successful Response"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"payload"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="s2">"reference_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"results"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="mi">201</span><span class="p">,</span><span class="w">
          </span><span class="s2">"reference_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
          </span><span class="s2">"status_description"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
          </span><span class="s2">"phone_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
          </span><span class="s2">"phone_geo_city"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
          </span><span class="s2">"phone_geo_state"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
          </span><span class="s2">"phone_geo_zip"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
          </span><span class="s2">"phone_geo_county"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
          </span><span class="s2">"phone_geo_metro_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
          </span><span class="s2">"phone_geo_country"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
          </span><span class="s2">"phone_geo_time_zone"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
          </span><span class="s2">"phone_geo_coordinates_latitude"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
          </span><span class="s2">"phone_geo_coordinates_longitude"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
          </span><span class="s2">"phone_owner_first_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
          </span><span class="s2">"phone_owner_last_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
          </span><span class="s2">"phone_owner_street_address"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
          </span><span class="s2">"phone_owner_city"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
          </span><span class="s2">"phone_owner_state"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
          </span><span class="s2">"phone_owner_country"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
          </span><span class="s2">"phone_owner_zip"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span></code></pre>

<p><strong>Successful Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>code</td>
<td>number</td>
<td>genesis success code - 0</td>
</tr>
<tr>
<td>message</td>
<td>string</td>
<td>const ’Successful Response’</td>
</tr>
<tr>
<td>technical_message</td>
<td>string</td>
<td>const ’Successful Response’</td>
</tr>
<tr>
<td><strong>payload</strong></td>
<td></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;reference_id</td>
<td>string</td>
<td>id used for future reference</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;results</td>
<td>object</td>
<td>detailed data from KYC provider</td>
</tr>
</tbody></table>
<h2 id='consumer-identity-verifications'>Consumer Identity verifications</h2>
<p>Verify the authenticity of your customers with their ID documentation and information provided with integrity and accuracy.</p>

<p><code>POST /kyc_service/verify_identity</code></p>

<pre class="highlight shell tab-shell"><code>curl https://username:password@gate.emerchantpay.net/kyc_service/verify_identity <span class="se">\</span>
   -H <span class="s2">"Content-Type: text/json"</span> <span class="se">\</span>
   -d <span class="s1">'
  {
    "trans_id": "1332",
    "first_name": "John",
    "last_name": "Doe",
    "address": "MyAddress",
    "city": "Townsvile",
    "postal_code": "666",
    "country": "FR"
  }'</span>
</code></pre>

<p><strong>Request Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>trans_id</td>
<td>required</td>
<td>string</td>
<td>Transaction id</td>
</tr>
<tr>
<td>user_name</td>
<td>optional</td>
<td>string</td>
<td>Username of the customer on your system</td>
</tr>
<tr>
<td>user_number</td>
<td>optional</td>
<td>string</td>
<td>Unique user identificator on your system</td>
</tr>
<tr>
<td>first_name</td>
<td>required</td>
<td>string</td>
<td>Customer first name</td>
</tr>
<tr>
<td>middle_name</td>
<td>optional</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>last_name</td>
<td>required</td>
<td>string</td>
<td>Customer last name</td>
</tr>
<tr>
<td>address</td>
<td>required</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>generation</td>
<td>optional</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>id_type</td>
<td>optional</td>
<td>enum(number)</td>
<td>0 - SSN; 1 - Passport Registry; 2 - Personal ID; 3 - Identity Card; 4 - Driver License; 8 - Travel Document; 12 - Residence Permit; 13 - Identity Certificate; 16 - Registro Federal de Contribuyentes; 17 - Credencial de Elector; 18 - CPF;</td>
</tr>
<tr>
<td>id_value</td>
<td>optional</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>city</td>
<td>required</td>
<td>string</td>
<td>City</td>
</tr>
<tr>
<td>state</td>
<td>optional</td>
<td>string</td>
<td>State code in <a href="https://en.wikipedia.org/wiki/ISO_3166-2">ISO 3166-2</a>, required for USA and Canada</td>
</tr>
<tr>
<td>postal_code</td>
<td>required</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>country</td>
<td>optional</td>
<td>string</td>
<td>ISO 3166-1 Alpha-2</td>
</tr>
<tr>
<td>dob</td>
<td>optional</td>
<td>string</td>
<td>yyyy-mm-dd</td>
</tr>
<tr>
<td>driver_license_number</td>
<td>optional</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>driver_license_state</td>
<td>optional</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>phone</td>
<td>optional</td>
<td>number</td>
<td>Numbers only; no dash or any other separator. Please include area code if applicable. Country code is not required</td>
</tr>
</tbody></table>

<p><code>required* = conditionally required</code></p>

<pre class="highlight json tab-json"><code><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"code"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Successful Response"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"technical_message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Successful Response"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"payload"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="s2">"reference_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"18"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"results"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="s2">"transaction_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">15249304</span><span class="p">,</span><span class="w">
          </span><span class="s2">"primary_result"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
          </span><span class="s2">"checkpoint_score"</span><span class="p">:</span><span class="w"> </span><span class="mi">294</span><span class="p">,</span><span class="w">
          </span><span class="s2">"authentication_score"</span><span class="p">:</span><span class="w"> </span><span class="mi">73</span><span class="p">,</span><span class="w">
          </span><span class="s2">"address_verification_result"</span><span class="p">:</span><span class="w"> </span><span class="s2">"H"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"address_type_result"</span><span class="p">:</span><span class="w"> </span><span class="s2">"N"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"address_high_risk_result"</span><span class="p">:</span><span class="w"> </span><span class="s2">"N"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"phone_verification_result"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NB"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"phone_high_risk_result"</span><span class="p">:</span><span class="w"> </span><span class="s2">"YP"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"change_of_address_result"</span><span class="p">:</span><span class="w"> </span><span class="s2">"N"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"driver_license_result"</span><span class="p">:</span><span class="w"> </span><span class="s2">"I"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"social_security_number_result"</span><span class="p">:</span><span class="w"> </span><span class="s2">"V"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"date_of_birth_result"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w">
          </span><span class="s2">"date_of_birth_day"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
          </span><span class="s2">"date_of_birth_month"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
          </span><span class="s2">"date_of_birth_year"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
          </span><span class="s2">"ssn_validation_state_issued"</span><span class="p">:</span><span class="w"> </span><span class="s2">"KS"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"ssn_validation_issue_start_range"</span><span class="p">:</span><span class="w"> </span><span class="mi">1997</span><span class="p">,</span><span class="w">
          </span><span class="s2">"ssn_validation_issue_end_range"</span><span class="p">:</span><span class="w"> </span><span class="mi">1999</span><span class="p">,</span><span class="w">
          </span><span class="s2">"ofac_validation_response"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
          </span><span class="s2">"previous_addresses"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">

          </span><span class="p">],</span><span class="w">
          </span><span class="s2">"questions"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span></code></pre>

<p><strong>Successful Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>code</td>
<td>number</td>
<td>genesis success code - 0</td>
</tr>
<tr>
<td>message</td>
<td>string</td>
<td>const ’Successful Response’</td>
</tr>
<tr>
<td>technical_message</td>
<td>string</td>
<td>const ’Successful Response’</td>
</tr>
<tr>
<td><strong>payload</strong></td>
<td></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;reference_id</td>
<td>string</td>
<td>id used for future reference</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;results</td>
<td>object</td>
<td>detailed data from KYC provider</td>
</tr>
</tbody></table>
<h2 id='consumer-bank-account-verifications'>Consumer Bank Account verifications</h2>
<p>Confirm customers payment details down to bank location, name, account details and cross-reference against registrant intel.</p>

<p><code>POST /kyc_service/verify_bank_account</code></p>

<pre class="highlight shell tab-shell"><code>curl https://username:password@gate.emerchantpay.net/kyc_service/verify_bank_account <span class="se">\</span>
   -H <span class="s2">"Content-Type: text/json"</span> <span class="se">\</span>
   -d <span class="s1">'
  {
    "customer_information": {
      "first_name": "John",
      "last_name": "Doe",
      "email": "jdoe@example.com",
      "address1": "Sample address",
      "city": "Paris",
      "postal_code": "666",
      "country": "FR",
      "province": "MyProvince"
    },
    "payment_method": {
      "routing": "216790235170695",
      "account": "3421"
    }
  }'</span>
</code></pre>

<p><strong>Request Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>user_name</td>
<td>optional</td>
<td>string</td>
<td>Username of the customer on your system</td>
</tr>
<tr>
<td>user_number</td>
<td>optional</td>
<td>string</td>
<td>Unique user identificator on your system</td>
</tr>
<tr>
<td>customer_information</td>
<td>required</td>
<td>object</td>
<td></td>
</tr>
<tr>
<td>payment_method</td>
<td>required</td>
<td>object</td>
<td></td>
</tr>
<tr>
<td>user</td>
<td>optional</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>pass</td>
<td>optional</td>
<td>string</td>
<td></td>
</tr>
</tbody></table>

<p><code>required* = conditionally required</code></p>

<p><strong>Payment Method Fields</strong></p>

<p><strong>Request Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>routing</td>
<td>required</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>account</td>
<td>required</td>
<td>string</td>
<td>Only numbers up to 30 digits</td>
</tr>
</tbody></table>

<p><code>required* = conditionally required</code></p>

<pre class="highlight json tab-json"><code><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"code"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Successful Response"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"technical_message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Successful Response"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"payload"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="s2">"internal_trans_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"rec"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Approve"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"score"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.43</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span></code></pre>

<p><strong>Successful Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>code</td>
<td>number</td>
<td>genesis success code - 0</td>
</tr>
<tr>
<td>message</td>
<td>string</td>
<td>const ’Successful Response’</td>
</tr>
<tr>
<td>technical_message</td>
<td>string</td>
<td>const ’Successful Response’</td>
</tr>
<tr>
<td><strong>payload</strong></td>
<td></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;internal_trans_id</td>
<td>string</td>
<td>id used for future reference</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;rec</td>
<td>string</td>
<td>KYC service provider recommendation</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;score</td>
<td>number</td>
<td>risk score low is better</td>
</tr>
</tbody></table>
<h2 id='make-call'>Make call</h2>
<p>This method is used to make a call or send an SMS to a given phone number. This method is used to complement the verification process. The system will make a call and dictates the verification code to be typed in the website. The following is a transcript of the voice message the system will use when en-US is used as language:</p>

<aside class="notice">Hello, thank you for using our phone verification system. Your code is [CODE]. Once again, your code is [CODE]. Goodbye!</aside>

<p>The following is an example of the SMS text the system will use when en-US is used as language:</p>

<aside class="notice">Your code is [CODE]. Thank you.</aside>

<p><code>POST /kyc_service/create_authentication</code></p>

<pre class="highlight shell tab-shell"><code>curl https://username:password@gate.emerchantpay.net/kyc_service/create_authentication <span class="se">\</span>
   -H <span class="s2">"Content-Type: text/json"</span> <span class="se">\</span>
   -d <span class="s1">'
  {
    "customer_username": "896342",
    "customer_unique_id": 2,
    "transaction_unique_id": "387783428790324",
    "customer_phone_number": "372489879342",
    "service_language": "bg",
    "security_code": "3423",
    "service_type": 1
  }'</span>
</code></pre>

<p><strong>Request Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>customer_username</td>
<td>optional</td>
<td>string</td>
<td>Username of the customer on your system</td>
</tr>
<tr>
<td>customer_unique_id</td>
<td>optional</td>
<td>string</td>
<td>Unique user identificator on your system</td>
</tr>
<tr>
<td>transaction_unique_id</td>
<td>required</td>
<td>string</td>
<td>Transaction identification in the merchants system; If not provided the system won&#39;t be able to link with the transaction that is being verified</td>
</tr>
<tr>
<td>customer_phone_number</td>
<td>required</td>
<td>string</td>
<td>Phone number to call; It must be complete country code + phone number; No dashes; For example: 50622560000</td>
</tr>
<tr>
<td>service_language</td>
<td>required</td>
<td>string</td>
<td>a string value; See below</td>
</tr>
<tr>
<td>security_code</td>
<td>required</td>
<td>string</td>
<td>Numeric value - 4 digits only; It cannot start with 0; The boot is going to say this numeric value so the user can type it back on the website;</td>
</tr>
<tr>
<td>service_type</td>
<td>required</td>
<td>string</td>
<td>Numeric value to indicate if the system will send a text message or make a voice call; 1 for SMS; 2 for Voice call;</td>
</tr>
</tbody></table>

<p><code>required* = conditionally required</code></p>

<p><strong>Available languages for t_language</strong></p>

<table><thead>
<tr>
<th>Language</th>
<th>Code</th>
</tr>
</thead><tbody>
<tr>
<td>Arabic</td>
<td>a</td>
</tr>
<tr>
<td>Cantonese, Chinese/Hong Kong</td>
<td>zh-HK</td>
</tr>
<tr>
<td>Catalan</td>
<td>ca</td>
</tr>
<tr>
<td>Croatian</td>
<td>hr</td>
</tr>
<tr>
<td>Czech</td>
<td>cs</td>
</tr>
<tr>
<td>Danish</td>
<td>da</td>
</tr>
<tr>
<td>Dutch</td>
<td>nl</td>
</tr>
<tr>
<td>English, Australian</td>
<td>en-AU</td>
</tr>
<tr>
<td>English, UK</td>
<td>en-GB</td>
</tr>
<tr>
<td>English, US</td>
<td>en-US</td>
</tr>
<tr>
<td>Estonian</td>
<td>et</td>
</tr>
<tr>
<td>Filipino</td>
<td>fil</td>
</tr>
<tr>
<td>Finnish</td>
<td>fi</td>
</tr>
<tr>
<td>French</td>
<td>fr</td>
</tr>
<tr>
<td>French, Canadian</td>
<td>fr-CA</td>
</tr>
<tr>
<td>German</td>
<td>de</td>
</tr>
<tr>
<td>Greek</td>
<td>el</td>
</tr>
<tr>
<td>Hebrew</td>
<td>he</td>
</tr>
<tr>
<td>Hindi</td>
<td>hi</td>
</tr>
<tr>
<td>Hungarian</td>
<td>hu</td>
</tr>
<tr>
<td>Icelandic</td>
<td>is</td>
</tr>
<tr>
<td>Indonesian</td>
<td>id</td>
</tr>
<tr>
<td>Italian</td>
<td>it</td>
</tr>
<tr>
<td>Japanese</td>
<td>ja</td>
</tr>
<tr>
<td>Korean</td>
<td>ko</td>
</tr>
<tr>
<td>Latvian</td>
<td>lv</td>
</tr>
<tr>
<td>Lingala</td>
<td>ln</td>
</tr>
<tr>
<td>Lithuanian</td>
<td>lt</td>
</tr>
<tr>
<td>Mandarin</td>
<td>zh-CN</td>
</tr>
<tr>
<td>Norwegian</td>
<td>no</td>
</tr>
<tr>
<td>Polish</td>
<td>pl</td>
</tr>
<tr>
<td>Portuguese, Brazilian</td>
<td>pt-BR</td>
</tr>
<tr>
<td>Portuguese, European</td>
<td>pt</td>
</tr>
<tr>
<td>Romanian</td>
<td>ro</td>
</tr>
<tr>
<td>Russian</td>
<td>ru</td>
</tr>
<tr>
<td>Slovakian</td>
<td>sk</td>
</tr>
<tr>
<td>Spanish, European</td>
<td>es</td>
</tr>
<tr>
<td>Spanish, Latin American</td>
<td>es-419</td>
</tr>
<tr>
<td>Swedish</td>
<td>sv</td>
</tr>
<tr>
<td>Thai</td>
<td>th</td>
</tr>
<tr>
<td>Turkish</td>
<td>tr</td>
</tr>
<tr>
<td>Ukrainian</td>
<td>uk</td>
</tr>
<tr>
<td>Vietnamese</td>
<td>vi</td>
</tr>
</tbody></table>

<pre class="highlight json tab-json"><code><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"code"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Successful Response"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"technical_message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Successful Response"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"details"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="s2">"reference_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"233"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span></code></pre>

<p><strong>Successful Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>code</td>
<td>number</td>
<td>genesis success code - 0</td>
</tr>
<tr>
<td>message</td>
<td>string</td>
<td>const ’Successful Response’</td>
</tr>
<tr>
<td>technical_message</td>
<td>string</td>
<td>const ’Successful Response’</td>
</tr>
<tr>
<td><strong>details</strong></td>
<td></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;reference_id</td>
<td>string</td>
<td>id used for future reference</td>
</tr>
</tbody></table>
<h2 id='update-call'>Update call</h2>
<p>This method is used to update the call status with the latest info received from the main system. It also updates the transaction associated with this verification call.</p>

<p><code>POST /kyc_service/update_authentication</code></p>

<pre class="highlight shell tab-shell"><code>curl https://username:password@gate.emerchantpay.net/kyc_service/update_authentication <span class="se">\</span>
   -H <span class="s2">"Content-Type: text/json"</span> <span class="se">\</span>
   -d <span class="s1">'
  {
    "reference_id": 1237834,
    "security_code_input": "4322",
    "verification_status": "4"
  }'</span>
</code></pre>

<p><strong>Request Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>reference_id</td>
<td>required</td>
<td>string</td>
<td>Unique value to identify the call in back office.</td>
</tr>
<tr>
<td>security_code_input</td>
<td>required</td>
<td>string</td>
<td>Transaction identification in the merchants system; If not provided the system won&#39;t be able to link with the transaction that is being verified</td>
</tr>
<tr>
<td>verification_status</td>
<td>required</td>
<td>string</td>
<td>The first two values are defined by the system when the call is created; the ones accepted in this call are the status 3; 4 and 5 only 1-In Progress; 2-Failed; 3-Verification Failed; 4-Verification Successful; 5-Abandon;</td>
</tr>
</tbody></table>

<p><code>required* = conditionally required</code></p>

<pre class="highlight json tab-json"><code><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"code"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Successful Response"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"technical_message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Successful Response"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"details"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="s2">"reference_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"233"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span></code></pre>

<p><strong>Successful Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>code</td>
<td>number</td>
<td>genesis success code - 0</td>
</tr>
<tr>
<td>message</td>
<td>string</td>
<td>const ’Successful Response’</td>
</tr>
<tr>
<td>technical_message</td>
<td>string</td>
<td>const ’Successful Response’</td>
</tr>
<tr>
<td><strong>details</strong></td>
<td></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;reference_id</td>
<td>string</td>
<td>id used for future reference</td>
</tr>
</tbody></table>
<h2 id='error-response'>Error Response</h2>
<pre class="highlight json tab-json"><code><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"code"</span><span class="p">:</span><span class="w"> </span><span class="mi">404</span><span class="p">,</span><span class="w">
    </span><span class="s2">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Passed attribute is invalid!"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"technical_message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"The property ’#/’ did not contain a required property of ’customer_information’"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span></code></pre>

<pre class="highlight json tab-json"><code><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"code"</span><span class="p">:</span><span class="w"> </span><span class="mi">803</span><span class="p">,</span><span class="w">
    </span><span class="s2">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"KYC Services not configured!"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"technical_message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"KYC Services not configured for Merchant!"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span></code></pre>

<p><strong>Error Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>code</td>
<td>number</td>
<td>Genesis internal error code</td>
</tr>
<tr>
<td>message</td>
<td>string</td>
<td>Short explanation of occurred error</td>
</tr>
<tr>
<td>technical_message</td>
<td>string</td>
<td>More detailed explanation of occurred error</td>
</tr>
</tbody></table>
<h2 id='kyc-service-notification'>Kyc Service Notification</h2>
<p>Since identity document verification is time consuming(can take up to 3-7 minutes) it is an asynchronous call. When verification is done a notification will be sent to configured Merchant notification url with all the details of the review along with the risk score. Note that multiple notifications can be expected so please always check the Score Complete parameter as if we have multiple DocumentId Verify providers, the score will be complemented with more info as we receive the data from the KYC sources. The count of expected notifications will be declared in initial IdentityDocumentUpload response.</p>

<blockquote>
<p>KYC Notification Example</p>
</blockquote>
<pre class="highlight plaintext"><code>?kyc_source=OCR
&amp;reference_id=1912
&amp;score=10
&amp;score_complete=0
&amp;uid=5486354658
&amp;error_message=
&amp;analysis_ref_uid=148871
&amp;controls_identifier=MODEL_VALIDITY
&amp;controls_title_msg=OK
&amp;controls_result_msg=OK
&amp;controls_result=OK
&amp;controls_control_identifier=MODEL_RECOGNIZED
&amp;controls_control_title_msg=OK
&amp;controls_control_result_msg=OK
&amp;controls_control_result=OK
&amp;document_classification_id_type=V
&amp;document_detail_emit_country=USA
&amp;document_detail_expiration_date_day=23
&amp;document_detail_expiration_date_month=12
&amp;document_detail_expiration_date_year=2004
&amp;document_detail_document_number=555123ABC
&amp;document_detail_extra_infos_data_key=PERSONAL_NUMBER
&amp;document_detail_extra_infos_data_value=IFLND00AMS803085
&amp;document_detail_extra_infos_title=Personal_Number
&amp;holder_detail_last_name=TRAVELER
&amp;holder_detail_first_name=HAPPYPERSON
&amp;holder_detail_nationality=GBR
&amp;holder_detail_gender=F
&amp;holder_detail_birth_date_day=5
&amp;holder_detail_birth_date_month=2
&amp;holder_detail_birth_date_year=1965
&amp;mrz_line1=VIUSATRAVELER_HAPPYPERSON
&amp;mrz_line2=555123ABC6GBR6502056F0412236IFLND00AMS803085
&amp;check_report_summary_check_identifier=SUMMARY_ID_COPY
&amp;check_report_summary_check_title_msg=OK
&amp;check_report_summary_check_result_msg=Original_Document
&amp;check_report_summary_check_result=OK
&amp;notification_type=kyc_service_execution
&amp;signature=secure-signature
</code></pre>
<p><strong>Notification Parameters Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>kyc_source</td>
<td>string</td>
<td>name of the KYC source performed the validation</td>
</tr>
<tr>
<td>reference_id</td>
<td>string</td>
<td>Unique id for reference to document upload request</td>
</tr>
<tr>
<td>risk_score</td>
<td>number</td>
<td>Score product of validation rules</td>
</tr>
<tr>
<td>external_unique_id</td>
<td>string</td>
<td>Unique ID Reference from External Service Provider</td>
</tr>
<tr>
<td>analysis_reference_id</td>
<td>string</td>
<td>UniqueID Reference from Genesis</td>
</tr>
<tr>
<td>controls_identifier</td>
<td>string</td>
<td>List of all MAIN controls performed on the document</td>
</tr>
<tr>
<td>...</td>
<td>string</td>
<td>Additional information related to verification process</td>
</tr>
<tr>
<td>notification_type</td>
<td>string</td>
<td>constant value ”kyc service response”</td>
</tr>
<tr>
<td>signature</td>
<td>string</td>
<td>the signature of the notification, should be used to verify the the notification was sent by Genesis</td>
</tr>
</tbody></table>

<p>The signature is a security measure meant to ensure that the gateway is really the sender of the notification. It is generated by concatenating the reference id with your API password and generating a SHA-512 Hash (Hex) of the string:</p>

<p><code>SHA-512 Hash Hex of [reference_id][Your Merchant API password]</code></p>

<p><strong>Notification signature examples</strong></p>

<table><thead>
<tr>
<th>reference_id</th>
<th>API password</th>
<th>signature</th>
</tr>
</thead><tbody>
<tr>
<td>1912</td>
<td>password1</td>
<td>ecc5f441366aef60627a7fd2ad31e8c0e6d61d7cc3922e00fcdcf5cfbc2cc5ed67b9a3fa91a2c45ebd37c37acac6c543bed1f1146aea408c22741ffcd137fe75</td>
</tr>
<tr>
<td>1818</td>
<td>password2</td>
<td>e03a2cdda2d75b7522a1c0b14d078ef017b000aa419c872a1e6489b8dd287e6bc6573feece5cf0db9bd3e6711eb9a7cf65a29b7a13ba5bad1de13d16ba448283</td>
</tr>
</tbody></table>

<p>When receiving the notification, you are required to render an XML page containing the transaction’s reference id so that the gateway knows that you have accepted the notification. If the XML is not delivered, the notification is sent periodically as per the rules for notifications delivery.</p>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;notification_echo&gt;
  &lt;reference_id&gt;1912&lt;/reference_id&gt;
&lt;/notification_echo&gt;
</code></pre>
<h1 id='consumers'>Consumers</h1><h2 id='introduction-4'>Introduction</h2>
<p>The Consumer entity brings <a href="#tokenization">Tokenization</a>,
<a href="#transactions">Transactions</a> and <a href="#wpf">Web Payment Forms</a> (WPF) together. It
is a representation of a customer that can serve different purposes. A consumer
is identified by providing both consumer ID and email. It is <em>explicitly</em>
created via our <a href="#consumer-api">Consumer API</a> or <em>implicitly</em> by providing
<code>customer_email</code> in either <a href="#transactions">Transactions</a> or <a href="#wpf-api">WPF</a>
APIs. The main purpose of consumers is to group web payment forms and payment
transactions. Using the merchant console, one can track consumers and find
high-volume ones. The other role of consumers is to provide simplified, one-step
tokenization of card holder details. For Processing API that means securely
storing card data in exchange for a token, which can be used for future
payments. For WPF, customers can choose either to use previously stored cards or
remember a new payment method.</p>
<h2 id='consumer-api'>Consumer API</h2><h3 id='create-consumer'>Create consumer</h3>
<p>Creates a consumer based on email address. Optionally, one can provide billing
and shipping address. Addresses will be used, if none  given, in Processing or
WPF APIs.</p>

<blockquote>
<p>Request</p>
</blockquote>

<pre class="highlight php tab-php"><code>This request is not implemented yet
</code></pre>

<pre class="highlight java tab-java"><code><span class="n">This</span> <span class="n">request</span> <span class="n">is</span> <span class="n">not</span> <span class="n">implemented</span> <span class="n">yet</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>curl https://gate.emerchantpay.net/v1/create_consumer/ <span class="se">\</span>
   -H <span class="s2">"Content-Type: text/xml"</span> <span class="se">\</span>
   -d <span class="s1">'
&lt;create_consumer_request&gt;
  &lt;email&gt;consumer@email.com&lt;/email&gt;
  &lt;billing_address&gt;
    &lt;first_name&gt;Travis&lt;/first_name&gt;
    &lt;last_name&gt;Pastrana&lt;/last_name&gt;
    &lt;address1&gt;Muster Str. 12&lt;/address1&gt;
    &lt;zip_code&gt;10178&lt;/zip_code&gt;
    &lt;city&gt;Los Angeles&lt;/city&gt;
    &lt;state&gt;CA&lt;/state&gt;
    &lt;country&gt;US&lt;/country&gt;
  &lt;/billing_address&gt;
  &lt;shipping_address&gt;
    &lt;first_name&gt;Travis&lt;/first_name&gt;
    &lt;last_name&gt;Pastrana&lt;/last_name&gt;
    &lt;address1&gt;Muster Str. 12&lt;/address1&gt;
    &lt;zip_code&gt;10001&lt;/zip_code&gt;
    &lt;city&gt;Los Angeles&lt;/city&gt;
    &lt;state&gt;CA&lt;/state&gt;
    &lt;country&gt;US&lt;/country&gt;
  &lt;/shipping_address&gt;
&lt;/create_consumer_request&gt;'</span>
</code></pre>

<p><strong>Request Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>email</td>
<td>required</td>
<td>e-mail address</td>
<td>The consumer e-mail address must be unique. If another consumer exists with this e-mail address, the request will be rejected.</td>
</tr>
<tr>
<td><strong>billing_address</strong></td>
<td>optional</td>
<td></td>
<td>See <a href="#required-vs-optional-api-params">Required vs Optional API params</a> for details</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;first_name</td>
<td>optional</td>
<td>string(255)</td>
<td>Customer first name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;last_name</td>
<td>optional</td>
<td>string(255)</td>
<td>Customer last name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address1</td>
<td>optional</td>
<td>string(255)</td>
<td>Primary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address2</td>
<td>optional</td>
<td>string(255)</td>
<td>Secondary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;zip_code</td>
<td>optional</td>
<td>string</td>
<td>ZIP code</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;city</td>
<td>optional</td>
<td>string(255)</td>
<td>City</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;state</td>
<td>optional</td>
<td>string(2)</td>
<td>State code in <a href="https://en.wikipedia.org/wiki/ISO_3166-2">ISO 3166-2</a>, required for USA and Canada</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;country</td>
<td>optional</td>
<td>string(2)</td>
<td>Country code in <a href="https://www.iso.org/iso-3166-country-codes.html">ISO 3166</a></td>
</tr>
<tr>
<td><strong>shipping_address</strong></td>
<td>optional</td>
<td></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;first_name</td>
<td>optional</td>
<td>string(255)</td>
<td>Customer first name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;last_name</td>
<td>optional</td>
<td>string(255)</td>
<td>Customer last name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address1</td>
<td>optional</td>
<td>string(255)</td>
<td>Primary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address2</td>
<td>optional</td>
<td>string(255)</td>
<td>Secondary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;zip_code</td>
<td>optional</td>
<td>string</td>
<td>ZIP code</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;city</td>
<td>optional</td>
<td>string(255)</td>
<td>City</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;state</td>
<td>optional</td>
<td>string(2)</td>
<td>State code in <a href="https://en.wikipedia.org/wiki/ISO_3166-2">ISO 3166-2</a>, required for USA and Canada</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;country</td>
<td>optional</td>
<td>string(2)</td>
<td>Country code in <a href="https://www.iso.org/iso-3166-country-codes.html">ISO 3166</a></td>
</tr>
</tbody></table>

<p><code>required* = conditionally required</code></p>

<blockquote>
<p>Successful Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>This request is not implemented yet
</code></pre>

<pre class="highlight java tab-java"><code><span class="n">This</span> <span class="n">request</span> <span class="n">is</span> <span class="n">not</span> <span class="n">implemented</span> <span class="n">yet</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;create_consumer_response&gt;
  &lt;consumer_id&gt;123456&lt;/consumer_id&gt;
  &lt;email&gt;consumer@email.com&lt;/email&gt;
  &lt;status&gt;enabled&lt;/status&gt;
&lt;/create_consumer_response&gt;
</code></pre>

<p><strong>Successful Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>consumer_id</td>
<td>string(10)</td>
<td>Consumer unique reference</td>
</tr>
<tr>
<td>email</td>
<td>e-mail address</td>
<td>Consumer e-mail address</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the consumer</td>
</tr>
</tbody></table>

<blockquote>
<p>Error Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>This request is not implemented yet
</code></pre>

<pre class="highlight java tab-java"><code><span class="n">This</span> <span class="n">request</span> <span class="n">is</span> <span class="n">not</span> <span class="n">implemented</span> <span class="n">yet</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;create_consumer_response&gt;
  &lt;status&gt;error&lt;/status&gt;
  &lt;code&gt;330&lt;/code&gt;
  &lt;technical_message&gt;Invalid email format!&lt;/technical_message&gt;
  &lt;message&gt;Something went wrong, please contact support!&lt;/message&gt;
&lt;/create_consumer_response&gt;
</code></pre>

<p><strong>Error Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the consumer</td>
</tr>
<tr>
<td>code</td>
<td>integer</td>
<td>Error code according to <a href="#error-code-table">Error code table</a></td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
<tr>
<td>message</td>
<td>string(255)</td>
<td>Human readable error message which can be displayed to users.</td>
</tr>
</tbody></table>
<h3 id='update-consumer'>Update consumer</h3>
<p>Updates consumer email and addresses.</p>

<blockquote>
<p>Request</p>
</blockquote>

<pre class="highlight php tab-php"><code>This request is not implemented yet
</code></pre>

<pre class="highlight java tab-java"><code><span class="n">This</span> <span class="n">request</span> <span class="n">is</span> <span class="n">not</span> <span class="n">implemented</span> <span class="n">yet</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>curl https://gate.emerchantpay.net/v1/create_consumer/ <span class="se">\</span>
   -H <span class="s2">"Content-Type: text/xml"</span> <span class="se">\</span>
   -d <span class="s1">'
&lt;update_consumer_request&gt;
  &lt;consumer_id&gt;123456&lt;/consumer_id&gt;
  &lt;email&gt;consumer@email.com&lt;/email&gt;
  &lt;billing_address&gt;
    &lt;first_name&gt;Travis&lt;/first_name&gt;
    &lt;last_name&gt;Pastrana&lt;/last_name&gt;
    &lt;address1&gt;Muster Str. 12&lt;/address1&gt;
    &lt;zip_code&gt;10178&lt;/zip_code&gt;
    &lt;city&gt;Los Angeles&lt;/city&gt;
    &lt;state&gt;CA&lt;/state&gt;
    &lt;country&gt;US&lt;/country&gt;
  &lt;/billing_address&gt;
  &lt;shipping_address&gt;
    &lt;first_name&gt;Travis&lt;/first_name&gt;
    &lt;last_name&gt;Pastrana&lt;/last_name&gt;
    &lt;address1&gt;Muster Str. 12&lt;/address1&gt;
    &lt;zip_code&gt;10001&lt;/zip_code&gt;
    &lt;city&gt;Los Angeles&lt;/city&gt;
    &lt;state&gt;CA&lt;/state&gt;
    &lt;country&gt;US&lt;/country&gt;
  &lt;/shipping_address&gt;
&lt;/update_consumer_request&gt;'</span>
</code></pre>

<p><strong>Request Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>consumer_id</td>
<td>required</td>
<td>string(10)</td>
<td>Consumer unique reference</td>
</tr>
<tr>
<td>email</td>
<td>required</td>
<td>e-mail address</td>
<td>New e-mail address</td>
</tr>
<tr>
<td><strong>billing_address</strong></td>
<td>optional</td>
<td></td>
<td>See <a href="#required-vs-optional-api-params">Required vs Optional API params</a> for details</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;first_name</td>
<td>optional</td>
<td>string(255)</td>
<td>Customer first name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;last_name</td>
<td>optional</td>
<td>string(255)</td>
<td>Customer last name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address1</td>
<td>optional</td>
<td>string(255)</td>
<td>Primary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address2</td>
<td>optional</td>
<td>string(255)</td>
<td>Secondary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;zip_code</td>
<td>optional</td>
<td>string</td>
<td>ZIP code</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;city</td>
<td>optional</td>
<td>string(255)</td>
<td>City</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;state</td>
<td>optional</td>
<td>string(2)</td>
<td>State code in <a href="https://en.wikipedia.org/wiki/ISO_3166-2">ISO 3166-2</a>, required for USA and Canada</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;country</td>
<td>optional</td>
<td>string(2)</td>
<td>Country code in <a href="https://www.iso.org/iso-3166-country-codes.html">ISO 3166</a></td>
</tr>
<tr>
<td><strong>shipping_address</strong></td>
<td>optional</td>
<td></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;first_name</td>
<td>optional</td>
<td>string(255)</td>
<td>Customer first name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;last_name</td>
<td>optional</td>
<td>string(255)</td>
<td>Customer last name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address1</td>
<td>optional</td>
<td>string(255)</td>
<td>Primary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address2</td>
<td>optional</td>
<td>string(255)</td>
<td>Secondary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;zip_code</td>
<td>optional</td>
<td>string</td>
<td>ZIP code</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;city</td>
<td>optional</td>
<td>string(255)</td>
<td>City</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;state</td>
<td>optional</td>
<td>string(2)</td>
<td>State code in <a href="https://en.wikipedia.org/wiki/ISO_3166-2">ISO 3166-2</a>, required for USA and Canada</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;country</td>
<td>optional</td>
<td>string(2)</td>
<td>Country code in <a href="https://www.iso.org/iso-3166-country-codes.html">ISO 3166</a></td>
</tr>
</tbody></table>

<p><code>required* = conditionally required</code></p>

<blockquote>
<p>Successful Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>This request is not implemented yet
</code></pre>

<pre class="highlight java tab-java"><code><span class="n">This</span> <span class="n">request</span> <span class="n">is</span> <span class="n">not</span> <span class="n">implemented</span> <span class="n">yet</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;update_consumer_response&gt;
  &lt;consumer_id&gt;123456&lt;/consumer_id&gt;
  &lt;email&gt;consumer@email.com&lt;/email&gt;
  &lt;status&gt;enabled&lt;/status&gt;
&lt;/update_consumer_response&gt;
</code></pre>

<p><strong>Successful Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>consumer_id</td>
<td>string(10)</td>
<td>Consumer unique reference</td>
</tr>
<tr>
<td>email</td>
<td>e-mail address</td>
<td>Consumer e-mail address</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the consumer</td>
</tr>
</tbody></table>

<blockquote>
<p>Error Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>This request is not implemented yet
</code></pre>

<pre class="highlight java tab-java"><code><span class="n">This</span> <span class="n">request</span> <span class="n">is</span> <span class="n">not</span> <span class="n">implemented</span> <span class="n">yet</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;update_consumer_response&gt;
  &lt;status&gt;error&lt;/status&gt;
  &lt;code&gt;702&lt;/code&gt;
  &lt;technical_message&gt;Consumer not found!&lt;/technical_message&gt;
  &lt;message&gt;Something went wrong, please contact support!&lt;/message&gt;
&lt;/update_consumer_response&gt;
</code></pre>

<p><strong>Error Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the consumer</td>
</tr>
<tr>
<td>code</td>
<td>integer</td>
<td>Error code according to <a href="#error-code-table">Error code table</a></td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
<tr>
<td>message</td>
<td>string(255)</td>
<td>Human readable error message which can be displayed to users.</td>
</tr>
</tbody></table>
<h3 id='disable-consumer'>Disable consumer</h3>
<p>Disable consumer from usage until further action.</p>

<blockquote>
<p>Request</p>
</blockquote>

<pre class="highlight php tab-php"><code>This request is not implemented yet
</code></pre>

<pre class="highlight java tab-java"><code><span class="n">This</span> <span class="n">request</span> <span class="n">is</span> <span class="n">not</span> <span class="n">implemented</span> <span class="n">yet</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>curl https://gate.emerchantpay.net/v1/create_consumer/ <span class="se">\</span>
   -H <span class="s2">"Content-Type: text/xml"</span> <span class="se">\</span>
   -d <span class="s1">'
&lt;disable_consumer_request&gt;
  &lt;consumer_id&gt;123456&lt;/consumer_id&gt;
  &lt;email&gt;consumer@email.com&lt;/email&gt;
&lt;/disable_consumer_request&gt;'</span>
</code></pre>

<p><strong>Request Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>consumer_id</td>
<td>required</td>
<td>string(10)</td>
<td>Consumer unique reference</td>
</tr>
<tr>
<td>email</td>
<td>required</td>
<td>e-mail address</td>
<td>Consumer e-mail address</td>
</tr>
</tbody></table>

<p><code>required* = conditionally required</code></p>

<blockquote>
<p>Successful Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>This request is not implemented yet
</code></pre>

<pre class="highlight java tab-java"><code><span class="n">This</span> <span class="n">request</span> <span class="n">is</span> <span class="n">not</span> <span class="n">implemented</span> <span class="n">yet</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;disable_consumer_response&gt;
  &lt;consumer_id&gt;123456&lt;/consumer_id&gt;
  &lt;email&gt;consumer@email.com&lt;/email&gt;
  &lt;status&gt;disabled&lt;/status&gt;
&lt;/disable_consumer_response&gt;
</code></pre>

<p><strong>Successful Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>consumer_id</td>
<td>string(10)</td>
<td>Consumer unique reference</td>
</tr>
<tr>
<td>email</td>
<td>e-mail address</td>
<td>Consumer e-mail address</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the consumer</td>
</tr>
</tbody></table>

<blockquote>
<p>Error Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>This request is not implemented yet
</code></pre>

<pre class="highlight java tab-java"><code><span class="n">This</span> <span class="n">request</span> <span class="n">is</span> <span class="n">not</span> <span class="n">implemented</span> <span class="n">yet</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;disable_consumer_response&gt;
  &lt;status&gt;error&lt;/status&gt;
  &lt;code&gt;702&lt;/code&gt;
  &lt;technical_message&gt;Consumer not found!&lt;/technical_message&gt;
  &lt;message&gt;Something went wrong, please contact support!&lt;/message&gt;
&lt;/disable_consumer_response&gt;
</code></pre>

<p><strong>Error Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the consumer</td>
</tr>
<tr>
<td>code</td>
<td>integer</td>
<td>Error code according to <a href="#error-code-table">Error code table</a></td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
<tr>
<td>message</td>
<td>string(255)</td>
<td>Human readable error message which can be displayed to users.</td>
</tr>
</tbody></table>
<h3 id='enable-consumer'>Enable consumer</h3>
<p>Enable consumer that was disabled in the past.</p>

<blockquote>
<p>Request</p>
</blockquote>

<pre class="highlight php tab-php"><code>This request is not implemented yet
</code></pre>

<pre class="highlight java tab-java"><code><span class="n">This</span> <span class="n">request</span> <span class="n">is</span> <span class="n">not</span> <span class="n">implemented</span> <span class="n">yet</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>curl https://gate.emerchantpay.net/v1/create_consumer/ <span class="se">\</span>
   -H <span class="s2">"Content-Type: text/xml"</span> <span class="se">\</span>
   -d <span class="s1">'
&lt;enable_consumer_request&gt;
  &lt;consumer_id&gt;123456&lt;/consumer_id&gt;
  &lt;email&gt;consumer@email.com&lt;/email&gt;
&lt;/enable_consumer_request&gt;'</span>
</code></pre>

<p><strong>Request Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>consumer_id</td>
<td>required</td>
<td>string(10)</td>
<td>Consumer unique reference</td>
</tr>
<tr>
<td>email</td>
<td>required</td>
<td>e-mail address</td>
<td>Consumer e-mail address</td>
</tr>
</tbody></table>

<p><code>required* = conditionally required</code></p>

<blockquote>
<p>Successful Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>This request is not implemented yet
</code></pre>

<pre class="highlight java tab-java"><code><span class="n">This</span> <span class="n">request</span> <span class="n">is</span> <span class="n">not</span> <span class="n">implemented</span> <span class="n">yet</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;enable_consumer_response&gt;
  &lt;consumer_id&gt;123456&lt;/consumer_id&gt;
  &lt;email&gt;consumer@email.com&lt;/email&gt;
  &lt;status&gt;enabled&lt;/status&gt;
&lt;/enable_consumer_response&gt;
</code></pre>

<p><strong>Successful Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>consumer_id</td>
<td>string(10)</td>
<td>Consumer unique reference</td>
</tr>
<tr>
<td>email</td>
<td>e-mail address</td>
<td>Consumer e-mail address</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the consumer</td>
</tr>
</tbody></table>

<blockquote>
<p>Error Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>This request is not implemented yet
</code></pre>

<pre class="highlight java tab-java"><code><span class="n">This</span> <span class="n">request</span> <span class="n">is</span> <span class="n">not</span> <span class="n">implemented</span> <span class="n">yet</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;enable_consumer_response&gt;
  &lt;status&gt;error&lt;/status&gt;
  &lt;code&gt;702&lt;/code&gt;
  &lt;technical_message&gt;Consumer not found!&lt;/technical_message&gt;
  &lt;message&gt;Something went wrong, please contact support!&lt;/message&gt;
&lt;/enable_consumer_response&gt;
</code></pre>

<p><strong>Error Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the consumer</td>
</tr>
<tr>
<td>code</td>
<td>integer</td>
<td>Error code according to <a href="#error-code-table">Error code table</a></td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
<tr>
<td>message</td>
<td>string(255)</td>
<td>Human readable error message which can be displayed to users.</td>
</tr>
</tbody></table>
<h3 id='get-consumer-cards'>Get consumer cards</h3>
<p>Get previously tokenized card detils for a consumer.</p>

<blockquote>
<p>Request</p>
</blockquote>

<pre class="highlight php tab-php"><code>This request is not implemented yet
</code></pre>

<pre class="highlight java tab-java"><code><span class="n">This</span> <span class="n">request</span> <span class="n">is</span> <span class="n">not</span> <span class="n">implemented</span> <span class="n">yet</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>curl https://gate.emerchantpay.net/v1/create_consumer/ <span class="se">\</span>
   -H <span class="s2">"Content-Type: text/xml"</span> <span class="se">\</span>
   -d <span class="s1">'
&lt;get_consumer_cards_request&gt;
  &lt;consumer_id&gt;123456&lt;/consumer_id&gt;
  &lt;email&gt;consumer@email.com&lt;/email&gt;
&lt;/get_consumer_cards_request&gt;'</span>
</code></pre>

<p><strong>Request Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>consumer_id</td>
<td>required</td>
<td>string(10)</td>
<td>Consumer unique reference</td>
</tr>
<tr>
<td>email</td>
<td>required</td>
<td>e-mail address</td>
<td>Consumer e-mail address</td>
</tr>
</tbody></table>

<p><code>required* = conditionally required</code></p>

<blockquote>
<p>Successful Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>This request is not implemented yet
</code></pre>

<pre class="highlight java tab-java"><code><span class="n">This</span> <span class="n">request</span> <span class="n">is</span> <span class="n">not</span> <span class="n">implemented</span> <span class="n">yet</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;get_consumer_cards_response&gt;
  &lt;total&gt;1&lt;/total&gt;
  &lt;card&gt;
    &lt;card_number&gt;409603...0106&lt;/card_number&gt;
    &lt;card_holder&gt;Travis Pastrana&lt;/card_holder&gt;
    &lt;expiration_month&gt;12&lt;/expiration_month&gt;
    &lt;expiration_year&gt;2020&lt;/expiration_year&gt;
    &lt;card_brand&gt;master&lt;/card_brand&gt;
  &lt;/card&gt;
&lt;/get_consumer_cards_response&gt;
</code></pre>

<p><strong>Successful Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>total</td>
<td>string(255)</td>
<td>Number of non-expired consumer cards</td>
</tr>
<tr>
<td><strong>card</strong></td>
<td></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;card_number</td>
<td>string(13..21)</td>
<td>Masked credit card number</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;card_holder</td>
<td>string(255)</td>
<td>Full name of customer as printed on credit card (first name and last name at least)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;expiration_month</td>
<td>MM</td>
<td>Expiration month as printed on credit card</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;expiration_year</td>
<td>YYYY</td>
<td>Expiration year as printed on credit card</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;card_brand</td>
<td>string</td>
<td>Credit card brand</td>
</tr>
</tbody></table>

<blockquote>
<p>Error Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>This request is not implemented yet
</code></pre>

<pre class="highlight java tab-java"><code><span class="n">This</span> <span class="n">request</span> <span class="n">is</span> <span class="n">not</span> <span class="n">implemented</span> <span class="n">yet</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;get_consumer_cards_response&gt;
  &lt;status&gt;error&lt;/status&gt;
  &lt;code&gt;702&lt;/code&gt;
  &lt;technical_message&gt;Consumer not found!&lt;/technical_message&gt;
  &lt;message&gt;Something went wrong, please contact support!&lt;/message&gt;
&lt;/get_consumer_cards_response&gt;
</code></pre>

<p><strong>Error Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the consumer</td>
</tr>
<tr>
<td>code</td>
<td>integer</td>
<td>Error code according to <a href="#error-code-table">Error code table</a></td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
<tr>
<td>message</td>
<td>string(255)</td>
<td>Human readable error message which can be displayed to users.</td>
</tr>
</tbody></table>
<h1 id='tokenization'>Tokenization</h1><h2 id='introduction-5'>Introduction</h2>
<p>Tokenization is the process of replacing sensitive cardholder data with a surrogate value (”token”).
The data to be tokenized must include at least the primary account number (PAN).</p>

<p>Tokenization greatly reduces the sensitive data that businesses need to store, thus improving security
of credit card transactions and minimizing the costs related to PCI DSS compliance.</p>

<p>We issue reversible non-cryptographic tokens to merchants via our Tokenization API and take care to
store safely the tokenized cardholder data. Merchants are able to use the issued tokens instead of the
cardholder data when creating credit card transactions via our Processing API. PCI DSS compliant
merchants have also the possibility to exchange the token for the original cardholder data via our
Tokenization API (”detokenization”).</p>
<h2 id='tokenization-api-2'>Tokenization API</h2><h3 id='accepted-cardholder-parameters'>Accepted cardholder parameters</h3>
<p>All cardholder data parameters are accepted for tokenization - card number, card holder, expiration year, expiration month.
Please note - CVV is not accepted.</p>
<h3 id='consumer-required'>Consumer required</h3>
<p>An enabled consumer is required in order to use this API. You have to create one or use existing, please check <a href="#consumer-api">Consumer API</a>.</p>
<h3 id='tokenize'>Tokenize</h3>
<p>Tokenizes cardholder data and issues a corresponding token. Merchants should take care to save the
plain-text token value in their system as once issued it is not possible to obtain it again. Attempting
to tokenize the same cardholder data will issue a new token.
The token can be used in the Processing API instead of the cardholder data.</p>

<aside class="notice">
Please note, CVV can’t be part of the cardholder data.
</aside>

<blockquote>
<p>Request</p>
</blockquote>

<pre class="highlight php tab-php"><code>This request is not implemented yet
</code></pre>

<pre class="highlight java tab-java"><code><span class="n">This</span> <span class="n">request</span> <span class="n">is</span> <span class="n">not</span> <span class="n">implemented</span> <span class="n">yet</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>curl https://gate.emerchantpay.net/v1/tokenize/ <span class="se">\</span>
   -H <span class="s2">"Content-Type: text/xml"</span> <span class="se">\</span>
   -d <span class="s1">'
&lt;tokenize_request&gt;
  &lt;consumer_id&gt;123456&lt;/consumer_id&gt;
  &lt;email&gt;consumer@email.com&lt;/email&gt;
  &lt;token_type&gt;uuid&lt;/token_type&gt;
  &lt;card_data&gt;
    &lt;card_number&gt;4200000000000000&lt;/card_number&gt;
    &lt;card_holder&gt;John Doe&lt;/card_holder&gt;
    &lt;expiration_month&gt;05&lt;/expiration_month&gt;
    &lt;expiration_year&gt;2020&lt;/expiration_year&gt;
  &lt;/card_data&gt;
&lt;/tokenize_request&gt;'</span>
</code></pre>

<p><strong>Request Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>consumer_id</td>
<td>required</td>
<td>string(10)</td>
<td>Consumer unique reference</td>
</tr>
<tr>
<td>email</td>
<td>required</td>
<td>e-mail address</td>
<td>Consumer e-mail address</td>
</tr>
<tr>
<td>token_type</td>
<td>required</td>
<td>uuid</td>
<td>Token type format</td>
</tr>
<tr>
<td><strong>card_data</strong></td>
<td>required</td>
<td></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;card_number</td>
<td>required</td>
<td>string(13..21)</td>
<td>Complete cc number of customer</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;card_holder</td>
<td>optional</td>
<td>string(255)</td>
<td>Full name of customer as printed on credit card (first name and last name at least)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;expiration_month</td>
<td>optional</td>
<td>MM</td>
<td>Expiration month as printed on credit card</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;expiration_year</td>
<td>optional</td>
<td>YYYY</td>
<td>Expiration year as printed on credit card</td>
</tr>
</tbody></table>

<p><code>required* = conditionally required</code></p>

<blockquote>
<p>Successful Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>This request is not implemented yet
</code></pre>

<pre class="highlight java tab-java"><code><span class="n">This</span> <span class="n">request</span> <span class="n">is</span> <span class="n">not</span> <span class="n">implemented</span> <span class="n">yet</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;tokenize_response&gt;
  &lt;status&gt;active&lt;/status&gt;
  &lt;token_id&gt;34567&lt;/token_id&gt;
  &lt;token&gt;ee946db8-d7db-4bb7-b608-b65b153e127d&lt;/token&gt;
  &lt;token_type&gt;uuid&lt;/token_type&gt;
  &lt;consumer_id&gt;123456&lt;/consumer_id&gt;
&lt;/tokenize_response&gt;
</code></pre>

<p><strong>Successful Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the token</td>
</tr>
<tr>
<td>token_id</td>
<td>string(32)</td>
<td>Unique token id</td>
</tr>
<tr>
<td>token</td>
<td>string(36)</td>
<td>Plain-text token value</td>
</tr>
<tr>
<td>token_type</td>
<td>uuid</td>
<td>Token type format</td>
</tr>
<tr>
<td>consumer_id</td>
<td>string(10)</td>
<td>Consumer unique reference</td>
</tr>
</tbody></table>

<blockquote>
<p>Error Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>This request is not implemented yet
</code></pre>

<pre class="highlight java tab-java"><code><span class="n">This</span> <span class="n">request</span> <span class="n">is</span> <span class="n">not</span> <span class="n">implemented</span> <span class="n">yet</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;tokenize_response&gt;
  &lt;status&gt;error&lt;/status&gt;
  &lt;code&gt;720&lt;/code&gt;
  &lt;technical_message&gt;Invalid token <span class="nb">type</span>!&lt;/technical_message&gt;
  &lt;message&gt;Something went wrong, please contact support!&lt;/message&gt;
&lt;/tokenize_response&gt;
</code></pre>

<p><strong>Error Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the token</td>
</tr>
<tr>
<td>code</td>
<td>integer</td>
<td>Error code according to <a href="#error-code-table">Error code table</a></td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
<tr>
<td>message</td>
<td>string(255)</td>
<td>Human readable error message which can be displayed to users.</td>
</tr>
</tbody></table>
<h3 id='detokenize'>Detokenize</h3>
<p>Exchanges the token with the tokenized cardholder data</p>

<blockquote>
<p>Request</p>
</blockquote>

<pre class="highlight php tab-php"><code>This request is not implemented yet
</code></pre>

<pre class="highlight java tab-java"><code><span class="n">This</span> <span class="n">request</span> <span class="n">is</span> <span class="n">not</span> <span class="n">implemented</span> <span class="n">yet</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>curl https://gate.emerchantpay.net/v1/detokenize/ <span class="se">\</span>
   -H <span class="s2">"Content-Type: text/xml"</span> <span class="se">\</span>
   -d <span class="s1">'
&lt;detokenize_request&gt;
  &lt;consumer_id&gt;123456&lt;/consumer_id&gt;
  &lt;email&gt;consumer@email.com&lt;/email&gt;
  &lt;token&gt;ee946db8-d7db-4bb7-b608-b65b153e127d&lt;/token&gt;
  &lt;token_type&gt;uuid&lt;/token_type&gt;
&lt;/detokenize_request&gt;'</span>
</code></pre>

<p><strong>Request Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>consumer_id</td>
<td>required</td>
<td>string(10)</td>
<td>Consumer unique reference</td>
</tr>
<tr>
<td>email</td>
<td>required</td>
<td>e-mail address</td>
<td>Consumer e-mail address</td>
</tr>
<tr>
<td>token</td>
<td>required</td>
<td>string(36)</td>
<td>Plain-text token value</td>
</tr>
<tr>
<td>token_type</td>
<td>required</td>
<td>uuid</td>
<td>Token type format</td>
</tr>
</tbody></table>

<p><code>required* = conditionally required</code></p>

<blockquote>
<p>Successful Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>This request is not implemented yet
</code></pre>

<pre class="highlight java tab-java"><code><span class="n">This</span> <span class="n">request</span> <span class="n">is</span> <span class="n">not</span> <span class="n">implemented</span> <span class="n">yet</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;detokenize_response&gt;
  &lt;status&gt;&lt;/status&gt;
  &lt;token_id&gt;34567&lt;/token_id&gt;
  &lt;token_type&gt;uuid&lt;/token_type&gt;
  &lt;card_data&gt;
    &lt;card_number&gt;4200000000000000&lt;/card_number&gt;
    &lt;card_holder&gt;John Doe&lt;/card_holder&gt;
    &lt;expiration_month&gt;05&lt;/expiration_month&gt;
    &lt;expiration_year&gt;2020&lt;/expiration_year&gt;
  &lt;/card_data&gt;
&lt;/detokenize_response&gt;
</code></pre>

<p><strong>Successful Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the token</td>
</tr>
<tr>
<td>token_id</td>
<td>string(32)</td>
<td>Unique token id</td>
</tr>
<tr>
<td>token</td>
<td>string(36)</td>
<td>Plain-text token value</td>
</tr>
<tr>
<td>token_type</td>
<td>uuid</td>
<td>Token type format</td>
</tr>
<tr>
<td><strong>card_data</strong></td>
<td></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;card_number</td>
<td>string(13..21)</td>
<td>Complete cc number of customer</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;card_holder</td>
<td>string(255)</td>
<td>Full name of customer as printed on credit card (first name and last name at least)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;expiration_month</td>
<td>MM</td>
<td>Expiration month as printed on credit card</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;expiration_year</td>
<td>YYYY</td>
<td>Expiration year as printed on credit card</td>
</tr>
</tbody></table>

<blockquote>
<p>Error Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>This request is not implemented yet
</code></pre>

<pre class="highlight java tab-java"><code><span class="n">This</span> <span class="n">request</span> <span class="n">is</span> <span class="n">not</span> <span class="n">implemented</span> <span class="n">yet</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;detokenize_response&gt;
  &lt;status&gt;error&lt;/status&gt;
  &lt;code&gt;730&lt;/code&gt;
  &lt;technical_message&gt;Invalid token!&lt;/technical_message&gt;
  &lt;message&gt;Something went wrong, please contact support!&lt;/message&gt;
&lt;/detokenize_response&gt;
</code></pre>

<p><strong>Error Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the token</td>
</tr>
<tr>
<td>code</td>
<td>integer</td>
<td>Error code according to <a href="#error-code-table">Error code table</a></td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
<tr>
<td>message</td>
<td>string(255)</td>
<td>Human readable error message which can be displayed to users.</td>
</tr>
</tbody></table>
<h3 id='update-token'>Update token</h3>
<p>Updates the tokenized data corresponding to an existing valid token.</p>

<aside class="notice">
Please note, PAN can’t be updated
</aside>

<blockquote>
<p>Request</p>
</blockquote>

<pre class="highlight php tab-php"><code>This request is not implemented yet
</code></pre>

<pre class="highlight java tab-java"><code><span class="n">This</span> <span class="n">request</span> <span class="n">is</span> <span class="n">not</span> <span class="n">implemented</span> <span class="n">yet</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>curl https://gate.emerchantpay.net/v1/update_token/ <span class="se">\</span>
   -H <span class="s2">"Content-Type: text/xml"</span> <span class="se">\</span>
   -d <span class="s1">'
&lt;update_token_request&gt;
  &lt;consumer_id&gt;123456&lt;/consumer_id&gt;
  &lt;email&gt;consumer@email.com&lt;/email&gt;
  &lt;token&gt;ee946db8-d7db-4bb7-b608-b65b153e127d&lt;/token&gt;
  &lt;token_type&gt;uuid&lt;/token_type&gt;
  &lt;card_data&gt;
    &lt;card_number&gt;4200000000000000&lt;/card_number&gt;
    &lt;card_holder&gt;John Doe&lt;/card_holder&gt;
    &lt;expiration_month&gt;05&lt;/expiration_month&gt;
    &lt;expiration_year&gt;2020&lt;/expiration_year&gt;
  &lt;/card_data&gt;
&lt;/update_token_request&gt;'</span>
</code></pre>

<p><strong>Request Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>consumer_id</td>
<td>required</td>
<td>string(10)</td>
<td>Consumer unique reference</td>
</tr>
<tr>
<td>email</td>
<td>required</td>
<td>e-mail address</td>
<td>Consumer e-mail address</td>
</tr>
<tr>
<td>token</td>
<td>required</td>
<td>string(36)</td>
<td>Plain-text token value</td>
</tr>
<tr>
<td>token_type</td>
<td>required</td>
<td>uuid</td>
<td>Token type format</td>
</tr>
<tr>
<td><strong>card_data</strong></td>
<td>required</td>
<td></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;card_number</td>
<td>required</td>
<td>string(13..21)</td>
<td>Complete cc number of customer</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;card_holder</td>
<td>optional</td>
<td>string(255)</td>
<td>Full name of customer as printed on credit card (first name and last name at least)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;expiration_month</td>
<td>optional</td>
<td>MM</td>
<td>Expiration month as printed on credit card</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;expiration_year</td>
<td>optional</td>
<td>YYYY</td>
<td>Expiration year as printed on credit card</td>
</tr>
</tbody></table>

<p><code>required* = conditionally required</code></p>

<blockquote>
<p>Successful Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>This request is not implemented yet
</code></pre>

<pre class="highlight java tab-java"><code><span class="n">This</span> <span class="n">request</span> <span class="n">is</span> <span class="n">not</span> <span class="n">implemented</span> <span class="n">yet</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;update_token_response&gt;
  &lt;status&gt;active&lt;/status&gt;
  &lt;token&gt;ee946db8-d7db-4bb7-b608-b65b153e127d&lt;/token&gt;
  &lt;token_type&gt;uuid&lt;/token_type&gt;
&lt;/update_token_response&gt;
</code></pre>

<p><strong>Successful Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the token</td>
</tr>
<tr>
<td>token</td>
<td>string(36)</td>
<td>Plain-text token value</td>
</tr>
<tr>
<td>token_type</td>
<td>uuid</td>
<td>Token type format</td>
</tr>
</tbody></table>

<blockquote>
<p>Error Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>This request is not implemented yet
</code></pre>

<pre class="highlight java tab-java"><code><span class="n">This</span> <span class="n">request</span> <span class="n">is</span> <span class="n">not</span> <span class="n">implemented</span> <span class="n">yet</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;update_token_response&gt;
  &lt;status&gt;error&lt;/status&gt;
  &lt;code&gt;730&lt;/code&gt;
  &lt;technical_message&gt;Invalid token!&lt;/technical_message&gt;
  &lt;message<span class="s1">'&gt;&lt;/message'</span>&gt;
&lt;/update_token_response&gt;
</code></pre>

<p><strong>Error Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the token</td>
</tr>
<tr>
<td>code</td>
<td>integer</td>
<td>Error code according to <a href="#error-code-table">Error code table</a></td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
<tr>
<td>message</td>
<td>string(255)</td>
<td>Human readable error message which can be displayed to users.</td>
</tr>
</tbody></table>
<h3 id='validate-token'>Validate Token</h3>
<p>Validates if a token is active, owned by a merchant, etc.</p>

<blockquote>
<p>Request</p>
</blockquote>

<pre class="highlight php tab-php"><code>This request is not implemented yet
</code></pre>

<pre class="highlight java tab-java"><code><span class="n">This</span> <span class="n">request</span> <span class="n">is</span> <span class="n">not</span> <span class="n">implemented</span> <span class="n">yet</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>curl https://gate.emerchantpay.net/v1/validate_token/ <span class="se">\</span>
   -H <span class="s2">"Content-Type: text/xml"</span> <span class="se">\</span>
   -d <span class="s1">'
&lt;validate_token_request&gt;
  &lt;consumer_id&gt;123456&lt;/consumer_id&gt;
  &lt;email&gt;consumer@email.com&lt;/email&gt;
  &lt;token&gt;ee946db8-d7db-4bb7-b608-b65b153e127d&lt;/token&gt;
  &lt;token_type&gt;uuid&lt;/token_type&gt;
&lt;/validate_token_request&gt;'</span>
</code></pre>

<p><strong>Request Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>consumer_id</td>
<td>required</td>
<td>string(10)</td>
<td>Consumer unique reference</td>
</tr>
<tr>
<td>email</td>
<td>required</td>
<td>e-mail address</td>
<td>Consumer e-mail address</td>
</tr>
<tr>
<td>token</td>
<td>required</td>
<td>string(36)</td>
<td>Plain-text token value</td>
</tr>
<tr>
<td>token_type</td>
<td>required</td>
<td>uuid</td>
<td>Token type format</td>
</tr>
</tbody></table>

<p><code>required* = conditionally required</code></p>

<blockquote>
<p>Successful Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>This request is not implemented yet
</code></pre>

<pre class="highlight java tab-java"><code><span class="n">This</span> <span class="n">request</span> <span class="n">is</span> <span class="n">not</span> <span class="n">implemented</span> <span class="n">yet</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;validate_token_response&gt;
  &lt;status&gt;active&lt;/status&gt;
  &lt;token_id&gt;34567&lt;/token_id&gt;
  &lt;token_type&gt;uuid&lt;/token_type&gt;
&lt;/validate_token_response&gt;
</code></pre>

<p><strong>Successful Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the token</td>
</tr>
<tr>
<td>token_id</td>
<td>string(32)</td>
<td>Unique token id</td>
</tr>
<tr>
<td>token_type</td>
<td>uuid</td>
<td>Token type format</td>
</tr>
</tbody></table>

<blockquote>
<p>Error Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>This request is not implemented yet
</code></pre>

<pre class="highlight java tab-java"><code><span class="n">This</span> <span class="n">request</span> <span class="n">is</span> <span class="n">not</span> <span class="n">implemented</span> <span class="n">yet</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;validate_token_response&gt;
  &lt;status&gt;error&lt;/status&gt;
  &lt;code&gt;720&lt;/code&gt;
  &lt;technical_message&gt;Invalid token <span class="nb">type</span>!&lt;/technical_message&gt;
  &lt;message&gt;Something went wrong, please contact support!&lt;/message&gt;
&lt;/validate_token_response&gt;
</code></pre>

<p><strong>Error Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the token</td>
</tr>
<tr>
<td>code</td>
<td>integer</td>
<td>Error code according to <a href="#error-code-table">Error code table</a></td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
<tr>
<td>message</td>
<td>string(255)</td>
<td>Human readable error message which can be displayed to users.</td>
</tr>
</tbody></table>
<h3 id='delete-token'>Delete Token</h3>
<p>Deletes a token.</p>

<blockquote>
<p>Request</p>
</blockquote>

<pre class="highlight php tab-php"><code>This request is not implemented yet
</code></pre>

<pre class="highlight java tab-java"><code><span class="n">This</span> <span class="n">request</span> <span class="n">is</span> <span class="n">not</span> <span class="n">implemented</span> <span class="n">yet</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>curl https://gate.emerchantpay.net/v1/delete_token/ <span class="se">\</span>
   -H <span class="s2">"Content-Type: text/xml"</span> <span class="se">\</span>
   -d <span class="s1">'
&lt;delete_token_request&gt;
  &lt;consumer_id&gt;123456&lt;/consumer_id&gt;
  &lt;email&gt;consumer@email.com&lt;/email&gt;
  &lt;token&gt;ee946db8-d7db-4bb7-b608-b65b153e127d&lt;/token&gt;
  &lt;token_type&gt;uuid&lt;/token_type&gt;
&lt;/delete_token_request&gt;'</span>
</code></pre>

<p><strong>Request Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>consumer_id</td>
<td>required</td>
<td>string(10)</td>
<td>Consumer unique reference</td>
</tr>
<tr>
<td>email</td>
<td>required</td>
<td>e-mail address</td>
<td>Consumer e-mail address</td>
</tr>
<tr>
<td>token</td>
<td>required</td>
<td>string(36)</td>
<td>Plain-text token value</td>
</tr>
<tr>
<td>token_type</td>
<td>required</td>
<td>uuid</td>
<td>Token type format</td>
</tr>
</tbody></table>

<p><code>required* = conditionally required</code></p>

<blockquote>
<p>Successful Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>This request is not implemented yet
</code></pre>

<pre class="highlight java tab-java"><code><span class="n">This</span> <span class="n">request</span> <span class="n">is</span> <span class="n">not</span> <span class="n">implemented</span> <span class="n">yet</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;delete_token_response&gt;
  &lt;status&gt;active&lt;/status&gt;
  &lt;token_id&gt;34567&lt;/token_id&gt;
  &lt;token_type&gt;uuid&lt;/token_type&gt;
&lt;/delete_token_response&gt;
</code></pre>

<p><strong>Successful Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the token</td>
</tr>
<tr>
<td>token_id</td>
<td>string(32)</td>
<td>Unique token id</td>
</tr>
<tr>
<td>token_type</td>
<td>uuid</td>
<td>Token type format</td>
</tr>
</tbody></table>

<blockquote>
<p>Error Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>This request is not implemented yet
</code></pre>

<pre class="highlight java tab-java"><code><span class="n">This</span> <span class="n">request</span> <span class="n">is</span> <span class="n">not</span> <span class="n">implemented</span> <span class="n">yet</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;delete_token_response&gt;
  &lt;status&gt;error&lt;/status&gt;
  &lt;code&gt;720&lt;/code&gt;
  &lt;technical_message&gt;Invalid token <span class="nb">type</span>!&lt;/technical_message&gt;
  &lt;message&gt;Something went wrong, please contact support!&lt;/message&gt;
&lt;/delete_token_response&gt;
</code></pre>

<p><strong>Error Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the token</td>
</tr>
<tr>
<td>code</td>
<td>integer</td>
<td>Error code according to <a href="#error-code-table">Error code table</a></td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
<tr>
<td>message</td>
<td>string(255)</td>
<td>Human readable error message which can be displayed to users.</td>
</tr>
</tbody></table>
<h2 id='how-to-tokenize-card-holder-data-in-processing-api'>How to tokenize card holder data in Processing API</h2>
<p>In order to tokenize card details you need to set the <code>remember_card</code> flag to &quot;true&quot;.</p>
<h3 id='create-a-consumer'>Create a Consumer</h3>
<p>Please provide <code>customer_email</code> in addition to card holder details and the
<code>remember_card</code> flag. This will create a consumer and tokenize card holder
details. <code>consumer_id</code> and <code>token</code> will be returned in the response and
notification. <code>consumer_id</code> will be returned in the reconcile response.</p>

<blockquote>
<p>Request</p>
</blockquote>

<pre class="highlight php tab-php"><code><span class="cp">&lt;?php</span>

<span class="c1">// Load the pre-configured ini file...
</span><span class="nx">\Genesis\Config</span><span class="o">::</span><span class="na">loadSettings</span><span class="p">(</span><span class="s1">'/path/to/config.ini'</span><span class="p">);</span>

<span class="nv">$genesis</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Genesis</span><span class="p">(</span><span class="s1">'Financial\Cards\Sale'</span><span class="p">);</span>
<span class="nv">$request</span> <span class="o">=</span> <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">request</span><span class="p">();</span>

<span class="nv">$request</span>
  <span class="o">-&gt;</span><span class="na">setTransactionId</span><span class="p">(</span><span class="s1">'43671'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setUsage</span><span class="p">(</span><span class="s1">'40208 concert tickets'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setRemoteIp</span><span class="p">(</span><span class="s1">'245.253.2.12'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setAmount</span><span class="p">(</span><span class="s1">'100'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCurrency</span><span class="p">(</span><span class="s1">'USD'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCardHolder</span><span class="p">(</span><span class="s1">'Travis Pastrana'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCardNumber</span><span class="p">(</span><span class="s1">'4200000000000000'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setExpirationMonth</span><span class="p">(</span><span class="s1">'12'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setExpirationYear</span><span class="p">(</span><span class="s1">'2020'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCvv</span><span class="p">(</span><span class="s1">'834'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCustomerEmail</span><span class="p">(</span><span class="s1">'travis@example.com'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCustomerPhone</span><span class="p">(</span><span class="s1">'+1987987987987'</span><span class="p">)</span>


  <span class="c1">// Billing Address
</span>  <span class="o">-&gt;</span><span class="na">setBillingFirstName</span><span class="p">(</span><span class="s1">'Travis'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingLastName</span><span class="p">(</span><span class="s1">'Pastrana'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingAddress1</span><span class="p">(</span><span class="s1">'Muster Str. 12'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingZipCode</span><span class="p">(</span><span class="s1">'10178'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingCity</span><span class="p">(</span><span class="s1">'Los Angeles'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingState</span><span class="p">(</span><span class="s1">'CA'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingCountry</span><span class="p">(</span><span class="s1">'US'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setRememberCard</span><span class="p">(</span><span class="s1">'true'</span><span class="p">);</span>

<span class="k">try</span> <span class="p">{</span>
    <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">execute</span><span class="p">();</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">response</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">getResponseObject</span><span class="p">();</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">\Exception</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$e</span><span class="o">-&gt;</span><span class="na">getMessage</span><span class="p">();</span>
<span class="p">}</span>
</code></pre>

<pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.GenesisClient</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.TransactionResult</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.constants.Endpoints</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.constants.Environments</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.requests.financial.card.SaleRequest</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.model.Transaction</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Configuration</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Country</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Currency</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.math.BigDecimal</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">GenesisExample</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">()</span>  <span class="o">{</span>

    <span class="c1">// Create configuration</span>
    <span class="n">Configuration</span> <span class="n">configuration</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Configuration</span><span class="o">(</span><span class="n">Environments</span><span class="o">.</span><span class="na">STAGING</span><span class="o">,</span> <span class="n">Endpoints</span><span class="o">.</span><span class="na">EMERCHANTPAY</span><span class="o">);</span>

    <span class="n">configuration</span><span class="o">.</span><span class="na">setUsername</span><span class="o">(</span><span class="s">"SET_YOUR_USERNAME"</span><span class="o">);</span>
    <span class="n">configuration</span><span class="o">.</span><span class="na">setPassword</span><span class="o">(</span><span class="s">"SET_YOUR_PASSWORD"</span><span class="o">);</span>
    <span class="n">configuration</span><span class="o">.</span><span class="na">setToken</span><span class="o">(</span><span class="s">"SET_YOUR_TOKEN"</span><span class="o">);</span>

    <span class="n">SaleRequest</span> <span class="n">request</span> <span class="o">=</span> <span class="k">new</span> <span class="n">SaleRequest</span><span class="o">();</span>

    <span class="n">request</span><span class="o">.</span><span class="na">setTransactionId</span><span class="o">(</span><span class="s">"43671"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setUsage</span><span class="o">(</span><span class="s">"40208 concert tickets"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setRemoteIp</span><span class="o">(</span><span class="s">"245.253.2.12"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setAmount</span><span class="o">(</span><span class="k">new</span> <span class="n">BigDecimal</span><span class="o">(</span><span class="mi">100</span><span class="o">));</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCurrency</span><span class="o">(</span><span class="s">"USD"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCardHolder</span><span class="o">(</span><span class="s">"Travis Pastrana"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCardNumber</span><span class="o">(</span><span class="s">"4200000000000000"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setExpirationMonth</span><span class="o">(</span><span class="s">"12"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setExpirationYear</span><span class="o">(</span><span class="s">"2020"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCvv</span><span class="o">(</span><span class="s">"834"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCustomerEmail</span><span class="o">(</span><span class="s">"travis@example.com"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCustomerPhone</span><span class="o">(</span><span class="s">"+1987987987987"</span><span class="o">);</span>


    <span class="c1">// Billing Address</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingFirstname</span><span class="o">(</span><span class="s">"Travis"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingLastname</span><span class="o">(</span><span class="s">"Pastrana"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingPrimaryAddress</span><span class="o">(</span><span class="s">"Muster Str. 12"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingZipCode</span><span class="o">(</span><span class="s">"10178"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingCity</span><span class="o">(</span><span class="s">"Los Angeles"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingState</span><span class="o">(</span><span class="s">"CA"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingCountry</span><span class="o">(</span><span class="s">"US"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setRememberCard</span><span class="o">(</span><span class="s">"true"</span><span class="o">);</span>

    <span class="n">GenesisClient</span> <span class="n">client</span> <span class="o">=</span> <span class="k">new</span> <span class="n">GenesisClient</span><span class="o">(</span><span class="n">configuration</span><span class="o">,</span> <span class="n">request</span><span class="o">);</span>
    <span class="n">client</span><span class="o">.</span><span class="na">execute</span><span class="o">();</span>

    <span class="c1">// Parse Payment result</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">client</span><span class="o">.</span><span class="na">getResponse</span><span class="o">());</span>

  <span class="o">}</span>
<span class="o">}</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="kd">var</span> <span class="nx">genesis</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'genesis.js/lib/genesis.js'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">transaction</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">genesis</span><span class="p">.</span><span class="nx">transaction</span><span class="p">();</span>

<span class="kd">var</span> <span class="nx">failure</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">reason</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">reason</span><span class="p">);</span>
<span class="p">};</span>

<span class="kd">var</span> <span class="nx">success</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>

<span class="nx">transaction</span><span class="p">.</span><span class="nx">sale</span><span class="p">(</span>
  <span class="p">{</span>
    <span class="s2">"transaction_id"</span><span class="p">:</span> <span class="s2">"43671"</span><span class="p">,</span>
    <span class="s2">"usage"</span><span class="p">:</span> <span class="s2">"40208 concert tickets"</span><span class="p">,</span>
    <span class="s2">"remote_ip"</span><span class="p">:</span> <span class="s2">"245.253.2.12"</span><span class="p">,</span>
    <span class="s2">"amount"</span><span class="p">:</span> <span class="s2">"100"</span><span class="p">,</span>
    <span class="s2">"currency"</span><span class="p">:</span> <span class="s2">"USD"</span><span class="p">,</span>
    <span class="s2">"card_holder"</span><span class="p">:</span> <span class="s2">"Travis Pastrana"</span><span class="p">,</span>
    <span class="s2">"card_number"</span><span class="p">:</span> <span class="s2">"4200000000000000"</span><span class="p">,</span>
    <span class="s2">"expiration_month"</span><span class="p">:</span> <span class="s2">"12"</span><span class="p">,</span>
    <span class="s2">"expiration_year"</span><span class="p">:</span> <span class="mi">2020</span><span class="p">,</span>
    <span class="s2">"cvv"</span><span class="p">:</span> <span class="s2">"834"</span><span class="p">,</span>
    <span class="s2">"customer_email"</span><span class="p">:</span> <span class="s2">"travis@example.com"</span><span class="p">,</span>
    <span class="s2">"customer_phone"</span><span class="p">:</span> <span class="s2">"+1987987987987"</span><span class="p">,</span>
    <span class="s2">"billing_address"</span><span class="p">:</span> <span class="p">{</span>
      <span class="s2">"first_name"</span><span class="p">:</span> <span class="s2">"Travis"</span><span class="p">,</span>
      <span class="s2">"last_name"</span><span class="p">:</span> <span class="s2">"Pastrana"</span><span class="p">,</span>
      <span class="s2">"address1"</span><span class="p">:</span> <span class="s2">"Muster Str. 12"</span><span class="p">,</span>
      <span class="s2">"zip_code"</span><span class="p">:</span> <span class="s2">"10178"</span><span class="p">,</span>
      <span class="s2">"city"</span><span class="p">:</span> <span class="s2">"Los Angeles"</span><span class="p">,</span>
      <span class="s2">"state"</span><span class="p">:</span> <span class="s2">"CA"</span><span class="p">,</span>
      <span class="s2">"country"</span><span class="p">:</span> <span class="s2">"US"</span>
    <span class="p">},</span>
    <span class="s2">"remember_card"</span><span class="p">:</span> <span class="s2">"true"</span>
  <span class="p">}</span>
<span class="p">).</span><span class="nx">send</span><span class="p">()</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">success</span><span class="p">)</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">failure</span><span class="p">);</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>curl https://gate.emerchantpay.net/process/TERMINAL_TOKEN/ <span class="se">\</span>
   -H <span class="s2">"Content-Type: text/xml"</span> <span class="se">\</span>
   -d <span class="s1">'
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;sale&lt;/transaction_type&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;usage&gt;40208 concert tickets&lt;/usage&gt;
  &lt;remote_ip&gt;245.253.2.12&lt;/remote_ip&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
  &lt;card_holder&gt;Travis Pastrana&lt;/card_holder&gt;
  &lt;card_number&gt;4200000000000000&lt;/card_number&gt;
  &lt;expiration_month&gt;12&lt;/expiration_month&gt;
  &lt;expiration_year&gt;2020&lt;/expiration_year&gt;
  &lt;cvv&gt;834&lt;/cvv&gt;
  &lt;customer_email&gt;travis@example.com&lt;/customer_email&gt;
  &lt;customer_phone&gt;+1987987987987&lt;/customer_phone&gt;
  &lt;billing_address&gt;
    &lt;first_name&gt;Travis&lt;/first_name&gt;
    &lt;last_name&gt;Pastrana&lt;/last_name&gt;
    &lt;address1&gt;Muster Str. 12&lt;/address1&gt;
    &lt;zip_code&gt;10178&lt;/zip_code&gt;
    &lt;city&gt;Los Angeles&lt;/city&gt;
    &lt;state&gt;CA&lt;/state&gt;
    &lt;country&gt;US&lt;/country&gt;
  &lt;/billing_address&gt;
  &lt;remember_card&gt;true&lt;/remember_card&gt;
&lt;/payment_transaction&gt;'</span>
</code></pre>
<h3 id='use-existing-consumer'>Use existing consumer</h3>
<p>Please provide <code>consumer_id</code> and <code>customer_email</code> in addition to card holder
details and the <code>remember_card</code> flag. An existing consumer will be used, if
identified. <code>consumer_id</code> and <code>token</code> will be returned in the response and
notification. <code>consumer_id</code> will be returned in the reconcile response.</p>

<blockquote>
<p>Request</p>
</blockquote>

<pre class="highlight php tab-php"><code><span class="cp">&lt;?php</span>

<span class="c1">// Load the pre-configured ini file...
</span><span class="nx">\Genesis\Config</span><span class="o">::</span><span class="na">loadSettings</span><span class="p">(</span><span class="s1">'/path/to/config.ini'</span><span class="p">);</span>

<span class="nv">$genesis</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Genesis</span><span class="p">(</span><span class="s1">'Financial\Cards\Sale'</span><span class="p">);</span>
<span class="nv">$request</span> <span class="o">=</span> <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">request</span><span class="p">();</span>

<span class="nv">$request</span>
  <span class="o">-&gt;</span><span class="na">setTransactionId</span><span class="p">(</span><span class="s1">'43671'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setUsage</span><span class="p">(</span><span class="s1">'40208 concert tickets'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setRemoteIp</span><span class="p">(</span><span class="s1">'245.253.2.12'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setAmount</span><span class="p">(</span><span class="s1">'100'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCurrency</span><span class="p">(</span><span class="s1">'USD'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCardHolder</span><span class="p">(</span><span class="s1">'Travis Pastrana'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCardNumber</span><span class="p">(</span><span class="s1">'4200000000000000'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setExpirationMonth</span><span class="p">(</span><span class="s1">'12'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setExpirationYear</span><span class="p">(</span><span class="s1">'2020'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCvv</span><span class="p">(</span><span class="s1">'834'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCustomerEmail</span><span class="p">(</span><span class="s1">'travis@example.com'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCustomerPhone</span><span class="p">(</span><span class="s1">'+1987987987987'</span><span class="p">)</span>


  <span class="c1">// Billing Address
</span>  <span class="o">-&gt;</span><span class="na">setBillingFirstName</span><span class="p">(</span><span class="s1">'Travis'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingLastName</span><span class="p">(</span><span class="s1">'Pastrana'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingAddress1</span><span class="p">(</span><span class="s1">'Muster Str. 12'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingZipCode</span><span class="p">(</span><span class="s1">'10178'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingCity</span><span class="p">(</span><span class="s1">'Los Angeles'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingState</span><span class="p">(</span><span class="s1">'CA'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingCountry</span><span class="p">(</span><span class="s1">'US'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setRememberCard</span><span class="p">(</span><span class="s1">'true'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setConsumerId</span><span class="p">(</span><span class="s1">'123456'</span><span class="p">);</span>

<span class="k">try</span> <span class="p">{</span>
    <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">execute</span><span class="p">();</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">response</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">getResponseObject</span><span class="p">();</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">\Exception</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$e</span><span class="o">-&gt;</span><span class="na">getMessage</span><span class="p">();</span>
<span class="p">}</span>
</code></pre>

<pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.GenesisClient</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.TransactionResult</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.constants.Endpoints</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.constants.Environments</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.requests.financial.card.SaleRequest</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.model.Transaction</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Configuration</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Country</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Currency</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.math.BigDecimal</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">GenesisExample</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">()</span>  <span class="o">{</span>

    <span class="c1">// Create configuration</span>
    <span class="n">Configuration</span> <span class="n">configuration</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Configuration</span><span class="o">(</span><span class="n">Environments</span><span class="o">.</span><span class="na">STAGING</span><span class="o">,</span> <span class="n">Endpoints</span><span class="o">.</span><span class="na">EMERCHANTPAY</span><span class="o">);</span>

    <span class="n">configuration</span><span class="o">.</span><span class="na">setUsername</span><span class="o">(</span><span class="s">"SET_YOUR_USERNAME"</span><span class="o">);</span>
    <span class="n">configuration</span><span class="o">.</span><span class="na">setPassword</span><span class="o">(</span><span class="s">"SET_YOUR_PASSWORD"</span><span class="o">);</span>
    <span class="n">configuration</span><span class="o">.</span><span class="na">setToken</span><span class="o">(</span><span class="s">"SET_YOUR_TOKEN"</span><span class="o">);</span>

    <span class="n">SaleRequest</span> <span class="n">request</span> <span class="o">=</span> <span class="k">new</span> <span class="n">SaleRequest</span><span class="o">();</span>

    <span class="n">request</span><span class="o">.</span><span class="na">setTransactionId</span><span class="o">(</span><span class="s">"43671"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setUsage</span><span class="o">(</span><span class="s">"40208 concert tickets"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setRemoteIp</span><span class="o">(</span><span class="s">"245.253.2.12"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setAmount</span><span class="o">(</span><span class="k">new</span> <span class="n">BigDecimal</span><span class="o">(</span><span class="mi">100</span><span class="o">));</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCurrency</span><span class="o">(</span><span class="s">"USD"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCardHolder</span><span class="o">(</span><span class="s">"Travis Pastrana"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCardNumber</span><span class="o">(</span><span class="s">"4200000000000000"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setExpirationMonth</span><span class="o">(</span><span class="s">"12"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setExpirationYear</span><span class="o">(</span><span class="s">"2020"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCvv</span><span class="o">(</span><span class="s">"834"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCustomerEmail</span><span class="o">(</span><span class="s">"travis@example.com"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCustomerPhone</span><span class="o">(</span><span class="s">"+1987987987987"</span><span class="o">);</span>


    <span class="c1">// Billing Address</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingFirstname</span><span class="o">(</span><span class="s">"Travis"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingLastname</span><span class="o">(</span><span class="s">"Pastrana"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingPrimaryAddress</span><span class="o">(</span><span class="s">"Muster Str. 12"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingZipCode</span><span class="o">(</span><span class="s">"10178"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingCity</span><span class="o">(</span><span class="s">"Los Angeles"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingState</span><span class="o">(</span><span class="s">"CA"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingCountry</span><span class="o">(</span><span class="s">"US"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setRememberCard</span><span class="o">(</span><span class="s">"true"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setConsumerId</span><span class="o">(</span><span class="s">"123456"</span><span class="o">);</span>

    <span class="n">GenesisClient</span> <span class="n">client</span> <span class="o">=</span> <span class="k">new</span> <span class="n">GenesisClient</span><span class="o">(</span><span class="n">configuration</span><span class="o">,</span> <span class="n">request</span><span class="o">);</span>
    <span class="n">client</span><span class="o">.</span><span class="na">execute</span><span class="o">();</span>

    <span class="c1">// Parse Payment result</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">client</span><span class="o">.</span><span class="na">getResponse</span><span class="o">());</span>

  <span class="o">}</span>
<span class="o">}</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="kd">var</span> <span class="nx">genesis</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'genesis.js/lib/genesis.js'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">transaction</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">genesis</span><span class="p">.</span><span class="nx">transaction</span><span class="p">();</span>

<span class="kd">var</span> <span class="nx">failure</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">reason</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">reason</span><span class="p">);</span>
<span class="p">};</span>

<span class="kd">var</span> <span class="nx">success</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>

<span class="nx">transaction</span><span class="p">.</span><span class="nx">sale</span><span class="p">(</span>
  <span class="p">{</span>
    <span class="s2">"transaction_id"</span><span class="p">:</span> <span class="s2">"43671"</span><span class="p">,</span>
    <span class="s2">"usage"</span><span class="p">:</span> <span class="s2">"40208 concert tickets"</span><span class="p">,</span>
    <span class="s2">"remote_ip"</span><span class="p">:</span> <span class="s2">"245.253.2.12"</span><span class="p">,</span>
    <span class="s2">"amount"</span><span class="p">:</span> <span class="s2">"100"</span><span class="p">,</span>
    <span class="s2">"currency"</span><span class="p">:</span> <span class="s2">"USD"</span><span class="p">,</span>
    <span class="s2">"card_holder"</span><span class="p">:</span> <span class="s2">"Travis Pastrana"</span><span class="p">,</span>
    <span class="s2">"card_number"</span><span class="p">:</span> <span class="s2">"4200000000000000"</span><span class="p">,</span>
    <span class="s2">"expiration_month"</span><span class="p">:</span> <span class="s2">"12"</span><span class="p">,</span>
    <span class="s2">"expiration_year"</span><span class="p">:</span> <span class="mi">2020</span><span class="p">,</span>
    <span class="s2">"cvv"</span><span class="p">:</span> <span class="s2">"834"</span><span class="p">,</span>
    <span class="s2">"customer_email"</span><span class="p">:</span> <span class="s2">"travis@example.com"</span><span class="p">,</span>
    <span class="s2">"customer_phone"</span><span class="p">:</span> <span class="s2">"+1987987987987"</span><span class="p">,</span>
    <span class="s2">"billing_address"</span><span class="p">:</span> <span class="p">{</span>
      <span class="s2">"first_name"</span><span class="p">:</span> <span class="s2">"Travis"</span><span class="p">,</span>
      <span class="s2">"last_name"</span><span class="p">:</span> <span class="s2">"Pastrana"</span><span class="p">,</span>
      <span class="s2">"address1"</span><span class="p">:</span> <span class="s2">"Muster Str. 12"</span><span class="p">,</span>
      <span class="s2">"zip_code"</span><span class="p">:</span> <span class="s2">"10178"</span><span class="p">,</span>
      <span class="s2">"city"</span><span class="p">:</span> <span class="s2">"Los Angeles"</span><span class="p">,</span>
      <span class="s2">"state"</span><span class="p">:</span> <span class="s2">"CA"</span><span class="p">,</span>
      <span class="s2">"country"</span><span class="p">:</span> <span class="s2">"US"</span>
    <span class="p">},</span>
    <span class="s2">"remember_card"</span><span class="p">:</span> <span class="s2">"true"</span><span class="p">,</span>
    <span class="s2">"consumer_id"</span><span class="p">:</span> <span class="s2">"123456"</span>
  <span class="p">}</span>
<span class="p">).</span><span class="nx">send</span><span class="p">()</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">success</span><span class="p">)</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">failure</span><span class="p">);</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>curl https://gate.emerchantpay.net/process/TERMINAL_TOKEN/ <span class="se">\</span>
   -H <span class="s2">"Content-Type: text/xml"</span> <span class="se">\</span>
   -d <span class="s1">'
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;sale&lt;/transaction_type&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;usage&gt;40208 concert tickets&lt;/usage&gt;
  &lt;remote_ip&gt;245.253.2.12&lt;/remote_ip&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
  &lt;card_holder&gt;Travis Pastrana&lt;/card_holder&gt;
  &lt;card_number&gt;4200000000000000&lt;/card_number&gt;
  &lt;expiration_month&gt;12&lt;/expiration_month&gt;
  &lt;expiration_year&gt;2020&lt;/expiration_year&gt;
  &lt;cvv&gt;834&lt;/cvv&gt;
  &lt;customer_email&gt;travis@example.com&lt;/customer_email&gt;
  &lt;customer_phone&gt;+1987987987987&lt;/customer_phone&gt;
  &lt;billing_address&gt;
    &lt;first_name&gt;Travis&lt;/first_name&gt;
    &lt;last_name&gt;Pastrana&lt;/last_name&gt;
    &lt;address1&gt;Muster Str. 12&lt;/address1&gt;
    &lt;zip_code&gt;10178&lt;/zip_code&gt;
    &lt;city&gt;Los Angeles&lt;/city&gt;
    &lt;state&gt;CA&lt;/state&gt;
    &lt;country&gt;US&lt;/country&gt;
  &lt;/billing_address&gt;
  &lt;remember_card&gt;true&lt;/remember_card&gt;
  &lt;consumer_id&gt;123456&lt;/consumer_id&gt;
&lt;/payment_transaction&gt;'</span>
</code></pre>
<h2 id='how-to-use-tokens-in-processing-api'>How to use tokens in Processing API</h2><h3 id='requests'>Requests</h3>
<p>Merchants can substitute cardholder parameters with tokens in the request when
creating credit card transactions via our Processing API. Please note: merchants
may choose to tokenize all cardholder parameters or only a subset. In the latter
case the remaining parameters would need to be provided in the request. An
enabled consumer is required to use tokens in Processing API. Please provide
<code>consumer_id</code> and <code>customer_email</code> along with the <code>token</code>.</p>

<blockquote>
<p>Request</p>
</blockquote>

<pre class="highlight php tab-php"><code><span class="cp">&lt;?php</span>

<span class="c1">// Load the pre-configured ini file...
</span><span class="nx">\Genesis\Config</span><span class="o">::</span><span class="na">loadSettings</span><span class="p">(</span><span class="s1">'/path/to/config.ini'</span><span class="p">);</span>

<span class="nv">$genesis</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Genesis</span><span class="p">(</span><span class="s1">'Financial\Cards\Sale'</span><span class="p">);</span>
<span class="nv">$request</span> <span class="o">=</span> <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">request</span><span class="p">();</span>

<span class="nv">$request</span>
  <span class="o">-&gt;</span><span class="na">setTransactionId</span><span class="p">(</span><span class="s1">'43671'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setUsage</span><span class="p">(</span><span class="s1">'40208 concert tickets'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setRemoteIp</span><span class="p">(</span><span class="s1">'245.253.2.12'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setAmount</span><span class="p">(</span><span class="s1">'100'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCurrency</span><span class="p">(</span><span class="s1">'USD'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setToken</span><span class="p">(</span><span class="s1">'ee946db8-d7db-4bb7-b608-b65b153e127d'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCvv</span><span class="p">(</span><span class="s1">'834'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCustomerEmail</span><span class="p">(</span><span class="s1">'travis@example.com'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCustomerPhone</span><span class="p">(</span><span class="s1">'+1987987987987'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setConsumerId</span><span class="p">(</span><span class="s1">'123456'</span><span class="p">);</span>

<span class="k">try</span> <span class="p">{</span>
    <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">execute</span><span class="p">();</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">response</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">getResponseObject</span><span class="p">();</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">\Exception</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$e</span><span class="o">-&gt;</span><span class="na">getMessage</span><span class="p">();</span>
<span class="p">}</span>
</code></pre>

<pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.GenesisClient</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.TransactionResult</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.constants.Endpoints</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.constants.Environments</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.requests.financial.card.SaleRequest</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.model.Transaction</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Configuration</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Country</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Currency</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.math.BigDecimal</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">GenesisExample</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">()</span>  <span class="o">{</span>

    <span class="c1">// Create configuration</span>
    <span class="n">Configuration</span> <span class="n">configuration</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Configuration</span><span class="o">(</span><span class="n">Environments</span><span class="o">.</span><span class="na">STAGING</span><span class="o">,</span> <span class="n">Endpoints</span><span class="o">.</span><span class="na">EMERCHANTPAY</span><span class="o">);</span>

    <span class="n">configuration</span><span class="o">.</span><span class="na">setUsername</span><span class="o">(</span><span class="s">"SET_YOUR_USERNAME"</span><span class="o">);</span>
    <span class="n">configuration</span><span class="o">.</span><span class="na">setPassword</span><span class="o">(</span><span class="s">"SET_YOUR_PASSWORD"</span><span class="o">);</span>
    <span class="n">configuration</span><span class="o">.</span><span class="na">setToken</span><span class="o">(</span><span class="s">"SET_YOUR_TOKEN"</span><span class="o">);</span>

    <span class="n">SaleRequest</span> <span class="n">request</span> <span class="o">=</span> <span class="k">new</span> <span class="n">SaleRequest</span><span class="o">();</span>

    <span class="n">request</span><span class="o">.</span><span class="na">setTransactionId</span><span class="o">(</span><span class="s">"43671"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setUsage</span><span class="o">(</span><span class="s">"40208 concert tickets"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setRemoteIp</span><span class="o">(</span><span class="s">"245.253.2.12"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setAmount</span><span class="o">(</span><span class="k">new</span> <span class="n">BigDecimal</span><span class="o">(</span><span class="mi">100</span><span class="o">));</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCurrency</span><span class="o">(</span><span class="s">"USD"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setToken</span><span class="o">(</span><span class="s">"ee946db8-d7db-4bb7-b608-b65b153e127d"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCvv</span><span class="o">(</span><span class="s">"834"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCustomerEmail</span><span class="o">(</span><span class="s">"travis@example.com"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCustomerPhone</span><span class="o">(</span><span class="s">"+1987987987987"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setConsumerId</span><span class="o">(</span><span class="s">"123456"</span><span class="o">);</span>

    <span class="n">GenesisClient</span> <span class="n">client</span> <span class="o">=</span> <span class="k">new</span> <span class="n">GenesisClient</span><span class="o">(</span><span class="n">configuration</span><span class="o">,</span> <span class="n">request</span><span class="o">);</span>
    <span class="n">client</span><span class="o">.</span><span class="na">execute</span><span class="o">();</span>

    <span class="c1">// Parse Payment result</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">client</span><span class="o">.</span><span class="na">getResponse</span><span class="o">());</span>

  <span class="o">}</span>
<span class="o">}</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="kd">var</span> <span class="nx">genesis</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'genesis.js/lib/genesis.js'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">transaction</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">genesis</span><span class="p">.</span><span class="nx">transaction</span><span class="p">();</span>

<span class="kd">var</span> <span class="nx">failure</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">reason</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">reason</span><span class="p">);</span>
<span class="p">};</span>

<span class="kd">var</span> <span class="nx">success</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>

<span class="nx">transaction</span><span class="p">.</span><span class="nx">sale</span><span class="p">(</span>
  <span class="p">{</span>
    <span class="s2">"transaction_id"</span><span class="p">:</span> <span class="s2">"43671"</span><span class="p">,</span>
    <span class="s2">"usage"</span><span class="p">:</span> <span class="s2">"40208 concert tickets"</span><span class="p">,</span>
    <span class="s2">"remote_ip"</span><span class="p">:</span> <span class="s2">"245.253.2.12"</span><span class="p">,</span>
    <span class="s2">"amount"</span><span class="p">:</span> <span class="s2">"100"</span><span class="p">,</span>
    <span class="s2">"currency"</span><span class="p">:</span> <span class="s2">"USD"</span><span class="p">,</span>
    <span class="s2">"token"</span><span class="p">:</span> <span class="s2">"ee946db8-d7db-4bb7-b608-b65b153e127d"</span><span class="p">,</span>
    <span class="s2">"cvv"</span><span class="p">:</span> <span class="s2">"834"</span><span class="p">,</span>
    <span class="s2">"customer_email"</span><span class="p">:</span> <span class="s2">"travis@example.com"</span><span class="p">,</span>
    <span class="s2">"customer_phone"</span><span class="p">:</span> <span class="s2">"+1987987987987"</span><span class="p">,</span>
    <span class="s2">"consumer_id"</span><span class="p">:</span> <span class="s2">"123456"</span>
  <span class="p">}</span>
<span class="p">).</span><span class="nx">send</span><span class="p">()</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">success</span><span class="p">)</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">failure</span><span class="p">);</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>curl https://gate.emerchantpay.net/process/TERMINAL_TOKEN/ <span class="se">\</span>
   -H <span class="s2">"Content-Type: text/xml"</span> <span class="se">\</span>
   -d <span class="s1">'
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;sale&lt;/transaction_type&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;usage&gt;40208 concert tickets&lt;/usage&gt;
  &lt;remote_ip&gt;245.253.2.12&lt;/remote_ip&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
  &lt;token&gt;ee946db8-d7db-4bb7-b608-b65b153e127d&lt;/token&gt;
  &lt;cvv&gt;834&lt;/cvv&gt;
  &lt;customer_email&gt;travis@example.com&lt;/customer_email&gt;
  &lt;customer_phone&gt;+1987987987987&lt;/customer_phone&gt;
  &lt;consumer_id&gt;123456&lt;/consumer_id&gt;
&lt;/payment_transaction&gt;'</span>
</code></pre>

<blockquote>
<p>Request</p>
</blockquote>

<pre class="highlight php tab-php"><code><span class="cp">&lt;?php</span>

<span class="c1">// Load the pre-configured ini file...
</span><span class="nx">\Genesis\Config</span><span class="o">::</span><span class="na">loadSettings</span><span class="p">(</span><span class="s1">'/path/to/config.ini'</span><span class="p">);</span>

<span class="nv">$genesis</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Genesis</span><span class="p">(</span><span class="s1">'Financial\Cards\Sale'</span><span class="p">);</span>
<span class="nv">$request</span> <span class="o">=</span> <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">request</span><span class="p">();</span>

<span class="nv">$request</span>
  <span class="o">-&gt;</span><span class="na">setTransactionId</span><span class="p">(</span><span class="s1">'43671'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setUsage</span><span class="p">(</span><span class="s1">'40208 concert tickets'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setRemoteIp</span><span class="p">(</span><span class="s1">'245.253.2.12'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setAmount</span><span class="p">(</span><span class="s1">'100'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCurrency</span><span class="p">(</span><span class="s1">'USD'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setToken</span><span class="p">(</span><span class="s1">'ee946db8-d7db-4bb7-b608-b65b153e127d'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCardHolder</span><span class="p">(</span><span class="s1">'Travis Pastrana'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCvv</span><span class="p">(</span><span class="s1">'834'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setExpirationMonth</span><span class="p">(</span><span class="s1">'12'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setExpirationYear</span><span class="p">(</span><span class="s1">'2020'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCustomerEmail</span><span class="p">(</span><span class="s1">'travis@example.com'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCustomerPhone</span><span class="p">(</span><span class="s1">'+1987987987987'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setConsumerId</span><span class="p">(</span><span class="s1">'123456'</span><span class="p">);</span>

<span class="k">try</span> <span class="p">{</span>
    <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">execute</span><span class="p">();</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">response</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">getResponseObject</span><span class="p">();</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">\Exception</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$e</span><span class="o">-&gt;</span><span class="na">getMessage</span><span class="p">();</span>
<span class="p">}</span>
</code></pre>

<pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.GenesisClient</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.TransactionResult</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.constants.Endpoints</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.constants.Environments</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.requests.financial.card.SaleRequest</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.model.Transaction</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Configuration</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Country</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Currency</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.math.BigDecimal</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">GenesisExample</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">()</span>  <span class="o">{</span>

    <span class="c1">// Create configuration</span>
    <span class="n">Configuration</span> <span class="n">configuration</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Configuration</span><span class="o">(</span><span class="n">Environments</span><span class="o">.</span><span class="na">STAGING</span><span class="o">,</span> <span class="n">Endpoints</span><span class="o">.</span><span class="na">EMERCHANTPAY</span><span class="o">);</span>

    <span class="n">configuration</span><span class="o">.</span><span class="na">setUsername</span><span class="o">(</span><span class="s">"SET_YOUR_USERNAME"</span><span class="o">);</span>
    <span class="n">configuration</span><span class="o">.</span><span class="na">setPassword</span><span class="o">(</span><span class="s">"SET_YOUR_PASSWORD"</span><span class="o">);</span>
    <span class="n">configuration</span><span class="o">.</span><span class="na">setToken</span><span class="o">(</span><span class="s">"SET_YOUR_TOKEN"</span><span class="o">);</span>

    <span class="n">SaleRequest</span> <span class="n">request</span> <span class="o">=</span> <span class="k">new</span> <span class="n">SaleRequest</span><span class="o">();</span>

    <span class="n">request</span><span class="o">.</span><span class="na">setTransactionId</span><span class="o">(</span><span class="s">"43671"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setUsage</span><span class="o">(</span><span class="s">"40208 concert tickets"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setRemoteIp</span><span class="o">(</span><span class="s">"245.253.2.12"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setAmount</span><span class="o">(</span><span class="k">new</span> <span class="n">BigDecimal</span><span class="o">(</span><span class="mi">100</span><span class="o">));</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCurrency</span><span class="o">(</span><span class="s">"USD"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setToken</span><span class="o">(</span><span class="s">"ee946db8-d7db-4bb7-b608-b65b153e127d"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCardHolder</span><span class="o">(</span><span class="s">"Travis Pastrana"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCvv</span><span class="o">(</span><span class="s">"834"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setExpirationMonth</span><span class="o">(</span><span class="s">"12"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setExpirationYear</span><span class="o">(</span><span class="s">"2020"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCustomerEmail</span><span class="o">(</span><span class="s">"travis@example.com"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCustomerPhone</span><span class="o">(</span><span class="s">"+1987987987987"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setConsumerId</span><span class="o">(</span><span class="s">"123456"</span><span class="o">);</span>

    <span class="n">GenesisClient</span> <span class="n">client</span> <span class="o">=</span> <span class="k">new</span> <span class="n">GenesisClient</span><span class="o">(</span><span class="n">configuration</span><span class="o">,</span> <span class="n">request</span><span class="o">);</span>
    <span class="n">client</span><span class="o">.</span><span class="na">execute</span><span class="o">();</span>

    <span class="c1">// Parse Payment result</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">client</span><span class="o">.</span><span class="na">getResponse</span><span class="o">());</span>

  <span class="o">}</span>
<span class="o">}</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="kd">var</span> <span class="nx">genesis</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'genesis.js/lib/genesis.js'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">transaction</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">genesis</span><span class="p">.</span><span class="nx">transaction</span><span class="p">();</span>

<span class="kd">var</span> <span class="nx">failure</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">reason</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">reason</span><span class="p">);</span>
<span class="p">};</span>

<span class="kd">var</span> <span class="nx">success</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>

<span class="nx">transaction</span><span class="p">.</span><span class="nx">sale</span><span class="p">(</span>
  <span class="p">{</span>
    <span class="s2">"transaction_id"</span><span class="p">:</span> <span class="s2">"43671"</span><span class="p">,</span>
    <span class="s2">"usage"</span><span class="p">:</span> <span class="s2">"40208 concert tickets"</span><span class="p">,</span>
    <span class="s2">"remote_ip"</span><span class="p">:</span> <span class="s2">"245.253.2.12"</span><span class="p">,</span>
    <span class="s2">"amount"</span><span class="p">:</span> <span class="s2">"100"</span><span class="p">,</span>
    <span class="s2">"currency"</span><span class="p">:</span> <span class="s2">"USD"</span><span class="p">,</span>
    <span class="s2">"token"</span><span class="p">:</span> <span class="s2">"ee946db8-d7db-4bb7-b608-b65b153e127d"</span><span class="p">,</span>
    <span class="s2">"card_holder"</span><span class="p">:</span> <span class="s2">"Travis Pastrana"</span><span class="p">,</span>
    <span class="s2">"cvv"</span><span class="p">:</span> <span class="s2">"834"</span><span class="p">,</span>
    <span class="s2">"expiration_month"</span><span class="p">:</span> <span class="s2">"12"</span><span class="p">,</span>
    <span class="s2">"expiration_year"</span><span class="p">:</span> <span class="mi">2020</span><span class="p">,</span>
    <span class="s2">"customer_email"</span><span class="p">:</span> <span class="s2">"travis@example.com"</span><span class="p">,</span>
    <span class="s2">"customer_phone"</span><span class="p">:</span> <span class="s2">"+1987987987987"</span><span class="p">,</span>
    <span class="s2">"consumer_id"</span><span class="p">:</span> <span class="s2">"123456"</span>
  <span class="p">}</span>
<span class="p">).</span><span class="nx">send</span><span class="p">()</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">success</span><span class="p">)</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">failure</span><span class="p">);</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>curl https://gate.emerchantpay.net/process/TERMINAL_TOKEN/ <span class="se">\</span>
   -H <span class="s2">"Content-Type: text/xml"</span> <span class="se">\</span>
   -d <span class="s1">'
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;sale&lt;/transaction_type&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;usage&gt;40208 concert tickets&lt;/usage&gt;
  &lt;remote_ip&gt;245.253.2.12&lt;/remote_ip&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
  &lt;token&gt;ee946db8-d7db-4bb7-b608-b65b153e127d&lt;/token&gt;
  &lt;card_holder&gt;Travis Pastrana&lt;/card_holder&gt;
  &lt;cvv&gt;834&lt;/cvv&gt;
  &lt;expiration_month&gt;12&lt;/expiration_month&gt;
  &lt;expiration_year&gt;2020&lt;/expiration_year&gt;
  &lt;customer_email&gt;travis@example.com&lt;/customer_email&gt;
  &lt;customer_phone&gt;+1987987987987&lt;/customer_phone&gt;
  &lt;consumer_id&gt;123456&lt;/consumer_id&gt;
&lt;/payment_transaction&gt;'</span>
</code></pre>
<h2 id='how-to-tokenize-card-holder-data-in-wpf-api'>How to tokenize card holder data in WPF API</h2>
<p>In order to offer saving a payment method for future use, set the
<code>remember_card</code> flag to &quot;true&quot;.</p>
<h3 id='create-a-consumer-2'>Create a Consumer</h3>
<p>Please provide <code>customer_email</code> in addition to the <code>remember_card</code> flag. This
will create a consumer and offer the user to save card holder details
(tokenize). <code>consumer_id</code> will be returned in the response and reconcile
response. <code>consumer_id</code> and <code>token</code> will be returned in the notification.</p>

<blockquote>
<p>Request</p>
</blockquote>

<pre class="highlight php tab-php"><code><span class="cp">&lt;?php</span>

<span class="c1">// Load the pre-configured ini file...
</span><span class="nx">\Genesis\Config</span><span class="o">::</span><span class="na">loadSettings</span><span class="p">(</span><span class="s1">'/path/to/config.ini'</span><span class="p">);</span>

<span class="nv">$genesis</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Genesis</span><span class="p">(</span><span class="s1">'WPF\Create'</span><span class="p">);</span>
<span class="nv">$request</span> <span class="o">=</span> <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">request</span><span class="p">();</span>

<span class="nv">$request</span>
  <span class="o">-&gt;</span><span class="na">setTransactionId</span><span class="p">(</span><span class="s1">'43671'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setUsage</span><span class="p">(</span><span class="s1">'40208 concert tickets'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setDescription</span><span class="p">(</span><span class="s1">'You are about to buy 3 shoes at www.shoes.com!'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setNotificationUrl</span><span class="p">(</span><span class="s1">'https://www.example.com/notification'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setReturnSuccessUrl</span><span class="p">(</span><span class="s1">'http://www.example.com/success'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setReturnFailureUrl</span><span class="p">(</span><span class="s1">'http://www.example.com/failure'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setReturnCancelUrl</span><span class="p">(</span><span class="s1">'http://www.example.com/cancel.html'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setAmount</span><span class="p">(</span><span class="s1">'100'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCurrency</span><span class="p">(</span><span class="s1">'USD'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCustomerEmail</span><span class="p">(</span><span class="s1">'travis@example.com'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCustomerPhone</span><span class="p">(</span><span class="s1">'+1987987987987'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setLifetime</span><span class="p">(</span><span class="s1">'60'</span><span class="p">)</span>


  <span class="c1">// Billing Address
</span>  <span class="o">-&gt;</span><span class="na">setBillingFirstName</span><span class="p">(</span><span class="s1">'Travis'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingLastName</span><span class="p">(</span><span class="s1">'Pastrana'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingAddress1</span><span class="p">(</span><span class="s1">'Muster Str. 12'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingZipCode</span><span class="p">(</span><span class="s1">'10178'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingCity</span><span class="p">(</span><span class="s1">'Los Angeles'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingState</span><span class="p">(</span><span class="s1">'CA'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingCountry</span><span class="p">(</span><span class="s1">'US'</span><span class="p">)</span>


  <span class="c1">// Risk Params
</span>  <span class="o">-&gt;</span><span class="na">setRiskUserId</span><span class="p">(</span><span class="s1">'123456'</span><span class="p">)</span>


  <span class="c1">// Transaction Types
</span>  <span class="o">-&gt;</span><span class="na">addTransactionType</span><span class="p">(</span><span class="s1">'authorize'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">addTransactionType</span><span class="p">(</span><span class="s1">'sale'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setRememberCard</span><span class="p">(</span><span class="s1">'true'</span><span class="p">);</span>

<span class="k">try</span> <span class="p">{</span>
    <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">execute</span><span class="p">();</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">response</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">getResponseObject</span><span class="p">();</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">\Exception</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$e</span><span class="o">-&gt;</span><span class="na">getMessage</span><span class="p">();</span>
<span class="p">}</span>
</code></pre>

<pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.GenesisClient</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.TransactionResult</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.constants.Endpoints</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.constants.Environments</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.requests.wpf.WPFCreateRequest</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.model.Transaction</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Configuration</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Country</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Currency</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.math.BigDecimal</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.MalformedURLException</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.URL</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">GenesisExample</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">MalformedURLException</span> <span class="o">{</span>

    <span class="c1">// Create configuration</span>
    <span class="n">Configuration</span> <span class="n">configuration</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Configuration</span><span class="o">(</span><span class="n">Environments</span><span class="o">.</span><span class="na">STAGING</span><span class="o">,</span> <span class="n">Endpoints</span><span class="o">.</span><span class="na">EMERCHANTPAY</span><span class="o">);</span>

    <span class="n">configuration</span><span class="o">.</span><span class="na">setUsername</span><span class="o">(</span><span class="s">"SET_YOUR_USERNAME"</span><span class="o">);</span>
    <span class="n">configuration</span><span class="o">.</span><span class="na">setPassword</span><span class="o">(</span><span class="s">"SET_YOUR_PASSWORD"</span><span class="o">);</span>
    <span class="n">configuration</span><span class="o">.</span><span class="na">setToken</span><span class="o">(</span><span class="s">"SET_YOUR_TOKEN"</span><span class="o">);</span>

    <span class="n">WPFCreateRequest</span> <span class="n">request</span> <span class="o">=</span> <span class="k">new</span> <span class="n">WPFCreateRequest</span><span class="o">();</span>

    <span class="n">request</span><span class="o">.</span><span class="na">setTransactionId</span><span class="o">(</span><span class="s">"43671"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setUsage</span><span class="o">(</span><span class="s">"40208 concert tickets"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setDescription</span><span class="o">(</span><span class="s">"You are about to buy 3 shoes at www.shoes.com!"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setNotificationUrl</span><span class="o">(</span><span class="k">new</span> <span class="n">URL</span><span class="o">(</span><span class="s">"https://www.example.com/notification"</span><span class="o">));</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setReturnSuccessUrl</span><span class="o">(</span><span class="k">new</span> <span class="n">URL</span><span class="o">(</span><span class="s">"http://www.example.com/success"</span><span class="o">));</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setReturnFailureUrl</span><span class="o">(</span><span class="k">new</span> <span class="n">URL</span><span class="o">(</span><span class="s">"http://www.example.com/failure"</span><span class="o">));</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setReturnCancelUrl</span><span class="o">(</span><span class="k">new</span> <span class="n">URL</span><span class="o">(</span><span class="s">"http://www.example.com/cancel.html"</span><span class="o">));</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setAmount</span><span class="o">(</span><span class="k">new</span> <span class="n">BigDecimal</span><span class="o">(</span><span class="mi">100</span><span class="o">));</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCurrency</span><span class="o">(</span><span class="s">"USD"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCustomerEmail</span><span class="o">(</span><span class="s">"travis@example.com"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCustomerPhone</span><span class="o">(</span><span class="s">"+1987987987987"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setLifetime</span><span class="o">(</span><span class="mi">60</span><span class="o">);</span>


    <span class="c1">// Billing Address</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingFirstname</span><span class="o">(</span><span class="s">"Travis"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingLastname</span><span class="o">(</span><span class="s">"Pastrana"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingPrimaryAddress</span><span class="o">(</span><span class="s">"Muster Str. 12"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingZipCode</span><span class="o">(</span><span class="s">"10178"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingCity</span><span class="o">(</span><span class="s">"Los Angeles"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingState</span><span class="o">(</span><span class="s">"CA"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingCountry</span><span class="o">(</span><span class="s">"US"</span><span class="o">);</span>


    <span class="c1">// Risk Params</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setRiskUserId</span><span class="o">(</span><span class="s">"123456"</span><span class="o">);</span>


    <span class="c1">// Transaction Types</span>
    <span class="n">request</span><span class="o">.</span><span class="na">addTransactionType</span><span class="o">(</span><span class="s">"authorize"</span><span class="o">).</span><span class="na">done</span><span class="o">();</span>
    <span class="n">request</span><span class="o">.</span><span class="na">addTransactionType</span><span class="o">(</span><span class="s">"sale"</span><span class="o">).</span><span class="na">done</span><span class="o">();</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setRememberCard</span><span class="o">(</span><span class="s">"true"</span><span class="o">);</span>

    <span class="n">GenesisClient</span> <span class="n">client</span> <span class="o">=</span> <span class="k">new</span> <span class="n">GenesisClient</span><span class="o">(</span><span class="n">configuration</span><span class="o">,</span> <span class="n">request</span><span class="o">);</span>
    <span class="n">client</span><span class="o">.</span><span class="na">execute</span><span class="o">();</span>

    <span class="c1">// Parse Payment result</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">client</span><span class="o">.</span><span class="na">getResponse</span><span class="o">());</span>

  <span class="o">}</span>
<span class="o">}</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="kd">var</span> <span class="nx">genesis</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'genesis.js/lib/genesis.js'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">transaction</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">genesis</span><span class="p">.</span><span class="nx">transaction</span><span class="p">();</span>

<span class="kd">var</span> <span class="nx">failure</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">reason</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">reason</span><span class="p">);</span>
<span class="p">};</span>

<span class="kd">var</span> <span class="nx">success</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>

<span class="nx">transaction</span><span class="p">.</span><span class="nx">wpf_create</span><span class="p">(</span>
  <span class="p">{</span>
    <span class="s2">"transaction_id"</span><span class="p">:</span> <span class="s2">"43671"</span><span class="p">,</span>
    <span class="s2">"usage"</span><span class="p">:</span> <span class="s2">"40208 concert tickets"</span><span class="p">,</span>
    <span class="s2">"description"</span><span class="p">:</span> <span class="s2">"You are about to buy 3 shoes at www.shoes.com!"</span><span class="p">,</span>
    <span class="s2">"notification_url"</span><span class="p">:</span> <span class="s2">"https://www.example.com/notification"</span><span class="p">,</span>
    <span class="s2">"return_success_url"</span><span class="p">:</span> <span class="s2">"http://www.example.com/success"</span><span class="p">,</span>
    <span class="s2">"return_failure_url"</span><span class="p">:</span> <span class="s2">"http://www.example.com/failure"</span><span class="p">,</span>
    <span class="s2">"return_cancel_url"</span><span class="p">:</span> <span class="s2">"http://www.example.com/cancel.html"</span><span class="p">,</span>
    <span class="s2">"amount"</span><span class="p">:</span> <span class="s2">"100"</span><span class="p">,</span>
    <span class="s2">"currency"</span><span class="p">:</span> <span class="s2">"USD"</span><span class="p">,</span>
    <span class="s2">"customer_email"</span><span class="p">:</span> <span class="s2">"travis@example.com"</span><span class="p">,</span>
    <span class="s2">"customer_phone"</span><span class="p">:</span> <span class="s2">"+1987987987987"</span><span class="p">,</span>
    <span class="s2">"lifetime"</span><span class="p">:</span> <span class="mi">60</span><span class="p">,</span>
    <span class="s2">"billing_address"</span><span class="p">:</span> <span class="p">{</span>
      <span class="s2">"first_name"</span><span class="p">:</span> <span class="s2">"Travis"</span><span class="p">,</span>
      <span class="s2">"last_name"</span><span class="p">:</span> <span class="s2">"Pastrana"</span><span class="p">,</span>
      <span class="s2">"address1"</span><span class="p">:</span> <span class="s2">"Muster Str. 12"</span><span class="p">,</span>
      <span class="s2">"zip_code"</span><span class="p">:</span> <span class="s2">"10178"</span><span class="p">,</span>
      <span class="s2">"city"</span><span class="p">:</span> <span class="s2">"Los Angeles"</span><span class="p">,</span>
      <span class="s2">"state"</span><span class="p">:</span> <span class="s2">"CA"</span><span class="p">,</span>
      <span class="s2">"country"</span><span class="p">:</span> <span class="s2">"US"</span>
    <span class="p">},</span>
    <span class="s2">"risk_params"</span><span class="p">:</span> <span class="p">{</span>
      <span class="s2">"user_id"</span><span class="p">:</span> <span class="s2">"123456"</span>
    <span class="p">},</span>
    <span class="s2">"transaction_types"</span><span class="p">:</span> <span class="p">[</span>
      <span class="s2">"authorize"</span><span class="p">,</span>
      <span class="s2">"sale"</span>
    <span class="p">],</span>
    <span class="s2">"remember_card"</span><span class="p">:</span> <span class="s2">"true"</span>
  <span class="p">}</span>
<span class="p">).</span><span class="nx">send</span><span class="p">()</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">success</span><span class="p">)</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">failure</span><span class="p">);</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>curl https://wpf.emerchantpay.net/wpf <span class="se">\</span>
   -H <span class="s2">"Content-Type: text/xml"</span> <span class="se">\</span>
   -d <span class="s1">'
&lt;wpf_payment&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;usage&gt;40208 concert tickets&lt;/usage&gt;
  &lt;description&gt;You are about to buy 3 shoes at www.shoes.com!&lt;/description&gt;
  &lt;notification_url&gt;https://www.example.com/notification&lt;/notification_url&gt;
  &lt;return_success_url&gt;http://www.example.com/success&lt;/return_success_url&gt;
  &lt;return_failure_url&gt;http://www.example.com/failure&lt;/return_failure_url&gt;
  &lt;return_cancel_url&gt;http://www.example.com/cancel.html&lt;/return_cancel_url&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
  &lt;customer_email&gt;travis@example.com&lt;/customer_email&gt;
  &lt;customer_phone&gt;+1987987987987&lt;/customer_phone&gt;
  &lt;lifetime&gt;60&lt;/lifetime&gt;
  &lt;billing_address&gt;
    &lt;first_name&gt;Travis&lt;/first_name&gt;
    &lt;last_name&gt;Pastrana&lt;/last_name&gt;
    &lt;address1&gt;Muster Str. 12&lt;/address1&gt;
    &lt;zip_code&gt;10178&lt;/zip_code&gt;
    &lt;city&gt;Los Angeles&lt;/city&gt;
    &lt;state&gt;CA&lt;/state&gt;
    &lt;country&gt;US&lt;/country&gt;
  &lt;/billing_address&gt;
  &lt;risk_params&gt;
    &lt;user_id&gt;123456&lt;/user_id&gt;
  &lt;/risk_params&gt;
  &lt;transaction_types&gt;
    &lt;transaction_type name="authorize" /&gt;
    &lt;transaction_type name="sale" /&gt;
  &lt;/transaction_types&gt;
  &lt;remember_card&gt;true&lt;/remember_card&gt;
&lt;/wpf_payment&gt;'</span>
</code></pre>
<h3 id='use-existing-consumer-2'>Use existing consumer</h3>
<p>Please provide <code>consumer_id</code> and <code>customer_email</code> in addition to the
<code>remember_card</code> flag. An existing consumer will be used, if identified, and
offer the user to save card holder details (tokenize).  <code>consumer_id</code> will be
returned in the response and reconcile response.  <code>consumer_id</code> and <code>token</code> will
be returned in the notification.</p>

<blockquote>
<p>Request</p>
</blockquote>

<pre class="highlight php tab-php"><code><span class="cp">&lt;?php</span>

<span class="c1">// Load the pre-configured ini file...
</span><span class="nx">\Genesis\Config</span><span class="o">::</span><span class="na">loadSettings</span><span class="p">(</span><span class="s1">'/path/to/config.ini'</span><span class="p">);</span>

<span class="nv">$genesis</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Genesis</span><span class="p">(</span><span class="s1">'WPF\Create'</span><span class="p">);</span>
<span class="nv">$request</span> <span class="o">=</span> <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">request</span><span class="p">();</span>

<span class="nv">$request</span>
  <span class="o">-&gt;</span><span class="na">setTransactionId</span><span class="p">(</span><span class="s1">'43671'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setUsage</span><span class="p">(</span><span class="s1">'40208 concert tickets'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setDescription</span><span class="p">(</span><span class="s1">'You are about to buy 3 shoes at www.shoes.com!'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setNotificationUrl</span><span class="p">(</span><span class="s1">'https://www.example.com/notification'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setReturnSuccessUrl</span><span class="p">(</span><span class="s1">'http://www.example.com/success'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setReturnFailureUrl</span><span class="p">(</span><span class="s1">'http://www.example.com/failure'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setReturnCancelUrl</span><span class="p">(</span><span class="s1">'http://www.example.com/cancel.html'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setAmount</span><span class="p">(</span><span class="s1">'100'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCurrency</span><span class="p">(</span><span class="s1">'USD'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCustomerEmail</span><span class="p">(</span><span class="s1">'travis@example.com'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCustomerPhone</span><span class="p">(</span><span class="s1">'+1987987987987'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setLifetime</span><span class="p">(</span><span class="s1">'60'</span><span class="p">)</span>


  <span class="c1">// Billing Address
</span>  <span class="o">-&gt;</span><span class="na">setBillingFirstName</span><span class="p">(</span><span class="s1">'Travis'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingLastName</span><span class="p">(</span><span class="s1">'Pastrana'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingAddress1</span><span class="p">(</span><span class="s1">'Muster Str. 12'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingZipCode</span><span class="p">(</span><span class="s1">'10178'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingCity</span><span class="p">(</span><span class="s1">'Los Angeles'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingState</span><span class="p">(</span><span class="s1">'CA'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingCountry</span><span class="p">(</span><span class="s1">'US'</span><span class="p">)</span>


  <span class="c1">// Risk Params
</span>  <span class="o">-&gt;</span><span class="na">setRiskUserId</span><span class="p">(</span><span class="s1">'123456'</span><span class="p">)</span>


  <span class="c1">// Transaction Types
</span>  <span class="o">-&gt;</span><span class="na">addTransactionType</span><span class="p">(</span><span class="s1">'authorize'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">addTransactionType</span><span class="p">(</span><span class="s1">'sale'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setRememberCard</span><span class="p">(</span><span class="s1">'true'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setConsumerId</span><span class="p">(</span><span class="s1">'123456'</span><span class="p">);</span>

<span class="k">try</span> <span class="p">{</span>
    <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">execute</span><span class="p">();</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">response</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">getResponseObject</span><span class="p">();</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">\Exception</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$e</span><span class="o">-&gt;</span><span class="na">getMessage</span><span class="p">();</span>
<span class="p">}</span>
</code></pre>

<pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.GenesisClient</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.TransactionResult</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.constants.Endpoints</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.constants.Environments</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.requests.wpf.WPFCreateRequest</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.model.Transaction</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Configuration</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Country</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Currency</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.math.BigDecimal</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.MalformedURLException</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.URL</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">GenesisExample</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">MalformedURLException</span> <span class="o">{</span>

    <span class="c1">// Create configuration</span>
    <span class="n">Configuration</span> <span class="n">configuration</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Configuration</span><span class="o">(</span><span class="n">Environments</span><span class="o">.</span><span class="na">STAGING</span><span class="o">,</span> <span class="n">Endpoints</span><span class="o">.</span><span class="na">EMERCHANTPAY</span><span class="o">);</span>

    <span class="n">configuration</span><span class="o">.</span><span class="na">setUsername</span><span class="o">(</span><span class="s">"SET_YOUR_USERNAME"</span><span class="o">);</span>
    <span class="n">configuration</span><span class="o">.</span><span class="na">setPassword</span><span class="o">(</span><span class="s">"SET_YOUR_PASSWORD"</span><span class="o">);</span>
    <span class="n">configuration</span><span class="o">.</span><span class="na">setToken</span><span class="o">(</span><span class="s">"SET_YOUR_TOKEN"</span><span class="o">);</span>

    <span class="n">WPFCreateRequest</span> <span class="n">request</span> <span class="o">=</span> <span class="k">new</span> <span class="n">WPFCreateRequest</span><span class="o">();</span>

    <span class="n">request</span><span class="o">.</span><span class="na">setTransactionId</span><span class="o">(</span><span class="s">"43671"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setUsage</span><span class="o">(</span><span class="s">"40208 concert tickets"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setDescription</span><span class="o">(</span><span class="s">"You are about to buy 3 shoes at www.shoes.com!"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setNotificationUrl</span><span class="o">(</span><span class="k">new</span> <span class="n">URL</span><span class="o">(</span><span class="s">"https://www.example.com/notification"</span><span class="o">));</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setReturnSuccessUrl</span><span class="o">(</span><span class="k">new</span> <span class="n">URL</span><span class="o">(</span><span class="s">"http://www.example.com/success"</span><span class="o">));</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setReturnFailureUrl</span><span class="o">(</span><span class="k">new</span> <span class="n">URL</span><span class="o">(</span><span class="s">"http://www.example.com/failure"</span><span class="o">));</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setReturnCancelUrl</span><span class="o">(</span><span class="k">new</span> <span class="n">URL</span><span class="o">(</span><span class="s">"http://www.example.com/cancel.html"</span><span class="o">));</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setAmount</span><span class="o">(</span><span class="k">new</span> <span class="n">BigDecimal</span><span class="o">(</span><span class="mi">100</span><span class="o">));</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCurrency</span><span class="o">(</span><span class="s">"USD"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCustomerEmail</span><span class="o">(</span><span class="s">"travis@example.com"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCustomerPhone</span><span class="o">(</span><span class="s">"+1987987987987"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setLifetime</span><span class="o">(</span><span class="mi">60</span><span class="o">);</span>


    <span class="c1">// Billing Address</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingFirstname</span><span class="o">(</span><span class="s">"Travis"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingLastname</span><span class="o">(</span><span class="s">"Pastrana"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingPrimaryAddress</span><span class="o">(</span><span class="s">"Muster Str. 12"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingZipCode</span><span class="o">(</span><span class="s">"10178"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingCity</span><span class="o">(</span><span class="s">"Los Angeles"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingState</span><span class="o">(</span><span class="s">"CA"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingCountry</span><span class="o">(</span><span class="s">"US"</span><span class="o">);</span>


    <span class="c1">// Risk Params</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setRiskUserId</span><span class="o">(</span><span class="s">"123456"</span><span class="o">);</span>


    <span class="c1">// Transaction Types</span>
    <span class="n">request</span><span class="o">.</span><span class="na">addTransactionType</span><span class="o">(</span><span class="s">"authorize"</span><span class="o">).</span><span class="na">done</span><span class="o">();</span>
    <span class="n">request</span><span class="o">.</span><span class="na">addTransactionType</span><span class="o">(</span><span class="s">"sale"</span><span class="o">).</span><span class="na">done</span><span class="o">();</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setRememberCard</span><span class="o">(</span><span class="s">"true"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setConsumerId</span><span class="o">(</span><span class="s">"123456"</span><span class="o">);</span>

    <span class="n">GenesisClient</span> <span class="n">client</span> <span class="o">=</span> <span class="k">new</span> <span class="n">GenesisClient</span><span class="o">(</span><span class="n">configuration</span><span class="o">,</span> <span class="n">request</span><span class="o">);</span>
    <span class="n">client</span><span class="o">.</span><span class="na">execute</span><span class="o">();</span>

    <span class="c1">// Parse Payment result</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">client</span><span class="o">.</span><span class="na">getResponse</span><span class="o">());</span>

  <span class="o">}</span>
<span class="o">}</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="kd">var</span> <span class="nx">genesis</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'genesis.js/lib/genesis.js'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">transaction</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">genesis</span><span class="p">.</span><span class="nx">transaction</span><span class="p">();</span>

<span class="kd">var</span> <span class="nx">failure</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">reason</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">reason</span><span class="p">);</span>
<span class="p">};</span>

<span class="kd">var</span> <span class="nx">success</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>

<span class="nx">transaction</span><span class="p">.</span><span class="nx">wpf_create</span><span class="p">(</span>
  <span class="p">{</span>
    <span class="s2">"transaction_id"</span><span class="p">:</span> <span class="s2">"43671"</span><span class="p">,</span>
    <span class="s2">"usage"</span><span class="p">:</span> <span class="s2">"40208 concert tickets"</span><span class="p">,</span>
    <span class="s2">"description"</span><span class="p">:</span> <span class="s2">"You are about to buy 3 shoes at www.shoes.com!"</span><span class="p">,</span>
    <span class="s2">"notification_url"</span><span class="p">:</span> <span class="s2">"https://www.example.com/notification"</span><span class="p">,</span>
    <span class="s2">"return_success_url"</span><span class="p">:</span> <span class="s2">"http://www.example.com/success"</span><span class="p">,</span>
    <span class="s2">"return_failure_url"</span><span class="p">:</span> <span class="s2">"http://www.example.com/failure"</span><span class="p">,</span>
    <span class="s2">"return_cancel_url"</span><span class="p">:</span> <span class="s2">"http://www.example.com/cancel.html"</span><span class="p">,</span>
    <span class="s2">"amount"</span><span class="p">:</span> <span class="s2">"100"</span><span class="p">,</span>
    <span class="s2">"currency"</span><span class="p">:</span> <span class="s2">"USD"</span><span class="p">,</span>
    <span class="s2">"customer_email"</span><span class="p">:</span> <span class="s2">"travis@example.com"</span><span class="p">,</span>
    <span class="s2">"customer_phone"</span><span class="p">:</span> <span class="s2">"+1987987987987"</span><span class="p">,</span>
    <span class="s2">"lifetime"</span><span class="p">:</span> <span class="mi">60</span><span class="p">,</span>
    <span class="s2">"billing_address"</span><span class="p">:</span> <span class="p">{</span>
      <span class="s2">"first_name"</span><span class="p">:</span> <span class="s2">"Travis"</span><span class="p">,</span>
      <span class="s2">"last_name"</span><span class="p">:</span> <span class="s2">"Pastrana"</span><span class="p">,</span>
      <span class="s2">"address1"</span><span class="p">:</span> <span class="s2">"Muster Str. 12"</span><span class="p">,</span>
      <span class="s2">"zip_code"</span><span class="p">:</span> <span class="s2">"10178"</span><span class="p">,</span>
      <span class="s2">"city"</span><span class="p">:</span> <span class="s2">"Los Angeles"</span><span class="p">,</span>
      <span class="s2">"state"</span><span class="p">:</span> <span class="s2">"CA"</span><span class="p">,</span>
      <span class="s2">"country"</span><span class="p">:</span> <span class="s2">"US"</span>
    <span class="p">},</span>
    <span class="s2">"risk_params"</span><span class="p">:</span> <span class="p">{</span>
      <span class="s2">"user_id"</span><span class="p">:</span> <span class="s2">"123456"</span>
    <span class="p">},</span>
    <span class="s2">"transaction_types"</span><span class="p">:</span> <span class="p">[</span>
      <span class="s2">"authorize"</span><span class="p">,</span>
      <span class="s2">"sale"</span>
    <span class="p">],</span>
    <span class="s2">"remember_card"</span><span class="p">:</span> <span class="s2">"true"</span><span class="p">,</span>
    <span class="s2">"consumer_id"</span><span class="p">:</span> <span class="s2">"123456"</span>
  <span class="p">}</span>
<span class="p">).</span><span class="nx">send</span><span class="p">()</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">success</span><span class="p">)</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">failure</span><span class="p">);</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>curl https://wpf.emerchantpay.net/wpf <span class="se">\</span>
   -H <span class="s2">"Content-Type: text/xml"</span> <span class="se">\</span>
   -d <span class="s1">'
&lt;wpf_payment&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;usage&gt;40208 concert tickets&lt;/usage&gt;
  &lt;description&gt;You are about to buy 3 shoes at www.shoes.com!&lt;/description&gt;
  &lt;notification_url&gt;https://www.example.com/notification&lt;/notification_url&gt;
  &lt;return_success_url&gt;http://www.example.com/success&lt;/return_success_url&gt;
  &lt;return_failure_url&gt;http://www.example.com/failure&lt;/return_failure_url&gt;
  &lt;return_cancel_url&gt;http://www.example.com/cancel.html&lt;/return_cancel_url&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
  &lt;customer_email&gt;travis@example.com&lt;/customer_email&gt;
  &lt;customer_phone&gt;+1987987987987&lt;/customer_phone&gt;
  &lt;lifetime&gt;60&lt;/lifetime&gt;
  &lt;billing_address&gt;
    &lt;first_name&gt;Travis&lt;/first_name&gt;
    &lt;last_name&gt;Pastrana&lt;/last_name&gt;
    &lt;address1&gt;Muster Str. 12&lt;/address1&gt;
    &lt;zip_code&gt;10178&lt;/zip_code&gt;
    &lt;city&gt;Los Angeles&lt;/city&gt;
    &lt;state&gt;CA&lt;/state&gt;
    &lt;country&gt;US&lt;/country&gt;
  &lt;/billing_address&gt;
  &lt;risk_params&gt;
    &lt;user_id&gt;123456&lt;/user_id&gt;
  &lt;/risk_params&gt;
  &lt;transaction_types&gt;
    &lt;transaction_type name="authorize" /&gt;
    &lt;transaction_type name="sale" /&gt;
  &lt;/transaction_types&gt;
  &lt;remember_card&gt;true&lt;/remember_card&gt;
  &lt;consumer_id&gt;123456&lt;/consumer_id&gt;
&lt;/wpf_payment&gt;'</span>
</code></pre>
<h2 id='how-to-use-tokens-in-wpf-api'>How to use tokens in WPF API</h2>
<p>Please provide <code>consumer_id</code> and <code>customer_email</code>. An existing consumer will be
used, if identified, and offer the user to select a previously stored card for
payment.</p>

<blockquote>
<p>Request</p>
</blockquote>

<pre class="highlight php tab-php"><code><span class="cp">&lt;?php</span>

<span class="c1">// Load the pre-configured ini file...
</span><span class="nx">\Genesis\Config</span><span class="o">::</span><span class="na">loadSettings</span><span class="p">(</span><span class="s1">'/path/to/config.ini'</span><span class="p">);</span>

<span class="nv">$genesis</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Genesis</span><span class="p">(</span><span class="s1">'WPF\Create'</span><span class="p">);</span>
<span class="nv">$request</span> <span class="o">=</span> <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">request</span><span class="p">();</span>

<span class="nv">$request</span>
  <span class="o">-&gt;</span><span class="na">setTransactionId</span><span class="p">(</span><span class="s1">'43671'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setUsage</span><span class="p">(</span><span class="s1">'40208 concert tickets'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setDescription</span><span class="p">(</span><span class="s1">'You are about to buy 3 shoes at www.shoes.com!'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setNotificationUrl</span><span class="p">(</span><span class="s1">'https://www.example.com/notification'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setReturnSuccessUrl</span><span class="p">(</span><span class="s1">'http://www.example.com/success'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setReturnFailureUrl</span><span class="p">(</span><span class="s1">'http://www.example.com/failure'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setReturnCancelUrl</span><span class="p">(</span><span class="s1">'http://www.example.com/cancel.html'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setAmount</span><span class="p">(</span><span class="s1">'100'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCurrency</span><span class="p">(</span><span class="s1">'USD'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCustomerEmail</span><span class="p">(</span><span class="s1">'travis@example.com'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCustomerPhone</span><span class="p">(</span><span class="s1">'+1987987987987'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setLifetime</span><span class="p">(</span><span class="s1">'60'</span><span class="p">)</span>


  <span class="c1">// Billing Address
</span>  <span class="o">-&gt;</span><span class="na">setBillingFirstName</span><span class="p">(</span><span class="s1">'Travis'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingLastName</span><span class="p">(</span><span class="s1">'Pastrana'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingAddress1</span><span class="p">(</span><span class="s1">'Muster Str. 12'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingZipCode</span><span class="p">(</span><span class="s1">'10178'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingCity</span><span class="p">(</span><span class="s1">'Los Angeles'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingState</span><span class="p">(</span><span class="s1">'CA'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setBillingCountry</span><span class="p">(</span><span class="s1">'US'</span><span class="p">)</span>


  <span class="c1">// Risk Params
</span>  <span class="o">-&gt;</span><span class="na">setRiskUserId</span><span class="p">(</span><span class="s1">'123456'</span><span class="p">)</span>


  <span class="c1">// Transaction Types
</span>  <span class="o">-&gt;</span><span class="na">addTransactionType</span><span class="p">(</span><span class="s1">'authorize'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">addTransactionType</span><span class="p">(</span><span class="s1">'sale'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setConsumerId</span><span class="p">(</span><span class="s1">'123456'</span><span class="p">);</span>

<span class="k">try</span> <span class="p">{</span>
    <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">execute</span><span class="p">();</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">response</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">getResponseObject</span><span class="p">();</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">\Exception</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$e</span><span class="o">-&gt;</span><span class="na">getMessage</span><span class="p">();</span>
<span class="p">}</span>
</code></pre>

<pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.GenesisClient</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.TransactionResult</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.constants.Endpoints</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.constants.Environments</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.requests.wpf.WPFCreateRequest</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.model.Transaction</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Configuration</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Country</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Currency</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.math.BigDecimal</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.MalformedURLException</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.URL</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">GenesisExample</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">MalformedURLException</span> <span class="o">{</span>

    <span class="c1">// Create configuration</span>
    <span class="n">Configuration</span> <span class="n">configuration</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Configuration</span><span class="o">(</span><span class="n">Environments</span><span class="o">.</span><span class="na">STAGING</span><span class="o">,</span> <span class="n">Endpoints</span><span class="o">.</span><span class="na">EMERCHANTPAY</span><span class="o">);</span>

    <span class="n">configuration</span><span class="o">.</span><span class="na">setUsername</span><span class="o">(</span><span class="s">"SET_YOUR_USERNAME"</span><span class="o">);</span>
    <span class="n">configuration</span><span class="o">.</span><span class="na">setPassword</span><span class="o">(</span><span class="s">"SET_YOUR_PASSWORD"</span><span class="o">);</span>
    <span class="n">configuration</span><span class="o">.</span><span class="na">setToken</span><span class="o">(</span><span class="s">"SET_YOUR_TOKEN"</span><span class="o">);</span>

    <span class="n">WPFCreateRequest</span> <span class="n">request</span> <span class="o">=</span> <span class="k">new</span> <span class="n">WPFCreateRequest</span><span class="o">();</span>

    <span class="n">request</span><span class="o">.</span><span class="na">setTransactionId</span><span class="o">(</span><span class="s">"43671"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setUsage</span><span class="o">(</span><span class="s">"40208 concert tickets"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setDescription</span><span class="o">(</span><span class="s">"You are about to buy 3 shoes at www.shoes.com!"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setNotificationUrl</span><span class="o">(</span><span class="k">new</span> <span class="n">URL</span><span class="o">(</span><span class="s">"https://www.example.com/notification"</span><span class="o">));</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setReturnSuccessUrl</span><span class="o">(</span><span class="k">new</span> <span class="n">URL</span><span class="o">(</span><span class="s">"http://www.example.com/success"</span><span class="o">));</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setReturnFailureUrl</span><span class="o">(</span><span class="k">new</span> <span class="n">URL</span><span class="o">(</span><span class="s">"http://www.example.com/failure"</span><span class="o">));</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setReturnCancelUrl</span><span class="o">(</span><span class="k">new</span> <span class="n">URL</span><span class="o">(</span><span class="s">"http://www.example.com/cancel.html"</span><span class="o">));</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setAmount</span><span class="o">(</span><span class="k">new</span> <span class="n">BigDecimal</span><span class="o">(</span><span class="mi">100</span><span class="o">));</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCurrency</span><span class="o">(</span><span class="s">"USD"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCustomerEmail</span><span class="o">(</span><span class="s">"travis@example.com"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCustomerPhone</span><span class="o">(</span><span class="s">"+1987987987987"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setLifetime</span><span class="o">(</span><span class="mi">60</span><span class="o">);</span>


    <span class="c1">// Billing Address</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingFirstname</span><span class="o">(</span><span class="s">"Travis"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingLastname</span><span class="o">(</span><span class="s">"Pastrana"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingPrimaryAddress</span><span class="o">(</span><span class="s">"Muster Str. 12"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingZipCode</span><span class="o">(</span><span class="s">"10178"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingCity</span><span class="o">(</span><span class="s">"Los Angeles"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingState</span><span class="o">(</span><span class="s">"CA"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setBillingCountry</span><span class="o">(</span><span class="s">"US"</span><span class="o">);</span>


    <span class="c1">// Risk Params</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setRiskUserId</span><span class="o">(</span><span class="s">"123456"</span><span class="o">);</span>


    <span class="c1">// Transaction Types</span>
    <span class="n">request</span><span class="o">.</span><span class="na">addTransactionType</span><span class="o">(</span><span class="s">"authorize"</span><span class="o">).</span><span class="na">done</span><span class="o">();</span>
    <span class="n">request</span><span class="o">.</span><span class="na">addTransactionType</span><span class="o">(</span><span class="s">"sale"</span><span class="o">).</span><span class="na">done</span><span class="o">();</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setConsumerId</span><span class="o">(</span><span class="s">"123456"</span><span class="o">);</span>

    <span class="n">GenesisClient</span> <span class="n">client</span> <span class="o">=</span> <span class="k">new</span> <span class="n">GenesisClient</span><span class="o">(</span><span class="n">configuration</span><span class="o">,</span> <span class="n">request</span><span class="o">);</span>
    <span class="n">client</span><span class="o">.</span><span class="na">execute</span><span class="o">();</span>

    <span class="c1">// Parse Payment result</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">client</span><span class="o">.</span><span class="na">getResponse</span><span class="o">());</span>

  <span class="o">}</span>
<span class="o">}</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="kd">var</span> <span class="nx">genesis</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'genesis.js/lib/genesis.js'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">transaction</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">genesis</span><span class="p">.</span><span class="nx">transaction</span><span class="p">();</span>

<span class="kd">var</span> <span class="nx">failure</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">reason</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">reason</span><span class="p">);</span>
<span class="p">};</span>

<span class="kd">var</span> <span class="nx">success</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>

<span class="nx">transaction</span><span class="p">.</span><span class="nx">wpf_create</span><span class="p">(</span>
  <span class="p">{</span>
    <span class="s2">"transaction_id"</span><span class="p">:</span> <span class="s2">"43671"</span><span class="p">,</span>
    <span class="s2">"usage"</span><span class="p">:</span> <span class="s2">"40208 concert tickets"</span><span class="p">,</span>
    <span class="s2">"description"</span><span class="p">:</span> <span class="s2">"You are about to buy 3 shoes at www.shoes.com!"</span><span class="p">,</span>
    <span class="s2">"notification_url"</span><span class="p">:</span> <span class="s2">"https://www.example.com/notification"</span><span class="p">,</span>
    <span class="s2">"return_success_url"</span><span class="p">:</span> <span class="s2">"http://www.example.com/success"</span><span class="p">,</span>
    <span class="s2">"return_failure_url"</span><span class="p">:</span> <span class="s2">"http://www.example.com/failure"</span><span class="p">,</span>
    <span class="s2">"return_cancel_url"</span><span class="p">:</span> <span class="s2">"http://www.example.com/cancel.html"</span><span class="p">,</span>
    <span class="s2">"amount"</span><span class="p">:</span> <span class="s2">"100"</span><span class="p">,</span>
    <span class="s2">"currency"</span><span class="p">:</span> <span class="s2">"USD"</span><span class="p">,</span>
    <span class="s2">"customer_email"</span><span class="p">:</span> <span class="s2">"travis@example.com"</span><span class="p">,</span>
    <span class="s2">"customer_phone"</span><span class="p">:</span> <span class="s2">"+1987987987987"</span><span class="p">,</span>
    <span class="s2">"lifetime"</span><span class="p">:</span> <span class="mi">60</span><span class="p">,</span>
    <span class="s2">"billing_address"</span><span class="p">:</span> <span class="p">{</span>
      <span class="s2">"first_name"</span><span class="p">:</span> <span class="s2">"Travis"</span><span class="p">,</span>
      <span class="s2">"last_name"</span><span class="p">:</span> <span class="s2">"Pastrana"</span><span class="p">,</span>
      <span class="s2">"address1"</span><span class="p">:</span> <span class="s2">"Muster Str. 12"</span><span class="p">,</span>
      <span class="s2">"zip_code"</span><span class="p">:</span> <span class="s2">"10178"</span><span class="p">,</span>
      <span class="s2">"city"</span><span class="p">:</span> <span class="s2">"Los Angeles"</span><span class="p">,</span>
      <span class="s2">"state"</span><span class="p">:</span> <span class="s2">"CA"</span><span class="p">,</span>
      <span class="s2">"country"</span><span class="p">:</span> <span class="s2">"US"</span>
    <span class="p">},</span>
    <span class="s2">"risk_params"</span><span class="p">:</span> <span class="p">{</span>
      <span class="s2">"user_id"</span><span class="p">:</span> <span class="s2">"123456"</span>
    <span class="p">},</span>
    <span class="s2">"transaction_types"</span><span class="p">:</span> <span class="p">[</span>
      <span class="s2">"authorize"</span><span class="p">,</span>
      <span class="s2">"sale"</span>
    <span class="p">],</span>
    <span class="s2">"consumer_id"</span><span class="p">:</span> <span class="s2">"123456"</span>
  <span class="p">}</span>
<span class="p">).</span><span class="nx">send</span><span class="p">()</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">success</span><span class="p">)</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">failure</span><span class="p">);</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>curl https://wpf.emerchantpay.net/wpf <span class="se">\</span>
   -H <span class="s2">"Content-Type: text/xml"</span> <span class="se">\</span>
   -d <span class="s1">'
&lt;wpf_payment&gt;
  &lt;transaction_id&gt;43671&lt;/transaction_id&gt;
  &lt;usage&gt;40208 concert tickets&lt;/usage&gt;
  &lt;description&gt;You are about to buy 3 shoes at www.shoes.com!&lt;/description&gt;
  &lt;notification_url&gt;https://www.example.com/notification&lt;/notification_url&gt;
  &lt;return_success_url&gt;http://www.example.com/success&lt;/return_success_url&gt;
  &lt;return_failure_url&gt;http://www.example.com/failure&lt;/return_failure_url&gt;
  &lt;return_cancel_url&gt;http://www.example.com/cancel.html&lt;/return_cancel_url&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
  &lt;customer_email&gt;travis@example.com&lt;/customer_email&gt;
  &lt;customer_phone&gt;+1987987987987&lt;/customer_phone&gt;
  &lt;lifetime&gt;60&lt;/lifetime&gt;
  &lt;billing_address&gt;
    &lt;first_name&gt;Travis&lt;/first_name&gt;
    &lt;last_name&gt;Pastrana&lt;/last_name&gt;
    &lt;address1&gt;Muster Str. 12&lt;/address1&gt;
    &lt;zip_code&gt;10178&lt;/zip_code&gt;
    &lt;city&gt;Los Angeles&lt;/city&gt;
    &lt;state&gt;CA&lt;/state&gt;
    &lt;country&gt;US&lt;/country&gt;
  &lt;/billing_address&gt;
  &lt;risk_params&gt;
    &lt;user_id&gt;123456&lt;/user_id&gt;
  &lt;/risk_params&gt;
  &lt;transaction_types&gt;
    &lt;transaction_type name="authorize" /&gt;
    &lt;transaction_type name="sale" /&gt;
  &lt;/transaction_types&gt;
  &lt;consumer_id&gt;123456&lt;/consumer_id&gt;
&lt;/wpf_payment&gt;'</span>
</code></pre>
<h2 id='supported-transaction-types'>Supported transaction types</h2>
<p>All transaction types accepting cardholder data are supported - <a href="#account-verification" target="_self">Account Verification</a>, <a href="#authorize" target="_self">Authorize</a>, <a href="#authorize-3d" target="_self">Authorize3D</a>, <a href="#sale" target="_self">Sale</a>, <a href="#sale-3d" target="_self">Sale3D</a>, <a href="#init-recurring-sale" target="_self">InitRecurringSale</a>, <a href="#init-recurring-sale-3d" target="_self">InitRecurringSale3D</a>, <a href="#payout-3" target="_self">Payout</a>, <a href="#intersolve" target="_self">Intersolve</a>, <a href="#fashioncheque" target="_self">Fashioncheque</a>.</p>
<h1 id='klarna-services'>Klarna Services</h1><h2 id='introduction-6'>Introduction</h2>
<p>Klarna Services provides the ability for merchants to release remaining authorization, resend invoice, update order items or to update order address of a transaction.</p>

<aside class="notice">
Klarna services requests are handled exactly like transaction requests via XML and authentication is required. Note that Klarna services can be done via transaction_id
</aside>
<h2 id='release-remaining-authorization-api'>Release Remaining Authorization API</h2>
<p>The URL for Release Remaining Authorization API is:</p>

<p>Production:</p>

<p><code>https://gate.emerchantpay.net/klarna/release_remaining_authorization</code></p>

<p>Staging (for integration):</p>

<p><code>https://staging.gate.emerchantpay.net/klarna/release_remaining_authorization</code></p>

<aside class="notice">
  Release Remaining Authorization service is used for approved Klarna transaction with at least one approved partial Klarna capture transaction. 
  <br>
  With this call the remaining authorization amount will be released and Klarna captures will be forbidden for the authorize transaction.
</aside>

<blockquote>
<p>Request</p>
</blockquote>

<pre class="highlight php tab-php"><code>This request is not implemented yet
</code></pre>

<pre class="highlight java tab-java"><code><span class="n">This</span> <span class="n">request</span> <span class="n">is</span> <span class="n">not</span> <span class="n">implemented</span> <span class="n">yet</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>curl https://gate.emerchantpay.net/klarna/release_remaining_authorization <span class="se">\</span>
   -H <span class="s2">"Content-Type: text/xml"</span> <span class="se">\</span>
   -d <span class="s1">'
&lt;release_remaining_authorization_request&gt;
  &lt;transaction_id&gt;a1qf12e81eb23d0e00ffb85b1db7d152&lt;/transaction_id&gt;
&lt;/release_remaining_authorization_request&gt;'</span>
</code></pre>

<p><strong>Request Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_id</td>
<td>required</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
</tbody></table>

<p><code>required* = conditionally required</code></p>

<blockquote>
<p>Successful Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>This request is not implemented yet
</code></pre>

<pre class="highlight java tab-java"><code><span class="n">This</span> <span class="n">request</span> <span class="n">is</span> <span class="n">not</span> <span class="n">implemented</span> <span class="n">yet</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;release_remaining_authorization_request&gt;
  &lt;status&gt;success&lt;/status&gt;
  &lt;technical_message&gt;Transaction operation successful!&lt;/technical_message&gt;
&lt;/release_remaining_authorization_request&gt;
</code></pre>

<p><strong>Successful Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
</tbody></table>
<h2 id='resend-invoice-api'>Resend Invoice API</h2>
<p>The URL for Resend Invoice API is: </p>

<p>Production:</p>

<p><code>https://gate.emerchantpay.net/klarna/resend_invoice</code></p>

<p>Staging (for integration):</p>

<p><code>https://staging.gate.emerchantpay.net/klarna/resend_invoice</code></p>

<aside class="notice">
  Resend Invoice service is used only for approved not yet refunded Klarna capture transaction. 
  <br>
  With this call Klarna will resend the invoice of the captured transaction.
</aside>

<blockquote>
<p>Request</p>
</blockquote>

<pre class="highlight php tab-php"><code>This request is not implemented yet
</code></pre>

<pre class="highlight java tab-java"><code><span class="n">This</span> <span class="n">request</span> <span class="n">is</span> <span class="n">not</span> <span class="n">implemented</span> <span class="n">yet</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>curl https://gate.emerchantpay.net/klarna/resend_invoice <span class="se">\</span>
   -H <span class="s2">"Content-Type: text/xml"</span> <span class="se">\</span>
   -d <span class="s1">'
&lt;resend_invoice_request&gt;
  &lt;transaction_id&gt;a1qf12e81eb23d0e00ffb85b1db7d152&lt;/transaction_id&gt;
&lt;/resend_invoice_request&gt;'</span>
</code></pre>

<p><strong>Request Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_id</td>
<td>required</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
</tbody></table>

<p><code>required* = conditionally required</code></p>

<blockquote>
<p>Successful Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>This request is not implemented yet
</code></pre>

<pre class="highlight java tab-java"><code><span class="n">This</span> <span class="n">request</span> <span class="n">is</span> <span class="n">not</span> <span class="n">implemented</span> <span class="n">yet</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;resend_invoice_request&gt;
  &lt;status&gt;success&lt;/status&gt;
  &lt;technical_message&gt;Transaction operation successful!&lt;/technical_message&gt;
&lt;/resend_invoice_request&gt;
</code></pre>

<p><strong>Successful Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
</tbody></table>
<h2 id='update-order-items-api'>Update Order Items API</h2>
<p>The URL for Update Order Items API is:</p>

<p>Production:</p>

<p><code>https://gate.emerchantpay.net/klarna/update_order_items</code></p>

<p>Staging (for integration):</p>

<p><code>https://staging.gate.emerchantpay.net/klarna/update_order_items</code></p>

<aside class="notice">
  Update Order Items service is used only for approved but not yet captured Klarna transaction. 
  <br>
  With this call amount and associated items will be updated.
</aside>

<blockquote>
<p>Request</p>
</blockquote>

<pre class="highlight php tab-php"><code>This request is not implemented yet
</code></pre>

<pre class="highlight java tab-java"><code><span class="n">This</span> <span class="n">request</span> <span class="n">is</span> <span class="n">not</span> <span class="n">implemented</span> <span class="n">yet</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>curl https://gate.emerchantpay.net/klarna/update_order_items <span class="se">\</span>
   -H <span class="s2">"Content-Type: text/xml"</span> <span class="se">\</span>
   -d <span class="s1">'
&lt;update_order_items_request&gt;
  &lt;transaction_id&gt;a1qf12e81eb23d0e00ffb85b1db7d152&lt;/transaction_id&gt;
  &lt;amount&gt;10000&lt;/amount&gt;
  &lt;items&gt;
    &lt;item&gt;
      &lt;type&gt;physical&lt;/type&gt;
      &lt;reference&gt;19-402-BG1&lt;/reference&gt;
      &lt;name&gt;BatteryPowerPack&lt;/name&gt;
      &lt;quantity&gt;1&lt;/quantity&gt;
      &lt;unit_price&gt;5000&lt;/unit_price&gt;
      &lt;tax_rate&gt;0&lt;/tax_rate&gt;
      &lt;total_amount&gt;5000&lt;/total_amount&gt;
      &lt;total_discount_amount&gt;0&lt;/total_discount_amount&gt;
      &lt;total_tax_amount&gt;0&lt;/total_tax_amount&gt;
    &lt;/item&gt;
  &lt;/items&gt;
&lt;/update_order_items_request&gt;'</span>
</code></pre>

<p><strong>Request Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_id</td>
<td>required</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td>amount</td>
<td>required</td>
<td>integer &gt; 0</td>
<td>Amount of transaction in minor currency unit, see <a href="#currency-and-amount-handling">Currency and Amount Handling</a> for details</td>
</tr>
<tr>
<td><strong>items</strong></td>
<td>required</td>
<td></td>
<td>List with items</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;item_type</td>
<td>required</td>
<td>string(255)</td>
<td>Order line type. Possible values: Supported item types</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;quantity</td>
<td>required</td>
<td>integer</td>
<td>Non-negative. The item quantity</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;unit_price</td>
<td>required</td>
<td>integer</td>
<td>Minor units. Includes tax, excludes discount(max value: 100000000)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;total_amount</td>
<td>required</td>
<td>integer</td>
<td>Includes tax and discount. Must match (quantity unit price) - total discount amount divided by quantity (max value: 100000000)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;reference</td>
<td>optional</td>
<td>string(255)</td>
<td>Article number, SKU or similar</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;name</td>
<td>optional</td>
<td>string(255)</td>
<td>Descriptive item name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;tax_rate</td>
<td>optional</td>
<td>integer</td>
<td>Non-negative. In percent, two implicit decimals. I.e 2500 = 25.00 percent</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;total_discount_amount</td>
<td>optional</td>
<td>integer</td>
<td>Non-negative minor units. Includes tax</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;total_tax_amount</td>
<td>optional</td>
<td>integer</td>
<td>Must be within 1 of total amount - total_amount * 10000 / (10000 + tax rate). Negative when type is discount</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;image_url</td>
<td>optional</td>
<td>url</td>
<td>URL to an image that can be later embedded in communications between Klarna and the customer. (max 1024 characters)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;product_url</td>
<td>optional</td>
<td>url</td>
<td>URL to an image that can be later embedded in communications between Klarna and the customer. (max 1024 characters)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;quantity_unit</td>
<td>optional</td>
<td>string(8)</td>
<td>Unit used to describe the quantity, e.g. kg, pcs... If defined has to be 1-8 characters</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;<strong>product_identifiers</strong></td>
<td>optional</td>
<td></td>
<td>List with product identifiers</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;brand</td>
<td>optional</td>
<td>string(255)</td>
<td>The product&#39;s brand name as generally recognized by consumers. If no brand is available for a product, do not supply any value</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;category_path</td>
<td>optional</td>
<td>string(255)</td>
<td>The product&#39;s category path as used in the merchant&#39;s webshop. Include the full and most detailed category and separate the segments with &#39; &gt; &#39;</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;global_trade_item_number</td>
<td>optional</td>
<td>string(255)</td>
<td>The product&#39;s Global Trade Item Number (GTIN). Common types of GTIN are EAN, ISBN or UPC. Exclude dashes and spaces, where possible</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;manufacturer_part_number</td>
<td>optional</td>
<td>string(255)</td>
<td>The product&#39;s Manufacturer Part Number (MPN), which - together with the brand - uniquely identifies a product. Only submit MPNs assigned by a manufacturer and use the most specific MPN possible</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;<strong>merchant_data</strong></td>
<td>optional</td>
<td></td>
<td>List with merchant data</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;marketplace_seller_info</td>
<td>optional</td>
<td>string(255)</td>
<td>Information for merchant marketplace</td>
</tr>
</tbody></table>

<p><code>required* = conditionally required</code></p>

<blockquote>
<p>Successful Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>This request is not implemented yet
</code></pre>

<pre class="highlight java tab-java"><code><span class="n">This</span> <span class="n">request</span> <span class="n">is</span> <span class="n">not</span> <span class="n">implemented</span> <span class="n">yet</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;update_order_items_request&gt;
  &lt;status&gt;success&lt;/status&gt;
  &lt;technical_message&gt;Transaction operation successful!&lt;/technical_message&gt;
&lt;/update_order_items_request&gt;
</code></pre>

<p><strong>Successful Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
</tbody></table>
<h2 id='update-order-address-api'>Update Order Address API</h2>
<p>The URL for Update Order Address API is:</p>

<p>Production:</p>

<p><code>https://gate.emerchantpay.net/klarna/update_order_address</code></p>

<p>Staging (for integration):</p>

<p><code>https://staging.gate.emerchantpay.net/klarna/update_order_address</code></p>

<aside class="notice">
  Update Order Address service is used only for approved but not yet captured Klarna transaction.
  <br>
  With this call billing and shipping addresses will be updated.
</aside>

<blockquote>
<p>Request</p>
</blockquote>

<pre class="highlight php tab-php"><code>This request is not implemented yet
</code></pre>

<pre class="highlight java tab-java"><code><span class="n">This</span> <span class="n">request</span> <span class="n">is</span> <span class="n">not</span> <span class="n">implemented</span> <span class="n">yet</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>curl https://gate.emerchantpay.net/klarna/update_order_address <span class="se">\</span>
   -H <span class="s2">"Content-Type: text/xml"</span> <span class="se">\</span>
   -d <span class="s1">'
&lt;update_order_address_request&gt;
  &lt;transaction_id&gt;a1qf12e81eb23d0e00ffb85b1db7d152&lt;/transaction_id&gt;
  &lt;billing_address&gt;
    &lt;first_name&gt;Barney&lt;/first_name&gt;
    &lt;last_name&gt;Rubble&lt;/last_name&gt;
    &lt;address1&gt;14, Nerazdelni str&lt;/address1&gt;
    &lt;zip_code&gt;1407&lt;/zip_code&gt;
    &lt;city&gt;Berlin&lt;/city&gt;
    &lt;country&gt;DE&lt;/country&gt;
  &lt;/billing_address&gt;
  &lt;shipping_address&gt;
    &lt;first_name&gt;Barney&lt;/first_name&gt;
    &lt;last_name&gt;Rubble&lt;/last_name&gt;
    &lt;address1&gt;14, Nerazdelni str&lt;/address1&gt;
    &lt;zip_code&gt;1407&lt;/zip_code&gt;
    &lt;city&gt;Berlin&lt;/city&gt;
    &lt;country&gt;DE&lt;/country&gt;
  &lt;/shipping_address&gt;
&lt;/update_order_address_request&gt;'</span>
</code></pre>

<p><strong>Request Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_id</td>
<td>required</td>
<td>string(255)</td>
<td>Unique transaction id defined by merchant</td>
</tr>
<tr>
<td><strong>billing_address</strong></td>
<td>required</td>
<td></td>
<td>See <a href="#required-vs-optional-api-params">Required vs Optional API params</a> for details</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;first_name</td>
<td>required*</td>
<td>string(255)</td>
<td>Customer first name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;last_name</td>
<td>required*</td>
<td>string(255)</td>
<td>Customer last name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address1</td>
<td>required*</td>
<td>string(255)</td>
<td>Primary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address2</td>
<td>required*</td>
<td>string(255)</td>
<td>Secondary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;zip_code</td>
<td>required*</td>
<td>string</td>
<td>ZIP code</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;city</td>
<td>required*</td>
<td>string(255)</td>
<td>City</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;state</td>
<td>required*</td>
<td>string(2)</td>
<td>State code in <a href="https://en.wikipedia.org/wiki/ISO_3166-2">ISO 3166-2</a>, required for USA and Canada</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;country</td>
<td>required</td>
<td>string(2)</td>
<td>Country code in <a href="https://www.iso.org/iso-3166-country-codes.html">ISO 3166</a></td>
</tr>
<tr>
<td><strong>shipping_address</strong></td>
<td>required</td>
<td></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;first_name</td>
<td>required*</td>
<td>string(255)</td>
<td>Customer first name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;last_name</td>
<td>required*</td>
<td>string(255)</td>
<td>Customer last name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address1</td>
<td>required*</td>
<td>string(255)</td>
<td>Primary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;address2</td>
<td>required*</td>
<td>string(255)</td>
<td>Secondary address</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;zip_code</td>
<td>required*</td>
<td>string</td>
<td>ZIP code</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;city</td>
<td>required*</td>
<td>string(255)</td>
<td>City</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;state</td>
<td>required*</td>
<td>string(2)</td>
<td>State code in <a href="https://en.wikipedia.org/wiki/ISO_3166-2">ISO 3166-2</a>, required for USA and Canada</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;country</td>
<td>required</td>
<td>string(2)</td>
<td>Country code in <a href="https://www.iso.org/iso-3166-country-codes.html">ISO 3166</a></td>
</tr>
</tbody></table>

<p><code>required* = conditionally required</code></p>

<blockquote>
<p>Successful Response</p>
</blockquote>

<pre class="highlight php tab-php"><code>This request is not implemented yet
</code></pre>

<pre class="highlight java tab-java"><code><span class="n">This</span> <span class="n">request</span> <span class="n">is</span> <span class="n">not</span> <span class="n">implemented</span> <span class="n">yet</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="nx">This</span> <span class="nx">request</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">implemented</span> <span class="nx">yet</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;
&lt;update_order_address_request&gt;
  &lt;status&gt;success&lt;/status&gt;
  &lt;technical_message&gt;Transaction operation successful!&lt;/technical_message&gt;
&lt;/update_order_address_request&gt;
</code></pre>

<p><strong>Successful Response Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the transaction, see <a href="#transaction-states">states</a></td>
</tr>
<tr>
<td>technical_message</td>
<td>string(255)</td>
<td>Technical error message (for internal use only, not to be displayed to users).</td>
</tr>
</tbody></table>
<h1 id='errors-2'>Errors</h1><h2 id='error-groups-table'>Error groups table</h2>
<table><thead>
<tr>
<th>Code</th>
<th>Name</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>(100..199)</td>
<td>Systems errors</td>
<td>Transaction could not be processed and was not passed to issuer.</td>
</tr>
<tr>
<td>(200..299)</td>
<td>Communication errors</td>
<td>Transaction could not be processed properly. Issuer could not be reached or returned invalid data. Errors 230 - 250 need to be reconciled as they might have been processed properly issuer-wise.</td>
</tr>
<tr>
<td>(300..399)</td>
<td>Input data errors</td>
<td>Transactions cannot be processed due to invalid incoming data in your request.</td>
</tr>
<tr>
<td>(400..499)</td>
<td>Workflow errors</td>
<td>Workflow errors will occur if you trigger a transaction that is not possible at this time in the workflow, e.g. a refund on a declined transaction.</td>
</tr>
<tr>
<td>(500..599)</td>
<td>Processing errors</td>
<td>These errors occur when a transaction was declined by the issuer.</td>
</tr>
<tr>
<td>(600..699)</td>
<td>Risk errors</td>
<td>Risk errors occur when any of the risk management systems will not let the transaction pass through.</td>
</tr>
<tr>
<td>(700..799)</td>
<td>Tokenization errors</td>
<td>Tokenization related errors.</td>
</tr>
<tr>
<td>(800..899)</td>
<td>Genesis KYC Services errors</td>
<td>Genesis KYC Services errors</td>
</tr>
<tr>
<td>(900..999)</td>
<td>Issuer errors</td>
<td>Issuer errors occur when the issuer is unreachable or has other technical problems. If you experience this kind of errors, contact support.</td>
</tr>
</tbody></table>
<h2 id='error-codes-tables'>Error codes tables</h2>
<p><strong>System Errors</strong></p>

<table><thead>
<tr>
<th>Code</th>
<th>Name</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>100</td>
<td>SystemError</td>
<td>A general system error occured</td>
</tr>
<tr>
<td>101</td>
<td>MaintenanceError</td>
<td>System is undergoing maintenance, request could not be handled.</td>
</tr>
<tr>
<td>110</td>
<td>AuthenticationError</td>
<td>Login failed. Check your API credentials.</td>
</tr>
<tr>
<td>120</td>
<td>ConfigurationError</td>
<td>Configuration error occured, e.g. terminal not config- ured properly. Check terminal settings.</td>
</tr>
</tbody></table>

<p><strong>Communication Errors</strong></p>

<table><thead>
<tr>
<th>Code</th>
<th>Name</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>200</td>
<td>CommunicationError</td>
<td>Communication with issuer failed, please contact sup- port.</td>
</tr>
<tr>
<td>210</td>
<td>ConnectionError</td>
<td>Connection to issuer could not be established, please contact support.</td>
</tr>
<tr>
<td>220</td>
<td>AccountError</td>
<td>Issuer account data invalid, please contact support.</td>
</tr>
<tr>
<td>230</td>
<td>TimeoutError</td>
<td>Issuer does not respond within given timeframe - please reconcile</td>
</tr>
<tr>
<td>240</td>
<td>ResponseError</td>
<td>Issuer returned invalid response - please reconcile and contact support</td>
</tr>
<tr>
<td>250</td>
<td>ParsingError</td>
<td>Issuer response could not be parsed - please reconcile and contact support.</td>
</tr>
</tbody></table>

<p><strong>Input Data Errors</strong></p>

<table><thead>
<tr>
<th>Code</th>
<th>Name</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>300</td>
<td>InputDataError</td>
<td>Invalid were data sent to the API.</td>
</tr>
<tr>
<td>310</td>
<td>InvalidTransactionTypeError</td>
<td>Invalid transaction type was passed to API. See transaction types.</td>
</tr>
<tr>
<td>320</td>
<td>InputDataMissingError</td>
<td>Required argument is missing. Check parameters.</td>
</tr>
<tr>
<td>330</td>
<td>InputDataFormatError</td>
<td>Argument passed in invalid format. Check parame- ters.</td>
</tr>
<tr>
<td>340</td>
<td>InputDataInvalidError</td>
<td>Argument passed in valid format but makes no sense (e.g. incorrect country code or currency). Check pa- rameters.</td>
</tr>
<tr>
<td>350</td>
<td>InvalidXmlError</td>
<td>The input XML could not be parsed due to invalid code. Please check XML data.</td>
</tr>
<tr>
<td>360</td>
<td>InvalidContentTypeError</td>
<td>Missing or invalid content type: should be text/xml!</td>
</tr>
</tbody></table>

<p><strong>Workflow Errors</strong></p>

<table><thead>
<tr>
<th>Code</th>
<th>Name</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>400</td>
<td>WorkflowError</td>
<td>A transaction was triggered that is not possible at this time in the workflow, e.g. a refund on a declined transaction.</td>
</tr>
<tr>
<td>410</td>
<td>ReferenceNotFoundError</td>
<td>Reference transaction was not found.</td>
</tr>
<tr>
<td>420</td>
<td>ReferenceWorkflowError</td>
<td>Wrong Workflow specified.</td>
</tr>
<tr>
<td>430</td>
<td>ReferenceInvalidatedError</td>
<td>Reference transaction already invalidated!</td>
</tr>
<tr>
<td>440</td>
<td>ReferenceMismatchError</td>
<td>Data mismatch with reference, e.g. amount exceeds reference</td>
</tr>
<tr>
<td>450</td>
<td>DoubletTransactionError</td>
<td>Transaction doublet was detected, transaction was blocked. This happens if several transactions with same amount, card holder, cc number, cvv and expiry date are sent within 5 minutes.</td>
</tr>
<tr>
<td>460</td>
<td>TransactionNotFoundError</td>
<td>The referenced transaction could not be found.</td>
</tr>
<tr>
<td>470</td>
<td>ChargebackNotFoundError</td>
<td>Chargeback not found!</td>
</tr>
<tr>
<td>480</td>
<td>RetrievalRequestNotFoundError</td>
<td>Retrieval Request not found!</td>
</tr>
<tr>
<td>490</td>
<td>FraudReportNotFoundError</td>
<td>Fraud Report not found!</td>
</tr>
</tbody></table>

<p><strong>Processing Errors</strong></p>

<table><thead>
<tr>
<th>Code</th>
<th>Name</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>500</td>
<td>ProcessingError</td>
<td>Transaction declined by issuer</td>
</tr>
<tr>
<td>510</td>
<td>InvalidGiftCardError</td>
<td>DOCUMENTATION MISSING</td>
</tr>
<tr>
<td>510</td>
<td>InvalidCardError</td>
<td>Transaction declined, Credit card number is invalid.</td>
</tr>
<tr>
<td>520</td>
<td>ExpiredGiftCardError</td>
<td>DOCUMENTATION MISSING</td>
</tr>
<tr>
<td>520</td>
<td>ExpiredCardError</td>
<td>Transaction declined, expiration date not in the future or date invalid.</td>
</tr>
<tr>
<td>530</td>
<td>TransactionPendingError</td>
<td>Transaction pending.</td>
</tr>
<tr>
<td>540</td>
<td>CreditExceededError</td>
<td>Amount excceds credit card limit.</td>
</tr>
<tr>
<td>550</td>
<td>IssuingError</td>
<td>The voucher could not be issued!</td>
</tr>
</tbody></table>

<p><strong>Risk Errors</strong></p>

<table><thead>
<tr>
<th>Code</th>
<th>Name</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>600</td>
<td>RiskError</td>
<td>Transaction declined by risk management</td>
</tr>
<tr>
<td>601</td>
<td>InterchangeRejectError</td>
<td>Interchange reject received for transaction!</td>
</tr>
<tr>
<td>609</td>
<td>BinCountryCheckError</td>
<td>Card bin does not match billing country</td>
</tr>
<tr>
<td>610</td>
<td>CardBlacklistError</td>
<td>Card is blacklisted</td>
</tr>
<tr>
<td>611</td>
<td>BinBlacklistError</td>
<td>BIN blacklisted.</td>
</tr>
<tr>
<td>612</td>
<td>CountryBlacklistError</td>
<td>Country blacklisted.</td>
</tr>
<tr>
<td>613</td>
<td>IpBlacklistError</td>
<td>IP address blacklisted.</td>
</tr>
<tr>
<td>614</td>
<td>BlacklistError</td>
<td>value from payment transaction or risk params is blacklisted.</td>
</tr>
<tr>
<td>615</td>
<td>CardWhitelistError</td>
<td>PAN Whitelist Filter blocked the transaction. This filter - like the above one - uses the PAN blacklist (BL) to perform CC number checks against the BL in the DB. This filter however will reject transactions from a CC with a number which is not whitelisted.</td>
</tr>
<tr>
<td>620</td>
<td>CardLimitExceededError</td>
<td>Card limit exceeded configured limits.</td>
</tr>
<tr>
<td>621</td>
<td>TerminalLimitExceededError</td>
<td>Terminal limits exceeded.</td>
</tr>
<tr>
<td>622</td>
<td>ContractLimitExceededError</td>
<td>MID limits exceeded.</td>
</tr>
<tr>
<td>623</td>
<td>CardVelocityExceededError</td>
<td>Velocity by unknown card exceeded!</td>
</tr>
<tr>
<td>624</td>
<td>CardTicketSizeExceededError</td>
<td>Ticketsize by unknown card exceeded!</td>
</tr>
<tr>
<td>625</td>
<td>UserLimitExceededError</td>
<td>User limit exceeded configured limits.</td>
</tr>
<tr>
<td>626</td>
<td>MultipleFailureDetectionError</td>
<td>Found user transaction declined by issuer. Try again later!</td>
</tr>
<tr>
<td>627</td>
<td>CSDetectionError</td>
<td>The CrossSellingFilter blocks duplicated transactions when an approved transaction has been found on an- other mid. That is, if the transaction has already been processed successfully on a di↵erent mid and within the specified time frame, context entity / scope and possibly within the issuer scope (or not), it will be rejected in order to prevent duplicates.</td>
</tr>
<tr>
<td>628</td>
<td>RecurringLimitExceededError</td>
<td>Amount/count by recurring subscription exceeded.</td>
</tr>
<tr>
<td>629</td>
<td>IrisFilterDeclinedError</td>
<td>Transaction declined by risk management.</td>
</tr>
<tr>
<td>630</td>
<td>IrisFilterOnHoldError</td>
<td>Transaction on hold, a manual review will be done</td>
</tr>
<tr>
<td>690</td>
<td>AvsError</td>
<td>Address Verification failed.</td>
</tr>
<tr>
<td>691</td>
<td>MaxMindRiskError</td>
<td>If a transaction is considered high risk by MaxMind minFraud service, a MaxMindRiskError is raised.</td>
</tr>
<tr>
<td>692</td>
<td>ThreatMetrixRiskError</td>
<td>Transaction declined by ThreatMetrix risk module.</td>
</tr>
<tr>
<td>693</td>
<td>IpNotWhitelistedError</td>
<td>Transaction declined by risk management, IP is NOT whitelisted!</td>
</tr>
<tr>
<td>694</td>
<td>DomainBlacklistedError</td>
<td>Transaction declined by risk management, domain is blacklisted!</td>
</tr>
<tr>
<td>695</td>
<td>FraudError</td>
<td>Risk Error: Please contact the risk team!</td>
</tr>
<tr>
<td>696</td>
<td>IbanBlacklistError</td>
<td>Transaction declined by risk management, iban blacklisted!</td>
</tr>
</tbody></table>

<p><strong>Tokenization Errors</strong></p>

<table><thead>
<tr>
<th>Code</th>
<th>Name</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>701</td>
<td>ConsumerUniquenessError</td>
<td>Consumer with this consumer_id, email combination already exists!</td>
</tr>
<tr>
<td>702</td>
<td>InvalidConsumerError</td>
<td>Consumer not found!</td>
</tr>
<tr>
<td>703</td>
<td>DisabledConsumerError</td>
<td>Consumer is disabled!</td>
</tr>
<tr>
<td>700</td>
<td>TokenizationError</td>
<td>General tokenization error.</td>
</tr>
<tr>
<td>710</td>
<td>TokenizationNotEnabledError</td>
<td>Tokenization is not enabled for the merchant or the terminal! Contact support.</td>
</tr>
<tr>
<td>720</td>
<td>InvalidTokenTypeError</td>
<td>Unsupported token type!</td>
</tr>
<tr>
<td>730</td>
<td>InvalidTokenError</td>
<td>Invalid token!</td>
</tr>
<tr>
<td>740</td>
<td>DetokenizeForbiddenError</td>
<td>Detokenize action is forbidden!</td>
</tr>
</tbody></table>

<p><strong>KYC Errors</strong></p>

<table><thead>
<tr>
<th>Code</th>
<th>Name</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>800</td>
<td>KycServiceError</td>
<td>General KYC Service Error</td>
</tr>
<tr>
<td>801</td>
<td>DocumentMimeTypeUnsupportedError</td>
<td>Uploaded document MIME type is not supported by KYC provider</td>
</tr>
<tr>
<td>802</td>
<td>InvalidRequestAttributesError</td>
<td>Passed attributes are invalid!</td>
</tr>
<tr>
<td>803</td>
<td>KycServiceNotConfiguredError</td>
<td>KYC Services not configured for Merchant!</td>
</tr>
<tr>
<td>804</td>
<td>KycServiceProviderError</td>
<td>KYC Service provider Error!</td>
</tr>
<tr>
<td>805</td>
<td>KycServiceNotificationError</td>
<td>Notification already received</td>
</tr>
<tr>
<td>806</td>
<td>KycServiceUnacceptableMerchantStateError</td>
<td>Merchant state does not allow using KYC Service API!</td>
</tr>
</tbody></table>

<p><strong>Remote Errors</strong></p>

<table><thead>
<tr>
<th>Code</th>
<th>Name</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>900</td>
<td>RemoteError</td>
<td>Some error occured on the issuer. Contact support.</td>
</tr>
<tr>
<td>910</td>
<td>RemoteSystemError</td>
<td>Some error occured on the issuer</td>
</tr>
<tr>
<td>920</td>
<td>RemoteConfigurationError</td>
<td>Issuer configuration error</td>
</tr>
<tr>
<td>930</td>
<td>RemoteDataError</td>
<td>Some passed data caused an error on the issuer</td>
</tr>
<tr>
<td>940</td>
<td>RemoteWorkflowError</td>
<td>Remote workflow error</td>
</tr>
<tr>
<td>950</td>
<td>RemoteTimeoutError</td>
<td>Issuer has timeouted with clearing network</td>
</tr>
</tbody></table>

<aside class="notice" >
Description can be slightly different for error messages per acquirer, but the error classes will be as documented.
</aside>
<h1 id='client-integrations'>Client Integrations</h1>
<p>There are client libraries and examples for a few programming languages to ease the merchant integration effort:</p>

<table><thead>
<tr>
<th>Language</th>
<th>Github</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>PHP</td>
<td><a href="https://github.com/GenesisGateway/genesis_php">Genesis PHP</a></td>
<td>PHP client library</td>
</tr>
<tr>
<td>Node.js</td>
<td><a href="https://github.com/GenesisGateway/genesis.js">Genesis Node</a></td>
<td>Node.js client library</td>
</tr>
<tr>
<td>.NET</td>
<td><a href="https://github.com/GenesisGateway/genesis_dotnet">Genesis .NET</a></td>
<td>.NET client library</td>
</tr>
<tr>
<td>Java</td>
<td><a href="https://github.com/GenesisGateway/genesis_java">Genesis Java</a></td>
<td>Java client library</td>
</tr>
<tr>
<td>Ruby</td>
<td>coming soon</td>
<td>Ruby client library</td>
</tr>
</tbody></table>

<p>Should you have any questions or suggestions regarding the client libraries and improvements, contact the IT Support team at <a href="mailto:%20tech-support@emerchantpay.net">tech-support@emerchantpay.net</a>. </p>

<p>You can also fork the repo(s) and send us pull requests directly at our <a href="https://github.com/emerchantpay">Github</a> account.</p>
<h1 id='shopping-carts'>Shopping Carts</h1>
<p>Genesis has a number of shopping cart plugins to ease the merchant integration effort:</p>

<table><thead>
<tr>
<th>Shopping cart</th>
<th>Github</th>
<th>More Info</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>Magento 1.x CE</td>
<td><a href="https://github.com/emerchantpay/magento-ce-emp-plugin">Magento CE</a></td>
<td><a href="https://www.emerchantpay.com/shopping-carts/magento/">Magento Integration</a></td>
<td>Shopping cart plugin for Magento 1.x CE</td>
</tr>
<tr>
<td>Magento 2.x CE</td>
<td><a href="https://github.com/emerchantpay/magento2-emp-plugin">Magento 2.x CE</a></td>
<td><a href="https://www.emerchantpay.com/shopping-carts/magento-2/">Magento2 Integration</a></td>
<td>Shopping cart plugin for Magento 2.x CE</td>
</tr>
<tr>
<td>OpenCart</td>
<td><a href="https://github.com/emerchantpay/opencart-emp-plugin">OpenCart</a></td>
<td><a href="https://www.emerchantpay.com/shopping-carts/opencart/">OpenCart Integration</a></td>
<td>Shopping cart plugin for OpenCart</td>
</tr>
<tr>
<td>osCommerce</td>
<td><a href="https://github.com/emerchantpay/oscommerce-emp-plugin">osCommerce</a></td>
<td><a href="https://www.emerchantpay.com/shopping-carts/oscommerce/">osCommerce Integration</a></td>
<td>Shopping cart plugin for osCommerce</td>
</tr>
<tr>
<td>PrestaShop</td>
<td><a href="https://github.com/emerchantpay/prestashop-emp-plugin">PrestaShop</a></td>
<td><a href="https://www.emerchantpay.com/shopping-carts/prestashop/">PrestaShop Integration</a></td>
<td>Shopping cart plugin for PrestaShop</td>
</tr>
<tr>
<td>Shopify</td>
<td>Internal integration</td>
<td><a href="https://www.emerchantpay.com/shopping-carts/shopify/">Shopify Integration</a></td>
<td>Shopping cart Integration for Shopify</td>
</tr>
<tr>
<td>WooCommerce</td>
<td><a href="https://github.com/emerchantpay/woocommerce-emp-plugin">WooCommerce</a></td>
<td><a href="https://www.emerchantpay.com/shopping-carts/woocommerce/">WooCommerce Integration</a></td>
<td>Shopping cart plugin for WooCommerce</td>
</tr>
<tr>
<td>X-Cart</td>
<td><a href="https://github.com/emerchantpay/x-cart-emp-plugin">X-Cart</a></td>
<td><a href="https://www.emerchantpay.com/shopping-carts/x-cart/">X-Cart Integration</a></td>
<td>Shopping cart plugin for X-Cart</td>
</tr>
<tr>
<td>Zen Cart</td>
<td><a href="https://github.com/emerchantpay/zencart-emp-plugin">Zen Cart</a></td>
<td><a href="https://www.emerchantpay.com/shopping-carts/zen-cart/">Zen Cart Integration</a></td>
<td>Shopping cart plugin for Zen Cart</td>
</tr>
</tbody></table>

<p>Should you have any questions or suggestions regarding the shopping cart plugins and improvements, contact the IT Support team at <a href="mailto:tech-support@emerchantpay.net">tech-support@emerchantpay.net</a>.</p>

<p>You can also fork the repo(s) and send us pull requests directly at our <a href="https://github.com/emerchantpay">Github</a> account.</p>
<h1 id='testing'>Testing</h1>
<p>For testing first login to the gateway admin and create a terminal.</p>

<p>The url for test admin is:</p>

<p><code>https://staging.merchant.emerchantpay.net/</code></p>

<p>The api base url for test processing is:</p>

<p><code>https://staging.gate.emerchantpay.net/process/TERMINAL_TOKEN</code></p>

<p>The api base url for test single transaction reconciling is:</p>

<p><code>https://staging.gate.emerchantpay.net/reconcile/TERMINAL_TOKEN</code></p>

<p>The api base url for test date range reconciling is:</p>

<p><code>https://staging.gate.emerchantpay.net/reconcile/by_date/TERMINAL_TOKEN</code></p>

<p>For testing the gateway the following credit card numbers can be used:</p>

<table><thead>
<tr>
<th>card number</th>
<th>card brand</th>
<th>transaction result</th>
</tr>
</thead><tbody>
<tr>
<td>4200000000000000</td>
<td>Visa</td>
<td>successful transaction</td>
</tr>
<tr>
<td>4111111111111111</td>
<td>Visa</td>
<td>transaction declined</td>
</tr>
<tr>
<td>5555555555554444</td>
<td>Master Card</td>
<td>successful transaction</td>
</tr>
<tr>
<td>5105105105105100</td>
<td>Master Card</td>
<td>transaction declined</td>
</tr>
</tbody></table>

<p>For 3DSecure testing the following credit card numbers can be used:</p>

<table><thead>
<tr>
<th>card number</th>
<th>card brand</th>
<th>transaction result</th>
</tr>
</thead><tbody>
<tr>
<td>4711100000000000</td>
<td>Visa</td>
<td>3DSecure enrolled</td>
</tr>
<tr>
<td>4012001037461114</td>
<td>Visa</td>
<td>3DSecure enrolled failing authentication</td>
</tr>
<tr>
<td>4012001036853337</td>
<td>Visa</td>
<td>3DSecure unavailable - Card Not Participating</td>
</tr>
<tr>
<td>4012001037484447</td>
<td>Visa</td>
<td>Error in 3DSecure Network in first step of 3DS authentication process</td>
</tr>
<tr>
<td>4012001036273338</td>
<td>Visa</td>
<td>Error in 3DSecure Network in second (asynchronous) step of 3DS authentication process</td>
</tr>
<tr>
<td>5420923878724339</td>
<td>MasterCard</td>
<td>3DSecure enrolled</td>
</tr>
<tr>
<td>5185540810000019</td>
<td>MasterCard</td>
<td>3DSecure enrolled failing authentication</td>
</tr>
<tr>
<td>5111010030175156</td>
<td>MasterCard</td>
<td>3DSecure unavailable - Card Not Participating</td>
</tr>
<tr>
<td>5200828282828210</td>
<td>MasterCard</td>
<td>Error in 3DSecure Network in first step of 3DS authentication process</td>
</tr>
<tr>
<td>5204230080000017</td>
<td>MasterCard</td>
<td>Error in 3DSecure Network in second (asynchronous) step of 3DS authentication process</td>
</tr>
</tbody></table>

<p>When redirected to the dummy authentication page you may enter any password you like.</p>

<aside class="notice">
  In test mode, successful transaction XML responses will include the following error message: ”TESTMODE: No real money will be transferred!”
</aside>
<h1 id='status-page'>Status Page</h1>
<p>statuspage.io is a popular service allowing to track server status, infrastructure notifications, and others.</p>

<p>Note that you can sign up for <a href='https://emerchantpay.statuspage.io' target='_blank'>emerchantpay’s status page</a>.</p>

<p>It allows to sign up via email or SMS or both, and receive notifications for our payment services and any planned maintenance windows, upgrades, or similar in the future should the need arise.</p>
<h1 id='infrastructure-and-uptime'>Infrastructure and Uptime</h1>
<p>Genesis is hosted in two data centers respectively in Berlin and Amsterdam, and features a state-of-the-art, active-active infrastructure setup. As such, it employs load balancing and failover on the DNS layer, and you should be using and requesting the API nodes and web apps only via their dedicated DNS names.</p>

<p>No hardcoding of IP addresses should be performed on the customers’ systems, as this will prevent the customer to take advantage of the failover in case one of the data centers has issues or throughout maintenance windows and current processing happens through one data center only, however rare this might be. In addition, load balancing of the customers’ volume is also impacted if IP addresses are hardcoded.</p>

<p>Finally, note that the DNS load balancing and failover layer has a TTL of 30 seconds, and will sense any issues returning the right IP addresses to use, for both API nodes and web apps alike, at all times.</p>

<p>As a highly available payment gateway platform, Genesis strives to achieve an uptime SLA of 99.99 percent on an yearly basis.</p>
<h1 id='penetration-testing-warning'>Penetration Testing Warning</h1>
<p>It is important that merchants read and understand the activities that are explicitly prohibited when using the payment gateway services.</p>

<p>While merchants are encouraged to perform best practice security testing on their own websites and applications, merchants must ensure under all circumstances that scans exclude the payment gateway Web Payment Form (WPF), Processing API, and merchant console.</p>

<table><thead>
<tr>
<th>Action</th>
<th>prohibited?</th>
</tr>
</thead><tbody>
<tr>
<td>Penetration testing of any gateway services</td>
<td>Prohibited</td>
</tr>
<tr>
<td>Load testing</td>
<td>Prohibited. During integration testing, ensure minimum number of requests</td>
</tr>
<tr>
<td>Exploiting common security vulnerabilities</td>
<td>Prohibited</td>
</tr>
<tr>
<td>Injecting malicious data</td>
<td>Prohibited</td>
</tr>
<tr>
<td>Bypassing validation and security checks</td>
<td>Prohibited</td>
</tr>
<tr>
<td>Subverting ACLs and user permissions</td>
<td>Prohibited</td>
</tr>
<tr>
<td>Port scanning and service discovery</td>
<td>Prohibited</td>
</tr>
<tr>
<td>Usage of ping/traceroute</td>
<td>Acceptable for short term debugging purposes</td>
</tr>
</tbody></table>

<p>Note that merchants that do not abide by the above policy will be immediately blacklisted, resulting in terminating access to the WPF, Processing API, and merchant console.</p>
<h1 id='avs-status-codes'>AVS Status Codes</h1>
<p>When sending a transaction for address verification or card verification, one of the following responses from the issuing bank will be received.</p>

<table><thead>
<tr>
<th>Code</th>
<th>Summary</th>
<th>VISA</th>
<th>MasterCard</th>
</tr>
</thead><tbody>
<tr>
<td>A</td>
<td>Partial Match</td>
<td>Address matches, ZIP does not.</td>
<td>Address matches, ZIP does not.</td>
</tr>
<tr>
<td>B</td>
<td>Partial Match (International Transaction)</td>
<td>Street address match. Postal code not verified because of incompatible formats. (Acquirer sent both street address and postal code)</td>
<td>Street addresses match. Postal code not verified due to incompatible formats. (Acquirer sent both street address and postal code.)</td>
</tr>
<tr>
<td>C</td>
<td>No Match (International Transaction)</td>
<td>Street address and postal code not verified because of incompatible formats. (Acquirer sent both street address and postal code.)</td>
<td>Street address and postal code not verified due to incompatible formats. (Acquirer sent both street address and postal code.)</td>
</tr>
<tr>
<td>D</td>
<td>Full Match (International Transaction)</td>
<td>Street addresses and postal code match.</td>
<td>Street addresses and postal codes match.</td>
</tr>
<tr>
<td>F</td>
<td>Full Match (UK only)</td>
<td>Street address and postal code match. Applies to U.K. only.</td>
<td>Street address and postal code match. Applies to U.K. only.</td>
</tr>
<tr>
<td>G</td>
<td>Not Supported (International Transaction)</td>
<td>Address information not verified for international transaction.</td>
<td>Address information not verified for international transaction.</td>
</tr>
<tr>
<td>I</td>
<td>No Match (International Transaction)</td>
<td>Address information not verified.</td>
<td>Address information not verified.</td>
</tr>
<tr>
<td>M</td>
<td>Full Match (International Transaction)</td>
<td>Street addresses and postal code match.</td>
<td>Street address and postal code match.</td>
</tr>
<tr>
<td>N</td>
<td>No Match</td>
<td>Neither address nor postal code matches.</td>
<td>Neither address nor postal code matches.</td>
</tr>
<tr>
<td>P</td>
<td>Partial Match (International Transaction)</td>
<td>Postal codes match. Street address not verified because of incompatible formats. (Acquirer sent both street address and postal code.)</td>
<td>Postal code match. Street address not verified because of incompatible formats. (Acquirer sent both street address and postal code.)</td>
</tr>
<tr>
<td>R</td>
<td>System Unavailable</td>
<td>Retry, system unable to process.</td>
<td>Retry, system unable to process.</td>
</tr>
<tr>
<td>S</td>
<td>Not Supported</td>
<td>AVS currently not supported.</td>
<td>AVS currently not supported.</td>
</tr>
<tr>
<td>U</td>
<td>System Unavailable</td>
<td>No data from issuer/Authorization System. Information not available.</td>
<td>No data from issuer/Authorization System. Information not available.</td>
</tr>
<tr>
<td>W</td>
<td>Partial Match (US only)</td>
<td>Not applicable. If present, replaced with ”Z” by V.I.R Available for U.S. issuers only.</td>
<td>For U.S. addresses, nine-digit postal code matches, address does not; for address outside the U.S., postal code matches, address does not.</td>
</tr>
<tr>
<td>X</td>
<td>Full Match</td>
<td>Not applicable.</td>
<td>For U.S. addresses, nine-digit postal code and address matches; for addresses outside the U.S., postal code and address match.</td>
</tr>
<tr>
<td>Y</td>
<td>Full Match</td>
<td>For U.S. addresses, five-digit or nine-digit postal code and address matches.</td>
<td>For U.S. addresses, five-digit postal code and address matches.</td>
</tr>
<tr>
<td>Z</td>
<td>Partial Match</td>
<td>For U.S. addresses, five-digit or nine-digit postal code matches, address does not.</td>
<td>For U.S. addresses, five-digit postal code matches, address does not.</td>
</tr>
</tbody></table>

<aside class="notice" >
AVS status codes are valid for cards issued from United States and United Kingdom. For other countries status message will be returned with error description.
</aside>
<h1 id='level-3-travel-data'>Level 3 Travel Data</h1>
<p>Level 3 travel data is supplied as optional data to the standard API request. If the supplied is valid travel data then the transaction will be processed as a travel transaction and will qualify for the travel Incentive rates. Otherwise the transaction will be processed normally as a regular transaction. Note that the travel data will be stored as part of the transaction in all cases.</p>

<p>Travel data is supported for <a href="#authorize" target="_self">Authorize</a>, <a href="#authorize-3d" target="_self">Authorize3D</a>, <a href="#capture" target="_self">Capture</a>, <a href="#sale" target="_self">Sale</a>, <a href="#sale-3d" target="_self">Sale3D</a>, <a href="#init-recurring-sale" target="_self">InitRecurringSale</a>, <a href="#init-recurring-sale-3d" target="_self">InitRecurringSale3D</a>, <a href="#recurring-sale-2" target="_self">RecurringSale</a>.</p>

<p>The following travel types are supported <a href="#airline-itinerary-data-aid" target="_self">Airline Itinerary Data (AID)</a>, <a href="#car-rental" target="_self">Car Rental</a>, <a href="#hotel-rental" target="_self">Hotel Rental</a>, <a href="#ancillary-charges" target="_self">Ancillary Charges</a>, <a href="#miscellaneous-charges" target="_self">Misc Charges</a>.</p>

<aside class="notice">
Check the travel related transaction <a href="#special-cases" target="_self">special cases</a>.
</aside>
<h2 id='travel-types'>Travel Types</h2><h3 id='airline-itinerary-data-aid'>Airline Itinerary Data (AID)</h3>
<p><strong>Airline Ticket transaction With Airline Itinerary Data (AID)</strong></p>

<p><strong>MasterCard</strong></p>

<p>Contract Merchant Category Code must be 3000-3350 or 4511</p>

<blockquote>
<p>Request</p>
</blockquote>

<pre class="highlight php tab-php"><code><span class="cp">&lt;?php</span>

<span class="c1">// Load the pre-configured ini file...
</span><span class="nx">\Genesis\Config</span><span class="o">::</span><span class="na">loadSettings</span><span class="p">(</span><span class="s1">'/path/to/config.ini'</span><span class="p">);</span>

<span class="nv">$genesis</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Genesis</span><span class="p">(</span><span class="s1">'Financial\Cards\Sale'</span><span class="p">);</span>
<span class="nv">$request</span> <span class="o">=</span> <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">request</span><span class="p">();</span>

<span class="nv">$request</span>
  <span class="o">-&gt;</span><span class="na">set</span><span class="o">...</span><span class="p">(</span><span class="s1">''</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setTravel</span><span class="p">(</span><span class="s1">'{"ticket"=&gt;{"ticket_number"=&gt;123456789012345, "passenger_name"=&gt;"Test Example", "customer_code"=&gt;1, "issuing_carrier"=&gt;"AAAA", "total_fare"=&gt;5000, "agency_name"=&gt;"Agency", "agency_code"=&gt;"AG001"}, "legs"=&gt;[{"departure_date"=&gt;"2018-02-05", "carrier_code"=&gt;12, "service_class"=&gt;1, "origin_city"=&gt;"VAR", "destination_city"=&gt;"FRA", "stopover_code"=&gt;0, "fare_basis_code"=&gt;1, "flight_number"=&gt;"W6666", "departure_time"=&gt;"11:37", "departure_time_segment"=&gt;"A"}]}'</span><span class="p">);</span>

<span class="k">try</span> <span class="p">{</span>
    <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">execute</span><span class="p">();</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">response</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">getResponseObject</span><span class="p">();</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">\Exception</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$e</span><span class="o">-&gt;</span><span class="na">getMessage</span><span class="p">();</span>
<span class="p">}</span>
</code></pre>

<pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.GenesisClient</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.TransactionResult</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.constants.Endpoints</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.constants.Environments</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.requests.financial.card.SaleRequest</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.model.Transaction</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Configuration</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Country</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Currency</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">GenesisExample</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">()</span>  <span class="o">{</span>

    <span class="c1">// Create configuration</span>
    <span class="n">Configuration</span> <span class="n">configuration</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Configuration</span><span class="o">(</span><span class="n">Environments</span><span class="o">.</span><span class="na">STAGING</span><span class="o">,</span> <span class="n">Endpoints</span><span class="o">.</span><span class="na">EMERCHANTPAY</span><span class="o">);</span>

    <span class="n">configuration</span><span class="o">.</span><span class="na">setUsername</span><span class="o">(</span><span class="s">"SET_YOUR_USERNAME"</span><span class="o">);</span>
    <span class="n">configuration</span><span class="o">.</span><span class="na">setPassword</span><span class="o">(</span><span class="s">"SET_YOUR_PASSWORD"</span><span class="o">);</span>
    <span class="n">configuration</span><span class="o">.</span><span class="na">setToken</span><span class="o">(</span><span class="s">"SET_YOUR_TOKEN"</span><span class="o">);</span>

    <span class="n">SaleRequest</span> <span class="n">request</span> <span class="o">=</span> <span class="k">new</span> <span class="n">SaleRequest</span><span class="o">();</span>

    <span class="n">request</span><span class="o">.</span><span class="na">set</span><span class="o">...(</span><span class="s">""</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setTravel</span><span class="o">(</span><span class="s">"{"</span><span class="n">ticket</span><span class="s">"=&gt;{"</span><span class="n">ticket_number</span><span class="s">"=&gt;123456789012345, "</span><span class="n">passenger_name</span><span class="s">"=&gt;"</span><span class="n">Test</span> <span class="n">Example</span><span class="s">", "</span><span class="n">customer_code</span><span class="s">"=&gt;1, "</span><span class="n">issuing_carrier</span><span class="s">"=&gt;"</span><span class="n">AAAA</span><span class="s">", "</span><span class="n">total_fare</span><span class="s">"=&gt;5000, "</span><span class="n">agency_name</span><span class="s">"=&gt;"</span><span class="n">Agency</span><span class="s">", "</span><span class="n">agency_code</span><span class="s">"=&gt;"</span><span class="n">AG001</span><span class="s">"}, "</span><span class="n">legs</span><span class="s">"=&gt;[{"</span><span class="n">departure_date</span><span class="s">"=&gt;"</span><span class="mi">2018</span><span class="o">-</span><span class="mo">02</span><span class="o">-</span><span class="mo">05</span><span class="s">", "</span><span class="n">carrier_code</span><span class="s">"=&gt;12, "</span><span class="n">service_class</span><span class="s">"=&gt;1, "</span><span class="n">origin_city</span><span class="s">"=&gt;"</span><span class="n">VAR</span><span class="s">", "</span><span class="n">destination_city</span><span class="s">"=&gt;"</span><span class="n">FRA</span><span class="s">", "</span><span class="n">stopover_code</span><span class="s">"=&gt;0, "</span><span class="n">fare_basis_code</span><span class="s">"=&gt;1, "</span><span class="n">flight_number</span><span class="s">"=&gt;"</span><span class="n">W6666</span><span class="s">", "</span><span class="n">departure_time</span><span class="s">"=&gt;"</span><span class="mi">11</span><span class="o">:</span><span class="mi">37</span><span class="s">", "</span><span class="n">departure_time_segment</span><span class="s">"=&gt;"</span><span class="n">A</span><span class="s">"}]}"</span><span class="o">);</span>

    <span class="n">GenesisClient</span> <span class="n">client</span> <span class="o">=</span> <span class="k">new</span> <span class="n">GenesisClient</span><span class="o">(</span><span class="n">configuration</span><span class="o">,</span> <span class="n">request</span><span class="o">);</span>
    <span class="n">client</span><span class="o">.</span><span class="na">execute</span><span class="o">();</span>

    <span class="c1">// Parse Payment result</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">client</span><span class="o">.</span><span class="na">getResponse</span><span class="o">());</span>

  <span class="o">}</span>
<span class="o">}</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="kd">var</span> <span class="nx">genesis</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'genesis.js/lib/genesis.js'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">transaction</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">genesis</span><span class="p">.</span><span class="nx">transaction</span><span class="p">();</span>

<span class="kd">var</span> <span class="nx">failure</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">reason</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">reason</span><span class="p">);</span>
<span class="p">};</span>

<span class="kd">var</span> <span class="nx">success</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>

<span class="nx">transaction</span><span class="p">.</span><span class="nx">sale</span><span class="p">(</span>
  <span class="p">{</span>
    <span class="s2">"..."</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
    <span class="s2">"travel"</span><span class="p">:</span> <span class="p">{</span>
      <span class="s2">"ticket"</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">"ticket_number"</span><span class="p">:</span> <span class="mi">123456789012345</span><span class="p">,</span>
        <span class="s2">"passenger_name"</span><span class="p">:</span> <span class="s2">"Test Example"</span><span class="p">,</span>
        <span class="s2">"customer_code"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
        <span class="s2">"issuing_carrier"</span><span class="p">:</span> <span class="s2">"AAAA"</span><span class="p">,</span>
        <span class="s2">"total_fare"</span><span class="p">:</span> <span class="mi">5000</span><span class="p">,</span>
        <span class="s2">"agency_name"</span><span class="p">:</span> <span class="s2">"Agency"</span><span class="p">,</span>
        <span class="s2">"agency_code"</span><span class="p">:</span> <span class="s2">"AG001"</span>
      <span class="p">},</span>
      <span class="s2">"legs"</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
          <span class="s2">"departure_date"</span><span class="p">:</span> <span class="s2">"2018-02-05"</span><span class="p">,</span>
          <span class="s2">"carrier_code"</span><span class="p">:</span> <span class="mi">12</span><span class="p">,</span>
          <span class="s2">"service_class"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
          <span class="s2">"origin_city"</span><span class="p">:</span> <span class="s2">"VAR"</span><span class="p">,</span>
          <span class="s2">"destination_city"</span><span class="p">:</span> <span class="s2">"FRA"</span><span class="p">,</span>
          <span class="s2">"stopover_code"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
          <span class="s2">"fare_basis_code"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
          <span class="s2">"flight_number"</span><span class="p">:</span> <span class="s2">"W6666"</span><span class="p">,</span>
          <span class="s2">"departure_time"</span><span class="p">:</span> <span class="s2">"11:37"</span><span class="p">,</span>
          <span class="s2">"departure_time_segment"</span><span class="p">:</span> <span class="s2">"A"</span>
        <span class="p">}</span>
      <span class="p">]</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">).</span><span class="nx">send</span><span class="p">()</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">success</span><span class="p">)</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">failure</span><span class="p">);</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>curl https://username:password@gate.emerchantpay.net/process/TERMINAL-TOKEN <span class="se">\</span>
   -H <span class="s2">"Content-Type: text/xml"</span> <span class="se">\</span>
   -d <span class="s1">'
&lt;payment_transaction&gt;
  &lt;...&gt;&lt;/...&gt;
  &lt;travel&gt;
    &lt;ticket&gt;
      &lt;ticket_number&gt;123456789012345&lt;/ticket_number&gt;
      &lt;passenger_name&gt;Test Example&lt;/passenger_name&gt;
      &lt;customer_code&gt;1&lt;/customer_code&gt;
      &lt;issuing_carrier&gt;AAAA&lt;/issuing_carrier&gt;
      &lt;total_fare&gt;5000&lt;/total_fare&gt;
      &lt;agency_name&gt;Agency&lt;/agency_name&gt;
      &lt;agency_code&gt;AG001&lt;/agency_code&gt;
    &lt;/ticket&gt;
    &lt;legs&gt;
      &lt;leg&gt;
        &lt;departure_date&gt;2018-02-05&lt;/departure_date&gt;
        &lt;carrier_code&gt;12&lt;/carrier_code&gt;
        &lt;service_class&gt;1&lt;/service_class&gt;
        &lt;origin_city&gt;VAR&lt;/origin_city&gt;
        &lt;destination_city&gt;FRA&lt;/destination_city&gt;
        &lt;stopover_code&gt;0&lt;/stopover_code&gt;
        &lt;fare_basis_code&gt;1&lt;/fare_basis_code&gt;
        &lt;flight_number&gt;W6666&lt;/flight_number&gt;
        &lt;departure_time&gt;11:37&lt;/departure_time&gt;
        &lt;departure_time_segment&gt;A&lt;/departure_time_segment&gt;
      &lt;/leg&gt;
    &lt;/legs&gt;
  &lt;/travel&gt;
&lt;/payment_transaction&gt;'</span>
</code></pre>

<blockquote>
<p>Request</p>
</blockquote>

<pre class="highlight php tab-php"><code><span class="cp">&lt;?php</span>

<span class="c1">// Load the pre-configured ini file...
</span><span class="nx">\Genesis\Config</span><span class="o">::</span><span class="na">loadSettings</span><span class="p">(</span><span class="s1">'/path/to/config.ini'</span><span class="p">);</span>

<span class="nv">$genesis</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Genesis</span><span class="p">(</span><span class="s1">'Financial\Cards\Sale'</span><span class="p">);</span>
<span class="nv">$request</span> <span class="o">=</span> <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">request</span><span class="p">();</span>

<span class="nv">$request</span>
  <span class="o">-&gt;</span><span class="na">set</span><span class="o">...</span><span class="p">(</span><span class="s1">''</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setTravel</span><span class="p">(</span><span class="s1">'{"ticket"=&gt;{"ticket_number"=&gt;123456789012345, "passenger_name"=&gt;"Test Example", "customer_code"=&gt;1, "issuing_carrier"=&gt;"AAAA", "total_fare"=&gt;5000, "agency_name"=&gt;"Agency", "agency_code"=&gt;"AG001"}, "legs"=&gt;[{"departure_date"=&gt;"2018-02-05", "carrier_code"=&gt;12, "service_class"=&gt;1, "origin_city"=&gt;"VAR", "destination_city"=&gt;"FRA", "stopover_code"=&gt;0, "fare_basis_code"=&gt;1, "flight_number"=&gt;"W6666", "departure_time"=&gt;"11:37", "departure_time_segment"=&gt;"A"}, {"departure_date"=&gt;"2018-02-05", "carrier_code"=&gt;12, "service_class"=&gt;1, "origin_city"=&gt;"VAR", "destination_city"=&gt;"BER", "stopover_code"=&gt;0, "fare_basis_code"=&gt;1, "flight_number"=&gt;"W6666", "departure_time"=&gt;"11:37", "departure_time_segment"=&gt;"A"}]}'</span><span class="p">);</span>

<span class="k">try</span> <span class="p">{</span>
    <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">execute</span><span class="p">();</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">response</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">getResponseObject</span><span class="p">();</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">\Exception</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$e</span><span class="o">-&gt;</span><span class="na">getMessage</span><span class="p">();</span>
<span class="p">}</span>
</code></pre>

<pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.GenesisClient</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.TransactionResult</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.constants.Endpoints</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.constants.Environments</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.requests.financial.card.SaleRequest</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.model.Transaction</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Configuration</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Country</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Currency</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">GenesisExample</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">()</span>  <span class="o">{</span>

    <span class="c1">// Create configuration</span>
    <span class="n">Configuration</span> <span class="n">configuration</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Configuration</span><span class="o">(</span><span class="n">Environments</span><span class="o">.</span><span class="na">STAGING</span><span class="o">,</span> <span class="n">Endpoints</span><span class="o">.</span><span class="na">EMERCHANTPAY</span><span class="o">);</span>

    <span class="n">configuration</span><span class="o">.</span><span class="na">setUsername</span><span class="o">(</span><span class="s">"SET_YOUR_USERNAME"</span><span class="o">);</span>
    <span class="n">configuration</span><span class="o">.</span><span class="na">setPassword</span><span class="o">(</span><span class="s">"SET_YOUR_PASSWORD"</span><span class="o">);</span>
    <span class="n">configuration</span><span class="o">.</span><span class="na">setToken</span><span class="o">(</span><span class="s">"SET_YOUR_TOKEN"</span><span class="o">);</span>

    <span class="n">SaleRequest</span> <span class="n">request</span> <span class="o">=</span> <span class="k">new</span> <span class="n">SaleRequest</span><span class="o">();</span>

    <span class="n">request</span><span class="o">.</span><span class="na">set</span><span class="o">...(</span><span class="s">""</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setTravel</span><span class="o">(</span><span class="s">"{"</span><span class="n">ticket</span><span class="s">"=&gt;{"</span><span class="n">ticket_number</span><span class="s">"=&gt;123456789012345, "</span><span class="n">passenger_name</span><span class="s">"=&gt;"</span><span class="n">Test</span> <span class="n">Example</span><span class="s">", "</span><span class="n">customer_code</span><span class="s">"=&gt;1, "</span><span class="n">issuing_carrier</span><span class="s">"=&gt;"</span><span class="n">AAAA</span><span class="s">", "</span><span class="n">total_fare</span><span class="s">"=&gt;5000, "</span><span class="n">agency_name</span><span class="s">"=&gt;"</span><span class="n">Agency</span><span class="s">", "</span><span class="n">agency_code</span><span class="s">"=&gt;"</span><span class="n">AG001</span><span class="s">"}, "</span><span class="n">legs</span><span class="s">"=&gt;[{"</span><span class="n">departure_date</span><span class="s">"=&gt;"</span><span class="mi">2018</span><span class="o">-</span><span class="mo">02</span><span class="o">-</span><span class="mo">05</span><span class="s">", "</span><span class="n">carrier_code</span><span class="s">"=&gt;12, "</span><span class="n">service_class</span><span class="s">"=&gt;1, "</span><span class="n">origin_city</span><span class="s">"=&gt;"</span><span class="n">VAR</span><span class="s">", "</span><span class="n">destination_city</span><span class="s">"=&gt;"</span><span class="n">FRA</span><span class="s">", "</span><span class="n">stopover_code</span><span class="s">"=&gt;0, "</span><span class="n">fare_basis_code</span><span class="s">"=&gt;1, "</span><span class="n">flight_number</span><span class="s">"=&gt;"</span><span class="n">W6666</span><span class="s">", "</span><span class="n">departure_time</span><span class="s">"=&gt;"</span><span class="mi">11</span><span class="o">:</span><span class="mi">37</span><span class="s">", "</span><span class="n">departure_time_segment</span><span class="s">"=&gt;"</span><span class="n">A</span><span class="s">"}, {"</span><span class="n">departure_date</span><span class="s">"=&gt;"</span><span class="mi">2018</span><span class="o">-</span><span class="mo">02</span><span class="o">-</span><span class="mo">05</span><span class="s">", "</span><span class="n">carrier_code</span><span class="s">"=&gt;12, "</span><span class="n">service_class</span><span class="s">"=&gt;1, "</span><span class="n">origin_city</span><span class="s">"=&gt;"</span><span class="n">VAR</span><span class="s">", "</span><span class="n">destination_city</span><span class="s">"=&gt;"</span><span class="n">BER</span><span class="s">", "</span><span class="n">stopover_code</span><span class="s">"=&gt;0, "</span><span class="n">fare_basis_code</span><span class="s">"=&gt;1, "</span><span class="n">flight_number</span><span class="s">"=&gt;"</span><span class="n">W6666</span><span class="s">", "</span><span class="n">departure_time</span><span class="s">"=&gt;"</span><span class="mi">11</span><span class="o">:</span><span class="mi">37</span><span class="s">", "</span><span class="n">departure_time_segment</span><span class="s">"=&gt;"</span><span class="n">A</span><span class="s">"}]}"</span><span class="o">);</span>

    <span class="n">GenesisClient</span> <span class="n">client</span> <span class="o">=</span> <span class="k">new</span> <span class="n">GenesisClient</span><span class="o">(</span><span class="n">configuration</span><span class="o">,</span> <span class="n">request</span><span class="o">);</span>
    <span class="n">client</span><span class="o">.</span><span class="na">execute</span><span class="o">();</span>

    <span class="c1">// Parse Payment result</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">client</span><span class="o">.</span><span class="na">getResponse</span><span class="o">());</span>

  <span class="o">}</span>
<span class="o">}</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="kd">var</span> <span class="nx">genesis</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'genesis.js/lib/genesis.js'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">transaction</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">genesis</span><span class="p">.</span><span class="nx">transaction</span><span class="p">();</span>

<span class="kd">var</span> <span class="nx">failure</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">reason</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">reason</span><span class="p">);</span>
<span class="p">};</span>

<span class="kd">var</span> <span class="nx">success</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>

<span class="nx">transaction</span><span class="p">.</span><span class="nx">sale</span><span class="p">(</span>
  <span class="p">{</span>
    <span class="s2">"..."</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
    <span class="s2">"travel"</span><span class="p">:</span> <span class="p">{</span>
      <span class="s2">"ticket"</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">"ticket_number"</span><span class="p">:</span> <span class="mi">123456789012345</span><span class="p">,</span>
        <span class="s2">"passenger_name"</span><span class="p">:</span> <span class="s2">"Test Example"</span><span class="p">,</span>
        <span class="s2">"customer_code"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
        <span class="s2">"issuing_carrier"</span><span class="p">:</span> <span class="s2">"AAAA"</span><span class="p">,</span>
        <span class="s2">"total_fare"</span><span class="p">:</span> <span class="mi">5000</span><span class="p">,</span>
        <span class="s2">"agency_name"</span><span class="p">:</span> <span class="s2">"Agency"</span><span class="p">,</span>
        <span class="s2">"agency_code"</span><span class="p">:</span> <span class="s2">"AG001"</span>
      <span class="p">},</span>
      <span class="s2">"legs"</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
          <span class="s2">"departure_date"</span><span class="p">:</span> <span class="s2">"2018-02-05"</span><span class="p">,</span>
          <span class="s2">"carrier_code"</span><span class="p">:</span> <span class="mi">12</span><span class="p">,</span>
          <span class="s2">"service_class"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
          <span class="s2">"origin_city"</span><span class="p">:</span> <span class="s2">"VAR"</span><span class="p">,</span>
          <span class="s2">"destination_city"</span><span class="p">:</span> <span class="s2">"FRA"</span><span class="p">,</span>
          <span class="s2">"stopover_code"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
          <span class="s2">"fare_basis_code"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
          <span class="s2">"flight_number"</span><span class="p">:</span> <span class="s2">"W6666"</span><span class="p">,</span>
          <span class="s2">"departure_time"</span><span class="p">:</span> <span class="s2">"11:37"</span><span class="p">,</span>
          <span class="s2">"departure_time_segment"</span><span class="p">:</span> <span class="s2">"A"</span>
        <span class="p">},</span>
        <span class="p">{</span>
          <span class="s2">"departure_date"</span><span class="p">:</span> <span class="s2">"2018-02-05"</span><span class="p">,</span>
          <span class="s2">"carrier_code"</span><span class="p">:</span> <span class="mi">12</span><span class="p">,</span>
          <span class="s2">"service_class"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
          <span class="s2">"origin_city"</span><span class="p">:</span> <span class="s2">"VAR"</span><span class="p">,</span>
          <span class="s2">"destination_city"</span><span class="p">:</span> <span class="s2">"BER"</span><span class="p">,</span>
          <span class="s2">"stopover_code"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
          <span class="s2">"fare_basis_code"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
          <span class="s2">"flight_number"</span><span class="p">:</span> <span class="s2">"W6666"</span><span class="p">,</span>
          <span class="s2">"departure_time"</span><span class="p">:</span> <span class="s2">"11:37"</span><span class="p">,</span>
          <span class="s2">"departure_time_segment"</span><span class="p">:</span> <span class="s2">"A"</span>
        <span class="p">}</span>
      <span class="p">]</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">).</span><span class="nx">send</span><span class="p">()</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">success</span><span class="p">)</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">failure</span><span class="p">);</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>curl https://username:password@gate.emerchantpay.net/process/TERMINAL-TOKEN <span class="se">\</span>
   -H <span class="s2">"Content-Type: text/xml"</span> <span class="se">\</span>
   -d <span class="s1">'
&lt;payment_transaction&gt;
  &lt;...&gt;&lt;/...&gt;
  &lt;travel&gt;
    &lt;ticket&gt;
      &lt;ticket_number&gt;123456789012345&lt;/ticket_number&gt;
      &lt;passenger_name&gt;Test Example&lt;/passenger_name&gt;
      &lt;customer_code&gt;1&lt;/customer_code&gt;
      &lt;issuing_carrier&gt;AAAA&lt;/issuing_carrier&gt;
      &lt;total_fare&gt;5000&lt;/total_fare&gt;
      &lt;agency_name&gt;Agency&lt;/agency_name&gt;
      &lt;agency_code&gt;AG001&lt;/agency_code&gt;
    &lt;/ticket&gt;
    &lt;legs&gt;
      &lt;leg&gt;
        &lt;departure_date&gt;2018-02-05&lt;/departure_date&gt;
        &lt;carrier_code&gt;12&lt;/carrier_code&gt;
        &lt;service_class&gt;1&lt;/service_class&gt;
        &lt;origin_city&gt;VAR&lt;/origin_city&gt;
        &lt;destination_city&gt;FRA&lt;/destination_city&gt;
        &lt;stopover_code&gt;0&lt;/stopover_code&gt;
        &lt;fare_basis_code&gt;1&lt;/fare_basis_code&gt;
        &lt;flight_number&gt;W6666&lt;/flight_number&gt;
        &lt;departure_time&gt;11:37&lt;/departure_time&gt;
        &lt;departure_time_segment&gt;A&lt;/departure_time_segment&gt;
      &lt;/leg&gt;
      &lt;leg&gt;
        &lt;departure_date&gt;2018-02-05&lt;/departure_date&gt;
        &lt;carrier_code&gt;12&lt;/carrier_code&gt;
        &lt;service_class&gt;1&lt;/service_class&gt;
        &lt;origin_city&gt;VAR&lt;/origin_city&gt;
        &lt;destination_city&gt;BER&lt;/destination_city&gt;
        &lt;stopover_code&gt;0&lt;/stopover_code&gt;
        &lt;fare_basis_code&gt;1&lt;/fare_basis_code&gt;
        &lt;flight_number&gt;W6666&lt;/flight_number&gt;
        &lt;departure_time&gt;11:37&lt;/departure_time&gt;
        &lt;departure_time_segment&gt;A&lt;/departure_time_segment&gt;
      &lt;/leg&gt;
    &lt;/legs&gt;
  &lt;/travel&gt;
&lt;/payment_transaction&gt;'</span>
</code></pre>

<p><strong>Request Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>travel</strong></td>
<td>required</td>
<td></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;<strong>ticket</strong></td>
<td>required</td>
<td></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ticket_number</td>
<td>required</td>
<td>String(15)</td>
<td>The number on the ticket.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;passenger_name</td>
<td>required</td>
<td>String(29)</td>
<td>The name of the passenger. May be the cardholder name if the passenger name is unavailable. Must not be blank.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;customer_code</td>
<td>required</td>
<td>String(17)</td>
<td>The customer code. Internal Reference.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;issuing_carrier</td>
<td>optional</td>
<td>String(4)</td>
<td>Contains the standard abbreviation for the airline or railway carrier issuing the ticket.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;total_fare</td>
<td>required</td>
<td>Fixnum</td>
<td>Total amount of the ticket and should equal the amount of the transaction.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;agency_name</td>
<td>optional</td>
<td>String(30)</td>
<td>An entry should be supplied if a travel agency issued the ticket.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;agency_code</td>
<td>optional</td>
<td>String(8)</td>
<td>An entry should be supplied if a travel agency issued the ticket.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;<strong>legs</strong></td>
<td>required</td>
<td></td>
<td>Max legs 10</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<strong>leg</strong></td>
<td>required</td>
<td></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;departure_date</td>
<td>required</td>
<td>String(10)</td>
<td>The departure date. Date can be in future.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;carrier_code</td>
<td>required</td>
<td>String(2)</td>
<td>Contains the standard abbreviation for the airline or railway carrier issuing the ticket. This should not contain all spaces or zeros. Code indicating name of carrier.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;service_class</td>
<td>required</td>
<td>String(1)</td>
<td>The service type. i.e. Coach, First Class. Required for reduced interchange.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;origin_city</td>
<td>required</td>
<td>String(3)</td>
<td>The originating airport name‘s standard abbreviation. This should not contain all spaces or zeroes.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;destination_city</td>
<td>required</td>
<td>String(3)</td>
<td>The destination airport or railway name‘s standard abbreviation.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;stopover_code</td>
<td>required</td>
<td>String(1)</td>
<td>A code indicating whether there was a direct or a non-direct flight or route on the same ticket number. Allowed values: 0, 1</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fare_basis_code</td>
<td>optional</td>
<td>String(6)</td>
<td>A code that carriers assign to a particular ticket type, such as business class or discounted/ non-re fundable.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;flight_number</td>
<td>optional</td>
<td>String(5)</td>
<td>The number that the operating or marketing carrier assigned.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;departure_time</td>
<td>optional</td>
<td>String(5)</td>
<td>The time of departure provided by the airline or railway, per trip leg.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;departure_time_segment</td>
<td>optional</td>
<td>String(1)</td>
<td>Departure Time Segment. Allowed values: A, P</td>
</tr>
</tbody></table>

<p><code>required* = conditionally required</code></p>

<p><strong>Visa</strong></p>

<p>Contract Merchant Category Code must be 3000-3350 or 4511</p>

<blockquote>
<p>Request</p>
</blockquote>

<pre class="highlight php tab-php"><code><span class="cp">&lt;?php</span>

<span class="c1">// Load the pre-configured ini file...
</span><span class="nx">\Genesis\Config</span><span class="o">::</span><span class="na">loadSettings</span><span class="p">(</span><span class="s1">'/path/to/config.ini'</span><span class="p">);</span>

<span class="nv">$genesis</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Genesis</span><span class="p">(</span><span class="s1">'Financial\Cards\Sale'</span><span class="p">);</span>
<span class="nv">$request</span> <span class="o">=</span> <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">request</span><span class="p">();</span>

<span class="nv">$request</span>
  <span class="o">-&gt;</span><span class="na">set</span><span class="o">...</span><span class="p">(</span><span class="s1">''</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setTravel</span><span class="p">(</span><span class="s1">'{"ticket"=&gt;{"ticket_number"=&gt;12345, "passenger_name"=&gt;"Emil Example", "customer_code"=&gt;1, "restricted_ticket_indicator"=&gt;1, "agency_name"=&gt;"Agency", "agency_code"=&gt;"AG001"}, "legs"=&gt;[{"departure_date"=&gt;"2018-02-01", "carrier_code"=&gt;2, "service_class"=&gt;3, "origin_city"=&gt;"SOF", "destination_city"=&gt;"VAR", "stopover_code"=&gt;0, "fare_basis_code"=&gt;1, "flight_number"=&gt;"W6666"}]}'</span><span class="p">);</span>

<span class="k">try</span> <span class="p">{</span>
    <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">execute</span><span class="p">();</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">response</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">getResponseObject</span><span class="p">();</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">\Exception</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$e</span><span class="o">-&gt;</span><span class="na">getMessage</span><span class="p">();</span>
<span class="p">}</span>
</code></pre>

<pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.GenesisClient</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.TransactionResult</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.constants.Endpoints</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.constants.Environments</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.requests.financial.card.SaleRequest</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.model.Transaction</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Configuration</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Country</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Currency</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">GenesisExample</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">()</span>  <span class="o">{</span>

    <span class="c1">// Create configuration</span>
    <span class="n">Configuration</span> <span class="n">configuration</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Configuration</span><span class="o">(</span><span class="n">Environments</span><span class="o">.</span><span class="na">STAGING</span><span class="o">,</span> <span class="n">Endpoints</span><span class="o">.</span><span class="na">EMERCHANTPAY</span><span class="o">);</span>

    <span class="n">configuration</span><span class="o">.</span><span class="na">setUsername</span><span class="o">(</span><span class="s">"SET_YOUR_USERNAME"</span><span class="o">);</span>
    <span class="n">configuration</span><span class="o">.</span><span class="na">setPassword</span><span class="o">(</span><span class="s">"SET_YOUR_PASSWORD"</span><span class="o">);</span>
    <span class="n">configuration</span><span class="o">.</span><span class="na">setToken</span><span class="o">(</span><span class="s">"SET_YOUR_TOKEN"</span><span class="o">);</span>

    <span class="n">SaleRequest</span> <span class="n">request</span> <span class="o">=</span> <span class="k">new</span> <span class="n">SaleRequest</span><span class="o">();</span>

    <span class="n">request</span><span class="o">.</span><span class="na">set</span><span class="o">...(</span><span class="s">""</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setTravel</span><span class="o">(</span><span class="s">"{"</span><span class="n">ticket</span><span class="s">"=&gt;{"</span><span class="n">ticket_number</span><span class="s">"=&gt;12345, "</span><span class="n">passenger_name</span><span class="s">"=&gt;"</span><span class="n">Emil</span> <span class="n">Example</span><span class="s">", "</span><span class="n">customer_code</span><span class="s">"=&gt;1, "</span><span class="n">restricted_ticket_indicator</span><span class="s">"=&gt;1, "</span><span class="n">agency_name</span><span class="s">"=&gt;"</span><span class="n">Agency</span><span class="s">", "</span><span class="n">agency_code</span><span class="s">"=&gt;"</span><span class="n">AG001</span><span class="s">"}, "</span><span class="n">legs</span><span class="s">"=&gt;[{"</span><span class="n">departure_date</span><span class="s">"=&gt;"</span><span class="mi">2018</span><span class="o">-</span><span class="mo">02</span><span class="o">-</span><span class="mo">01</span><span class="s">", "</span><span class="n">carrier_code</span><span class="s">"=&gt;2, "</span><span class="n">service_class</span><span class="s">"=&gt;3, "</span><span class="n">origin_city</span><span class="s">"=&gt;"</span><span class="n">SOF</span><span class="s">", "</span><span class="n">destination_city</span><span class="s">"=&gt;"</span><span class="n">VAR</span><span class="s">", "</span><span class="n">stopover_code</span><span class="s">"=&gt;0, "</span><span class="n">fare_basis_code</span><span class="s">"=&gt;1, "</span><span class="n">flight_number</span><span class="s">"=&gt;"</span><span class="n">W6666</span><span class="s">"}]}"</span><span class="o">);</span>

    <span class="n">GenesisClient</span> <span class="n">client</span> <span class="o">=</span> <span class="k">new</span> <span class="n">GenesisClient</span><span class="o">(</span><span class="n">configuration</span><span class="o">,</span> <span class="n">request</span><span class="o">);</span>
    <span class="n">client</span><span class="o">.</span><span class="na">execute</span><span class="o">();</span>

    <span class="c1">// Parse Payment result</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">client</span><span class="o">.</span><span class="na">getResponse</span><span class="o">());</span>

  <span class="o">}</span>
<span class="o">}</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="kd">var</span> <span class="nx">genesis</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'genesis.js/lib/genesis.js'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">transaction</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">genesis</span><span class="p">.</span><span class="nx">transaction</span><span class="p">();</span>

<span class="kd">var</span> <span class="nx">failure</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">reason</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">reason</span><span class="p">);</span>
<span class="p">};</span>

<span class="kd">var</span> <span class="nx">success</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>

<span class="nx">transaction</span><span class="p">.</span><span class="nx">sale</span><span class="p">(</span>
  <span class="p">{</span>
    <span class="s2">"..."</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
    <span class="s2">"travel"</span><span class="p">:</span> <span class="p">{</span>
      <span class="s2">"ticket"</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">"ticket_number"</span><span class="p">:</span> <span class="mi">12345</span><span class="p">,</span>
        <span class="s2">"passenger_name"</span><span class="p">:</span> <span class="s2">"Emil Example"</span><span class="p">,</span>
        <span class="s2">"customer_code"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
        <span class="s2">"restricted_ticket_indicator"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
        <span class="s2">"agency_name"</span><span class="p">:</span> <span class="s2">"Agency"</span><span class="p">,</span>
        <span class="s2">"agency_code"</span><span class="p">:</span> <span class="s2">"AG001"</span>
      <span class="p">},</span>
      <span class="s2">"legs"</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
          <span class="s2">"departure_date"</span><span class="p">:</span> <span class="s2">"2018-02-01"</span><span class="p">,</span>
          <span class="s2">"carrier_code"</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
          <span class="s2">"service_class"</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
          <span class="s2">"origin_city"</span><span class="p">:</span> <span class="s2">"SOF"</span><span class="p">,</span>
          <span class="s2">"destination_city"</span><span class="p">:</span> <span class="s2">"VAR"</span><span class="p">,</span>
          <span class="s2">"stopover_code"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
          <span class="s2">"fare_basis_code"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
          <span class="s2">"flight_number"</span><span class="p">:</span> <span class="s2">"W6666"</span>
        <span class="p">}</span>
      <span class="p">]</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">).</span><span class="nx">send</span><span class="p">()</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">success</span><span class="p">)</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">failure</span><span class="p">);</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>curl https://username:password@gate.emerchantpay.net/process/TERMINAL-TOKEN <span class="se">\</span>
   -H <span class="s2">"Content-Type: text/xml"</span> <span class="se">\</span>
   -d <span class="s1">'
&lt;payment_transaction&gt;
  &lt;...&gt;&lt;/...&gt;
  &lt;travel&gt;
    &lt;ticket&gt;
      &lt;ticket_number&gt;12345&lt;/ticket_number&gt;
      &lt;passenger_name&gt;Emil Example&lt;/passenger_name&gt;
      &lt;customer_code&gt;1&lt;/customer_code&gt;
      &lt;restricted_ticket_indicator&gt;1&lt;/restricted_ticket_indicator&gt;
      &lt;agency_name&gt;Agency&lt;/agency_name&gt;
      &lt;agency_code&gt;AG001&lt;/agency_code&gt;
    &lt;/ticket&gt;
    &lt;legs&gt;
      &lt;leg&gt;
        &lt;departure_date&gt;2018-02-01&lt;/departure_date&gt;
        &lt;carrier_code&gt;2&lt;/carrier_code&gt;
        &lt;service_class&gt;3&lt;/service_class&gt;
        &lt;origin_city&gt;SOF&lt;/origin_city&gt;
        &lt;destination_city&gt;VAR&lt;/destination_city&gt;
        &lt;stopover_code&gt;0&lt;/stopover_code&gt;
        &lt;fare_basis_code&gt;1&lt;/fare_basis_code&gt;
        &lt;flight_number&gt;W6666&lt;/flight_number&gt;
      &lt;/leg&gt;
    &lt;/legs&gt;
  &lt;/travel&gt;
&lt;/payment_transaction&gt;'</span>
</code></pre>

<blockquote>
<p>Request</p>
</blockquote>

<pre class="highlight php tab-php"><code><span class="cp">&lt;?php</span>

<span class="c1">// Load the pre-configured ini file...
</span><span class="nx">\Genesis\Config</span><span class="o">::</span><span class="na">loadSettings</span><span class="p">(</span><span class="s1">'/path/to/config.ini'</span><span class="p">);</span>

<span class="nv">$genesis</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Genesis</span><span class="p">(</span><span class="s1">'Financial\Cards\Sale'</span><span class="p">);</span>
<span class="nv">$request</span> <span class="o">=</span> <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">request</span><span class="p">();</span>

<span class="nv">$request</span>
  <span class="o">-&gt;</span><span class="na">set</span><span class="o">...</span><span class="p">(</span><span class="s1">''</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setTravel</span><span class="p">(</span><span class="s1">'{"ticket"=&gt;{"ticket_number"=&gt;123456789012345, "passenger_name"=&gt;"Test Example", "customer_code"=&gt;1, "restricted_ticket_indicator"=&gt;1, "agency_name"=&gt;"Agency", "agency_code"=&gt;"AG001"}, "legs"=&gt;[{"departure_date"=&gt;"2018-02-01", "carrier_code"=&gt;2, "service_class"=&gt;3, "origin_city"=&gt;"SOF", "destination_city"=&gt;"VAR", "stopover_code"=&gt;0, "fare_basis_code"=&gt;1, "flight_number"=&gt;"W6666"}, {"departure_date"=&gt;"2018-02-01", "carrier_code"=&gt;2, "service_class"=&gt;3, "origin_city"=&gt;"VAR", "destination_city"=&gt;"FRA", "stopover_code"=&gt;0, "fare_basis_code"=&gt;1, "flight_number"=&gt;"W6366"}]}'</span><span class="p">);</span>

<span class="k">try</span> <span class="p">{</span>
    <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">execute</span><span class="p">();</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">response</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">getResponseObject</span><span class="p">();</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">\Exception</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$e</span><span class="o">-&gt;</span><span class="na">getMessage</span><span class="p">();</span>
<span class="p">}</span>
</code></pre>

<pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.GenesisClient</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.TransactionResult</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.constants.Endpoints</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.constants.Environments</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.requests.financial.card.SaleRequest</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.model.Transaction</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Configuration</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Country</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Currency</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">GenesisExample</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">()</span>  <span class="o">{</span>

    <span class="c1">// Create configuration</span>
    <span class="n">Configuration</span> <span class="n">configuration</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Configuration</span><span class="o">(</span><span class="n">Environments</span><span class="o">.</span><span class="na">STAGING</span><span class="o">,</span> <span class="n">Endpoints</span><span class="o">.</span><span class="na">EMERCHANTPAY</span><span class="o">);</span>

    <span class="n">configuration</span><span class="o">.</span><span class="na">setUsername</span><span class="o">(</span><span class="s">"SET_YOUR_USERNAME"</span><span class="o">);</span>
    <span class="n">configuration</span><span class="o">.</span><span class="na">setPassword</span><span class="o">(</span><span class="s">"SET_YOUR_PASSWORD"</span><span class="o">);</span>
    <span class="n">configuration</span><span class="o">.</span><span class="na">setToken</span><span class="o">(</span><span class="s">"SET_YOUR_TOKEN"</span><span class="o">);</span>

    <span class="n">SaleRequest</span> <span class="n">request</span> <span class="o">=</span> <span class="k">new</span> <span class="n">SaleRequest</span><span class="o">();</span>

    <span class="n">request</span><span class="o">.</span><span class="na">set</span><span class="o">...(</span><span class="s">""</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setTravel</span><span class="o">(</span><span class="s">"{"</span><span class="n">ticket</span><span class="s">"=&gt;{"</span><span class="n">ticket_number</span><span class="s">"=&gt;123456789012345, "</span><span class="n">passenger_name</span><span class="s">"=&gt;"</span><span class="n">Test</span> <span class="n">Example</span><span class="s">", "</span><span class="n">customer_code</span><span class="s">"=&gt;1, "</span><span class="n">restricted_ticket_indicator</span><span class="s">"=&gt;1, "</span><span class="n">agency_name</span><span class="s">"=&gt;"</span><span class="n">Agency</span><span class="s">", "</span><span class="n">agency_code</span><span class="s">"=&gt;"</span><span class="n">AG001</span><span class="s">"}, "</span><span class="n">legs</span><span class="s">"=&gt;[{"</span><span class="n">departure_date</span><span class="s">"=&gt;"</span><span class="mi">2018</span><span class="o">-</span><span class="mo">02</span><span class="o">-</span><span class="mo">01</span><span class="s">", "</span><span class="n">carrier_code</span><span class="s">"=&gt;2, "</span><span class="n">service_class</span><span class="s">"=&gt;3, "</span><span class="n">origin_city</span><span class="s">"=&gt;"</span><span class="n">SOF</span><span class="s">", "</span><span class="n">destination_city</span><span class="s">"=&gt;"</span><span class="n">VAR</span><span class="s">", "</span><span class="n">stopover_code</span><span class="s">"=&gt;0, "</span><span class="n">fare_basis_code</span><span class="s">"=&gt;1, "</span><span class="n">flight_number</span><span class="s">"=&gt;"</span><span class="n">W6666</span><span class="s">"}, {"</span><span class="n">departure_date</span><span class="s">"=&gt;"</span><span class="mi">2018</span><span class="o">-</span><span class="mo">02</span><span class="o">-</span><span class="mo">01</span><span class="s">", "</span><span class="n">carrier_code</span><span class="s">"=&gt;2, "</span><span class="n">service_class</span><span class="s">"=&gt;3, "</span><span class="n">origin_city</span><span class="s">"=&gt;"</span><span class="n">VAR</span><span class="s">", "</span><span class="n">destination_city</span><span class="s">"=&gt;"</span><span class="n">FRA</span><span class="s">", "</span><span class="n">stopover_code</span><span class="s">"=&gt;0, "</span><span class="n">fare_basis_code</span><span class="s">"=&gt;1, "</span><span class="n">flight_number</span><span class="s">"=&gt;"</span><span class="n">W6366</span><span class="s">"}]}"</span><span class="o">);</span>

    <span class="n">GenesisClient</span> <span class="n">client</span> <span class="o">=</span> <span class="k">new</span> <span class="n">GenesisClient</span><span class="o">(</span><span class="n">configuration</span><span class="o">,</span> <span class="n">request</span><span class="o">);</span>
    <span class="n">client</span><span class="o">.</span><span class="na">execute</span><span class="o">();</span>

    <span class="c1">// Parse Payment result</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">client</span><span class="o">.</span><span class="na">getResponse</span><span class="o">());</span>

  <span class="o">}</span>
<span class="o">}</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="kd">var</span> <span class="nx">genesis</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'genesis.js/lib/genesis.js'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">transaction</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">genesis</span><span class="p">.</span><span class="nx">transaction</span><span class="p">();</span>

<span class="kd">var</span> <span class="nx">failure</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">reason</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">reason</span><span class="p">);</span>
<span class="p">};</span>

<span class="kd">var</span> <span class="nx">success</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>

<span class="nx">transaction</span><span class="p">.</span><span class="nx">sale</span><span class="p">(</span>
  <span class="p">{</span>
    <span class="s2">"..."</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
    <span class="s2">"travel"</span><span class="p">:</span> <span class="p">{</span>
      <span class="s2">"ticket"</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">"ticket_number"</span><span class="p">:</span> <span class="mi">123456789012345</span><span class="p">,</span>
        <span class="s2">"passenger_name"</span><span class="p">:</span> <span class="s2">"Test Example"</span><span class="p">,</span>
        <span class="s2">"customer_code"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
        <span class="s2">"restricted_ticket_indicator"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
        <span class="s2">"agency_name"</span><span class="p">:</span> <span class="s2">"Agency"</span><span class="p">,</span>
        <span class="s2">"agency_code"</span><span class="p">:</span> <span class="s2">"AG001"</span>
      <span class="p">},</span>
      <span class="s2">"legs"</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
          <span class="s2">"departure_date"</span><span class="p">:</span> <span class="s2">"2018-02-01"</span><span class="p">,</span>
          <span class="s2">"carrier_code"</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
          <span class="s2">"service_class"</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
          <span class="s2">"origin_city"</span><span class="p">:</span> <span class="s2">"SOF"</span><span class="p">,</span>
          <span class="s2">"destination_city"</span><span class="p">:</span> <span class="s2">"VAR"</span><span class="p">,</span>
          <span class="s2">"stopover_code"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
          <span class="s2">"fare_basis_code"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
          <span class="s2">"flight_number"</span><span class="p">:</span> <span class="s2">"W6666"</span>
        <span class="p">},</span>
        <span class="p">{</span>
          <span class="s2">"departure_date"</span><span class="p">:</span> <span class="s2">"2018-02-01"</span><span class="p">,</span>
          <span class="s2">"carrier_code"</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
          <span class="s2">"service_class"</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
          <span class="s2">"origin_city"</span><span class="p">:</span> <span class="s2">"VAR"</span><span class="p">,</span>
          <span class="s2">"destination_city"</span><span class="p">:</span> <span class="s2">"FRA"</span><span class="p">,</span>
          <span class="s2">"stopover_code"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
          <span class="s2">"fare_basis_code"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
          <span class="s2">"flight_number"</span><span class="p">:</span> <span class="s2">"W6366"</span>
        <span class="p">}</span>
      <span class="p">]</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">).</span><span class="nx">send</span><span class="p">()</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">success</span><span class="p">)</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">failure</span><span class="p">);</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>curl https://username:password@gate.emerchantpay.net/process/TERMINAL-TOKEN <span class="se">\</span>
   -H <span class="s2">"Content-Type: text/xml"</span> <span class="se">\</span>
   -d <span class="s1">'
&lt;payment_transaction&gt;
  &lt;...&gt;&lt;/...&gt;
  &lt;travel&gt;
    &lt;ticket&gt;
      &lt;ticket_number&gt;123456789012345&lt;/ticket_number&gt;
      &lt;passenger_name&gt;Test Example&lt;/passenger_name&gt;
      &lt;customer_code&gt;1&lt;/customer_code&gt;
      &lt;restricted_ticket_indicator&gt;1&lt;/restricted_ticket_indicator&gt;
      &lt;agency_name&gt;Agency&lt;/agency_name&gt;
      &lt;agency_code&gt;AG001&lt;/agency_code&gt;
    &lt;/ticket&gt;
    &lt;legs&gt;
      &lt;leg&gt;
        &lt;departure_date&gt;2018-02-01&lt;/departure_date&gt;
        &lt;carrier_code&gt;2&lt;/carrier_code&gt;
        &lt;service_class&gt;3&lt;/service_class&gt;
        &lt;origin_city&gt;SOF&lt;/origin_city&gt;
        &lt;destination_city&gt;VAR&lt;/destination_city&gt;
        &lt;stopover_code&gt;0&lt;/stopover_code&gt;
        &lt;fare_basis_code&gt;1&lt;/fare_basis_code&gt;
        &lt;flight_number&gt;W6666&lt;/flight_number&gt;
      &lt;/leg&gt;
      &lt;leg&gt;
        &lt;departure_date&gt;2018-02-01&lt;/departure_date&gt;
        &lt;carrier_code&gt;2&lt;/carrier_code&gt;
        &lt;service_class&gt;3&lt;/service_class&gt;
        &lt;origin_city&gt;VAR&lt;/origin_city&gt;
        &lt;destination_city&gt;FRA&lt;/destination_city&gt;
        &lt;stopover_code&gt;0&lt;/stopover_code&gt;
        &lt;fare_basis_code&gt;1&lt;/fare_basis_code&gt;
        &lt;flight_number&gt;W6366&lt;/flight_number&gt;
      &lt;/leg&gt;
    &lt;/legs&gt;
  &lt;/travel&gt;
&lt;/payment_transaction&gt;'</span>
</code></pre>

<p><strong>Request Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>travel</strong></td>
<td>required</td>
<td></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;<strong>ticket</strong></td>
<td>required</td>
<td></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ticket_number</td>
<td>required</td>
<td>String(15)</td>
<td>The number on the ticket.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;passenger_name</td>
<td>required</td>
<td>String(29)</td>
<td>The name of the passenger. May be the cardholder name if the passenger name is unavailable. Must not be blank.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;customer_code</td>
<td>required</td>
<td>String(17)</td>
<td>The customer code. Internal Reference.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;restricted_ticket_indicator</td>
<td>optional</td>
<td>String(1)</td>
<td>Space or 0 = No restriction, 1 = Restriction; Allowed values: Empty String, 0, 1</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;agency_name</td>
<td>optional</td>
<td>String(30)</td>
<td>An entry should be supplied if a travel agency issued the ticket.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;agency_code</td>
<td>optional</td>
<td>String(8)</td>
<td>An entry should be supplied if a travel agency issued the ticket.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;<strong>legs</strong></td>
<td>required</td>
<td></td>
<td>Max legs 10</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<strong>leg</strong></td>
<td>required</td>
<td></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;departure_date</td>
<td>required</td>
<td>String(10)</td>
<td>The departure date. Date can be in future.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;origin_city</td>
<td>required</td>
<td>String(3)</td>
<td>The originating airport name‘s standard abbreviation. This should not contain all spaces or zeroes.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;carrier_code</td>
<td>required</td>
<td>String(2)</td>
<td>Contains the standard abbreviation for the airline or railway carrier issuing the ticket. This should not contain all spaces or zeros. Code indicating name of carrier.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;service_class</td>
<td>required</td>
<td>String(1)</td>
<td>The service type. i.e. Coach, First Class. Required for reduced interchange.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;stopover_code</td>
<td>required</td>
<td>String(1)</td>
<td>A code indicating whether there was a direct or a non-direct flight or route on the same ticket number. Allowed values: 0, 1</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;destination_city</td>
<td>required</td>
<td>String(3)</td>
<td>The destination airport or railway name‘s standard abbreviation.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fare_basis_code</td>
<td>optional</td>
<td>String(6)</td>
<td>A code that carriers assign to a particular ticket type, such as business class or discounted/ non-re fundable.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;flight_number</td>
<td>optional</td>
<td>String(5)</td>
<td>The number that the operating or marketing carrier assigned.</td>
</tr>
</tbody></table>

<p><code>required* = conditionally required</code></p>
<h3 id='car-rental'>Car Rental</h3>
<p><strong>MasterCard</strong></p>

<p>Contact Merchant Category Code must be 3351-3500, 7512, 7513 or 7519</p>

<blockquote>
<p>Request</p>
</blockquote>

<pre class="highlight php tab-php"><code><span class="cp">&lt;?php</span>

<span class="c1">// Load the pre-configured ini file...
</span><span class="nx">\Genesis\Config</span><span class="o">::</span><span class="na">loadSettings</span><span class="p">(</span><span class="s1">'/path/to/config.ini'</span><span class="p">);</span>

<span class="nv">$genesis</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Genesis</span><span class="p">(</span><span class="s1">'Financial\Cards\Sale'</span><span class="p">);</span>
<span class="nv">$request</span> <span class="o">=</span> <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">request</span><span class="p">();</span>

<span class="nv">$request</span>
  <span class="o">-&gt;</span><span class="na">set</span><span class="o">...</span><span class="p">(</span><span class="s1">''</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setTravel</span><span class="p">(</span><span class="s1">'{"rentals"=&gt;{"car_rental"=&gt;{"purchase_identifier"=&gt;12478, "class_id"=&gt;3, "pickup_date"=&gt;"2018-02-05", "renter_name"=&gt;"Emil Example", "return_city"=&gt;"Varna", "return_state"=&gt;"VAR", "return_country"=&gt;"BGR", "return_date"=&gt;"2018-02-06", "renter_return_location_id"=&gt;12478, "customer_code"=&gt;1}}}'</span><span class="p">);</span>

<span class="k">try</span> <span class="p">{</span>
    <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">execute</span><span class="p">();</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">response</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">getResponseObject</span><span class="p">();</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">\Exception</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$e</span><span class="o">-&gt;</span><span class="na">getMessage</span><span class="p">();</span>
<span class="p">}</span>
</code></pre>

<pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.GenesisClient</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.TransactionResult</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.constants.Endpoints</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.constants.Environments</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.requests.financial.card.SaleRequest</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.model.Transaction</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Configuration</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Country</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Currency</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">GenesisExample</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">()</span>  <span class="o">{</span>

    <span class="c1">// Create configuration</span>
    <span class="n">Configuration</span> <span class="n">configuration</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Configuration</span><span class="o">(</span><span class="n">Environments</span><span class="o">.</span><span class="na">STAGING</span><span class="o">,</span> <span class="n">Endpoints</span><span class="o">.</span><span class="na">EMERCHANTPAY</span><span class="o">);</span>

    <span class="n">configuration</span><span class="o">.</span><span class="na">setUsername</span><span class="o">(</span><span class="s">"SET_YOUR_USERNAME"</span><span class="o">);</span>
    <span class="n">configuration</span><span class="o">.</span><span class="na">setPassword</span><span class="o">(</span><span class="s">"SET_YOUR_PASSWORD"</span><span class="o">);</span>
    <span class="n">configuration</span><span class="o">.</span><span class="na">setToken</span><span class="o">(</span><span class="s">"SET_YOUR_TOKEN"</span><span class="o">);</span>

    <span class="n">SaleRequest</span> <span class="n">request</span> <span class="o">=</span> <span class="k">new</span> <span class="n">SaleRequest</span><span class="o">();</span>

    <span class="n">request</span><span class="o">.</span><span class="na">set</span><span class="o">...(</span><span class="s">""</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setTravel</span><span class="o">(</span><span class="s">"{"</span><span class="n">rentals</span><span class="s">"=&gt;{"</span><span class="n">car_rental</span><span class="s">"=&gt;{"</span><span class="n">purchase_identifier</span><span class="s">"=&gt;12478, "</span><span class="n">class_id</span><span class="s">"=&gt;3, "</span><span class="n">pickup_date</span><span class="s">"=&gt;"</span><span class="mi">2018</span><span class="o">-</span><span class="mo">02</span><span class="o">-</span><span class="mo">05</span><span class="s">", "</span><span class="n">renter_name</span><span class="s">"=&gt;"</span><span class="n">Emil</span> <span class="n">Example</span><span class="s">", "</span><span class="n">return_city</span><span class="s">"=&gt;"</span><span class="n">Varna</span><span class="s">", "</span><span class="n">return_state</span><span class="s">"=&gt;"</span><span class="n">VAR</span><span class="s">", "</span><span class="n">return_country</span><span class="s">"=&gt;"</span><span class="n">BGR</span><span class="s">", "</span><span class="n">return_date</span><span class="s">"=&gt;"</span><span class="mi">2018</span><span class="o">-</span><span class="mo">02</span><span class="o">-</span><span class="mo">06</span><span class="s">", "</span><span class="n">renter_return_location_id</span><span class="s">"=&gt;12478, "</span><span class="n">customer_code</span><span class="s">"=&gt;1}}}"</span><span class="o">);</span>

    <span class="n">GenesisClient</span> <span class="n">client</span> <span class="o">=</span> <span class="k">new</span> <span class="n">GenesisClient</span><span class="o">(</span><span class="n">configuration</span><span class="o">,</span> <span class="n">request</span><span class="o">);</span>
    <span class="n">client</span><span class="o">.</span><span class="na">execute</span><span class="o">();</span>

    <span class="c1">// Parse Payment result</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">client</span><span class="o">.</span><span class="na">getResponse</span><span class="o">());</span>

  <span class="o">}</span>
<span class="o">}</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="kd">var</span> <span class="nx">genesis</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'genesis.js/lib/genesis.js'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">transaction</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">genesis</span><span class="p">.</span><span class="nx">transaction</span><span class="p">();</span>

<span class="kd">var</span> <span class="nx">failure</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">reason</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">reason</span><span class="p">);</span>
<span class="p">};</span>

<span class="kd">var</span> <span class="nx">success</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>

<span class="nx">transaction</span><span class="p">.</span><span class="nx">sale</span><span class="p">(</span>
  <span class="p">{</span>
    <span class="s2">"..."</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
    <span class="s2">"travel"</span><span class="p">:</span> <span class="p">{</span>
      <span class="s2">"rentals"</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">"car_rental"</span><span class="p">:</span> <span class="p">{</span>
          <span class="s2">"purchase_identifier"</span><span class="p">:</span> <span class="mi">12478</span><span class="p">,</span>
          <span class="s2">"class_id"</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
          <span class="s2">"pickup_date"</span><span class="p">:</span> <span class="s2">"2018-02-05"</span><span class="p">,</span>
          <span class="s2">"renter_name"</span><span class="p">:</span> <span class="s2">"Emil Example"</span><span class="p">,</span>
          <span class="s2">"return_city"</span><span class="p">:</span> <span class="s2">"Varna"</span><span class="p">,</span>
          <span class="s2">"return_state"</span><span class="p">:</span> <span class="s2">"VAR"</span><span class="p">,</span>
          <span class="s2">"return_country"</span><span class="p">:</span> <span class="s2">"BGR"</span><span class="p">,</span>
          <span class="s2">"return_date"</span><span class="p">:</span> <span class="s2">"2018-02-06"</span><span class="p">,</span>
          <span class="s2">"renter_return_location_id"</span><span class="p">:</span> <span class="mi">12478</span><span class="p">,</span>
          <span class="s2">"customer_code"</span><span class="p">:</span> <span class="mi">1</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">).</span><span class="nx">send</span><span class="p">()</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">success</span><span class="p">)</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">failure</span><span class="p">);</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>curl https://username:password@gate.emerchantpay.net/process/TERMINAL-TOKEN <span class="se">\</span>
   -H <span class="s2">"Content-Type: text/xml"</span> <span class="se">\</span>
   -d <span class="s1">'
&lt;payment_transaction&gt;
  &lt;...&gt;&lt;/...&gt;
  &lt;travel&gt;
    &lt;rentals&gt;
      &lt;car_rental&gt;
        &lt;purchase_identifier&gt;12478&lt;/purchase_identifier&gt;
        &lt;class_id&gt;3&lt;/class_id&gt;
        &lt;pickup_date&gt;2018-02-05&lt;/pickup_date&gt;
        &lt;renter_name&gt;Emil Example&lt;/renter_name&gt;
        &lt;return_city&gt;Varna&lt;/return_city&gt;
        &lt;return_state&gt;VAR&lt;/return_state&gt;
        &lt;return_country&gt;BGR&lt;/return_country&gt;
        &lt;return_date&gt;2018-02-06&lt;/return_date&gt;
        &lt;renter_return_location_id&gt;12478&lt;/renter_return_location_id&gt;
        &lt;customer_code&gt;1&lt;/customer_code&gt;
      &lt;/car_rental&gt;
    &lt;/rentals&gt;
  &lt;/travel&gt;
&lt;/payment_transaction&gt;'</span>
</code></pre>

<p><strong>Request Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>travel</strong></td>
<td>required</td>
<td></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;<strong>rentals</strong></td>
<td>required</td>
<td></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<strong>car_rental</strong></td>
<td>required</td>
<td></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;purchase_identifier</td>
<td>required</td>
<td>String(9)</td>
<td>Rental Agreement Number / Hotel Folio Number.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;class_id</td>
<td>required</td>
<td>String(4)</td>
<td>The car rental classification. Allowed values: 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 9999</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pickup_date</td>
<td>required</td>
<td>String(10)</td>
<td>Car rental Pick-up date.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;renter_name</td>
<td>required</td>
<td>String(20)</td>
<td>The Renter Name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return_city</td>
<td>required</td>
<td>String(18)</td>
<td>The Rental Return City</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return_state</td>
<td>required</td>
<td>String(3)</td>
<td>The Rental Return State</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return_country</td>
<td>required</td>
<td>String(3)</td>
<td>The Rental Return Country</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return_date</td>
<td>required</td>
<td>String(10)</td>
<td>Car Rental return date</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;renter_return_location_id</td>
<td>required</td>
<td>String(10)</td>
<td>Expenses or Car Rental code, Address, phone number, etc. Identifying Rental Return Location.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;customer_code</td>
<td>required</td>
<td>String(17)</td>
<td>The customer code. Internal Reference.</td>
</tr>
</tbody></table>

<p><code>required* = conditionally required</code></p>

<p><strong>Visa</strong></p>

<p>Contract Merchant Category Code must be 3351-3500, 7512, 7513 or 7519</p>

<blockquote>
<p>Request</p>
</blockquote>

<pre class="highlight php tab-php"><code><span class="cp">&lt;?php</span>

<span class="c1">// Load the pre-configured ini file...
</span><span class="nx">\Genesis\Config</span><span class="o">::</span><span class="na">loadSettings</span><span class="p">(</span><span class="s1">'/path/to/config.ini'</span><span class="p">);</span>

<span class="nv">$genesis</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Genesis</span><span class="p">(</span><span class="s1">'Financial\Cards\Sale'</span><span class="p">);</span>
<span class="nv">$request</span> <span class="o">=</span> <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">request</span><span class="p">();</span>

<span class="nv">$request</span>
  <span class="o">-&gt;</span><span class="na">set</span><span class="o">...</span><span class="p">(</span><span class="s1">''</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setTravel</span><span class="p">(</span><span class="s1">'{"rentals"=&gt;{"car_rental"=&gt;{"purchase_identifier"=&gt;12478, "class_id"=&gt;3, "pickup_date"=&gt;"2018-02-05", "renter_name"=&gt;"Emil Example", "return_city"=&gt;"Varna", "return_state"=&gt;"VAR", "return_country"=&gt;"BGR", "return_date"=&gt;"2018-02-06", "renter_return_location_id"=&gt;12478, "customer_code"=&gt;1}}}'</span><span class="p">);</span>

<span class="k">try</span> <span class="p">{</span>
    <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">execute</span><span class="p">();</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">response</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">getResponseObject</span><span class="p">();</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">\Exception</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$e</span><span class="o">-&gt;</span><span class="na">getMessage</span><span class="p">();</span>
<span class="p">}</span>
</code></pre>

<pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.GenesisClient</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.TransactionResult</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.constants.Endpoints</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.constants.Environments</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.requests.financial.card.SaleRequest</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.model.Transaction</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Configuration</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Country</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Currency</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">GenesisExample</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">()</span>  <span class="o">{</span>

    <span class="c1">// Create configuration</span>
    <span class="n">Configuration</span> <span class="n">configuration</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Configuration</span><span class="o">(</span><span class="n">Environments</span><span class="o">.</span><span class="na">STAGING</span><span class="o">,</span> <span class="n">Endpoints</span><span class="o">.</span><span class="na">EMERCHANTPAY</span><span class="o">);</span>

    <span class="n">configuration</span><span class="o">.</span><span class="na">setUsername</span><span class="o">(</span><span class="s">"SET_YOUR_USERNAME"</span><span class="o">);</span>
    <span class="n">configuration</span><span class="o">.</span><span class="na">setPassword</span><span class="o">(</span><span class="s">"SET_YOUR_PASSWORD"</span><span class="o">);</span>
    <span class="n">configuration</span><span class="o">.</span><span class="na">setToken</span><span class="o">(</span><span class="s">"SET_YOUR_TOKEN"</span><span class="o">);</span>

    <span class="n">SaleRequest</span> <span class="n">request</span> <span class="o">=</span> <span class="k">new</span> <span class="n">SaleRequest</span><span class="o">();</span>

    <span class="n">request</span><span class="o">.</span><span class="na">set</span><span class="o">...(</span><span class="s">""</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setTravel</span><span class="o">(</span><span class="s">"{"</span><span class="n">rentals</span><span class="s">"=&gt;{"</span><span class="n">car_rental</span><span class="s">"=&gt;{"</span><span class="n">purchase_identifier</span><span class="s">"=&gt;12478, "</span><span class="n">class_id</span><span class="s">"=&gt;3, "</span><span class="n">pickup_date</span><span class="s">"=&gt;"</span><span class="mi">2018</span><span class="o">-</span><span class="mo">02</span><span class="o">-</span><span class="mo">05</span><span class="s">", "</span><span class="n">renter_name</span><span class="s">"=&gt;"</span><span class="n">Emil</span> <span class="n">Example</span><span class="s">", "</span><span class="n">return_city</span><span class="s">"=&gt;"</span><span class="n">Varna</span><span class="s">", "</span><span class="n">return_state</span><span class="s">"=&gt;"</span><span class="n">VAR</span><span class="s">", "</span><span class="n">return_country</span><span class="s">"=&gt;"</span><span class="n">BGR</span><span class="s">", "</span><span class="n">return_date</span><span class="s">"=&gt;"</span><span class="mi">2018</span><span class="o">-</span><span class="mo">02</span><span class="o">-</span><span class="mo">06</span><span class="s">", "</span><span class="n">renter_return_location_id</span><span class="s">"=&gt;12478, "</span><span class="n">customer_code</span><span class="s">"=&gt;1}}}"</span><span class="o">);</span>

    <span class="n">GenesisClient</span> <span class="n">client</span> <span class="o">=</span> <span class="k">new</span> <span class="n">GenesisClient</span><span class="o">(</span><span class="n">configuration</span><span class="o">,</span> <span class="n">request</span><span class="o">);</span>
    <span class="n">client</span><span class="o">.</span><span class="na">execute</span><span class="o">();</span>

    <span class="c1">// Parse Payment result</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">client</span><span class="o">.</span><span class="na">getResponse</span><span class="o">());</span>

  <span class="o">}</span>
<span class="o">}</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="kd">var</span> <span class="nx">genesis</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'genesis.js/lib/genesis.js'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">transaction</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">genesis</span><span class="p">.</span><span class="nx">transaction</span><span class="p">();</span>

<span class="kd">var</span> <span class="nx">failure</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">reason</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">reason</span><span class="p">);</span>
<span class="p">};</span>

<span class="kd">var</span> <span class="nx">success</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>

<span class="nx">transaction</span><span class="p">.</span><span class="nx">sale</span><span class="p">(</span>
  <span class="p">{</span>
    <span class="s2">"..."</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
    <span class="s2">"travel"</span><span class="p">:</span> <span class="p">{</span>
      <span class="s2">"rentals"</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">"car_rental"</span><span class="p">:</span> <span class="p">{</span>
          <span class="s2">"purchase_identifier"</span><span class="p">:</span> <span class="mi">12478</span><span class="p">,</span>
          <span class="s2">"class_id"</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
          <span class="s2">"pickup_date"</span><span class="p">:</span> <span class="s2">"2018-02-05"</span><span class="p">,</span>
          <span class="s2">"renter_name"</span><span class="p">:</span> <span class="s2">"Emil Example"</span><span class="p">,</span>
          <span class="s2">"return_city"</span><span class="p">:</span> <span class="s2">"Varna"</span><span class="p">,</span>
          <span class="s2">"return_state"</span><span class="p">:</span> <span class="s2">"VAR"</span><span class="p">,</span>
          <span class="s2">"return_country"</span><span class="p">:</span> <span class="s2">"BGR"</span><span class="p">,</span>
          <span class="s2">"return_date"</span><span class="p">:</span> <span class="s2">"2018-02-06"</span><span class="p">,</span>
          <span class="s2">"renter_return_location_id"</span><span class="p">:</span> <span class="mi">12478</span><span class="p">,</span>
          <span class="s2">"customer_code"</span><span class="p">:</span> <span class="mi">1</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">).</span><span class="nx">send</span><span class="p">()</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">success</span><span class="p">)</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">failure</span><span class="p">);</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>curl https://username:password@gate.emerchantpay.net/process/TERMINAL-TOKEN <span class="se">\</span>
   -H <span class="s2">"Content-Type: text/xml"</span> <span class="se">\</span>
   -d <span class="s1">'
&lt;payment_transaction&gt;
  &lt;...&gt;&lt;/...&gt;
  &lt;travel&gt;
    &lt;rentals&gt;
      &lt;car_rental&gt;
        &lt;purchase_identifier&gt;12478&lt;/purchase_identifier&gt;
        &lt;class_id&gt;3&lt;/class_id&gt;
        &lt;pickup_date&gt;2018-02-05&lt;/pickup_date&gt;
        &lt;renter_name&gt;Emil Example&lt;/renter_name&gt;
        &lt;return_city&gt;Varna&lt;/return_city&gt;
        &lt;return_state&gt;VAR&lt;/return_state&gt;
        &lt;return_country&gt;BGR&lt;/return_country&gt;
        &lt;return_date&gt;2018-02-06&lt;/return_date&gt;
        &lt;renter_return_location_id&gt;12478&lt;/renter_return_location_id&gt;
        &lt;customer_code&gt;1&lt;/customer_code&gt;
      &lt;/car_rental&gt;
    &lt;/rentals&gt;
  &lt;/travel&gt;
&lt;/payment_transaction&gt;'</span>
</code></pre>

<p><strong>Request Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>travel</strong></td>
<td>required</td>
<td></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;<strong>rentals</strong></td>
<td>required</td>
<td></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<strong>car_rental</strong></td>
<td>required</td>
<td></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;purchase_identifier</td>
<td>optional</td>
<td>String(25)</td>
<td>Rental Agreement Number / Hotel Folio Number</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pickup_date</td>
<td>optional</td>
<td>String(10)</td>
<td>Car rental Pick-up date.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;extra_charges</td>
<td>optional</td>
<td>Array(6)</td>
<td>Additional charges added to customer bill after check-out. Each position can be used to indicate a type of charge; Allowed values: 1, 2, 3, 4, 5</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;no_show_indicator</td>
<td>optional</td>
<td>String(1)</td>
<td>No show indicator; Allowed values: 0, 1</td>
</tr>
</tbody></table>

<p><code>required* = conditionally required</code></p>
<h3 id='hotel-rental'>Hotel Rental</h3>
<p><strong>MasterCard</strong></p>

<p>Contract Merchant Category Code must be 3501-3999 or 7011</p>

<blockquote>
<p>Request</p>
</blockquote>

<pre class="highlight php tab-php"><code><span class="cp">&lt;?php</span>

<span class="c1">// Load the pre-configured ini file...
</span><span class="nx">\Genesis\Config</span><span class="o">::</span><span class="na">loadSettings</span><span class="p">(</span><span class="s1">'/path/to/config.ini'</span><span class="p">);</span>

<span class="nv">$genesis</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Genesis</span><span class="p">(</span><span class="s1">'Financial\Cards\Sale'</span><span class="p">);</span>
<span class="nv">$request</span> <span class="o">=</span> <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">request</span><span class="p">();</span>

<span class="nv">$request</span>
  <span class="o">-&gt;</span><span class="na">set</span><span class="o">...</span><span class="p">(</span><span class="s1">''</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setTravel</span><span class="p">(</span><span class="s1">'{"rentals"=&gt;{"hotel_rental"=&gt;{"purchase_identifier"=&gt;12478, "arrival_date"=&gt;3, "departure_date"=&gt;"2018-02-05", "customer_code"=&gt;1}}}'</span><span class="p">);</span>

<span class="k">try</span> <span class="p">{</span>
    <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">execute</span><span class="p">();</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">response</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">getResponseObject</span><span class="p">();</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">\Exception</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$e</span><span class="o">-&gt;</span><span class="na">getMessage</span><span class="p">();</span>
<span class="p">}</span>
</code></pre>

<pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.GenesisClient</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.TransactionResult</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.constants.Endpoints</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.constants.Environments</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.requests.financial.card.SaleRequest</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.model.Transaction</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Configuration</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Country</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Currency</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">GenesisExample</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">()</span>  <span class="o">{</span>

    <span class="c1">// Create configuration</span>
    <span class="n">Configuration</span> <span class="n">configuration</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Configuration</span><span class="o">(</span><span class="n">Environments</span><span class="o">.</span><span class="na">STAGING</span><span class="o">,</span> <span class="n">Endpoints</span><span class="o">.</span><span class="na">EMERCHANTPAY</span><span class="o">);</span>

    <span class="n">configuration</span><span class="o">.</span><span class="na">setUsername</span><span class="o">(</span><span class="s">"SET_YOUR_USERNAME"</span><span class="o">);</span>
    <span class="n">configuration</span><span class="o">.</span><span class="na">setPassword</span><span class="o">(</span><span class="s">"SET_YOUR_PASSWORD"</span><span class="o">);</span>
    <span class="n">configuration</span><span class="o">.</span><span class="na">setToken</span><span class="o">(</span><span class="s">"SET_YOUR_TOKEN"</span><span class="o">);</span>

    <span class="n">SaleRequest</span> <span class="n">request</span> <span class="o">=</span> <span class="k">new</span> <span class="n">SaleRequest</span><span class="o">();</span>

    <span class="n">request</span><span class="o">.</span><span class="na">set</span><span class="o">...(</span><span class="s">""</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setTravel</span><span class="o">(</span><span class="s">"{"</span><span class="n">rentals</span><span class="s">"=&gt;{"</span><span class="n">hotel_rental</span><span class="s">"=&gt;{"</span><span class="n">purchase_identifier</span><span class="s">"=&gt;12478, "</span><span class="n">arrival_date</span><span class="s">"=&gt;3, "</span><span class="n">departure_date</span><span class="s">"=&gt;"</span><span class="mi">2018</span><span class="o">-</span><span class="mo">02</span><span class="o">-</span><span class="mo">05</span><span class="s">", "</span><span class="n">customer_code</span><span class="s">"=&gt;1}}}"</span><span class="o">);</span>

    <span class="n">GenesisClient</span> <span class="n">client</span> <span class="o">=</span> <span class="k">new</span> <span class="n">GenesisClient</span><span class="o">(</span><span class="n">configuration</span><span class="o">,</span> <span class="n">request</span><span class="o">);</span>
    <span class="n">client</span><span class="o">.</span><span class="na">execute</span><span class="o">();</span>

    <span class="c1">// Parse Payment result</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">client</span><span class="o">.</span><span class="na">getResponse</span><span class="o">());</span>

  <span class="o">}</span>
<span class="o">}</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="kd">var</span> <span class="nx">genesis</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'genesis.js/lib/genesis.js'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">transaction</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">genesis</span><span class="p">.</span><span class="nx">transaction</span><span class="p">();</span>

<span class="kd">var</span> <span class="nx">failure</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">reason</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">reason</span><span class="p">);</span>
<span class="p">};</span>

<span class="kd">var</span> <span class="nx">success</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>

<span class="nx">transaction</span><span class="p">.</span><span class="nx">sale</span><span class="p">(</span>
  <span class="p">{</span>
    <span class="s2">"..."</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
    <span class="s2">"travel"</span><span class="p">:</span> <span class="p">{</span>
      <span class="s2">"rentals"</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">"hotel_rental"</span><span class="p">:</span> <span class="p">{</span>
          <span class="s2">"purchase_identifier"</span><span class="p">:</span> <span class="mi">12478</span><span class="p">,</span>
          <span class="s2">"arrival_date"</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
          <span class="s2">"departure_date"</span><span class="p">:</span> <span class="s2">"2018-02-05"</span><span class="p">,</span>
          <span class="s2">"customer_code"</span><span class="p">:</span> <span class="mi">1</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">).</span><span class="nx">send</span><span class="p">()</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">success</span><span class="p">)</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">failure</span><span class="p">);</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>curl https://username:password@gate.emerchantpay.net/process/TERMINAL-TOKEN <span class="se">\</span>
   -H <span class="s2">"Content-Type: text/xml"</span> <span class="se">\</span>
   -d <span class="s1">'
&lt;payment_transaction&gt;
  &lt;...&gt;&lt;/...&gt;
  &lt;travel&gt;
    &lt;rentals&gt;
      &lt;hotel_rental&gt;
        &lt;purchase_identifier&gt;12478&lt;/purchase_identifier&gt;
        &lt;arrival_date&gt;3&lt;/arrival_date&gt;
        &lt;departure_date&gt;2018-02-05&lt;/departure_date&gt;
        &lt;customer_code&gt;1&lt;/customer_code&gt;
      &lt;/hotel_rental&gt;
    &lt;/rentals&gt;
  &lt;/travel&gt;
&lt;/payment_transaction&gt;'</span>
</code></pre>

<p><strong>Request Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>travel</strong></td>
<td>required</td>
<td></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;<strong>rentals</strong></td>
<td>required</td>
<td></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<strong>hotel_rental</strong></td>
<td>required</td>
<td></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;purchase_identifier</td>
<td>required</td>
<td>String(10)</td>
<td>Rental Agreement Number / Hotel Folio Number.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;arrival_date</td>
<td>required</td>
<td>String(10)</td>
<td>Hotel check-in date.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;departure_date</td>
<td>required</td>
<td>String(10)</td>
<td>The departure date. Date can be in future.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;customer_code</td>
<td>required</td>
<td>String(17)</td>
<td>The customer code. Internal Reference.</td>
</tr>
</tbody></table>

<p><code>required* = conditionally required</code></p>

<p><strong>Visa</strong></p>

<p>Contract Merchant Category Code must be 3501-3999 or 7011</p>

<blockquote>
<p>Request</p>
</blockquote>

<pre class="highlight php tab-php"><code><span class="cp">&lt;?php</span>

<span class="c1">// Load the pre-configured ini file...
</span><span class="nx">\Genesis\Config</span><span class="o">::</span><span class="na">loadSettings</span><span class="p">(</span><span class="s1">'/path/to/config.ini'</span><span class="p">);</span>

<span class="nv">$genesis</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Genesis</span><span class="p">(</span><span class="s1">'Financial\Cards\Sale'</span><span class="p">);</span>
<span class="nv">$request</span> <span class="o">=</span> <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">request</span><span class="p">();</span>

<span class="nv">$request</span>
  <span class="o">-&gt;</span><span class="na">set</span><span class="o">...</span><span class="p">(</span><span class="s1">''</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setTravel</span><span class="p">(</span><span class="s1">'{"rentals"=&gt;{"hotel_rental"=&gt;{"purchase_identifier"=&gt;2, "arrival_date"=&gt;"2018-02-01", "extra_charges"=&gt;467, "no_show_indicator"=&gt;1}}}'</span><span class="p">);</span>

<span class="k">try</span> <span class="p">{</span>
    <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">execute</span><span class="p">();</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">response</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">getResponseObject</span><span class="p">();</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">\Exception</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$e</span><span class="o">-&gt;</span><span class="na">getMessage</span><span class="p">();</span>
<span class="p">}</span>
</code></pre>

<pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.GenesisClient</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.TransactionResult</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.constants.Endpoints</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.constants.Environments</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.requests.financial.card.SaleRequest</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.model.Transaction</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Configuration</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Country</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Currency</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">GenesisExample</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">()</span>  <span class="o">{</span>

    <span class="c1">// Create configuration</span>
    <span class="n">Configuration</span> <span class="n">configuration</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Configuration</span><span class="o">(</span><span class="n">Environments</span><span class="o">.</span><span class="na">STAGING</span><span class="o">,</span> <span class="n">Endpoints</span><span class="o">.</span><span class="na">EMERCHANTPAY</span><span class="o">);</span>

    <span class="n">configuration</span><span class="o">.</span><span class="na">setUsername</span><span class="o">(</span><span class="s">"SET_YOUR_USERNAME"</span><span class="o">);</span>
    <span class="n">configuration</span><span class="o">.</span><span class="na">setPassword</span><span class="o">(</span><span class="s">"SET_YOUR_PASSWORD"</span><span class="o">);</span>
    <span class="n">configuration</span><span class="o">.</span><span class="na">setToken</span><span class="o">(</span><span class="s">"SET_YOUR_TOKEN"</span><span class="o">);</span>

    <span class="n">SaleRequest</span> <span class="n">request</span> <span class="o">=</span> <span class="k">new</span> <span class="n">SaleRequest</span><span class="o">();</span>

    <span class="n">request</span><span class="o">.</span><span class="na">set</span><span class="o">...(</span><span class="s">""</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setTravel</span><span class="o">(</span><span class="s">"{"</span><span class="n">rentals</span><span class="s">"=&gt;{"</span><span class="n">hotel_rental</span><span class="s">"=&gt;{"</span><span class="n">purchase_identifier</span><span class="s">"=&gt;2, "</span><span class="n">arrival_date</span><span class="s">"=&gt;"</span><span class="mi">2018</span><span class="o">-</span><span class="mo">02</span><span class="o">-</span><span class="mo">01</span><span class="s">", "</span><span class="n">extra_charges</span><span class="s">"=&gt;467, "</span><span class="n">no_show_indicator</span><span class="s">"=&gt;1}}}"</span><span class="o">);</span>

    <span class="n">GenesisClient</span> <span class="n">client</span> <span class="o">=</span> <span class="k">new</span> <span class="n">GenesisClient</span><span class="o">(</span><span class="n">configuration</span><span class="o">,</span> <span class="n">request</span><span class="o">);</span>
    <span class="n">client</span><span class="o">.</span><span class="na">execute</span><span class="o">();</span>

    <span class="c1">// Parse Payment result</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">client</span><span class="o">.</span><span class="na">getResponse</span><span class="o">());</span>

  <span class="o">}</span>
<span class="o">}</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="kd">var</span> <span class="nx">genesis</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'genesis.js/lib/genesis.js'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">transaction</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">genesis</span><span class="p">.</span><span class="nx">transaction</span><span class="p">();</span>

<span class="kd">var</span> <span class="nx">failure</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">reason</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">reason</span><span class="p">);</span>
<span class="p">};</span>

<span class="kd">var</span> <span class="nx">success</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>

<span class="nx">transaction</span><span class="p">.</span><span class="nx">sale</span><span class="p">(</span>
  <span class="p">{</span>
    <span class="s2">"..."</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
    <span class="s2">"travel"</span><span class="p">:</span> <span class="p">{</span>
      <span class="s2">"rentals"</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">"hotel_rental"</span><span class="p">:</span> <span class="p">{</span>
          <span class="s2">"purchase_identifier"</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
          <span class="s2">"arrival_date"</span><span class="p">:</span> <span class="s2">"2018-02-01"</span><span class="p">,</span>
          <span class="s2">"extra_charges"</span><span class="p">:</span> <span class="mi">467</span><span class="p">,</span>
          <span class="s2">"no_show_indicator"</span><span class="p">:</span> <span class="mi">1</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">).</span><span class="nx">send</span><span class="p">()</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">success</span><span class="p">)</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">failure</span><span class="p">);</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>curl https://username:password@gate.emerchantpay.net/process/TERMINAL-TOKEN <span class="se">\</span>
   -H <span class="s2">"Content-Type: text/xml"</span> <span class="se">\</span>
   -d <span class="s1">'
&lt;payment_transaction&gt;
  &lt;...&gt;&lt;/...&gt;
  &lt;travel&gt;
    &lt;rentals&gt;
      &lt;hotel_rental&gt;
        &lt;purchase_identifier&gt;2&lt;/purchase_identifier&gt;
        &lt;arrival_date&gt;2018-02-01&lt;/arrival_date&gt;
        &lt;extra_charges&gt;467&lt;/extra_charges&gt;
        &lt;no_show_indicator&gt;1&lt;/no_show_indicator&gt;
      &lt;/hotel_rental&gt;
    &lt;/rentals&gt;
  &lt;/travel&gt;
&lt;/payment_transaction&gt;'</span>
</code></pre>

<p><strong>Request Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>travel</strong></td>
<td>required</td>
<td></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;<strong>rentals</strong></td>
<td>required</td>
<td></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<strong>hotel_rental</strong></td>
<td>required</td>
<td></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;purchase_identifier</td>
<td>optional</td>
<td>String(25)</td>
<td>Rental Agreement Number / Hotel Folio Number</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;arrival_date</td>
<td>optional</td>
<td>String(10)</td>
<td>Car rental Pick-up date.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;extra_charges</td>
<td>optional</td>
<td>Array(6)</td>
<td>Additional charges added to customer bill after check-out. Each position can be used to indicate a type of charge. Allowed values: 2, 3, 4, 5, 6, 7</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;no_show_indicator</td>
<td>optional</td>
<td>String(1)</td>
<td>No show indicator; Allowed values: 0, 1</td>
</tr>
</tbody></table>

<p><code>required* = conditionally required</code></p>
<h3 id='ancillary-charges'>Ancillary Charges</h3>
<p><strong>Ancillary Charges</strong></p>

<p>Charges/fees related to the ticket. These transactions are processed on a separate transaction, referenced to Airline transaction with AID.</p>

<p><strong>MasterCard</strong></p>

<p>Used to identify only Baggage Charges.</p>

<p>Contract Merchant Category Code must be 3000-3350 or 4511</p>

<blockquote>
<p>Request</p>
</blockquote>

<pre class="highlight php tab-php"><code><span class="cp">&lt;?php</span>

<span class="c1">// Load the pre-configured ini file...
</span><span class="nx">\Genesis\Config</span><span class="o">::</span><span class="na">loadSettings</span><span class="p">(</span><span class="s1">'/path/to/config.ini'</span><span class="p">);</span>

<span class="nv">$genesis</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Genesis</span><span class="p">(</span><span class="s1">'Financial\Cards\Sale'</span><span class="p">);</span>
<span class="nv">$request</span> <span class="o">=</span> <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">request</span><span class="p">();</span>

<span class="nv">$request</span>
  <span class="o">-&gt;</span><span class="na">set</span><span class="o">...</span><span class="p">(</span><span class="s1">''</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setTravel</span><span class="p">(</span><span class="s1">'{"ticket"=&gt;{"ticket_reference_id"=&gt;"8b7e3575e5605ea7e1895707a3e92837"}, "charges"=&gt;{"charge"=&gt;{"type"=&gt;"BG"}}}'</span><span class="p">);</span>

<span class="k">try</span> <span class="p">{</span>
    <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">execute</span><span class="p">();</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">response</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">getResponseObject</span><span class="p">();</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">\Exception</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$e</span><span class="o">-&gt;</span><span class="na">getMessage</span><span class="p">();</span>
<span class="p">}</span>
</code></pre>

<pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.GenesisClient</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.TransactionResult</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.constants.Endpoints</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.constants.Environments</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.requests.financial.card.SaleRequest</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.model.Transaction</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Configuration</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Country</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Currency</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">GenesisExample</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">()</span>  <span class="o">{</span>

    <span class="c1">// Create configuration</span>
    <span class="n">Configuration</span> <span class="n">configuration</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Configuration</span><span class="o">(</span><span class="n">Environments</span><span class="o">.</span><span class="na">STAGING</span><span class="o">,</span> <span class="n">Endpoints</span><span class="o">.</span><span class="na">EMERCHANTPAY</span><span class="o">);</span>

    <span class="n">configuration</span><span class="o">.</span><span class="na">setUsername</span><span class="o">(</span><span class="s">"SET_YOUR_USERNAME"</span><span class="o">);</span>
    <span class="n">configuration</span><span class="o">.</span><span class="na">setPassword</span><span class="o">(</span><span class="s">"SET_YOUR_PASSWORD"</span><span class="o">);</span>
    <span class="n">configuration</span><span class="o">.</span><span class="na">setToken</span><span class="o">(</span><span class="s">"SET_YOUR_TOKEN"</span><span class="o">);</span>

    <span class="n">SaleRequest</span> <span class="n">request</span> <span class="o">=</span> <span class="k">new</span> <span class="n">SaleRequest</span><span class="o">();</span>

    <span class="n">request</span><span class="o">.</span><span class="na">set</span><span class="o">...(</span><span class="s">""</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setTravel</span><span class="o">(</span><span class="s">"{"</span><span class="n">ticket</span><span class="s">"=&gt;{"</span><span class="n">ticket_reference_id</span><span class="s">"=&gt;"</span><span class="mi">8</span><span class="n">b7e3575e5605ea7e1895707a3e92837</span><span class="s">"}, "</span><span class="n">charges</span><span class="s">"=&gt;{"</span><span class="n">charge</span><span class="s">"=&gt;{"</span><span class="n">type</span><span class="s">"=&gt;"</span><span class="n">BG</span><span class="s">"}}}"</span><span class="o">);</span>

    <span class="n">GenesisClient</span> <span class="n">client</span> <span class="o">=</span> <span class="k">new</span> <span class="n">GenesisClient</span><span class="o">(</span><span class="n">configuration</span><span class="o">,</span> <span class="n">request</span><span class="o">);</span>
    <span class="n">client</span><span class="o">.</span><span class="na">execute</span><span class="o">();</span>

    <span class="c1">// Parse Payment result</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">client</span><span class="o">.</span><span class="na">getResponse</span><span class="o">());</span>

  <span class="o">}</span>
<span class="o">}</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="kd">var</span> <span class="nx">genesis</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'genesis.js/lib/genesis.js'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">transaction</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">genesis</span><span class="p">.</span><span class="nx">transaction</span><span class="p">();</span>

<span class="kd">var</span> <span class="nx">failure</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">reason</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">reason</span><span class="p">);</span>
<span class="p">};</span>

<span class="kd">var</span> <span class="nx">success</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>

<span class="nx">transaction</span><span class="p">.</span><span class="nx">sale</span><span class="p">(</span>
  <span class="p">{</span>
    <span class="s2">"..."</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
    <span class="s2">"travel"</span><span class="p">:</span> <span class="p">{</span>
      <span class="s2">"ticket"</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">"ticket_reference_id"</span><span class="p">:</span> <span class="s2">"8b7e3575e5605ea7e1895707a3e92837"</span>
      <span class="p">},</span>
      <span class="s2">"charges"</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">"charge"</span><span class="p">:</span> <span class="p">{</span>
          <span class="s2">"type"</span><span class="p">:</span> <span class="s2">"BG"</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">).</span><span class="nx">send</span><span class="p">()</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">success</span><span class="p">)</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">failure</span><span class="p">);</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>curl https://username:password@gate.emerchantpay.net/process/TERMINAL-TOKEN <span class="se">\</span>
   -H <span class="s2">"Content-Type: text/xml"</span> <span class="se">\</span>
   -d <span class="s1">'
&lt;payment_transaction&gt;
  &lt;...&gt;&lt;/...&gt;
  &lt;travel&gt;
    &lt;ticket&gt;
      &lt;ticket_reference_id&gt;8b7e3575e5605ea7e1895707a3e92837&lt;/ticket_reference_id&gt;
    &lt;/ticket&gt;
    &lt;charges&gt;
      &lt;charge&gt;
        &lt;type&gt;BG&lt;/type&gt;
      &lt;/charge&gt;
    &lt;/charges&gt;
  &lt;/travel&gt;
&lt;/payment_transaction&gt;'</span>
</code></pre>

<p><strong>Request Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>travel</strong></td>
<td>required</td>
<td></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;<strong>ticket</strong></td>
<td>required</td>
<td></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ticket_reference_id</td>
<td>required</td>
<td>String(32)</td>
<td>Unique id of the ticket transaction</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;<strong>charges</strong></td>
<td>required</td>
<td></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<strong>charge</strong></td>
<td>required</td>
<td></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type</td>
<td>required</td>
<td>String(2)</td>
<td>This field will contain the Service Category Code for the primary type of service that has been provided. Allowed values: BG</td>
</tr>
</tbody></table>

<p><code>required* = conditionally required</code></p>

<p><strong>Visa</strong></p>

<p>Used to identify charges for a number of ancillary services such as ticket upgrades, baggage fee, food &amp; beverage purchases which are not purchased as part of the original ticket. Also used for charges/fees related to partial airline ticket refunds or ticket cancellations.</p>

<p>Contract Merchant Category Code must be 3000-3350 or 4511</p>

<blockquote>
<p>Request</p>
</blockquote>

<pre class="highlight php tab-php"><code><span class="cp">&lt;?php</span>

<span class="c1">// Load the pre-configured ini file...
</span><span class="nx">\Genesis\Config</span><span class="o">::</span><span class="na">loadSettings</span><span class="p">(</span><span class="s1">'/path/to/config.ini'</span><span class="p">);</span>

<span class="nv">$genesis</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Genesis</span><span class="p">(</span><span class="s1">'Financial\Cards\Sale'</span><span class="p">);</span>
<span class="nv">$request</span> <span class="o">=</span> <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">request</span><span class="p">();</span>

<span class="nv">$request</span>
  <span class="o">-&gt;</span><span class="na">set</span><span class="o">...</span><span class="p">(</span><span class="s1">''</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setTravel</span><span class="p">(</span><span class="s1">'{"ticket"=&gt;{"ticket_reference_id"=&gt;"8b7e3575e5605ea7e1895707a3e92837", "ticket_document_number"=&gt;1111, "issued_with_ticket_number"=&gt;12321}, "charges"=&gt;{"charge"=&gt;{"type"=&gt;"BF", "sub_type"=&gt;"BG"}}}'</span><span class="p">);</span>

<span class="k">try</span> <span class="p">{</span>
    <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">execute</span><span class="p">();</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">response</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">getResponseObject</span><span class="p">();</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">\Exception</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$e</span><span class="o">-&gt;</span><span class="na">getMessage</span><span class="p">();</span>
<span class="p">}</span>
</code></pre>

<pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.GenesisClient</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.TransactionResult</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.constants.Endpoints</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.constants.Environments</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.requests.financial.card.SaleRequest</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.model.Transaction</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Configuration</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Country</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Currency</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">GenesisExample</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">()</span>  <span class="o">{</span>

    <span class="c1">// Create configuration</span>
    <span class="n">Configuration</span> <span class="n">configuration</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Configuration</span><span class="o">(</span><span class="n">Environments</span><span class="o">.</span><span class="na">STAGING</span><span class="o">,</span> <span class="n">Endpoints</span><span class="o">.</span><span class="na">EMERCHANTPAY</span><span class="o">);</span>

    <span class="n">configuration</span><span class="o">.</span><span class="na">setUsername</span><span class="o">(</span><span class="s">"SET_YOUR_USERNAME"</span><span class="o">);</span>
    <span class="n">configuration</span><span class="o">.</span><span class="na">setPassword</span><span class="o">(</span><span class="s">"SET_YOUR_PASSWORD"</span><span class="o">);</span>
    <span class="n">configuration</span><span class="o">.</span><span class="na">setToken</span><span class="o">(</span><span class="s">"SET_YOUR_TOKEN"</span><span class="o">);</span>

    <span class="n">SaleRequest</span> <span class="n">request</span> <span class="o">=</span> <span class="k">new</span> <span class="n">SaleRequest</span><span class="o">();</span>

    <span class="n">request</span><span class="o">.</span><span class="na">set</span><span class="o">...(</span><span class="s">""</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setTravel</span><span class="o">(</span><span class="s">"{"</span><span class="n">ticket</span><span class="s">"=&gt;{"</span><span class="n">ticket_reference_id</span><span class="s">"=&gt;"</span><span class="mi">8</span><span class="n">b7e3575e5605ea7e1895707a3e92837</span><span class="s">", "</span><span class="n">ticket_document_number</span><span class="s">"=&gt;1111, "</span><span class="n">issued_with_ticket_number</span><span class="s">"=&gt;12321}, "</span><span class="n">charges</span><span class="s">"=&gt;{"</span><span class="n">charge</span><span class="s">"=&gt;{"</span><span class="n">type</span><span class="s">"=&gt;"</span><span class="n">BF</span><span class="s">", "</span><span class="n">sub_type</span><span class="s">"=&gt;"</span><span class="n">BG</span><span class="s">"}}}"</span><span class="o">);</span>

    <span class="n">GenesisClient</span> <span class="n">client</span> <span class="o">=</span> <span class="k">new</span> <span class="n">GenesisClient</span><span class="o">(</span><span class="n">configuration</span><span class="o">,</span> <span class="n">request</span><span class="o">);</span>
    <span class="n">client</span><span class="o">.</span><span class="na">execute</span><span class="o">();</span>

    <span class="c1">// Parse Payment result</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">client</span><span class="o">.</span><span class="na">getResponse</span><span class="o">());</span>

  <span class="o">}</span>
<span class="o">}</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="kd">var</span> <span class="nx">genesis</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'genesis.js/lib/genesis.js'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">transaction</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">genesis</span><span class="p">.</span><span class="nx">transaction</span><span class="p">();</span>

<span class="kd">var</span> <span class="nx">failure</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">reason</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">reason</span><span class="p">);</span>
<span class="p">};</span>

<span class="kd">var</span> <span class="nx">success</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>

<span class="nx">transaction</span><span class="p">.</span><span class="nx">sale</span><span class="p">(</span>
  <span class="p">{</span>
    <span class="s2">"..."</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
    <span class="s2">"travel"</span><span class="p">:</span> <span class="p">{</span>
      <span class="s2">"ticket"</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">"ticket_reference_id"</span><span class="p">:</span> <span class="s2">"8b7e3575e5605ea7e1895707a3e92837"</span><span class="p">,</span>
        <span class="s2">"ticket_document_number"</span><span class="p">:</span> <span class="mi">1111</span><span class="p">,</span>
        <span class="s2">"issued_with_ticket_number"</span><span class="p">:</span> <span class="mi">12321</span>
      <span class="p">},</span>
      <span class="s2">"charges"</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">"charge"</span><span class="p">:</span> <span class="p">{</span>
          <span class="s2">"type"</span><span class="p">:</span> <span class="s2">"BF"</span><span class="p">,</span>
          <span class="s2">"sub_type"</span><span class="p">:</span> <span class="s2">"BG"</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">).</span><span class="nx">send</span><span class="p">()</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">success</span><span class="p">)</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">failure</span><span class="p">);</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>curl https://username:password@gate.emerchantpay.net/process/TERMINAL-TOKEN <span class="se">\</span>
   -H <span class="s2">"Content-Type: text/xml"</span> <span class="se">\</span>
   -d <span class="s1">'
&lt;payment_transaction&gt;
  &lt;...&gt;&lt;/...&gt;
  &lt;travel&gt;
    &lt;ticket&gt;
      &lt;ticket_reference_id&gt;8b7e3575e5605ea7e1895707a3e92837&lt;/ticket_reference_id&gt;
      &lt;ticket_document_number&gt;1111&lt;/ticket_document_number&gt;
      &lt;issued_with_ticket_number&gt;12321&lt;/issued_with_ticket_number&gt;
    &lt;/ticket&gt;
    &lt;charges&gt;
      &lt;charge&gt;
        &lt;type&gt;BF&lt;/type&gt;
        &lt;sub_type&gt;BG&lt;/sub_type&gt;
      &lt;/charge&gt;
    &lt;/charges&gt;
  &lt;/travel&gt;
&lt;/payment_transaction&gt;'</span>
</code></pre>

<p><strong>Request Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>travel</strong></td>
<td>required</td>
<td></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;<strong>ticket</strong></td>
<td>required</td>
<td></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ticket_reference_id</td>
<td>required</td>
<td>String(32)</td>
<td>Unique id of the ticket transaction</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ticket_document_number</td>
<td>required</td>
<td>String(15)</td>
<td>This field will contain the form number assigned by the carrier for the transaction.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;issued_with_ticket_number</td>
<td>required</td>
<td>String(15)</td>
<td>If this purchase has a connection or relationship to another purchase, such as baggage fee for a passenger transport ticket, this field must contain the document number for the other purchase.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;<strong>charges</strong></td>
<td>required</td>
<td></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<strong>charge</strong></td>
<td>required</td>
<td></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type</td>
<td>required</td>
<td>String(2)</td>
<td>This field will contain the Service Category Code for the primary type of service that has been provided. Allowed values: BF, BG, CF, CG, CO, FF, GF, GT, IE, LG, MD, ML, OT, PA, PT, SA, SB, SF, ST, TS, UN, UP, WI</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sub_type</td>
<td>required</td>
<td>String(2)</td>
<td>This field will contain the Service Category Code for the secondary type of service that has been provided Allowed values: BF, BG, CF, CG, CO, FF, GF, GT, IE, LG, MD, ML, OT, PA, PT, SA, SB, SF, ST, TS, UN, UP, WI</td>
</tr>
</tbody></table>

<p><code>required* = conditionally required</code></p>
<h3 id='miscellaneous-charges'>Miscellaneous Charges</h3>
<p>Miscellaneous charges related to the travel, but not related to the ticket.</p>

<p><strong>MasterCard</strong></p>

<p>Contract Merchant Category Code must be 3000-3350 or 4511</p>

<blockquote>
<p>Request</p>
</blockquote>

<pre class="highlight php tab-php"><code><span class="cp">&lt;?php</span>

<span class="c1">// Load the pre-configured ini file...
</span><span class="nx">\Genesis\Config</span><span class="o">::</span><span class="na">loadSettings</span><span class="p">(</span><span class="s1">'/path/to/config.ini'</span><span class="p">);</span>

<span class="nv">$genesis</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Genesis</span><span class="p">(</span><span class="s1">'Financial\Cards\Sale'</span><span class="p">);</span>
<span class="nv">$request</span> <span class="o">=</span> <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">request</span><span class="p">();</span>

<span class="nv">$request</span>
  <span class="o">-&gt;</span><span class="na">set</span><span class="o">...</span><span class="p">(</span><span class="s1">''</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setTravel</span><span class="p">(</span><span class="s1">'{"ticket"=&gt;{"ticket_reference_id"=&gt;"8b7e3575e5605ea7e1895707a3e92837"}, "charges"=&gt;{"charge"=&gt;{"type"=&gt;"MISC"}}}'</span><span class="p">);</span>

<span class="k">try</span> <span class="p">{</span>
    <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">execute</span><span class="p">();</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">response</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">getResponseObject</span><span class="p">();</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">\Exception</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$e</span><span class="o">-&gt;</span><span class="na">getMessage</span><span class="p">();</span>
<span class="p">}</span>
</code></pre>

<pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.GenesisClient</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.TransactionResult</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.constants.Endpoints</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.constants.Environments</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.requests.financial.card.SaleRequest</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.model.Transaction</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Configuration</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Country</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Currency</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">GenesisExample</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">()</span>  <span class="o">{</span>

    <span class="c1">// Create configuration</span>
    <span class="n">Configuration</span> <span class="n">configuration</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Configuration</span><span class="o">(</span><span class="n">Environments</span><span class="o">.</span><span class="na">STAGING</span><span class="o">,</span> <span class="n">Endpoints</span><span class="o">.</span><span class="na">EMERCHANTPAY</span><span class="o">);</span>

    <span class="n">configuration</span><span class="o">.</span><span class="na">setUsername</span><span class="o">(</span><span class="s">"SET_YOUR_USERNAME"</span><span class="o">);</span>
    <span class="n">configuration</span><span class="o">.</span><span class="na">setPassword</span><span class="o">(</span><span class="s">"SET_YOUR_PASSWORD"</span><span class="o">);</span>
    <span class="n">configuration</span><span class="o">.</span><span class="na">setToken</span><span class="o">(</span><span class="s">"SET_YOUR_TOKEN"</span><span class="o">);</span>

    <span class="n">SaleRequest</span> <span class="n">request</span> <span class="o">=</span> <span class="k">new</span> <span class="n">SaleRequest</span><span class="o">();</span>

    <span class="n">request</span><span class="o">.</span><span class="na">set</span><span class="o">...(</span><span class="s">""</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setTravel</span><span class="o">(</span><span class="s">"{"</span><span class="n">ticket</span><span class="s">"=&gt;{"</span><span class="n">ticket_reference_id</span><span class="s">"=&gt;"</span><span class="mi">8</span><span class="n">b7e3575e5605ea7e1895707a3e92837</span><span class="s">"}, "</span><span class="n">charges</span><span class="s">"=&gt;{"</span><span class="n">charge</span><span class="s">"=&gt;{"</span><span class="n">type</span><span class="s">"=&gt;"</span><span class="n">MISC</span><span class="s">"}}}"</span><span class="o">);</span>

    <span class="n">GenesisClient</span> <span class="n">client</span> <span class="o">=</span> <span class="k">new</span> <span class="n">GenesisClient</span><span class="o">(</span><span class="n">configuration</span><span class="o">,</span> <span class="n">request</span><span class="o">);</span>
    <span class="n">client</span><span class="o">.</span><span class="na">execute</span><span class="o">();</span>

    <span class="c1">// Parse Payment result</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">client</span><span class="o">.</span><span class="na">getResponse</span><span class="o">());</span>

  <span class="o">}</span>
<span class="o">}</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="kd">var</span> <span class="nx">genesis</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'genesis.js/lib/genesis.js'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">transaction</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">genesis</span><span class="p">.</span><span class="nx">transaction</span><span class="p">();</span>

<span class="kd">var</span> <span class="nx">failure</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">reason</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">reason</span><span class="p">);</span>
<span class="p">};</span>

<span class="kd">var</span> <span class="nx">success</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>

<span class="nx">transaction</span><span class="p">.</span><span class="nx">sale</span><span class="p">(</span>
  <span class="p">{</span>
    <span class="s2">"..."</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
    <span class="s2">"travel"</span><span class="p">:</span> <span class="p">{</span>
      <span class="s2">"ticket"</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">"ticket_reference_id"</span><span class="p">:</span> <span class="s2">"8b7e3575e5605ea7e1895707a3e92837"</span>
      <span class="p">},</span>
      <span class="s2">"charges"</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">"charge"</span><span class="p">:</span> <span class="p">{</span>
          <span class="s2">"type"</span><span class="p">:</span> <span class="s2">"MISC"</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">).</span><span class="nx">send</span><span class="p">()</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">success</span><span class="p">)</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">failure</span><span class="p">);</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>curl https://username:password@gate.emerchantpay.net/process/TERMINAL-TOKEN <span class="se">\</span>
   -H <span class="s2">"Content-Type: text/xml"</span> <span class="se">\</span>
   -d <span class="s1">'
&lt;payment_transaction&gt;
  &lt;...&gt;&lt;/...&gt;
  &lt;travel&gt;
    &lt;ticket&gt;
      &lt;ticket_reference_id&gt;8b7e3575e5605ea7e1895707a3e92837&lt;/ticket_reference_id&gt;
    &lt;/ticket&gt;
    &lt;charges&gt;
      &lt;charge&gt;
        &lt;type&gt;MISC&lt;/type&gt;
      &lt;/charge&gt;
    &lt;/charges&gt;
  &lt;/travel&gt;
&lt;/payment_transaction&gt;'</span>
</code></pre>

<p><strong>Request Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>travel</strong></td>
<td>required</td>
<td></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;<strong>ticket</strong></td>
<td>required</td>
<td></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ticket_reference_id</td>
<td>required</td>
<td>String(32)</td>
<td>Unique id of the ticket transaction</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;<strong>charges</strong></td>
<td>required</td>
<td></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<strong>charge</strong></td>
<td>required</td>
<td></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type</td>
<td>required</td>
<td>String(4)</td>
<td>This field will contain the Service Category Code for the primary type of service that has been provided. Allowed values: MISC</td>
</tr>
</tbody></table>

<p><code>required* = conditionally required</code></p>

<p><strong>Visa</strong></p>

<p>Contract Merchant Category Code must be 3000-3350 or 4511</p>

<blockquote>
<p>Request</p>
</blockquote>

<pre class="highlight php tab-php"><code><span class="cp">&lt;?php</span>

<span class="c1">// Load the pre-configured ini file...
</span><span class="nx">\Genesis\Config</span><span class="o">::</span><span class="na">loadSettings</span><span class="p">(</span><span class="s1">'/path/to/config.ini'</span><span class="p">);</span>

<span class="nv">$genesis</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Genesis</span><span class="p">(</span><span class="s1">'Financial\Cards\Sale'</span><span class="p">);</span>
<span class="nv">$request</span> <span class="o">=</span> <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">request</span><span class="p">();</span>

<span class="nv">$request</span>
  <span class="o">-&gt;</span><span class="na">set</span><span class="o">...</span><span class="p">(</span><span class="s1">''</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setTravel</span><span class="p">(</span><span class="s1">'{"ticket"=&gt;{"ticket_reference_id"=&gt;"8b7e3575e5605ea7e1895707a3e92837"}, "charges"=&gt;{"charge"=&gt;{"type"=&gt;"MISC"}}}'</span><span class="p">);</span>

<span class="k">try</span> <span class="p">{</span>
    <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">execute</span><span class="p">();</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">response</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">getResponseObject</span><span class="p">();</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">\Exception</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$e</span><span class="o">-&gt;</span><span class="na">getMessage</span><span class="p">();</span>
<span class="p">}</span>
</code></pre>

<pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.GenesisClient</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.TransactionResult</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.constants.Endpoints</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.constants.Environments</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.requests.financial.card.SaleRequest</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.model.Transaction</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Configuration</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Country</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Currency</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">GenesisExample</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">()</span>  <span class="o">{</span>

    <span class="c1">// Create configuration</span>
    <span class="n">Configuration</span> <span class="n">configuration</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Configuration</span><span class="o">(</span><span class="n">Environments</span><span class="o">.</span><span class="na">STAGING</span><span class="o">,</span> <span class="n">Endpoints</span><span class="o">.</span><span class="na">EMERCHANTPAY</span><span class="o">);</span>

    <span class="n">configuration</span><span class="o">.</span><span class="na">setUsername</span><span class="o">(</span><span class="s">"SET_YOUR_USERNAME"</span><span class="o">);</span>
    <span class="n">configuration</span><span class="o">.</span><span class="na">setPassword</span><span class="o">(</span><span class="s">"SET_YOUR_PASSWORD"</span><span class="o">);</span>
    <span class="n">configuration</span><span class="o">.</span><span class="na">setToken</span><span class="o">(</span><span class="s">"SET_YOUR_TOKEN"</span><span class="o">);</span>

    <span class="n">SaleRequest</span> <span class="n">request</span> <span class="o">=</span> <span class="k">new</span> <span class="n">SaleRequest</span><span class="o">();</span>

    <span class="n">request</span><span class="o">.</span><span class="na">set</span><span class="o">...(</span><span class="s">""</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setTravel</span><span class="o">(</span><span class="s">"{"</span><span class="n">ticket</span><span class="s">"=&gt;{"</span><span class="n">ticket_reference_id</span><span class="s">"=&gt;"</span><span class="mi">8</span><span class="n">b7e3575e5605ea7e1895707a3e92837</span><span class="s">"}, "</span><span class="n">charges</span><span class="s">"=&gt;{"</span><span class="n">charge</span><span class="s">"=&gt;{"</span><span class="n">type</span><span class="s">"=&gt;"</span><span class="n">MISC</span><span class="s">"}}}"</span><span class="o">);</span>

    <span class="n">GenesisClient</span> <span class="n">client</span> <span class="o">=</span> <span class="k">new</span> <span class="n">GenesisClient</span><span class="o">(</span><span class="n">configuration</span><span class="o">,</span> <span class="n">request</span><span class="o">);</span>
    <span class="n">client</span><span class="o">.</span><span class="na">execute</span><span class="o">();</span>

    <span class="c1">// Parse Payment result</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">client</span><span class="o">.</span><span class="na">getResponse</span><span class="o">());</span>

  <span class="o">}</span>
<span class="o">}</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="kd">var</span> <span class="nx">genesis</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'genesis.js/lib/genesis.js'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">transaction</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">genesis</span><span class="p">.</span><span class="nx">transaction</span><span class="p">();</span>

<span class="kd">var</span> <span class="nx">failure</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">reason</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">reason</span><span class="p">);</span>
<span class="p">};</span>

<span class="kd">var</span> <span class="nx">success</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>

<span class="nx">transaction</span><span class="p">.</span><span class="nx">sale</span><span class="p">(</span>
  <span class="p">{</span>
    <span class="s2">"..."</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
    <span class="s2">"travel"</span><span class="p">:</span> <span class="p">{</span>
      <span class="s2">"ticket"</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">"ticket_reference_id"</span><span class="p">:</span> <span class="s2">"8b7e3575e5605ea7e1895707a3e92837"</span>
      <span class="p">},</span>
      <span class="s2">"charges"</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">"charge"</span><span class="p">:</span> <span class="p">{</span>
          <span class="s2">"type"</span><span class="p">:</span> <span class="s2">"MISC"</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">).</span><span class="nx">send</span><span class="p">()</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">success</span><span class="p">)</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">failure</span><span class="p">);</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>curl https://username:password@gate.emerchantpay.net/process/TERMINAL-TOKEN <span class="se">\</span>
   -H <span class="s2">"Content-Type: text/xml"</span> <span class="se">\</span>
   -d <span class="s1">'
&lt;payment_transaction&gt;
  &lt;...&gt;&lt;/...&gt;
  &lt;travel&gt;
    &lt;ticket&gt;
      &lt;ticket_reference_id&gt;8b7e3575e5605ea7e1895707a3e92837&lt;/ticket_reference_id&gt;
    &lt;/ticket&gt;
    &lt;charges&gt;
      &lt;charge&gt;
        &lt;type&gt;MISC&lt;/type&gt;
      &lt;/charge&gt;
    &lt;/charges&gt;
  &lt;/travel&gt;
&lt;/payment_transaction&gt;'</span>
</code></pre>

<p><strong>Request Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>travel</strong></td>
<td>required</td>
<td></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;<strong>ticket</strong></td>
<td>required</td>
<td></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ticket_reference_id</td>
<td>required</td>
<td>String(32)</td>
<td>Unique id of the ticket transaction</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;<strong>charges</strong></td>
<td>required</td>
<td></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<strong>charge</strong></td>
<td>required</td>
<td></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type</td>
<td>required</td>
<td>String(4)</td>
<td>This field will contain the Service Category Code for the primary type of service that has been provided. Allowed values: MISC</td>
</tr>
</tbody></table>

<p><code>required* = conditionally required</code></p>
<h2 id='special-cases'>Special Cases</h2><h3 id='travel-authorize-3d-and-capture'>Travel Authorize (3D) and Capture</h3>
<p>The Capture travel data is always merged with the Authorize travel data and overrides the Authorization fields (where they are present in both transactions) before validating. This makes the required travel data for Authorizations optional. This logic is applied for all Travel Types. Because of this, there are 4 scenarios for submitting travel Authorization and Capture.</p>

<p><strong>Travel Authorize (3D) and Travel Capture</strong></p>

<p>In this scenario the Authorize and Capture transaction requests are submitted with valid travel data.
The travel data that will be used for the transaction processing is the data submitted with the Capture.</p>

<blockquote>
<p>Request</p>
</blockquote>

<pre class="highlight php tab-php"><code><span class="cp">&lt;?php</span>

<span class="c1">// Load the pre-configured ini file...
</span><span class="nx">\Genesis\Config</span><span class="o">::</span><span class="na">loadSettings</span><span class="p">(</span><span class="s1">'/path/to/config.ini'</span><span class="p">);</span>

<span class="nv">$genesis</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Genesis</span><span class="p">(</span><span class="s1">'Financial\Cards\Authorize'</span><span class="p">);</span>
<span class="nv">$request</span> <span class="o">=</span> <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">request</span><span class="p">();</span>

<span class="nv">$request</span>
  <span class="o">-&gt;</span><span class="na">setTransactionId</span><span class="p">(</span><span class="s1">'1915c52b28ff29edb12bc617ac102a03'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setRemoteIp</span><span class="p">(</span><span class="s1">'245.253.2.12'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setAmount</span><span class="p">(</span><span class="s1">'100'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCurrency</span><span class="p">(</span><span class="s1">'USD'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCardHolder</span><span class="p">(</span><span class="s1">'Travis Pastrana'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCardNumber</span><span class="p">(</span><span class="s1">'4200000000000000'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCvv</span><span class="p">(</span><span class="s1">'834'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setExpirationMonth</span><span class="p">(</span><span class="s1">'12'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setExpirationYear</span><span class="p">(</span><span class="s1">'2020'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setTravel</span><span class="p">(</span><span class="s1">'{"ticket"=&gt;{"ticket_number"=&gt;12345678123456, "passenger_name"=&gt;"Passenger 01", "customer_code"=&gt;123, "restricted_ticket_indicator"=&gt;0, "agency_name"=&gt;"Agency", "agency_code"=&gt;"AG001"}, "legs"=&gt;[{"departure_date"=&gt;"2017-03-10", "carrier_code"=&gt;"VX", "service_class"=&gt;"J", "origin_city"=&gt;"DUB", "destination_city"=&gt;"ATL", "stopover_code"=&gt;1, "fare_basis_code"=&gt;0, "flight_number"=&gt;""}]}'</span><span class="p">);</span>

<span class="k">try</span> <span class="p">{</span>
    <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">execute</span><span class="p">();</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">response</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">getResponseObject</span><span class="p">();</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">\Exception</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$e</span><span class="o">-&gt;</span><span class="na">getMessage</span><span class="p">();</span>
<span class="p">}</span>
</code></pre>

<pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.GenesisClient</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.TransactionResult</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.constants.Endpoints</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.constants.Environments</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.requests.financial.card.AuthorizeRequest</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.model.Transaction</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Configuration</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Country</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Currency</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.math.BigDecimal</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">GenesisExample</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">()</span>  <span class="o">{</span>

    <span class="c1">// Create configuration</span>
    <span class="n">Configuration</span> <span class="n">configuration</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Configuration</span><span class="o">(</span><span class="n">Environments</span><span class="o">.</span><span class="na">STAGING</span><span class="o">,</span> <span class="n">Endpoints</span><span class="o">.</span><span class="na">EMERCHANTPAY</span><span class="o">);</span>

    <span class="n">configuration</span><span class="o">.</span><span class="na">setUsername</span><span class="o">(</span><span class="s">"SET_YOUR_USERNAME"</span><span class="o">);</span>
    <span class="n">configuration</span><span class="o">.</span><span class="na">setPassword</span><span class="o">(</span><span class="s">"SET_YOUR_PASSWORD"</span><span class="o">);</span>
    <span class="n">configuration</span><span class="o">.</span><span class="na">setToken</span><span class="o">(</span><span class="s">"SET_YOUR_TOKEN"</span><span class="o">);</span>

    <span class="n">AuthorizeRequest</span> <span class="n">request</span> <span class="o">=</span> <span class="k">new</span> <span class="n">AuthorizeRequest</span><span class="o">();</span>

    <span class="n">request</span><span class="o">.</span><span class="na">setTransactionId</span><span class="o">(</span><span class="s">"1915c52b28ff29edb12bc617ac102a03"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setRemoteIp</span><span class="o">(</span><span class="s">"245.253.2.12"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setAmount</span><span class="o">(</span><span class="k">new</span> <span class="n">BigDecimal</span><span class="o">(</span><span class="mi">100</span><span class="o">));</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCurrency</span><span class="o">(</span><span class="s">"USD"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCardHolder</span><span class="o">(</span><span class="s">"Travis Pastrana"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCardNumber</span><span class="o">(</span><span class="s">"4200000000000000"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCvv</span><span class="o">(</span><span class="s">"834"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setExpirationMonth</span><span class="o">(</span><span class="s">"12"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setExpirationYear</span><span class="o">(</span><span class="s">"2020"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setTravel</span><span class="o">(</span><span class="s">"{"</span><span class="n">ticket</span><span class="s">"=&gt;{"</span><span class="n">ticket_number</span><span class="s">"=&gt;12345678123456, "</span><span class="n">passenger_name</span><span class="s">"=&gt;"</span><span class="n">Passenger</span> <span class="mo">01</span><span class="s">", "</span><span class="n">customer_code</span><span class="s">"=&gt;123, "</span><span class="n">restricted_ticket_indicator</span><span class="s">"=&gt;0, "</span><span class="n">agency_name</span><span class="s">"=&gt;"</span><span class="n">Agency</span><span class="s">", "</span><span class="n">agency_code</span><span class="s">"=&gt;"</span><span class="n">AG001</span><span class="s">"}, "</span><span class="n">legs</span><span class="s">"=&gt;[{"</span><span class="n">departure_date</span><span class="s">"=&gt;"</span><span class="mi">2017</span><span class="o">-</span><span class="mo">03</span><span class="o">-</span><span class="mi">10</span><span class="s">", "</span><span class="n">carrier_code</span><span class="s">"=&gt;"</span><span class="n">VX</span><span class="s">", "</span><span class="n">service_class</span><span class="s">"=&gt;"</span><span class="n">J</span><span class="s">", "</span><span class="n">origin_city</span><span class="s">"=&gt;"</span><span class="n">DUB</span><span class="s">", "</span><span class="n">destination_city</span><span class="s">"=&gt;"</span><span class="n">ATL</span><span class="s">", "</span><span class="n">stopover_code</span><span class="s">"=&gt;1, "</span><span class="n">fare_basis_code</span><span class="s">"=&gt;0, "</span><span class="n">flight_number</span><span class="s">"=&gt;""}]}"</span><span class="o">);</span>

    <span class="n">GenesisClient</span> <span class="n">client</span> <span class="o">=</span> <span class="k">new</span> <span class="n">GenesisClient</span><span class="o">(</span><span class="n">configuration</span><span class="o">,</span> <span class="n">request</span><span class="o">);</span>
    <span class="n">client</span><span class="o">.</span><span class="na">execute</span><span class="o">();</span>

    <span class="c1">// Parse Payment result</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">client</span><span class="o">.</span><span class="na">getResponse</span><span class="o">());</span>

  <span class="o">}</span>
<span class="o">}</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="kd">var</span> <span class="nx">genesis</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'genesis.js/lib/genesis.js'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">transaction</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">genesis</span><span class="p">.</span><span class="nx">transaction</span><span class="p">();</span>

<span class="kd">var</span> <span class="nx">failure</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">reason</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">reason</span><span class="p">);</span>
<span class="p">};</span>

<span class="kd">var</span> <span class="nx">success</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>

<span class="nx">transaction</span><span class="p">.</span><span class="nx">authorize</span><span class="p">(</span>
  <span class="p">{</span>
    <span class="s2">"transaction_id"</span><span class="p">:</span> <span class="s2">"1915c52b28ff29edb12bc617ac102a03"</span><span class="p">,</span>
    <span class="s2">"remote_ip"</span><span class="p">:</span> <span class="s2">"245.253.2.12"</span><span class="p">,</span>
    <span class="s2">"amount"</span><span class="p">:</span> <span class="s2">"100"</span><span class="p">,</span>
    <span class="s2">"currency"</span><span class="p">:</span> <span class="s2">"USD"</span><span class="p">,</span>
    <span class="s2">"card_holder"</span><span class="p">:</span> <span class="s2">"Travis Pastrana"</span><span class="p">,</span>
    <span class="s2">"card_number"</span><span class="p">:</span> <span class="s2">"4200000000000000"</span><span class="p">,</span>
    <span class="s2">"cvv"</span><span class="p">:</span> <span class="s2">"834"</span><span class="p">,</span>
    <span class="s2">"expiration_month"</span><span class="p">:</span> <span class="s2">"12"</span><span class="p">,</span>
    <span class="s2">"expiration_year"</span><span class="p">:</span> <span class="mi">2020</span><span class="p">,</span>
    <span class="s2">"travel"</span><span class="p">:</span> <span class="p">{</span>
      <span class="s2">"ticket"</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">"ticket_number"</span><span class="p">:</span> <span class="mi">12345678123456</span><span class="p">,</span>
        <span class="s2">"passenger_name"</span><span class="p">:</span> <span class="s2">"Passenger 01"</span><span class="p">,</span>
        <span class="s2">"customer_code"</span><span class="p">:</span> <span class="mi">123</span><span class="p">,</span>
        <span class="s2">"restricted_ticket_indicator"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="s2">"agency_name"</span><span class="p">:</span> <span class="s2">"Agency"</span><span class="p">,</span>
        <span class="s2">"agency_code"</span><span class="p">:</span> <span class="s2">"AG001"</span>
      <span class="p">},</span>
      <span class="s2">"legs"</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
          <span class="s2">"departure_date"</span><span class="p">:</span> <span class="s2">"2017-03-10"</span><span class="p">,</span>
          <span class="s2">"carrier_code"</span><span class="p">:</span> <span class="s2">"VX"</span><span class="p">,</span>
          <span class="s2">"service_class"</span><span class="p">:</span> <span class="s2">"J"</span><span class="p">,</span>
          <span class="s2">"origin_city"</span><span class="p">:</span> <span class="s2">"DUB"</span><span class="p">,</span>
          <span class="s2">"destination_city"</span><span class="p">:</span> <span class="s2">"ATL"</span><span class="p">,</span>
          <span class="s2">"stopover_code"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
          <span class="s2">"fare_basis_code"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
          <span class="s2">"flight_number"</span><span class="p">:</span> <span class="s2">""</span>
        <span class="p">}</span>
      <span class="p">]</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">).</span><span class="nx">send</span><span class="p">()</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">success</span><span class="p">)</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">failure</span><span class="p">);</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>curl https://username:password@gate.emerchantpay.net/process/TERMINAL-TOKEN <span class="se">\</span>
   -H <span class="s2">"Content-Type: text/xml"</span> <span class="se">\</span>
   -d <span class="s1">'
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;authorize&lt;/transaction_type&gt;
  &lt;transaction_id&gt;1915c52b28ff29edb12bc617ac102a03&lt;/transaction_id&gt;
  &lt;remote_ip&gt;245.253.2.12&lt;/remote_ip&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
  &lt;card_holder&gt;Travis Pastrana&lt;/card_holder&gt;
  &lt;card_number&gt;4200000000000000&lt;/card_number&gt;
  &lt;cvv&gt;834&lt;/cvv&gt;
  &lt;expiration_month&gt;12&lt;/expiration_month&gt;
  &lt;expiration_year&gt;2020&lt;/expiration_year&gt;
  &lt;travel&gt;
    &lt;ticket&gt;
      &lt;ticket_number&gt;12345678123456&lt;/ticket_number&gt;
      &lt;passenger_name&gt;Passenger 01&lt;/passenger_name&gt;
      &lt;customer_code&gt;123&lt;/customer_code&gt;
      &lt;restricted_ticket_indicator&gt;0&lt;/restricted_ticket_indicator&gt;
      &lt;agency_name&gt;Agency&lt;/agency_name&gt;
      &lt;agency_code&gt;AG001&lt;/agency_code&gt;
    &lt;/ticket&gt;
    &lt;legs&gt;
      &lt;leg&gt;
        &lt;departure_date&gt;2017-03-10&lt;/departure_date&gt;
        &lt;carrier_code&gt;VX&lt;/carrier_code&gt;
        &lt;service_class&gt;J&lt;/service_class&gt;
        &lt;origin_city&gt;DUB&lt;/origin_city&gt;
        &lt;destination_city&gt;ATL&lt;/destination_city&gt;
        &lt;stopover_code&gt;1&lt;/stopover_code&gt;
        &lt;fare_basis_code&gt;0&lt;/fare_basis_code&gt;
        &lt;flight_number&gt;&lt;/flight_number&gt;
      &lt;/leg&gt;
    &lt;/legs&gt;
  &lt;/travel&gt;
&lt;/payment_transaction&gt;'</span>
</code></pre>

<blockquote>
<p>Request</p>
</blockquote>

<pre class="highlight php tab-php"><code><span class="cp">&lt;?php</span>

<span class="c1">// Load the pre-configured ini file...
</span><span class="nx">\Genesis\Config</span><span class="o">::</span><span class="na">loadSettings</span><span class="p">(</span><span class="s1">'/path/to/config.ini'</span><span class="p">);</span>

<span class="nv">$genesis</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Genesis</span><span class="p">(</span><span class="s1">'Financial\Capture'</span><span class="p">);</span>
<span class="nv">$request</span> <span class="o">=</span> <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">request</span><span class="p">();</span>

<span class="nv">$request</span>
  <span class="o">-&gt;</span><span class="na">setTransactionId</span><span class="p">(</span><span class="s1">'7fcc6097153beeec1dd1e71f643198d8'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setRemoteIp</span><span class="p">(</span><span class="s1">'245.253.2.12'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setAmount</span><span class="p">(</span><span class="s1">'100'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCurrency</span><span class="p">(</span><span class="s1">'USD'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setReferenceId</span><span class="p">(</span><span class="s1">'1f2ee425e7c3159c60743098071771eb'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setTravel</span><span class="p">(</span><span class="s1">'{"ticket"=&gt;{"ticket_number"=&gt;12345678123456, "passenger_name"=&gt;"Passenger 01", "customer_code"=&gt;"", "restricted_ticket_indicator"=&gt;0, "agency_name"=&gt;"New Agency", "agency_code"=&gt;"AGN001"}, "legs"=&gt;[{"departure_date"=&gt;"2017-03-10", "carrier_code"=&gt;"VX", "service_class"=&gt;"J", "origin_city"=&gt;"DUB", "destination_city"=&gt;"ATL", "stopover_code"=&gt;1, "fare_basis_code"=&gt;0, "flight_number"=&gt;""}]}'</span><span class="p">);</span>

<span class="k">try</span> <span class="p">{</span>
    <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">execute</span><span class="p">();</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">response</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">getResponseObject</span><span class="p">();</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">\Exception</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$e</span><span class="o">-&gt;</span><span class="na">getMessage</span><span class="p">();</span>
<span class="p">}</span>
</code></pre>

<pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.GenesisClient</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.TransactionResult</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.constants.Endpoints</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.constants.Environments</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.requests.financial.CaptureRequest</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.model.Transaction</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Configuration</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Country</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Currency</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.math.BigDecimal</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">GenesisExample</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">()</span>  <span class="o">{</span>

    <span class="c1">// Create configuration</span>
    <span class="n">Configuration</span> <span class="n">configuration</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Configuration</span><span class="o">(</span><span class="n">Environments</span><span class="o">.</span><span class="na">STAGING</span><span class="o">,</span> <span class="n">Endpoints</span><span class="o">.</span><span class="na">EMERCHANTPAY</span><span class="o">);</span>

    <span class="n">configuration</span><span class="o">.</span><span class="na">setUsername</span><span class="o">(</span><span class="s">"SET_YOUR_USERNAME"</span><span class="o">);</span>
    <span class="n">configuration</span><span class="o">.</span><span class="na">setPassword</span><span class="o">(</span><span class="s">"SET_YOUR_PASSWORD"</span><span class="o">);</span>
    <span class="n">configuration</span><span class="o">.</span><span class="na">setToken</span><span class="o">(</span><span class="s">"SET_YOUR_TOKEN"</span><span class="o">);</span>

    <span class="n">CaptureRequest</span> <span class="n">request</span> <span class="o">=</span> <span class="k">new</span> <span class="n">CaptureRequest</span><span class="o">();</span>

    <span class="n">request</span><span class="o">.</span><span class="na">setTransactionId</span><span class="o">(</span><span class="s">"7fcc6097153beeec1dd1e71f643198d8"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setRemoteIp</span><span class="o">(</span><span class="s">"245.253.2.12"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setAmount</span><span class="o">(</span><span class="k">new</span> <span class="n">BigDecimal</span><span class="o">(</span><span class="mi">100</span><span class="o">));</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCurrency</span><span class="o">(</span><span class="s">"USD"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setReferenceId</span><span class="o">(</span><span class="s">"1f2ee425e7c3159c60743098071771eb"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setTravel</span><span class="o">(</span><span class="s">"{"</span><span class="n">ticket</span><span class="s">"=&gt;{"</span><span class="n">ticket_number</span><span class="s">"=&gt;12345678123456, "</span><span class="n">passenger_name</span><span class="s">"=&gt;"</span><span class="n">Passenger</span> <span class="mo">01</span><span class="s">", "</span><span class="n">customer_code</span><span class="s">"=&gt;"", "</span><span class="n">restricted_ticket_indicator</span><span class="s">"=&gt;0, "</span><span class="n">agency_name</span><span class="s">"=&gt;"</span><span class="n">New</span> <span class="n">Agency</span><span class="s">", "</span><span class="n">agency_code</span><span class="s">"=&gt;"</span><span class="n">AGN001</span><span class="s">"}, "</span><span class="n">legs</span><span class="s">"=&gt;[{"</span><span class="n">departure_date</span><span class="s">"=&gt;"</span><span class="mi">2017</span><span class="o">-</span><span class="mo">03</span><span class="o">-</span><span class="mi">10</span><span class="s">", "</span><span class="n">carrier_code</span><span class="s">"=&gt;"</span><span class="n">VX</span><span class="s">", "</span><span class="n">service_class</span><span class="s">"=&gt;"</span><span class="n">J</span><span class="s">", "</span><span class="n">origin_city</span><span class="s">"=&gt;"</span><span class="n">DUB</span><span class="s">", "</span><span class="n">destination_city</span><span class="s">"=&gt;"</span><span class="n">ATL</span><span class="s">", "</span><span class="n">stopover_code</span><span class="s">"=&gt;1, "</span><span class="n">fare_basis_code</span><span class="s">"=&gt;0, "</span><span class="n">flight_number</span><span class="s">"=&gt;""}]}"</span><span class="o">);</span>

    <span class="n">GenesisClient</span> <span class="n">client</span> <span class="o">=</span> <span class="k">new</span> <span class="n">GenesisClient</span><span class="o">(</span><span class="n">configuration</span><span class="o">,</span> <span class="n">request</span><span class="o">);</span>
    <span class="n">client</span><span class="o">.</span><span class="na">execute</span><span class="o">();</span>

    <span class="c1">// Parse Payment result</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">client</span><span class="o">.</span><span class="na">getResponse</span><span class="o">());</span>

  <span class="o">}</span>
<span class="o">}</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="kd">var</span> <span class="nx">genesis</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'genesis.js/lib/genesis.js'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">transaction</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">genesis</span><span class="p">.</span><span class="nx">transaction</span><span class="p">();</span>

<span class="kd">var</span> <span class="nx">failure</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">reason</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">reason</span><span class="p">);</span>
<span class="p">};</span>

<span class="kd">var</span> <span class="nx">success</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>

<span class="nx">transaction</span><span class="p">.</span><span class="nx">capture</span><span class="p">(</span>
  <span class="p">{</span>
    <span class="s2">"transaction_id"</span><span class="p">:</span> <span class="s2">"7fcc6097153beeec1dd1e71f643198d8"</span><span class="p">,</span>
    <span class="s2">"remote_ip"</span><span class="p">:</span> <span class="s2">"245.253.2.12"</span><span class="p">,</span>
    <span class="s2">"amount"</span><span class="p">:</span> <span class="s2">"100"</span><span class="p">,</span>
    <span class="s2">"currency"</span><span class="p">:</span> <span class="s2">"USD"</span><span class="p">,</span>
    <span class="s2">"reference_id"</span><span class="p">:</span> <span class="s2">"1f2ee425e7c3159c60743098071771eb"</span><span class="p">,</span>
    <span class="s2">"travel"</span><span class="p">:</span> <span class="p">{</span>
      <span class="s2">"ticket"</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">"ticket_number"</span><span class="p">:</span> <span class="mi">12345678123456</span><span class="p">,</span>
        <span class="s2">"passenger_name"</span><span class="p">:</span> <span class="s2">"Passenger 01"</span><span class="p">,</span>
        <span class="s2">"customer_code"</span><span class="p">:</span> <span class="s2">""</span><span class="p">,</span>
        <span class="s2">"restricted_ticket_indicator"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="s2">"agency_name"</span><span class="p">:</span> <span class="s2">"New Agency"</span><span class="p">,</span>
        <span class="s2">"agency_code"</span><span class="p">:</span> <span class="s2">"AGN001"</span>
      <span class="p">},</span>
      <span class="s2">"legs"</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
          <span class="s2">"departure_date"</span><span class="p">:</span> <span class="s2">"2017-03-10"</span><span class="p">,</span>
          <span class="s2">"carrier_code"</span><span class="p">:</span> <span class="s2">"VX"</span><span class="p">,</span>
          <span class="s2">"service_class"</span><span class="p">:</span> <span class="s2">"J"</span><span class="p">,</span>
          <span class="s2">"origin_city"</span><span class="p">:</span> <span class="s2">"DUB"</span><span class="p">,</span>
          <span class="s2">"destination_city"</span><span class="p">:</span> <span class="s2">"ATL"</span><span class="p">,</span>
          <span class="s2">"stopover_code"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
          <span class="s2">"fare_basis_code"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
          <span class="s2">"flight_number"</span><span class="p">:</span> <span class="s2">""</span>
        <span class="p">}</span>
      <span class="p">]</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">).</span><span class="nx">send</span><span class="p">()</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">success</span><span class="p">)</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">failure</span><span class="p">);</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>curl https://username:password@gate.emerchantpay.net/process/TERMINAL-TOKEN <span class="se">\</span>
   -H <span class="s2">"Content-Type: text/xml"</span> <span class="se">\</span>
   -d <span class="s1">'
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;capture&lt;/transaction_type&gt;
  &lt;transaction_id&gt;7fcc6097153beeec1dd1e71f643198d8&lt;/transaction_id&gt;
  &lt;remote_ip&gt;245.253.2.12&lt;/remote_ip&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
  &lt;reference_id&gt;1f2ee425e7c3159c60743098071771eb&lt;/reference_id&gt;
  &lt;travel&gt;
    &lt;ticket&gt;
      &lt;ticket_number&gt;12345678123456&lt;/ticket_number&gt;
      &lt;passenger_name&gt;Passenger 01&lt;/passenger_name&gt;
      &lt;customer_code&gt;&lt;/customer_code&gt;
      &lt;restricted_ticket_indicator&gt;0&lt;/restricted_ticket_indicator&gt;
      &lt;agency_name&gt;New Agency&lt;/agency_name&gt;
      &lt;agency_code&gt;AGN001&lt;/agency_code&gt;
    &lt;/ticket&gt;
    &lt;legs&gt;
      &lt;leg&gt;
        &lt;departure_date&gt;2017-03-10&lt;/departure_date&gt;
        &lt;carrier_code&gt;VX&lt;/carrier_code&gt;
        &lt;service_class&gt;J&lt;/service_class&gt;
        &lt;origin_city&gt;DUB&lt;/origin_city&gt;
        &lt;destination_city&gt;ATL&lt;/destination_city&gt;
        &lt;stopover_code&gt;1&lt;/stopover_code&gt;
        &lt;fare_basis_code&gt;0&lt;/fare_basis_code&gt;
        &lt;flight_number&gt;&lt;/flight_number&gt;
      &lt;/leg&gt;
    &lt;/legs&gt;
  &lt;/travel&gt;
&lt;/payment_transaction&gt;'</span>
</code></pre>

<p><strong>Non Travel Authorize (3D) and Travel Capture</strong></p>

<p>In this scenario the Authorize request doesn’t contain the travel data. Valid travel data is submitted in the Capture transaction request. The travel data that will be used for the transaction processing is the data submitted with the Capture.</p>

<blockquote>
<p>Request</p>
</blockquote>

<pre class="highlight php tab-php"><code><span class="cp">&lt;?php</span>

<span class="c1">// Load the pre-configured ini file...
</span><span class="nx">\Genesis\Config</span><span class="o">::</span><span class="na">loadSettings</span><span class="p">(</span><span class="s1">'/path/to/config.ini'</span><span class="p">);</span>

<span class="nv">$genesis</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Genesis</span><span class="p">(</span><span class="s1">'Financial\Cards\Authorize'</span><span class="p">);</span>
<span class="nv">$request</span> <span class="o">=</span> <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">request</span><span class="p">();</span>

<span class="nv">$request</span>
  <span class="o">-&gt;</span><span class="na">setTransactionId</span><span class="p">(</span><span class="s1">'1915c52b28ff29edb12bc617ac102a03'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setRemoteIp</span><span class="p">(</span><span class="s1">'245.253.2.12'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setAmount</span><span class="p">(</span><span class="s1">'100'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCurrency</span><span class="p">(</span><span class="s1">'USD'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCardHolder</span><span class="p">(</span><span class="s1">'Travis Pastrana'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCardNumber</span><span class="p">(</span><span class="s1">'4200000000000000'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCvv</span><span class="p">(</span><span class="s1">'834'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setExpirationMonth</span><span class="p">(</span><span class="s1">'12'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setExpirationYear</span><span class="p">(</span><span class="s1">'2020'</span><span class="p">);</span>

<span class="k">try</span> <span class="p">{</span>
    <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">execute</span><span class="p">();</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">response</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">getResponseObject</span><span class="p">();</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">\Exception</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$e</span><span class="o">-&gt;</span><span class="na">getMessage</span><span class="p">();</span>
<span class="p">}</span>
</code></pre>

<pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.GenesisClient</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.TransactionResult</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.constants.Endpoints</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.constants.Environments</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.requests.financial.card.AuthorizeRequest</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.model.Transaction</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Configuration</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Country</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Currency</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.math.BigDecimal</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">GenesisExample</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">()</span>  <span class="o">{</span>

    <span class="c1">// Create configuration</span>
    <span class="n">Configuration</span> <span class="n">configuration</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Configuration</span><span class="o">(</span><span class="n">Environments</span><span class="o">.</span><span class="na">STAGING</span><span class="o">,</span> <span class="n">Endpoints</span><span class="o">.</span><span class="na">EMERCHANTPAY</span><span class="o">);</span>

    <span class="n">configuration</span><span class="o">.</span><span class="na">setUsername</span><span class="o">(</span><span class="s">"SET_YOUR_USERNAME"</span><span class="o">);</span>
    <span class="n">configuration</span><span class="o">.</span><span class="na">setPassword</span><span class="o">(</span><span class="s">"SET_YOUR_PASSWORD"</span><span class="o">);</span>
    <span class="n">configuration</span><span class="o">.</span><span class="na">setToken</span><span class="o">(</span><span class="s">"SET_YOUR_TOKEN"</span><span class="o">);</span>

    <span class="n">AuthorizeRequest</span> <span class="n">request</span> <span class="o">=</span> <span class="k">new</span> <span class="n">AuthorizeRequest</span><span class="o">();</span>

    <span class="n">request</span><span class="o">.</span><span class="na">setTransactionId</span><span class="o">(</span><span class="s">"1915c52b28ff29edb12bc617ac102a03"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setRemoteIp</span><span class="o">(</span><span class="s">"245.253.2.12"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setAmount</span><span class="o">(</span><span class="k">new</span> <span class="n">BigDecimal</span><span class="o">(</span><span class="mi">100</span><span class="o">));</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCurrency</span><span class="o">(</span><span class="s">"USD"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCardHolder</span><span class="o">(</span><span class="s">"Travis Pastrana"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCardNumber</span><span class="o">(</span><span class="s">"4200000000000000"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCvv</span><span class="o">(</span><span class="s">"834"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setExpirationMonth</span><span class="o">(</span><span class="s">"12"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setExpirationYear</span><span class="o">(</span><span class="s">"2020"</span><span class="o">);</span>

    <span class="n">GenesisClient</span> <span class="n">client</span> <span class="o">=</span> <span class="k">new</span> <span class="n">GenesisClient</span><span class="o">(</span><span class="n">configuration</span><span class="o">,</span> <span class="n">request</span><span class="o">);</span>
    <span class="n">client</span><span class="o">.</span><span class="na">execute</span><span class="o">();</span>

    <span class="c1">// Parse Payment result</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">client</span><span class="o">.</span><span class="na">getResponse</span><span class="o">());</span>

  <span class="o">}</span>
<span class="o">}</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="kd">var</span> <span class="nx">genesis</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'genesis.js/lib/genesis.js'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">transaction</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">genesis</span><span class="p">.</span><span class="nx">transaction</span><span class="p">();</span>

<span class="kd">var</span> <span class="nx">failure</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">reason</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">reason</span><span class="p">);</span>
<span class="p">};</span>

<span class="kd">var</span> <span class="nx">success</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>

<span class="nx">transaction</span><span class="p">.</span><span class="nx">authorize</span><span class="p">(</span>
  <span class="p">{</span>
    <span class="s2">"transaction_id"</span><span class="p">:</span> <span class="s2">"1915c52b28ff29edb12bc617ac102a03"</span><span class="p">,</span>
    <span class="s2">"remote_ip"</span><span class="p">:</span> <span class="s2">"245.253.2.12"</span><span class="p">,</span>
    <span class="s2">"amount"</span><span class="p">:</span> <span class="s2">"100"</span><span class="p">,</span>
    <span class="s2">"currency"</span><span class="p">:</span> <span class="s2">"USD"</span><span class="p">,</span>
    <span class="s2">"card_holder"</span><span class="p">:</span> <span class="s2">"Travis Pastrana"</span><span class="p">,</span>
    <span class="s2">"card_number"</span><span class="p">:</span> <span class="s2">"4200000000000000"</span><span class="p">,</span>
    <span class="s2">"cvv"</span><span class="p">:</span> <span class="s2">"834"</span><span class="p">,</span>
    <span class="s2">"expiration_month"</span><span class="p">:</span> <span class="s2">"12"</span><span class="p">,</span>
    <span class="s2">"expiration_year"</span><span class="p">:</span> <span class="mi">2020</span>
  <span class="p">}</span>
<span class="p">).</span><span class="nx">send</span><span class="p">()</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">success</span><span class="p">)</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">failure</span><span class="p">);</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>curl https://username:password@gate.emerchantpay.net/process/TERMINAL-TOKEN <span class="se">\</span>
   -H <span class="s2">"Content-Type: text/xml"</span> <span class="se">\</span>
   -d <span class="s1">'
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;authorize&lt;/transaction_type&gt;
  &lt;transaction_id&gt;1915c52b28ff29edb12bc617ac102a03&lt;/transaction_id&gt;
  &lt;remote_ip&gt;245.253.2.12&lt;/remote_ip&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
  &lt;card_holder&gt;Travis Pastrana&lt;/card_holder&gt;
  &lt;card_number&gt;4200000000000000&lt;/card_number&gt;
  &lt;cvv&gt;834&lt;/cvv&gt;
  &lt;expiration_month&gt;12&lt;/expiration_month&gt;
  &lt;expiration_year&gt;2020&lt;/expiration_year&gt;
&lt;/payment_transaction&gt;'</span>
</code></pre>

<blockquote>
<p>Request</p>
</blockquote>

<pre class="highlight php tab-php"><code><span class="cp">&lt;?php</span>

<span class="c1">// Load the pre-configured ini file...
</span><span class="nx">\Genesis\Config</span><span class="o">::</span><span class="na">loadSettings</span><span class="p">(</span><span class="s1">'/path/to/config.ini'</span><span class="p">);</span>

<span class="nv">$genesis</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Genesis</span><span class="p">(</span><span class="s1">'Financial\Capture'</span><span class="p">);</span>
<span class="nv">$request</span> <span class="o">=</span> <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">request</span><span class="p">();</span>

<span class="nv">$request</span>
  <span class="o">-&gt;</span><span class="na">setTransactionId</span><span class="p">(</span><span class="s1">'7fcc6097153beeec1dd1e71f643198d8'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setRemoteIp</span><span class="p">(</span><span class="s1">'245.253.2.12'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setAmount</span><span class="p">(</span><span class="s1">'100'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCurrency</span><span class="p">(</span><span class="s1">'USD'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setReferenceId</span><span class="p">(</span><span class="s1">'1f2ee425e7c3159c60743098071771eb'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setTravel</span><span class="p">(</span><span class="s1">'{"ticket"=&gt;{"ticket_number"=&gt;12345678123456, "passenger_name"=&gt;"Passenger 01", "customer_code"=&gt;"", "restricted_ticket_indicator"=&gt;0, "agency_name"=&gt;"New Agency", "agency_code"=&gt;"AGN001"}, "legs"=&gt;[{"departure_date"=&gt;"2017-03-10", "carrier_code"=&gt;"VX", "service_class"=&gt;"J", "origin_city"=&gt;"DUB", "destination_city"=&gt;"ATL", "stopover_code"=&gt;1, "fare_basis_code"=&gt;0, "flight_number"=&gt;""}]}'</span><span class="p">);</span>

<span class="k">try</span> <span class="p">{</span>
    <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">execute</span><span class="p">();</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">response</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">getResponseObject</span><span class="p">();</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">\Exception</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$e</span><span class="o">-&gt;</span><span class="na">getMessage</span><span class="p">();</span>
<span class="p">}</span>
</code></pre>

<pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.GenesisClient</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.TransactionResult</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.constants.Endpoints</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.constants.Environments</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.requests.financial.CaptureRequest</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.model.Transaction</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Configuration</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Country</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Currency</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.math.BigDecimal</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">GenesisExample</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">()</span>  <span class="o">{</span>

    <span class="c1">// Create configuration</span>
    <span class="n">Configuration</span> <span class="n">configuration</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Configuration</span><span class="o">(</span><span class="n">Environments</span><span class="o">.</span><span class="na">STAGING</span><span class="o">,</span> <span class="n">Endpoints</span><span class="o">.</span><span class="na">EMERCHANTPAY</span><span class="o">);</span>

    <span class="n">configuration</span><span class="o">.</span><span class="na">setUsername</span><span class="o">(</span><span class="s">"SET_YOUR_USERNAME"</span><span class="o">);</span>
    <span class="n">configuration</span><span class="o">.</span><span class="na">setPassword</span><span class="o">(</span><span class="s">"SET_YOUR_PASSWORD"</span><span class="o">);</span>
    <span class="n">configuration</span><span class="o">.</span><span class="na">setToken</span><span class="o">(</span><span class="s">"SET_YOUR_TOKEN"</span><span class="o">);</span>

    <span class="n">CaptureRequest</span> <span class="n">request</span> <span class="o">=</span> <span class="k">new</span> <span class="n">CaptureRequest</span><span class="o">();</span>

    <span class="n">request</span><span class="o">.</span><span class="na">setTransactionId</span><span class="o">(</span><span class="s">"7fcc6097153beeec1dd1e71f643198d8"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setRemoteIp</span><span class="o">(</span><span class="s">"245.253.2.12"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setAmount</span><span class="o">(</span><span class="k">new</span> <span class="n">BigDecimal</span><span class="o">(</span><span class="mi">100</span><span class="o">));</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCurrency</span><span class="o">(</span><span class="s">"USD"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setReferenceId</span><span class="o">(</span><span class="s">"1f2ee425e7c3159c60743098071771eb"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setTravel</span><span class="o">(</span><span class="s">"{"</span><span class="n">ticket</span><span class="s">"=&gt;{"</span><span class="n">ticket_number</span><span class="s">"=&gt;12345678123456, "</span><span class="n">passenger_name</span><span class="s">"=&gt;"</span><span class="n">Passenger</span> <span class="mo">01</span><span class="s">", "</span><span class="n">customer_code</span><span class="s">"=&gt;"", "</span><span class="n">restricted_ticket_indicator</span><span class="s">"=&gt;0, "</span><span class="n">agency_name</span><span class="s">"=&gt;"</span><span class="n">New</span> <span class="n">Agency</span><span class="s">", "</span><span class="n">agency_code</span><span class="s">"=&gt;"</span><span class="n">AGN001</span><span class="s">"}, "</span><span class="n">legs</span><span class="s">"=&gt;[{"</span><span class="n">departure_date</span><span class="s">"=&gt;"</span><span class="mi">2017</span><span class="o">-</span><span class="mo">03</span><span class="o">-</span><span class="mi">10</span><span class="s">", "</span><span class="n">carrier_code</span><span class="s">"=&gt;"</span><span class="n">VX</span><span class="s">", "</span><span class="n">service_class</span><span class="s">"=&gt;"</span><span class="n">J</span><span class="s">", "</span><span class="n">origin_city</span><span class="s">"=&gt;"</span><span class="n">DUB</span><span class="s">", "</span><span class="n">destination_city</span><span class="s">"=&gt;"</span><span class="n">ATL</span><span class="s">", "</span><span class="n">stopover_code</span><span class="s">"=&gt;1, "</span><span class="n">fare_basis_code</span><span class="s">"=&gt;0, "</span><span class="n">flight_number</span><span class="s">"=&gt;""}]}"</span><span class="o">);</span>

    <span class="n">GenesisClient</span> <span class="n">client</span> <span class="o">=</span> <span class="k">new</span> <span class="n">GenesisClient</span><span class="o">(</span><span class="n">configuration</span><span class="o">,</span> <span class="n">request</span><span class="o">);</span>
    <span class="n">client</span><span class="o">.</span><span class="na">execute</span><span class="o">();</span>

    <span class="c1">// Parse Payment result</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">client</span><span class="o">.</span><span class="na">getResponse</span><span class="o">());</span>

  <span class="o">}</span>
<span class="o">}</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="kd">var</span> <span class="nx">genesis</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'genesis.js/lib/genesis.js'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">transaction</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">genesis</span><span class="p">.</span><span class="nx">transaction</span><span class="p">();</span>

<span class="kd">var</span> <span class="nx">failure</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">reason</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">reason</span><span class="p">);</span>
<span class="p">};</span>

<span class="kd">var</span> <span class="nx">success</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>

<span class="nx">transaction</span><span class="p">.</span><span class="nx">capture</span><span class="p">(</span>
  <span class="p">{</span>
    <span class="s2">"transaction_id"</span><span class="p">:</span> <span class="s2">"7fcc6097153beeec1dd1e71f643198d8"</span><span class="p">,</span>
    <span class="s2">"remote_ip"</span><span class="p">:</span> <span class="s2">"245.253.2.12"</span><span class="p">,</span>
    <span class="s2">"amount"</span><span class="p">:</span> <span class="s2">"100"</span><span class="p">,</span>
    <span class="s2">"currency"</span><span class="p">:</span> <span class="s2">"USD"</span><span class="p">,</span>
    <span class="s2">"reference_id"</span><span class="p">:</span> <span class="s2">"1f2ee425e7c3159c60743098071771eb"</span><span class="p">,</span>
    <span class="s2">"travel"</span><span class="p">:</span> <span class="p">{</span>
      <span class="s2">"ticket"</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">"ticket_number"</span><span class="p">:</span> <span class="mi">12345678123456</span><span class="p">,</span>
        <span class="s2">"passenger_name"</span><span class="p">:</span> <span class="s2">"Passenger 01"</span><span class="p">,</span>
        <span class="s2">"customer_code"</span><span class="p">:</span> <span class="s2">""</span><span class="p">,</span>
        <span class="s2">"restricted_ticket_indicator"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="s2">"agency_name"</span><span class="p">:</span> <span class="s2">"New Agency"</span><span class="p">,</span>
        <span class="s2">"agency_code"</span><span class="p">:</span> <span class="s2">"AGN001"</span>
      <span class="p">},</span>
      <span class="s2">"legs"</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
          <span class="s2">"departure_date"</span><span class="p">:</span> <span class="s2">"2017-03-10"</span><span class="p">,</span>
          <span class="s2">"carrier_code"</span><span class="p">:</span> <span class="s2">"VX"</span><span class="p">,</span>
          <span class="s2">"service_class"</span><span class="p">:</span> <span class="s2">"J"</span><span class="p">,</span>
          <span class="s2">"origin_city"</span><span class="p">:</span> <span class="s2">"DUB"</span><span class="p">,</span>
          <span class="s2">"destination_city"</span><span class="p">:</span> <span class="s2">"ATL"</span><span class="p">,</span>
          <span class="s2">"stopover_code"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
          <span class="s2">"fare_basis_code"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
          <span class="s2">"flight_number"</span><span class="p">:</span> <span class="s2">""</span>
        <span class="p">}</span>
      <span class="p">]</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">).</span><span class="nx">send</span><span class="p">()</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">success</span><span class="p">)</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">failure</span><span class="p">);</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>curl https://username:password@gate.emerchantpay.net/process/TERMINAL-TOKEN <span class="se">\</span>
   -H <span class="s2">"Content-Type: text/xml"</span> <span class="se">\</span>
   -d <span class="s1">'
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;capture&lt;/transaction_type&gt;
  &lt;transaction_id&gt;7fcc6097153beeec1dd1e71f643198d8&lt;/transaction_id&gt;
  &lt;remote_ip&gt;245.253.2.12&lt;/remote_ip&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
  &lt;reference_id&gt;1f2ee425e7c3159c60743098071771eb&lt;/reference_id&gt;
  &lt;travel&gt;
    &lt;ticket&gt;
      &lt;ticket_number&gt;12345678123456&lt;/ticket_number&gt;
      &lt;passenger_name&gt;Passenger 01&lt;/passenger_name&gt;
      &lt;customer_code&gt;&lt;/customer_code&gt;
      &lt;restricted_ticket_indicator&gt;0&lt;/restricted_ticket_indicator&gt;
      &lt;agency_name&gt;New Agency&lt;/agency_name&gt;
      &lt;agency_code&gt;AGN001&lt;/agency_code&gt;
    &lt;/ticket&gt;
    &lt;legs&gt;
      &lt;leg&gt;
        &lt;departure_date&gt;2017-03-10&lt;/departure_date&gt;
        &lt;carrier_code&gt;VX&lt;/carrier_code&gt;
        &lt;service_class&gt;J&lt;/service_class&gt;
        &lt;origin_city&gt;DUB&lt;/origin_city&gt;
        &lt;destination_city&gt;ATL&lt;/destination_city&gt;
        &lt;stopover_code&gt;1&lt;/stopover_code&gt;
        &lt;fare_basis_code&gt;0&lt;/fare_basis_code&gt;
        &lt;flight_number&gt;&lt;/flight_number&gt;
      &lt;/leg&gt;
    &lt;/legs&gt;
  &lt;/travel&gt;
&lt;/payment_transaction&gt;'</span>
</code></pre>

<p><strong>Travel Authorize (3D) and Non Travel Capture</strong></p>

<p>In this scenario the Authorize request contains valid travel data. Travel data isn’t submitted in the Capture transaction request. In this case the Capture transaction will inherit the travel data from the Authorize transaction. The travel data that will be used for the transaction processing is the data submitted with the Authorize.</p>

<blockquote>
<p>Request</p>
</blockquote>

<pre class="highlight php tab-php"><code><span class="cp">&lt;?php</span>

<span class="c1">// Load the pre-configured ini file...
</span><span class="nx">\Genesis\Config</span><span class="o">::</span><span class="na">loadSettings</span><span class="p">(</span><span class="s1">'/path/to/config.ini'</span><span class="p">);</span>

<span class="nv">$genesis</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Genesis</span><span class="p">(</span><span class="s1">'Financial\Cards\Authorize'</span><span class="p">);</span>
<span class="nv">$request</span> <span class="o">=</span> <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">request</span><span class="p">();</span>

<span class="nv">$request</span>
  <span class="o">-&gt;</span><span class="na">setTransactionId</span><span class="p">(</span><span class="s1">'1915c52b28ff29edb12bc617ac102a03'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setRemoteIp</span><span class="p">(</span><span class="s1">'245.253.2.12'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setAmount</span><span class="p">(</span><span class="s1">'100'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCurrency</span><span class="p">(</span><span class="s1">'USD'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCardHolder</span><span class="p">(</span><span class="s1">'Travis Pastrana'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCardNumber</span><span class="p">(</span><span class="s1">'4200000000000000'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCvv</span><span class="p">(</span><span class="s1">'834'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setExpirationMonth</span><span class="p">(</span><span class="s1">'12'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setExpirationYear</span><span class="p">(</span><span class="s1">'2020'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setTravel</span><span class="p">(</span><span class="s1">'{"ticket"=&gt;{"ticket_number"=&gt;12345678123456, "passenger_name"=&gt;"Passenger 01", "customer_code"=&gt;123, "restricted_ticket_indicator"=&gt;0, "agency_name"=&gt;"Agency", "agency_code"=&gt;"AG001"}, "legs"=&gt;[{"departure_date"=&gt;"2017-03-10", "carrier_code"=&gt;"VX", "service_class"=&gt;"J", "origin_city"=&gt;"DUB", "destination_city"=&gt;"ATL", "stopover_code"=&gt;1, "fare_basis_code"=&gt;0, "flight_number"=&gt;""}]}'</span><span class="p">);</span>

<span class="k">try</span> <span class="p">{</span>
    <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">execute</span><span class="p">();</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">response</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">getResponseObject</span><span class="p">();</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">\Exception</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$e</span><span class="o">-&gt;</span><span class="na">getMessage</span><span class="p">();</span>
<span class="p">}</span>
</code></pre>

<pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.GenesisClient</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.TransactionResult</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.constants.Endpoints</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.constants.Environments</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.requests.financial.card.AuthorizeRequest</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.model.Transaction</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Configuration</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Country</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Currency</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.math.BigDecimal</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">GenesisExample</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">()</span>  <span class="o">{</span>

    <span class="c1">// Create configuration</span>
    <span class="n">Configuration</span> <span class="n">configuration</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Configuration</span><span class="o">(</span><span class="n">Environments</span><span class="o">.</span><span class="na">STAGING</span><span class="o">,</span> <span class="n">Endpoints</span><span class="o">.</span><span class="na">EMERCHANTPAY</span><span class="o">);</span>

    <span class="n">configuration</span><span class="o">.</span><span class="na">setUsername</span><span class="o">(</span><span class="s">"SET_YOUR_USERNAME"</span><span class="o">);</span>
    <span class="n">configuration</span><span class="o">.</span><span class="na">setPassword</span><span class="o">(</span><span class="s">"SET_YOUR_PASSWORD"</span><span class="o">);</span>
    <span class="n">configuration</span><span class="o">.</span><span class="na">setToken</span><span class="o">(</span><span class="s">"SET_YOUR_TOKEN"</span><span class="o">);</span>

    <span class="n">AuthorizeRequest</span> <span class="n">request</span> <span class="o">=</span> <span class="k">new</span> <span class="n">AuthorizeRequest</span><span class="o">();</span>

    <span class="n">request</span><span class="o">.</span><span class="na">setTransactionId</span><span class="o">(</span><span class="s">"1915c52b28ff29edb12bc617ac102a03"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setRemoteIp</span><span class="o">(</span><span class="s">"245.253.2.12"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setAmount</span><span class="o">(</span><span class="k">new</span> <span class="n">BigDecimal</span><span class="o">(</span><span class="mi">100</span><span class="o">));</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCurrency</span><span class="o">(</span><span class="s">"USD"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCardHolder</span><span class="o">(</span><span class="s">"Travis Pastrana"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCardNumber</span><span class="o">(</span><span class="s">"4200000000000000"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCvv</span><span class="o">(</span><span class="s">"834"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setExpirationMonth</span><span class="o">(</span><span class="s">"12"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setExpirationYear</span><span class="o">(</span><span class="s">"2020"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setTravel</span><span class="o">(</span><span class="s">"{"</span><span class="n">ticket</span><span class="s">"=&gt;{"</span><span class="n">ticket_number</span><span class="s">"=&gt;12345678123456, "</span><span class="n">passenger_name</span><span class="s">"=&gt;"</span><span class="n">Passenger</span> <span class="mo">01</span><span class="s">", "</span><span class="n">customer_code</span><span class="s">"=&gt;123, "</span><span class="n">restricted_ticket_indicator</span><span class="s">"=&gt;0, "</span><span class="n">agency_name</span><span class="s">"=&gt;"</span><span class="n">Agency</span><span class="s">", "</span><span class="n">agency_code</span><span class="s">"=&gt;"</span><span class="n">AG001</span><span class="s">"}, "</span><span class="n">legs</span><span class="s">"=&gt;[{"</span><span class="n">departure_date</span><span class="s">"=&gt;"</span><span class="mi">2017</span><span class="o">-</span><span class="mo">03</span><span class="o">-</span><span class="mi">10</span><span class="s">", "</span><span class="n">carrier_code</span><span class="s">"=&gt;"</span><span class="n">VX</span><span class="s">", "</span><span class="n">service_class</span><span class="s">"=&gt;"</span><span class="n">J</span><span class="s">", "</span><span class="n">origin_city</span><span class="s">"=&gt;"</span><span class="n">DUB</span><span class="s">", "</span><span class="n">destination_city</span><span class="s">"=&gt;"</span><span class="n">ATL</span><span class="s">", "</span><span class="n">stopover_code</span><span class="s">"=&gt;1, "</span><span class="n">fare_basis_code</span><span class="s">"=&gt;0, "</span><span class="n">flight_number</span><span class="s">"=&gt;""}]}"</span><span class="o">);</span>

    <span class="n">GenesisClient</span> <span class="n">client</span> <span class="o">=</span> <span class="k">new</span> <span class="n">GenesisClient</span><span class="o">(</span><span class="n">configuration</span><span class="o">,</span> <span class="n">request</span><span class="o">);</span>
    <span class="n">client</span><span class="o">.</span><span class="na">execute</span><span class="o">();</span>

    <span class="c1">// Parse Payment result</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">client</span><span class="o">.</span><span class="na">getResponse</span><span class="o">());</span>

  <span class="o">}</span>
<span class="o">}</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="kd">var</span> <span class="nx">genesis</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'genesis.js/lib/genesis.js'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">transaction</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">genesis</span><span class="p">.</span><span class="nx">transaction</span><span class="p">();</span>

<span class="kd">var</span> <span class="nx">failure</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">reason</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">reason</span><span class="p">);</span>
<span class="p">};</span>

<span class="kd">var</span> <span class="nx">success</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>

<span class="nx">transaction</span><span class="p">.</span><span class="nx">authorize</span><span class="p">(</span>
  <span class="p">{</span>
    <span class="s2">"transaction_id"</span><span class="p">:</span> <span class="s2">"1915c52b28ff29edb12bc617ac102a03"</span><span class="p">,</span>
    <span class="s2">"remote_ip"</span><span class="p">:</span> <span class="s2">"245.253.2.12"</span><span class="p">,</span>
    <span class="s2">"amount"</span><span class="p">:</span> <span class="s2">"100"</span><span class="p">,</span>
    <span class="s2">"currency"</span><span class="p">:</span> <span class="s2">"USD"</span><span class="p">,</span>
    <span class="s2">"card_holder"</span><span class="p">:</span> <span class="s2">"Travis Pastrana"</span><span class="p">,</span>
    <span class="s2">"card_number"</span><span class="p">:</span> <span class="s2">"4200000000000000"</span><span class="p">,</span>
    <span class="s2">"cvv"</span><span class="p">:</span> <span class="s2">"834"</span><span class="p">,</span>
    <span class="s2">"expiration_month"</span><span class="p">:</span> <span class="s2">"12"</span><span class="p">,</span>
    <span class="s2">"expiration_year"</span><span class="p">:</span> <span class="mi">2020</span><span class="p">,</span>
    <span class="s2">"travel"</span><span class="p">:</span> <span class="p">{</span>
      <span class="s2">"ticket"</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">"ticket_number"</span><span class="p">:</span> <span class="mi">12345678123456</span><span class="p">,</span>
        <span class="s2">"passenger_name"</span><span class="p">:</span> <span class="s2">"Passenger 01"</span><span class="p">,</span>
        <span class="s2">"customer_code"</span><span class="p">:</span> <span class="mi">123</span><span class="p">,</span>
        <span class="s2">"restricted_ticket_indicator"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="s2">"agency_name"</span><span class="p">:</span> <span class="s2">"Agency"</span><span class="p">,</span>
        <span class="s2">"agency_code"</span><span class="p">:</span> <span class="s2">"AG001"</span>
      <span class="p">},</span>
      <span class="s2">"legs"</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
          <span class="s2">"departure_date"</span><span class="p">:</span> <span class="s2">"2017-03-10"</span><span class="p">,</span>
          <span class="s2">"carrier_code"</span><span class="p">:</span> <span class="s2">"VX"</span><span class="p">,</span>
          <span class="s2">"service_class"</span><span class="p">:</span> <span class="s2">"J"</span><span class="p">,</span>
          <span class="s2">"origin_city"</span><span class="p">:</span> <span class="s2">"DUB"</span><span class="p">,</span>
          <span class="s2">"destination_city"</span><span class="p">:</span> <span class="s2">"ATL"</span><span class="p">,</span>
          <span class="s2">"stopover_code"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
          <span class="s2">"fare_basis_code"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
          <span class="s2">"flight_number"</span><span class="p">:</span> <span class="s2">""</span>
        <span class="p">}</span>
      <span class="p">]</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">).</span><span class="nx">send</span><span class="p">()</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">success</span><span class="p">)</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">failure</span><span class="p">);</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>curl https://username:password@gate.emerchantpay.net/process/TERMINAL-TOKEN <span class="se">\</span>
   -H <span class="s2">"Content-Type: text/xml"</span> <span class="se">\</span>
   -d <span class="s1">'
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;authorize&lt;/transaction_type&gt;
  &lt;transaction_id&gt;1915c52b28ff29edb12bc617ac102a03&lt;/transaction_id&gt;
  &lt;remote_ip&gt;245.253.2.12&lt;/remote_ip&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
  &lt;card_holder&gt;Travis Pastrana&lt;/card_holder&gt;
  &lt;card_number&gt;4200000000000000&lt;/card_number&gt;
  &lt;cvv&gt;834&lt;/cvv&gt;
  &lt;expiration_month&gt;12&lt;/expiration_month&gt;
  &lt;expiration_year&gt;2020&lt;/expiration_year&gt;
  &lt;travel&gt;
    &lt;ticket&gt;
      &lt;ticket_number&gt;12345678123456&lt;/ticket_number&gt;
      &lt;passenger_name&gt;Passenger 01&lt;/passenger_name&gt;
      &lt;customer_code&gt;123&lt;/customer_code&gt;
      &lt;restricted_ticket_indicator&gt;0&lt;/restricted_ticket_indicator&gt;
      &lt;agency_name&gt;Agency&lt;/agency_name&gt;
      &lt;agency_code&gt;AG001&lt;/agency_code&gt;
    &lt;/ticket&gt;
    &lt;legs&gt;
      &lt;leg&gt;
        &lt;departure_date&gt;2017-03-10&lt;/departure_date&gt;
        &lt;carrier_code&gt;VX&lt;/carrier_code&gt;
        &lt;service_class&gt;J&lt;/service_class&gt;
        &lt;origin_city&gt;DUB&lt;/origin_city&gt;
        &lt;destination_city&gt;ATL&lt;/destination_city&gt;
        &lt;stopover_code&gt;1&lt;/stopover_code&gt;
        &lt;fare_basis_code&gt;0&lt;/fare_basis_code&gt;
        &lt;flight_number&gt;&lt;/flight_number&gt;
      &lt;/leg&gt;
    &lt;/legs&gt;
  &lt;/travel&gt;
&lt;/payment_transaction&gt;'</span>
</code></pre>

<blockquote>
<p>Request</p>
</blockquote>

<pre class="highlight php tab-php"><code><span class="cp">&lt;?php</span>

<span class="c1">// Load the pre-configured ini file...
</span><span class="nx">\Genesis\Config</span><span class="o">::</span><span class="na">loadSettings</span><span class="p">(</span><span class="s1">'/path/to/config.ini'</span><span class="p">);</span>

<span class="nv">$genesis</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Genesis</span><span class="p">(</span><span class="s1">'Financial\Capture'</span><span class="p">);</span>
<span class="nv">$request</span> <span class="o">=</span> <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">request</span><span class="p">();</span>

<span class="nv">$request</span>
  <span class="o">-&gt;</span><span class="na">setTransactionId</span><span class="p">(</span><span class="s1">'7fcc6097153beeec1dd1e71f643198d8'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setRemoteIp</span><span class="p">(</span><span class="s1">'245.253.2.12'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setAmount</span><span class="p">(</span><span class="s1">'100'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCurrency</span><span class="p">(</span><span class="s1">'USD'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setReferenceId</span><span class="p">(</span><span class="s1">'1f2ee425e7c3159c60743098071771eb'</span><span class="p">);</span>

<span class="k">try</span> <span class="p">{</span>
    <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">execute</span><span class="p">();</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">response</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">getResponseObject</span><span class="p">();</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">\Exception</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$e</span><span class="o">-&gt;</span><span class="na">getMessage</span><span class="p">();</span>
<span class="p">}</span>
</code></pre>

<pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.GenesisClient</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.TransactionResult</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.constants.Endpoints</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.constants.Environments</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.requests.financial.CaptureRequest</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.model.Transaction</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Configuration</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Country</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Currency</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.math.BigDecimal</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">GenesisExample</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">()</span>  <span class="o">{</span>

    <span class="c1">// Create configuration</span>
    <span class="n">Configuration</span> <span class="n">configuration</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Configuration</span><span class="o">(</span><span class="n">Environments</span><span class="o">.</span><span class="na">STAGING</span><span class="o">,</span> <span class="n">Endpoints</span><span class="o">.</span><span class="na">EMERCHANTPAY</span><span class="o">);</span>

    <span class="n">configuration</span><span class="o">.</span><span class="na">setUsername</span><span class="o">(</span><span class="s">"SET_YOUR_USERNAME"</span><span class="o">);</span>
    <span class="n">configuration</span><span class="o">.</span><span class="na">setPassword</span><span class="o">(</span><span class="s">"SET_YOUR_PASSWORD"</span><span class="o">);</span>
    <span class="n">configuration</span><span class="o">.</span><span class="na">setToken</span><span class="o">(</span><span class="s">"SET_YOUR_TOKEN"</span><span class="o">);</span>

    <span class="n">CaptureRequest</span> <span class="n">request</span> <span class="o">=</span> <span class="k">new</span> <span class="n">CaptureRequest</span><span class="o">();</span>

    <span class="n">request</span><span class="o">.</span><span class="na">setTransactionId</span><span class="o">(</span><span class="s">"7fcc6097153beeec1dd1e71f643198d8"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setRemoteIp</span><span class="o">(</span><span class="s">"245.253.2.12"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setAmount</span><span class="o">(</span><span class="k">new</span> <span class="n">BigDecimal</span><span class="o">(</span><span class="mi">100</span><span class="o">));</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCurrency</span><span class="o">(</span><span class="s">"USD"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setReferenceId</span><span class="o">(</span><span class="s">"1f2ee425e7c3159c60743098071771eb"</span><span class="o">);</span>

    <span class="n">GenesisClient</span> <span class="n">client</span> <span class="o">=</span> <span class="k">new</span> <span class="n">GenesisClient</span><span class="o">(</span><span class="n">configuration</span><span class="o">,</span> <span class="n">request</span><span class="o">);</span>
    <span class="n">client</span><span class="o">.</span><span class="na">execute</span><span class="o">();</span>

    <span class="c1">// Parse Payment result</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">client</span><span class="o">.</span><span class="na">getResponse</span><span class="o">());</span>

  <span class="o">}</span>
<span class="o">}</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="kd">var</span> <span class="nx">genesis</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'genesis.js/lib/genesis.js'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">transaction</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">genesis</span><span class="p">.</span><span class="nx">transaction</span><span class="p">();</span>

<span class="kd">var</span> <span class="nx">failure</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">reason</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">reason</span><span class="p">);</span>
<span class="p">};</span>

<span class="kd">var</span> <span class="nx">success</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>

<span class="nx">transaction</span><span class="p">.</span><span class="nx">capture</span><span class="p">(</span>
  <span class="p">{</span>
    <span class="s2">"transaction_id"</span><span class="p">:</span> <span class="s2">"7fcc6097153beeec1dd1e71f643198d8"</span><span class="p">,</span>
    <span class="s2">"remote_ip"</span><span class="p">:</span> <span class="s2">"245.253.2.12"</span><span class="p">,</span>
    <span class="s2">"amount"</span><span class="p">:</span> <span class="s2">"100"</span><span class="p">,</span>
    <span class="s2">"currency"</span><span class="p">:</span> <span class="s2">"USD"</span><span class="p">,</span>
    <span class="s2">"reference_id"</span><span class="p">:</span> <span class="s2">"1f2ee425e7c3159c60743098071771eb"</span>
  <span class="p">}</span>
<span class="p">).</span><span class="nx">send</span><span class="p">()</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">success</span><span class="p">)</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">failure</span><span class="p">);</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>curl https://username:password@gate.emerchantpay.net/process/TERMINAL-TOKEN <span class="se">\</span>
   -H <span class="s2">"Content-Type: text/xml"</span> <span class="se">\</span>
   -d <span class="s1">'
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;capture&lt;/transaction_type&gt;
  &lt;transaction_id&gt;7fcc6097153beeec1dd1e71f643198d8&lt;/transaction_id&gt;
  &lt;remote_ip&gt;245.253.2.12&lt;/remote_ip&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
  &lt;reference_id&gt;1f2ee425e7c3159c60743098071771eb&lt;/reference_id&gt;
&lt;/payment_transaction&gt;'</span>
</code></pre>

<p><strong>Partial Travel Authorize (3D) and Partial Travel Capture</strong></p>

<p>In this scenario the Authorize request contains only part of the travel data. The Capture transaction request contains also part of the travel data. The travel data from the Authorize will be merged with the Capture travel data. The Capture travel data will complete/override the travel fields in the Authorize. This merged data will be stored as Capture travel data. If the merged data is valid travel data then the transaction will be processed as travel using the travel data stored in the Capture. Otherwise the transaction will be processed as a regular Capture transaction.</p>

<blockquote>
<p>Request</p>
</blockquote>

<pre class="highlight php tab-php"><code><span class="cp">&lt;?php</span>

<span class="c1">// Load the pre-configured ini file...
</span><span class="nx">\Genesis\Config</span><span class="o">::</span><span class="na">loadSettings</span><span class="p">(</span><span class="s1">'/path/to/config.ini'</span><span class="p">);</span>

<span class="nv">$genesis</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Genesis</span><span class="p">(</span><span class="s1">'Financial\Cards\Authorize'</span><span class="p">);</span>
<span class="nv">$request</span> <span class="o">=</span> <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">request</span><span class="p">();</span>

<span class="nv">$request</span>
  <span class="o">-&gt;</span><span class="na">setTransactionId</span><span class="p">(</span><span class="s1">'1915c52b28ff29edb12bc617ac102a03'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setRemoteIp</span><span class="p">(</span><span class="s1">'245.253.2.12'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setAmount</span><span class="p">(</span><span class="s1">'100'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCurrency</span><span class="p">(</span><span class="s1">'USD'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCardHolder</span><span class="p">(</span><span class="s1">'Travis Pastrana'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCardNumber</span><span class="p">(</span><span class="s1">'4200000000000000'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCvv</span><span class="p">(</span><span class="s1">'834'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setExpirationMonth</span><span class="p">(</span><span class="s1">'12'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setExpirationYear</span><span class="p">(</span><span class="s1">'2020'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setTravel</span><span class="p">(</span><span class="s1">'{"ticket"=&gt;{}, "legs"=&gt;[{"departure_date"=&gt;"2017-03-10", "carrier_code"=&gt;"VX", "service_class"=&gt;"J", "origin_city"=&gt;"DUB", "destination_city"=&gt;"ATL", "stopover_code"=&gt;1, "fare_basis_code"=&gt;0, "flight_number"=&gt;""}]}'</span><span class="p">);</span>

<span class="k">try</span> <span class="p">{</span>
    <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">execute</span><span class="p">();</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">response</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">getResponseObject</span><span class="p">();</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">\Exception</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$e</span><span class="o">-&gt;</span><span class="na">getMessage</span><span class="p">();</span>
<span class="p">}</span>
</code></pre>

<pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.GenesisClient</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.TransactionResult</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.constants.Endpoints</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.constants.Environments</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.requests.financial.card.AuthorizeRequest</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.model.Transaction</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Configuration</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Country</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Currency</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.math.BigDecimal</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">GenesisExample</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">()</span>  <span class="o">{</span>

    <span class="c1">// Create configuration</span>
    <span class="n">Configuration</span> <span class="n">configuration</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Configuration</span><span class="o">(</span><span class="n">Environments</span><span class="o">.</span><span class="na">STAGING</span><span class="o">,</span> <span class="n">Endpoints</span><span class="o">.</span><span class="na">EMERCHANTPAY</span><span class="o">);</span>

    <span class="n">configuration</span><span class="o">.</span><span class="na">setUsername</span><span class="o">(</span><span class="s">"SET_YOUR_USERNAME"</span><span class="o">);</span>
    <span class="n">configuration</span><span class="o">.</span><span class="na">setPassword</span><span class="o">(</span><span class="s">"SET_YOUR_PASSWORD"</span><span class="o">);</span>
    <span class="n">configuration</span><span class="o">.</span><span class="na">setToken</span><span class="o">(</span><span class="s">"SET_YOUR_TOKEN"</span><span class="o">);</span>

    <span class="n">AuthorizeRequest</span> <span class="n">request</span> <span class="o">=</span> <span class="k">new</span> <span class="n">AuthorizeRequest</span><span class="o">();</span>

    <span class="n">request</span><span class="o">.</span><span class="na">setTransactionId</span><span class="o">(</span><span class="s">"1915c52b28ff29edb12bc617ac102a03"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setRemoteIp</span><span class="o">(</span><span class="s">"245.253.2.12"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setAmount</span><span class="o">(</span><span class="k">new</span> <span class="n">BigDecimal</span><span class="o">(</span><span class="mi">100</span><span class="o">));</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCurrency</span><span class="o">(</span><span class="s">"USD"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCardHolder</span><span class="o">(</span><span class="s">"Travis Pastrana"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCardNumber</span><span class="o">(</span><span class="s">"4200000000000000"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCvv</span><span class="o">(</span><span class="s">"834"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setExpirationMonth</span><span class="o">(</span><span class="s">"12"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setExpirationYear</span><span class="o">(</span><span class="s">"2020"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setTravel</span><span class="o">(</span><span class="s">"{"</span><span class="n">ticket</span><span class="s">"=&gt;{}, "</span><span class="n">legs</span><span class="s">"=&gt;[{"</span><span class="n">departure_date</span><span class="s">"=&gt;"</span><span class="mi">2017</span><span class="o">-</span><span class="mo">03</span><span class="o">-</span><span class="mi">10</span><span class="s">", "</span><span class="n">carrier_code</span><span class="s">"=&gt;"</span><span class="n">VX</span><span class="s">", "</span><span class="n">service_class</span><span class="s">"=&gt;"</span><span class="n">J</span><span class="s">", "</span><span class="n">origin_city</span><span class="s">"=&gt;"</span><span class="n">DUB</span><span class="s">", "</span><span class="n">destination_city</span><span class="s">"=&gt;"</span><span class="n">ATL</span><span class="s">", "</span><span class="n">stopover_code</span><span class="s">"=&gt;1, "</span><span class="n">fare_basis_code</span><span class="s">"=&gt;0, "</span><span class="n">flight_number</span><span class="s">"=&gt;""}]}"</span><span class="o">);</span>

    <span class="n">GenesisClient</span> <span class="n">client</span> <span class="o">=</span> <span class="k">new</span> <span class="n">GenesisClient</span><span class="o">(</span><span class="n">configuration</span><span class="o">,</span> <span class="n">request</span><span class="o">);</span>
    <span class="n">client</span><span class="o">.</span><span class="na">execute</span><span class="o">();</span>

    <span class="c1">// Parse Payment result</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">client</span><span class="o">.</span><span class="na">getResponse</span><span class="o">());</span>

  <span class="o">}</span>
<span class="o">}</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="kd">var</span> <span class="nx">genesis</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'genesis.js/lib/genesis.js'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">transaction</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">genesis</span><span class="p">.</span><span class="nx">transaction</span><span class="p">();</span>

<span class="kd">var</span> <span class="nx">failure</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">reason</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">reason</span><span class="p">);</span>
<span class="p">};</span>

<span class="kd">var</span> <span class="nx">success</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>

<span class="nx">transaction</span><span class="p">.</span><span class="nx">authorize</span><span class="p">(</span>
  <span class="p">{</span>
    <span class="s2">"transaction_id"</span><span class="p">:</span> <span class="s2">"1915c52b28ff29edb12bc617ac102a03"</span><span class="p">,</span>
    <span class="s2">"remote_ip"</span><span class="p">:</span> <span class="s2">"245.253.2.12"</span><span class="p">,</span>
    <span class="s2">"amount"</span><span class="p">:</span> <span class="s2">"100"</span><span class="p">,</span>
    <span class="s2">"currency"</span><span class="p">:</span> <span class="s2">"USD"</span><span class="p">,</span>
    <span class="s2">"card_holder"</span><span class="p">:</span> <span class="s2">"Travis Pastrana"</span><span class="p">,</span>
    <span class="s2">"card_number"</span><span class="p">:</span> <span class="s2">"4200000000000000"</span><span class="p">,</span>
    <span class="s2">"cvv"</span><span class="p">:</span> <span class="s2">"834"</span><span class="p">,</span>
    <span class="s2">"expiration_month"</span><span class="p">:</span> <span class="s2">"12"</span><span class="p">,</span>
    <span class="s2">"expiration_year"</span><span class="p">:</span> <span class="mi">2020</span><span class="p">,</span>
    <span class="s2">"travel"</span><span class="p">:</span> <span class="p">{</span>
      <span class="s2">"ticket"</span><span class="p">:</span> <span class="p">{</span>
      <span class="p">},</span>
      <span class="s2">"legs"</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
          <span class="s2">"departure_date"</span><span class="p">:</span> <span class="s2">"2017-03-10"</span><span class="p">,</span>
          <span class="s2">"carrier_code"</span><span class="p">:</span> <span class="s2">"VX"</span><span class="p">,</span>
          <span class="s2">"service_class"</span><span class="p">:</span> <span class="s2">"J"</span><span class="p">,</span>
          <span class="s2">"origin_city"</span><span class="p">:</span> <span class="s2">"DUB"</span><span class="p">,</span>
          <span class="s2">"destination_city"</span><span class="p">:</span> <span class="s2">"ATL"</span><span class="p">,</span>
          <span class="s2">"stopover_code"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
          <span class="s2">"fare_basis_code"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
          <span class="s2">"flight_number"</span><span class="p">:</span> <span class="s2">""</span>
        <span class="p">}</span>
      <span class="p">]</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">).</span><span class="nx">send</span><span class="p">()</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">success</span><span class="p">)</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">failure</span><span class="p">);</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>curl https://username:password@gate.emerchantpay.net/process/TERMINAL-TOKEN <span class="se">\</span>
   -H <span class="s2">"Content-Type: text/xml"</span> <span class="se">\</span>
   -d <span class="s1">'
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;authorize&lt;/transaction_type&gt;
  &lt;transaction_id&gt;1915c52b28ff29edb12bc617ac102a03&lt;/transaction_id&gt;
  &lt;remote_ip&gt;245.253.2.12&lt;/remote_ip&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
  &lt;card_holder&gt;Travis Pastrana&lt;/card_holder&gt;
  &lt;card_number&gt;4200000000000000&lt;/card_number&gt;
  &lt;cvv&gt;834&lt;/cvv&gt;
  &lt;expiration_month&gt;12&lt;/expiration_month&gt;
  &lt;expiration_year&gt;2020&lt;/expiration_year&gt;
  &lt;travel&gt;
    &lt;ticket&gt;
    &lt;/ticket&gt;
    &lt;legs&gt;
      &lt;leg&gt;
        &lt;departure_date&gt;2017-03-10&lt;/departure_date&gt;
        &lt;carrier_code&gt;VX&lt;/carrier_code&gt;
        &lt;service_class&gt;J&lt;/service_class&gt;
        &lt;origin_city&gt;DUB&lt;/origin_city&gt;
        &lt;destination_city&gt;ATL&lt;/destination_city&gt;
        &lt;stopover_code&gt;1&lt;/stopover_code&gt;
        &lt;fare_basis_code&gt;0&lt;/fare_basis_code&gt;
        &lt;flight_number&gt;&lt;/flight_number&gt;
      &lt;/leg&gt;
    &lt;/legs&gt;
  &lt;/travel&gt;
&lt;/payment_transaction&gt;'</span>
</code></pre>

<blockquote>
<p>Request</p>
</blockquote>

<pre class="highlight php tab-php"><code><span class="cp">&lt;?php</span>

<span class="c1">// Load the pre-configured ini file...
</span><span class="nx">\Genesis\Config</span><span class="o">::</span><span class="na">loadSettings</span><span class="p">(</span><span class="s1">'/path/to/config.ini'</span><span class="p">);</span>

<span class="nv">$genesis</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Genesis</span><span class="p">(</span><span class="s1">'Financial\Capture'</span><span class="p">);</span>
<span class="nv">$request</span> <span class="o">=</span> <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">request</span><span class="p">();</span>

<span class="nv">$request</span>
  <span class="o">-&gt;</span><span class="na">setTransactionId</span><span class="p">(</span><span class="s1">'7fcc6097153beeec1dd1e71f643198d8'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setRemoteIp</span><span class="p">(</span><span class="s1">'245.253.2.12'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setAmount</span><span class="p">(</span><span class="s1">'100'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setCurrency</span><span class="p">(</span><span class="s1">'USD'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setReferenceId</span><span class="p">(</span><span class="s1">'1f2ee425e7c3159c60743098071771eb'</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setTravel</span><span class="p">(</span><span class="s1">'{"ticket"=&gt;{"ticket_number"=&gt;12345678123456, "passenger_name"=&gt;"Passenger 01", "customer_code"=&gt;"", "restricted_ticket_indicator"=&gt;0, "agency_name"=&gt;"New Agency", "agency_code"=&gt;"AGN001"}, "legs"=&gt;[]}'</span><span class="p">);</span>

<span class="k">try</span> <span class="p">{</span>
    <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">execute</span><span class="p">();</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">response</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">getResponseObject</span><span class="p">();</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">\Exception</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$e</span><span class="o">-&gt;</span><span class="na">getMessage</span><span class="p">();</span>
<span class="p">}</span>
</code></pre>

<pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.GenesisClient</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.TransactionResult</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.constants.Endpoints</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.constants.Environments</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.requests.financial.CaptureRequest</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.model.Transaction</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Configuration</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Country</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Currency</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.math.BigDecimal</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">GenesisExample</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">()</span>  <span class="o">{</span>

    <span class="c1">// Create configuration</span>
    <span class="n">Configuration</span> <span class="n">configuration</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Configuration</span><span class="o">(</span><span class="n">Environments</span><span class="o">.</span><span class="na">STAGING</span><span class="o">,</span> <span class="n">Endpoints</span><span class="o">.</span><span class="na">EMERCHANTPAY</span><span class="o">);</span>

    <span class="n">configuration</span><span class="o">.</span><span class="na">setUsername</span><span class="o">(</span><span class="s">"SET_YOUR_USERNAME"</span><span class="o">);</span>
    <span class="n">configuration</span><span class="o">.</span><span class="na">setPassword</span><span class="o">(</span><span class="s">"SET_YOUR_PASSWORD"</span><span class="o">);</span>
    <span class="n">configuration</span><span class="o">.</span><span class="na">setToken</span><span class="o">(</span><span class="s">"SET_YOUR_TOKEN"</span><span class="o">);</span>

    <span class="n">CaptureRequest</span> <span class="n">request</span> <span class="o">=</span> <span class="k">new</span> <span class="n">CaptureRequest</span><span class="o">();</span>

    <span class="n">request</span><span class="o">.</span><span class="na">setTransactionId</span><span class="o">(</span><span class="s">"7fcc6097153beeec1dd1e71f643198d8"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setRemoteIp</span><span class="o">(</span><span class="s">"245.253.2.12"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setAmount</span><span class="o">(</span><span class="k">new</span> <span class="n">BigDecimal</span><span class="o">(</span><span class="mi">100</span><span class="o">));</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setCurrency</span><span class="o">(</span><span class="s">"USD"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setReferenceId</span><span class="o">(</span><span class="s">"1f2ee425e7c3159c60743098071771eb"</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setTravel</span><span class="o">(</span><span class="s">"{"</span><span class="n">ticket</span><span class="s">"=&gt;{"</span><span class="n">ticket_number</span><span class="s">"=&gt;12345678123456, "</span><span class="n">passenger_name</span><span class="s">"=&gt;"</span><span class="n">Passenger</span> <span class="mo">01</span><span class="s">", "</span><span class="n">customer_code</span><span class="s">"=&gt;"", "</span><span class="n">restricted_ticket_indicator</span><span class="s">"=&gt;0, "</span><span class="n">agency_name</span><span class="s">"=&gt;"</span><span class="n">New</span> <span class="n">Agency</span><span class="s">", "</span><span class="n">agency_code</span><span class="s">"=&gt;"</span><span class="n">AGN001</span><span class="s">"}, "</span><span class="n">legs</span><span class="s">"=&gt;[]}"</span><span class="o">);</span>

    <span class="n">GenesisClient</span> <span class="n">client</span> <span class="o">=</span> <span class="k">new</span> <span class="n">GenesisClient</span><span class="o">(</span><span class="n">configuration</span><span class="o">,</span> <span class="n">request</span><span class="o">);</span>
    <span class="n">client</span><span class="o">.</span><span class="na">execute</span><span class="o">();</span>

    <span class="c1">// Parse Payment result</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">client</span><span class="o">.</span><span class="na">getResponse</span><span class="o">());</span>

  <span class="o">}</span>
<span class="o">}</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="kd">var</span> <span class="nx">genesis</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'genesis.js/lib/genesis.js'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">transaction</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">genesis</span><span class="p">.</span><span class="nx">transaction</span><span class="p">();</span>

<span class="kd">var</span> <span class="nx">failure</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">reason</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">reason</span><span class="p">);</span>
<span class="p">};</span>

<span class="kd">var</span> <span class="nx">success</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>

<span class="nx">transaction</span><span class="p">.</span><span class="nx">capture</span><span class="p">(</span>
  <span class="p">{</span>
    <span class="s2">"transaction_id"</span><span class="p">:</span> <span class="s2">"7fcc6097153beeec1dd1e71f643198d8"</span><span class="p">,</span>
    <span class="s2">"remote_ip"</span><span class="p">:</span> <span class="s2">"245.253.2.12"</span><span class="p">,</span>
    <span class="s2">"amount"</span><span class="p">:</span> <span class="s2">"100"</span><span class="p">,</span>
    <span class="s2">"currency"</span><span class="p">:</span> <span class="s2">"USD"</span><span class="p">,</span>
    <span class="s2">"reference_id"</span><span class="p">:</span> <span class="s2">"1f2ee425e7c3159c60743098071771eb"</span><span class="p">,</span>
    <span class="s2">"travel"</span><span class="p">:</span> <span class="p">{</span>
      <span class="s2">"ticket"</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">"ticket_number"</span><span class="p">:</span> <span class="mi">12345678123456</span><span class="p">,</span>
        <span class="s2">"passenger_name"</span><span class="p">:</span> <span class="s2">"Passenger 01"</span><span class="p">,</span>
        <span class="s2">"customer_code"</span><span class="p">:</span> <span class="s2">""</span><span class="p">,</span>
        <span class="s2">"restricted_ticket_indicator"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="s2">"agency_name"</span><span class="p">:</span> <span class="s2">"New Agency"</span><span class="p">,</span>
        <span class="s2">"agency_code"</span><span class="p">:</span> <span class="s2">"AGN001"</span>
      <span class="p">},</span>
      <span class="s2">"legs"</span><span class="p">:</span> <span class="p">[</span>

      <span class="p">]</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">).</span><span class="nx">send</span><span class="p">()</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">success</span><span class="p">)</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">failure</span><span class="p">);</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>curl https://username:password@gate.emerchantpay.net/process/TERMINAL-TOKEN <span class="se">\</span>
   -H <span class="s2">"Content-Type: text/xml"</span> <span class="se">\</span>
   -d <span class="s1">'
&lt;payment_transaction&gt;
  &lt;transaction_type&gt;capture&lt;/transaction_type&gt;
  &lt;transaction_id&gt;7fcc6097153beeec1dd1e71f643198d8&lt;/transaction_id&gt;
  &lt;remote_ip&gt;245.253.2.12&lt;/remote_ip&gt;
  &lt;amount&gt;100&lt;/amount&gt;
  &lt;currency&gt;USD&lt;/currency&gt;
  &lt;reference_id&gt;1f2ee425e7c3159c60743098071771eb&lt;/reference_id&gt;
  &lt;travel&gt;
    &lt;ticket&gt;
      &lt;ticket_number&gt;12345678123456&lt;/ticket_number&gt;
      &lt;passenger_name&gt;Passenger 01&lt;/passenger_name&gt;
      &lt;customer_code&gt;&lt;/customer_code&gt;
      &lt;restricted_ticket_indicator&gt;0&lt;/restricted_ticket_indicator&gt;
      &lt;agency_name&gt;New Agency&lt;/agency_name&gt;
      &lt;agency_code&gt;AGN001&lt;/agency_code&gt;
    &lt;/ticket&gt;
    &lt;legs&gt;
    &lt;/legs&gt;
  &lt;/travel&gt;
&lt;/payment_transaction&gt;'</span>
</code></pre>
<h3 id='visa-refund'>Visa Refund</h3>
<aside class="notice">
The additional visa refund request parameters are applicable only when the reference transaction is <a href='#airline-itinerary-data-aid'>Airline Itinerary Data (AID)</a> or <a href='#ancillary-charges'>Ancillary Charges</a>.
</aside>

<blockquote>
<p>Request</p>
</blockquote>

<pre class="highlight php tab-php"><code><span class="cp">&lt;?php</span>

<span class="c1">// Load the pre-configured ini file...
</span><span class="nx">\Genesis\Config</span><span class="o">::</span><span class="na">loadSettings</span><span class="p">(</span><span class="s1">'/path/to/config.ini'</span><span class="p">);</span>

<span class="nv">$genesis</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Genesis</span><span class="p">(</span><span class="s1">'Financial\Refund'</span><span class="p">);</span>
<span class="nv">$request</span> <span class="o">=</span> <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">request</span><span class="p">();</span>

<span class="nv">$request</span>
  <span class="o">-&gt;</span><span class="na">set</span><span class="o">...</span><span class="p">(</span><span class="s1">''</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setTravel</span><span class="p">(</span><span class="s1">'{"ticket"=&gt;{"credit_reason_indicator_1"=&gt;"C", "credit_reason_indicator_2"=&gt;"A", "ticket_change_indicator"=&gt;"B"}}'</span><span class="p">);</span>

<span class="k">try</span> <span class="p">{</span>
    <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">execute</span><span class="p">();</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$genesis</span><span class="o">-&gt;</span><span class="na">response</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">getResponseObject</span><span class="p">();</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">\Exception</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$e</span><span class="o">-&gt;</span><span class="na">getMessage</span><span class="p">();</span>
<span class="p">}</span>
</code></pre>

<pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.GenesisClient</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.TransactionResult</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.constants.Endpoints</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.constants.Environments</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.api.requests.financial.RefundRequest</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.model.Transaction</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Configuration</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Country</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.emerchantpay.gateway.util.Currency</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">GenesisExample</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">()</span>  <span class="o">{</span>

    <span class="c1">// Create configuration</span>
    <span class="n">Configuration</span> <span class="n">configuration</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Configuration</span><span class="o">(</span><span class="n">Environments</span><span class="o">.</span><span class="na">STAGING</span><span class="o">,</span> <span class="n">Endpoints</span><span class="o">.</span><span class="na">EMERCHANTPAY</span><span class="o">);</span>

    <span class="n">configuration</span><span class="o">.</span><span class="na">setUsername</span><span class="o">(</span><span class="s">"SET_YOUR_USERNAME"</span><span class="o">);</span>
    <span class="n">configuration</span><span class="o">.</span><span class="na">setPassword</span><span class="o">(</span><span class="s">"SET_YOUR_PASSWORD"</span><span class="o">);</span>
    <span class="n">configuration</span><span class="o">.</span><span class="na">setToken</span><span class="o">(</span><span class="s">"SET_YOUR_TOKEN"</span><span class="o">);</span>

    <span class="n">RefundRequest</span> <span class="n">request</span> <span class="o">=</span> <span class="k">new</span> <span class="n">RefundRequest</span><span class="o">();</span>

    <span class="n">request</span><span class="o">.</span><span class="na">set</span><span class="o">...(</span><span class="s">""</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setTravel</span><span class="o">(</span><span class="s">"{"</span><span class="n">ticket</span><span class="s">"=&gt;{"</span><span class="n">credit_reason_indicator_1</span><span class="s">"=&gt;"</span><span class="n">C</span><span class="s">", "</span><span class="n">credit_reason_indicator_2</span><span class="s">"=&gt;"</span><span class="n">A</span><span class="s">", "</span><span class="n">ticket_change_indicator</span><span class="s">"=&gt;"</span><span class="n">B</span><span class="s">"}}"</span><span class="o">);</span>

    <span class="n">GenesisClient</span> <span class="n">client</span> <span class="o">=</span> <span class="k">new</span> <span class="n">GenesisClient</span><span class="o">(</span><span class="n">configuration</span><span class="o">,</span> <span class="n">request</span><span class="o">);</span>
    <span class="n">client</span><span class="o">.</span><span class="na">execute</span><span class="o">();</span>

    <span class="c1">// Parse Payment result</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">client</span><span class="o">.</span><span class="na">getResponse</span><span class="o">());</span>

  <span class="o">}</span>
<span class="o">}</span>
</code></pre>

<pre class="highlight javascript tab-javascript--node"><code><span class="kd">var</span> <span class="nx">genesis</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'genesis.js/lib/genesis.js'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">transaction</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">genesis</span><span class="p">.</span><span class="nx">transaction</span><span class="p">();</span>

<span class="kd">var</span> <span class="nx">failure</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">reason</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">reason</span><span class="p">);</span>
<span class="p">};</span>

<span class="kd">var</span> <span class="nx">success</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>

<span class="nx">transaction</span><span class="p">.</span><span class="nx">refund</span><span class="p">(</span>
  <span class="p">{</span>
    <span class="s2">"..."</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
    <span class="s2">"travel"</span><span class="p">:</span> <span class="p">{</span>
      <span class="s2">"ticket"</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">"credit_reason_indicator_1"</span><span class="p">:</span> <span class="s2">"C"</span><span class="p">,</span>
        <span class="s2">"credit_reason_indicator_2"</span><span class="p">:</span> <span class="s2">"A"</span><span class="p">,</span>
        <span class="s2">"ticket_change_indicator"</span><span class="p">:</span> <span class="s2">"B"</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">).</span><span class="nx">send</span><span class="p">()</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">success</span><span class="p">)</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">failure</span><span class="p">);</span>
</code></pre>

<pre class="highlight shell tab-shell"><code>curl https://username:password@gate.emerchantpay.net/process/TERMINAL-TOKEN <span class="se">\</span>
   -H <span class="s2">"Content-Type: text/xml"</span> <span class="se">\</span>
   -d <span class="s1">'
&lt;payment_transaction&gt;
  &lt;...&gt;&lt;/...&gt;
  &lt;travel&gt;
    &lt;ticket&gt;
      &lt;credit_reason_indicator_1&gt;C&lt;/credit_reason_indicator_1&gt;
      &lt;credit_reason_indicator_2&gt;A&lt;/credit_reason_indicator_2&gt;
      &lt;ticket_change_indicator&gt;B&lt;/ticket_change_indicator&gt;
    &lt;/ticket&gt;
  &lt;/travel&gt;
&lt;/payment_transaction&gt;'</span>
</code></pre>

<p><strong>Request Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>travel</strong></td>
<td>optional</td>
<td></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;<strong>ticket</strong></td>
<td>optional</td>
<td></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;credit_reason_indicator_1</td>
<td>optional</td>
<td>String(1)</td>
<td>This field indicates the reason for a credit to the cardholder. Allowed values: A, B, P, O</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;credit_reason_indicator_2</td>
<td>optional</td>
<td>String(1)</td>
<td>This field indicates the reason for a credit to the cardholder. Allowed values: A, B, P, O</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ticket_change_indicator</td>
<td>optional</td>
<td>String(1)</td>
<td>This field will contain either a space or a code to indicate why a ticket was changed. Allowed values: C, N</td>
</tr>
</tbody></table>

<p><code>required* = conditionally required</code></p>
<h2 id='allowed-values'>Allowed Values</h2><h3 id='car-rental-classes'>Car Rental Classes</h3>
<table><thead>
<tr>
<th>Value</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>1</td>
<td>Mini</td>
</tr>
<tr>
<td>2</td>
<td>Subcompact</td>
</tr>
<tr>
<td>3</td>
<td>Economy</td>
</tr>
<tr>
<td>4</td>
<td>Compact</td>
</tr>
<tr>
<td>5</td>
<td>Midsize</td>
</tr>
<tr>
<td>6</td>
<td>Intermediate</td>
</tr>
<tr>
<td>7</td>
<td>Standard</td>
</tr>
<tr>
<td>8</td>
<td>Full size</td>
</tr>
<tr>
<td>9</td>
<td>Luxury</td>
</tr>
<tr>
<td>10</td>
<td>Premium</td>
</tr>
<tr>
<td>11</td>
<td>Minivan</td>
</tr>
<tr>
<td>12</td>
<td>12 passenger van</td>
</tr>
<tr>
<td>13</td>
<td>Moving van</td>
</tr>
<tr>
<td>14</td>
<td>15 passenger van</td>
</tr>
<tr>
<td>15</td>
<td>Cargo van</td>
</tr>
<tr>
<td>16</td>
<td>12 foot truck</td>
</tr>
<tr>
<td>17</td>
<td>20 foot truck</td>
</tr>
<tr>
<td>18</td>
<td>24 foot truck</td>
</tr>
<tr>
<td>19</td>
<td>26 foot truck</td>
</tr>
<tr>
<td>20</td>
<td>Moped</td>
</tr>
<tr>
<td>21</td>
<td>Stretch limousine</td>
</tr>
<tr>
<td>22</td>
<td>Regular limousine</td>
</tr>
<tr>
<td>23</td>
<td>Unique limousine</td>
</tr>
<tr>
<td>24</td>
<td>Exotic limousine</td>
</tr>
<tr>
<td>25</td>
<td>Small/medium truck</td>
</tr>
<tr>
<td>26</td>
<td>Large truck</td>
</tr>
<tr>
<td>27</td>
<td>Small SUV</td>
</tr>
<tr>
<td>28</td>
<td>Medium SUV</td>
</tr>
<tr>
<td>29</td>
<td>Large SUV</td>
</tr>
<tr>
<td>30</td>
<td>Exotic SUV</td>
</tr>
<tr>
<td>9999</td>
<td>Miscellaneous</td>
</tr>
</tbody></table>
<h3 id='charge-types'>Charge Types</h3>
<table><thead>
<tr>
<th>Value</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>BF</td>
<td>Bundled Service</td>
</tr>
<tr>
<td>BG</td>
<td>Baggage Fee</td>
</tr>
<tr>
<td>CF</td>
<td>Change Fee</td>
</tr>
<tr>
<td>CG</td>
<td>Cargo</td>
</tr>
<tr>
<td>CO</td>
<td>Carbon Offset</td>
</tr>
<tr>
<td>FF</td>
<td>Frequent Flyer</td>
</tr>
<tr>
<td>GF</td>
<td>Gift Card</td>
</tr>
<tr>
<td>GT</td>
<td>Ground Transport</td>
</tr>
<tr>
<td>IE</td>
<td>In-flight Entertainment</td>
</tr>
<tr>
<td>LG</td>
<td>Lounge</td>
</tr>
<tr>
<td>MD</td>
<td>Medical</td>
</tr>
<tr>
<td>ML</td>
<td>Meal / Beverage</td>
</tr>
<tr>
<td>OT</td>
<td>Other</td>
</tr>
<tr>
<td>PA</td>
<td>Passenger Assist Fee</td>
</tr>
<tr>
<td>PT</td>
<td>Pets</td>
</tr>
<tr>
<td>SA</td>
<td>Seat Fees</td>
</tr>
<tr>
<td>SB</td>
<td>Standby</td>
</tr>
<tr>
<td>SF</td>
<td>Service Fee</td>
</tr>
<tr>
<td>ST</td>
<td>Store</td>
</tr>
<tr>
<td>TS</td>
<td>Travel Service</td>
</tr>
<tr>
<td>UN</td>
<td>Unaccompanied Travel</td>
</tr>
<tr>
<td>UP</td>
<td>Upgrades</td>
</tr>
<tr>
<td>WI</td>
<td>Wi-Fi</td>
</tr>
<tr>
<td>MISC</td>
<td>Miscellaneous Airline Charges</td>
</tr>
</tbody></table>
<h3 id='car-rental-extra-charges'>Car Rental Extra Charges</h3>
<table><thead>
<tr>
<th>Value</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>1</td>
<td>Gas</td>
</tr>
<tr>
<td>2</td>
<td>Extra Mileage</td>
</tr>
<tr>
<td>3</td>
<td>Late Return</td>
</tr>
<tr>
<td>4</td>
<td>1 Way Ser Fee</td>
</tr>
<tr>
<td>5</td>
<td>Parking Violation</td>
</tr>
</tbody></table>
<h3 id='hotel-rental-extra-charges'>Hotel Rental Extra Charges</h3>
<table><thead>
<tr>
<th>Value</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>2</td>
<td>Restaurant</td>
</tr>
<tr>
<td>3</td>
<td>Gift Shop</td>
</tr>
<tr>
<td>4</td>
<td>Mini Bar</td>
</tr>
<tr>
<td>5</td>
<td>Telephone</td>
</tr>
<tr>
<td>6</td>
<td>Laundry</td>
</tr>
<tr>
<td>7</td>
<td>Other</td>
</tr>
</tbody></table>
<h3 id='ticket-change-indicators'>Ticket Change Indicators</h3>
<table><thead>
<tr>
<th>Value</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>C</td>
<td>Change to existing Ticket</td>
</tr>
<tr>
<td>N</td>
<td>New ticket</td>
</tr>
</tbody></table>
<h3 id='credit-reason-indicators'>Credit Reason Indicators</h3>
<table><thead>
<tr>
<th>Value</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>A</td>
<td>Passenger Transport Ancillary Cancellation</td>
</tr>
<tr>
<td>B</td>
<td>Travel Ticket and Passenger Transport</td>
</tr>
<tr>
<td>P</td>
<td>Partial Refund of Travel Ticket</td>
</tr>
<tr>
<td>O</td>
<td>Other</td>
</tr>
</tbody></table>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="shell">cURL</a>
                <a href="#" data-language-name="php">PHP</a>
                <a href="#" data-language-name="java">Java</a>
                <a href="#" data-language-name="javascript--node">Node.js</a>
          </div>
      </div>
    </div>
  </body>
</html>
